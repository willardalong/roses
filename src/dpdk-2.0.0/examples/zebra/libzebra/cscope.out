cscope 15 $HOME/work/rose/src/cmdline/libzebra -q 0000009424 0001047530
	@agentx.c

22 
	~<zebø.h
>

24 #i‡
deföed
 
HAVE_SNMP
 && deföed 
SNMP_AGENTX


25 
	~<√t-¢mp/√t-¢mp-c⁄fig.h
>

26 
	~<√t-¢mp/√t-¢mp-ö˛udes.h
>

28 
	~"comm™d.h
"

29 
	~"smux.h
"

31 
	gagítx_íabÀd
 = 0;

34 
cmd_node
 
	gagítx_node
 =

36 
SMUX_NODE
,

42 
	$agítx_log_ˇŒback
(
maj‹
, 
mö‹
,

43 *
£rvî¨g
, *
˛õ¡¨g
)

45 
¢mp_log_mesßge
 *
¶m
 = (¢mp_log_mesßgê*)
£rvî¨g
;

46 *
msg
 = 
	`°rdup
 (
¶m
->msg);

47 i‡(
msg
Ëmsg[
	`°æí
(msg)-1] = '\0';

48 
¶m
->
¥i‹ôy
)

50 
LOG_EMERG
: 
	`zlog_îr
 ("¢mp[emîg]: %s", 
msg
?msg:
¶m
->msg); ;

51 
LOG_ALERT
: 
	`zlog_îr
 ("¢mp[Æît]: %s", 
msg
?msg:
¶m
->msg); ;

52 
LOG_CRIT
: 
	`zlog_îr
 ("¢mp[¸ô]: %s", 
msg
?msg:
¶m
->msg); ;

53 
LOG_ERR
: 
	`zlog_îr
 ("¢mp[îr]: %s", 
msg
?msg:
¶m
->msg); ;

54 
LOG_WARNING
: 
	`zlog_w¨n
 ("¢mp[w¨nög]: %s", 
msg
?msg:
¶m
->msg); ;

55 
LOG_NOTICE
: 
	`zlog_nŸi˚
("¢mp[nŸi˚]: %s", 
msg
?msg:
¶m
->msg); ;

56 
LOG_INFO
: 
	`zlog_öfo
 ("¢mp[öfo]: %s", 
msg
?msg:
¶m
->msg); ;

57 
LOG_DEBUG
: 
	`zlog_debug
 ("¢mp[debug]: %s", 
msg
?msg:
¶m
->msg); ;

59 
	`‰ì
(
msg
);

60  
SNMP_ERR_NOERROR
;

61 
	}
}

64 
	$c⁄fig_wrôe_agítx
 (
vty
 *vty)

66 i‡(
agítx_íabÀd
)

67 
	`vty_out
 (
vty
, "agítx%s", 
VTY_NEWLINE
);

69 
	}
}

71 
DEFUN
 (
agítx_íabÀ
,

72 
agítx_íabÀ_cmd
,

77 i‡(!
	gagítx_íabÀd
)

79 
öô_¢mp
("quagga");

80 
	gagítx_íabÀd
 = 1;

81  
	gCMD_SUCCESS
;

83 
vty_out
 (
vty
, "SNMP AgítXáÃódyÉ«bÀd%s", 
VTY_NEWLINE
);

84  
	gCMD_WARNING
;

87 
DEFUN
 (
no_agítx
,

88 
no_agítx_cmd
,

90 
NO_STR


94 i‡(!
	gagítx_íabÀd
Ë 
	gCMD_SUCCESS
;

95 
vty_out
 (
vty
, "SNMP AgítX suµ‹àˇ¬Ÿ bêdißbÀd on˚É«bÀd%s", 
VTY_NEWLINE
);

96  
	gCMD_WARNING
;

100 
	$smux_öô
 (
thªad_ma°î
 *
tm
)

102 
	`√t¢mp_íabÀ_subagít
 ();

103 
	`¢mp_dißbÀ_log
 ();

104 
	`¢mp_íabÀ_ˇŒlog
 ();

105 
	`¢mp_ªgi°î_ˇŒback
 (
SNMP_CALLBACK_LIBRARY
,

106 
SNMP_CALLBACK_LOGGING
,

107 
agítx_log_ˇŒback
,

108 
NULL
);

109 
	`öô_agít
 ("quagga");

111 
	`ö°Æl_node
 (&
agítx_node
, 
c⁄fig_wrôe_agítx
);

112 
	`ö°Æl_ñemít
 (
CONFIG_NODE
, &
agítx_íabÀ_cmd
);

113 
	`ö°Æl_ñemít
 (
CONFIG_NODE
, &
no_agítx_cmd
);

114 
	}
}

117 
	$smux_ªgi°î_mib
 (c⁄° *
des¸
, 
v¨übÀ
 *
v¨
,

118 
size_t
 
width
, 
num
,

119 
oid
 
«me
[], 
size_t
 
«mñí
)

121 
	`ªgi°î_mib
 (
des¸
, 
v¨
, 
width
, 
num
, 
«me
, 
«mñí
);

122 
	}
}

125 
	$smux_å≠
 (
v¨übÀ
 *
vp
, 
size_t
 
vp_Àn
,

126 c⁄° 
oid
 *
íame
, 
size_t
 
íamñí
,

127 c⁄° 
oid
 *
«me
, 
size_t
 
«mñí
,

128 c⁄° 
oid
 *
öame
, 
size_t
 
öamñí
,

129 c⁄° 
å≠_obje˘
 *
å≠obj
, 
size_t
 
å≠objÀn
,

130 
u_ch¨
 
•å≠
)

132 
oid
 
objid_¢m±øp
[] = { 1, 3, 6, 1, 6, 3, 1, 1, 4, 1, 0 };

133 
size_t
 
objid_¢m±øp_Àn
 =  
objid_¢m±øp
 /  (
oid
);

134 
oid
 
nŸifiˇti⁄_oid
[
MAX_OID_LEN
];

135 
size_t
 
nŸifiˇti⁄_oid_Àn
;

136 
i
;

138 
√t¢mp_v¨übÀ_li°
 *
nŸifiˇti⁄_v¨s
 = 
NULL
;

139 i‡(!
agítx_íabÀd
)  0;

142 
	`oid_c›y
 (
nŸifiˇti⁄_oid
, 
íame
, 
íamñí
);

143 
nŸifiˇti⁄_oid
[
íamñí
] = 
•å≠
;

144 
nŸifiˇti⁄_oid_Àn
 = 
íamñí
 + 1;

145 
	`¢mp_v¨li°_add_v¨übÀ
 (&
nŸifiˇti⁄_v¨s
,

146 
objid_¢m±øp
, 
objid_¢m±øp_Àn
,

147 
ASN_OBJECT_ID
,

148 (
u_ch¨
 *Ë
nŸifiˇti⁄_oid
,

149 
nŸifiˇti⁄_oid_Àn
 * (
oid
));

152 
i
 = 0; i < 
å≠objÀn
; i++)

154 
j
;

155 
oid
 oid[
MAX_OID_LEN
];

156 
size_t
 
oid_Àn
, 
⁄amñí
;

157 
u_ch¨
 *
vÆ
;

158 
size_t
 
vÆ_Àn
;

159 
WrôeMëhod
 *
wm
 = 
NULL
;

160 
v¨übÀ
 
cvp
;

163 i‡(
å≠obj
[
i
].
«mñí
 > 0)

166 
⁄amñí
 = 
å≠obj
[
i
].
«mñí
;

167 
	`oid_c›y
 (
oid
, 
«me
, 
«mñí
);

168 
	`oid_c›y
 (
oid
 + 
«mñí
, 
å≠obj
[
i
].
«me
, 
⁄amñí
);

169 
	`oid_c›y
 (
oid
 + 
«mñí
 + 
⁄amñí
, 
öame
, 
öamñí
);

170 
oid_Àn
 = 
«mñí
 + 
⁄amñí
 + 
öamñí
;

175 
⁄amñí
 = 
å≠obj
[
i
].
«mñí
 * (-1);

176 
	`oid_c›y
 (
oid
, 
«me
, 
«mñí
);

177 
	`oid_c›y
 (
oid
 + 
«mñí
, 
å≠obj
[
i
].
«me
, 
⁄amñí
);

178 
oid
[
⁄amñí
 + 
«mñí
] = 0;

179 
oid_Àn
 = 
«mñí
 + 
⁄amñí
 + 1;

183 
j
 = 0; j < 
vp_Àn
; j++)

185 i‡(
	`oid_com∑ª
 (
å≠obj
[
i
].
«me
, 
⁄amñí
, 
vp
[
j
].«me, vp[j].
«mñí
) != 0)

188 
	`oid_c›y
(
cvp
.
«me
,Çame, 
«mñí
);

189 
	`oid_c›y
(
cvp
.
«me
 + 
«mñí
, 
vp
[
j
].name, vp[j].namelen);

190 
cvp
.
«mñí
 =Çamñí + 
vp
[
j
].namelen;

191 
cvp
.
ty≥
 = 
vp
[
j
].type;

192 
cvp
.
magic
 = 
vp
[
j
].magic;

193 
cvp
.
a˛
 = 
vp
[
j
].acl;

194 
cvp
.
födV¨
 = 
vp
[
j
].findVar;

196 
vÆ
 = 
cvp
.
	`födV¨
 (&cvp, 
oid
, &
oid_Àn
, 1, &
vÆ_Àn
, &
wm
);

197 i‡(!
vÆ
) ;

198 
	`¢mp_v¨li°_add_v¨übÀ
 (&
nŸifiˇti⁄_v¨s
,

199 
oid
, 
oid_Àn
,

200 
vp
[
j
].
ty≥
,

201 
vÆ
,

202 
vÆ_Àn
);

208 
	`£nd_v2å≠
 (
nŸifiˇti⁄_v¨s
);

209 
	`¢mp_‰ì_v¨böd
 (
nŸifiˇti⁄_v¨s
);

211 
	}
}

	@buffer.c

23 
	~<zebø.h
>

25 
	~"mem‹y.h
"

26 
	~"buf„r.h
"

27 
	~"log.h
"

28 
	~"√tw‹k.h
"

29 
	~<°ddef.h
>

34 
	sbuf„r


37 
buf„r_d©a
 *
	mhód
;

38 
buf„r_d©a
 *
	mèû
;

41 
size_t
 
	msize
;

45 
	sbuf„r_d©a


47 
buf„r_d©a
 *
	m√xt
;

50 
size_t
 
	m˝
;

53 
size_t
 
	m•
;

56 
	md©a
[];

63 
	#BUFFER_SIZE_DEFAULT
 4096

	)

66 
	#BUFFER_DATA_FREE
(
D
Ë
	`XFREE
(
MTYPE_BUFFER_DATA
, (D))

	)

69 
buf„r
 *

70 
	$buf„r_√w
 (
size_t
 
size
)

72 
buf„r
 *
b
;

74 
b
 = 
	`XCALLOC
 (
MTYPE_BUFFER
,  (
buf„r
));

76 i‡(
size
)

77 
b
->
size
 = size;

80 
size_t
 
deÁu…_size
;

81 i‡(!
deÁu…_size
)

83 
pgsz
 = 
	`sysc⁄f
(
_SC_PAGESIZE
);

84 
deÁu…_size
 = ((((
BUFFER_SIZE_DEFAULT
-1)/
pgsz
)+1)*pgsz);

86 
b
->
size
 = 
deÁu…_size
;

89  
b
;

90 
	}
}

94 
	$buf„r_‰ì
 (
buf„r
 *
b
)

96 
	`buf„r_ª£t
(
b
);

97 
	`XFREE
 (
MTYPE_BUFFER
, 
b
);

98 
	}
}

102 
	$buf„r_gë°r
 (
buf„r
 *
b
)

104 
size_t
 
tŸÀn
 = 0;

105 
buf„r_d©a
 *
d©a
;

106 *
s
;

107 *
p
;

109 
d©a
 = 
b
->
hód
; d©a; d©®d©a->
√xt
)

110 
tŸÀn
 +
d©a
->
˝
 - d©a->
•
;

111 i‡(!(
s
 = 
	`XMALLOC
(
MTYPE_TMP
, 
tŸÀn
+1)))

112  
NULL
;

113 
p
 = 
s
;

114 
d©a
 = 
b
->
hód
; d©a; d©®d©a->
√xt
)

116 
	`mem˝y
(
p
, 
d©a
->d©®+ d©a->
•
, d©a->
˝
 - data->sp);

117 
p
 +
d©a
->
˝
 - d©a->
•
;

119 *
p
 = '\0';

120  
s
;

121 
	}
}

125 
	$buf„r_em±y
 (
buf„r
 *
b
)

127  (
b
->
hód
 =
NULL
);

128 
	}
}

132 
	$buf„r_ª£t
 (
buf„r
 *
b
)

134 
buf„r_d©a
 *
d©a
;

135 
buf„r_d©a
 *
√xt
;

137 
d©a
 = 
b
->
hód
; d©a; d©®
√xt
)

139 
√xt
 = 
d©a
->next;

140 
	`BUFFER_DATA_FREE
(
d©a
);

142 
b
->
hód
 = b->
èû
 = 
NULL
;

143 
	}
}

146 
buf„r_d©a
 *

147 
	$buf„r_add
 (
buf„r
 *
b
)

149 
buf„r_d©a
 *
d
;

151 
d
 = 
	`XMALLOC
(
MTYPE_BUFFER_DATA
, 
	`off£tof
(
buf„r_d©a
, 
d©a
[
b
->
size
]));

152 
d
->
˝
 = d->
•
 = 0;

153 
d
->
√xt
 = 
NULL
;

155 i‡(
b
->
èû
)

156 
b
->
èû
->
√xt
 = 
d
;

158 
b
->
hód
 = 
d
;

159 
b
->
èû
 = 
d
;

161  
d
;

162 
	}
}

166 
	$buf„r_put
(
buf„r
 *
b
, c⁄° *
p
, 
size_t
 
size
)

168 
buf„r_d©a
 *
d©a
 = 
b
->
èû
;

169 c⁄° *
±r
 = 
p
;

172 
size
)

174 
size_t
 
chunk
;

177 i‡(
d©a
 =
NULL
 || d©a->
˝
 =
b
->
size
)

178 
d©a
 = 
	`buf„r_add
 (
b
);

180 
chunk
 = ((
size
 <(
b
->sizê- 
d©a
->
˝
)) ? size : (b->size - data->cp));

181 
	`mem˝y
 ((
d©a
->d©®+ d©a->
˝
), 
±r
, 
chunk
);

182 
size
 -
chunk
;

183 
±r
 +
chunk
;

184 
d©a
->
˝
 +
chunk
;

186 
	}
}

190 
	$buf„r_putc
 (
buf„r
 *
b
, 
u_ch¨
 
c
)

192 
	`buf„r_put
(
b
, &
c
, 1);

193 
	}
}

197 
	$buf„r_put°r
 (
buf„r
 *
b
, c⁄° *
c
)

199 
	`buf„r_put
(
b
, 
c
, 
	`°æí
(c));

200 
	}
}

204 
buf„r_°©us_t


205 
	$buf„r_Êush_Æl
 (
buf„r
 *
b
, 
fd
)

207 
buf„r_°©us_t
 
ªt
;

208 
buf„r_d©a
 *
hód
;

209 
size_t
 
hód_•
;

211 i‡(!
b
->
hód
)

212  
BUFFER_EMPTY
;

213 
hód_•
 = (
hód
 = 
b
->hód)->
•
;

215 (
ªt
 = 
	`buf„r_Êush_avaûabÀ
(
b
, 
fd
)Ë=
BUFFER_PENDING
)

217 i‡((
b
->
hód
 =hódË&& (
hód_•
 =hód->
•
Ë&& (
î∫o
 !
EINTR
))

219  
ªt
;

220 
hód_•
 = (
hód
 = 
b
->hód)->
•
;

223  
ªt
;

224 
	}
}

228 
buf„r_°©us_t


229 
	$buf„r_Êush_wödow
 (
buf„r
 *
b
, 
fd
, 
width
, 
height
,

230 
îa£_Êag
, 
no_m‹e_Êag
)

232 
nbyãs
;

233 
iov_Æloc
;

234 
iov_ödex
;

235 
iovec
 *
iov
;

236 
iovec
 
smÆl_iov
[3];

237 
m‹e
[] = " --More-- ";

238 
îa£
[] = { 0x08, 0x08, 0x08, 0x08, 0x08, 0x08, 0x08, 0x08, 0x08, 0x08,

241 
buf„r_d©a
 *
d©a
;

242 
cﬁumn
;

244 i‡(!
b
->
hód
)

245  
BUFFER_EMPTY
;

247 i‡(
height
 < 1)

249 
	`zlog_w¨n
("%s called withÇon-positive window height %d, forcingÅo 1",

250 
__func__
, 
height
);

251 
height
 = 1;

253 i‡(
height
 >= 2)

254 
height
--;

255 i‡(
width
 < 1)

257 
	`zlog_w¨n
("%s called withÇon-positive window width %d, forcingÅo 1",

258 
__func__
, 
width
);

259 
width
 = 1;

263 i‡(
b
->
hód
->
√xt
 =
NULL
)

265 
iov_Æloc
 = 
	`¨øy_size
(
smÆl_iov
);

266 
iov
 = 
smÆl_iov
;

270 
iov_Æloc
 = ((
height
*(
width
+2))/
b
->
size
)+10;

271 
iov
 = 
	`XMALLOC
(
MTYPE_TMP
, 
iov_Æloc
*(*iov));

273 
iov_ödex
 = 0;

276 i‡(
îa£_Êag
)

278 
iov
[
iov_ödex
].
iov_ba£
 = 
îa£
;

279 
iov
[
iov_ödex
].
iov_Àn
 =  
îa£
;

280 
iov_ödex
++;

284 
cﬁumn
 = 1;

285 
d©a
 = 
b
->
hód
; d©®&& (
height
 > 0); d©®d©a->
√xt
)

287 
size_t
 
˝
;

289 
˝
 = 
d©a
->
•
;

290 (
˝
 < 
d©a
->˝Ë&& (
height
 > 0))

294 i‡(
d©a
->d©a[
˝
] == '\r')

295 
cﬁumn
 = 1;

296 i‡((
d©a
->d©a[
˝
] ='\n'Ë|| (
cﬁumn
 =
width
))

298 
cﬁumn
 = 1;

299 
height
--;

302 
cﬁumn
++;

303 
˝
++;

305 
iov
[
iov_ödex
].
iov_ba£
 = (*)(
d©a
->d©®+ d©a->
•
);

306 
iov
[
iov_ödex
++].
iov_Àn
 = 
˝
-
d©a
->
•
;

307 
d©a
->
•
 = 
˝
;

309 i‡(
iov_ödex
 =
iov_Æloc
)

312 
iov_Æloc
 *= 2;

313 i‡(
iov
 !
smÆl_iov
)

315 
	`zlog_w¨n
("%s: growing iovárrayÅo %d; "

317 
__func__
, 
iov_Æloc
, 
width
, 
height
, (
u_l⁄g
)
b
->
size
);

318 
iov
 = 
	`XREALLOC
(
MTYPE_TMP
, iov, 
iov_Æloc
*(*iov));

323 
	`zlog_îr
("%s: corruption detected: iov_small overflowed; "

325 
__func__
, 
b
->
hód
, b->
èû
, b->hód->
√xt
);

326 
iov
 = 
	`XMALLOC
(
MTYPE_TMP
, 
iov_Æloc
*(*iov));

327 
	`mem˝y
(
iov
, 
smÆl_iov
, (small_iov));

333 i‡(
b
->
èû
 && (b->èû->
•
 < b->èû->
˝
Ë&& !
no_m‹e_Êag
)

335 
iov
[
iov_ödex
].
iov_ba£
 = 
m‹e
;

336 
iov
[
iov_ödex
].
iov_Àn
 =  
m‹e
;

337 
iov_ödex
++;

341 #ifde‡
IOV_MAX


345 
iovec
 *
c_iov
 = 
iov
;

346 
nbyãs
 = 0;

348 
iov_ödex
 > 0)

350 
iov_size
;

352 
iov_size
 = ((
iov_ödex
 > 
IOV_MAX
) ? IOV_MAX : iov_index);

353 i‡((
nbyãs
 = 
	`wrôev
(
fd
, 
c_iov
, 
iov_size
)) < 0)

355 
	`zlog_w¨n
("%s: writevÅo fd %d failed: %s",

356 
__func__
, 
fd
, 
	`ß„_°ªº‹
(
î∫o
));

361 
c_iov
 +
iov_size
;

362 
iov_ödex
 -
iov_size
;

366 i‡((
nbyãs
 = 
	`wrôev
 (
fd
, 
iov
, 
iov_ödex
)) < 0)

367 
	`zlog_w¨n
("%s: writevÅo fd %d failed: %s",

368 
__func__
, 
fd
, 
	`ß„_°ªº‹
(
î∫o
));

372 
b
->
hód
 && (b->hód->
•
 =b->hód->
˝
))

374 
buf„r_d©a
 *
dñ
;

375 i‡(!(
b
->
hód
 = (
dñ
 = b->hód)->
√xt
))

376 
b
->
èû
 = 
NULL
;

377 
	`BUFFER_DATA_FREE
(
dñ
);

380 i‡(
iov
 !
smÆl_iov
)

381 
	`XFREE
 (
MTYPE_TMP
, 
iov
);

383  (
nbyãs
 < 0Ë? 
BUFFER_ERROR
 :

384 (
b
->
hód
 ? 
BUFFER_PENDING
 : 
BUFFER_EMPTY
);

385 
	}
}

392 
buf„r_°©us_t


393 
	$buf„r_Êush_avaûabÀ
(
buf„r
 *
b
, 
fd
)

399 #ifde‡
IOV_MAX


400 
	#MAX_CHUNKS
 ((
IOV_MAX
 >16Ë? 16 : IOV_MAX)

	)

402 
	#MAX_CHUNKS
 16

	)

404 
	#MAX_FLUSH
 131072

	)

406 
buf„r_d©a
 *
d
;

407 
size_t
 
wrôãn
;

408 
iovec
 
iov
[
MAX_CHUNKS
];

409 
size_t
 
iov˙t
 = 0;

410 
size_t
 
nbyã
 = 0;

412 
d
 = 
b
->
hód
; d && (
iov˙t
 < 
MAX_CHUNKS
Ë&& (
nbyã
 < 
MAX_FLUSH
);

413 
d
 = d->
√xt
, 
iov˙t
++)

415 
iov
[
iov˙t
].
iov_ba£
 = 
d
->
d©a
+d->
•
;

416 
nbyã
 +(
iov
[
iov˙t
].
iov_Àn
 = 
d
->
˝
-d->
•
);

419 i‡(!
nbyã
)

421  
BUFFER_EMPTY
;

424 i‡((
ssize_t
)(
wrôãn
 = 
	`wrôev
(
fd
,
iov
,
iov˙t
)) < 0)

426 i‡(
	`ERRNO_IO_RETRY
(
î∫o
))

428  
BUFFER_PENDING
;

429 
	`zlog_w¨n
("%s: writeÉrror on fd %d: %s",

430 
__func__
, 
fd
, 
	`ß„_°ªº‹
(
î∫o
));

431  
BUFFER_ERROR
;

435 
wrôãn
 > 0)

437 
buf„r_d©a
 *
d
;

438 i‡(!(
d
 = 
b
->
hód
))

440 
	`zlog_îr
("%s: corruption detected: buffer queueÉmpty, "

441 "buàwrôã¿i†%lu", 
__func__
, (
u_l⁄g
)
wrôãn
);

444 i‡(
wrôãn
 < 
d
->
˝
-d->
•
)

446 
d
->
•
 +
wrôãn
;

447  
BUFFER_PENDING
;

450 
wrôãn
 -(
d
->
˝
-d->
•
);

451 i‡(!(
b
->
hód
 = 
d
->
√xt
))

452 
b
->
èû
 = 
NULL
;

453 
	`BUFFER_DATA_FREE
(
d
);

456  
b
->
hód
 ? 
BUFFER_PENDING
 : 
BUFFER_EMPTY
;

458 #unde‡
MAX_CHUNKS


459 #unde‡
MAX_FLUSH


460 
	}
}

462 
buf„r_°©us_t


463 
	$buf„r_wrôe
(
buf„r
 *
b
, 
fd
, c⁄° *
p
, 
size_t
 
size
)

465 
ssize_t
 
nbyãs
;

472 i‡(
b
->
hód
 && (
	`buf„r_Êush_avaûabÀ
(b, 
fd
Ë=
BUFFER_ERROR
))

473  
BUFFER_ERROR
;

475 i‡(
b
->
hód
)

477 
nbyãs
 = 0;

478 i‡((
nbyãs
 = 
	`wrôe
(
fd
, 
p
, 
size
)) < 0)

480 i‡(
	`ERRNO_IO_RETRY
(
î∫o
))

481 
nbyãs
 = 0;

484 
	`zlog_w¨n
("%s: writeÉrror on fd %d: %s",

485 
__func__
, 
fd
, 
	`ß„_°ªº‹
(
î∫o
));

486  
BUFFER_ERROR
;

491 
size_t
 
wrôãn
 = 
nbyãs
;

492 i‡(
wrôãn
 < 
size
)

493 
	`buf„r_put
(
b
, ((c⁄° *)
p
)+
wrôãn
, 
size
-written);

495  
b
->
hód
 ? 
BUFFER_PENDING
 : 
BUFFER_EMPTY
;

496 
	}
}

	@buffer.h

23 #i‚de‡
_ZEBRA_BUFFER_H


24 
	#_ZEBRA_BUFFER_H


	)

30 
buf„r
 *
buf„r_√w
 (
size_t
);

33 
buf„r_ª£t
 (
buf„r
 *);

37 
buf„r_‰ì
 (
buf„r
 *);

40 
buf„r_put
 (
buf„r
 *, c⁄° *, 
size_t
);

42 
buf„r_putc
 (
buf„r
 *, 
u_ch¨
);

44 
buf„r_put°r
 (
buf„r
 *, const *);

50 *
buf„r_gë°r
 (
buf„r
 *);

53 
buf„r_em±y
 (
buf„r
 *);

59 
	mBUFFER_ERROR
 = -1,

63 
	mBUFFER_EMPTY
 = 0,

68 
	mBUFFER_PENDING
 = 1

69 } 
	tbuf„r_°©us_t
;

73 
buf„r_°©us_t
 
buf„r_wrôe
(
buf„r
 *, 
fd
,

74 c⁄° *, 
size_t
);

78 
buf„r_°©us_t
 
buf„r_Êush_avaûabÀ
(
buf„r
 *, 
fd
);

86 
buf„r_°©us_t
 
buf„r_Êush_Æl
 (
buf„r
 *, 
fd
);

99 
buf„r_°©us_t
 
buf„r_Êush_wödow
 (
buf„r
 *, 
fd
, 
width
,

100 
height
, 
îa£
, 
no_m‹e
);

	@checksum.c

9 
	~<zebø.h
>

10 
	~"checksum.h
"

13 
	$ö_cksum
(*
∑rg
, 
nbyãs
)

15 
u_sh‹t
 *
±r
 = 
∑rg
;

16 
sum
;

17 
u_sh‹t
 
oddbyã
;

18 
u_sh‹t
 
™swî
;

26 
sum
 = 0;

27 
nbyãs
 > 1) {

28 
sum
 +*
±r
++;

29 
nbyãs
 -= 2;

33 i‡(
nbyãs
 == 1) {

34 
oddbyã
 = 0;

35 *((
u_ch¨
 *Ë&
oddbyã
Ë*(u_ch¨ *)
±r
;

36 
sum
 +
oddbyã
;

43 
sum
 = (sum >> 16) + (sum & 0xffff);

44 
sum
 += (sum >> 16);

45 
™swî
 = ~
sum
;

46 (
™swî
);

47 
	}
}

50 
	#MODX
 4102

	)

56 
u_öt16_t


57 
	$Êëchî_checksum
(
u_ch¨
 * 
buf„r
, c⁄° 
size_t
 
Àn
, c⁄° 
uöt16_t
 
off£t
)

59 
u_öt8_t
 *
p
;

60 
x
, 
y
, 
c0
, 
c1
;

61 
u_öt16_t
 
checksum
;

62 
u_öt16_t
 *
csum
;

63 
size_t
 
∑πül_Àn
, 
i
, 
À·
 = 
Àn
;

65 
checksum
 = 0;

68 i‡(
off£t
 !
FLETCHER_CHECKSUM_VALIDATE
)

71 
	`as£π
 (
off£t
 < (
Àn
 - 1));

72 
csum
 = (
u_öt16_t
 *Ë(
buf„r
 + 
off£t
);

73 *(
csum
) = 0;

76 
p
 = 
buf„r
;

77 
c0
 = 0;

78 
c1
 = 0;

80 
À·
 != 0)

82 
∑πül_Àn
 = 
	`MIN
(
À·
, 
MODX
);

84 
i
 = 0; i < 
∑πül_Àn
; i++)

86 
c0
 = c0 + *(
p
++);

87 
c1
 +
c0
;

90 
c0
 = c0 % 255;

91 
c1
 = c1 % 255;

93 
À·
 -
∑πül_Àn
;

97 
x
 = ()((
Àn
 - 
off£t
 - 1Ë* 
c0
 - 
c1
) % 255;

99 i‡(
x
 <= 0)

100 
x
 += 255;

101 
y
 = 510 - 
c0
 - 
x
;

102 i‡(
y
 > 255)

103 
y
 -= 255;

105 i‡(
off£t
 =
FLETCHER_CHECKSUM_VALIDATE
)

107 
checksum
 = (
c1
 << 8Ë+ 
c0
;

116 
buf„r
[
off£t
] = 
x
;

117 
buf„r
[
off£t
 + 1] = 
y
;

120 
checksum
 = 
	`ht⁄s
((
x
 << 8Ë| (
y
 & 0xFF));

123  
checksum
;

124 
	}
}

	@checksum.h

1 
ö_cksum
(*, );

2 
	#FLETCHER_CHECKSUM_VALIDATE
 0xffff

	)

3 
u_öt16_t
 
Êëchî_checksum
(
u_ch¨
 *, c⁄° 
size_t
 
Àn
, c⁄° 
uöt16_t
 
off£t
);

	@command.c

24 
	~<zebø.h
>

27 
	~"mem‹y.h
"

28 
	~"log.h
"

29 
	~"vîsi⁄.h
"

30 
	~"thªad.h
"

31 
	~"ve˘‹.h
"

32 
	~"vty.h
"

33 
	~"comm™d.h
"

34 
	~"w‹kqueue.h
"

38 
ve˘‹
 
	gcmdvec
 = 
NULL
;

40 
cmd_tokí
 
	gtokí_¸
;

41 *
	gcomm™d_¸
 = 
NULL
;

43 
	efûãr_ty≥


45 
	mFILTER_RELAXED
,

46 
	mFILTER_STRICT


49 
	em©chî_rv


51 
	mMATCHER_OK
,

52 
	mMATCHER_COMPLETE
,

53 
	mMATCHER_INCOMPLETE
,

54 
	mMATCHER_NO_MATCH
,

55 
	mMATCHER_AMBIGUOUS
,

56 
	mMATCHER_EXCEED_ARGC_MAX


59 
	#MATCHER_ERROR
(
m©chî_rv
) \

60 –(
m©chî_rv
Ë=
MATCHER_INCOMPLETE
 \

61 || (
m©chî_rv
Ë=
MATCHER_NO_MATCH
 \

62 || (
m©chî_rv
Ë=
MATCHER_AMBIGUOUS
 \

63 || (
m©chî_rv
Ë=
MATCHER_EXCEED_ARGC_MAX
 \

64 )

	)

67 
ho°
 
	gho°
;

70 
cmd_node
 
	gauth_node
 =

72 
AUTH_NODE
,

76 
cmd_node
 
	gvõw_node
 =

78 
VIEW_NODE
,

82 
cmd_node
 
	gª°ri˘ed_node
 =

84 
RESTRICTED_NODE
,

88 
cmd_node
 
	gauth_íabÀ_node
 =

90 
AUTH_ENABLE_NODE
,

94 
cmd_node
 
	gíabÀ_node
 =

96 
ENABLE_NODE
,

100 
cmd_node
 
	gc⁄fig_node
 =

102 
CONFIG_NODE
,

108 c⁄° *
	gdeÁu…_mŸd
 =

109 "\r\n\
,Åhi†i†" 
QUAGGA_PROGNAME
 " (vîsi⁄ " 
QUAGGA_VERSION
 ").\r\n\
" 
QUAGGA_COPYRIGHT
 "\r\n\
" 
GIT_INFO
 "\r\n";

115 c⁄° 
	sÁcûôy_m≠
 {

116 
	mÁcûôy
;

117 c⁄° *
	m«me
;

118 
size_t
 
	mm©ch
;

119 } 
	gsy¶og_Ácûôõs
[] =

121 { 
LOG_KERN
, "kern", 1 },

122 { 
LOG_USER
, "user", 2 },

123 { 
LOG_MAIL
, "mail", 1 },

124 { 
LOG_DAEMON
, "daemon", 1 },

125 { 
LOG_AUTH
, "auth", 1 },

126 { 
LOG_SYSLOG
, "syslog", 1 },

127 { 
LOG_LPR
, "lpr", 2 },

128 { 
LOG_NEWS
, "news", 1 },

129 { 
LOG_UUCP
, "uucp", 2 },

130 { 
LOG_CRON
, "cron", 1 },

131 #ifde‡
LOG_FTP


132 { 
LOG_FTP
, "ftp", 1 },

134 { 
LOG_LOCAL0
, "local0", 6 },

135 { 
LOG_LOCAL1
, "local1", 6 },

136 { 
LOG_LOCAL2
, "local2", 6 },

137 { 
LOG_LOCAL3
, "local3", 6 },

138 { 
LOG_LOCAL4
, "local4", 6 },

139 { 
LOG_LOCAL5
, "local5", 6 },

140 { 
LOG_LOCAL6
, "local6", 6 },

141 { 
LOG_LOCAL7
, "local7", 6 },

142 { 0, 
NULL
, 0 },

146 
	$Ácûôy_«me
(
Ácûôy
)

148 c⁄° 
Ácûôy_m≠
 *
fm
;

150 
fm
 = 
sy¶og_Ácûôõs
; fm->
«me
; fm++)

151 i‡(
fm
->
Ácûôy
 == facility)

152  
fm
->
«me
;

154 
	}
}

157 
	$Ácûôy_m©ch
(c⁄° *
°r
)

159 c⁄° 
Ácûôy_m≠
 *
fm
;

161 
fm
 = 
sy¶og_Ácûôõs
; fm->
«me
; fm++)

162 i‡(!
	`°∫cmp
(
°r
,
fm
->
«me
,fm->
m©ch
))

163  
fm
->
Ácûôy
;

165 
	}
}

168 
	$Àvñ_m©ch
(c⁄° *
s
)

170 
Àvñ
 ;

172  
Àvñ
 = 0 ; 
zlog_¥i‹ôy
 [Àvñ] !
NULL
 ;Üevel ++ )

173 i‡(!
	`°∫cmp
 (
s
, 
zlog_¥i‹ôy
[
Àvñ
], 2))

174  
Àvñ
;

175  
ZLOG_DISABLED
;

176 
	}
}

180 
	$¥öt_vîsi⁄
 (c⁄° *
¥og«me
)

182 
	`¥ötf
 ("%†vîsi⁄ %s\n", 
¥og«me
, 
QUAGGA_VERSION
);

183 
	`¥ötf
 ("%s\n", 
QUAGGA_COPYRIGHT
);

184 
	`¥ötf
 ("c⁄figuªd wôh:\n\t%s\n", 
QUAGGA_CONFIG_ARGS
);

185 
	}
}

191 
	$¨gv_c⁄ˇt
 (c⁄° **
¨gv
, 
¨gc
, 
shi·
)

193 
i
;

194 
size_t
 
Àn
;

195 *
°r
;

196 *
p
;

198 
Àn
 = 0;

199 
i
 = 
shi·
; i < 
¨gc
; i++)

200 
Àn
 +
	`°æí
(
¨gv
[
i
])+1;

201 i‡(!
Àn
)

202  
NULL
;

203 
p
 = 
°r
 = 
	`XMALLOC
(
MTYPE_TMP
, 
Àn
);

204 
i
 = 
shi·
; i < 
¨gc
; i++)

206 
size_t
 
¨gÀn
;

207 
	`mem˝y
(
p
, 
¨gv
[
i
], (
¨gÀn
 = 
	`°æí
(argv[i])));

208 
p
 +
¨gÀn
;

209 *
p
++ = ' ';

211 *(
p
-1) = '\0';

212  
°r
;

213 
	}
}

217 
ö°Æl_node
 (
cmd_node
 *
node
,

218 (*
func
Ë(
vty
 *))

220 
	`ve˘‹_£t_ödex
 (
cmdvec
, 
node
->node,Çode);

221 
node
->
func
 = func;

222 
node
->
cmd_ve˘‹
 = 
	`ve˘‹_öô
 (
VECTOR_MIN_SIZE
);

223 
	}
}

228 
ve˘‹


229 
	$cmd_make_°rvec
 (c⁄° *
°rög
)

231 c⁄° *
˝
, *
°¨t
;

232 *
tokí
;

233 
°æí
;

234 
ve˘‹
 
°rvec
;

236 i‡(
°rög
 =
NULL
)

237  
NULL
;

239 
˝
 = 
°rög
;

242 
	`is•a˚
 ((Ë*
˝
) && *cp != '\0')

243 
˝
++;

246 i‡(*
˝
 == '\0')

247  
NULL
;

249 i‡(*
˝
 == '!' || *cp == '#')

250  
NULL
;

253 
°rvec
 = 
	`ve˘‹_öô
 (
VECTOR_MIN_SIZE
);

258 
°¨t
 = 
˝
;

259 !(
	`is•a˚
 ((Ë*
˝
) || *cp == '\r' || *cp == '\n') &&

260 *
˝
 != '\0')

261 
˝
++;

262 
°æí
 = 
˝
 - 
°¨t
;

263 
tokí
 = 
	`XMALLOC
 (
MTYPE_STRVEC
, 
°æí
 + 1);

264 
	`mem˝y
 (
tokí
, 
°¨t
, 
°æí
);

265 *(
tokí
 + 
°æí
) = '\0';

266 
	`ve˘‹_£t
 (
°rvec
, 
tokí
);

268 (
	`is•a˚
 ((Ë*
˝
) || *cp == '\n' || *cp == '\r') &&

269 *
˝
 != '\0')

270 
˝
++;

272 i‡(*
˝
 == '\0')

273  
°rvec
;

275 
	}
}

279 
	$cmd_‰ì_°rvec
 (
ve˘‹
 
v
)

281 
i
;

282 *
˝
;

284 i‡(!
v
)

287 
i
 = 0; i < 
	`ve˘‹_a˘ive
 (
v
); i++)

288 i‡((
˝
 = 
	`ve˘‹_¶Ÿ
 (
v
, 
i
)Ë!
NULL
)

289 
	`XFREE
 (
MTYPE_STRVEC
, 
˝
);

291 
	`ve˘‹_‰ì
 (
v
);

292 
	}
}

294 
	sf‹m©_∑r£r_°©e


296 
ve˘‹
 
	mt›ve˘
;

297 
ve˘‹
 
	mötve˘
;

299 
ve˘‹
 
	mcurve˘
;

302 c⁄° *
	m°rög
;

303 c⁄° *
	m˝
;

305 c⁄° *
	mdp
;

308 
	mö_keyw‹d
;

309 
	mö_mu…ùÀ
;

310 
	mju°_ªad_w‹d
;

315 
	$f‹m©_∑r£r_îr‹
(
f‹m©_∑r£r_°©e
 *
°©e
, c⁄° *
mesßge
)

317 
off£t
 = 
°©e
->
˝
 - sèã->
°rög
 + 1;

319 
	`Ârötf
(
°dîr
, "\nEº‹Ö¨sög comm™d: \"%s\"\n", 
°©e
->
°rög
);

320 
	`Ârötf
(
°dîr
, " %*c\n", 
off£t
, '^');

321 
	`Ârötf
(
°dîr
, "%†© off£à%d.\n", 
mesßge
, 
off£t
);

322 
	`Ârötf
(
°dîr
, "This isáÖrogrammingÉrror. Check your DEFUNsÉtc.\n");

323 
	`exô
(1);

324 
	}
}

327 
	$f‹m©_∑r£r_desc_°r
(
f‹m©_∑r£r_°©e
 *
°©e
)

329 c⁄° *
˝
, *
°¨t
;

330 *
tokí
;

331 
°æí
;

333 
˝
 = 
°©e
->
dp
;

335 i‡(
˝
 =
NULL
)

336  
NULL
;

339 
	`is•a˚
 ((Ë*
˝
) && *cp != '\0')

340 
˝
++;

343 i‡(*
˝
 == '\0')

344  
NULL
;

346 
°¨t
 = 
˝
;

348 !(*
˝
 == '\r' || *cp == '\n') && *cp != '\0')

349 
˝
++;

351 
°æí
 = 
˝
 - 
°¨t
;

352 
tokí
 = 
	`XMALLOC
 (
MTYPE_CMD_TOKENS
, 
°æí
 + 1);

353 
	`mem˝y
 (
tokí
, 
°¨t
, 
°æí
);

354 *(
tokí
 + 
°æí
) = '\0';

356 
°©e
->
dp
 = 
˝
;

358  
tokí
;

359 
	}
}

362 
	$f‹m©_∑r£r_begö_keyw‹d
(
f‹m©_∑r£r_°©e
 *
°©e
)

364 
cmd_tokí
 *
tokí
;

365 
ve˘‹
 
keyw‹d_ve˘
;

367 i‡(
°©e
->
ö_keyw‹d


368 || 
°©e
->
ö_mu…ùÀ
)

369 
	`f‹m©_∑r£r_îr‹
(
°©e
, "Unexpected '{'");

371 
°©e
->
˝
++;

372 
°©e
->
ö_keyw‹d
 = 1;

374 
tokí
 = 
	`XCALLOC
(
MTYPE_CMD_TOKENS
, (*token));

375 
tokí
->
ty≥
 = 
TOKEN_KEYWORD
;

376 
tokí
->
keyw‹d
 = 
	`ve˘‹_öô
(
VECTOR_MIN_SIZE
);

378 
keyw‹d_ve˘
 = 
	`ve˘‹_öô
(
VECTOR_MIN_SIZE
);

379 
	`ve˘‹_£t
(
tokí
->
keyw‹d
, 
keyw‹d_ve˘
);

381 
	`ve˘‹_£t
(
°©e
->
curve˘
, 
tokí
);

382 
°©e
->
curve˘
 = 
keyw‹d_ve˘
;

383 
	}
}

386 
	$f‹m©_∑r£r_begö_mu…ùÀ
(
f‹m©_∑r£r_°©e
 *
°©e
)

388 
cmd_tokí
 *
tokí
;

390 i‡(
°©e
->
ö_keyw‹d
 == 1)

391 
	`f‹m©_∑r£r_îr‹
(
°©e
, "Keyword starting with '('");

393 i‡(
°©e
->
ö_mu…ùÀ
)

394 
	`f‹m©_∑r£r_îr‹
(
°©e
, "Nested group");

396 
°©e
->
˝
++;

397 
°©e
->
ö_mu…ùÀ
 = 1;

398 
°©e
->
ju°_ªad_w‹d
 = 0;

400 
tokí
 = 
	`XCALLOC
(
MTYPE_CMD_TOKENS
, (*token));

401 
tokí
->
ty≥
 = 
TOKEN_MULTIPLE
;

402 
tokí
->
mu…ùÀ
 = 
	`ve˘‹_öô
(
VECTOR_MIN_SIZE
);

404 
	`ve˘‹_£t
(
°©e
->
curve˘
, 
tokí
);

405 i‡(
°©e
->
curve˘
 !°©e->
t›ve˘
)

406 
°©e
->
ötve˘
 = sèã->
curve˘
;

407 
°©e
->
curve˘
 = 
tokí
->
mu…ùÀ
;

408 
	}
}

411 
	$f‹m©_∑r£r_íd_keyw‹d
(
f‹m©_∑r£r_°©e
 *
°©e
)

413 i‡(
°©e
->
ö_mu…ùÀ


414 || !
°©e
->
ö_keyw‹d
)

415 
	`f‹m©_∑r£r_îr‹
(
°©e
, "Unexpected '}'");

417 i‡(
°©e
->
ö_keyw‹d
 == 1)

418 
	`f‹m©_∑r£r_îr‹
(
°©e
, "Empty keyword group");

420 
°©e
->
˝
++;

421 
°©e
->
ö_keyw‹d
 = 0;

422 
°©e
->
curve˘
 = sèã->
t›ve˘
;

423 
	}
}

426 
	$f‹m©_∑r£r_íd_mu…ùÀ
(
f‹m©_∑r£r_°©e
 *
°©e
)

428 *
dummy
;

430 i‡(!
°©e
->
ö_mu…ùÀ
)

431 
	`f‹m©_∑r£r_îr‹
(
°©e
, "Unepexted ')'");

433 i‡(
	`ve˘‹_a˘ive
(
°©e
->
curve˘
) == 0)

434 
	`f‹m©_∑r£r_îr‹
(
°©e
, "Empty multiple section");

436 i‡(!
°©e
->
ju°_ªad_w‹d
)

446 
dummy
 = 
	`f‹m©_∑r£r_desc_°r
(
°©e
);

447 
	`XFREE
(
MTYPE_CMD_TOKENS
, 
dummy
);

450 
°©e
->
˝
++;

451 
°©e
->
ö_mu…ùÀ
 = 0;

453 i‡(
°©e
->
ötve˘
)

454 
°©e
->
curve˘
 = sèã->
ötve˘
;

456 
°©e
->
curve˘
 = sèã->
t›ve˘
;

457 
	}
}

460 
	$f‹m©_∑r£r_h™dÀ_pùe
(
f‹m©_∑r£r_°©e
 *
°©e
)

462 
cmd_tokí
 *
keyw‹d_tokí
;

463 
ve˘‹
 
keyw‹d_ve˘
;

465 i‡(
°©e
->
ö_mu…ùÀ
)

467 
°©e
->
ju°_ªad_w‹d
 = 0;

468 
°©e
->
˝
++;

470 i‡(
°©e
->
ö_keyw‹d
)

472 
°©e
->
ö_keyw‹d
 = 1;

473 
°©e
->
˝
++;

475 
keyw‹d_tokí
 = 
	`ve˘‹_¶Ÿ
(
°©e
->
t›ve˘
,

476 
	`ve˘‹_a˘ive
(
°©e
->
t›ve˘
) - 1);

477 
keyw‹d_ve˘
 = 
	`ve˘‹_öô
(
VECTOR_MIN_SIZE
);

478 
	`ve˘‹_£t
(
keyw‹d_tokí
->
keyw‹d
, 
keyw‹d_ve˘
);

479 
°©e
->
curve˘
 = 
keyw‹d_ve˘
;

483 
	`f‹m©_∑r£r_îr‹
(
°©e
, "Unexpected '|'");

485 
	}
}

488 
	$f‹m©_∑r£r_ªad_w‹d
(
f‹m©_∑r£r_°©e
 *
°©e
)

490 c⁄° *
°¨t
;

491 
Àn
;

492 *
cmd
;

493 
cmd_tokí
 *
tokí
;

495 
°¨t
 = 
°©e
->
˝
;

497 
°©e
->
˝
[0] != '\0'

498 && !
	`°rchr
("\r\n(){}|", 
°©e
->
˝
[0])

499 && !
	`is•a˚
(()
°©e
->
˝
[0]))

500 
°©e
->
˝
++;

502 
Àn
 = 
°©e
->
˝
 - 
°¨t
;

503 
cmd
 = 
	`XMALLOC
(
MTYPE_CMD_TOKENS
, 
Àn
 + 1);

504 
	`mem˝y
(
cmd
, 
°¨t
, 
Àn
);

505 
cmd
[
Àn
] = '\0';

507 
tokí
 = 
	`XCALLOC
(
MTYPE_CMD_TOKENS
, (*token));

508 
tokí
->
ty≥
 = 
TOKEN_TERMINAL
;

509 
tokí
->
cmd
 = cmd;

510 
tokí
->
desc
 = 
	`f‹m©_∑r£r_desc_°r
(
°©e
);

511 
	`ve˘‹_£t
(
°©e
->
curve˘
, 
tokí
);

513 i‡(
°©e
->
ö_keyw‹d
 == 1)

514 
°©e
->
ö_keyw‹d
 = 2;

516 
°©e
->
ju°_ªad_w‹d
 = 1;

517 
	}
}

528 
ve˘‹


529 
	$cmd_∑r£_f‹m©
(c⁄° *
°rög
, c⁄° *
desc°r
)

531 
f‹m©_∑r£r_°©e
 
°©e
;

533 i‡(
°rög
 =
NULL
)

534  
NULL
;

536 
	`mem£t
(&
°©e
, 0, (state));

537 
°©e
.
t›ve˘
 = sèã.
curve˘
 = 
	`ve˘‹_öô
(
VECTOR_MIN_SIZE
);

538 
°©e
.
˝
 = sèã.
°rög
 = string;

539 
°©e
.
dp
 = 
desc°r
;

543 
	`is•a˚
(()
°©e
.
˝
[0]) && state.cp[0] != '\0')

544 
°©e
.
˝
++;

546 
°©e
.
˝
[0])

549 i‡(
°©e
.
ö_keyw‹d


550 || 
°©e
.
ö_mu…ùÀ
)

551 
	`f‹m©_∑r£r_îr‹
(&
°©e
, "Unclosed group/keyword");

552  
°©e
.
t›ve˘
;

554 
	`f‹m©_∑r£r_begö_keyw‹d
(&
°©e
);

557 
	`f‹m©_∑r£r_begö_mu…ùÀ
(&
°©e
);

560 
	`f‹m©_∑r£r_íd_keyw‹d
(&
°©e
);

563 
	`f‹m©_∑r£r_íd_mu…ùÀ
(&
°©e
);

566 
	`f‹m©_∑r£r_h™dÀ_pùe
(&
°©e
);

569 
	`f‹m©_∑r£r_ªad_w‹d
(&
°©e
);

572 
	}
}

576 
	$cmd_¥om±
 (
node_ty≥
 
node
)

578 
cmd_node
 *
˙ode
;

580 
˙ode
 = 
	`ve˘‹_¶Ÿ
 (
cmdvec
, 
node
);

581  
˙ode
->
¥om±
;

582 
	}
}

586 
	$ö°Æl_ñemít
 (
node_ty≥
 
¡y≥
, 
cmd_ñemít
 *
cmd
)

588 
cmd_node
 *
˙ode
;

591 i‡(!
cmdvec
)

594 
˙ode
 = 
	`ve˘‹_¶Ÿ
 (
cmdvec
, 
¡y≥
);

596 i‡(
˙ode
 =
NULL
)

598 
	`Ârötf
 (
°dîr
, "CommandÇode %d doesn'tÉxist,Ölease check it\n",

599 
¡y≥
);

600 
	`exô
 (1);

603 
	`ve˘‹_£t
 (
˙ode
->
cmd_ve˘‹
, 
cmd
);

604 i‡(
cmd
->
tokís
 =
NULL
)

605 
cmd
->
tokís
 = 
	`cmd_∑r£_f‹m©
(cmd->
°rög
, cmd->
doc
);

606 
	}
}

608 c⁄° 
	gôﬂ64
[] =

612 
	$to64
(*
s
, 
v
, 
n
)

614 --
n
 >= 0)

616 *
s
++ = 
ôﬂ64
[
v
&0x3f];

617 
v
 >>= 6;

619 
	}
}

622 
	$zí¸y±
 (c⁄° *
∑sswd
)

624 
ß…
[6];

625 
timevÆ
 
tv
;

626 *
	`¸y±
 (const *, const *);

628 
	`gëtimeofday
(&
tv
,0);

630 
	`to64
(&
ß…
[0], 
	`øndom
(), 3);

631 
	`to64
(&
ß…
[3], 
tv
.
tv_u£c
, 3);

632 
ß…
[5] = '\0';

634  
	`¸y±
 (
∑sswd
, 
ß…
);

635 
	}
}

639 
	$c⁄fig_wrôe_ho°
 (
vty
 *vty)

641 i‡(
ho°
.
«me
)

642 
	`vty_out
 (
vty
, "ho°«mê%s%s", 
ho°
.
«me
, 
VTY_NEWLINE
);

644 i‡(
ho°
.
í¸y±
)

646 i‡(
ho°
.
∑ssw‹d_í¸y±
)

647 
	`vty_out
 (
vty
, "∑ssw‹d 8 %s%s", 
ho°
.
∑ssw‹d_í¸y±
, 
VTY_NEWLINE
);

648 i‡(
ho°
.
íabÀ_í¸y±
)

649 
	`vty_out
 (
vty
, "íabÀÖassw‹d 8 %s%s", 
ho°
.
íabÀ_í¸y±
, 
VTY_NEWLINE
);

653 i‡(
ho°
.
∑ssw‹d
)

654 
	`vty_out
 (
vty
, "∑ssw‹d %s%s", 
ho°
.
∑ssw‹d
, 
VTY_NEWLINE
);

655 i‡(
ho°
.
íabÀ
)

656 
	`vty_out
 (
vty
, "íabÀÖassw‹d %s%s", 
ho°
.
íabÀ
, 
VTY_NEWLINE
);

659 i‡(
zlog_deÁu…
->
deÁu…_lvl
 !
LOG_DEBUG
)

661 
	`vty_out
 (
vty
, "! N.B. The 'logÅrap' command is deprecated.%s",

662 
VTY_NEWLINE
);

663 
	`vty_out
 (
vty
, "logÅrap %s%s",

664 
zlog_¥i‹ôy
[
zlog_deÁu…
->
deÁu…_lvl
], 
VTY_NEWLINE
);

667 i‡(
ho°
.
logfûe
 && (
zlog_deÁu…
->
maxlvl
[
ZLOG_DEST_FILE
] !
ZLOG_DISABLED
))

669 
	`vty_out
 (
vty
, "log fûê%s", 
ho°
.
logfûe
);

670 i‡(
zlog_deÁu…
->
maxlvl
[
ZLOG_DEST_FILE
] !zlog_deÁu…->
deÁu…_lvl
)

671 
	`vty_out
 (
vty
, " %s",

672 
zlog_¥i‹ôy
[
zlog_deÁu…
->
maxlvl
[
ZLOG_DEST_FILE
]]);

673 
	`vty_out
 (
vty
, "%s", 
VTY_NEWLINE
);

676 i‡(
zlog_deÁu…
->
maxlvl
[
ZLOG_DEST_STDOUT
] !
ZLOG_DISABLED
)

678 
	`vty_out
 (
vty
, "log stdout");

679 i‡(
zlog_deÁu…
->
maxlvl
[
ZLOG_DEST_STDOUT
] !zlog_deÁu…->
deÁu…_lvl
)

680 
	`vty_out
 (
vty
, " %s",

681 
zlog_¥i‹ôy
[
zlog_deÁu…
->
maxlvl
[
ZLOG_DEST_STDOUT
]]);

682 
	`vty_out
 (
vty
, "%s", 
VTY_NEWLINE
);

685 i‡(
zlog_deÁu…
->
maxlvl
[
ZLOG_DEST_MONITOR
] =
ZLOG_DISABLED
)

686 
	`vty_out
(
vty
,"nÿlog m⁄ô‹%s",
VTY_NEWLINE
);

687 i‡(
zlog_deÁu…
->
maxlvl
[
ZLOG_DEST_MONITOR
] !zlog_deÁu…->
deÁu…_lvl
)

688 
	`vty_out
(
vty
,"log monitor %s%s",

689 
zlog_¥i‹ôy
[
zlog_deÁu…
->
maxlvl
[
ZLOG_DEST_MONITOR
]],
VTY_NEWLINE
);

691 i‡(
zlog_deÁu…
->
maxlvl
[
ZLOG_DEST_SYSLOG
] !
ZLOG_DISABLED
)

693 
	`vty_out
 (
vty
, "log syslog");

694 i‡(
zlog_deÁu…
->
maxlvl
[
ZLOG_DEST_SYSLOG
] !zlog_deÁu…->
deÁu…_lvl
)

695 
	`vty_out
 (
vty
, " %s",

696 
zlog_¥i‹ôy
[
zlog_deÁu…
->
maxlvl
[
ZLOG_DEST_SYSLOG
]]);

697 
	`vty_out
 (
vty
, "%s", 
VTY_NEWLINE
);

700 i‡(
zlog_deÁu…
->
Ácûôy
 !
LOG_DAEMON
)

701 
	`vty_out
 (
vty
, "log facility %s%s",

702 
	`Ácûôy_«me
(
zlog_deÁu…
->
Ácûôy
), 
VTY_NEWLINE
);

704 i‡(
zlog_deÁu…
->
ªc‹d_¥i‹ôy
 == 1)

705 
	`vty_out
 (
vty
, "logÑec‹d-¥i‹ôy%s", 
VTY_NEWLINE
);

707 i‡(
zlog_deÁu…
->
time°amp_¥ecisi⁄
 > 0)

708 
	`vty_out
 (
vty
, "logÅimestampÖrecision %d%s",

709 
zlog_deÁu…
->
time°amp_¥ecisi⁄
, 
VTY_NEWLINE
);

711 i‡(
ho°
.
adv™˚d
)

712 
	`vty_out
 (
vty
, "£rvi˚ádv™˚d-vty%s", 
VTY_NEWLINE
);

714 i‡(
ho°
.
í¸y±
)

715 
	`vty_out
 (
vty
, "£rvi˚Öassw‹d-í¸y±i⁄%s", 
VTY_NEWLINE
);

717 i‡(
ho°
.
löes
 >= 0)

718 
	`vty_out
 (
vty
, "£rvi˚ÅîmöÆ-Àngth %d%s", 
ho°
.
löes
,

719 
VTY_NEWLINE
);

721 i‡(
ho°
.
mŸdfûe
)

722 
	`vty_out
 (
vty
, "b™√∏mŸd fûê%s%s", 
ho°
.
mŸdfûe
, 
VTY_NEWLINE
);

723 i‡(! 
ho°
.
mŸd
)

724 
	`vty_out
 (
vty
, "nÿb™√∏mŸd%s", 
VTY_NEWLINE
);

727 
	}
}

730 
ve˘‹


731 
	$cmd_node_ve˘‹
 (
ve˘‹
 
v
, 
node_ty≥
 
¡y≥
)

733 
cmd_node
 *
˙ode
 = 
	`ve˘‹_¶Ÿ
 (
v
, 
¡y≥
);

734  
˙ode
->
cmd_ve˘‹
;

735 
	}
}

741 
	$cmd_fûãr_by_symbﬁ
 (*
comm™d
, *
symbﬁ
)

743 
i
, 
lim
;

745 i‡(
	`°rcmp
 (
symbﬁ
, "IPV4_ADDRESS") == 0)

747 
i
 = 0;

748 
lim
 = 
	`°æí
 (
comm™d
);

749 
i
 < 
lim
)

751 i‡(! (
	`isdigô
 ((Ë
comm™d
[
i
]) || command[i] == '.' || command[i] == '/'))

753 
i
++;

757 i‡(
	`°rcmp
 (
symbﬁ
, "STRING") == 0)

759 
i
 = 0;

760 
lim
 = 
	`°æí
 (
comm™d
);

761 
i
 < 
lim
)

763 i‡(! (
	`ißÕha
 ((Ë
comm™d
[
i
]) || command[i] == '_' || command[i] == '-'))

765 
i
++;

769 i‡(
	`°rcmp
 (
symbﬁ
, "IFNAME") == 0)

771 
i
 = 0;

772 
lim
 = 
	`°æí
 (
comm™d
);

773 
i
 < 
lim
)

775 i‡(! 
	`iß um
 ((Ë
comm™d
[
i
]))

777 
i
++;

782 
	}
}

786 
	em©ch_ty≥


788 
	mno_m©ch
,

789 
	mexãnd_m©ch
,

790 
	mùv4_¥efix_m©ch
,

791 
	mùv4_m©ch
,

792 
	mùv6_¥efix_m©ch
,

793 
	mùv6_m©ch
,

794 
	mønge_m©ch
,

795 
	mv¨¨g_m©ch
,

796 
	m∑πly_m©ch
,

797 
	mexa˘_m©ch


800 
m©ch_ty≥


801 
	$cmd_ùv4_m©ch
 (c⁄° *
°r
)

803 c⁄° *
•
;

804 
dŸs
 = 0, 
nums
 = 0;

805 
buf
[4];

807 i‡(
°r
 =
NULL
)

808  
∑πly_m©ch
;

812 
	`mem£t
 (
buf
, 0,  (buf));

813 
•
 = 
°r
;

814 *
°r
 != '\0')

816 i‡(*
°r
 == '.')

818 i‡(
dŸs
 >= 3)

819  
no_m©ch
;

821 i‡(*(
°r
 + 1) == '.')

822  
no_m©ch
;

824 i‡(*(
°r
 + 1) == '\0')

825  
∑πly_m©ch
;

827 
dŸs
++;

830 i‡(!
	`isdigô
 ((Ë*
°r
))

831  
no_m©ch
;

833 
°r
++;

836 i‡(
°r
 - 
•
 > 3)

837  
no_m©ch
;

839 
	`°∫˝y
 (
buf
, 
•
, 
°r
 - sp);

840 i‡(
	`©oi
 (
buf
) > 255)

841  
no_m©ch
;

843 
nums
++;

845 i‡(*
°r
 == '\0')

848 
°r
++;

851 i‡(
nums
 < 4)

852  
∑πly_m©ch
;

854  
exa˘_m©ch
;

855 
	}
}

857 
m©ch_ty≥


858 
	$cmd_ùv4_¥efix_m©ch
 (c⁄° *
°r
)

860 c⁄° *
•
;

861 
dŸs
 = 0;

862 
buf
[4];

864 i‡(
°r
 =
NULL
)

865  
∑πly_m©ch
;

869 
	`mem£t
 (
buf
, 0,  (buf));

870 
•
 = 
°r
;

871 *
°r
 != '\0' && *str != '/')

873 i‡(*
°r
 == '.')

875 i‡(
dŸs
 == 3)

876  
no_m©ch
;

878 i‡(*(
°r
 + 1) == '.' || *(str + 1) == '/')

879  
no_m©ch
;

881 i‡(*(
°r
 + 1) == '\0')

882  
∑πly_m©ch
;

884 
dŸs
++;

888 i‡(!
	`isdigô
 ((Ë*
°r
))

889  
no_m©ch
;

891 
°r
++;

894 i‡(
°r
 - 
•
 > 3)

895  
no_m©ch
;

897 
	`°∫˝y
 (
buf
, 
•
, 
°r
 - sp);

898 i‡(
	`©oi
 (
buf
) > 255)

899  
no_m©ch
;

901 i‡(
dŸs
 == 3)

903 i‡(*
°r
 == '/')

905 i‡(*(
°r
 + 1) == '\0')

906  
∑πly_m©ch
;

908 
°r
++;

911 i‡(*
°r
 == '\0')

912  
∑πly_m©ch
;

915 i‡(*
°r
 == '\0')

916  
∑πly_m©ch
;

918 
°r
++;

921 
•
 = 
°r
;

922 *
°r
 != '\0')

924 i‡(!
	`isdigô
 ((Ë*
°r
))

925  
no_m©ch
;

927 
°r
++;

930 i‡(
	`©oi
 (
•
) > 32)

931  
no_m©ch
;

933  
exa˘_m©ch
;

934 
	}
}

936 
	#IPV6_ADDR_STR
 "0123456789abcdefABCDEF:.%"

	)

937 
	#IPV6_PREFIX_STR
 "0123456789abcdefABCDEF:.%/"

	)

938 
	#STATE_START
 1

	)

939 
	#STATE_COLON
 2

	)

940 
	#STATE_DOUBLE
 3

	)

941 
	#STATE_ADDR
 4

	)

942 
	#STATE_DOT
 5

	)

943 
	#STATE_SLASH
 6

	)

944 
	#STATE_MASK
 7

	)

946 #ifde‡
HAVE_IPV6


948 
m©ch_ty≥


949 
	$cmd_ùv6_m©ch
 (c⁄° *
°r
)

951 
sockaddr_ö6
 
sö6_dummy
;

952 
ªt
;

954 i‡(
°r
 =
NULL
)

955  
∑πly_m©ch
;

957 i‡(
	`°r•n
 (
°r
, 
IPV6_ADDR_STR
Ë!
	`°æí
 (str))

958  
no_m©ch
;

964 
ªt
 = 
	`öë_±⁄
(
AF_INET6
, 
°r
, &
sö6_dummy
.
sö6_addr
);

966 i‡(
ªt
 == 1)

967  
exa˘_m©ch
;

969  
no_m©ch
;

970 
	}
}

972 
m©ch_ty≥


973 
	$cmd_ùv6_¥efix_m©ch
 (c⁄° *
°r
)

975 
°©e
 = 
STATE_START
;

976 
cﬁ⁄s
 = 0, 
nums
 = 0, 
doubÀ_cﬁ⁄
 = 0;

977 
mask
;

978 c⁄° *
•
 = 
NULL
;

979 *
íd±r
 = 
NULL
;

981 i‡(
°r
 =
NULL
)

982  
∑πly_m©ch
;

984 i‡(
	`°r•n
 (
°r
, 
IPV6_PREFIX_STR
Ë!
	`°æí
 (str))

985  
no_m©ch
;

987 *
°r
 !'\0' && 
°©e
 !
STATE_MASK
)

989 
°©e
)

991 
STATE_START
:

992 i‡(*
°r
 == ':')

994 i‡(*(
°r
 + 1) != ':' && *(str + 1) != '\0')

995  
no_m©ch
;

996 
cﬁ⁄s
--;

997 
°©e
 = 
STATE_COLON
;

1001 
•
 = 
°r
;

1002 
°©e
 = 
STATE_ADDR
;

1006 
STATE_COLON
:

1007 
cﬁ⁄s
++;

1008 i‡(*(
°r
 + 1) == '/')

1009  
no_m©ch
;

1010 i‡(*(
°r
 + 1) == ':')

1011 
°©e
 = 
STATE_DOUBLE
;

1014 
•
 = 
°r
 + 1;

1015 
°©e
 = 
STATE_ADDR
;

1018 
STATE_DOUBLE
:

1019 i‡(
doubÀ_cﬁ⁄
)

1020  
no_m©ch
;

1022 i‡(*(
°r
 + 1) == ':')

1023  
no_m©ch
;

1026 i‡(*(
°r
 + 1) != '\0' && *(str + 1) != '/')

1027 
cﬁ⁄s
++;

1028 
•
 = 
°r
 + 1;

1030 i‡(*(
°r
 + 1) == '/')

1031 
°©e
 = 
STATE_SLASH
;

1033 
°©e
 = 
STATE_ADDR
;

1036 
doubÀ_cﬁ⁄
++;

1037 
nums
 += 1;

1039 
STATE_ADDR
:

1040 i‡(*(
°r
 + 1) == ':' || *(str + 1) == '.'

1041 || *(
°r
 + 1) == '\0' || *(str + 1) == '/')

1043 i‡(
°r
 - 
•
 > 3)

1044  
no_m©ch
;

1046 ; 
•
 <
°r
; sp++)

1047 i‡(*
•
 == '/')

1048  
no_m©ch
;

1050 
nums
++;

1052 i‡(*(
°r
 + 1) == ':')

1053 
°©e
 = 
STATE_COLON
;

1054 i‡(*(
°r
 + 1) == '.')

1056 i‡(
cﬁ⁄s
 || 
doubÀ_cﬁ⁄
)

1057 
°©e
 = 
STATE_DOT
;

1059  
no_m©ch
;

1061 i‡(*(
°r
 + 1) == '/')

1062 
°©e
 = 
STATE_SLASH
;

1065 
STATE_DOT
:

1066 
°©e
 = 
STATE_ADDR
;

1068 
STATE_SLASH
:

1069 i‡(*(
°r
 + 1) == '\0')

1070  
∑πly_m©ch
;

1072 
°©e
 = 
STATE_MASK
;

1078 i‡(
nums
 > 11)

1079  
no_m©ch
;

1081 i‡(
cﬁ⁄s
 > 7)

1082  
no_m©ch
;

1084 
°r
++;

1087 i‡(
°©e
 < 
STATE_MASK
)

1088  
∑πly_m©ch
;

1090 
mask
 = 
	`°πﬁ
 (
°r
, &
íd±r
, 10);

1091 i‡(*
íd±r
 != '\0')

1092  
no_m©ch
;

1094 i‡(
mask
 < 0 || mask > 128)

1095  
no_m©ch
;

1105  
exa˘_m©ch
;

1106 
	}
}

1110 
	#DECIMAL_STRLEN_MAX
 10

	)

1113 
	$cmd_ønge_m©ch
 (c⁄° *
ønge
, c⁄° *
°r
)

1115 *
p
;

1116 
buf
[
DECIMAL_STRLEN_MAX
 + 1];

1117 *
íd±r
 = 
NULL
;

1118 
mö
, 
max
, 
vÆ
;

1120 i‡(
°r
 =
NULL
)

1123 
vÆ
 = 
	`°πoul
 (
°r
, &
íd±r
, 10);

1124 i‡(*
íd±r
 != '\0')

1127 
ønge
++;

1128 
p
 = 
	`°rchr
 (
ønge
, '-');

1129 i‡(
p
 =
NULL
)

1131 i‡(
p
 - 
ønge
 > 
DECIMAL_STRLEN_MAX
)

1133 
	`°∫˝y
 (
buf
, 
ønge
, 
p
 -Ñange);

1134 
buf
[
p
 - 
ønge
] = '\0';

1135 
mö
 = 
	`°πoul
 (
buf
, &
íd±r
, 10);

1136 i‡(*
íd±r
 != '\0')

1139 
ønge
 = 
p
 + 1;

1140 
p
 = 
	`°rchr
 (
ønge
, '>');

1141 i‡(
p
 =
NULL
)

1143 i‡(
p
 - 
ønge
 > 
DECIMAL_STRLEN_MAX
)

1145 
	`°∫˝y
 (
buf
, 
ønge
, 
p
 -Ñange);

1146 
buf
[
p
 - 
ønge
] = '\0';

1147 
max
 = 
	`°πoul
 (
buf
, &
íd±r
, 10);

1148 i‡(*
íd±r
 != '\0')

1151 i‡(
vÆ
 < 
mö
 || vÆ > 
max
)

1155 
	}
}

1157 
m©ch_ty≥


1158 
	$cmd_w‹d_m©ch
(
cmd_tokí
 *
tokí
,

1159 
fûãr_ty≥
 
fûãr
,

1160 c⁄° *
w‹d
)

1162 c⁄° *
°r
;

1163 
m©ch_ty≥
 match_type;

1165 
°r
 = 
tokí
->
cmd
;

1167 i‡(
fûãr
 =
FILTER_RELAXED
)

1168 i‡(!
w‹d
 || !
	`°æí
(word))

1169  
∑πly_m©ch
;

1171 i‡(!
w‹d
)

1172  
no_m©ch
;

1174 i‡(
	`CMD_VARARG
(
°r
))

1176  
v¨¨g_m©ch
;

1178 i‡(
	`CMD_RANGE
(
°r
))

1180 i‡(
	`cmd_ønge_m©ch
(
°r
, 
w‹d
))

1181  
ønge_m©ch
;

1183 #ifde‡
HAVE_IPV6


1184 i‡(
	`CMD_IPV6
(
°r
))

1186 
m©ch_ty≥
 = 
	`cmd_ùv6_m©ch
(
w‹d
);

1187 i‡((
fûãr
 =
FILTER_RELAXED
 && 
m©ch_ty≥
 !
no_m©ch
)

1188 || (
fûãr
 =
FILTER_STRICT
 && 
m©ch_ty≥
 =
exa˘_m©ch
))

1189  
ùv6_m©ch
;

1191 i‡(
	`CMD_IPV6_PREFIX
(
°r
))

1193 
m©ch_ty≥
 = 
	`cmd_ùv6_¥efix_m©ch
(
w‹d
);

1194 i‡((
fûãr
 =
FILTER_RELAXED
 && 
m©ch_ty≥
 !
no_m©ch
)

1195 || (
fûãr
 =
FILTER_STRICT
 && 
m©ch_ty≥
 =
exa˘_m©ch
))

1196  
ùv6_¥efix_m©ch
;

1199 i‡(
	`CMD_IPV4
(
°r
))

1201 
m©ch_ty≥
 = 
	`cmd_ùv4_m©ch
(
w‹d
);

1202 i‡((
fûãr
 =
FILTER_RELAXED
 && 
m©ch_ty≥
 !
no_m©ch
)

1203 || (
fûãr
 =
FILTER_STRICT
 && 
m©ch_ty≥
 =
exa˘_m©ch
))

1204  
ùv4_m©ch
;

1206 i‡(
	`CMD_IPV4_PREFIX
(
°r
))

1208 
m©ch_ty≥
 = 
	`cmd_ùv4_¥efix_m©ch
(
w‹d
);

1209 i‡((
fûãr
 =
FILTER_RELAXED
 && 
m©ch_ty≥
 !
no_m©ch
)

1210 || (
fûãr
 =
FILTER_STRICT
 && 
m©ch_ty≥
 =
exa˘_m©ch
))

1211  
ùv4_¥efix_m©ch
;

1213 i‡(
	`CMD_OPTION
(
°r
Ë|| 
	`CMD_VARIABLE
(str))

1215  
exãnd_m©ch
;

1219 i‡(
fûãr
 =
FILTER_RELAXED
 && !
	`°∫cmp
(
°r
, 
w‹d
, 
	`°æí
(word)))

1221 i‡(!
	`°rcmp
(
°r
, 
w‹d
))

1222  
exa˘_m©ch
;

1223  
∑πly_m©ch
;

1225 i‡(
fûãr
 =
FILTER_STRICT
 && !
	`°rcmp
(
°r
, 
w‹d
))

1226  
exa˘_m©ch
;

1229  
no_m©ch
;

1230 
	}
}

1232 
	scmd_m©chî


1234 
cmd_ñemít
 *
	mcmd
;

1235 
fûãr_ty≥
 
	mfûãr
;

1236 
ve˘‹
 
	mvlöe
;

1237 
	mödex
;

1240 
m©ch_ty≥
 *
	mm©ch_ty≥
;

1241 
ve˘‹
 *
	mm©ch
;

1243 
	mw‹d_ödex
;

1247 
	$push_¨gumít
(*
¨gc
, c⁄° **
¨gv
, c⁄° *
¨g
)

1249 i‡(!
¨g
 || !
	`°æí
(arg))

1250 
¨g
 = 
NULL
;

1252 i‡(!
¨gc
 || !
¨gv
)

1255 i‡(*
¨gc
 >
CMD_ARGC_MAX
)

1258 
¨gv
[(*
¨gc
)++] = 
¨g
;

1260 
	}
}

1263 
	$cmd_m©chî_ªc‹d_m©ch
(
cmd_m©chî
 *
m©chî
,

1264 
m©ch_ty≥
 match_type,

1265 
cmd_tokí
 *
tokí
)

1267 i‡(
m©chî
->
w‹d_ödex
 !m©chî->
ödex
)

1270 i‡(
m©chî
->
m©ch
)

1272 i‡(!*
m©chî
->
m©ch
)

1273 *
m©chî
->
m©ch
 = 
	`ve˘‹_öô
(
VECTOR_MIN_SIZE
);

1274 
	`ve˘‹_£t
(*
m©chî
->
m©ch
, 
tokí
);

1277 i‡(
m©chî
->
m©ch_ty≥
)

1279 i‡(
m©ch_ty≥
 > *
m©chî
->match_type)

1280 *
m©chî
->
m©ch_ty≥
 = match_type;

1282 
	}
}

1285 
	$cmd_m©chî_w‹ds_À·
(
cmd_m©chî
 *
m©chî
)

1287  
m©chî
->
w‹d_ödex
 < 
	`ve˘‹_a˘ive
(m©chî->
vlöe
);

1288 
	}
}

1291 
	$cmd_m©chî_gë_w‹d
(
cmd_m©chî
 *
m©chî
)

1293 
	`as£π
(
	`cmd_m©chî_w‹ds_À·
(
m©chî
));

1295  
	`ve˘‹_¶Ÿ
(
m©chî
->
vlöe
, m©chî->
w‹d_ödex
);

1296 
	}
}

1298 
m©chî_rv


1299 
	$cmd_m©chî_m©ch_ãrmöÆ
(
cmd_m©chî
 *
m©chî
,

1300 
cmd_tokí
 *
tokí
,

1301 *
¨gc
, c⁄° **
¨gv
)

1303 c⁄° *
w‹d
;

1304 
m©ch_ty≥
 
w‹d_m©ch
;

1306 
	`as£π
(
tokí
->
ty≥
 =
TOKEN_TERMINAL
);

1308 i‡(!
	`cmd_m©chî_w‹ds_À·
(
m©chî
))

1310 i‡(
	`CMD_OPTION
(
tokí
->
cmd
))

1311  
MATCHER_OK
;

1313  
MATCHER_INCOMPLETE
;

1316 
w‹d
 = 
	`cmd_m©chî_gë_w‹d
(
m©chî
);

1317 
w‹d_m©ch
 = 
	`cmd_w‹d_m©ch
(
tokí
, 
m©chî
->
fûãr
, 
w‹d
);

1318 i‡(
w‹d_m©ch
 =
no_m©ch
)

1319  
MATCHER_NO_MATCH
;

1323 i‡(
	`CMD_VARARG
(
tokí
->
cmd
)

1324 || 
	`CMD_VARIABLE
(
tokí
->
cmd
)

1325 || 
	`CMD_OPTION
(
tokí
->
cmd
))

1327 i‡(
	`push_¨gumít
(
¨gc
, 
¨gv
, 
w‹d
))

1328  
MATCHER_EXCEED_ARGC_MAX
;

1331 
	`cmd_m©chî_ªc‹d_m©ch
(
m©chî
, 
w‹d_m©ch
, 
tokí
);

1333 
m©chî
->
w‹d_ödex
++;

1336 i‡(
	`CMD_VARARG
(
tokí
->
cmd
))

1337 
	`cmd_m©chî_w‹ds_À·
(
m©chî
))

1339 
w‹d
 = 
	`cmd_m©chî_gë_w‹d
(
m©chî
);

1340 i‡(
w‹d
 && 
	`°æí
(word))

1341 
	`push_¨gumít
(
¨gc
, 
¨gv
, 
w‹d
);

1342 
m©chî
->
w‹d_ödex
++;

1345  
MATCHER_OK
;

1346 
	}
}

1348 
m©chî_rv


1349 
	$cmd_m©chî_m©ch_mu…ùÀ
(
cmd_m©chî
 *
m©chî
,

1350 
cmd_tokí
 *
tokí
,

1351 *
¨gc
, c⁄° **
¨gv
)

1353 
m©ch_ty≥
 
mu…ùÀ_m©ch
;

1354 
mu…ùÀ_ödex
;

1355 c⁄° *
w‹d
;

1356 c⁄° *
¨g
;

1357 
cmd_tokí
 *
w‹d_tokí
;

1358 
m©ch_ty≥
 
w‹d_m©ch
;

1360 
	`as£π
(
tokí
->
ty≥
 =
TOKEN_MULTIPLE
);

1362 
mu…ùÀ_m©ch
 = 
no_m©ch
;

1364 i‡(!
	`cmd_m©chî_w‹ds_À·
(
m©chî
))

1365  
MATCHER_INCOMPLETE
;

1367 
w‹d
 = 
	`cmd_m©chî_gë_w‹d
(
m©chî
);

1368 
mu…ùÀ_ödex
 = 0;

1369 
mu…ùÀ_ödex
 < 
	`ve˘‹_a˘ive
(
tokí
->
mu…ùÀ
);

1370 
mu…ùÀ_ödex
++)

1372 
w‹d_tokí
 = 
	`ve˘‹_¶Ÿ
(
tokí
->
mu…ùÀ
, 
mu…ùÀ_ödex
);

1374 
w‹d_m©ch
 = 
	`cmd_w‹d_m©ch
(
w‹d_tokí
, 
m©chî
->
fûãr
, 
w‹d
);

1375 i‡(
w‹d_m©ch
 =
no_m©ch
)

1378 
	`cmd_m©chî_ªc‹d_m©ch
(
m©chî
, 
w‹d_m©ch
, 
w‹d_tokí
);

1380 i‡(
w‹d_m©ch
 > 
mu…ùÀ_m©ch
)

1382 
mu…ùÀ_m©ch
 = 
w‹d_m©ch
;

1383 
¨g
 = 
w‹d
;

1389 
m©chî
->
w‹d_ödex
++;

1391 i‡(
mu…ùÀ_m©ch
 =
no_m©ch
)

1392  
MATCHER_NO_MATCH
;

1394 i‡(
	`push_¨gumít
(
¨gc
, 
¨gv
, 
¨g
))

1395  
MATCHER_EXCEED_ARGC_MAX
;

1397  
MATCHER_OK
;

1398 
	}
}

1400 
m©chî_rv


1401 
	$cmd_m©chî_ªad_keyw‹ds
(
cmd_m©chî
 *
m©chî
,

1402 
cmd_tokí
 *
tokí
,

1403 
ve˘‹
 
¨gs_ve˘‹
)

1405 
i
;

1406 
keyw‹d_mask
;

1407 
keyw‹d_found
;

1408 
m©ch_ty≥
 
keyw‹d_m©ch
;

1409 
m©ch_ty≥
 
w‹d_m©ch
;

1410 
ve˘‹
 
keyw‹d_ve˘‹
;

1411 
cmd_tokí
 *
w‹d_tokí
;

1412 c⁄° *
w‹d
;

1413 
keyw‹d_¨gc
;

1414 c⁄° **
keyw‹d_¨gv
;

1415 
m©chî_rv
 
rv
 = 
MATCHER_NO_MATCH
;

1417 
keyw‹d_mask
 = 0;

1420 i‡(!
	`cmd_m©chî_w‹ds_À·
(
m©chî
))

1421  
MATCHER_OK
;

1423 
w‹d
 = 
	`cmd_m©chî_gë_w‹d
(
m©chî
);

1425 
keyw‹d_found
 = -1;

1426 
keyw‹d_m©ch
 = 
no_m©ch
;

1427 
i
 = 0; i < 
	`ve˘‹_a˘ive
(
tokí
->
keyw‹d
); i++)

1429 i‡(
keyw‹d_mask
 & (1 << 
i
))

1432 
keyw‹d_ve˘‹
 = 
	`ve˘‹_¶Ÿ
(
tokí
->
keyw‹d
, 
i
);

1433 
w‹d_tokí
 = 
	`ve˘‹_¶Ÿ
(
keyw‹d_ve˘‹
, 0);

1435 
w‹d_m©ch
 = 
	`cmd_w‹d_m©ch
(
w‹d_tokí
, 
m©chî
->
fûãr
, 
w‹d
);

1436 i‡(
w‹d_m©ch
 =
no_m©ch
)

1439 
	`cmd_m©chî_ªc‹d_m©ch
(
m©chî
, 
w‹d_m©ch
, 
w‹d_tokí
);

1441 i‡(
w‹d_m©ch
 > 
keyw‹d_m©ch
)

1443 
keyw‹d_m©ch
 = 
w‹d_m©ch
;

1444 
keyw‹d_found
 = 
i
;

1446 i‡(
w‹d_m©ch
 =
keyw‹d_m©ch
)

1448 i‡(
m©chî
->
w‹d_ödex
 !m©chî->
ödex
 || 
¨gs_ve˘‹
)

1449  
MATCHER_AMBIGUOUS
;

1453 i‡(
keyw‹d_found
 == ()-1)

1454  
MATCHER_NO_MATCH
;

1456 
m©chî
->
w‹d_ödex
++;

1458 i‡(
m©chî
->
w‹d_ödex
 > m©chî->
ödex
)

1459  
MATCHER_OK
;

1461 
keyw‹d_mask
 |(1 << 
keyw‹d_found
);

1463 i‡(
¨gs_ve˘‹
)

1465 
keyw‹d_¨gc
 = 0;

1466 
keyw‹d_¨gv
 = 
	`XMALLOC
(
MTYPE_TMP
, (
CMD_ARGC_MAX
 + 1) * (*));

1468 
i
 = 0; i < 
CMD_ARGC_MAX
 + 1; i++)

1469 
keyw‹d_¨gv
[
i
] = (*)-1;

1470 
	`ve˘‹_£t_ödex
(
¨gs_ve˘‹
, 
keyw‹d_found
, 
keyw‹d_¨gv
);

1474 
keyw‹d_¨gv
 = 
NULL
;

1477 
keyw‹d_ve˘‹
 = 
	`ve˘‹_¶Ÿ
(
tokí
->
keyw‹d
, 
keyw‹d_found
);

1480 
i
 = 1; i < 
	`ve˘‹_a˘ive
(
keyw‹d_ve˘‹
); i++)

1482 
w‹d_tokí
 = 
	`ve˘‹_¶Ÿ
(
keyw‹d_ve˘‹
, 
i
);

1484 
w‹d_tokí
->
ty≥
)

1486 
TOKEN_TERMINAL
:

1487 
rv
 = 
	`cmd_m©chî_m©ch_ãrmöÆ
(
m©chî
, 
w‹d_tokí
,

1488 &
keyw‹d_¨gc
, 
keyw‹d_¨gv
);

1490 
TOKEN_MULTIPLE
:

1491 
rv
 = 
	`cmd_m©chî_m©ch_mu…ùÀ
(
m©chî
, 
w‹d_tokí
,

1492 &
keyw‹d_¨gc
, 
keyw‹d_¨gv
);

1494 
TOKEN_KEYWORD
:

1495 
	`as£π
(!"Keywords shouldÇever beÇested.");

1499 i‡(
	`MATCHER_ERROR
(
rv
))

1500  
rv
;

1502 i‡(
m©chî
->
w‹d_ödex
 > m©chî->
ödex
)

1503  
MATCHER_OK
;

1507 
	}
}

1509 
m©chî_rv


1510 
	$cmd_m©chî_buûd_keyw‹d_¨gs
(
cmd_m©chî
 *
m©chî
,

1511 
cmd_tokí
 *
tokí
,

1512 *
¨gc
, c⁄° **
¨gv
,

1513 
ve˘‹
 
keyw‹d_¨gs_ve˘‹
)

1515 
i
, 
j
;

1516 c⁄° **
keyw‹d_¨gs
;

1517 
ve˘‹
 
keyw‹d_ve˘‹
;

1518 
cmd_tokí
 *
w‹d_tokí
;

1519 c⁄° *
¨g
;

1520 
m©chî_rv
 
rv
;

1522 
rv
 = 
MATCHER_OK
;

1524 i‡(
keyw‹d_¨gs_ve˘‹
 =
NULL
)

1525  
rv
;

1527 
i
 = 0; i < 
	`ve˘‹_a˘ive
(
tokí
->
keyw‹d
); i++)

1529 
keyw‹d_ve˘‹
 = 
	`ve˘‹_¶Ÿ
(
tokí
->
keyw‹d
, 
i
);

1530 
keyw‹d_¨gs
 = 
	`ve˘‹_lookup
(
keyw‹d_¨gs_ve˘‹
, 
i
);

1532 i‡(
	`ve˘‹_a˘ive
(
keyw‹d_ve˘‹
) == 1)

1535 i‡(
keyw‹d_¨gs
)

1537 
w‹d_tokí
 = 
	`ve˘‹_¶Ÿ
(
keyw‹d_ve˘‹
, 0);

1538 
¨g
 = 
w‹d_tokí
->
cmd
;

1542 
¨g
 = 
NULL
;

1545 i‡(
	`push_¨gumít
(
¨gc
, 
¨gv
, 
¨g
))

1546 
rv
 = 
MATCHER_EXCEED_ARGC_MAX
;

1551 i‡(
keyw‹d_¨gs
)

1554 
j
 = 0; 
keyw‹d_¨gs
[j] != (*)-1; j++)

1555 i‡(
	`push_¨gumít
(
¨gc
, 
¨gv
, 
keyw‹d_¨gs
[
j
]))

1556 
rv
 = 
MATCHER_EXCEED_ARGC_MAX
;

1557 
	`XFREE
(
MTYPE_TMP
, 
keyw‹d_¨gs
);

1563 
j
 = 1; j < 
	`ve˘‹_a˘ive
(
keyw‹d_ve˘‹
); j++)

1565 
w‹d_tokí
 = 
	`ve˘‹_¶Ÿ
(
keyw‹d_ve˘‹
, 
j
);

1566 i‡((
w‹d_tokí
->
ty≥
 =
TOKEN_TERMINAL


1567 && (
	`CMD_VARARG
(
w‹d_tokí
->
cmd
)

1568 || 
	`CMD_VARIABLE
(
w‹d_tokí
->
cmd
)

1569 || 
	`CMD_OPTION
(
w‹d_tokí
->
cmd
)))

1570 || 
w‹d_tokí
->
ty≥
 =
TOKEN_MULTIPLE
)

1572 i‡(
	`push_¨gumít
(
¨gc
, 
¨gv
, 
NULL
))

1573 
rv
 = 
MATCHER_EXCEED_ARGC_MAX
;

1579 
	`ve˘‹_‰ì
(
keyw‹d_¨gs_ve˘‹
);

1580  
rv
;

1581 
	}
}

1583 
m©chî_rv


1584 
	$cmd_m©chî_m©ch_keyw‹d
(
cmd_m©chî
 *
m©chî
,

1585 
cmd_tokí
 *
tokí
,

1586 *
¨gc
, c⁄° **
¨gv
)

1588 
ve˘‹
 
keyw‹d_¨gs_ve˘‹
;

1589 
m©chî_rv
 
ªadî_rv
;

1590 
m©chî_rv
 
buûdî_rv
;

1592 
	`as£π
(
tokí
->
ty≥
 =
TOKEN_KEYWORD
);

1594 i‡(
¨gc
 && 
¨gv
)

1595 
keyw‹d_¨gs_ve˘‹
 = 
	`ve˘‹_öô
(
VECTOR_MIN_SIZE
);

1597 
keyw‹d_¨gs_ve˘‹
 = 
NULL
;

1599 
ªadî_rv
 = 
	`cmd_m©chî_ªad_keyw‹ds
(
m©chî
, 
tokí
, 
keyw‹d_¨gs_ve˘‹
);

1600 
buûdî_rv
 = 
	`cmd_m©chî_buûd_keyw‹d_¨gs
(
m©chî
, 
tokí
, 
¨gc
,

1601 
¨gv
, 
keyw‹d_¨gs_ve˘‹
);

1604 i‡(!
	`MATCHER_ERROR
(
ªadî_rv
Ë&& MATCHER_ERROR(
buûdî_rv
))

1605  
buûdî_rv
;

1607  
ªadî_rv
;

1608 
	}
}

1611 
	$cmd_m©chî_öô
(
cmd_m©chî
 *
m©chî
,

1612 
cmd_ñemít
 *
cmd
,

1613 
fûãr_ty≥
 
fûãr
,

1614 
ve˘‹
 
vlöe
,

1615 
ödex
,

1616 
m©ch_ty≥
 *match_type,

1617 
ve˘‹
 *
m©ch
)

1619 
	`mem£t
(
m©chî
, 0, (*matcher));

1621 
m©chî
->
cmd
 = cmd;

1622 
m©chî
->
fûãr
 = filter;

1623 
m©chî
->
vlöe
 = vline;

1624 
m©chî
->
ödex
 = index;

1626 
m©chî
->
m©ch_ty≥
 = match_type;

1627 i‡(
m©chî
->
m©ch_ty≥
)

1628 *
m©chî
->
m©ch_ty≥
 = 
no_m©ch
;

1629 
m©chî
->
m©ch
 = match;

1631 
m©chî
->
w‹d_ödex
 = 0;

1632 
	}
}

1634 
m©chî_rv


1635 
	$cmd_ñemít_m©ch
(
cmd_ñemít
 *cmd_element,

1636 
fûãr_ty≥
 
fûãr
,

1637 
ve˘‹
 
vlöe
,

1638 
ödex
,

1639 
m©ch_ty≥
 *match_type,

1640 
ve˘‹
 *
m©ch
,

1641 *
¨gc
,

1642 c⁄° **
¨gv
)

1644 
cmd_m©chî
 
m©chî
;

1645 
tokí_ödex
;

1646 
m©chî_rv
 
rv
 = 
MATCHER_NO_MATCH
;

1648 
	`cmd_m©chî_öô
(&
m©chî
, 
cmd_ñemít
, 
fûãr
,

1649 
vlöe
, 
ödex
, 
m©ch_ty≥
, 
m©ch
);

1651 i‡(
¨gc
 !
NULL
)

1652 *
¨gc
 = 0;

1654 
tokí_ödex
 = 0;

1655 
tokí_ödex
 < 
	`ve˘‹_a˘ive
(
cmd_ñemít
->
tokís
);

1656 
tokí_ödex
++)

1658 
cmd_tokí
 *
tokí
 = 
	`ve˘‹_¶Ÿ
(
cmd_ñemít
->
tokís
, 
tokí_ödex
);

1660 
tokí
->
ty≥
)

1662 
TOKEN_TERMINAL
:

1663 
rv
 = 
	`cmd_m©chî_m©ch_ãrmöÆ
(&
m©chî
, 
tokí
, 
¨gc
, 
¨gv
);

1665 
TOKEN_MULTIPLE
:

1666 
rv
 = 
	`cmd_m©chî_m©ch_mu…ùÀ
(&
m©chî
, 
tokí
, 
¨gc
, 
¨gv
);

1668 
TOKEN_KEYWORD
:

1669 
rv
 = 
	`cmd_m©chî_m©ch_keyw‹d
(&
m©chî
, 
tokí
, 
¨gc
, 
¨gv
);

1672 i‡(
	`MATCHER_ERROR
(
rv
))

1673  
rv
;

1675 i‡(
m©chî
.
w‹d_ödex
 > 
ödex
)

1676  
MATCHER_OK
;

1680 i‡(
m©chî
.
w‹d_ödex
 >
	`ve˘‹_a˘ive
(
vlöe
))

1681  
MATCHER_COMPLETE
;

1684 i‡(
m©chî
.
w‹d_ödex
 =
	`ve˘‹_a˘ive
(
vlöe
) - 1

1685 && (!
	`ve˘‹_¶Ÿ
(
vlöe
, 
m©chî
.
w‹d_ödex
)

1686 || !
	`°æí
((*)
	`ve˘‹_¶Ÿ
(
vlöe
, 
m©chî
.
w‹d_ödex
))))

1687  
MATCHER_COMPLETE
;

1689  
MATCHER_NO_MATCH
;

1690 
	}
}

1714 
	$cmd_ve˘‹_fûãr
(
ve˘‹
 
comm™ds
,

1715 
fûãr_ty≥
 
fûãr
,

1716 
ve˘‹
 
vlöe
,

1717 
ödex
,

1718 
m©ch_ty≥
 *match_type,

1719 
ve˘‹
 *
m©ches
)

1721 
i
;

1722 
cmd_ñemít
 *cmd_element;

1723 
m©ch_ty≥
 
be°_m©ch
;

1724 
m©ch_ty≥
 
ñemít_m©ch
;

1725 
m©chî_rv
 matcher_rv;

1727 
be°_m©ch
 = 
no_m©ch
;

1728 *
m©ches
 = 
	`ve˘‹_öô
(
VECTOR_MIN_SIZE
);

1730 
i
 = 0; i < 
	`ve˘‹_a˘ive
 (
comm™ds
); i++)

1731 i‡((
cmd_ñemít
 = 
	`ve˘‹_¶Ÿ
 (
comm™ds
, 
i
)Ë!
NULL
)

1733 
	`ve˘‹_£t_ödex
(*
m©ches
, 
i
, 
NULL
);

1734 
m©chî_rv
 = 
	`cmd_ñemít_m©ch
(
cmd_ñemít
, 
fûãr
,

1735 
vlöe
, 
ödex
,

1736 &
ñemít_m©ch
,

1737 (
ve˘‹
*)&
	`ve˘‹_¶Ÿ
(*
m©ches
, 
i
),

1738 
NULL
, NULL);

1739 i‡(
	`MATCHER_ERROR
(
m©chî_rv
))

1741 
	`ve˘‹_¶Ÿ
(
comm™ds
, 
i
Ë
NULL
;

1742 i‡(
m©chî_rv
 =
MATCHER_AMBIGUOUS
)

1743  
CMD_ERR_AMBIGUOUS
;

1744 i‡(
m©chî_rv
 =
MATCHER_EXCEED_ARGC_MAX
)

1745  
CMD_ERR_EXEED_ARGC_MAX
;

1747 i‡(
ñemít_m©ch
 > 
be°_m©ch
)

1749 
be°_m©ch
 = 
ñemít_m©ch
;

1752 *
m©ch_ty≥
 = 
be°_m©ch
;

1753  
CMD_SUCCESS
;

1754 
	}
}

1766 
	$cmd_is_com∂ëe
(
cmd_ñemít
 *cmd_element,

1767 
ve˘‹
 
vlöe
)

1769 
m©chî_rv
 
rv
;

1771 
rv
 = 
	`cmd_ñemít_m©ch
(
cmd_ñemít
,

1772 
FILTER_RELAXED
,

1773 
vlöe
, -1,

1774 
NULL
, NULL,

1775 
NULL
, NULL);

1776  (
rv
 =
MATCHER_COMPLETE
);

1777 
	}
}

1791 
	$cmd_∑r£
(
cmd_ñemít
 *cmd_element,

1792 
ve˘‹
 
vlöe
,

1793 *
¨gc
, c⁄° **
¨gv
)

1795 
m©chî_rv
 
rv
 = 
	`cmd_ñemít_m©ch
(
cmd_ñemít
,

1796 
FILTER_RELAXED
,

1797 
vlöe
, -1,

1798 
NULL
, NULL,

1799 
¨gc
, 
¨gv
);

1800 
rv
)

1802 
MATCHER_COMPLETE
:

1803  
CMD_SUCCESS
;

1805 
MATCHER_NO_MATCH
:

1806  
CMD_ERR_NO_MATCH
;

1808 
MATCHER_AMBIGUOUS
:

1809  
CMD_ERR_AMBIGUOUS
;

1811 
MATCHER_EXCEED_ARGC_MAX
:

1812  
CMD_ERR_EXEED_ARGC_MAX
;

1815  
CMD_ERR_INCOMPLETE
;

1817 
	}
}

1821 
	$is_cmd_ambiguous
 (
ve˘‹
 
cmd_ve˘‹
,

1822 c⁄° *
comm™d
,

1823 
ve˘‹
 
m©ches
,

1824 
m©ch_ty≥
 
ty≥
)

1826 
i
;

1827 
j
;

1828 c⁄° *
°r
 = 
NULL
;

1829 c⁄° *
m©ched
 = 
NULL
;

1830 
ve˘‹
 
m©ch_ve˘‹
;

1831 
cmd_tokí
 *cmd_token;

1833 i‡(
comm™d
 =
NULL
)

1834 
comm™d
 = "";

1836 
i
 = 0; i < 
	`ve˘‹_a˘ive
 (
m©ches
); i++)

1837 i‡((
m©ch_ve˘‹
 = 
	`ve˘‹_¶Ÿ
 (
m©ches
, 
i
)Ë!
NULL
)

1839 
m©ch
 = 0;

1841 
j
 = 0; j < 
	`ve˘‹_a˘ive
 (
m©ch_ve˘‹
); j++)

1842 i‡((
cmd_tokí
 = 
	`ve˘‹_¶Ÿ
 (
m©ch_ve˘‹
, 
j
)Ë!
NULL
)

1844 
m©ch_ty≥
 
ªt
;

1846 
	`as£π
(
cmd_tokí
->
ty≥
 =
TOKEN_TERMINAL
);

1847 i‡(
cmd_tokí
->
ty≥
 !
TOKEN_TERMINAL
)

1850 
°r
 = 
cmd_tokí
->
cmd
;

1852 
ty≥
)

1854 
exa˘_m©ch
:

1855 i‡(!(
	`CMD_OPTION
 (
°r
Ë|| 
	`CMD_VARIABLE
 (str))

1856 && 
	`°rcmp
 (
comm™d
, 
°r
) == 0)

1857 
m©ch
++;

1859 
∑πly_m©ch
:

1860 i‡(!(
	`CMD_OPTION
 (
°r
Ë|| 
	`CMD_VARIABLE
 (str))

1861 && 
	`°∫cmp
 (
comm™d
, 
°r
, 
	`°æí
 (command)) == 0)

1863 i‡(
m©ched
 && 
	`°rcmp
 (m©ched, 
°r
) != 0)

1866 
m©ched
 = 
°r
;

1867 
m©ch
++;

1870 
ønge_m©ch
:

1871 i‡(
	`cmd_ønge_m©ch
 (
°r
, 
comm™d
))

1873 i‡(
m©ched
 && 
	`°rcmp
 (m©ched, 
°r
) != 0)

1876 
m©ched
 = 
°r
;

1877 
m©ch
++;

1880 #ifde‡
HAVE_IPV6


1881 
ùv6_m©ch
:

1882 i‡(
	`CMD_IPV6
 (
°r
))

1883 
m©ch
++;

1885 
ùv6_¥efix_m©ch
:

1886 i‡((
ªt
 = 
	`cmd_ùv6_¥efix_m©ch
 (
comm™d
)Ë!
no_m©ch
)

1888 i‡(
ªt
 =
∑πly_m©ch
)

1891 
m©ch
++;

1895 
ùv4_m©ch
:

1896 i‡(
	`CMD_IPV4
 (
°r
))

1897 
m©ch
++;

1899 
ùv4_¥efix_m©ch
:

1900 i‡((
ªt
 = 
	`cmd_ùv4_¥efix_m©ch
 (
comm™d
)Ë!
no_m©ch
)

1902 i‡(
ªt
 =
∑πly_m©ch
)

1905 
m©ch
++;

1908 
exãnd_m©ch
:

1909 i‡(
	`CMD_OPTION
 (
°r
Ë|| 
	`CMD_VARIABLE
 (str))

1910 
m©ch
++;

1912 
no_m©ch
:

1917 i‡(!
m©ch
)

1918 
	`ve˘‹_¶Ÿ
 (
cmd_ve˘‹
, 
i
Ë
NULL
;

1921 
	}
}

1925 
	$cmd_íåy_fun˘i⁄
 (c⁄° *
§c
, c⁄° *
d°
)

1928 i‡(
	`CMD_OPTION
 (
d°
Ë|| 
	`CMD_VARIABLE
 (d°Ë|| 
	`CMD_VARARG
 (dst) ||

1929 
	`CMD_IPV4
 (
d°
Ë|| 
	`CMD_IPV4_PREFIX
 (d°Ë|| 
	`CMD_RANGE
 (dst))

1930  
NULL
;

1933 i‡(
§c
 =
NULL
)

1934  
d°
;

1937 i‡(
	`°∫cmp
 (
§c
, 
d°
, 
	`°æí
 (src)) == 0)

1938  
d°
;

1940  
NULL
;

1941 
	}
}

1947 
	$cmd_íåy_fun˘i⁄_desc
 (c⁄° *
§c
, c⁄° *
d°
)

1949 i‡(
	`CMD_VARARG
 (
d°
))

1950  
d°
;

1952 i‡(
	`CMD_RANGE
 (
d°
))

1954 i‡(
	`cmd_ønge_m©ch
 (
d°
, 
§c
))

1955  
d°
;

1957  
NULL
;

1960 #ifde‡
HAVE_IPV6


1961 i‡(
	`CMD_IPV6
 (
d°
))

1963 i‡(
	`cmd_ùv6_m©ch
 (
§c
))

1964  
d°
;

1966  
NULL
;

1969 i‡(
	`CMD_IPV6_PREFIX
 (
d°
))

1971 i‡(
	`cmd_ùv6_¥efix_m©ch
 (
§c
))

1972  
d°
;

1974  
NULL
;

1978 i‡(
	`CMD_IPV4
 (
d°
))

1980 i‡(
	`cmd_ùv4_m©ch
 (
§c
))

1981  
d°
;

1983  
NULL
;

1986 i‡(
	`CMD_IPV4_PREFIX
 (
d°
))

1988 i‡(
	`cmd_ùv4_¥efix_m©ch
 (
§c
))

1989  
d°
;

1991  
NULL
;

1995 i‡(
	`CMD_OPTION
 (
d°
Ë|| 
	`CMD_VARIABLE
 (dst))

1996  
d°
;

1999 i‡(
§c
 =
NULL
)

2000  
d°
;

2002 i‡(
	`°∫cmp
 (
§c
, 
d°
, 
	`°æí
 (src)) == 0)

2003  
d°
;

2005  
NULL
;

2006 
	}
}

2015 
	$cmd_unique_°rög
 (
ve˘‹
 
v
, c⁄° *
°r
)

2017 
i
;

2018 *
m©ch
;

2020 
i
 = 0; i < 
	`ve˘‹_a˘ive
 (
v
); i++)

2021 i‡((
m©ch
 = 
	`ve˘‹_¶Ÿ
 (
v
, 
i
)Ë!
NULL
)

2022 i‡(
	`°rcmp
 (
m©ch
, 
°r
) == 0)

2025 
	}
}

2036 
	$desc_unique_°rög
 (
ve˘‹
 
v
, c⁄° *
°r
)

2038 
i
;

2039 
cmd_tokí
 *
tokí
;

2041 
i
 = 0; i < 
	`ve˘‹_a˘ive
 (
v
); i++)

2042 i‡((
tokí
 = 
	`ve˘‹_¶Ÿ
 (
v
, 
i
)Ë!
NULL
)

2043 i‡(
	`°rcmp
 (
tokí
->
cmd
, 
°r
) == 0)

2046 
	}
}

2049 
	$cmd_åy_do_sh‹tcut
 (
node_ty≥
 
node
, * 
fú°_w‹d
) {

2050 i‡–
fú°_w‹d
 !
NULL
 &&

2051 
node
 !
AUTH_NODE
 &&

2052 
node
 !
VIEW_NODE
 &&

2053 
node
 !
AUTH_ENABLE_NODE
 &&

2054 
node
 !
ENABLE_NODE
 &&

2055 
node
 !
RESTRICTED_NODE
 &&

2056 0 =
	`°rcmp
–"do", 
fú°_w‹d
 ) )

2059 
	}
}

2062 
	$cmd_m©ches_‰ì
(
ve˘‹
 *
m©ches
)

2064 
i
;

2065 
ve˘‹
 
cmd_m©ches
;

2067 
i
 = 0; i < 
	`ve˘‹_a˘ive
(*
m©ches
); i++)

2068 i‡((
cmd_m©ches
 = 
	`ve˘‹_¶Ÿ
(*
m©ches
, 
i
)Ë!
NULL
)

2069 
	`ve˘‹_‰ì
(
cmd_m©ches
);

2070 
	`ve˘‹_‰ì
(*
m©ches
);

2071 *
m©ches
 = 
NULL
;

2072 
	}
}

2075 
	$cmd_des¸ibe_cmp
(c⁄° *
a
, c⁄° *
b
)

2077 c⁄° 
cmd_tokí
 *
fú°
 = *(cmd_tokí * c⁄° *)
a
;

2078 c⁄° 
cmd_tokí
 *
£c⁄d
 = *(cmd_tokí * c⁄° *)
b
;

2080  
	`°rcmp
(
fú°
->
cmd
, 
£c⁄d
->cmd);

2081 
	}
}

2084 
	$cmd_des¸ibe_s‹t
(
ve˘‹
 
m©chvec
)

2086 
	`qs‹t
(
m©chvec
->
ödex
, 
	`ve˘‹_a˘ive
(matchvec),

2087 (*), 
cmd_des¸ibe_cmp
);

2088 
	}
}

2091 
ve˘‹


2092 
	$cmd_des¸ibe_comm™d_ªÆ
 (
ve˘‹
 
vlöe
, 
vty
 *vty, *
°©us
)

2094 
i
;

2095 
ve˘‹
 
cmd_ve˘‹
;

2096 
	#INIT_MATCHVEC_SIZE
 10

	)

2097 
ve˘‹
 
m©chvec
;

2098 
cmd_ñemít
 *cmd_element;

2099 
ödex
;

2100 
ªt
;

2101 
m©ch_ty≥
 
m©ch
;

2102 *
comm™d
;

2103 
ve˘‹
 
m©ches
 = 
NULL
;

2104 
ve˘‹
 
m©ch_ve˘‹
;

2107 i‡(
	`ve˘‹_a˘ive
 (
vlöe
) == 0)

2109 *
°©us
 = 
CMD_ERR_NO_MATCH
;

2110  
NULL
;

2113 
ödex
 = 
	`ve˘‹_a˘ive
 (
vlöe
) - 1;

2116 
cmd_ve˘‹
 = 
	`ve˘‹_c›y
 (
	`cmd_node_ve˘‹
 (
cmdvec
, 
vty
->
node
));

2119 
m©chvec
 = 
	`ve˘‹_öô
 (
INIT_MATCHVEC_SIZE
);

2122 
i
 = 0; i <
ödex
; i++)

2124 
comm™d
 = 
	`ve˘‹_¶Ÿ
 (
vlöe
, 
i
);

2126 i‡(
m©ches
)

2127 
	`cmd_m©ches_‰ì
(&
m©ches
);

2129 
ªt
 = 
	`cmd_ve˘‹_fûãr
(
cmd_ve˘‹
,

2130 
FILTER_RELAXED
,

2131 
vlöe
, 
i
,

2132 &
m©ch
,

2133 &
m©ches
);

2135 i‡(
ªt
 !
CMD_SUCCESS
)

2137 
	`ve˘‹_‰ì
 (
cmd_ve˘‹
);

2138 
	`ve˘‹_‰ì
 (
m©chvec
);

2139 
	`cmd_m©ches_‰ì
(&
m©ches
);

2140 *
°©us
 = 
ªt
;

2141  
NULL
;

2145 i‡(
i
 =
ödex
)

2148 i‡(
m©ch
 =
v¨¨g_m©ch
)

2152 
j
, 
k
;

2154 
j
 = 0; j < 
	`ve˘‹_a˘ive
 (
m©ches
); j++)

2155 i‡((
m©ch_ve˘‹
 = 
	`ve˘‹_¶Ÿ
 (
m©ches
, 
j
)Ë!
NULL
)

2156 
k
 = 0; k < 
	`ve˘‹_a˘ive
 (
m©ch_ve˘‹
); k++)

2158 
cmd_tokí
 *
tokí
 = 
	`ve˘‹_¶Ÿ
 (
m©ch_ve˘‹
, 
k
);

2159 
	`ve˘‹_£t
 (
m©chvec
, 
tokí
);

2162 *
°©us
 = 
CMD_SUCCESS
;

2163 
	`ve˘‹_£t
(
m©chvec
, &
tokí_¸
);

2164 
	`ve˘‹_‰ì
 (
cmd_ve˘‹
);

2165 
	`cmd_m©ches_‰ì
(&
m©ches
);

2166 
	`cmd_des¸ibe_s‹t
(
m©chvec
);

2167  
m©chvec
;

2170 
ªt
 = 
	`is_cmd_ambiguous
(
cmd_ve˘‹
, 
comm™d
, 
m©ches
, 
m©ch
);

2171 i‡(
ªt
 == 1)

2173 
	`ve˘‹_‰ì
 (
cmd_ve˘‹
);

2174 
	`ve˘‹_‰ì
 (
m©chvec
);

2175 
	`cmd_m©ches_‰ì
(&
m©ches
);

2176 *
°©us
 = 
CMD_ERR_AMBIGUOUS
;

2177  
NULL
;

2179 i‡(
ªt
 == 2)

2181 
	`ve˘‹_‰ì
 (
cmd_ve˘‹
);

2182 
	`ve˘‹_‰ì
 (
m©chvec
);

2183 
	`cmd_m©ches_‰ì
(&
m©ches
);

2184 *
°©us
 = 
CMD_ERR_NO_MATCH
;

2185  
NULL
;

2190 
i
 = 0; i < 
	`ve˘‹_a˘ive
 (
m©ches
); i++)

2191 i‡((
cmd_ñemít
 = 
	`ve˘‹_¶Ÿ
 (
cmd_ve˘‹
, 
i
)Ë!
NULL
)

2193 
j
;

2194 c⁄° *
œ°_w‹d
;

2195 
ve˘‹
 
vlöe_åimmed
;

2197 
œ°_w‹d
 = 
	`ve˘‹_¶Ÿ
(
vlöe
, 
	`ve˘‹_a˘ive
(vline) - 1);

2198 i‡(
œ°_w‹d
 =
NULL
 || !
	`°æí
(last_word))

2200 
vlöe_åimmed
 = 
	`ve˘‹_c›y
(
vlöe
);

2201 
	`ve˘‹_un£t
(
vlöe_åimmed
, 
	`ve˘‹_a˘ive
(vline_trimmed) - 1);

2203 i‡(
	`cmd_is_com∂ëe
(
cmd_ñemít
, 
vlöe_åimmed
)

2204 && 
	`desc_unique_°rög
(
m©chvec
, 
comm™d_¸
))

2206 i‡(
m©ch
 !
v¨¨g_m©ch
)

2207 
	`ve˘‹_£t
(
m©chvec
, &
tokí_¸
);

2210 
	`ve˘‹_‰ì
(
vlöe_åimmed
);

2213 
m©ch_ve˘‹
 = 
	`ve˘‹_¶Ÿ
 (
m©ches
, 
i
);

2214 i‡(
m©ch_ve˘‹
)

2215 
j
 = 0; j < 
	`ve˘‹_a˘ive
(
m©ch_ve˘‹
); j++)

2217 
cmd_tokí
 *
tokí
 = 
	`ve˘‹_¶Ÿ
(
m©ch_ve˘‹
, 
j
);

2218 c⁄° *
°rög
;

2220 
°rög
 = 
	`cmd_íåy_fun˘i⁄_desc
(
comm™d
, 
tokí
->
cmd
);

2221 i‡(
°rög
 && 
	`desc_unique_°rög
(
m©chvec
, string))

2222 
	`ve˘‹_£t
(
m©chvec
, 
tokí
);

2225 
	`ve˘‹_‰ì
 (
cmd_ve˘‹
);

2226 
	`cmd_m©ches_‰ì
(&
m©ches
);

2228 i‡(
	`ve˘‹_¶Ÿ
 (
m©chvec
, 0Ë=
NULL
)

2230 
	`ve˘‹_‰ì
 (
m©chvec
);

2231 *
°©us
 = 
CMD_ERR_NO_MATCH
;

2232  
NULL
;

2235 *
°©us
 = 
CMD_SUCCESS
;

2236 
	`cmd_des¸ibe_s‹t
(
m©chvec
);

2237  
m©chvec
;

2238 
	}
}

2240 
ve˘‹


2241 
	$cmd_des¸ibe_comm™d
 (
ve˘‹
 
vlöe
, 
vty
 *vty, *
°©us
)

2243 
ve˘‹
 
ªt
;

2245 i‡–
	`cmd_åy_do_sh‹tcut
(
vty
->
node
, 
	`ve˘‹_¶Ÿ
(
vlöe
, 0) ) )

2247 
node_ty≥
 
⁄ode
;

2248 
ve˘‹
 
shi·ed_vlöe
;

2249 
ödex
;

2251 
⁄ode
 = 
vty
->
node
;

2252 
vty
->
node
 = 
ENABLE_NODE
;

2255 
shi·ed_vlöe
 = 
	`ve˘‹_öô
 (
	`ve˘‹_cou¡
(
vlöe
));

2257 
ödex
 = 1; index < 
	`ve˘‹_a˘ive
 (
vlöe
); index++)

2259 
	`ve˘‹_£t_ödex
 (
shi·ed_vlöe
, 
ödex
-1, 
	`ve˘‹_lookup
(
vlöe
, index));

2262 
ªt
 = 
	`cmd_des¸ibe_comm™d_ªÆ
 (
shi·ed_vlöe
, 
vty
, 
°©us
);

2264 
	`ve˘‹_‰ì
(
shi·ed_vlöe
);

2265 
vty
->
node
 = 
⁄ode
;

2266  
ªt
;

2270  
	`cmd_des¸ibe_comm™d_ªÆ
 (
vlöe
, 
vty
, 
°©us
);

2271 
	}
}

2276 
	$cmd_lcd
 (**
m©ched
)

2278 
i
;

2279 
j
;

2280 
lcd
 = -1;

2281 *
s1
, *
s2
;

2282 
c1
, 
c2
;

2284 i‡(
m©ched
[0] =
NULL
 || matched[1] == NULL)

2287 
i
 = 1; 
m©ched
[i] !
NULL
; i++)

2289 
s1
 = 
m©ched
[
i
 - 1];

2290 
s2
 = 
m©ched
[
i
];

2292 
j
 = 0; (
c1
 = 
s1
[j]Ë&& (
c2
 = 
s2
[j]); j++)

2293 i‡(
c1
 !
c2
)

2296 i‡(
lcd
 < 0)

2297 
lcd
 = 
j
;

2300 i‡(
lcd
 > 
j
)

2301 
lcd
 = 
j
;

2304  
lcd
;

2305 
	}
}

2308 
	$cmd_com∂ëe_cmp
(c⁄° *
a
, c⁄° *
b
)

2310 c⁄° *
fú°
 = *(* c⁄° *)
a
;

2311 c⁄° *
£c⁄d
 = *(* c⁄° *)
b
;

2313 i‡(!
fú°
)

2315 i‡(!
£c⁄d
)

2319 i‡(!
£c⁄d
)

2322  
	`°rcmp
(
fú°
, 
£c⁄d
);

2323 
	}
}

2326 
	$cmd_com∂ëe_s‹t
(
ve˘‹
 
m©chvec
)

2328 
	`qs‹t
(
m©chvec
->
ödex
, 
	`ve˘‹_a˘ive
(matchvec),

2329 (*), 
cmd_com∂ëe_cmp
);

2330 
	}
}

2334 
	$cmd_com∂ëe_comm™d_ªÆ
 (
ve˘‹
 
vlöe
, 
vty
 *vty, *
°©us
)

2336 
i
;

2337 
ve˘‹
 
cmd_ve˘‹
 = 
	`ve˘‹_c›y
 (
	`cmd_node_ve˘‹
 (
cmdvec
, 
vty
->
node
));

2338 
	#INIT_MATCHVEC_SIZE
 10

	)

2339 
ve˘‹
 
m©chvec
;

2340 
ödex
;

2341 **
m©ch_°r
;

2342 
cmd_tokí
 *
tokí
;

2343 *
comm™d
;

2344 
lcd
;

2345 
ve˘‹
 
m©ches
 = 
NULL
;

2346 
ve˘‹
 
m©ch_ve˘‹
;

2348 i‡(
	`ve˘‹_a˘ive
 (
vlöe
) == 0)

2350 
	`ve˘‹_‰ì
 (
cmd_ve˘‹
);

2351 *
°©us
 = 
CMD_ERR_NO_MATCH
;

2352  
NULL
;

2355 
ödex
 = 
	`ve˘‹_a˘ive
 (
vlöe
) - 1;

2358 
i
 = 0; i <
ödex
; i++)

2360 
comm™d
 = 
	`ve˘‹_¶Ÿ
 (
vlöe
, 
i
);

2361 
m©ch_ty≥
 
m©ch
;

2362 
ªt
;

2364 i‡(
m©ches
)

2365 
	`cmd_m©ches_‰ì
(&
m©ches
);

2368 
ªt
 = 
	`cmd_ve˘‹_fûãr
(
cmd_ve˘‹
,

2369 
FILTER_RELAXED
,

2370 
vlöe
, 
i
,

2371 &
m©ch
,

2372 &
m©ches
);

2374 i‡(
ªt
 !
CMD_SUCCESS
)

2376 
	`ve˘‹_‰ì
(
cmd_ve˘‹
);

2377 
	`cmd_m©ches_‰ì
(&
m©ches
);

2378 *
°©us
 = 
ªt
;

2379  
NULL
;

2383 i‡(
i
 =
ödex
)

2388 
ªt
 = 
	`is_cmd_ambiguous
 (
cmd_ve˘‹
, 
comm™d
, 
m©ches
, 
m©ch
);

2389 i‡(
ªt
 == 1)

2391 
	`ve˘‹_‰ì
 (
cmd_ve˘‹
);

2392 
	`cmd_m©ches_‰ì
(&
m©ches
);

2393 *
°©us
 = 
CMD_ERR_AMBIGUOUS
;

2394  
NULL
;

2408 
m©chvec
 = 
	`ve˘‹_öô
 (
INIT_MATCHVEC_SIZE
);

2411 
i
 = 0; i < 
	`ve˘‹_a˘ive
 (
m©ches
); i++)

2412 i‡((
m©ch_ve˘‹
 = 
	`ve˘‹_¶Ÿ
 (
m©ches
, 
i
)))

2414 c⁄° *
°rög
;

2415 
j
;

2417 
j
 = 0; j < 
	`ve˘‹_a˘ive
 (
m©ch_ve˘‹
); j++)

2418 i‡((
tokí
 = 
	`ve˘‹_¶Ÿ
 (
m©ch_ve˘‹
, 
j
)))

2420 i‡((
°rög
 =

2421 
	`cmd_íåy_fun˘i⁄
 (
	`ve˘‹_¶Ÿ
 (
vlöe
, 
ödex
),

2422 
tokí
->
cmd
)))

2423 i‡(
	`cmd_unique_°rög
 (
m©chvec
, 
°rög
))

2424 
	`ve˘‹_£t
 (
m©chvec
, 
	`XSTRDUP
 (
MTYPE_TMP
, 
°rög
));

2429 
	`ve˘‹_‰ì
 (
cmd_ve˘‹
);

2430 
	`cmd_m©ches_‰ì
(&
m©ches
);

2433 i‡(
	`ve˘‹_¶Ÿ
 (
m©chvec
, 0Ë=
NULL
)

2435 
	`ve˘‹_‰ì
 (
m©chvec
);

2439 i‡(
	`ve˘‹_¶Ÿ
 (
vlöe
, 
ödex
) == '\0')

2440 *
°©us
 = 
CMD_ERR_NOTHING_TODO
;

2442 *
°©us
 = 
CMD_ERR_NO_MATCH
;

2443  
NULL
;

2447 i‡(
	`ve˘‹_¶Ÿ
 (
m©chvec
, 1Ë=
NULL
)

2449 
m©ch_°r
 = (**Ë
m©chvec
->
ödex
;

2450 
	`ve˘‹_⁄ly_wøµî_‰ì
 (
m©chvec
);

2451 *
°©us
 = 
CMD_COMPLETE_FULL_MATCH
;

2452  
m©ch_°r
;

2455 
	`ve˘‹_£t
 (
m©chvec
, 
NULL
);

2458 i‡(
	`ve˘‹_¶Ÿ
 (
vlöe
, 
ödex
Ë!
NULL
)

2460 
lcd
 = 
	`cmd_lcd
 ((**Ë
m©chvec
->
ödex
);

2462 i‡(
lcd
)

2464 
Àn
 = 
	`°æí
 (
	`ve˘‹_¶Ÿ
 (
vlöe
, 
ödex
));

2466 i‡(
Àn
 < 
lcd
)

2468 *
lcd°r
;

2470 
lcd°r
 = 
	`XMALLOC
 (
MTYPE_TMP
, 
lcd
 + 1);

2471 
	`mem˝y
 (
lcd°r
, 
m©chvec
->
ödex
[0], 
lcd
);

2472 
lcd°r
[
lcd
] = '\0';

2477 
i
 = 0; i < 
	`ve˘‹_a˘ive
 (
m©chvec
); i++)

2479 i‡(
	`ve˘‹_¶Ÿ
 (
m©chvec
, 
i
))

2480 
	`XFREE
 (
MTYPE_TMP
, 
	`ve˘‹_¶Ÿ
 (
m©chvec
, 
i
));

2482 
	`ve˘‹_‰ì
 (
m©chvec
);

2485 
m©chvec
 = 
	`ve˘‹_öô
 (
INIT_MATCHVEC_SIZE
);

2486 
	`ve˘‹_£t
 (
m©chvec
, 
lcd°r
);

2487 
m©ch_°r
 = (**Ë
m©chvec
->
ödex
;

2488 
	`ve˘‹_⁄ly_wøµî_‰ì
 (
m©chvec
);

2490 *
°©us
 = 
CMD_COMPLETE_MATCH
;

2491  
m©ch_°r
;

2496 
m©ch_°r
 = (**Ë
m©chvec
->
ödex
;

2497 
	`cmd_com∂ëe_s‹t
(
m©chvec
);

2498 
	`ve˘‹_⁄ly_wøµî_‰ì
 (
m©chvec
);

2499 *
°©us
 = 
CMD_COMPLETE_LIST_MATCH
;

2500  
m©ch_°r
;

2501 
	}
}

2504 
	$cmd_com∂ëe_comm™d
 (
ve˘‹
 
vlöe
, 
vty
 *vty, *
°©us
)

2506 **
ªt
;

2508 i‡–
	`cmd_åy_do_sh‹tcut
(
vty
->
node
, 
	`ve˘‹_¶Ÿ
(
vlöe
, 0) ) )

2510 
node_ty≥
 
⁄ode
;

2511 
ve˘‹
 
shi·ed_vlöe
;

2512 
ödex
;

2514 
⁄ode
 = 
vty
->
node
;

2515 
vty
->
node
 = 
ENABLE_NODE
;

2518 
shi·ed_vlöe
 = 
	`ve˘‹_öô
 (
	`ve˘‹_cou¡
(
vlöe
));

2520 
ödex
 = 1; index < 
	`ve˘‹_a˘ive
 (
vlöe
); index++)

2522 
	`ve˘‹_£t_ödex
 (
shi·ed_vlöe
, 
ödex
-1, 
	`ve˘‹_lookup
(
vlöe
, index));

2525 
ªt
 = 
	`cmd_com∂ëe_comm™d_ªÆ
 (
shi·ed_vlöe
, 
vty
, 
°©us
);

2527 
	`ve˘‹_‰ì
(
shi·ed_vlöe
);

2528 
vty
->
node
 = 
⁄ode
;

2529  
ªt
;

2533  
	`cmd_com∂ëe_comm™d_ªÆ
 (
vlöe
, 
vty
, 
°©us
);

2534 
	}
}

2538 
node_ty≥


2539 
	$node_∑ª¡
 ( 
node_ty≥
 
node
 )

2541 
node_ty≥
 
ªt
;

2543 
	`as£π
 (
node
 > 
CONFIG_NODE
);

2545 
node
)

2547 
BGP_VPNV4_NODE
:

2548 
BGP_IPV4_NODE
:

2549 
BGP_IPV4M_NODE
:

2550 
BGP_IPV6_NODE
:

2551 
BGP_IPV6M_NODE
:

2552 
ªt
 = 
BGP_NODE
;

2554 
KEYCHAIN_KEY_NODE
:

2555 
ªt
 = 
KEYCHAIN_NODE
;

2558 
ªt
 = 
CONFIG_NODE
;

2561  
ªt
;

2562 
	}
}

2566 
	$cmd_execuã_comm™d_ªÆ
 (
ve˘‹
 
vlöe
,

2567 
fûãr_ty≥
 
fûãr
,

2568 
vty
 *vty,

2569 
cmd_ñemít
 **
cmd
)

2571 
i
;

2572 
ödex
;

2573 
ve˘‹
 
cmd_ve˘‹
;

2574 
cmd_ñemít
 *cmd_element;

2575 
cmd_ñemít
 *
m©ched_ñemít
;

2576 
m©ched_cou¡
, 
öcom∂ëe_cou¡
;

2577 
¨gc
;

2578 c⁄° *
¨gv
[
CMD_ARGC_MAX
];

2579 
m©ch_ty≥
 
m©ch
 = 0;

2580 *
comm™d
;

2581 
ªt
;

2582 
ve˘‹
 
m©ches
;

2585 
cmd_ve˘‹
 = 
	`ve˘‹_c›y
 (
	`cmd_node_ve˘‹
 (
cmdvec
, 
vty
->
node
));

2587 
ödex
 = 0; index < 
	`ve˘‹_a˘ive
 (
vlöe
); index++)

2589 
comm™d
 = 
	`ve˘‹_¶Ÿ
 (
vlöe
, 
ödex
);

2590 
ªt
 = 
	`cmd_ve˘‹_fûãr
(
cmd_ve˘‹
,

2591 
fûãr
,

2592 
vlöe
, 
ödex
,

2593 &
m©ch
,

2594 &
m©ches
);

2596 i‡(
ªt
 !
CMD_SUCCESS
)

2598 
	`cmd_m©ches_‰ì
(&
m©ches
);

2599  
ªt
;

2602 i‡(
m©ch
 =
v¨¨g_m©ch
)

2604 
	`cmd_m©ches_‰ì
(&
m©ches
);

2608 
ªt
 = 
	`is_cmd_ambiguous
 (
cmd_ve˘‹
, 
comm™d
, 
m©ches
, 
m©ch
);

2609 
	`cmd_m©ches_‰ì
(&
m©ches
);

2611 i‡(
ªt
 == 1)

2613 
	`ve˘‹_‰ì
(
cmd_ve˘‹
);

2614  
CMD_ERR_AMBIGUOUS
;

2616 i‡(
ªt
 == 2)

2618 
	`ve˘‹_‰ì
(
cmd_ve˘‹
);

2619  
CMD_ERR_NO_MATCH
;

2624 
m©ched_ñemít
 = 
NULL
;

2625 
m©ched_cou¡
 = 0;

2626 
öcom∂ëe_cou¡
 = 0;

2628 
i
 = 0; i < 
	`ve˘‹_a˘ive
 (
cmd_ve˘‹
); i++)

2629 i‡((
cmd_ñemít
 = 
	`ve˘‹_¶Ÿ
 (
cmd_ve˘‹
, 
i
)))

2631 i‡(
	`cmd_is_com∂ëe
(
cmd_ñemít
, 
vlöe
))

2633 
m©ched_ñemít
 = 
cmd_ñemít
;

2634 
m©ched_cou¡
++;

2638 
öcom∂ëe_cou¡
++;

2643 
	`ve˘‹_‰ì
 (
cmd_ve˘‹
);

2646 i‡(
m©ched_cou¡
 == 0)

2648 i‡(
öcom∂ëe_cou¡
)

2649  
CMD_ERR_INCOMPLETE
;

2651  
CMD_ERR_NO_MATCH
;

2654 i‡(
m©ched_cou¡
 > 1)

2655  
CMD_ERR_AMBIGUOUS
;

2657 
ªt
 = 
	`cmd_∑r£
(
m©ched_ñemít
, 
vlöe
, &
¨gc
, 
¨gv
);

2658 i‡(
ªt
 !
CMD_SUCCESS
)

2659  
ªt
;

2662 i‡(
cmd
)

2663 *
cmd
 = 
m©ched_ñemít
;

2665 i‡(
m©ched_ñemít
->
d´m⁄
)

2666  
CMD_SUCCESS_DAEMON
;

2669  (*
m©ched_ñemít
->
func
Ë(m©ched_ñemít, 
vty
, 
¨gc
, 
¨gv
);

2670 
	}
}

2688 
	$cmd_execuã_comm™d
 (
ve˘‹
 
vlöe
, 
vty
 *vty, 
cmd_ñemít
 **
cmd
,

2689 
vtysh
) {

2690 
ªt
, 
ßved_ªt
, 
åõd
 = 0;

2691 
node_ty≥
 
⁄ode
, 
åy_node
;

2693 
⁄ode
 = 
åy_node
 = 
vty
->
node
;

2695 i‡–
	`cmd_åy_do_sh‹tcut
(
vty
->
node
, 
	`ve˘‹_¶Ÿ
(
vlöe
, 0) ) )

2697 
ve˘‹
 
shi·ed_vlöe
;

2698 
ödex
;

2700 
vty
->
node
 = 
ENABLE_NODE
;

2703 
shi·ed_vlöe
 = 
	`ve˘‹_öô
 (
	`ve˘‹_cou¡
(
vlöe
));

2705 
ödex
 = 1; index < 
	`ve˘‹_a˘ive
 (
vlöe
); index++)

2707 
	`ve˘‹_£t_ödex
 (
shi·ed_vlöe
, 
ödex
-1, 
	`ve˘‹_lookup
(
vlöe
, index));

2710 
ªt
 = 
	`cmd_execuã_comm™d_ªÆ
 (
shi·ed_vlöe
, 
FILTER_RELAXED
, 
vty
, 
cmd
);

2712 
	`ve˘‹_‰ì
(
shi·ed_vlöe
);

2713 
vty
->
node
 = 
⁄ode
;

2714  
ªt
;

2718 
ßved_ªt
 = 
ªt
 = 
	`cmd_execuã_comm™d_ªÆ
 (
vlöe
, 
FILTER_RELAXED
, 
vty
, 
cmd
);

2720 i‡(
vtysh
)

2721  
ßved_ªt
;

2724  
ªt
 !
CMD_SUCCESS
 &&Ñë !
CMD_WARNING


2725 && 
vty
->
node
 > 
CONFIG_NODE
 )

2727 
åy_node
 = 
	`node_∑ª¡
(try_node);

2728 
vty
->
node
 = 
åy_node
;

2729 
ªt
 = 
	`cmd_execuã_comm™d_ªÆ
 (
vlöe
, 
FILTER_RELAXED
, 
vty
, 
cmd
);

2730 
åõd
 = 1;

2731 i‡(
ªt
 =
CMD_SUCCESS
 ||Ñë =
CMD_WARNING
)

2734  
ªt
;

2739 i‡–
åõd
 )

2740 
vty
->
node
 = 
⁄ode
;

2741  
ßved_ªt
;

2742 
	}
}

2758 
	$cmd_execuã_comm™d_°ri˘
 (
ve˘‹
 
vlöe
, 
vty
 *vty,

2759 
cmd_ñemít
 **
cmd
)

2761  
	`cmd_execuã_comm™d_ªÆ
(
vlöe
, 
FILTER_STRICT
, 
vty
, 
cmd
);

2762 
	}
}

2766 
	$c⁄fig_‰om_fûe
 (
vty
 *vty, 
FILE
 *
Â
, *
löe_num
)

2768 
ªt
;

2769 *
löe_num
 = 0;

2770 
ve˘‹
 
vlöe
;

2772 
	`fgës
 (
vty
->
buf
, 
VTY_BUFSIZ
, 
Â
))

2774 ++(*
löe_num
);

2775 
vlöe
 = 
	`cmd_make_°rvec
 (
vty
->
buf
);

2778 i‡(
vlöe
 =
NULL
)

2781 
ªt
 = 
	`cmd_execuã_comm™d_°ri˘
 (
vlöe
, 
vty
, 
NULL
);

2784 
ªt
 !
CMD_SUCCESS
 &&Ñë !
CMD_WARNING


2785 && 
ªt
 !
CMD_ERR_NOTHING_TODO
 && 
vty
->
node
 !
CONFIG_NODE
)

2787 
vty
->
node
 = 
	`node_∑ª¡
(vty->node);

2788 
ªt
 = 
	`cmd_execuã_comm™d_°ri˘
 (
vlöe
, 
vty
, 
NULL
);

2791 
	`cmd_‰ì_°rvec
 (
vlöe
);

2793 i‡(
ªt
 !
CMD_SUCCESS
 &&Ñë !
CMD_WARNING


2794 && 
ªt
 !
CMD_ERR_NOTHING_TODO
)

2795  
ªt
;

2797  
CMD_SUCCESS
;

2798 
	}
}

2801 
DEFUN
 (
c⁄fig_ãrmöÆ
,

2802 
c⁄fig_ãrmöÆ_cmd
,

2807 i‡(
vty_c⁄fig_lock
 (
vty
))

2808 
	gvty
->
	gnode
 = 
CONFIG_NODE
;

2811 
vty_out
 (
vty
, "VTY c⁄figuøti⁄ i†locked by othî VTY%s", 
VTY_NEWLINE
);

2812  
	gCMD_WARNING
;

2814  
	gCMD_SUCCESS
;

2818 
DEFUN
 (
íabÀ
,

2819 
c⁄fig_íabÀ_cmd
,

2824 i‡((
	gho°
.
	gíabÀ
 =
NULL
 && 
ho°
.
íabÀ_í¸y±
 == NULL) ||

2825 
vty
->
ty≥
 =
VTY_SHELL_SERV
)

2826 
vty
->
node
 = 
ENABLE_NODE
;

2828 
	gvty
->
	gnode
 = 
AUTH_ENABLE_NODE
;

2830  
	gCMD_SUCCESS
;

2834 
DEFUN
 (
dißbÀ
,

2835 
c⁄fig_dißbÀ_cmd
,

2839 i‡(
	gvty
->
	gnode
 =
ENABLE_NODE
)

2840 
vty
->
node
 = 
VIEW_NODE
;

2841  
	gCMD_SUCCESS
;

2845 
DEFUN
 (
c⁄fig_exô
,

2846 
c⁄fig_exô_cmd
,

2850 
	gvty
->
	gnode
)

2852 
	gVIEW_NODE
:

2853 
ENABLE_NODE
:

2854 
RESTRICTED_NODE
:

2855 i‡(
vty_shñl
 (
vty
))

2856 
exô
 (0);

2858 
	gvty
->
	g°©us
 = 
VTY_CLOSE
;

2860 
	gCONFIG_NODE
:

2861 
vty
->
node
 = 
ENABLE_NODE
;

2862 
vty_c⁄fig_u∆ock
 (
vty
);

2864 
	gINTERFACE_NODE
:

2865 
ZEBRA_NODE
:

2866 
BGP_NODE
:

2867 
RIP_NODE
:

2868 
RIPNG_NODE
:

2869 
BABEL_NODE
:

2870 
OSPF_NODE
:

2871 
OSPF6_NODE
:

2872 
ISIS_NODE
:

2873 
KEYCHAIN_NODE
:

2874 
MASC_NODE
:

2875 
RMAP_NODE
:

2876 
PIM_NODE
:

2877 
VTY_NODE
:

2878 
vty
->
node
 = 
CONFIG_NODE
;

2880 
	gBGP_VPNV4_NODE
:

2881 
BGP_IPV4_NODE
:

2882 
BGP_IPV4M_NODE
:

2883 
BGP_IPV6_NODE
:

2884 
BGP_IPV6M_NODE
:

2885 
vty
->
node
 = 
BGP_NODE
;

2887 
	gKEYCHAIN_KEY_NODE
:

2888 
vty
->
node
 = 
KEYCHAIN_NODE
;

2893  
	gCMD_SUCCESS
;

2897 
ALIAS
 (
c⁄fig_exô
,

2898 
c⁄fig_quô_cmd
,

2903 
DEFUN
 (
c⁄fig_íd
,

2904 
c⁄fig_íd_cmd
,

2908 
	gvty
->
	gnode
)

2910 
	gVIEW_NODE
:

2911 
ENABLE_NODE
:

2912 
RESTRICTED_NODE
:

2915 
	gCONFIG_NODE
:

2916 
INTERFACE_NODE
:

2917 
ZEBRA_NODE
:

2918 
RIP_NODE
:

2919 
RIPNG_NODE
:

2920 
BABEL_NODE
:

2921 
BGP_NODE
:

2922 
BGP_VPNV4_NODE
:

2923 
BGP_IPV4_NODE
:

2924 
BGP_IPV4M_NODE
:

2925 
BGP_IPV6_NODE
:

2926 
BGP_IPV6M_NODE
:

2927 
RMAP_NODE
:

2928 
OSPF_NODE
:

2929 
OSPF6_NODE
:

2930 
ISIS_NODE
:

2931 
KEYCHAIN_NODE
:

2932 
KEYCHAIN_KEY_NODE
:

2933 
MASC_NODE
:

2934 
PIM_NODE
:

2935 
VTY_NODE
:

2936 
vty_c⁄fig_u∆ock
 (
vty
);

2937 
	gvty
->
	gnode
 = 
ENABLE_NODE
;

2942  
	gCMD_SUCCESS
;

2946 
DEFUN
 (
show_vîsi⁄
,

2947 
show_vîsi⁄_cmd
,

2949 
SHOW_STR


2952 
vty_out
 (
vty
, "Quagg®%†(%s).%s", 
QUAGGA_VERSION
, 
ho°
.
«me
?host.name:"",

2953 
VTY_NEWLINE
);

2954 
vty_out
 (
vty
, "%s%s%s", 
QUAGGA_COPYRIGHT
, 
GIT_INFO
, 
VTY_NEWLINE
);

2955 
vty_out
 (
vty
, "c⁄figuªd wôh:%† %s%s", 
VTY_NEWLINE
,

2956 
QUAGGA_CONFIG_ARGS
, 
VTY_NEWLINE
);

2958  
	gCMD_SUCCESS
;

2962 
DEFUN
 (
c⁄fig_hñp
,

2963 
c⁄fig_hñp_cmd
,

2967 
vty_out
 (
vty
,

2968 "Quagg®VTYÖrovide†adv™˚d hñ∞„©uª. Whí youÇìd hñp,%s\
áàthêcomm™dÜöê∂ó£Öªs†'?'.%s\
%s\
ÇŸhög m©ches,Åhêhñ∞li° wû»bêem±yánd you mu° backup%s\
É¡îögá '?' show†thêavaûabÀ o±i⁄s.%s\
 styÀ†o‡hñ∞¨ê¥ovided:%s\
1. FuŒ hñ∞i†avaûabÀ whí youáªÑódyÅÿíã∏a%s\
árgumíà”.g. 'show ?'Ë™d des¸ibe†óchÖossibÀ%s\
.%s\
2. P¨tü»hñ∞i†¥ovided whíá¿abbªvüãdárgumíài†íãªd%s\
 you w™àtÿknow wh©árgumít†m©chÅhêöput%s\
”.g. 'show me?'.)%s%s", 
VTY_NEWLINE
, VTY_NEWLINE, VTY_NEWLINE,

2980 
VTY_NEWLINE
, VTY_NEWLINE, VTY_NEWLINE, VTY_NEWLINE, VTY_NEWLINE,

2981 
VTY_NEWLINE
, VTY_NEWLINE, VTY_NEWLINE, VTY_NEWLINE, VTY_NEWLINE);

2982  
	gCMD_SUCCESS
;

2986 
DEFUN
 (
c⁄fig_li°
,

2987 
c⁄fig_li°_cmd
,

2991 
	gi
;

2992 
cmd_node
 *
	g˙ode
 = 
ve˘‹_¶Ÿ
 (
cmdvec
, 
vty
->
node
);

2993 
cmd_ñemít
 *
	gcmd
;

2995 
	gi
 = 0; i < 
ve˘‹_a˘ive
 (
˙ode
->
cmd_ve˘‹
); i++)

2996 i‡((
	gcmd
 = 
ve˘‹_¶Ÿ
 (
˙ode
->
cmd_ve˘‹
, 
i
)Ë!
NULL


2997 && !(
cmd
->
©å
 =
CMD_ATTR_DEPRECATED


2998 || 
cmd
->
©å
 =
CMD_ATTR_HIDDEN
))

2999 
vty_out
 (
vty
, " %s%s", 
cmd
->
°rög
,

3000 
VTY_NEWLINE
);

3001  
	gCMD_SUCCESS
;

3005 
DEFUN
 (
c⁄fig_wrôe_fûe
,

3006 
c⁄fig_wrôe_fûe_cmd
,

3011 
	gi
;

3012 
	gfd
;

3013 
cmd_node
 *
	gnode
;

3014 *
	gc⁄fig_fûe
;

3015 *
	gc⁄fig_fûe_tmp
 = 
NULL
;

3016 *
	gc⁄fig_fûe_ßv
 = 
NULL
;

3017 
	gªt
 = 
CMD_WARNING
;

3018 
vty
 *
	gfûe_vty
;

3021 i‡(
	gho°
.
	gc⁄fig
 =
NULL
)

3023 
vty_out
 (
vty
, "Can't saveÅo configuration file, using vtysh.%s",

3024 
VTY_NEWLINE
);

3025  
	gCMD_WARNING
;

3029 
	gc⁄fig_fûe
 = 
ho°
.
c⁄fig
;

3031 
	gc⁄fig_fûe_ßv
 =

3032 
XMALLOC
 (
MTYPE_TMP
, 
°æí
 (
c⁄fig_fûe
Ë+ såÀ¿(
CONF_BACKUP_EXT
) + 1);

3033 
°r˝y
 (
c⁄fig_fûe_ßv
, 
c⁄fig_fûe
);

3034 
°rˇt
 (
c⁄fig_fûe_ßv
, 
CONF_BACKUP_EXT
);

3037 
	gc⁄fig_fûe_tmp
 = 
XMALLOC
 (
MTYPE_TMP
, 
°æí
 (
c⁄fig_fûe
) + 8);

3038 
•rötf
 (
c⁄fig_fûe_tmp
, "%s.XXXXXX", 
c⁄fig_fûe
);

3041 
	gfd
 = 
mk°emp
 (
c⁄fig_fûe_tmp
);

3042 i‡(
	gfd
 < 0)

3044 
vty_out
 (
vty
, "C™'à›í c⁄figuøti⁄ fûê%s.%s", 
c⁄fig_fûe_tmp
,

3045 
VTY_NEWLINE
);

3046 
	gföished
;

3050 
	gfûe_vty
 = 
vty_√w
 ();

3051 
	gfûe_vty
->
	gfd
 = 
fd
;

3052 
	gfûe_vty
->
	gty≥
 = 
VTY_FILE
;

3055 
vty_out
 (
fûe_vty
, "!\n! Zebra configuration saved from vty\n! ");

3056 
vty_time_¥öt
 (
fûe_vty
, 1);

3057 
vty_out
 (
fûe_vty
, "!\n");

3059 
	gi
 = 0; i < 
ve˘‹_a˘ive
 (
cmdvec
); i++)

3060 i‡((
	gnode
 = 
ve˘‹_¶Ÿ
 (
cmdvec
, 
i
)Ë&&Çode->
	gfunc
)

3062 i‡((*
	gnode
->
	gfunc
Ë(
	gfûe_vty
))

3063 
vty_out
 (
fûe_vty
, "!\n");

3065 
vty_˛o£
 (
fûe_vty
);

3067 i‡(
u∆ök
 (
c⁄fig_fûe_ßv
) != 0)

3068 i‡(
î∫o
 !
ENOENT
)

3070 
vty_out
 (
vty
, "C™'àu∆ök backu∞c⁄figuøti⁄ fûê%s.%s", 
c⁄fig_fûe_ßv
,

3071 
VTY_NEWLINE
);

3072 
	gföished
;

3074 i‡(
lök
 (
c⁄fig_fûe
, 
c⁄fig_fûe_ßv
) != 0)

3076 
vty_out
 (
vty
, "C™'àbacku∞ﬁd c⁄figuøti⁄ fûê%s.%s", 
c⁄fig_fûe_ßv
,

3077 
VTY_NEWLINE
);

3078 
	gföished
;

3080 
sync
 ();

3081 i‡(
u∆ök
 (
c⁄fig_fûe
) != 0)

3083 
vty_out
 (
vty
, "C™'àu∆ök c⁄figuøti⁄ fûê%s.%s", 
c⁄fig_fûe
,

3084 
VTY_NEWLINE
);

3085 
	gföished
;

3087 i‡(
lök
 (
c⁄fig_fûe_tmp
, 
c⁄fig_fûe
) != 0)

3089 
vty_out
 (
vty
, "C™'àßvêc⁄figuøti⁄ fûê%s.%s", 
c⁄fig_fûe
,

3090 
VTY_NEWLINE
);

3091 
	gföished
;

3093 
sync
 ();

3095 i‡(
chmod
 (
c⁄fig_fûe
, 
CONFIGFILE_MASK
) != 0)

3097 
vty_out
 (
vty
, "Can't chmod configuration file %s: %s (%d).%s",

3098 
c⁄fig_fûe
, 
ß„_°ªº‹
(
î∫o
),Éºno, 
VTY_NEWLINE
);

3099 
	gföished
;

3102 
vty_out
 (
vty
, "C⁄figuøti⁄ savedÅÿ%s%s", 
c⁄fig_fûe
,

3103 
VTY_NEWLINE
);

3104 
	gªt
 = 
CMD_SUCCESS
;

3106 
	gföished
:

3107 
u∆ök
 (
c⁄fig_fûe_tmp
);

3108 
XFREE
 (
MTYPE_TMP
, 
c⁄fig_fûe_tmp
);

3109 
XFREE
 (
MTYPE_TMP
, 
c⁄fig_fûe_ßv
);

3110  
	gªt
;

3113 
ALIAS
 (
c⁄fig_wrôe_fûe
,

3114 
c⁄fig_wrôe_cmd
,

3118 
ALIAS
 (
c⁄fig_wrôe_fûe
,

3119 
c⁄fig_wrôe_mem‹y_cmd
,

3124 
ALIAS
 (
c⁄fig_wrôe_fûe
,

3125 
c›y_ru¬ögc⁄fig_°¨tupc⁄fig_cmd
,

3132 
DEFUN
 (
c⁄fig_wrôe_ãrmöÆ
,

3133 
c⁄fig_wrôe_ãrmöÆ_cmd
,

3138 
	gi
;

3139 
cmd_node
 *
	gnode
;

3141 i‡(
	gvty
->
	gty≥
 =
VTY_SHELL_SERV
)

3143 
i
 = 0; 
	gi
 < 
ve˘‹_a˘ive
 (
cmdvec
); i++)

3144 i‡((
	gnode
 = 
ve˘‹_¶Ÿ
 (
cmdvec
, 
i
)Ë&&Çode->
	gfunc
 &&Çode->
	gvtysh
)

3146 i‡((*
	gnode
->
	gfunc
Ë(
	gvty
))

3147 
vty_out
 (
vty
, "!%s", 
VTY_NEWLINE
);

3152 
vty_out
 (
vty
, "%sCuºíàc⁄figuøti⁄:%s", 
VTY_NEWLINE
,

3153 
VTY_NEWLINE
);

3154 
vty_out
 (
vty
, "!%s", 
VTY_NEWLINE
);

3156 
	gi
 = 0; i < 
ve˘‹_a˘ive
 (
cmdvec
); i++)

3157 i‡((
	gnode
 = 
ve˘‹_¶Ÿ
 (
cmdvec
, 
i
)Ë&&Çode->
	gfunc
)

3159 i‡((*
	gnode
->
	gfunc
Ë(
	gvty
))

3160 
vty_out
 (
vty
, "!%s", 
VTY_NEWLINE
);

3162 
vty_out
 (
vty
, "íd%s",
VTY_NEWLINE
);

3164  
	gCMD_SUCCESS
;

3168 
ALIAS
 (
c⁄fig_wrôe_ãrmöÆ
,

3169 
show_ru¬ög_c⁄fig_cmd
,

3171 
SHOW_STR


3175 
DEFUN
 (
show_°¨tup_c⁄fig
,

3176 
show_°¨tup_c⁄fig_cmd
,

3178 
SHOW_STR


3181 
	gbuf
[
BUFSIZ
];

3182 
FILE
 *
	gc⁄Â
;

3184 
	gc⁄Â
 = 
f›í
 (
ho°
.
c⁄fig
, "r");

3185 i‡(
	gc⁄Â
 =
NULL
)

3187 
vty_out
 (
vty
, "Can't open configuration file [%s]%s",

3188 
ho°
.
c⁄fig
, 
VTY_NEWLINE
);

3189  
	gCMD_WARNING
;

3192 
fgës
 (
buf
, 
BUFSIZ
, 
c⁄Â
))

3194 *
	g˝
 = 
buf
;

3196 *
	g˝
 !'\r' && *
˝
 != '\n' && *cp != '\0')

3197 
˝
++;

3198 *
	g˝
 = '\0';

3200 
vty_out
 (
vty
, "%s%s", 
buf
, 
VTY_NEWLINE
);

3203 
f˛o£
 (
c⁄Â
);

3205  
	gCMD_SUCCESS
;

3209 
DEFUN
 (
c⁄fig_ho°«me
,

3210 
ho°«me_cmd
,

3215 i‡(!
ißÕha
((Ë*
¨gv
[0]))

3217 
vty_out
 (
vty
, "PÀa£ s≥cify såög sèπög wôháÕhabë%s", 
VTY_NEWLINE
);

3218  
	gCMD_WARNING
;

3221 i‡(
	gho°
.
	g«me
)

3222 
XFREE
 (
MTYPE_HOST
, 
ho°
.
«me
);

3224 
	gho°
.
	g«me
 = 
XSTRDUP
 (
MTYPE_HOST
, 
¨gv
[0]);

3225  
	gCMD_SUCCESS
;

3228 
DEFUN
 (
c⁄fig_no_ho°«me
,

3229 
no_ho°«me_cmd
,

3231 
NO_STR


3235 i‡(
	gho°
.
	g«me
)

3236 
XFREE
 (
MTYPE_HOST
, 
ho°
.
«me
);

3237 
	gho°
.
	g«me
 = 
NULL
;

3238  
	gCMD_SUCCESS
;

3242 
DEFUN
 (
c⁄fig_∑ssw‹d
, 
∑ssw‹d_cmd
,

3250 i‡(
	g¨gc
 == 0)

3252 
vty_out
 (
vty
, "PÀa£ s≥cifyÖassw‹d.%s", 
VTY_NEWLINE
);

3253  
	gCMD_WARNING
;

3256 i‡(
	g¨gc
 == 2)

3258 i‡(*
¨gv
[0] == '8')

3260 i‡(
ho°
.
∑ssw‹d
)

3261 
XFREE
 (
MTYPE_HOST
, 
ho°
.
∑ssw‹d
);

3262 
	gho°
.
	g∑ssw‹d
 = 
NULL
;

3263 i‡(
	gho°
.
	g∑ssw‹d_í¸y±
)

3264 
XFREE
 (
MTYPE_HOST
, 
ho°
.
∑ssw‹d_í¸y±
);

3265 
	gho°
.
	g∑ssw‹d_í¸y±
 = 
XSTRDUP
 (
MTYPE_HOST
, 
¨gv
[1]);

3266  
	gCMD_SUCCESS
;

3270 
vty_out
 (
vty
, "Unknow¿í¸y±i⁄Åy≥.%s", 
VTY_NEWLINE
);

3271  
	gCMD_WARNING
;

3275 i‡(!
iß um
 ((Ë*
¨gv
[0]))

3277 
vty_out
 (
vty
,

3278 "PÀa£ s≥cify såög sèπög wôháÕh™umîic%s", 
VTY_NEWLINE
);

3279  
	gCMD_WARNING
;

3282 i‡(
	gho°
.
	g∑ssw‹d
)

3283 
XFREE
 (
MTYPE_HOST
, 
ho°
.
∑ssw‹d
);

3284 
	gho°
.
	g∑ssw‹d
 = 
NULL
;

3286 i‡(
	gho°
.
	gí¸y±
)

3288 i‡(
	gho°
.
	g∑ssw‹d_í¸y±
)

3289 
XFREE
 (
MTYPE_HOST
, 
ho°
.
∑ssw‹d_í¸y±
);

3290 
	gho°
.
	g∑ssw‹d_í¸y±
 = 
XSTRDUP
 (
MTYPE_HOST
, 
zí¸y±
 (
¨gv
[0]));

3293 
	gho°
.
	g∑ssw‹d
 = 
XSTRDUP
 (
MTYPE_HOST
, 
¨gv
[0]);

3295  
	gCMD_SUCCESS
;

3298 
ALIAS
 (
c⁄fig_∑ssw‹d
, 
∑ssw‹d_ãxt_cmd
,

3304 
DEFUN
 (
c⁄fig_íabÀ_∑ssw‹d
, 
íabÀ_∑ssw‹d_cmd
,

3313 i‡(
	g¨gc
 == 0)

3315 
vty_out
 (
vty
, "PÀa£ s≥cifyÖassw‹d.%s", 
VTY_NEWLINE
);

3316  
	gCMD_WARNING
;

3320 i‡(
	g¨gc
 == 2)

3322 i‡(*
¨gv
[0] == '8')

3324 i‡(
ho°
.
íabÀ
)

3325 
XFREE
 (
MTYPE_HOST
, 
ho°
.
íabÀ
);

3326 
	gho°
.
	gíabÀ
 = 
NULL
;

3328 i‡(
	gho°
.
	gíabÀ_í¸y±
)

3329 
XFREE
 (
MTYPE_HOST
, 
ho°
.
íabÀ_í¸y±
);

3330 
	gho°
.
	gíabÀ_í¸y±
 = 
XSTRDUP
 (
MTYPE_HOST
, 
¨gv
[1]);

3332  
	gCMD_SUCCESS
;

3336 
vty_out
 (
vty
, "Unknow¿í¸y±i⁄Åy≥.%s", 
VTY_NEWLINE
);

3337  
	gCMD_WARNING
;

3341 i‡(!
iß um
 ((Ë*
¨gv
[0]))

3343 
vty_out
 (
vty
,

3344 "PÀa£ s≥cify såög sèπög wôháÕh™umîic%s", 
VTY_NEWLINE
);

3345  
	gCMD_WARNING
;

3348 i‡(
	gho°
.
	gíabÀ
)

3349 
XFREE
 (
MTYPE_HOST
, 
ho°
.
íabÀ
);

3350 
	gho°
.
	gíabÀ
 = 
NULL
;

3353 i‡(
	gho°
.
	gí¸y±
)

3355 i‡(
	gho°
.
	gíabÀ_í¸y±
)

3356 
XFREE
 (
MTYPE_HOST
, 
ho°
.
íabÀ_í¸y±
);

3357 
	gho°
.
	gíabÀ_í¸y±
 = 
XSTRDUP
 (
MTYPE_HOST
, 
zí¸y±
 (
¨gv
[0]));

3360 
	gho°
.
	gíabÀ
 = 
XSTRDUP
 (
MTYPE_HOST
, 
¨gv
[0]);

3362  
	gCMD_SUCCESS
;

3365 
ALIAS
 (
c⁄fig_íabÀ_∑ssw‹d
,

3366 
íabÀ_∑ssw‹d_ãxt_cmd
,

3373 
DEFUN
 (
no_c⁄fig_íabÀ_∑ssw‹d
, 
no_íabÀ_∑ssw‹d_cmd
,

3375 
NO_STR


3379 i‡(
	gho°
.
	gíabÀ
)

3380 
XFREE
 (
MTYPE_HOST
, 
ho°
.
íabÀ
);

3381 
	gho°
.
	gíabÀ
 = 
NULL
;

3383 i‡(
	gho°
.
	gíabÀ_í¸y±
)

3384 
XFREE
 (
MTYPE_HOST
, 
ho°
.
íabÀ_í¸y±
);

3385 
	gho°
.
	gíabÀ_í¸y±
 = 
NULL
;

3387  
	gCMD_SUCCESS
;

3390 
DEFUN
 (
£rvi˚_∑ssw‹d_í¸y±
,

3391 
£rvi˚_∑ssw‹d_í¸y±_cmd
,

3396 i‡(
	gho°
.
	gí¸y±
)

3397  
	gCMD_SUCCESS
;

3399 
	gho°
.
	gí¸y±
 = 1;

3401 i‡(
	gho°
.
	g∑ssw‹d
)

3403 i‡(
	gho°
.
	g∑ssw‹d_í¸y±
)

3404 
XFREE
 (
MTYPE_HOST
, 
ho°
.
∑ssw‹d_í¸y±
);

3405 
	gho°
.
	g∑ssw‹d_í¸y±
 = 
XSTRDUP
 (
MTYPE_HOST
, 
zí¸y±
 (
ho°
.
∑ssw‹d
));

3407 i‡(
	gho°
.
	gíabÀ
)

3409 i‡(
	gho°
.
	gíabÀ_í¸y±
)

3410 
XFREE
 (
MTYPE_HOST
, 
ho°
.
íabÀ_í¸y±
);

3411 
	gho°
.
	gíabÀ_í¸y±
 = 
XSTRDUP
 (
MTYPE_HOST
, 
zí¸y±
 (
ho°
.
íabÀ
));

3414  
	gCMD_SUCCESS
;

3417 
DEFUN
 (
no_£rvi˚_∑ssw‹d_í¸y±
,

3418 
no_£rvi˚_∑ssw‹d_í¸y±_cmd
,

3420 
NO_STR


3424 i‡(! 
	gho°
.
	gí¸y±
)

3425  
	gCMD_SUCCESS
;

3427 
	gho°
.
	gí¸y±
 = 0;

3429 i‡(
	gho°
.
	g∑ssw‹d_í¸y±
)

3430 
XFREE
 (
MTYPE_HOST
, 
ho°
.
∑ssw‹d_í¸y±
);

3431 
	gho°
.
	g∑ssw‹d_í¸y±
 = 
NULL
;

3433 i‡(
	gho°
.
	gíabÀ_í¸y±
)

3434 
XFREE
 (
MTYPE_HOST
, 
ho°
.
íabÀ_í¸y±
);

3435 
	gho°
.
	gíabÀ_í¸y±
 = 
NULL
;

3437  
	gCMD_SUCCESS
;

3440 
DEFUN
 (
c⁄fig_ãrmöÆ_Àngth
, 
c⁄fig_ãrmöÆ_Àngth_cmd
,

3446 
	glöes
;

3447 *
	gíd±r
 = 
NULL
;

3449 
	glöes
 = 
°πﬁ
 (
¨gv
[0], &
íd±r
, 10);

3450 i‡(
	glöes
 < 0 ||Üöe†> 512 || *
	gíd±r
 != '\0')

3452 
vty_out
 (
vty
, "Àngth i†mÆf‹med%s", 
VTY_NEWLINE
);

3453  
	gCMD_WARNING
;

3455 
	gvty
->
	glöes
 = 
löes
;

3457  
	gCMD_SUCCESS
;

3460 
DEFUN
 (
c⁄fig_ãrmöÆ_no_Àngth
, 
c⁄fig_ãrmöÆ_no_Àngth_cmd
,

3463 
NO_STR


3466 
	gvty
->
	glöes
 = -1;

3467  
	gCMD_SUCCESS
;

3470 
DEFUN
 (
£rvi˚_ãrmöÆ_Àngth
, 
£rvi˚_ãrmöÆ_Àngth_cmd
,

3476 
	glöes
;

3477 *
	gíd±r
 = 
NULL
;

3479 
	glöes
 = 
°πﬁ
 (
¨gv
[0], &
íd±r
, 10);

3480 i‡(
	glöes
 < 0 ||Üöe†> 512 || *
	gíd±r
 != '\0')

3482 
vty_out
 (
vty
, "Àngth i†mÆf‹med%s", 
VTY_NEWLINE
);

3483  
	gCMD_WARNING
;

3485 
	gho°
.
	glöes
 = 
löes
;

3487  
	gCMD_SUCCESS
;

3490 
DEFUN
 (
no_£rvi˚_ãrmöÆ_Àngth
, 
no_£rvi˚_ãrmöÆ_Àngth_cmd
,

3492 
NO_STR


3497 
	gho°
.
	glöes
 = -1;

3498  
	gCMD_SUCCESS
;

3501 
DEFUN_HIDDEN
 (
do_echo
,

3502 
echo_cmd
,

3507 *
	gmesßge
;

3509 
vty_out
 (
vty
, "%s%s", ((
mesßge
 = 
¨gv_c⁄ˇt
(
¨gv
, 
¨gc
, 0)) ? message : ""),

3510 
VTY_NEWLINE
);

3511 i‡(
	gmesßge
)

3512 
XFREE
(
MTYPE_TMP
, 
mesßge
);

3513  
	gCMD_SUCCESS
;

3516 
DEFUN
 (
c⁄fig_logmsg
,

3517 
c⁄fig_logmsg_cmd
,

3518 "logmsg "
LOG_LEVELS
" .MESSAGE",

3520 
LOG_LEVEL_DESC


3523 
	gÀvñ
;

3524 *
	gmesßge
;

3526 i‡((
	gÀvñ
 = 
Àvñ_m©ch
(
¨gv
[0])Ë=
ZLOG_DISABLED
)

3527  
CMD_ERR_NO_MATCH
;

3529 
zlog
(
NULL
, 
Àvñ
, "%s", ((
mesßge
 = 
¨gv_c⁄ˇt
(
¨gv
, 
¨gc
, 1)) ? message : ""));

3530 i‡(
	gmesßge
)

3531 
XFREE
(
MTYPE_TMP
, 
mesßge
);

3532  
	gCMD_SUCCESS
;

3535 
DEFUN
 (
show_loggög
,

3536 
show_loggög_cmd
,

3538 
SHOW_STR


3541 
zlog
 *
	gzl
 = 
zlog_deÁu…
;

3543 
vty_out
 (
vty
, "SyslogÜogging: ");

3544 i‡(
	gzl
->
	gmaxlvl
[
ZLOG_DEST_SYSLOG
] =
ZLOG_DISABLED
)

3545 
vty_out
 (
vty
, "disabled");

3547 
vty_out
 (
vty
, "level %s, facility %s, ident %s",

3548 
zlog_¥i‹ôy
[
zl
->
maxlvl
[
ZLOG_DEST_SYSLOG
]],

3549 
Ácûôy_«me
(
zl
->
Ácûôy
), zl->
idít
);

3550 
vty_out
 (
vty
, "%s", 
VTY_NEWLINE
);

3552 
vty_out
 (
vty
, "StdoutÜogging: ");

3553 i‡(
	gzl
->
	gmaxlvl
[
ZLOG_DEST_STDOUT
] =
ZLOG_DISABLED
)

3554 
vty_out
 (
vty
, "disabled");

3556 
vty_out
 (
vty
, "level %s",

3557 
zlog_¥i‹ôy
[
zl
->
maxlvl
[
ZLOG_DEST_STDOUT
]]);

3558 
vty_out
 (
vty
, "%s", 
VTY_NEWLINE
);

3560 
vty_out
 (
vty
, "MonitorÜogging: ");

3561 i‡(
	gzl
->
	gmaxlvl
[
ZLOG_DEST_MONITOR
] =
ZLOG_DISABLED
)

3562 
vty_out
 (
vty
, "disabled");

3564 
vty_out
 (
vty
, "level %s",

3565 
zlog_¥i‹ôy
[
zl
->
maxlvl
[
ZLOG_DEST_MONITOR
]]);

3566 
vty_out
 (
vty
, "%s", 
VTY_NEWLINE
);

3568 
vty_out
 (
vty
, "FileÜogging: ");

3569 i‡((
	gzl
->
	gmaxlvl
[
ZLOG_DEST_FILE
] =
ZLOG_DISABLED
) ||

3570 !
zl
->
Â
)

3571 
vty_out
 (
vty
, "disabled");

3573 
vty_out
 (
vty
, "level %s, filename %s",

3574 
zlog_¥i‹ôy
[
zl
->
maxlvl
[
ZLOG_DEST_FILE
]],

3575 
zl
->
fûíame
);

3576 
vty_out
 (
vty
, "%s", 
VTY_NEWLINE
);

3578 
vty_out
 (
vty
, "ProtocolÇame: %s%s",

3579 
zlog_¥Ÿo_«mes
[
zl
->
¥Ÿocﬁ
], 
VTY_NEWLINE
);

3580 
vty_out
 (
vty
, "RecordÖriority: %s%s",

3581 (
zl
->
ªc‹d_¥i‹ôy
 ? "íabÀd" : "dißbÀd"), 
VTY_NEWLINE
);

3582 
vty_out
 (
vty
, "TimestampÖrecision: %d%s",

3583 
zl
->
time°amp_¥ecisi⁄
, 
VTY_NEWLINE
);

3585  
	gCMD_SUCCESS
;

3588 
DEFUN
 (
c⁄fig_log_°dout
,

3589 
c⁄fig_log_°dout_cmd
,

3594 
zlog_£t_Àvñ
 (
NULL
, 
ZLOG_DEST_STDOUT
, 
zlog_deÁu…
->
deÁu…_lvl
);

3595  
	gCMD_SUCCESS
;

3598 
DEFUN
 (
c⁄fig_log_°dout_Àvñ
,

3599 
c⁄fig_log_°dout_Àvñ_cmd
,

3600 "log stdouà"
LOG_LEVELS
,

3603 
LOG_LEVEL_DESC
)

3605 
	gÀvñ
;

3607 i‡((
	gÀvñ
 = 
Àvñ_m©ch
(
¨gv
[0])Ë=
ZLOG_DISABLED
)

3608  
CMD_ERR_NO_MATCH
;

3609 
zlog_£t_Àvñ
 (
NULL
, 
ZLOG_DEST_STDOUT
, 
Àvñ
);

3610  
	gCMD_SUCCESS
;

3613 
DEFUN
 (
no_c⁄fig_log_°dout
,

3614 
no_c⁄fig_log_°dout_cmd
,

3616 
NO_STR


3621 
zlog_£t_Àvñ
 (
NULL
, 
ZLOG_DEST_STDOUT
, 
ZLOG_DISABLED
);

3622  
	gCMD_SUCCESS
;

3625 
DEFUN
 (
c⁄fig_log_m⁄ô‹
,

3626 
c⁄fig_log_m⁄ô‹_cmd
,

3631 
zlog_£t_Àvñ
 (
NULL
, 
ZLOG_DEST_MONITOR
, 
zlog_deÁu…
->
deÁu…_lvl
);

3632  
	gCMD_SUCCESS
;

3635 
DEFUN
 (
c⁄fig_log_m⁄ô‹_Àvñ
,

3636 
c⁄fig_log_m⁄ô‹_Àvñ_cmd
,

3637 "log m⁄ô‹ "
LOG_LEVELS
,

3640 
LOG_LEVEL_DESC
)

3642 
	gÀvñ
;

3644 i‡((
	gÀvñ
 = 
Àvñ_m©ch
(
¨gv
[0])Ë=
ZLOG_DISABLED
)

3645  
CMD_ERR_NO_MATCH
;

3646 
zlog_£t_Àvñ
 (
NULL
, 
ZLOG_DEST_MONITOR
, 
Àvñ
);

3647  
	gCMD_SUCCESS
;

3650 
DEFUN
 (
no_c⁄fig_log_m⁄ô‹
,

3651 
no_c⁄fig_log_m⁄ô‹_cmd
,

3653 
NO_STR


3658 
zlog_£t_Àvñ
 (
NULL
, 
ZLOG_DEST_MONITOR
, 
ZLOG_DISABLED
);

3659  
	gCMD_SUCCESS
;

3663 
	$£t_log_fûe
(
vty
 *vty, c⁄° *
‚ame
, 
logÀvñ
)

3665 
ªt
;

3666 *
p
 = 
NULL
;

3667 c⁄° *
fuŒ∑th
;

3670 i‡(! 
	`IS_DIRECTORY_SEP
 (*
‚ame
))

3672 
cwd
[
MAXPATHLEN
+1];

3673 
cwd
[
MAXPATHLEN
] = '\0';

3675 i‡(
	`gëcwd
 (
cwd
, 
MAXPATHLEN
Ë=
NULL
)

3677 
	`zlog_îr
 ("config_log_file: UnableÅoálloc mem!");

3678  
CMD_WARNING
;

3681 i‡–(
p
 = 
	`XMALLOC
 (
MTYPE_TMP
, 
	`°æí
 (
cwd
Ë+ såÀ¿(
‚ame
) + 2))

3682 =
NULL
)

3684 
	`zlog_îr
 ("config_log_file: UnableÅoálloc mem!");

3685  
CMD_WARNING
;

3687 
	`•rötf
 (
p
, "%s/%s", 
cwd
, 
‚ame
);

3688 
fuŒ∑th
 = 
p
;

3691 
fuŒ∑th
 = 
‚ame
;

3693 
ªt
 = 
	`zlog_£t_fûe
 (
NULL
, 
fuŒ∑th
, 
logÀvñ
);

3695 i‡(
p
)

3696 
	`XFREE
 (
MTYPE_TMP
, 
p
);

3698 i‡(!
ªt
)

3700 
	`vty_out
 (
vty
, "ˇn'à›íÜogfûê%s\n", 
‚ame
);

3701  
CMD_WARNING
;

3704 i‡(
ho°
.
logfûe
)

3705 
	`XFREE
 (
MTYPE_HOST
, 
ho°
.
logfûe
);

3707 
ho°
.
logfûe
 = 
	`XSTRDUP
 (
MTYPE_HOST
, 
‚ame
);

3709  
CMD_SUCCESS
;

3710 
	}
}

3712 
DEFUN
 (
c⁄fig_log_fûe
,

3713 
c⁄fig_log_fûe_cmd
,

3719  
£t_log_fûe
(
vty
, 
¨gv
[0], 
zlog_deÁu…
->
deÁu…_lvl
);

3722 
DEFUN
 (
c⁄fig_log_fûe_Àvñ
,

3723 
c⁄fig_log_fûe_Àvñ_cmd
,

3724 "log fûêFILENAME "
LOG_LEVELS
,

3728 
LOG_LEVEL_DESC
)

3730 
	gÀvñ
;

3732 i‡((
	gÀvñ
 = 
Àvñ_m©ch
(
¨gv
[1])Ë=
ZLOG_DISABLED
)

3733  
CMD_ERR_NO_MATCH
;

3734  
£t_log_fûe
(
vty
, 
¨gv
[0], 
Àvñ
);

3737 
DEFUN
 (
no_c⁄fig_log_fûe
,

3738 
no_c⁄fig_log_fûe_cmd
,

3740 
NO_STR


3745 
zlog_ª£t_fûe
 (
NULL
);

3747 i‡(
	gho°
.
	glogfûe
)

3748 
XFREE
 (
MTYPE_HOST
, 
ho°
.
logfûe
);

3750 
	gho°
.
	glogfûe
 = 
NULL
;

3752  
	gCMD_SUCCESS
;

3755 
ALIAS
 (
no_c⁄fig_log_fûe
,

3756 
no_c⁄fig_log_fûe_Àvñ_cmd
,

3758 
NO_STR


3764 
DEFUN
 (
c⁄fig_log_sy¶og
,

3765 
c⁄fig_log_sy¶og_cmd
,

3770 
zlog_£t_Àvñ
 (
NULL
, 
ZLOG_DEST_SYSLOG
, 
zlog_deÁu…
->
deÁu…_lvl
);

3771  
	gCMD_SUCCESS
;

3774 
DEFUN
 (
c⁄fig_log_sy¶og_Àvñ
,

3775 
c⁄fig_log_sy¶og_Àvñ_cmd
,

3776 "log sy¶og "
LOG_LEVELS
,

3779 
LOG_LEVEL_DESC
)

3781 
	gÀvñ
;

3783 i‡((
	gÀvñ
 = 
Àvñ_m©ch
(
¨gv
[0])Ë=
ZLOG_DISABLED
)

3784  
CMD_ERR_NO_MATCH
;

3785 
zlog_£t_Àvñ
 (
NULL
, 
ZLOG_DEST_SYSLOG
, 
Àvñ
);

3786  
	gCMD_SUCCESS
;

3789 
DEFUN_DEPRECATED
 (
c⁄fig_log_sy¶og_Ácûôy
,

3790 
c⁄fig_log_sy¶og_Ácûôy_cmd
,

3791 "log sy¶og facûôy "
LOG_FACILITIES
,

3795 
LOG_FACILITY_DESC
)

3797 
	gÁcûôy
;

3799 i‡((
	gÁcûôy
 = 
Ácûôy_m©ch
(
¨gv
[0])) < 0)

3800  
CMD_ERR_NO_MATCH
;

3802 
zlog_£t_Àvñ
 (
NULL
, 
ZLOG_DEST_SYSLOG
, 
zlog_deÁu…
->
deÁu…_lvl
);

3803 
	gzlog_deÁu…
->
	gÁcûôy
 = 
Ácûôy
;

3804  
	gCMD_SUCCESS
;

3807 
DEFUN
 (
no_c⁄fig_log_sy¶og
,

3808 
no_c⁄fig_log_sy¶og_cmd
,

3810 
NO_STR


3815 
zlog_£t_Àvñ
 (
NULL
, 
ZLOG_DEST_SYSLOG
, 
ZLOG_DISABLED
);

3816  
	gCMD_SUCCESS
;

3819 
ALIAS
 (
no_c⁄fig_log_sy¶og
,

3820 
no_c⁄fig_log_sy¶og_Ácûôy_cmd
,

3821 "nÿlog sy¶og facûôy "
LOG_FACILITIES
,

3822 
NO_STR


3826 
LOG_FACILITY_DESC
)

3828 
DEFUN
 (
c⁄fig_log_Ácûôy
,

3829 
c⁄fig_log_Ácûôy_cmd
,

3830 "log facûôy "
LOG_FACILITIES
,

3833 
LOG_FACILITY_DESC
)

3835 
	gÁcûôy
;

3837 i‡((
	gÁcûôy
 = 
Ácûôy_m©ch
(
¨gv
[0])) < 0)

3838  
CMD_ERR_NO_MATCH
;

3839 
	gzlog_deÁu…
->
	gÁcûôy
 = 
Ácûôy
;

3840  
	gCMD_SUCCESS
;

3843 
DEFUN
 (
no_c⁄fig_log_Ácûôy
,

3844 
no_c⁄fig_log_Ácûôy_cmd
,

3846 
NO_STR


3851 
	gzlog_deÁu…
->
	gÁcûôy
 = 
LOG_DAEMON
;

3852  
	gCMD_SUCCESS
;

3855 
DEFUN_DEPRECATED
 (
c⁄fig_log_å≠
,

3856 
c⁄fig_log_å≠_cmd
,

3857 "logÅø∞"
LOG_LEVELS
,

3860 
LOG_LEVEL_DESC
)

3862 
	g√w_Àvñ
 ;

3863 
	gi
;

3865 i‡((
	g√w_Àvñ
 = 
Àvñ_m©ch
(
¨gv
[0])Ë=
ZLOG_DISABLED
)

3866  
CMD_ERR_NO_MATCH
;

3868 
	gzlog_deÁu…
->
	gdeÁu…_lvl
 = 
√w_Àvñ
;

3869 
	gi
 = 0; i < 
	gZLOG_NUM_DESTS
; i++)

3870 i‡(
	gzlog_deÁu…
->
	gmaxlvl
[
i
] !
ZLOG_DISABLED
)

3871 
zlog_deÁu…
->
maxlvl
[
i
] = 
√w_Àvñ
;

3872  
	gCMD_SUCCESS
;

3875 
DEFUN_DEPRECATED
 (
no_c⁄fig_log_å≠
,

3876 
no_c⁄fig_log_å≠_cmd
,

3878 
NO_STR


3883 
	gzlog_deÁu…
->
	gdeÁu…_lvl
 = 
LOG_DEBUG
;

3884  
	gCMD_SUCCESS
;

3887 
DEFUN
 (
c⁄fig_log_ªc‹d_¥i‹ôy
,

3888 
c⁄fig_log_ªc‹d_¥i‹ôy_cmd
,

3893 
	gzlog_deÁu…
->
	gªc‹d_¥i‹ôy
 = 1 ;

3894  
	gCMD_SUCCESS
;

3897 
DEFUN
 (
no_c⁄fig_log_ªc‹d_¥i‹ôy
,

3898 
no_c⁄fig_log_ªc‹d_¥i‹ôy_cmd
,

3900 
NO_STR


3904 
	gzlog_deÁu…
->
	gªc‹d_¥i‹ôy
 = 0 ;

3905  
	gCMD_SUCCESS
;

3908 
DEFUN
 (
c⁄fig_log_time°amp_¥ecisi⁄
,

3909 
c⁄fig_log_time°amp_¥ecisi⁄_cmd
,

3916 i‡(
	g¨gc
 != 1)

3918 
vty_out
 (
vty
, "Insufficõ¡árgumíts%s", 
VTY_NEWLINE
);

3919  
	gCMD_WARNING
;

3922 
VTY_GET_INTEGER_RANGE
("Timestamp Precision",

3923 
zlog_deÁu…
->
time°amp_¥ecisi⁄
, 
¨gv
[0], 0, 6);

3924  
	gCMD_SUCCESS
;

3927 
DEFUN
 (
no_c⁄fig_log_time°amp_¥ecisi⁄
,

3928 
no_c⁄fig_log_time°amp_¥ecisi⁄_cmd
,

3930 
NO_STR


3935 
	gzlog_deÁu…
->
	gtime°amp_¥ecisi⁄
 = 0 ;

3936  
	gCMD_SUCCESS
;

3939 
DEFUN
 (
b™√r_mŸd_fûe
,

3940 
b™√r_mŸd_fûe_cmd
,

3947 i‡(
	gho°
.
	gmŸdfûe
)

3948 
XFREE
 (
MTYPE_HOST
, 
ho°
.
mŸdfûe
);

3949 
	gho°
.
	gmŸdfûe
 = 
XSTRDUP
 (
MTYPE_HOST
, 
¨gv
[0]);

3951  
	gCMD_SUCCESS
;

3954 
DEFUN
 (
b™√r_mŸd_deÁu…
,

3955 
b™√r_mŸd_deÁu…_cmd
,

3961 
	gho°
.
	gmŸd
 = 
deÁu…_mŸd
;

3962  
	gCMD_SUCCESS
;

3965 
DEFUN
 (
no_b™√r_mŸd
,

3966 
no_b™√r_mŸd_cmd
,

3968 
NO_STR


3972 
	gho°
.
	gmŸd
 = 
NULL
;

3973 i‡(
	gho°
.
	gmŸdfûe
)

3974 
XFREE
 (
MTYPE_HOST
, 
ho°
.
mŸdfûe
);

3975 
	gho°
.
	gmŸdfûe
 = 
NULL
;

3976  
	gCMD_SUCCESS
;

3981 
	$ho°_c⁄fig_£t
 (*
fûíame
)

3983 i‡(
ho°
.
c⁄fig
)

3984 
	`XFREE
 (
MTYPE_HOST
, 
ho°
.
c⁄fig
);

3985 
ho°
.
c⁄fig
 = 
	`XSTRDUP
 (
MTYPE_HOST
, 
fûíame
);

3986 
	}
}

3989 
	$ö°Æl_deÁu…
 (
node_ty≥
 
node
)

3991 
	`ö°Æl_ñemít
 (
node
, &
c⁄fig_exô_cmd
);

3992 
	`ö°Æl_ñemít
 (
node
, &
c⁄fig_quô_cmd
);

3993 
	`ö°Æl_ñemít
 (
node
, &
c⁄fig_íd_cmd
);

3994 
	`ö°Æl_ñemít
 (
node
, &
c⁄fig_hñp_cmd
);

3995 
	`ö°Æl_ñemít
 (
node
, &
c⁄fig_li°_cmd
);

3997 
	`ö°Æl_ñemít
 (
node
, &
c⁄fig_wrôe_ãrmöÆ_cmd
);

3998 
	`ö°Æl_ñemít
 (
node
, &
c⁄fig_wrôe_fûe_cmd
);

3999 
	`ö°Æl_ñemít
 (
node
, &
c⁄fig_wrôe_mem‹y_cmd
);

4000 
	`ö°Æl_ñemít
 (
node
, &
c⁄fig_wrôe_cmd
);

4001 
	`ö°Æl_ñemít
 (
node
, &
show_ru¬ög_c⁄fig_cmd
);

4002 
	}
}

4006 
	$cmd_öô
 (
ãrmöÆ
)

4008 
comm™d_¸
 = 
	`XSTRDUP
(
MTYPE_CMD_TOKENS
, "<cr>");

4009 
tokí_¸
.
ty≥
 = 
TOKEN_TERMINAL
;

4010 
tokí_¸
.
cmd
 = 
comm™d_¸
;

4011 
tokí_¸
.
desc
 = 
	`XSTRDUP
(
MTYPE_CMD_TOKENS
, "");

4014 
cmdvec
 = 
	`ve˘‹_öô
 (
VECTOR_MIN_SIZE
);

4017 
ho°
.
«me
 = 
NULL
;

4018 
ho°
.
∑ssw‹d
 = 
NULL
;

4019 
ho°
.
íabÀ
 = 
NULL
;

4020 
ho°
.
logfûe
 = 
NULL
;

4021 
ho°
.
c⁄fig
 = 
NULL
;

4022 
ho°
.
löes
 = -1;

4023 
ho°
.
mŸd
 = 
deÁu…_mŸd
;

4024 
ho°
.
mŸdfûe
 = 
NULL
;

4027 
	`ö°Æl_node
 (&
võw_node
, 
NULL
);

4028 
	`ö°Æl_node
 (&
íabÀ_node
, 
NULL
);

4029 
	`ö°Æl_node
 (&
auth_node
, 
NULL
);

4030 
	`ö°Æl_node
 (&
auth_íabÀ_node
, 
NULL
);

4031 
	`ö°Æl_node
 (&
ª°ri˘ed_node
, 
NULL
);

4032 
	`ö°Æl_node
 (&
c⁄fig_node
, 
c⁄fig_wrôe_ho°
);

4035 
	`ö°Æl_ñemít
 (
VIEW_NODE
, &
show_vîsi⁄_cmd
);

4036 i‡(
ãrmöÆ
)

4038 
	`ö°Æl_ñemít
 (
VIEW_NODE
, &
c⁄fig_li°_cmd
);

4039 
	`ö°Æl_ñemít
 (
VIEW_NODE
, &
c⁄fig_exô_cmd
);

4040 
	`ö°Æl_ñemít
 (
VIEW_NODE
, &
c⁄fig_quô_cmd
);

4041 
	`ö°Æl_ñemít
 (
VIEW_NODE
, &
c⁄fig_hñp_cmd
);

4042 
	`ö°Æl_ñemít
 (
VIEW_NODE
, &
c⁄fig_íabÀ_cmd
);

4043 
	`ö°Æl_ñemít
 (
VIEW_NODE
, &
c⁄fig_ãrmöÆ_Àngth_cmd
);

4044 
	`ö°Æl_ñemít
 (
VIEW_NODE
, &
c⁄fig_ãrmöÆ_no_Àngth_cmd
);

4045 
	`ö°Æl_ñemít
 (
VIEW_NODE
, &
show_loggög_cmd
);

4046 
	`ö°Æl_ñemít
 (
VIEW_NODE
, &
echo_cmd
);

4048 
	`ö°Æl_ñemít
 (
RESTRICTED_NODE
, &
c⁄fig_li°_cmd
);

4049 
	`ö°Æl_ñemít
 (
RESTRICTED_NODE
, &
c⁄fig_exô_cmd
);

4050 
	`ö°Æl_ñemít
 (
RESTRICTED_NODE
, &
c⁄fig_quô_cmd
);

4051 
	`ö°Æl_ñemít
 (
RESTRICTED_NODE
, &
c⁄fig_hñp_cmd
);

4052 
	`ö°Æl_ñemít
 (
RESTRICTED_NODE
, &
c⁄fig_íabÀ_cmd
);

4053 
	`ö°Æl_ñemít
 (
RESTRICTED_NODE
, &
c⁄fig_ãrmöÆ_Àngth_cmd
);

4054 
	`ö°Æl_ñemít
 (
RESTRICTED_NODE
, &
c⁄fig_ãrmöÆ_no_Àngth_cmd
);

4055 
	`ö°Æl_ñemít
 (
RESTRICTED_NODE
, &
echo_cmd
);

4058 i‡(
ãrmöÆ
)

4060 
	`ö°Æl_deÁu…
 (
ENABLE_NODE
);

4061 
	`ö°Æl_ñemít
 (
ENABLE_NODE
, &
c⁄fig_dißbÀ_cmd
);

4062 
	`ö°Æl_ñemít
 (
ENABLE_NODE
, &
c⁄fig_ãrmöÆ_cmd
);

4063 
	`ö°Æl_ñemít
 (
ENABLE_NODE
, &
c›y_ru¬ögc⁄fig_°¨tupc⁄fig_cmd
);

4065 
	`ö°Æl_ñemít
 (
ENABLE_NODE
, &
show_°¨tup_c⁄fig_cmd
);

4066 
	`ö°Æl_ñemít
 (
ENABLE_NODE
, &
show_vîsi⁄_cmd
);

4068 i‡(
ãrmöÆ
)

4070 
	`ö°Æl_ñemít
 (
ENABLE_NODE
, &
c⁄fig_ãrmöÆ_Àngth_cmd
);

4071 
	`ö°Æl_ñemít
 (
ENABLE_NODE
, &
c⁄fig_ãrmöÆ_no_Àngth_cmd
);

4072 
	`ö°Æl_ñemít
 (
ENABLE_NODE
, &
show_loggög_cmd
);

4073 
	`ö°Æl_ñemít
 (
ENABLE_NODE
, &
echo_cmd
);

4074 
	`ö°Æl_ñemít
 (
ENABLE_NODE
, &
c⁄fig_logmsg_cmd
);

4076 
	`ö°Æl_deÁu…
 (
CONFIG_NODE
);

4079 
	`ö°Æl_ñemít
 (
CONFIG_NODE
, &
ho°«me_cmd
);

4080 
	`ö°Æl_ñemít
 (
CONFIG_NODE
, &
no_ho°«me_cmd
);

4082 i‡(
ãrmöÆ
)

4084 
	`ö°Æl_ñemít
 (
CONFIG_NODE
, &
∑ssw‹d_cmd
);

4085 
	`ö°Æl_ñemít
 (
CONFIG_NODE
, &
∑ssw‹d_ãxt_cmd
);

4086 
	`ö°Æl_ñemít
 (
CONFIG_NODE
, &
íabÀ_∑ssw‹d_cmd
);

4087 
	`ö°Æl_ñemít
 (
CONFIG_NODE
, &
íabÀ_∑ssw‹d_ãxt_cmd
);

4088 
	`ö°Æl_ñemít
 (
CONFIG_NODE
, &
no_íabÀ_∑ssw‹d_cmd
);

4090 
	`ö°Æl_ñemít
 (
CONFIG_NODE
, &
c⁄fig_log_°dout_cmd
);

4091 
	`ö°Æl_ñemít
 (
CONFIG_NODE
, &
c⁄fig_log_°dout_Àvñ_cmd
);

4092 
	`ö°Æl_ñemít
 (
CONFIG_NODE
, &
no_c⁄fig_log_°dout_cmd
);

4093 
	`ö°Æl_ñemít
 (
CONFIG_NODE
, &
c⁄fig_log_m⁄ô‹_cmd
);

4094 
	`ö°Æl_ñemít
 (
CONFIG_NODE
, &
c⁄fig_log_m⁄ô‹_Àvñ_cmd
);

4095 
	`ö°Æl_ñemít
 (
CONFIG_NODE
, &
no_c⁄fig_log_m⁄ô‹_cmd
);

4096 
	`ö°Æl_ñemít
 (
CONFIG_NODE
, &
c⁄fig_log_fûe_cmd
);

4097 
	`ö°Æl_ñemít
 (
CONFIG_NODE
, &
c⁄fig_log_fûe_Àvñ_cmd
);

4098 
	`ö°Æl_ñemít
 (
CONFIG_NODE
, &
no_c⁄fig_log_fûe_cmd
);

4099 
	`ö°Æl_ñemít
 (
CONFIG_NODE
, &
no_c⁄fig_log_fûe_Àvñ_cmd
);

4100 
	`ö°Æl_ñemít
 (
CONFIG_NODE
, &
c⁄fig_log_sy¶og_cmd
);

4101 
	`ö°Æl_ñemít
 (
CONFIG_NODE
, &
c⁄fig_log_sy¶og_Àvñ_cmd
);

4102 
	`ö°Æl_ñemít
 (
CONFIG_NODE
, &
c⁄fig_log_sy¶og_Ácûôy_cmd
);

4103 
	`ö°Æl_ñemít
 (
CONFIG_NODE
, &
no_c⁄fig_log_sy¶og_cmd
);

4104 
	`ö°Æl_ñemít
 (
CONFIG_NODE
, &
no_c⁄fig_log_sy¶og_Ácûôy_cmd
);

4105 
	`ö°Æl_ñemít
 (
CONFIG_NODE
, &
c⁄fig_log_Ácûôy_cmd
);

4106 
	`ö°Æl_ñemít
 (
CONFIG_NODE
, &
no_c⁄fig_log_Ácûôy_cmd
);

4107 
	`ö°Æl_ñemít
 (
CONFIG_NODE
, &
c⁄fig_log_å≠_cmd
);

4108 
	`ö°Æl_ñemít
 (
CONFIG_NODE
, &
no_c⁄fig_log_å≠_cmd
);

4109 
	`ö°Æl_ñemít
 (
CONFIG_NODE
, &
c⁄fig_log_ªc‹d_¥i‹ôy_cmd
);

4110 
	`ö°Æl_ñemít
 (
CONFIG_NODE
, &
no_c⁄fig_log_ªc‹d_¥i‹ôy_cmd
);

4111 
	`ö°Æl_ñemít
 (
CONFIG_NODE
, &
c⁄fig_log_time°amp_¥ecisi⁄_cmd
);

4112 
	`ö°Æl_ñemít
 (
CONFIG_NODE
, &
no_c⁄fig_log_time°amp_¥ecisi⁄_cmd
);

4113 
	`ö°Æl_ñemít
 (
CONFIG_NODE
, &
£rvi˚_∑ssw‹d_í¸y±_cmd
);

4114 
	`ö°Æl_ñemít
 (
CONFIG_NODE
, &
no_£rvi˚_∑ssw‹d_í¸y±_cmd
);

4115 
	`ö°Æl_ñemít
 (
CONFIG_NODE
, &
b™√r_mŸd_deÁu…_cmd
);

4116 
	`ö°Æl_ñemít
 (
CONFIG_NODE
, &
b™√r_mŸd_fûe_cmd
);

4117 
	`ö°Æl_ñemít
 (
CONFIG_NODE
, &
no_b™√r_mŸd_cmd
);

4118 
	`ö°Æl_ñemít
 (
CONFIG_NODE
, &
£rvi˚_ãrmöÆ_Àngth_cmd
);

4119 
	`ö°Æl_ñemít
 (
CONFIG_NODE
, &
no_£rvi˚_ãrmöÆ_Àngth_cmd
);

4121 
	`ö°Æl_ñemít
 (
VIEW_NODE
, &
show_thªad_˝u_cmd
);

4122 
	`ö°Æl_ñemít
 (
ENABLE_NODE
, &
show_thªad_˝u_cmd
);

4123 
	`ö°Æl_ñemít
 (
RESTRICTED_NODE
, &
show_thªad_˝u_cmd
);

4125 
	`ö°Æl_ñemít
 (
ENABLE_NODE
, &
˛ór_thªad_˝u_cmd
);

4126 
	`ö°Æl_ñemít
 (
VIEW_NODE
, &
show_w‹k_queues_cmd
);

4127 
	`ö°Æl_ñemít
 (
ENABLE_NODE
, &
show_w‹k_queues_cmd
);

4129 
	`§™d
(
	`time
(
NULL
));

4130 
	}
}

4133 
	$cmd_ãrmö©e_tokí
(
cmd_tokí
 *
tokí
)

4135 
i
, 
j
;

4136 
ve˘‹
 
keyw‹d_ve˘
;

4138 i‡(
tokí
->
mu…ùÀ
)

4140 
i
 = 0; i < 
	`ve˘‹_a˘ive
(
tokí
->
mu…ùÀ
); i++)

4141 
	`cmd_ãrmö©e_tokí
(
	`ve˘‹_¶Ÿ
(
tokí
->
mu…ùÀ
, 
i
));

4142 
	`ve˘‹_‰ì
(
tokí
->
mu…ùÀ
);

4143 
tokí
->
mu…ùÀ
 = 
NULL
;

4146 i‡(
tokí
->
keyw‹d
)

4148 
i
 = 0; i < 
	`ve˘‹_a˘ive
(
tokí
->
keyw‹d
); i++)

4150 
keyw‹d_ve˘
 = 
	`ve˘‹_¶Ÿ
(
tokí
->
keyw‹d
, 
i
);

4151 
j
 = 0; j < 
	`ve˘‹_a˘ive
(
keyw‹d_ve˘
); j++)

4152 
	`cmd_ãrmö©e_tokí
(
	`ve˘‹_¶Ÿ
(
keyw‹d_ve˘
, 
j
));

4153 
	`ve˘‹_‰ì
(
keyw‹d_ve˘
);

4155 
	`ve˘‹_‰ì
(
tokí
->
keyw‹d
);

4156 
tokí
->
keyw‹d
 = 
NULL
;

4159 
	`XFREE
(
MTYPE_CMD_TOKENS
, 
tokí
->
cmd
);

4160 
	`XFREE
(
MTYPE_CMD_TOKENS
, 
tokí
->
desc
);

4162 
	`XFREE
(
MTYPE_CMD_TOKENS
, 
tokí
);

4163 
	}
}

4166 
	$cmd_ãrmö©e_ñemít
(
cmd_ñemít
 *
cmd
)

4168 
i
;

4170 i‡(
cmd
->
tokís
 =
NULL
)

4173 
i
 = 0; i < 
	`ve˘‹_a˘ive
(
cmd
->
tokís
); i++)

4174 
	`cmd_ãrmö©e_tokí
(
	`ve˘‹_¶Ÿ
(
cmd
->
tokís
, 
i
));

4176 
	`ve˘‹_‰ì
(
cmd
->
tokís
);

4177 
cmd
->
tokís
 = 
NULL
;

4178 
	}
}

4181 
	$cmd_ãrmö©e
 ()

4183 
i
, 
j
;

4184 
cmd_node
 *cmd_node;

4185 
cmd_ñemít
 *cmd_element;

4186 
ve˘‹
 
cmd_node_v
;

4188 i‡(
cmdvec
)

4190 
i
 = 0; i < 
	`ve˘‹_a˘ive
 (
cmdvec
); i++)

4191 i‡((
cmd_node
 = 
	`ve˘‹_¶Ÿ
 (
cmdvec
, 
i
)Ë!
NULL
)

4193 
cmd_node_v
 = 
cmd_node
->
cmd_ve˘‹
;

4195 
j
 = 0; j < 
	`ve˘‹_a˘ive
 (
cmd_node_v
); j++)

4196 i‡((
cmd_ñemít
 = 
	`ve˘‹_¶Ÿ
 (
cmd_node_v
, 
j
)Ë!
NULL
)

4197 
	`cmd_ãrmö©e_ñemít
(
cmd_ñemít
);

4199 
	`ve˘‹_‰ì
 (
cmd_node_v
);

4202 
	`ve˘‹_‰ì
 (
cmdvec
);

4203 
cmdvec
 = 
NULL
;

4206 i‡(
comm™d_¸
)

4207 
	`XFREE
(
MTYPE_CMD_TOKENS
, 
comm™d_¸
);

4208 i‡(
tokí_¸
.
desc
)

4209 
	`XFREE
(
MTYPE_CMD_TOKENS
, 
tokí_¸
.
desc
);

4210 i‡(
ho°
.
«me
)

4211 
	`XFREE
 (
MTYPE_HOST
, 
ho°
.
«me
);

4212 i‡(
ho°
.
∑ssw‹d
)

4213 
	`XFREE
 (
MTYPE_HOST
, 
ho°
.
∑ssw‹d
);

4214 i‡(
ho°
.
∑ssw‹d_í¸y±
)

4215 
	`XFREE
 (
MTYPE_HOST
, 
ho°
.
∑ssw‹d_í¸y±
);

4216 i‡(
ho°
.
íabÀ
)

4217 
	`XFREE
 (
MTYPE_HOST
, 
ho°
.
íabÀ
);

4218 i‡(
ho°
.
íabÀ_í¸y±
)

4219 
	`XFREE
 (
MTYPE_HOST
, 
ho°
.
íabÀ_í¸y±
);

4220 i‡(
ho°
.
logfûe
)

4221 
	`XFREE
 (
MTYPE_HOST
, 
ho°
.
logfûe
);

4222 i‡(
ho°
.
mŸdfûe
)

4223 
	`XFREE
 (
MTYPE_HOST
, 
ho°
.
mŸdfûe
);

4224 i‡(
ho°
.
c⁄fig
)

4225 
	`XFREE
 (
MTYPE_HOST
, 
ho°
.
c⁄fig
);

4226 
	}
}

	@command.h

23 #i‚de‡
_ZEBRA_COMMAND_H


24 
	#_ZEBRA_COMMAND_H


	)

26 
	~"ve˘‹.h
"

27 
	~"vty.h
"

28 
	~"rouã_ty≥s.h
"

31 
	sho°


34 *
	m«me
;

37 *
	m∑ssw‹d
;

38 *
	m∑ssw‹d_í¸y±
;

41 *
	míabÀ
;

42 *
	míabÀ_í¸y±
;

45 
	mlöes
;

48 *
	mlogfûe
;

51 *
	mc⁄fig
;

54 
	madv™˚d
;

55 
	mí¸y±
;

58 c⁄° *
	mmŸd
;

59 *
	mmŸdfûe
;

63 
	enode_ty≥


65 
	mAUTH_NODE
,

66 
	mRESTRICTED_NODE
,

67 
	mVIEW_NODE
,

68 
	mAUTH_ENABLE_NODE
,

69 
	mENABLE_NODE
,

70 
	mCONFIG_NODE
,

71 
	mSERVICE_NODE
,

72 
	mDEBUG_NODE
,

73 
	mAAA_NODE
,

74 
	mKEYCHAIN_NODE
,

75 
	mKEYCHAIN_KEY_NODE
,

76 
	mINTERFACE_NODE
,

77 
	mZEBRA_NODE
,

78 
	mTABLE_NODE
,

79 
	mRIP_NODE
,

80 
	mRIPNG_NODE
,

81 
	mBABEL_NODE
,

82 
	mBGP_NODE
,

83 
	mBGP_VPNV4_NODE
,

84 
	mBGP_IPV4_NODE
,

85 
	mBGP_IPV4M_NODE
,

86 
	mBGP_IPV6_NODE
,

87 
	mBGP_IPV6M_NODE
,

88 
	mOSPF_NODE
,

89 
	mOSPF6_NODE
,

90 
	mISIS_NODE
,

91 
	mPIM_NODE
,

92 
	mMASC_NODE
,

93 
	mIRDP_NODE
,

94 
	mIP_NODE
,

95 
	mACCESS_NODE
,

96 
	mPREFIX_NODE
,

97 
	mACCESS_IPV6_NODE
,

98 
	mPREFIX_IPV6_NODE
,

99 
	mAS_LIST_NODE
,

100 
	mCOMMUNITY_LIST_NODE
,

101 
	mRMAP_NODE
,

102 
	mSMUX_NODE
,

103 
	mDUMP_NODE
,

104 
	mFORWARDING_NODE
,

105 
	mPROTOCOL_NODE
,

106 
	mVTY_NODE
,

111 
	scmd_node


114 
node_ty≥
 
	mnode
;

117 c⁄° *
	m¥om±
;

120 
	mvtysh
;

123 (*
	mfunc
Ë(
	mvty
 *);

126 
ve˘‹
 
	mcmd_ve˘‹
;

131 
	mCMD_ATTR_DEPRECATED
 = 1,

132 
	mCMD_ATTR_HIDDEN
,

136 
	scmd_ñemít


138 c⁄° *
	m°rög
;

139 (*
	mfunc
Ë(
	mcmd_ñemít
 *, 
	mvty
 *, , const *[]);

140 c⁄° *
	mdoc
;

141 
	md´m⁄
;

142 
ve˘‹
 
	mtokís
;

143 
u_ch¨
 
	m©å
;

147 
	ecmd_tokí_ty≥


149 
	mTOKEN_TERMINAL
 = 0,

150 
	mTOKEN_MULTIPLE
,

151 
	mTOKEN_KEYWORD
,

155 
	scmd_tokí


157 
cmd_tokí_ty≥
 
	mty≥
;

160 
ve˘‹
 
	mmu…ùÀ
;

163 
ve˘‹
 
	mkeyw‹d
;

166 *
	mcmd
;

167 *
	mdesc
;

171 
	#CMD_SUCCESS
 0

	)

172 
	#CMD_WARNING
 1

	)

173 
	#CMD_ERR_NO_MATCH
 2

	)

174 
	#CMD_ERR_AMBIGUOUS
 3

	)

175 
	#CMD_ERR_INCOMPLETE
 4

	)

176 
	#CMD_ERR_EXEED_ARGC_MAX
 5

	)

177 
	#CMD_ERR_NOTHING_TODO
 6

	)

178 
	#CMD_COMPLETE_FULL_MATCH
 7

	)

179 
	#CMD_COMPLETE_MATCH
 8

	)

180 
	#CMD_COMPLETE_LIST_MATCH
 9

	)

181 
	#CMD_SUCCESS_DAEMON
 10

	)

184 
	#CMD_ARGC_MAX
 25

	)

187 #i‚de‡
VTYSH_EXTRACT_PL


190 
	#DEFUN_CMD_ELEMENT
(
fun˙ame
, 
cmd«me
, 
cmd°r
, 
hñp°r
, 
©ås
, 
dnum
) \

191 
cmd_ñemít
 
cmd«me
 = \

193 .
°rög
 = 
cmd°r
, \

194 .
func
 = 
fun˙ame
, \

195 .
doc
 = 
hñp°r
, \

196 .
©å
 = 
©ås
, \

197 .
d´m⁄
 = 
dnum
, \

198 };

	)

200 
	#DEFUN_CMD_FUNC_DECL
(
fun˙ame
) \

201 
	`fun˙ame
 (
cmd_ñemít
 *, 
vty
 *, , c⁄° *[]);

	)

203 
	#DEFUN_CMD_FUNC_TEXT
(
fun˙ame
) \

204 
fun˙ame
 \

205 (
cmd_ñemít
 *
£lf
 
	`__©åibuã__
 ((
unu£d
)), \

206 
vty
 *vty 
	`__©åibuã__
 ((
unu£d
)), \

207 
¨gc
 
	`__©åibuã__
 ((
unu£d
)), \

208 c⁄° *
¨gv
[] 
	`__©åibuã__
 ((
unu£d
)Ë)

	)

374 
	#DEFUN
(
fun˙ame
, 
cmd«me
, 
cmd°r
, 
hñp°r
) \

375 
	`DEFUN_CMD_FUNC_DECL
(
fun˙ame
) \

376 
	`DEFUN_CMD_ELEMENT
(
fun˙ame
, 
cmd«me
, 
cmd°r
, 
hñp°r
, 0, 0) \

377 
	`DEFUN_CMD_FUNC_TEXT
(
fun˙ame
)

	)

379 
	#DEFUN_ATTR
(
fun˙ame
, 
cmd«me
, 
cmd°r
, 
hñp°r
, 
©å
) \

380 
	`DEFUN_CMD_FUNC_DECL
(
fun˙ame
) \

381 
	`DEFUN_CMD_ELEMENT
(
fun˙ame
, 
cmd«me
, 
cmd°r
, 
hñp°r
, 
©å
, 0) \

382 
	`DEFUN_CMD_FUNC_TEXT
(
fun˙ame
)

	)

384 
	#DEFUN_HIDDEN
(
fun˙ame
, 
cmd«me
, 
cmd°r
, 
hñp°r
) \

385 
	`DEFUN_ATTR
 (
fun˙ame
, 
cmd«me
, 
cmd°r
, 
hñp°r
, 
CMD_ATTR_HIDDEN
)

	)

387 
	#DEFUN_DEPRECATED
(
fun˙ame
, 
cmd«me
, 
cmd°r
, 
hñp°r
) \

388 
	`DEFUN_ATTR
 (
fun˙ame
, 
cmd«me
, 
cmd°r
, 
hñp°r
, 
CMD_ATTR_DEPRECATED
) \

389 

	)

391 
	#DEFUN_NOSH
(
fun˙ame
, 
cmd«me
, 
cmd°r
, 
hñp°r
) \

392 
	`DEFUN
(
fun˙ame
, 
cmd«me
, 
cmd°r
, 
hñp°r
)

	)

395 
	#DEFSH
(
d´m⁄
, 
cmd«me
, 
cmd°r
, 
hñp°r
) \

396 
	`DEFUN_CMD_ELEMENT
(
NULL
, 
cmd«me
, 
cmd°r
, 
hñp°r
, 0, 
d´m⁄
) \

397 

	)

399 
	#DEFUNSH
(
d´m⁄
, 
fun˙ame
, 
cmd«me
, 
cmd°r
, 
hñp°r
) \

400 
	`DEFUN_CMD_FUNC_DECL
(
fun˙ame
) \

401 
	`DEFUN_CMD_ELEMENT
(
fun˙ame
, 
cmd«me
, 
cmd°r
, 
hñp°r
, 0, 
d´m⁄
) \

402 
	`DEFUN_CMD_FUNC_TEXT
(
fun˙ame
)

	)

405 
	#DEFUNSH_ATTR
(
d´m⁄
, 
fun˙ame
, 
cmd«me
, 
cmd°r
, 
hñp°r
, 
©å
) \

406 
	`DEFUN_CMD_FUNC_DECL
(
fun˙ame
) \

407 
	`DEFUN_CMD_ELEMENT
(
fun˙ame
, 
cmd«me
, 
cmd°r
, 
hñp°r
, 
©å
, 
d´m⁄
) \

408 
	`DEFUN_CMD_FUNC_TEXT
(
fun˙ame
)

	)

410 
	#DEFUNSH_HIDDEN
(
d´m⁄
, 
fun˙ame
, 
cmd«me
, 
cmd°r
, 
hñp°r
) \

411 
	`DEFUNSH_ATTR
 (
d´m⁄
, 
fun˙ame
, 
cmd«me
, 
cmd°r
, 
hñp°r
, 
CMD_ATTR_HIDDEN
)

	)

413 
	#DEFUNSH_DEPRECATED
(
d´m⁄
, 
fun˙ame
, 
cmd«me
, 
cmd°r
, 
hñp°r
) \

414 
	`DEFUNSH_ATTR
 (
d´m⁄
, 
fun˙ame
, 
cmd«me
, 
cmd°r
, 
hñp°r
, 
CMD_ATTR_DEPRECATED
)

	)

417 
	#ALIAS
(
fun˙ame
, 
cmd«me
, 
cmd°r
, 
hñp°r
) \

418 
	`DEFUN_CMD_ELEMENT
(
fun˙ame
, 
cmd«me
, 
cmd°r
, 
hñp°r
, 0, 0)

	)

420 
	#ALIAS_ATTR
(
fun˙ame
, 
cmd«me
, 
cmd°r
, 
hñp°r
, 
©å
) \

421 
	`DEFUN_CMD_ELEMENT
(
fun˙ame
, 
cmd«me
, 
cmd°r
, 
hñp°r
, 
©å
, 0)

	)

423 
	#ALIAS_HIDDEN
(
fun˙ame
, 
cmd«me
, 
cmd°r
, 
hñp°r
) \

424 
	`DEFUN_CMD_ELEMENT
(
fun˙ame
, 
cmd«me
, 
cmd°r
, 
hñp°r
, 
CMD_ATTR_HIDDEN
, 0)

	)

426 
	#ALIAS_DEPRECATED
(
fun˙ame
, 
cmd«me
, 
cmd°r
, 
hñp°r
) \

427 
	`DEFUN_CMD_ELEMENT
(
fun˙ame
, 
cmd«me
, 
cmd°r
, 
hñp°r
, 
CMD_ATTR_DEPRECATED
, 0)

	)

429 
	#ALIAS_SH
(
d´m⁄
, 
fun˙ame
, 
cmd«me
, 
cmd°r
, 
hñp°r
) \

430 
	`DEFUN_CMD_ELEMENT
(
fun˙ame
, 
cmd«me
, 
cmd°r
, 
hñp°r
, 0, 
d´m⁄
)

	)

432 
	#ALIAS_SH_HIDDEN
(
d´m⁄
, 
fun˙ame
, 
cmd«me
, 
cmd°r
, 
hñp°r
) \

433 
	`DEFUN_CMD_ELEMENT
(
fun˙ame
, 
cmd«me
, 
cmd°r
, 
hñp°r
, 
CMD_ATTR_HIDDEN
, 
d´m⁄
)

	)

435 
	#ALIAS_SH_DEPRECATED
(
d´m⁄
, 
fun˙ame
, 
cmd«me
, 
cmd°r
, 
hñp°r
) \

436 
	`DEFUN_CMD_ELEMENT
(
fun˙ame
, 
cmd«me
, 
cmd°r
, 
hñp°r
, 
CMD_ATTR_DEPRECATED
, 
d´m⁄
)

	)

441 
	#CMD_OPTION
(
S
Ë((S[0]Ë='[')

	)

442 
	#CMD_VARIABLE
(
S
Ë(((S[0]Ë>'A' && (S[0]Ë<'Z'Ë|| ((S[0]Ë='<'))

	)

443 
	#CMD_VARARG
(
S
Ë((S[0]Ë='.')

	)

444 
	#CMD_RANGE
(
S
Ë((S[0] ='<'))

	)

446 
	#CMD_IPV4
(
S
Ë((
	`°rcmp
 ((S), "A.B.C.D"Ë=0))

	)

447 
	#CMD_IPV4_PREFIX
(
S
Ë((
	`°rcmp
 ((S), "A.B.C.D/M"Ë=0))

	)

448 
	#CMD_IPV6
(
S
Ë((
	`°rcmp
 ((S), "X:X::X:X"Ë=0))

	)

449 
	#CMD_IPV6_PREFIX
(
S
Ë((
	`°rcmp
 ((S), "X:X::X:X/M"Ë=0))

	)

452 
	#SHOW_STR
 "ShowÑu¬ög sy°em inf‹m©i⁄\n"

	)

453 
	#IP_STR
 "IP inf‹m©i⁄\n"

	)

454 
	#IPV6_STR
 "IPv6 inf‹m©i⁄\n"

	)

455 
	#NO_STR
 "Neg©ê®comm™d o∏£àô†deÁu…s\n"

	)

456 
	#REDIST_STR
 "Redi°ribuã inf‹m©i⁄ frománŸhîÑoutögÖrŸocﬁ\n"

	)

457 
	#CLEAR_STR
 "Re£àfun˘i⁄s\n"

	)

458 
	#RIP_STR
 "RIP inf‹m©i⁄\n"

	)

459 
	#BGP_STR
 "BGP inf‹m©i⁄\n"

	)

460 
	#OSPF_STR
 "OSPF inf‹m©i⁄\n"

	)

461 
	#NEIGHBOR_STR
 "S≥cifyÇeighb‹Ñouãr\n"

	)

462 
	#DEBUG_STR
 "Debuggög fun˘i⁄†(£êÆsÿ'undebug')\n"

	)

463 
	#UNDEBUG_STR
 "DißbÀ debuggög fun˘i⁄†(£êÆsÿ'debug')\n"

	)

464 
	#ROUTER_STR
 "E«bÀáÑoutögÖro˚ss\n"

	)

465 
	#AS_STR
 "ASÇumbî\n"

	)

466 
	#MBGP_STR
 "MBGP inf‹m©i⁄\n"

	)

467 
	#MATCH_STR
 "M©ch vÆue†‰omÑoutögÅabÀ\n"

	)

468 
	#SET_STR
 "Së vÆue†ö de°ö©i⁄ÑoutögÖrŸocﬁ\n"

	)

469 
	#OUT_STR
 "Fûã∏outgoögÑoutög upd©es\n"

	)

470 
	#IN_STR
 "Fûã∏öcomögÑoutög upd©es\n"

	)

471 
	#V4NOTATION_STR
 "•ecify by IPv4áddªs†nŸ©i⁄”.g. 0.0.0.0)\n"

	)

472 
	#OSPF6_NUMBER_STR
 "S≥cify byÇumbî\n"

	)

473 
	#INTERFACE_STR
 "I¡îÁ˚ infom©i⁄\n"

	)

474 
	#IFNAME_STR
 "I¡îÁ˚Çame”.g.Ép0)\n"

	)

475 
	#IP6_STR
 "IPv6 Inf‹m©i⁄\n"

	)

476 
	#OSPF6_STR
 "O≥¿Sh‹ã° P©h Fú° (OSPFËf‹ IPv6\n"

	)

477 
	#OSPF6_ROUTER_STR
 "E«bÀáÑoutögÖro˚ss\n"

	)

478 
	#OSPF6_INSTANCE_STR
 "<1-65535> In°™˚ ID\n"

	)

479 
	#SECONDS_STR
 "<1-65535> Sec⁄ds\n"

	)

480 
	#ROUTE_STR
 "Routög TabÀ\n"

	)

481 
	#PREFIX_LIST_STR
 "BuûdáÖªfixÜi°\n"

	)

482 
	#OSPF6_DUMP_TYPE_LIST
 \

483 "“eighb‹|öãrÁ˚|¨ó|lß|zebø|c⁄fig|dbex|•f|rouã|lsdb|ªdi°ribuã|hook|asbr|¥efix|abr)"

	)

484 
	#ISIS_STR
 "IS-IS inf‹m©i⁄\n"

	)

485 
	#AREA_TAG_STR
 "[¨óÅag]\n"

	)

487 
	#CONF_BACKUP_EXT
 ".ßv"

	)

491 #ifde‡
HAVE_IPV6


492 
	#NEIGHBOR_CMD
 "√ighb‹ (A.B.C.D|X:X::X:XË"

	)

493 
	#NO_NEIGHBOR_CMD
 "nÿ√ighb‹ (A.B.C.D|X:X::X:XË"

	)

494 
	#NEIGHBOR_ADDR_STR
 "Neighb‹áddªss\nIPv6áddªss\n"

	)

495 
	#NEIGHBOR_CMD2
 "√ighb‹ (A.B.C.D|X:X::X:X|WORDË"

	)

496 
	#NO_NEIGHBOR_CMD2
 "nÿ√ighb‹ (A.B.C.D|X:X::X:X|WORDË"

	)

497 
	#NEIGHBOR_ADDR_STR2
 "Neighb‹áddªss\nNeighb‹ IPv6áddªss\nNeighb‹Åag\n"

	)

499 
	#NEIGHBOR_CMD
 "√ighb‹ A.B.C.D "

	)

500 
	#NO_NEIGHBOR_CMD
 "nÿ√ighb‹ A.B.C.D "

	)

501 
	#NEIGHBOR_ADDR_STR
 "Neighb‹áddªss\n"

	)

502 
	#NEIGHBOR_CMD2
 "√ighb‹ (A.B.C.D|WORDË"

	)

503 
	#NO_NEIGHBOR_CMD2
 "nÿ√ighb‹ (A.B.C.D|WORDË"

	)

504 
	#NEIGHBOR_ADDR_STR2
 "Neighb‹áddªss\nNeighb‹Åag\n"

	)

508 
ö°Æl_node
 (
cmd_node
 *, (*Ë(
vty
 *));

509 
	`ö°Æl_deÁu…
 (
node_ty≥
);

510 
	`ö°Æl_ñemít
 (
node_ty≥
, 
cmd_ñemít
 *);

515 *
	`¨gv_c⁄ˇt
 (c⁄° **
¨gv
, 
¨gc
, 
shi·
);

517 
ve˘‹
 
	`cmd_make_°rvec
 (const *);

518 
	`cmd_‰ì_°rvec
 (
ve˘‹
);

519 
ve˘‹
 
	`cmd_des¸ibe_comm™d
 (ve˘‹, 
vty
 *, *
°©us
);

520 **
	`cmd_com∂ëe_comm™d
 (
ve˘‹
, 
vty
 *, *
°©us
);

521 c⁄° *
	`cmd_¥om±
 (
node_ty≥
);

522 
	`c⁄fig_‰om_fûe
 (
vty
 *, 
FILE
 *, *
löe_num
);

523 
node_ty≥
 
	`node_∑ª¡
 (node_type);

524 
	`cmd_execuã_comm™d
 (
ve˘‹
, 
vty
 *, 
cmd_ñemít
 **, );

525 
	`cmd_execuã_comm™d_°ri˘
 (
ve˘‹
, 
vty
 *, 
cmd_ñemít
 **);

526 
	`cmd_öô
 ();

527 
	`cmd_ãrmö©e
 ();

530 
cmd_ñemít
 
c⁄fig_íd_cmd
;

531 
cmd_ñemít
 
c⁄fig_exô_cmd
;

532 
cmd_ñemít
 
c⁄fig_quô_cmd
;

533 
cmd_ñemít
 
c⁄fig_hñp_cmd
;

534 
cmd_ñemít
 
c⁄fig_li°_cmd
;

535 *
	`ho°_c⁄fig_fûe
 ();

536 
	`ho°_c⁄fig_£t
 (*);

538 
	`¥öt_vîsi⁄
 (const *);

541 
ho°
 host;

544 *
comm™d_¸
;

	@config.h

8 
	#BABEL_VTYSH_PATH
 "/v¨/run/babñd.vty"

	)

11 
	#BGP_VTYSH_PATH
 "/v¨/run/bgpd.vty"

	)

14 
	#CONFIGFILE_MASK
 0600

	)

17 
	#CONSUMED_TIME_CHECK
 5000000

	)

20 
	#DAEMON_VTY_DIR
 "/v¨/run"

	)

23 
	#DISABLE_BGP_ANNOUNCE
 0

	)

29 
	#GNU_LINUX


	)

32 
	#HAVE_ALARM
 1

	)

35 
	#HAVE_ARPA_INET_H
 1

	)

38 
	#HAVE_ASM_TYPES_H
 1

	)

56 
	#HAVE_CHOWN
 1

	)

59 
	#HAVE_CLOCK_MONOTONIC


	)

62 
	#HAVE_DAEMON
 1

	)

66 
	#HAVE_DECL_TCP_MD5SIG
 1

	)

69 
	#HAVE_DLFCN_H
 1

	)

75 
	#HAVE_DUP2
 1

	)

78 
	#HAVE_FCNTL
 1

	)

81 
	#HAVE_FCNTL_H
 1

	)

84 
	#HAVE_FNMATCH
 1

	)

87 
	#HAVE_FORK
 1

	)

93 
	#HAVE_FTRUNCATE
 1

	)

96 
	#HAVE_GETADDRINFO
 1

	)

99 
	#HAVE_GETCWD
 1

	)

102 
	#HAVE_GETHOSTBYNAME
 1

	)

105 
	#HAVE_GETIFADDRS
 1

	)

108 
	#HAVE_GETPAGESIZE
 1

	)

111 
	#HAVE_GETTIMEOFDAY
 1

	)

114 
	#HAVE_GLIBC_BACKTRACE


	)

117 
	#HAVE_GNU_REGEX


	)

120 
	#HAVE_IF_INDEXTONAME
 1

	)

123 
	#HAVE_IF_NAMETOINDEX
 1

	)

126 
	#HAVE_INET_ATON
 1

	)

132 
	#HAVE_INET_NTOA
 1

	)

135 
	#HAVE_INET_NTOP


	)

138 
	#HAVE_INET_PTON


	)

141 
	#HAVE_INTTYPES_H
 1

	)

144 
	#HAVE_IPV6
 1

	)

147 
	#HAVE_IP_PKTINFO
 1

	)

156 
	#HAVE_IRDP


	)

165 
	#HAVE_LIBCRYPT
 1

	)

168 
	#HAVE_LIBM


	)

189 
	#HAVE_LIMITS_H
 1

	)

192 
	#HAVE_LINUX_VERSION_H
 1

	)

195 
	#HAVE_MALLINFO


	)

198 
	#HAVE_MEMCHR
 1

	)

201 
	#HAVE_MEMMOVE
 1

	)

204 
	#HAVE_MEMORY_H
 1

	)

207 
	#HAVE_MEMSET
 1

	)

210 
	#HAVE_NETDB_H
 1

	)

222 
	#HAVE_NETINET_ICMP6_H
 1

	)

228 
	#HAVE_NETINET_IN_H
 1

	)

231 
	#HAVE_NETINET_IN_SYSTM_H
 1

	)

237 
	#HAVE_NETINET_IP_ICMP_H
 1

	)

240 
	#HAVE_NETLINK


	)

246 
	#HAVE_NET_IF_H
 1

	)

255 
	#HAVE_NET_ROUTE_H
 1

	)

261 
	#HAVE_OPAQUE_LSA


	)

267 
	#HAVE_OSPF_TE


	)

273 
	#HAVE_POW
 1

	)

282 
	#HAVE_PR_SET_KEEPCAPS


	)

285 
	#HAVE_RFC3678
 1

	)

288 
	#HAVE_RTADV


	)

291 
	#HAVE_RUSAGE


	)

294 
	#HAVE_SELECT
 1

	)

300 
	#HAVE_SIGNAL_H
 1

	)

306 
	#HAVE_SNPRINTF
 1

	)

309 
	#HAVE_SOCKET
 1

	)

312 
	#HAVE_SOCKLEN_T
 1

	)

318 
	#HAVE_STACK_TRACE


	)

325 
	#HAVE_STDDEF_H
 1

	)

328 
	#HAVE_STDINT_H
 1

	)

331 
	#HAVE_STDLIB_H
 1

	)

334 
	#HAVE_STRCASECMP
 1

	)

337 
	#HAVE_STRCHR
 1

	)

340 
	#HAVE_STRCSPN
 1

	)

343 
	#HAVE_STRDUP
 1

	)

346 
	#HAVE_STRERROR
 1

	)

349 
	#HAVE_STRFTIME
 1

	)

352 
	#HAVE_STRINGS_H
 1

	)

355 
	#HAVE_STRING_H
 1

	)

364 
	#HAVE_STRNCASECMP
 1

	)

367 
	#HAVE_STRNDUP
 1

	)

370 
	#HAVE_STRNLEN
 1

	)

373 
	#HAVE_STROPTS_H
 1

	)

376 
	#HAVE_STRRCHR
 1

	)

379 
	#HAVE_STRSPN
 1

	)

382 
	#HAVE_STRSTR
 1

	)

385 
	#HAVE_STRTOL
 1

	)

388 
	#HAVE_STRTOUL
 1

	)

391 
	#HAVE_STRUCT_ICMPHDR
 1

	)

415 
	#HAVE_STRUCT_IN_PKTINFO
 1

	)

418 
	#HAVE_STRUCT_IP_MREQN_IMR_IFINDEX
 1

	)

424 
	#HAVE_STRUCT_ND_OPT_ADV_INTERVAL
 1

	)

443 
	#HAVE_STRUCT_SOCKADDR
 1

	)

452 
	#HAVE_STRUCT_SOCKADDR_IN
 1

	)

455 
	#HAVE_STRUCT_SOCKADDR_IN6
 1

	)

458 
	#HAVE_STRUCT_SOCKADDR_IN6_SIN6_SCOPE_ID
 1

	)

467 
	#HAVE_STRUCT_SOCKADDR_UN
 1

	)

476 
	#HAVE_SYSLOG_H
 1

	)

482 
	#HAVE_SYS_CDEFS_H
 1

	)

488 
	#HAVE_SYS_IOCTL_H
 1

	)

494 
	#HAVE_SYS_PARAM_H
 1

	)

497 
	#HAVE_SYS_SELECT_H
 1

	)

500 
	#HAVE_SYS_SOCKET_H
 1

	)

506 
	#HAVE_SYS_STAT_H
 1

	)

509 
	#HAVE_SYS_SYSCTL_H
 1

	)

512 
	#HAVE_SYS_TIMES_H
 1

	)

515 
	#HAVE_SYS_TIME_H
 1

	)

518 
	#HAVE_SYS_TYPES_H
 1

	)

521 
	#HAVE_SYS_UN_H
 1

	)

524 
	#HAVE_SYS_WAIT_H
 1

	)

527 
	#HAVE_SYS_WEAK_ALIAS
 1

	)

530 
	#HAVE_SYS_WEAK_ALIAS_ATTRIBUTE
 1

	)

536 
	#HAVE_SYS_WEAK_ALIAS_CROSSFILE
 1

	)

543 
	#HAVE_SYS_WEAK_ALIAS_PRAGMA
 1

	)

552 
	#HAVE_TIME_H
 1

	)

555 
	#HAVE_UCONTEXT_H
 1

	)

558 
	#HAVE_UCONTEXT_T_UC_MCONTEXT_GREGS
 1

	)

570 
	#HAVE_UNAME
 1

	)

573 
	#HAVE_UNISTD_H
 1

	)

576 
	#HAVE_VFORK
 1

	)

585 
	#HAVE_VPRINTF
 1

	)

588 
	#HAVE_VSNPRINTF
 1

	)

591 
	#HAVE_WCHAR_H
 1

	)

594 
	#HAVE_WCTYPE_H
 1

	)

597 
	#HAVE_WORKING_FORK
 1

	)

600 
	#HAVE_WORKING_VFORK
 1

	)

603 
	#ISIS_METHOD
 
ISIS_METHOD_PFPACKET


	)

606 
	#ISIS_METHOD_BPF
 3

	)

609 
	#ISIS_METHOD_DLPI
 2

	)

612 
	#ISIS_METHOD_PFPACKET
 1

	)

615 
	#ISIS_VTYSH_PATH
 "/v¨/run/isisd.vty"

	)

621 
	#LINUX_IPV6
 1

	)

624 
	#LOGFILE_MASK
 0600

	)

628 
	#LSTAT_FOLLOWS_SLASHED_SYMLINK
 1

	)

632 
	#LT_OBJDIR
 ".libs/"

	)

641 
	#OSPF6_VTYSH_PATH
 "/v¨/run/o•f6d.vty"

	)

644 
	#OSPF_VTYSH_PATH
 "/v¨/run/o•fd.vty"

	)

647 
	#PACKAGE
 "quagga"

	)

650 
	#PACKAGE_BUGREPORT
 "hâps://bugzûœ.quagga.√t"

	)

653 
	#PACKAGE_NAME
 "Quagga"

	)

656 
	#PACKAGE_STRING
 "Quagg®0.99.24"

	)

659 
	#PACKAGE_TARNAME
 "quagga"

	)

662 
	#PACKAGE_URL
 ""

	)

665 
	#PACKAGE_VERSION
 "0.99.24"

	)

671 
	#PATH_BABELD_PID
 "/v¨/run/babñd.pid"

	)

674 
	#PATH_BGPD_PID
 "/v¨/run/bgpd.pid"

	)

677 
	#PATH_ISISD_PID
 "/v¨/run/isisd.pid"

	)

680 
	#PATH_OSPF6D_PID
 "/v¨/run/o•f6d.pid"

	)

683 
	#PATH_OSPFD_PID
 "/v¨/run/o•fd.pid"

	)

686 
	#PATH_PIMD_PID
 "/v¨/run/pimd.pid"

	)

689 
	#PATH_RIPD_PID
 "/v¨/run/rùd.pid"

	)

692 
	#PATH_RIPNGD_PID
 "/v¨/run/rùngd.pid"

	)

695 
	#PATH_WATCHQUAGGA_PID
 "/v¨/run/w©chquagga.pid"

	)

698 
	#PATH_ZEBRA_PID
 "/v¨/run/zebø.pid"

	)

701 
	#PIM_VTYSH_PATH
 "/v¨/run/pimd.vty"

	)

704 
	#QUAGGA_GROUP
 "quagga"

	)

707 
	#QUAGGA_NO_DEPRECATED_INTERFACES
 1

	)

710 
	#QUAGGA_USER
 "quagga"

	)

713 
	#RETSIGTYPE
 

	)

716 
	#RIPNG_VTYSH_PATH
 "/v¨/run/rùngd.vty"

	)

719 
	#RIP_VTYSH_PATH
 "/v¨/run/rùd.vty"

	)

722 
	#SELECT_TYPE_ARG1
 

	)

725 
	#SELECT_TYPE_ARG234
 (
fd_£t
 *)

	)

728 
	#SELECT_TYPE_ARG5
 (
timevÆ
 *)

	)

740 
	#STDC_HEADERS
 1

	)

752 
	#SUPPORT_OSPF_API


	)

755 
	#TIME_WITH_SYS_TIME
 1

	)

767 #i‚de‡
_ALL_SOURCE


768 
	#_ALL_SOURCE
 1

	)

771 #i‚de‡
_GNU_SOURCE


772 
	#_GNU_SOURCE
 1

	)

775 #i‚de‡
_POSIX_PTHREAD_SEMANTICS


776 
	#_POSIX_PTHREAD_SEMANTICS
 1

	)

779 #i‚de‡
_TANDEM_SOURCE


780 
	#_TANDEM_SOURCE
 1

	)

783 #i‚de‡
__EXTENSIONS__


784 
	#__EXTENSIONS__
 1

	)

789 
	#VERSION
 "0.99.24"

	)

792 
	#VTYSH


	)

799 #i‡
deföed
 
AC_APPLE_UNIVERSAL_BUILD


800 #i‡
deföed
 
__BIG_ENDIAN__


801 
	#WORDS_BIGENDIAN
 1

	)

804 #i‚de‡
WORDS_BIGENDIAN


810 
	#ZEBRA_SERV_PATH
 "/v¨/run/z£rv.≠i"

	)

813 
	#ZEBRA_VTYSH_PATH
 "/v¨/run/zebø.vty"

	)

839 #i‚de‡
__˝lu•lus


852 
	#ª°ri˘
 
__ª°ri˘


	)

858 #i‡
deföed
 
__SUNPRO_CC
 && !deföed 
__RESTRICT


859 
	#_Re°ri˘


	)

860 
	#__ª°ri˘__


	)

	@daemon.c

23 
	~<zebø.h
>

24 
	~<log.h
>

26 #i‚de‡
HAVE_DAEMON


30 
	$d´m⁄
 (
nochdú
, 
no˛o£
)

32 
pid_t
 
pid
;

34 
pid
 = 
	`f‹k
 ();

37 i‡(
pid
 < 0)

39 
	`zlog_îr
 ("f‹k faûed: %s", 
	`ß„_°ªº‹
(
î∫o
));

44 i‡(
pid
 != 0)

45 
	`exô
 (0);

48 
pid
 = 
	`£tsid
();

50 i‡(
pid
 == -1)

52 
	`zlog_îr
 ("£tsid faûed: %s", 
	`ß„_°ªº‹
(
î∫o
));

57 i‡(! 
nochdú
)

58 
	`chdú
 ("/");

61 i‡(! 
no˛o£
)

63 
fd
;

65 
fd
 = 
	`›í
 ("/dev/nuŒ", 
O_RDWR
, 0);

66 i‡(
fd
 != -1)

68 
	`dup2
 (
fd
, 
STDIN_FILENO
);

69 
	`dup2
 (
fd
, 
STDOUT_FILENO
);

70 
	`dup2
 (
fd
, 
STDERR_FILENO
);

71 i‡(
fd
 > 2)

72 
	`˛o£
 (
fd
);

76 
	`umask
 (0027);

79 
	}
}

	@distribute.c

22 
	~<zebø.h
>

24 
	~"hash.h
"

25 
	~"if.h
"

26 
	~"fûãr.h
"

27 
	~"comm™d.h
"

28 
	~"di°ribuã.h
"

29 
	~"mem‹y.h
"

32 
hash
 *
	gdi°hash
;

35 (*
di°ribuã_add_hook
Ë(
di°ribuã
 *);

36 (*
di°ribuã_dñëe_hook
Ë(
di°ribuã
 *);

38 
di°ribuã
 *

39 
	$di°ribuã_√w
 ()

41  
	`XCALLOC
 (
MTYPE_DISTRIBUTE
,  (
di°ribuã
));

42 
	}
}

46 
	$di°ribuã_‰ì
 (
di°ribuã
 *
di°
)

48 i‡(
di°
->
i‚ame
)

49 
	`XFREE
 (
MTYPE_DISTRIBUTE_IFNAME
, 
di°
->
i‚ame
);

51 i‡(
di°
->
li°
[
DISTRIBUTE_IN
])

52 
	`‰ì
 (
di°
->
li°
[
DISTRIBUTE_IN
]);

53 i‡(
di°
->
li°
[
DISTRIBUTE_OUT
])

54 
	`‰ì
 (
di°
->
li°
[
DISTRIBUTE_OUT
]);

56 i‡(
di°
->
¥efix
[
DISTRIBUTE_IN
])

57 
	`‰ì
 (
di°
->
¥efix
[
DISTRIBUTE_IN
]);

58 i‡(
di°
->
¥efix
[
DISTRIBUTE_OUT
])

59 
	`‰ì
 (
di°
->
¥efix
[
DISTRIBUTE_OUT
]);

61 
	`XFREE
 (
MTYPE_DISTRIBUTE
, 
di°
);

62 
	}
}

65 
di°ribuã
 *

66 
	$di°ribuã_lookup
 (c⁄° *
i‚ame
)

68 
di°ribuã
 
key
;

69 
di°ribuã
 *
di°
;

72 
key
.
i‚ame
 = (*)ifname;

74 
di°
 = 
	`hash_lookup
 (
di°hash
, &
key
);

76  
di°
;

77 
	}
}

80 
di°ribuã_li°_add_hook
 ((*
func
Ë(
di°ribuã
 *))

82 
di°ribuã_add_hook
 = 
func
;

83 
	}
}

86 
di°ribuã_li°_dñëe_hook
 ((*
func
Ë(
di°ribuã
 *))

88 
di°ribuã_dñëe_hook
 = 
func
;

89 
	}
}

92 
	$di°ribuã_hash_Æloc
 (
di°ribuã
 *
¨g
)

94 
di°ribuã
 *
di°
;

96 
di°
 = 
	`di°ribuã_√w
 ();

97 i‡(
¨g
->
i‚ame
)

98 
di°
->
i‚ame
 = 
	`XSTRDUP
 (
MTYPE_DISTRIBUTE_IFNAME
, 
¨g
->ifname);

100 
di°
->
i‚ame
 = 
NULL
;

101  
di°
;

102 
	}
}

105 
di°ribuã
 *

106 
	$di°ribuã_gë
 (c⁄° *
i‚ame
)

108 
di°ribuã
 
key
;

111 
key
.
i‚ame
 = (*)ifname;

113  
	`hash_gë
 (
di°hash
, &
key
, (* (*Ë(*))
di°ribuã_hash_Æloc
);

114 
	}
}

117 
	$di°ribuã_hash_make
 (*
¨g
)

119 c⁄° 
di°ribuã
 *
di°
 = 
¨g
;

121  
di°
->
i‚ame
 ? 
	`°rög_hash_make
 (dist->ifname) : 0;

122 
	}
}

127 
	$di°ribuã_cmp
 (c⁄° 
di°ribuã
 *
di°1
, c⁄° di°ribuã *
di°2
)

129 i‡(
di°1
->
i‚ame
 && 
di°2
->ifname)

130 i‡(
	`°rcmp
 (
di°1
->
i‚ame
, 
di°2
->ifname) == 0)

132 i‡(! 
di°1
->
i‚ame
 && ! 
di°2
->ifname)

135 
	}
}

138 
di°ribuã
 *

139 
	$di°ribuã_li°_£t
 (c⁄° *
i‚ame
, 
di°ribuã_ty≥
 
ty≥
,

140 c⁄° *
Æi°_«me
)

142 
di°ribuã
 *
di°
;

144 
di°
 = 
	`di°ribuã_gë
 (
i‚ame
);

146 i‡(
ty≥
 =
DISTRIBUTE_IN
)

148 i‡(
di°
->
li°
[
DISTRIBUTE_IN
])

149 
	`‰ì
 (
di°
->
li°
[
DISTRIBUTE_IN
]);

150 
di°
->
li°
[
DISTRIBUTE_IN
] = 
	`°rdup
 (
Æi°_«me
);

152 i‡(
ty≥
 =
DISTRIBUTE_OUT
)

154 i‡(
di°
->
li°
[
DISTRIBUTE_OUT
])

155 
	`‰ì
 (
di°
->
li°
[
DISTRIBUTE_OUT
]);

156 
di°
->
li°
[
DISTRIBUTE_OUT
] = 
	`°rdup
 (
Æi°_«me
);

160 (*
di°ribuã_add_hook
Ë(
di°
);

162  
di°
;

163 
	}
}

168 
	$di°ribuã_li°_un£t
 (c⁄° *
i‚ame
, 
di°ribuã_ty≥
 
ty≥
,

169 c⁄° *
Æi°_«me
)

171 
di°ribuã
 *
di°
;

173 
di°
 = 
	`di°ribuã_lookup
 (
i‚ame
);

174 i‡(!
di°
)

177 i‡(
ty≥
 =
DISTRIBUTE_IN
)

179 i‡(!
di°
->
li°
[
DISTRIBUTE_IN
])

181 i‡(
	`°rcmp
 (
di°
->
li°
[
DISTRIBUTE_IN
], 
Æi°_«me
) != 0)

184 
	`‰ì
 (
di°
->
li°
[
DISTRIBUTE_IN
]);

185 
di°
->
li°
[
DISTRIBUTE_IN
] = 
NULL
;

188 i‡(
ty≥
 =
DISTRIBUTE_OUT
)

190 i‡(!
di°
->
li°
[
DISTRIBUTE_OUT
])

192 i‡(
	`°rcmp
 (
di°
->
li°
[
DISTRIBUTE_OUT
], 
Æi°_«me
) != 0)

195 
	`‰ì
 (
di°
->
li°
[
DISTRIBUTE_OUT
]);

196 
di°
->
li°
[
DISTRIBUTE_OUT
] = 
NULL
;

200 (*
di°ribuã_dñëe_hook
Ë(
di°
);

203 i‡(
di°
->
li°
[
DISTRIBUTE_IN
] =
NULL
 &&

204 
di°
->
li°
[
DISTRIBUTE_OUT
] =
NULL
 &&

205 
di°
->
¥efix
[
DISTRIBUTE_IN
] =
NULL
 &&

206 
di°
->
¥efix
[
DISTRIBUTE_OUT
] =
NULL
)

208 
	`hash_ªÀa£
 (
di°hash
, 
di°
);

209 
	`di°ribuã_‰ì
 (
di°
);

213 
	}
}

216 
di°ribuã
 *

217 
	$di°ribuã_li°_¥efix_£t
 (c⁄° *
i‚ame
, 
di°ribuã_ty≥
 
ty≥
,

218 c⁄° *
∂i°_«me
)

220 
di°ribuã
 *
di°
;

222 
di°
 = 
	`di°ribuã_gë
 (
i‚ame
);

224 i‡(
ty≥
 =
DISTRIBUTE_IN
)

226 i‡(
di°
->
¥efix
[
DISTRIBUTE_IN
])

227 
	`‰ì
 (
di°
->
¥efix
[
DISTRIBUTE_IN
]);

228 
di°
->
¥efix
[
DISTRIBUTE_IN
] = 
	`°rdup
 (
∂i°_«me
);

230 i‡(
ty≥
 =
DISTRIBUTE_OUT
)

232 i‡(
di°
->
¥efix
[
DISTRIBUTE_OUT
])

233 
	`‰ì
 (
di°
->
¥efix
[
DISTRIBUTE_OUT
]);

234 
di°
->
¥efix
[
DISTRIBUTE_OUT
] = 
	`°rdup
 (
∂i°_«me
);

238 (*
di°ribuã_add_hook
Ë(
di°
);

240  
di°
;

241 
	}
}

246 
	$di°ribuã_li°_¥efix_un£t
 (c⁄° *
i‚ame
, 
di°ribuã_ty≥
 
ty≥
,

247 c⁄° *
∂i°_«me
)

249 
di°ribuã
 *
di°
;

251 
di°
 = 
	`di°ribuã_lookup
 (
i‚ame
);

252 i‡(!
di°
)

255 i‡(
ty≥
 =
DISTRIBUTE_IN
)

257 i‡(!
di°
->
¥efix
[
DISTRIBUTE_IN
])

259 i‡(
	`°rcmp
 (
di°
->
¥efix
[
DISTRIBUTE_IN
], 
∂i°_«me
) != 0)

262 
	`‰ì
 (
di°
->
¥efix
[
DISTRIBUTE_IN
]);

263 
di°
->
¥efix
[
DISTRIBUTE_IN
] = 
NULL
;

266 i‡(
ty≥
 =
DISTRIBUTE_OUT
)

268 i‡(!
di°
->
¥efix
[
DISTRIBUTE_OUT
])

270 i‡(
	`°rcmp
 (
di°
->
¥efix
[
DISTRIBUTE_OUT
], 
∂i°_«me
) != 0)

273 
	`‰ì
 (
di°
->
¥efix
[
DISTRIBUTE_OUT
]);

274 
di°
->
¥efix
[
DISTRIBUTE_OUT
] = 
NULL
;

278 (*
di°ribuã_dñëe_hook
Ë(
di°
);

281 i‡(
di°
->
li°
[
DISTRIBUTE_IN
] =
NULL
 &&

282 
di°
->
li°
[
DISTRIBUTE_OUT
] =
NULL
 &&

283 
di°
->
¥efix
[
DISTRIBUTE_IN
] =
NULL
 &&

284 
di°
->
¥efix
[
DISTRIBUTE_OUT
] =
NULL
)

286 
	`hash_ªÀa£
 (
di°hash
, 
di°
);

287 
	`di°ribuã_‰ì
 (
di°
);

291 
	}
}

293 
DEFUN
 (
di°ribuã_li°_Æl
,

294 
di°ribuã_li°_Æl_cmd
,

301 
di°ribuã_ty≥
 
	gty≥
;

304 i‡(
°∫cmp
 (
¨gv
[1], "i", 1) == 0)

305 
ty≥
 = 
DISTRIBUTE_IN
;

306 i‡(
°∫cmp
 (
¨gv
[1], "o", 1) == 0)

307 
ty≥
 = 
DISTRIBUTE_OUT
;

310 
vty_out
 (
vty
, "distributeÜist direction must be [in|out]%s",

311 
VTY_NEWLINE
);

312  
	gCMD_WARNING
;

316 
di°ribuã_li°_£t
 (
NULL
, 
ty≥
, 
¨gv
[0]);

318  
	gCMD_SUCCESS
;

321 
ALIAS
 (
di°ribuã_li°_Æl
,

322 
ùv6_di°ribuã_li°_Æl_cmd
,

329 
DEFUN
 (
no_di°ribuã_li°_Æl
,

330 
no_di°ribuã_li°_Æl_cmd
,

332 
NO_STR


338 
	gªt
;

339 
di°ribuã_ty≥
 
	gty≥
;

342 i‡(
°∫cmp
 (
¨gv
[1], "i", 1) == 0)

343 
ty≥
 = 
DISTRIBUTE_IN
;

344 i‡(
°∫cmp
 (
¨gv
[1], "o", 1) == 0)

345 
ty≥
 = 
DISTRIBUTE_OUT
;

348 
vty_out
 (
vty
, "distributeÜist direction must be [in|out]%s",

349 
VTY_NEWLINE
);

350  
	gCMD_WARNING
;

353 
	gªt
 = 
di°ribuã_li°_un£t
 (
NULL
, 
ty≥
, 
¨gv
[0]);

354 i‡(! 
	gªt
)

356 
vty_out
 (
vty
, "di°ribuãÜi° d€¢'àexi°%s", 
VTY_NEWLINE
);

357  
	gCMD_WARNING
;

359  
	gCMD_SUCCESS
;

362 
ALIAS
 (
no_di°ribuã_li°_Æl
,

363 
no_ùv6_di°ribuã_li°_Æl_cmd
,

365 
NO_STR


371 
DEFUN
 (
di°ribuã_li°
,

372 
di°ribuã_li°_cmd
,

380 
di°ribuã_ty≥
 
	gty≥
;

383 i‡(
°∫cmp
 (
¨gv
[1], "i", 1) == 0)

384 
ty≥
 = 
DISTRIBUTE_IN
;

385 i‡(
°∫cmp
 (
¨gv
[1], "o", 1) == 0)

386 
ty≥
 = 
DISTRIBUTE_OUT
;

389 
vty_out
 (
vty
, "di°ribuãÜi° dúe˘i⁄ mu° bê[ö|out]%s", 
VTY_NEWLINE
);

390  
	gCMD_WARNING
;

394 
di°ribuã_li°_£t
 (
¨gv
[2], 
ty≥
,árgv[0]);

396  
	gCMD_SUCCESS
;

399 
ALIAS
 (
di°ribuã_li°
,

400 
ùv6_di°ribuã_li°_cmd
,

408 
DEFUN
 (
no_di°ribuã_li°
, 
no_di°ribuã_li°_cmd
,

410 
NO_STR


417 
	gªt
;

418 
di°ribuã_ty≥
 
	gty≥
;

421 i‡(
°∫cmp
 (
¨gv
[1], "i", 1) == 0)

422 
ty≥
 = 
DISTRIBUTE_IN
;

423 i‡(
°∫cmp
 (
¨gv
[1], "o", 1) == 0)

424 
ty≥
 = 
DISTRIBUTE_OUT
;

427 
vty_out
 (
vty
, "di°ribuãÜi° dúe˘i⁄ mu° bê[ö|out]%s", 
VTY_NEWLINE
);

428  
	gCMD_WARNING
;

431 
	gªt
 = 
di°ribuã_li°_un£t
 (
¨gv
[2], 
ty≥
,árgv[0]);

432 i‡(! 
	gªt
)

434 
vty_out
 (
vty
, "di°ribuãÜi° d€¢'àexi°%s", 
VTY_NEWLINE
);

435  
	gCMD_WARNING
;

437  
	gCMD_SUCCESS
;

440 
ALIAS
 (
no_di°ribuã_li°
, 
no_ùv6_di°ribuã_li°_cmd
,

442 
NO_STR


449 
DEFUN
 (
di°ribuã_li°_¥efix_Æl
,

450 
di°ribuã_li°_¥efix_Æl_cmd
,

458 
di°ribuã_ty≥
 
	gty≥
;

461 i‡(
°∫cmp
 (
¨gv
[1], "i", 1) == 0)

462 
ty≥
 = 
DISTRIBUTE_IN
;

463 i‡(
°∫cmp
 (
¨gv
[1], "o", 1) == 0)

464 
ty≥
 = 
DISTRIBUTE_OUT
;

467 
vty_out
 (
vty
, "distributeÜist direction must be [in|out]%s",

468 
VTY_NEWLINE
);

469  
	gCMD_WARNING
;

473 
di°ribuã_li°_¥efix_£t
 (
NULL
, 
ty≥
, 
¨gv
[0]);

475  
	gCMD_SUCCESS
;

478 
ALIAS
 (
di°ribuã_li°_¥efix_Æl
,

479 
ùv6_di°ribuã_li°_¥efix_Æl_cmd
,

487 
DEFUN
 (
no_di°ribuã_li°_¥efix_Æl
,

488 
no_di°ribuã_li°_¥efix_Æl_cmd
,

490 
NO_STR


497 
	gªt
;

498 
di°ribuã_ty≥
 
	gty≥
;

501 i‡(
°∫cmp
 (
¨gv
[1], "i", 1) == 0)

502 
ty≥
 = 
DISTRIBUTE_IN
;

503 i‡(
°∫cmp
 (
¨gv
[1], "o", 1) == 0)

504 
ty≥
 = 
DISTRIBUTE_OUT
;

507 
vty_out
 (
vty
, "distributeÜist direction must be [in|out]%s",

508 
VTY_NEWLINE
);

509  
	gCMD_WARNING
;

512 
	gªt
 = 
di°ribuã_li°_¥efix_un£t
 (
NULL
, 
ty≥
, 
¨gv
[0]);

513 i‡(! 
	gªt
)

515 
vty_out
 (
vty
, "di°ribuãÜi° d€¢'àexi°%s", 
VTY_NEWLINE
);

516  
	gCMD_WARNING
;

518  
	gCMD_SUCCESS
;

521 
ALIAS
 (
no_di°ribuã_li°_¥efix_Æl
,

522 
no_ùv6_di°ribuã_li°_¥efix_Æl_cmd
,

524 
NO_STR


531 
DEFUN
 (
di°ribuã_li°_¥efix
, 
di°ribuã_li°_¥efix_cmd
,

540 
di°ribuã_ty≥
 
	gty≥
;

543 i‡(
°∫cmp
 (
¨gv
[1], "i", 1) == 0)

544 
ty≥
 = 
DISTRIBUTE_IN
;

545 i‡(
°∫cmp
 (
¨gv
[1], "o", 1) == 0)

546 
ty≥
 = 
DISTRIBUTE_OUT
;

549 
vty_out
 (
vty
, "distributeÜist direction must be [in|out]%s",

550 
VTY_NEWLINE
);

551  
	gCMD_WARNING
;

555 
di°ribuã_li°_¥efix_£t
 (
¨gv
[2], 
ty≥
,árgv[0]);

557  
	gCMD_SUCCESS
;

560 
ALIAS
 (
di°ribuã_li°_¥efix
, 
ùv6_di°ribuã_li°_¥efix_cmd
,

569 
DEFUN
 (
no_di°ribuã_li°_¥efix
, 
no_di°ribuã_li°_¥efix_cmd
,

571 
NO_STR


579 
	gªt
;

580 
di°ribuã_ty≥
 
	gty≥
;

583 i‡(
°∫cmp
 (
¨gv
[1], "i", 1) == 0)

584 
ty≥
 = 
DISTRIBUTE_IN
;

585 i‡(
°∫cmp
 (
¨gv
[1], "o", 1) == 0)

586 
ty≥
 = 
DISTRIBUTE_OUT
;

589 
vty_out
 (
vty
, "distributeÜist direction must be [in|out]%s",

590 
VTY_NEWLINE
);

591  
	gCMD_WARNING
;

594 
	gªt
 = 
di°ribuã_li°_¥efix_un£t
 (
¨gv
[2], 
ty≥
,árgv[0]);

595 i‡(! 
	gªt
)

597 
vty_out
 (
vty
, "di°ribuãÜi° d€¢'àexi°%s", 
VTY_NEWLINE
);

598  
	gCMD_WARNING
;

600  
	gCMD_SUCCESS
;

603 
ALIAS
 (
no_di°ribuã_li°_¥efix
, 
no_ùv6_di°ribuã_li°_¥efix_cmd
,

605 
NO_STR


614 
	$c⁄fig_show_di°ribuã
 (
vty
 *vty)

616 
i
;

617 
hash_backë
 *
mp
;

618 
di°ribuã
 *
di°
;

621 
di°
 = 
	`di°ribuã_lookup
 (
NULL
);

622 i‡(
di°
 && (di°->
li°
[
DISTRIBUTE_OUT
] || di°->
¥efix
[DISTRIBUTE_OUT]))

624 
	`vty_out
 (
vty
, " Outgoing update filterÜist foráll interface is");

625 i‡(
di°
->
li°
[
DISTRIBUTE_OUT
])

626 
	`vty_out
 (
vty
, " %s", 
di°
->
li°
[
DISTRIBUTE_OUT
]);

627 i‡(
di°
->
¥efix
[
DISTRIBUTE_OUT
])

628 
	`vty_out
 (
vty
, "%s (prefix-list) %s",

629 
di°
->
li°
[
DISTRIBUTE_OUT
] ? "," : "",

630 
di°
->
¥efix
[
DISTRIBUTE_OUT
]);

631 
	`vty_out
 (
vty
, "%s", 
VTY_NEWLINE
);

634 
	`vty_out
 (
vty
, " Outgoög upd©êfûã∏li° f‹áŒ i¡îÁ˚ i†nŸ së%s", 
VTY_NEWLINE
);

636 
i
 = 0; i < 
di°hash
->
size
; i++)

637 
mp
 = 
di°hash
->
ödex
[
i
]; mp; m∞mp->
√xt
)

639 
di°
 = 
mp
->
d©a
;

640 i‡(
di°
->
i‚ame
)

641 i‡(
di°
->
li°
[
DISTRIBUTE_OUT
] || di°->
¥efix
[DISTRIBUTE_OUT])

643 
	`vty_out
 (
vty
, " %†fûãªd by", 
di°
->
i‚ame
);

644 i‡(
di°
->
li°
[
DISTRIBUTE_OUT
])

645 
	`vty_out
 (
vty
, " %s", 
di°
->
li°
[
DISTRIBUTE_OUT
]);

646 i‡(
di°
->
¥efix
[
DISTRIBUTE_OUT
])

647 
	`vty_out
 (
vty
, "%s (prefix-list) %s",

648 
di°
->
li°
[
DISTRIBUTE_OUT
] ? "," : "",

649 
di°
->
¥efix
[
DISTRIBUTE_OUT
]);

650 
	`vty_out
 (
vty
, "%s", 
VTY_NEWLINE
);

656 
di°
 = 
	`di°ribuã_lookup
 (
NULL
);

657 i‡(
di°
 && (di°->
li°
[
DISTRIBUTE_IN
] || di°->
¥efix
[DISTRIBUTE_IN]))

659 
	`vty_out
 (
vty
, " Incoming update filterÜist foráll interface is");

660 i‡(
di°
->
li°
[
DISTRIBUTE_IN
])

661 
	`vty_out
 (
vty
, " %s", 
di°
->
li°
[
DISTRIBUTE_IN
]);

662 i‡(
di°
->
¥efix
[
DISTRIBUTE_IN
])

663 
	`vty_out
 (
vty
, "%s (prefix-list) %s",

664 
di°
->
li°
[
DISTRIBUTE_IN
] ? "," : "",

665 
di°
->
¥efix
[
DISTRIBUTE_IN
]);

666 
	`vty_out
 (
vty
, "%s", 
VTY_NEWLINE
);

669 
	`vty_out
 (
vty
, " Incomög upd©êfûã∏li° f‹áŒ i¡îÁ˚ i†nŸ së%s", 
VTY_NEWLINE
);

671 
i
 = 0; i < 
di°hash
->
size
; i++)

672 
mp
 = 
di°hash
->
ödex
[
i
]; mp; m∞mp->
√xt
)

674 
di°
 = 
mp
->
d©a
;

675 i‡(
di°
->
i‚ame
)

676 i‡(
di°
->
li°
[
DISTRIBUTE_IN
] || di°->
¥efix
[DISTRIBUTE_IN])

678 
	`vty_out
 (
vty
, " %†fûãªd by", 
di°
->
i‚ame
);

679 i‡(
di°
->
li°
[
DISTRIBUTE_IN
])

680 
	`vty_out
 (
vty
, " %s", 
di°
->
li°
[
DISTRIBUTE_IN
]);

681 i‡(
di°
->
¥efix
[
DISTRIBUTE_IN
])

682 
	`vty_out
 (
vty
, "%s (prefix-list) %s",

683 
di°
->
li°
[
DISTRIBUTE_IN
] ? "," : "",

684 
di°
->
¥efix
[
DISTRIBUTE_IN
]);

685 
	`vty_out
 (
vty
, "%s", 
VTY_NEWLINE
);

689 
	}
}

693 
	$c⁄fig_wrôe_di°ribuã
 (
vty
 *vty)

695 
i
;

696 
hash_backë
 *
mp
;

697 
wrôe
 = 0;

699 
i
 = 0; i < 
di°hash
->
size
; i++)

700 
mp
 = 
di°hash
->
ödex
[
i
]; mp; m∞mp->
√xt
)

702 
di°ribuã
 *
di°
;

704 
di°
 = 
mp
->
d©a
;

706 i‡(
di°
->
li°
[
DISTRIBUTE_IN
])

708 
	`vty_out
 (
vty
, " distribute-list %s in %s%s",

709 
di°
->
li°
[
DISTRIBUTE_IN
],

710 
di°
->
i‚ame
 ? dist->ifname : "",

711 
VTY_NEWLINE
);

712 
wrôe
++;

715 i‡(
di°
->
li°
[
DISTRIBUTE_OUT
])

717 
	`vty_out
 (
vty
, " distribute-list %s out %s%s",

719 
di°
->
li°
[
DISTRIBUTE_OUT
],

720 
di°
->
i‚ame
 ? dist->ifname : "",

721 
VTY_NEWLINE
);

722 
wrôe
++;

725 i‡(
di°
->
¥efix
[
DISTRIBUTE_IN
])

727 
	`vty_out
 (
vty
, " distribute-listÖrefix %s in %s%s",

728 
di°
->
¥efix
[
DISTRIBUTE_IN
],

729 
di°
->
i‚ame
 ? dist->ifname : "",

730 
VTY_NEWLINE
);

731 
wrôe
++;

734 i‡(
di°
->
¥efix
[
DISTRIBUTE_OUT
])

736 
	`vty_out
 (
vty
, " distribute-listÖrefix %s out %s%s",

737 
di°
->
¥efix
[
DISTRIBUTE_OUT
],

738 
di°
->
i‚ame
 ? dist->ifname : "",

739 
VTY_NEWLINE
);

740 
wrôe
++;

743  
wrôe
;

744 
	}
}

748 
	$di°ribuã_li°_ª£t
 ()

750 
	`hash_˛ón
 (
di°hash
, ((*Ë(*)Ë
di°ribuã_‰ì
);

751 
	}
}

755 
	$di°ribuã_li°_öô
 (
node
)

757 
di°hash
 = 
	`hash_¸óã
 (
di°ribuã_hash_make
,

758 ((*Ë(c⁄° *, c⁄° *)Ë
di°ribuã_cmp
);

760 if(
node
==
RIP_NODE
) {

761 
	`ö°Æl_ñemít
 (
node
, &
di°ribuã_li°_Æl_cmd
);

762 
	`ö°Æl_ñemít
 (
node
, &
no_di°ribuã_li°_Æl_cmd
);

763 
	`ö°Æl_ñemít
 (
node
, &
di°ribuã_li°_cmd
);

764 
	`ö°Æl_ñemít
 (
node
, &
no_di°ribuã_li°_cmd
);

765 
	`ö°Æl_ñemít
 (
node
, &
di°ribuã_li°_¥efix_Æl_cmd
);

766 
	`ö°Æl_ñemít
 (
node
, &
no_di°ribuã_li°_¥efix_Æl_cmd
);

767 
	`ö°Æl_ñemít
 (
node
, &
di°ribuã_li°_¥efix_cmd
);

768 
	`ö°Æl_ñemít
 (
node
, &
no_di°ribuã_li°_¥efix_cmd
);

769 } i‡(
node
 =
RIPNG_NODE
 ||Çodê=
BABEL_NODE
) {

773 
	`ö°Æl_ñemít
 (
node
, &
ùv6_di°ribuã_li°_Æl_cmd
);

774 
	`ö°Æl_ñemít
 (
node
, &
no_ùv6_di°ribuã_li°_Æl_cmd
);

775 
	`ö°Æl_ñemít
 (
node
, &
ùv6_di°ribuã_li°_cmd
);

776 
	`ö°Æl_ñemít
 (
node
, &
no_ùv6_di°ribuã_li°_cmd
);

777 
	`ö°Æl_ñemít
 (
node
, &
ùv6_di°ribuã_li°_¥efix_Æl_cmd
);

778 
	`ö°Æl_ñemít
 (
node
, &
no_ùv6_di°ribuã_li°_¥efix_Æl_cmd
);

779 
	`ö°Æl_ñemít
 (
node
, &
ùv6_di°ribuã_li°_¥efix_cmd
);

780 
	`ö°Æl_ñemít
 (
node
, &
no_ùv6_di°ribuã_li°_¥efix_cmd
);

782 
	}
}

	@distribute.h

22 #i‚de‡
_ZEBRA_DISTRIBUTE_H


23 
	#_ZEBRA_DISTRIBUTE_H


	)

25 
	~<zebø.h
>

26 
	~"if.h
"

29 
	edi°ribuã_ty≥


31 
	mDISTRIBUTE_IN
,

32 
	mDISTRIBUTE_OUT
,

33 
	mDISTRIBUTE_MAX


36 
	sdi°ribuã


39 *
	mi‚ame
;

42 *
	mli°
[
DISTRIBUTE_MAX
];

45 *
	m¥efix
[
DISTRIBUTE_MAX
];

49 
di°ribuã_li°_öô
 ();

50 
di°ribuã_li°_ª£t
 ();

51 
di°ribuã_li°_add_hook
 ((*Ë(
di°ribuã
 *));

52 
	`di°ribuã_li°_dñëe_hook
 ((*Ë(
di°ribuã
 *));

53 
di°ribuã
 *
	`di°ribuã_lookup
 (const *);

54 
	`c⁄fig_wrôe_di°ribuã
 (
vty
 *);

55 
	`c⁄fig_show_di°ribuã
 (
vty
 *);

57 
fûãr_ty≥
 
	`di°ribuã_≠∂y_ö
 (
öãrÁ˚
 *, 
¥efix
 *);

58 
fûãr_ty≥
 
	`di°ribuã_≠∂y_out
 (
öãrÁ˚
 *, 
¥efix
 *);

	@filter.c

22 
	~<zebø.h
>

24 
	~"¥efix.h
"

25 
	~"fûãr.h
"

26 
	~"mem‹y.h
"

27 
	~"comm™d.h
"

28 
	~"sockuni⁄.h
"

29 
	~"buf„r.h
"

30 
	~"log.h
"

32 
	sfûãr_cisco


35 
	mexãnded
;

36 
ö_addr
 
	maddr
;

37 
ö_addr
 
	maddr_mask
;

38 
ö_addr
 
	mmask
;

39 
ö_addr
 
	mmask_mask
;

42 
	sfûãr_zebø


45 
	mexa˘
;

48 
¥efix
 
	m¥efix
;

52 
	sfûãr


55 
fûãr
 *
	m√xt
;

56 
fûãr
 *
	m¥ev
;

59 
fûãr_ty≥
 
	mty≥
;

62 
	mcisco
;

66 
fûãr_cisco
 
	mcfûãr
;

67 
fûãr_zebø
 
	mzfûãr
;

68 } 
	mu
;

72 
	sac˚ss_li°_li°


74 
ac˚ss_li°
 *
	mhód
;

75 
ac˚ss_li°
 *
	mèû
;

79 
	sac˚ss_ma°î


82 
ac˚ss_li°_li°
 
	mnum
;

85 
ac˚ss_li°_li°
 
	m°r
;

88 (*
	madd_hook
Ë(
	mac˚ss_li°
 *);

91 (*
	mdñëe_hook
Ë(
	mac˚ss_li°
 *);

95 
ac˚ss_ma°î
 
	gac˚ss_ma°î_ùv4
 =

97 {
NULL
, NULL},

98 {
NULL
, NULL},

99 
NULL
,

100 
NULL
,

103 #ifde‡
HAVE_IPV6


105 
ac˚ss_ma°î
 
	gac˚ss_ma°î_ùv6
 =

107 {
NULL
, NULL},

108 {
NULL
, NULL},

109 
NULL
,

110 
NULL
,

114 
ac˚ss_ma°î
 *

115 
	$ac˚ss_ma°î_gë
 (
afi_t
 
afi
)

117 i‡(
afi
 =
AFI_IP
)

118  &
ac˚ss_ma°î_ùv4
;

119 #ifde‡
HAVE_IPV6


120 i‡(
afi
 =
AFI_IP6
)

121  &
ac˚ss_ma°î_ùv6
;

123  
NULL
;

124 
	}
}

127 
fûãr
 *

128 
	$fûãr_√w
 ()

130  (
fûãr
 *Ë
	`XCALLOC
 (
MTYPE_ACCESS_FILTER
,

131  (
fûãr
));

132 
	}
}

135 
	$fûãr_‰ì
 (
fûãr
 *filter)

137 
	`XFREE
 (
MTYPE_ACCESS_FILTER
, 
fûãr
);

138 
	}
}

142 
	$fûãr_ty≥_°r
 (
fûãr
 *filter)

144 
fûãr
->
ty≥
)

146 
FILTER_PERMIT
:

149 
FILTER_DENY
:

152 
FILTER_DYNAMIC
:

159 
	}
}

163 
	$fûãr_m©ch_cisco
 (
fûãr
 *
mfûãr
, 
¥efix
 *
p
)

165 
fûãr_cisco
 *
fûãr
;

166 
ö_addr
 
mask
;

167 
u_öt32_t
 
check_addr
;

168 
u_öt32_t
 
check_mask
;

170 
fûãr
 = &
mfûãr
->
u
.
cfûãr
;

171 
check_addr
 = 
p
->
u
.
¥efix4
.
s_addr
 & ~
fûãr
->
addr_mask
.s_addr;

173 i‡(
fûãr
->
exãnded
)

175 
	`maskÀn2ù
 (
p
->
¥efixÀn
, &
mask
);

176 
check_mask
 = 
mask
.
s_addr
 & ~
fûãr
->
mask_mask
.s_addr;

178 i‡(
	`memcmp
 (&
check_addr
, &
fûãr
->
addr
.
s_addr
, 4) == 0

179 && 
	`memcmp
 (&
check_mask
, &
fûãr
->
mask
.
s_addr
, 4) == 0)

182 i‡(
	`memcmp
 (&
check_addr
, &
fûãr
->
addr
.
s_addr
, 4) == 0)

186 
	}
}

190 
	$fûãr_m©ch_zebø
 (
fûãr
 *
mfûãr
, 
¥efix
 *
p
)

192 
fûãr_zebø
 *
fûãr
;

194 
fûãr
 = &
mfûãr
->
u
.
zfûãr
;

196 i‡(
fûãr
->
¥efix
.
Ámûy
 =
p
->family)

198 i‡(
fûãr
->
exa˘
)

200 i‡(
fûãr
->
¥efix
.
¥efixÀn
 =
p
->prefixlen)

201  
	`¥efix_m©ch
 (&
fûãr
->
¥efix
, 
p
);

206  
	`¥efix_m©ch
 (&
fûãr
->
¥efix
, 
p
);

210 
	}
}

213 
ac˚ss_li°
 *

214 
	$ac˚ss_li°_√w
 ()

216  (
ac˚ss_li°
 *Ë
	`XCALLOC
 (
MTYPE_ACCESS_LIST
,

217  (
ac˚ss_li°
));

218 
	}
}

222 
	$ac˚ss_li°_‰ì
 (
ac˚ss_li°
 *
ac˚ss
)

224 
	`XFREE
 (
MTYPE_ACCESS_LIST
, 
ac˚ss
);

225 
	}
}

229 
	$ac˚ss_li°_dñëe
 (
ac˚ss_li°
 *
ac˚ss
)

231 
fûãr
 *filter;

232 
fûãr
 *
√xt
;

233 
ac˚ss_li°_li°
 *
li°
;

234 
ac˚ss_ma°î
 *
ma°î
;

236 
fûãr
 = 
ac˚ss
->
hód
; fûãr; fûã∏
√xt
)

238 
√xt
 = 
fûãr
->next;

239 
	`fûãr_‰ì
 (
fûãr
);

242 
ma°î
 = 
ac˚ss
->master;

244 i‡(
ac˚ss
->
ty≥
 =
ACCESS_TYPE_NUMBER
)

245 
li°
 = &
ma°î
->
num
;

247 
li°
 = &
ma°î
->
°r
;

249 i‡(
ac˚ss
->
√xt
)

250 
ac˚ss
->
√xt
->
¥ev
 =áccess->prev;

252 
li°
->
èû
 = 
ac˚ss
->
¥ev
;

254 i‡(
ac˚ss
->
¥ev
)

255 
ac˚ss
->
¥ev
->
√xt
 =áccess->next;

257 
li°
->
hód
 = 
ac˚ss
->
√xt
;

259 i‡(
ac˚ss
->
«me
)

260 
	`XFREE
 (
MTYPE_ACCESS_LIST_STR
, 
ac˚ss
->
«me
);

262 i‡(
ac˚ss
->
ªm¨k
)

263 
	`XFREE
 (
MTYPE_TMP
, 
ac˚ss
->
ªm¨k
);

265 
	`ac˚ss_li°_‰ì
 (
ac˚ss
);

266 
	}
}

270 
ac˚ss_li°
 *

271 
	$ac˚ss_li°_ö£π
 (
afi_t
 
afi
, c⁄° *
«me
)

273 
i
;

274 
numbî
;

275 
ac˚ss_li°
 *
ac˚ss
;

276 
ac˚ss_li°
 *
poöt
;

277 
ac˚ss_li°_li°
 *
Æi°
;

278 
ac˚ss_ma°î
 *
ma°î
;

280 
ma°î
 = 
	`ac˚ss_ma°î_gë
 (
afi
);

281 i‡(
ma°î
 =
NULL
)

282  
NULL
;

285 
ac˚ss
 = 
	`ac˚ss_li°_√w
 ();

286 
ac˚ss
->
«me
 = 
	`XSTRDUP
 (
MTYPE_ACCESS_LIST_STR
,Çame);

287 
ac˚ss
->
ma°î
 = master;

291 
numbî
 = 0, 
i
 = 0; i < 
	`°æí
 (
«me
); i++)

293 i‡(
	`isdigô
 ((Ë
«me
[
i
]))

294 
numbî
 = (numbî * 10Ë+ (
«me
[
i
] - '0');

300 i‡(
i
 =
	`°æí
 (
«me
))

302 
ac˚ss
->
ty≥
 = 
ACCESS_TYPE_NUMBER
;

305 
Æi°
 = &
ma°î
->
num
;

307 
poöt
 = 
Æi°
->
hód
;Öoöt;Öoöàpoöt->
√xt
)

308 i‡(
	`©ﬁ
 (
poöt
->
«me
Ë>
numbî
)

313 
ac˚ss
->
ty≥
 = 
ACCESS_TYPE_STRING
;

316 
Æi°
 = &
ma°î
->
°r
;

319 
poöt
 = 
Æi°
->
hód
;Öoöt;Öoöàpoöt->
√xt
)

320 i‡(
	`°rcmp
 (
poöt
->
«me
,Çame) >= 0)

325 i‡(
Æi°
->
hód
 =
NULL
)

327 
Æi°
->
hód
 =áli°->
èû
 = 
ac˚ss
;

328  
ac˚ss
;

332 i‡(
poöt
 =
NULL
)

334 
ac˚ss
->
¥ev
 = 
Æi°
->
èû
;

335 
Æi°
->
èû
->
√xt
 = 
ac˚ss
;

336 
Æi°
->
èû
 = 
ac˚ss
;

337  
ac˚ss
;

341 i‡(
poöt
 =
Æi°
->
hód
)

343 
ac˚ss
->
√xt
 = 
Æi°
->
hód
;

344 
Æi°
->
hód
->
¥ev
 = 
ac˚ss
;

345 
Æi°
->
hód
 = 
ac˚ss
;

346  
ac˚ss
;

350 
ac˚ss
->
√xt
 = 
poöt
;

351 
ac˚ss
->
¥ev
 = 
poöt
->prev;

353 i‡(
poöt
->
¥ev
)

354 
poöt
->
¥ev
->
√xt
 = 
ac˚ss
;

355 
poöt
->
¥ev
 = 
ac˚ss
;

357  
ac˚ss
;

358 
	}
}

361 
ac˚ss_li°
 *

362 
	$ac˚ss_li°_lookup
 (
afi_t
 
afi
, c⁄° *
«me
)

364 
ac˚ss_li°
 *
ac˚ss
;

365 
ac˚ss_ma°î
 *
ma°î
;

367 i‡(
«me
 =
NULL
)

368  
NULL
;

370 
ma°î
 = 
	`ac˚ss_ma°î_gë
 (
afi
);

371 i‡(
ma°î
 =
NULL
)

372  
NULL
;

374 
ac˚ss
 = 
ma°î
->
num
.
hód
;ác˚ss;ác˚s†ac˚ss->
√xt
)

375 i‡(
	`°rcmp
 (
ac˚ss
->
«me
,Çame) == 0)

376  
ac˚ss
;

378 
ac˚ss
 = 
ma°î
->
°r
.
hód
;ác˚ss;ác˚s†ac˚ss->
√xt
)

379 i‡(
	`°rcmp
 (
ac˚ss
->
«me
,Çame) == 0)

380  
ac˚ss
;

382  
NULL
;

383 
	}
}

387 
ac˚ss_li°
 *

388 
	$ac˚ss_li°_gë
 (
afi_t
 
afi
, c⁄° *
«me
)

390 
ac˚ss_li°
 *
ac˚ss
;

392 
ac˚ss
 = 
	`ac˚ss_li°_lookup
 (
afi
, 
«me
);

393 i‡(
ac˚ss
 =
NULL
)

394 
ac˚ss
 = 
	`ac˚ss_li°_ö£π
 (
afi
, 
«me
);

395  
ac˚ss
;

396 
	}
}

399 
fûãr_ty≥


400 
	$ac˚ss_li°_≠∂y
 (
ac˚ss_li°
 *
ac˚ss
, *
obje˘
)

402 
fûãr
 *filter;

403 
¥efix
 *
p
;

405 
p
 = (
¥efix
 *Ë
obje˘
;

407 i‡(
ac˚ss
 =
NULL
)

408  
FILTER_DENY
;

410 
fûãr
 = 
ac˚ss
->
hód
; fûãr; fûã∏fûãr->
√xt
)

412 i‡(
fûãr
->
cisco
)

414 i‡(
	`fûãr_m©ch_cisco
 (
fûãr
, 
p
))

415  
fûãr
->
ty≥
;

419 i‡(
	`fûãr_m©ch_zebø
 (
fûãr
, 
p
))

420  
fûãr
->
ty≥
;

424  
FILTER_DENY
;

425 
	}
}

429 
ac˚ss_li°_add_hook
 ((*
func
Ë(
ac˚ss_li°
 *
ac˚ss
))

431 
ac˚ss_ma°î_ùv4
.
add_hook
 = 
func
;

432 #ifde‡
HAVE_IPV6


433 
ac˚ss_ma°î_ùv6
.
add_hook
 = 
func
;

435 
	}
}

439 
ac˚ss_li°_dñëe_hook
 ((*
func
Ë(
ac˚ss_li°
 *
ac˚ss
))

441 
ac˚ss_ma°î_ùv4
.
dñëe_hook
 = 
func
;

442 #ifde‡
HAVE_IPV6


443 
ac˚ss_ma°î_ùv6
.
dñëe_hook
 = 
func
;

445 
	}
}

449 
	$ac˚ss_li°_fûãr_add
 (
ac˚ss_li°
 *
ac˚ss
, 
fûãr
 *filter)

451 
fûãr
->
√xt
 = 
NULL
;

452 
fûãr
->
¥ev
 = 
ac˚ss
->
èû
;

454 i‡(
ac˚ss
->
èû
)

455 
ac˚ss
->
èû
->
√xt
 = 
fûãr
;

457 
ac˚ss
->
hód
 = 
fûãr
;

458 
ac˚ss
->
èû
 = 
fûãr
;

461 i‡(
ac˚ss
->
ma°î
->
add_hook
)

462 (*
ac˚ss
->
ma°î
->
add_hook
) (access);

463 
	}
}

467 
	$ac˚ss_li°_em±y
 (
ac˚ss_li°
 *
ac˚ss
)

469 i‡(
ac˚ss
->
hód
 =
NULL
 &&ác˚ss->
èû
 == NULL)

473 
	}
}

478 
	$ac˚ss_li°_fûãr_dñëe
 (
ac˚ss_li°
 *
ac˚ss
, 
fûãr
 *filter)

480 
ac˚ss_ma°î
 *
ma°î
;

482 
ma°î
 = 
ac˚ss
->master;

484 i‡(
fûãr
->
√xt
)

485 
fûãr
->
√xt
->
¥ev
 = filter->prev;

487 
ac˚ss
->
èû
 = 
fûãr
->
¥ev
;

489 i‡(
fûãr
->
¥ev
)

490 
fûãr
->
¥ev
->
√xt
 = filter->next;

492 
ac˚ss
->
hód
 = 
fûãr
->
√xt
;

494 
	`fûãr_‰ì
 (
fûãr
);

497 i‡(
	`ac˚ss_li°_em±y
 (
ac˚ss
))

498 
	`ac˚ss_li°_dñëe
 (
ac˚ss
);

501 i‡(
ma°î
->
dñëe_hook
)

502 (*
ma°î
->
dñëe_hook
Ë(
ac˚ss
);

503 
	}
}

517 
fûãr
 *

518 
	$fûãr_lookup_cisco
 (
ac˚ss_li°
 *
ac˚ss
, 
fûãr
 *
m√w
)

520 
fûãr
 *
mfûãr
;

521 
fûãr_cisco
 *
fûãr
;

522 
fûãr_cisco
 *
√w
;

524 
√w
 = &
m√w
->
u
.
cfûãr
;

526 
mfûãr
 = 
ac˚ss
->
hód
; mfûãr; mfûã∏mfûãr->
√xt
)

528 
fûãr
 = &
mfûãr
->
u
.
cfûãr
;

530 i‡(
fûãr
->
exãnded
)

532 i‡(
mfûãr
->
ty≥
 =
m√w
->type

533 && 
fûãr
->
addr
.
s_addr
 =
√w
->addr.s_addr

534 && 
fûãr
->
addr_mask
.
s_addr
 =
√w
->addr_mask.s_addr

535 && 
fûãr
->
mask
.
s_addr
 =
√w
->mask.s_addr

536 && 
fûãr
->
mask_mask
.
s_addr
 =
√w
->mask_mask.s_addr)

537  
mfûãr
;

541 i‡(
mfûãr
->
ty≥
 =
m√w
->type

542 && 
fûãr
->
addr
.
s_addr
 =
√w
->addr.s_addr

543 && 
fûãr
->
addr_mask
.
s_addr
 =
√w
->addr_mask.s_addr)

544  
mfûãr
;

548  
NULL
;

549 
	}
}

551 
fûãr
 *

552 
	$fûãr_lookup_zebø
 (
ac˚ss_li°
 *
ac˚ss
, 
fûãr
 *
m√w
)

554 
fûãr
 *
mfûãr
;

555 
fûãr_zebø
 *
fûãr
;

556 
fûãr_zebø
 *
√w
;

558 
√w
 = &
m√w
->
u
.
zfûãr
;

560 
mfûãr
 = 
ac˚ss
->
hód
; mfûãr; mfûã∏mfûãr->
√xt
)

562 
fûãr
 = &
mfûãr
->
u
.
zfûãr
;

564 i‡(
fûãr
->
exa˘
 =
√w
->exact

565 && 
mfûãr
->
ty≥
 =
m√w
->type

566 && 
	`¥efix_ßme
 (&
fûãr
->
¥efix
, &
√w
->prefix))

567  
mfûãr
;

569  
NULL
;

570 
	}
}

573 
	$vty_ac˚ss_li°_ªm¨k_un£t
 (
vty
 *vty, 
afi_t
 
afi
, c⁄° *
«me
)

575 
ac˚ss_li°
 *
ac˚ss
;

577 
ac˚ss
 = 
	`ac˚ss_li°_lookup
 (
afi
, 
«me
);

578 i‡(! 
ac˚ss
)

580 
	`vty_out
 (
vty
, "%%ác˚ss-li° %†d€¢'àexi°%s", 
«me
,

581 
VTY_NEWLINE
);

582  
CMD_WARNING
;

585 i‡(
ac˚ss
->
ªm¨k
)

587 
	`XFREE
 (
MTYPE_TMP
, 
ac˚ss
->
ªm¨k
);

588 
ac˚ss
->
ªm¨k
 = 
NULL
;

591 i‡(
ac˚ss
->
hód
 =
NULL
 &&ác˚ss->
èû
 =NULL &&ác˚ss->
ªm¨k
 == NULL)

592 
	`ac˚ss_li°_dñëe
 (
ac˚ss
);

594  
CMD_SUCCESS
;

595 
	}
}

598 
	$fûãr_£t_cisco
 (
vty
 *vty, c⁄° *
«me_°r
, c⁄° *
ty≥_°r
,

599 c⁄° *
addr_°r
, c⁄° *
addr_mask_°r
,

600 c⁄° *
mask_°r
, c⁄° *
mask_mask_°r
,

601 
exãnded
, 
£t
)

603 
ªt
;

604 
fûãr_ty≥
 
ty≥
;

605 
fûãr
 *
mfûãr
;

606 
fûãr_cisco
 *
fûãr
;

607 
ac˚ss_li°
 *
ac˚ss
;

608 
ö_addr
 
addr
;

609 
ö_addr
 
addr_mask
;

610 
ö_addr
 
mask
;

611 
ö_addr
 
mask_mask
;

614 i‡(
	`°∫cmp
 (
ty≥_°r
, "p", 1) == 0)

615 
ty≥
 = 
FILTER_PERMIT
;

616 i‡(
	`°∫cmp
 (
ty≥_°r
, "d", 1) == 0)

617 
ty≥
 = 
FILTER_DENY
;

620 
	`vty_out
 (
vty
, "%% fûã∏ty≥ mu° bê≥rmô o∏díy%s", 
VTY_NEWLINE
);

621  
CMD_WARNING
;

624 
ªt
 = 
	`öë_©⁄
 (
addr_°r
, &
addr
);

625 i‡(
ªt
 <= 0)

627 
	`vty_out
 (
vty
, "%%Inconsistentáddressánd mask%s",

628 
VTY_NEWLINE
);

629  
CMD_WARNING
;

632 
ªt
 = 
	`öë_©⁄
 (
addr_mask_°r
, &
addr_mask
);

633 i‡(
ªt
 <= 0)

635 
	`vty_out
 (
vty
, "%%Inconsistentáddressánd mask%s",

636 
VTY_NEWLINE
);

637  
CMD_WARNING
;

640 i‡(
exãnded
)

642 
ªt
 = 
	`öë_©⁄
 (
mask_°r
, &
mask
);

643 i‡(
ªt
 <= 0)

645 
	`vty_out
 (
vty
, "%%Inconsistentáddressánd mask%s",

646 
VTY_NEWLINE
);

647  
CMD_WARNING
;

650 
ªt
 = 
	`öë_©⁄
 (
mask_mask_°r
, &
mask_mask
);

651 i‡(
ªt
 <= 0)

653 
	`vty_out
 (
vty
, "%%Inconsistentáddressánd mask%s",

654 
VTY_NEWLINE
);

655  
CMD_WARNING
;

659 
mfûãr
 = 
	`fûãr_√w
();

660 
mfûãr
->
ty≥
 =Åype;

661 
mfûãr
->
cisco
 = 1;

662 
fûãr
 = &
mfûãr
->
u
.
cfûãr
;

663 
fûãr
->
exãnded
 =Éxtended;

664 
fûãr
->
addr
.
s_addr
 =áddr.s_add∏& ~
addr_mask
.s_addr;

665 
fûãr
->
addr_mask
.
s_addr
 =áddr_mask.s_addr;

667 i‡(
exãnded
)

669 
fûãr
->
mask
.
s_addr
 = mask.s_add∏& ~
mask_mask
.s_addr;

670 
fûãr
->
mask_mask
.
s_addr
 = mask_mask.s_addr;

674 
ac˚ss
 = 
	`ac˚ss_li°_gë
 (
AFI_IP
, 
«me_°r
);

676 i‡(
£t
)

678 i‡(
	`fûãr_lookup_cisco
 (
ac˚ss
, 
mfûãr
))

679 
	`fûãr_‰ì
 (
mfûãr
);

681 
	`ac˚ss_li°_fûãr_add
 (
ac˚ss
, 
mfûãr
);

685 
fûãr
 *
dñëe_fûãr
;

687 
dñëe_fûãr
 = 
	`fûãr_lookup_cisco
 (
ac˚ss
, 
mfûãr
);

688 i‡(
dñëe_fûãr
)

689 
	`ac˚ss_li°_fûãr_dñëe
 (
ac˚ss
, 
dñëe_fûãr
);

691 
	`fûãr_‰ì
 (
mfûãr
);

694  
CMD_SUCCESS
;

695 
	}
}

698 
DEFUN
 (
ac˚ss_li°_°™d¨d
,

699 
ac˚ss_li°_°™d¨d_cmd
,

709  
fûãr_£t_cisco
 (
vty
, 
¨gv
[0],árgv[1],árgv[2],árgv[3],

710 
NULL
, NULL, 0, 1);

713 
DEFUN
 (
ac˚ss_li°_°™d¨d_nomask
,

714 
ac˚ss_li°_°™d¨d_nomask_cmd
,

723  
fûãr_£t_cisco
 (
vty
, 
¨gv
[0],árgv[1],árgv[2], "0.0.0.0",

724 
NULL
, NULL, 0, 1);

727 
DEFUN
 (
ac˚ss_li°_°™d¨d_ho°
,

728 
ac˚ss_li°_°™d¨d_ho°_cmd
,

738  
fûãr_£t_cisco
 (
vty
, 
¨gv
[0],árgv[1],árgv[2], "0.0.0.0",

739 
NULL
, NULL, 0, 1);

742 
DEFUN
 (
ac˚ss_li°_°™d¨d_™y
,

743 
ac˚ss_li°_°™d¨d_™y_cmd
,

752  
fûãr_£t_cisco
 (
vty
, 
¨gv
[0],árgv[1], "0.0.0.0",

753 "255.255.255.255", 
NULL
, NULL, 0, 1);

756 
DEFUN
 (
no_ac˚ss_li°_°™d¨d
,

757 
no_ac˚ss_li°_°™d¨d_cmd
,

759 
NO_STR


768  
fûãr_£t_cisco
 (
vty
, 
¨gv
[0],árgv[1],árgv[2],árgv[3],

769 
NULL
, NULL, 0, 0);

772 
DEFUN
 (
no_ac˚ss_li°_°™d¨d_nomask
,

773 
no_ac˚ss_li°_°™d¨d_nomask_cmd
,

775 
NO_STR


783  
fûãr_£t_cisco
 (
vty
, 
¨gv
[0],árgv[1],árgv[2], "0.0.0.0",

784 
NULL
, NULL, 0, 0);

787 
DEFUN
 (
no_ac˚ss_li°_°™d¨d_ho°
,

788 
no_ac˚ss_li°_°™d¨d_ho°_cmd
,

790 
NO_STR


799  
fûãr_£t_cisco
 (
vty
, 
¨gv
[0],árgv[1],árgv[2], "0.0.0.0",

800 
NULL
, NULL, 0, 0);

803 
DEFUN
 (
no_ac˚ss_li°_°™d¨d_™y
,

804 
no_ac˚ss_li°_°™d¨d_™y_cmd
,

806 
NO_STR


814  
fûãr_£t_cisco
 (
vty
, 
¨gv
[0],árgv[1], "0.0.0.0",

815 "255.255.255.255", 
NULL
, NULL, 0, 0);

819 
DEFUN
 (
ac˚ss_li°_exãnded
,

820 
ac˚ss_li°_exãnded_cmd
,

833  
fûãr_£t_cisco
 (
vty
, 
¨gv
[0],árgv[1],árgv[2],

834 
¨gv
[3],árgv[4],árgv[5], 1 ,1);

837 
DEFUN
 (
ac˚ss_li°_exãnded_mask_™y
,

838 
ac˚ss_li°_exãnded_mask_™y_cmd
,

850  
fûãr_£t_cisco
 (
vty
, 
¨gv
[0],árgv[1],árgv[2],

851 
¨gv
[3], "0.0.0.0",

855 
DEFUN
 (
ac˚ss_li°_exãnded_™y_mask
,

856 
ac˚ss_li°_exãnded_™y_mask_cmd
,

868  
fûãr_£t_cisco
 (
vty
, 
¨gv
[0],árgv[1], "0.0.0.0",

869 "255.255.255.255", 
¨gv
[2],

870 
¨gv
[3], 1, 1);

873 
DEFUN
 (
ac˚ss_li°_exãnded_™y_™y
,

874 
ac˚ss_li°_exãnded_™y_™y_cmd
,

885  
fûãr_£t_cisco
 (
vty
, 
¨gv
[0],árgv[1], "0.0.0.0",

890 
DEFUN
 (
ac˚ss_li°_exãnded_mask_ho°
,

891 
ac˚ss_li°_exãnded_mask_ho°_cmd
,

904  
fûãr_£t_cisco
 (
vty
, 
¨gv
[0],árgv[1],árgv[2],

905 
¨gv
[3],árgv[4],

909 
DEFUN
 (
ac˚ss_li°_exãnded_ho°_mask
,

910 
ac˚ss_li°_exãnded_ho°_mask_cmd
,

923  
fûãr_£t_cisco
 (
vty
, 
¨gv
[0],árgv[1],árgv[2],

924 "0.0.0.0", 
¨gv
[3],

925 
¨gv
[4], 1, 1);

928 
DEFUN
 (
ac˚ss_li°_exãnded_ho°_ho°
,

929 
ac˚ss_li°_exãnded_ho°_ho°_cmd
,

942  
fûãr_£t_cisco
 (
vty
, 
¨gv
[0],árgv[1],árgv[2],

943 "0.0.0.0", 
¨gv
[3],

947 
DEFUN
 (
ac˚ss_li°_exãnded_™y_ho°
,

948 
ac˚ss_li°_exãnded_™y_ho°_cmd
,

960  
fûãr_£t_cisco
 (
vty
, 
¨gv
[0],árgv[1], "0.0.0.0",

961 "255.255.255.255", 
¨gv
[2],

965 
DEFUN
 (
ac˚ss_li°_exãnded_ho°_™y
,

966 
ac˚ss_li°_exãnded_ho°_™y_cmd
,

978  
fûãr_£t_cisco
 (
vty
, 
¨gv
[0],árgv[1],árgv[2],

983 
DEFUN
 (
no_ac˚ss_li°_exãnded
,

984 
no_ac˚ss_li°_exãnded_cmd
,

986 
NO_STR


998  
fûãr_£t_cisco
 (
vty
, 
¨gv
[0],árgv[1],árgv[2],

999 
¨gv
[3],árgv[4],árgv[5], 1, 0);

1002 
DEFUN
 (
no_ac˚ss_li°_exãnded_mask_™y
,

1003 
no_ac˚ss_li°_exãnded_mask_™y_cmd
,

1005 
NO_STR


1016  
fûãr_£t_cisco
 (
vty
, 
¨gv
[0],árgv[1],árgv[2],

1017 
¨gv
[3], "0.0.0.0",

1021 
DEFUN
 (
no_ac˚ss_li°_exãnded_™y_mask
,

1022 
no_ac˚ss_li°_exãnded_™y_mask_cmd
,

1024 
NO_STR


1035  
fûãr_£t_cisco
 (
vty
, 
¨gv
[0],árgv[1], "0.0.0.0",

1036 "255.255.255.255", 
¨gv
[2],

1037 
¨gv
[3], 1, 0);

1040 
DEFUN
 (
no_ac˚ss_li°_exãnded_™y_™y
,

1041 
no_ac˚ss_li°_exãnded_™y_™y_cmd
,

1043 
NO_STR


1053  
fûãr_£t_cisco
 (
vty
, 
¨gv
[0],árgv[1], "0.0.0.0",

1058 
DEFUN
 (
no_ac˚ss_li°_exãnded_mask_ho°
,

1059 
no_ac˚ss_li°_exãnded_mask_ho°_cmd
,

1061 
NO_STR


1073  
fûãr_£t_cisco
 (
vty
, 
¨gv
[0],árgv[1],árgv[2],

1074 
¨gv
[3],árgv[4],

1078 
DEFUN
 (
no_ac˚ss_li°_exãnded_ho°_mask
,

1079 
no_ac˚ss_li°_exãnded_ho°_mask_cmd
,

1081 
NO_STR


1093  
fûãr_£t_cisco
 (
vty
, 
¨gv
[0],árgv[1],árgv[2],

1094 "0.0.0.0", 
¨gv
[3],

1095 
¨gv
[4], 1, 0);

1098 
DEFUN
 (
no_ac˚ss_li°_exãnded_ho°_ho°
,

1099 
no_ac˚ss_li°_exãnded_ho°_ho°_cmd
,

1101 
NO_STR


1113  
fûãr_£t_cisco
 (
vty
, 
¨gv
[0],árgv[1],árgv[2],

1114 "0.0.0.0", 
¨gv
[3],

1118 
DEFUN
 (
no_ac˚ss_li°_exãnded_™y_ho°
,

1119 
no_ac˚ss_li°_exãnded_™y_ho°_cmd
,

1121 
NO_STR


1132  
fûãr_£t_cisco
 (
vty
, 
¨gv
[0],árgv[1], "0.0.0.0",

1133 "255.255.255.255", 
¨gv
[2],

1137 
DEFUN
 (
no_ac˚ss_li°_exãnded_ho°_™y
,

1138 
no_ac˚ss_li°_exãnded_ho°_™y_cmd
,

1140 
NO_STR


1151  
fûãr_£t_cisco
 (
vty
, 
¨gv
[0],árgv[1],árgv[2],

1157 
	$fûãr_£t_zebø
 (
vty
 *vty, c⁄° *
«me_°r
, c⁄° *
ty≥_°r
,

1158 
afi_t
 
afi
, c⁄° *
¥efix_°r
, 
exa˘
, 
£t
)

1160 
ªt
;

1161 
fûãr_ty≥
 
ty≥
;

1162 
fûãr
 *
mfûãr
;

1163 
fûãr_zebø
 *
fûãr
;

1164 
ac˚ss_li°
 *
ac˚ss
;

1165 
¥efix
 
p
;

1168 i‡(
	`°∫cmp
 (
ty≥_°r
, "p", 1) == 0)

1169 
ty≥
 = 
FILTER_PERMIT
;

1170 i‡(
	`°∫cmp
 (
ty≥_°r
, "d", 1) == 0)

1171 
ty≥
 = 
FILTER_DENY
;

1174 
	`vty_out
 (
vty
, "fûã∏ty≥ mu° bê[≥rmô|díy]%s", 
VTY_NEWLINE
);

1175  
CMD_WARNING
;

1179 i‡(
afi
 =
AFI_IP
)

1181 
ªt
 = 
	`°r2¥efix_ùv4
 (
¥efix_°r
, (
¥efix_ùv4
 *)&
p
);

1182 i‡(
ªt
 <= 0)

1184 
	`vty_out
 (
vty
, "IPáddressÖrefix/prefixlen is malformed%s",

1185 
VTY_NEWLINE
);

1186  
CMD_WARNING
;

1189 #ifde‡
HAVE_IPV6


1190 i‡(
afi
 =
AFI_IP6
)

1192 
ªt
 = 
	`°r2¥efix_ùv6
 (
¥efix_°r
, (
¥efix_ùv6
 *Ë&
p
);

1193 i‡(
ªt
 <= 0)

1195 
	`vty_out
 (
vty
, "IPv6áddressÖrefix/prefixlen is malformed%s",

1196 
VTY_NEWLINE
);

1197  
CMD_WARNING
;

1202  
CMD_WARNING
;

1204 
mfûãr
 = 
	`fûãr_√w
 ();

1205 
mfûãr
->
ty≥
 =Åype;

1206 
fûãr
 = &
mfûãr
->
u
.
zfûãr
;

1207 
	`¥efix_c›y
 (&
fûãr
->
¥efix
, &
p
);

1210 i‡(
exa˘
)

1211 
fûãr
->
exa˘
 = 1;

1214 
ac˚ss
 = 
	`ac˚ss_li°_gë
 (
afi
, 
«me_°r
);

1216 i‡(
£t
)

1218 i‡(
	`fûãr_lookup_zebø
 (
ac˚ss
, 
mfûãr
))

1219 
	`fûãr_‰ì
 (
mfûãr
);

1221 
	`ac˚ss_li°_fûãr_add
 (
ac˚ss
, 
mfûãr
);

1225 
fûãr
 *
dñëe_fûãr
;

1227 
dñëe_fûãr
 = 
	`fûãr_lookup_zebø
 (
ac˚ss
, 
mfûãr
);

1228 i‡(
dñëe_fûãr
)

1229 
	`ac˚ss_li°_fûãr_dñëe
 (
ac˚ss
, 
dñëe_fûãr
);

1231 
	`fûãr_‰ì
 (
mfûãr
);

1234  
CMD_SUCCESS
;

1235 
	}
}

1238 
DEFUN
 (
ac˚ss_li°
,

1239 
ac˚ss_li°_cmd
,

1247  
fûãr_£t_zebø
 (
vty
, 
¨gv
[0],árgv[1], 
AFI_IP
,árgv[2], 0, 1);

1250 
DEFUN
 (
ac˚ss_li°_exa˘
,

1251 
ac˚ss_li°_exa˘_cmd
,

1260  
fûãr_£t_zebø
 (
vty
, 
¨gv
[0],árgv[1], 
AFI_IP
,árgv[2], 1, 1);

1263 
DEFUN
 (
ac˚ss_li°_™y
,

1264 
ac˚ss_li°_™y_cmd
,

1272  
fûãr_£t_zebø
 (
vty
, 
¨gv
[0],árgv[1], 
AFI_IP
, "0.0.0.0/0", 0, 1);

1275 
DEFUN
 (
no_ac˚ss_li°
,

1276 
no_ac˚ss_li°_cmd
,

1278 
NO_STR


1285  
fûãr_£t_zebø
 (
vty
, 
¨gv
[0],árgv[1], 
AFI_IP
,árgv[2], 0, 0);

1288 
DEFUN
 (
no_ac˚ss_li°_exa˘
,

1289 
no_ac˚ss_li°_exa˘_cmd
,

1291 
NO_STR


1299  
fûãr_£t_zebø
 (
vty
, 
¨gv
[0],árgv[1], 
AFI_IP
,árgv[2], 1, 0);

1302 
DEFUN
 (
no_ac˚ss_li°_™y
,

1303 
no_ac˚ss_li°_™y_cmd
,

1305 
NO_STR


1312  
fûãr_£t_zebø
 (
vty
, 
¨gv
[0],árgv[1], 
AFI_IP
, "0.0.0.0/0", 0, 0);

1315 
DEFUN
 (
no_ac˚ss_li°_Æl
,

1316 
no_ac˚ss_li°_Æl_cmd
,

1318 
NO_STR


1326 
ac˚ss_li°
 *
	gac˚ss
;

1327 
ac˚ss_ma°î
 *
	gma°î
;

1330 
	gac˚ss
 = 
ac˚ss_li°_lookup
 (
AFI_IP
, 
¨gv
[0]);

1331 i‡(
	gac˚ss
 =
NULL
)

1333 
vty_out
 (
vty
, "%%ác˚ss-li° %†d€¢'àexi°%s", 
¨gv
[0],

1334 
VTY_NEWLINE
);

1335  
	gCMD_WARNING
;

1338 
	gma°î
 = 
ac˚ss
->
ma°î
;

1341 i‡(
	gma°î
->
	gdñëe_hook
)

1342 (*
	gma°î
->
	gdñëe_hook
Ë(
	gac˚ss
);

1345 
ac˚ss_li°_dñëe
 (
ac˚ss
);

1347  
	gCMD_SUCCESS
;

1350 
DEFUN
 (
ac˚ss_li°_ªm¨k
,

1351 
ac˚ss_li°_ªm¨k_cmd
,

1362 
ac˚ss_li°
 *
	gac˚ss
;

1364 
	gac˚ss
 = 
ac˚ss_li°_gë
 (
AFI_IP
, 
¨gv
[0]);

1366 i‡(
	gac˚ss
->
	gªm¨k
)

1368 
XFREE
 (
MTYPE_TMP
, 
ac˚ss
->
ªm¨k
);

1369 
	gac˚ss
->
	gªm¨k
 = 
NULL
;

1371 
	gac˚ss
->
	gªm¨k
 = 
¨gv_c⁄ˇt
(
¨gv
, 
¨gc
, 1);

1373  
	gCMD_SUCCESS
;

1376 
DEFUN
 (
no_ac˚ss_li°_ªm¨k
,

1377 
no_ac˚ss_li°_ªm¨k_cmd
,

1379 
NO_STR


1388  
vty_ac˚ss_li°_ªm¨k_un£t
 (
vty
, 
AFI_IP
, 
¨gv
[0]);

1391 
ALIAS
 (
no_ac˚ss_li°_ªm¨k
,

1392 
no_ac˚ss_li°_ªm¨k_¨g_cmd
,

1394 
NO_STR


1404 #ifde‡
HAVE_IPV6


1405 
DEFUN
 (
ùv6_ac˚ss_li°
,

1406 
ùv6_ac˚ss_li°_cmd
,

1408 
IPV6_STR


1415  
fûãr_£t_zebø
 (
vty
, 
¨gv
[0],árgv[1], 
AFI_IP6
,árgv[2], 0, 1);

1418 
DEFUN
 (
ùv6_ac˚ss_li°_exa˘
,

1419 
ùv6_ac˚ss_li°_exa˘_cmd
,

1421 
IPV6_STR


1429  
fûãr_£t_zebø
 (
vty
, 
¨gv
[0],árgv[1], 
AFI_IP6
,árgv[2], 1, 1);

1432 
DEFUN
 (
ùv6_ac˚ss_li°_™y
,

1433 
ùv6_ac˚ss_li°_™y_cmd
,

1435 
IPV6_STR


1442  
fûãr_£t_zebø
 (
vty
, 
¨gv
[0],árgv[1], 
AFI_IP6
, "::/0", 0, 1);

1445 
DEFUN
 (
no_ùv6_ac˚ss_li°
,

1446 
no_ùv6_ac˚ss_li°_cmd
,

1448 
NO_STR


1449 
IPV6_STR


1456  
fûãr_£t_zebø
 (
vty
, 
¨gv
[0],árgv[1], 
AFI_IP6
,árgv[2], 0, 0);

1459 
DEFUN
 (
no_ùv6_ac˚ss_li°_exa˘
,

1460 
no_ùv6_ac˚ss_li°_exa˘_cmd
,

1462 
NO_STR


1463 
IPV6_STR


1471  
fûãr_£t_zebø
 (
vty
, 
¨gv
[0],árgv[1], 
AFI_IP6
,árgv[2], 1, 0);

1474 
DEFUN
 (
no_ùv6_ac˚ss_li°_™y
,

1475 
no_ùv6_ac˚ss_li°_™y_cmd
,

1477 
NO_STR


1478 
IPV6_STR


1485  
fûãr_£t_zebø
 (
vty
, 
¨gv
[0],árgv[1], 
AFI_IP6
, "::/0", 0, 0);

1489 
DEFUN
 (
no_ùv6_ac˚ss_li°_Æl
,

1490 
no_ùv6_ac˚ss_li°_Æl_cmd
,

1492 
NO_STR


1493 
IPV6_STR


1497 
ac˚ss_li°
 *
	gac˚ss
;

1498 
ac˚ss_ma°î
 *
	gma°î
;

1501 
	gac˚ss
 = 
ac˚ss_li°_lookup
 (
AFI_IP6
, 
¨gv
[0]);

1502 i‡(
	gac˚ss
 =
NULL
)

1504 
vty_out
 (
vty
, "%%ác˚ss-li° %†d€¢'àexi°%s", 
¨gv
[0],

1505 
VTY_NEWLINE
);

1506  
	gCMD_WARNING
;

1509 
	gma°î
 = 
ac˚ss
->
ma°î
;

1512 i‡(
	gma°î
->
	gdñëe_hook
)

1513 (*
	gma°î
->
	gdñëe_hook
Ë(
	gac˚ss
);

1516 
ac˚ss_li°_dñëe
 (
ac˚ss
);

1518  
	gCMD_SUCCESS
;

1521 
DEFUN
 (
ùv6_ac˚ss_li°_ªm¨k
,

1522 
ùv6_ac˚ss_li°_ªm¨k_cmd
,

1524 
IPV6_STR


1530 
ac˚ss_li°
 *
	gac˚ss
;

1532 
	gac˚ss
 = 
ac˚ss_li°_gë
 (
AFI_IP6
, 
¨gv
[0]);

1534 i‡(
	gac˚ss
->
	gªm¨k
)

1536 
XFREE
 (
MTYPE_TMP
, 
ac˚ss
->
ªm¨k
);

1537 
	gac˚ss
->
	gªm¨k
 = 
NULL
;

1539 
	gac˚ss
->
	gªm¨k
 = 
¨gv_c⁄ˇt
(
¨gv
, 
¨gc
, 1);

1541  
	gCMD_SUCCESS
;

1544 
DEFUN
 (
no_ùv6_ac˚ss_li°_ªm¨k
,

1545 
no_ùv6_ac˚ss_li°_ªm¨k_cmd
,

1547 
NO_STR


1548 
IPV6_STR


1553  
vty_ac˚ss_li°_ªm¨k_un£t
 (
vty
, 
AFI_IP6
, 
¨gv
[0]);

1556 
ALIAS
 (
no_ùv6_ac˚ss_li°_ªm¨k
,

1557 
no_ùv6_ac˚ss_li°_ªm¨k_¨g_cmd
,

1559 
NO_STR


1560 
IPV6_STR


1567 
c⁄fig_wrôe_ac˚ss_zebø
 (
vty
 *, 
fûãr
 *);

1568 
c⁄fig_wrôe_ac˚ss_cisco
 (
vty
 *, 
fûãr
 *);

1572 
	$fûãr_show
 (
vty
 *vty, c⁄° *
«me
, 
afi_t
 
afi
)

1574 
ac˚ss_li°
 *
ac˚ss
;

1575 
ac˚ss_ma°î
 *
ma°î
;

1576 
fûãr
 *
mfûãr
;

1577 
fûãr_cisco
 *
fûãr
;

1578 
wrôe
 = 0;

1580 
ma°î
 = 
	`ac˚ss_ma°î_gë
 (
afi
);

1581 i‡(
ma°î
 =
NULL
)

1585 i‡(
zlog_deÁu…
)

1586 
	`vty_out
 (
vty
, "%s:%s",

1587 
zlog_¥Ÿo_«mes
[
zlog_deÁu…
->
¥Ÿocﬁ
], 
VTY_NEWLINE
);

1589 
ac˚ss
 = 
ma°î
->
num
.
hód
;ác˚ss;ác˚s†ac˚ss->
√xt
)

1591 i‡(
«me
 && 
	`°rcmp
 (
ac˚ss
->name,Çame) != 0)

1594 
wrôe
 = 1;

1596 
mfûãr
 = 
ac˚ss
->
hód
; mfûãr; mfûã∏mfûãr->
√xt
)

1598 
fûãr
 = &
mfûãr
->
u
.
cfûãr
;

1600 i‡(
wrôe
)

1602 
	`vty_out
 (
vty
, "%s IP%sáccessÜist %s%s",

1603 
mfûãr
->
cisco
 ?

1604 (
fûãr
->
exãnded
 ? "Extended" : "Standard") : "Zebra",

1605 
afi
 =
AFI_IP6
 ? "v6" : "",

1606 
ac˚ss
->
«me
, 
VTY_NEWLINE
);

1607 
wrôe
 = 0;

1610 
	`vty_out
 (
vty
, " %s%s", 
	`fûãr_ty≥_°r
 (
mfûãr
),

1611 
mfûãr
->
ty≥
 =
FILTER_DENY
 ? " " : "");

1613 i‡(! 
mfûãr
->
cisco
)

1614 
	`c⁄fig_wrôe_ac˚ss_zebø
 (
vty
, 
mfûãr
);

1615 i‡(
fûãr
->
exãnded
)

1616 
	`c⁄fig_wrôe_ac˚ss_cisco
 (
vty
, 
mfûãr
);

1619 i‡(
fûãr
->
addr_mask
.
s_addr
 == 0xffffffff)

1620 
	`vty_out
 (
vty
, "ány%s", 
VTY_NEWLINE
);

1623 
	`vty_out
 (
vty
, " %s", 
	`öë_¡ﬂ
 (
fûãr
->
addr
));

1624 i‡(
fûãr
->
addr_mask
.
s_addr
 != 0)

1625 
	`vty_out
 (
vty
, ", wûdˇrd bô†%s", 
	`öë_¡ﬂ
 (
fûãr
->
addr_mask
));

1626 
	`vty_out
 (
vty
, "%s", 
VTY_NEWLINE
);

1632 
ac˚ss
 = 
ma°î
->
°r
.
hód
;ác˚ss;ác˚s†ac˚ss->
√xt
)

1634 i‡(
«me
 && 
	`°rcmp
 (
ac˚ss
->name,Çame) != 0)

1637 
wrôe
 = 1;

1639 
mfûãr
 = 
ac˚ss
->
hód
; mfûãr; mfûã∏mfûãr->
√xt
)

1641 
fûãr
 = &
mfûãr
->
u
.
cfûãr
;

1643 i‡(
wrôe
)

1645 
	`vty_out
 (
vty
, "%s IP%sáccessÜist %s%s",

1646 
mfûãr
->
cisco
 ?

1647 (
fûãr
->
exãnded
 ? "Extended" : "Standard") : "Zebra",

1648 
afi
 =
AFI_IP6
 ? "v6" : "",

1649 
ac˚ss
->
«me
, 
VTY_NEWLINE
);

1650 
wrôe
 = 0;

1653 
	`vty_out
 (
vty
, " %s%s", 
	`fûãr_ty≥_°r
 (
mfûãr
),

1654 
mfûãr
->
ty≥
 =
FILTER_DENY
 ? " " : "");

1656 i‡(! 
mfûãr
->
cisco
)

1657 
	`c⁄fig_wrôe_ac˚ss_zebø
 (
vty
, 
mfûãr
);

1658 i‡(
fûãr
->
exãnded
)

1659 
	`c⁄fig_wrôe_ac˚ss_cisco
 (
vty
, 
mfûãr
);

1662 i‡(
fûãr
->
addr_mask
.
s_addr
 == 0xffffffff)

1663 
	`vty_out
 (
vty
, "ány%s", 
VTY_NEWLINE
);

1666 
	`vty_out
 (
vty
, " %s", 
	`öë_¡ﬂ
 (
fûãr
->
addr
));

1667 i‡(
fûãr
->
addr_mask
.
s_addr
 != 0)

1668 
	`vty_out
 (
vty
, ", wûdˇrd bô†%s", 
	`öë_¡ﬂ
 (
fûãr
->
addr_mask
));

1669 
	`vty_out
 (
vty
, "%s", 
VTY_NEWLINE
);

1674  
CMD_SUCCESS
;

1675 
	}
}

1677 
DEFUN
 (
show_ù_ac˚ss_li°
,

1678 
show_ù_ac˚ss_li°_cmd
,

1680 
SHOW_STR


1681 
IP_STR


1684  
fûãr_show
 (
vty
, 
NULL
, 
AFI_IP
);

1687 
DEFUN
 (
show_ù_ac˚ss_li°_«me
,

1688 
show_ù_ac˚ss_li°_«me_cmd
,

1690 
SHOW_STR


1691 
IP_STR


1699  
fûãr_show
 (
vty
, 
¨gv
[0], 
AFI_IP
);

1702 #ifde‡
HAVE_IPV6


1703 
DEFUN
 (
show_ùv6_ac˚ss_li°
,

1704 
show_ùv6_ac˚ss_li°_cmd
,

1706 
SHOW_STR


1707 
IPV6_STR


1710  
fûãr_show
 (
vty
, 
NULL
, 
AFI_IP6
);

1713 
DEFUN
 (
show_ùv6_ac˚ss_li°_«me
,

1714 
show_ùv6_ac˚ss_li°_«me_cmd
,

1716 
SHOW_STR


1717 
IPV6_STR


1721  
fûãr_show
 (
vty
, 
¨gv
[0], 
AFI_IP6
);

1726 
	$c⁄fig_wrôe_ac˚ss_cisco
 (
vty
 *vty, 
fûãr
 *
mfûãr
)

1728 
fûãr_cisco
 *
fûãr
;

1730 
fûãr
 = &
mfûãr
->
u
.
cfûãr
;

1732 i‡(
fûãr
->
exãnded
)

1734 
	`vty_out
 (
vty
, " ip");

1735 i‡(
fûãr
->
addr_mask
.
s_addr
 == 0xffffffff)

1736 
	`vty_out
 (
vty
, "ány");

1737 i‡(
fûãr
->
addr_mask
.
s_addr
 == 0)

1738 
	`vty_out
 (
vty
, " ho° %s", 
	`öë_¡ﬂ
 (
fûãr
->
addr
));

1741 
	`vty_out
 (
vty
, " %s", 
	`öë_¡ﬂ
 (
fûãr
->
addr
));

1742 
	`vty_out
 (
vty
, " %s", 
	`öë_¡ﬂ
 (
fûãr
->
addr_mask
));

1745 i‡(
fûãr
->
mask_mask
.
s_addr
 == 0xffffffff)

1746 
	`vty_out
 (
vty
, "ány");

1747 i‡(
fûãr
->
mask_mask
.
s_addr
 == 0)

1748 
	`vty_out
 (
vty
, " ho° %s", 
	`öë_¡ﬂ
 (
fûãr
->
mask
));

1751 
	`vty_out
 (
vty
, " %s", 
	`öë_¡ﬂ
 (
fûãr
->
mask
));

1752 
	`vty_out
 (
vty
, " %s", 
	`öë_¡ﬂ
 (
fûãr
->
mask_mask
));

1754 
	`vty_out
 (
vty
, "%s", 
VTY_NEWLINE
);

1758 i‡(
fûãr
->
addr_mask
.
s_addr
 == 0xffffffff)

1759 
	`vty_out
 (
vty
, "ány%s", 
VTY_NEWLINE
);

1762 
	`vty_out
 (
vty
, " %s", 
	`öë_¡ﬂ
 (
fûãr
->
addr
));

1763 i‡(
fûãr
->
addr_mask
.
s_addr
 != 0)

1764 
	`vty_out
 (
vty
, " %s", 
	`öë_¡ﬂ
 (
fûãr
->
addr_mask
));

1765 
	`vty_out
 (
vty
, "%s", 
VTY_NEWLINE
);

1768 
	}
}

1771 
	$c⁄fig_wrôe_ac˚ss_zebø
 (
vty
 *vty, 
fûãr
 *
mfûãr
)

1773 
fûãr_zebø
 *
fûãr
;

1774 
¥efix
 *
p
;

1775 
buf
[
BUFSIZ
];

1777 
fûãr
 = &
mfûãr
->
u
.
zfûãr
;

1778 
p
 = &
fûãr
->
¥efix
;

1780 i‡(
p
->
¥efixÀn
 =0 && ! 
fûãr
->
exa˘
)

1781 
	`vty_out
 (
vty
, "ány");

1783 
	`vty_out
 (
vty
, " %s/%d%s",

1784 
	`öë_¡›
 (
p
->
Ámûy
, &p->
u
.
¥efix
, 
buf
, 
BUFSIZ
),

1785 
p
->
¥efixÀn
,

1786 
fûãr
->
exa˘
 ? "Éxact-match" : "");

1788 
	`vty_out
 (
vty
, "%s", 
VTY_NEWLINE
);

1789 
	}
}

1792 
	$c⁄fig_wrôe_ac˚ss
 (
vty
 *vty, 
afi_t
 
afi
)

1794 
ac˚ss_li°
 *
ac˚ss
;

1795 
ac˚ss_ma°î
 *
ma°î
;

1796 
fûãr
 *
mfûãr
;

1797 
wrôe
 = 0;

1799 
ma°î
 = 
	`ac˚ss_ma°î_gë
 (
afi
);

1800 i‡(
ma°î
 =
NULL
)

1803 
ac˚ss
 = 
ma°î
->
num
.
hód
;ác˚ss;ác˚s†ac˚ss->
√xt
)

1805 i‡(
ac˚ss
->
ªm¨k
)

1807 
	`vty_out
 (
vty
, "%saccess-list %sÑemark %s%s",

1808 
afi
 =
AFI_IP
 ? "" : "ipv6 ",

1809 
ac˚ss
->
«me
,ác˚ss->
ªm¨k
,

1810 
VTY_NEWLINE
);

1811 
wrôe
++;

1814 
mfûãr
 = 
ac˚ss
->
hód
; mfûãr; mfûã∏mfûãr->
√xt
)

1816 
	`vty_out
 (
vty
, "%saccess-list %s %s",

1817 
afi
 =
AFI_IP
 ? "" : "ipv6 ",

1818 
ac˚ss
->
«me
,

1819 
	`fûãr_ty≥_°r
 (
mfûãr
));

1821 i‡(
mfûãr
->
cisco
)

1822 
	`c⁄fig_wrôe_ac˚ss_cisco
 (
vty
, 
mfûãr
);

1824 
	`c⁄fig_wrôe_ac˚ss_zebø
 (
vty
, 
mfûãr
);

1826 
wrôe
++;

1830 
ac˚ss
 = 
ma°î
->
°r
.
hód
;ác˚ss;ác˚s†ac˚ss->
√xt
)

1832 i‡(
ac˚ss
->
ªm¨k
)

1834 
	`vty_out
 (
vty
, "%saccess-list %sÑemark %s%s",

1835 
afi
 =
AFI_IP
 ? "" : "ipv6 ",

1836 
ac˚ss
->
«me
,ác˚ss->
ªm¨k
,

1837 
VTY_NEWLINE
);

1838 
wrôe
++;

1841 
mfûãr
 = 
ac˚ss
->
hód
; mfûãr; mfûã∏mfûãr->
√xt
)

1843 
	`vty_out
 (
vty
, "%saccess-list %s %s",

1844 
afi
 =
AFI_IP
 ? "" : "ipv6 ",

1845 
ac˚ss
->
«me
,

1846 
	`fûãr_ty≥_°r
 (
mfûãr
));

1848 i‡(
mfûãr
->
cisco
)

1849 
	`c⁄fig_wrôe_ac˚ss_cisco
 (
vty
, 
mfûãr
);

1851 
	`c⁄fig_wrôe_ac˚ss_zebø
 (
vty
, 
mfûãr
);

1853 
wrôe
++;

1856  
wrôe
;

1857 
	}
}

1860 
cmd_node
 
	gac˚ss_node
 =

1862 
ACCESS_NODE
,

1868 
	$c⁄fig_wrôe_ac˚ss_ùv4
 (
vty
 *vty)

1870  
	`c⁄fig_wrôe_ac˚ss
 (
vty
, 
AFI_IP
);

1871 
	}
}

1874 
	$ac˚ss_li°_ª£t_ùv4
 ()

1876 
ac˚ss_li°
 *
ac˚ss
;

1877 
ac˚ss_li°
 *
√xt
;

1878 
ac˚ss_ma°î
 *
ma°î
;

1880 
ma°î
 = 
	`ac˚ss_ma°î_gë
 (
AFI_IP
);

1881 i‡(
ma°î
 =
NULL
)

1884 
ac˚ss
 = 
ma°î
->
num
.
hód
;ác˚ss;ác˚s†
√xt
)

1886 
√xt
 = 
ac˚ss
->next;

1887 
	`ac˚ss_li°_dñëe
 (
ac˚ss
);

1889 
ac˚ss
 = 
ma°î
->
°r
.
hód
;ác˚ss;ác˚s†
√xt
)

1891 
√xt
 = 
ac˚ss
->next;

1892 
	`ac˚ss_li°_dñëe
 (
ac˚ss
);

1895 
	`as£π
 (
ma°î
->
num
.
hód
 =
NULL
);

1896 
	`as£π
 (
ma°î
->
num
.
èû
 =
NULL
);

1898 
	`as£π
 (
ma°î
->
°r
.
hód
 =
NULL
);

1899 
	`as£π
 (
ma°î
->
°r
.
èû
 =
NULL
);

1900 
	}
}

1904 
	$ac˚ss_li°_öô_ùv4
 ()

1906 
	`ö°Æl_node
 (&
ac˚ss_node
, 
c⁄fig_wrôe_ac˚ss_ùv4
);

1908 
	`ö°Æl_ñemít
 (
ENABLE_NODE
, &
show_ù_ac˚ss_li°_cmd
);

1909 
	`ö°Æl_ñemít
 (
ENABLE_NODE
, &
show_ù_ac˚ss_li°_«me_cmd
);

1912 
	`ö°Æl_ñemít
 (
CONFIG_NODE
, &
ac˚ss_li°_cmd
);

1913 
	`ö°Æl_ñemít
 (
CONFIG_NODE
, &
ac˚ss_li°_exa˘_cmd
);

1914 
	`ö°Æl_ñemít
 (
CONFIG_NODE
, &
ac˚ss_li°_™y_cmd
);

1915 
	`ö°Æl_ñemít
 (
CONFIG_NODE
, &
no_ac˚ss_li°_cmd
);

1916 
	`ö°Æl_ñemít
 (
CONFIG_NODE
, &
no_ac˚ss_li°_exa˘_cmd
);

1917 
	`ö°Æl_ñemít
 (
CONFIG_NODE
, &
no_ac˚ss_li°_™y_cmd
);

1920 
	`ö°Æl_ñemít
 (
CONFIG_NODE
, &
ac˚ss_li°_°™d¨d_cmd
);

1921 
	`ö°Æl_ñemít
 (
CONFIG_NODE
, &
ac˚ss_li°_°™d¨d_nomask_cmd
);

1922 
	`ö°Æl_ñemít
 (
CONFIG_NODE
, &
ac˚ss_li°_°™d¨d_ho°_cmd
);

1923 
	`ö°Æl_ñemít
 (
CONFIG_NODE
, &
ac˚ss_li°_°™d¨d_™y_cmd
);

1924 
	`ö°Æl_ñemít
 (
CONFIG_NODE
, &
no_ac˚ss_li°_°™d¨d_cmd
);

1925 
	`ö°Æl_ñemít
 (
CONFIG_NODE
, &
no_ac˚ss_li°_°™d¨d_nomask_cmd
);

1926 
	`ö°Æl_ñemít
 (
CONFIG_NODE
, &
no_ac˚ss_li°_°™d¨d_ho°_cmd
);

1927 
	`ö°Æl_ñemít
 (
CONFIG_NODE
, &
no_ac˚ss_li°_°™d¨d_™y_cmd
);

1930 
	`ö°Æl_ñemít
 (
CONFIG_NODE
, &
ac˚ss_li°_exãnded_cmd
);

1931 
	`ö°Æl_ñemít
 (
CONFIG_NODE
, &
ac˚ss_li°_exãnded_™y_mask_cmd
);

1932 
	`ö°Æl_ñemít
 (
CONFIG_NODE
, &
ac˚ss_li°_exãnded_mask_™y_cmd
);

1933 
	`ö°Æl_ñemít
 (
CONFIG_NODE
, &
ac˚ss_li°_exãnded_™y_™y_cmd
);

1934 
	`ö°Æl_ñemít
 (
CONFIG_NODE
, &
ac˚ss_li°_exãnded_ho°_mask_cmd
);

1935 
	`ö°Æl_ñemít
 (
CONFIG_NODE
, &
ac˚ss_li°_exãnded_mask_ho°_cmd
);

1936 
	`ö°Æl_ñemít
 (
CONFIG_NODE
, &
ac˚ss_li°_exãnded_ho°_ho°_cmd
);

1937 
	`ö°Æl_ñemít
 (
CONFIG_NODE
, &
ac˚ss_li°_exãnded_™y_ho°_cmd
);

1938 
	`ö°Æl_ñemít
 (
CONFIG_NODE
, &
ac˚ss_li°_exãnded_ho°_™y_cmd
);

1939 
	`ö°Æl_ñemít
 (
CONFIG_NODE
, &
no_ac˚ss_li°_exãnded_cmd
);

1940 
	`ö°Æl_ñemít
 (
CONFIG_NODE
, &
no_ac˚ss_li°_exãnded_™y_mask_cmd
);

1941 
	`ö°Æl_ñemít
 (
CONFIG_NODE
, &
no_ac˚ss_li°_exãnded_mask_™y_cmd
);

1942 
	`ö°Æl_ñemít
 (
CONFIG_NODE
, &
no_ac˚ss_li°_exãnded_™y_™y_cmd
);

1943 
	`ö°Æl_ñemít
 (
CONFIG_NODE
, &
no_ac˚ss_li°_exãnded_ho°_mask_cmd
);

1944 
	`ö°Æl_ñemít
 (
CONFIG_NODE
, &
no_ac˚ss_li°_exãnded_mask_ho°_cmd
);

1945 
	`ö°Æl_ñemít
 (
CONFIG_NODE
, &
no_ac˚ss_li°_exãnded_ho°_ho°_cmd
);

1946 
	`ö°Æl_ñemít
 (
CONFIG_NODE
, &
no_ac˚ss_li°_exãnded_™y_ho°_cmd
);

1947 
	`ö°Æl_ñemít
 (
CONFIG_NODE
, &
no_ac˚ss_li°_exãnded_ho°_™y_cmd
);

1949 
	`ö°Æl_ñemít
 (
CONFIG_NODE
, &
ac˚ss_li°_ªm¨k_cmd
);

1950 
	`ö°Æl_ñemít
 (
CONFIG_NODE
, &
no_ac˚ss_li°_Æl_cmd
);

1951 
	`ö°Æl_ñemít
 (
CONFIG_NODE
, &
no_ac˚ss_li°_ªm¨k_cmd
);

1952 
	`ö°Æl_ñemít
 (
CONFIG_NODE
, &
no_ac˚ss_li°_ªm¨k_¨g_cmd
);

1953 
	}
}

1955 #ifde‡
HAVE_IPV6


1956 
cmd_node
 
	gac˚ss_ùv6_node
 =

1958 
ACCESS_IPV6_NODE
,

1964 
	$c⁄fig_wrôe_ac˚ss_ùv6
 (
vty
 *vty)

1966  
	`c⁄fig_wrôe_ac˚ss
 (
vty
, 
AFI_IP6
);

1967 
	}
}

1970 
	$ac˚ss_li°_ª£t_ùv6
 ()

1972 
ac˚ss_li°
 *
ac˚ss
;

1973 
ac˚ss_li°
 *
√xt
;

1974 
ac˚ss_ma°î
 *
ma°î
;

1976 
ma°î
 = 
	`ac˚ss_ma°î_gë
 (
AFI_IP6
);

1977 i‡(
ma°î
 =
NULL
)

1980 
ac˚ss
 = 
ma°î
->
num
.
hód
;ác˚ss;ác˚s†
√xt
)

1982 
√xt
 = 
ac˚ss
->next;

1983 
	`ac˚ss_li°_dñëe
 (
ac˚ss
);

1985 
ac˚ss
 = 
ma°î
->
°r
.
hód
;ác˚ss;ác˚s†
√xt
)

1987 
√xt
 = 
ac˚ss
->next;

1988 
	`ac˚ss_li°_dñëe
 (
ac˚ss
);

1991 
	`as£π
 (
ma°î
->
num
.
hód
 =
NULL
);

1992 
	`as£π
 (
ma°î
->
num
.
èû
 =
NULL
);

1994 
	`as£π
 (
ma°î
->
°r
.
hód
 =
NULL
);

1995 
	`as£π
 (
ma°î
->
°r
.
èû
 =
NULL
);

1996 
	}
}

1999 
	$ac˚ss_li°_öô_ùv6
 ()

2001 
	`ö°Æl_node
 (&
ac˚ss_ùv6_node
, 
c⁄fig_wrôe_ac˚ss_ùv6
);

2003 
	`ö°Æl_ñemít
 (
ENABLE_NODE
, &
show_ùv6_ac˚ss_li°_cmd
);

2004 
	`ö°Æl_ñemít
 (
ENABLE_NODE
, &
show_ùv6_ac˚ss_li°_«me_cmd
);

2006 
	`ö°Æl_ñemít
 (
CONFIG_NODE
, &
ùv6_ac˚ss_li°_cmd
);

2007 
	`ö°Æl_ñemít
 (
CONFIG_NODE
, &
ùv6_ac˚ss_li°_exa˘_cmd
);

2008 
	`ö°Æl_ñemít
 (
CONFIG_NODE
, &
ùv6_ac˚ss_li°_™y_cmd
);

2009 
	`ö°Æl_ñemít
 (
CONFIG_NODE
, &
no_ùv6_ac˚ss_li°_exa˘_cmd
);

2010 
	`ö°Æl_ñemít
 (
CONFIG_NODE
, &
no_ùv6_ac˚ss_li°_cmd
);

2011 
	`ö°Æl_ñemít
 (
CONFIG_NODE
, &
no_ùv6_ac˚ss_li°_™y_cmd
);

2013 
	`ö°Æl_ñemít
 (
CONFIG_NODE
, &
no_ùv6_ac˚ss_li°_Æl_cmd
);

2014 
	`ö°Æl_ñemít
 (
CONFIG_NODE
, &
ùv6_ac˚ss_li°_ªm¨k_cmd
);

2015 
	`ö°Æl_ñemít
 (
CONFIG_NODE
, &
no_ùv6_ac˚ss_li°_ªm¨k_cmd
);

2016 
	`ö°Æl_ñemít
 (
CONFIG_NODE
, &
no_ùv6_ac˚ss_li°_ªm¨k_¨g_cmd
);

2017 
	}
}

2021 
	$ac˚ss_li°_öô
 ()

2023 
	`ac˚ss_li°_öô_ùv4
 ();

2024 #ifde‡
HAVE_IPV6


2025 
	`ac˚ss_li°_öô_ùv6
();

2027 
	}
}

2030 
	$ac˚ss_li°_ª£t
 ()

2032 
	`ac˚ss_li°_ª£t_ùv4
 ();

2033 #ifde‡
HAVE_IPV6


2034 
	`ac˚ss_li°_ª£t_ùv6
();

2036 
	}
}

	@filter.h

23 #i‚de‡
_ZEBRA_FILTER_H


24 
	#_ZEBRA_FILTER_H


	)

26 
	~"if.h
"

29 
	efûãr_ty≥


31 
	mFILTER_DENY
,

32 
	mFILTER_PERMIT
,

33 
	mFILTER_DYNAMIC


36 
	eac˚ss_ty≥


38 
	mACCESS_TYPE_STRING
,

39 
	mACCESS_TYPE_NUMBER


43 
	sac˚ss_li°


45 *
	m«me
;

46 *
	mªm¨k
;

48 
ac˚ss_ma°î
 *
	mma°î
;

50 
ac˚ss_ty≥
 
	mty≥
;

52 
ac˚ss_li°
 *
	m√xt
;

53 
ac˚ss_li°
 *
	m¥ev
;

55 
fûãr
 *
	mhód
;

56 
fûãr
 *
	mèû
;

60 
ac˚ss_li°_öô
 ();

61 
ac˚ss_li°_ª£t
 ();

62 
ac˚ss_li°_add_hook
 ((*
func
)(
ac˚ss_li°
 *));

63 
	`ac˚ss_li°_dñëe_hook
 ((*
func
)(
ac˚ss_li°
 *));

64 
ac˚ss_li°
 *
	`ac˚ss_li°_lookup
 (
afi_t
, const *);

65 
fûãr_ty≥
 
	`ac˚ss_li°_≠∂y
 (
ac˚ss_li°
 *, *);

	@getopt.c

29 #i‚de‡
_NO_PROTO


30 
	#_NO_PROTO


	)

34 
	~<c⁄fig.h
>

37 
	~<zebø.h
>

39 #i‡!
deföed
 
__STDC__
 || !__STDC__

43 c⁄°

	)

47 
	~<°dio.h
>

57 
	#GETOPT_INTERFACE_VERSION
 2

	)

58 #i‡!
deföed
 
_LIBC
 && deföed 
__GLIBC__
 && __GLIBC__ >= 2

59 
	~<gnu-vîsi⁄s.h
>

60 #i‡
_GNU_GETOPT_INTERFACE_VERSION
 =
GETOPT_INTERFACE_VERSION


61 
	#ELIDE_CODE


	)

65 #i‚de‡
ELIDE_CODE


70 #ifdef 
__GNU_LIBRARY__


73 
	~<°dlib.h
>

74 
	~<uni°d.h
>

77 #ifde‡
VMS


78 
	~<unixlib.h
>

79 #i‡
HAVE_STRING_H
 - 0

80 
	~<°rög.h
>

84 #i‚de‡
_


87 #ifde‡
HAVE_LIBINTL_H


88 
	~<liböé.h
>

89 
	#_
(
msgid
Ë
	`gëãxt
 (msgid)

	)

91 
	#_
(
msgid
Ë(msgid)

	)

109 
	~"gë›t.h
"

117 *
	g›èrg
 = 
NULL
;

132 
	g›töd
 = 1;

138 
	g__gë›t_öôülized
 = 0;

147 *
	g√xtch¨
;

152 
	g›ãº
 = 1;

158 
	g›t›t
 = '?';

191 
	mREQUIRE_ORDER
, 
	mPERMUTE
, 
	mRETURN_IN_ORDER


192 } 
	g‹dîög
;

195 *
	gposixly_c‹ª˘
;

197 #ifdef 
__GNU_LIBRARY__


202 
	~<°rög.h
>

203 
	#my_ödex
 
°rchr


	)

206 #i‡
HAVE_STRING_H


207 
	~<°rög.h
>

209 
	~<°rögs.h
>

215 #i‚de‡
gëív


216 *
gëív
 ();

220 
	$my_ödex
 (
°r
, 
chr
)

221 c⁄° *
°r
;

222 
chr
;

224 *
°r
)

226 i‡(*
°r
 =
chr
)

227  (*Ë
°r
;

228 
°r
++;

231 
	}
}

235 #ifde‡
__GNUC__


238 #i‡(!
deföed
 
__STDC__
 || !__STDC__Ë&& !deföed 
°æí


241 
°æí
 (const *);

253 
	gfú°_n⁄›t
;

254 
	gœ°_n⁄›t
;

256 #ifde‡
_LIBC


261 *
__gë›t_n⁄›ti⁄_Êags
;

263 
	gn⁄›ti⁄_Êags_max_Àn
;

264 
	gn⁄›ti⁄_Êags_Àn
;

266 
	g‹igöÆ_¨gc
;

267 *c⁄° *
	g‹igöÆ_¨gv
;

273 
__©åibuã__
 ((
unu£d
))

274 
	$°‹e_¨gs_™d_ív
 (
¨gc
, *c⁄° *
¨gv
)

278 
‹igöÆ_¨gc
 = 
¨gc
;

279 
‹igöÆ_¨gv
 = 
¨gv
;

280 
	}
}

281 #ifde‡
ãxt_£t_ñemít


282 
ãxt_£t_ñemít
 (
__libc_suböô
, 
°‹e_¨gs_™d_ív
);

285 
	#SWAP_FLAGS
(
ch1
, 
ch2
) \

286 i‡(
n⁄›ti⁄_Êags_Àn
 > 0) \

288 
__tmp
 = 
__gë›t_n⁄›ti⁄_Êags
[
ch1
]; \

289 
__gë›t_n⁄›ti⁄_Êags
[
ch1
] = __gë›t_n⁄›ti⁄_Êags[
ch2
]; \

290 
__gë›t_n⁄›ti⁄_Êags
[
ch2
] = 
__tmp
; \

291 }

	)

293 
	#SWAP_FLAGS
(
ch1
, 
ch2
)

	)

305 #i‡
deföed
 
__STDC__
 && __STDC__

306 
exch™ge
 (**);

310 
	$exch™ge
 (
¨gv
)

311 **
¨gv
;

313 
bŸtom
 = 
fú°_n⁄›t
;

314 
middÀ
 = 
œ°_n⁄›t
;

315 
t›
 = 
›töd
;

316 *
ãm
;

323 #ifde‡
_LIBC


327 i‡(
n⁄›ti⁄_Êags_Àn
 > 0 && 
t›
 >
n⁄›ti⁄_Êags_max_Àn
)

331 *
√w_°r
 = 
	`mÆloc
 (
t›
 + 1);

332 i‡(
√w_°r
 =
NULL
)

333 
n⁄›ti⁄_Êags_Àn
 = 
n⁄›ti⁄_Êags_max_Àn
 = 0;

336 
	`mem£t
 (
	`__memp˝y
 (
√w_°r
, 
__gë›t_n⁄›ti⁄_Êags
,

337 
n⁄›ti⁄_Êags_max_Àn
),

338 '\0', 
t›
 + 1 - 
n⁄›ti⁄_Êags_max_Àn
);

339 
n⁄›ti⁄_Êags_max_Àn
 = 
t›
 + 1;

340 
__gë›t_n⁄›ti⁄_Êags
 = 
√w_°r
;

345 
t›
 > 
middÀ
 && middÀ > 
bŸtom
)

347 i‡(
t›
 - 
middÀ
 > middÀ - 
bŸtom
)

350 
Àn
 = 
middÀ
 - 
bŸtom
;

351 
i
;

354 
i
 = 0; i < 
Àn
; i++)

356 
ãm
 = 
¨gv
[
bŸtom
 + 
i
];

357 
¨gv
[
bŸtom
 + 
i
] =árgv[
t›
 - (
middÀ
 - bottom) + i];

358 
¨gv
[
t›
 - (
middÀ
 - 
bŸtom
Ë+ 
i
] = 
ãm
;

359 
	`SWAP_FLAGS
 (
bŸtom
 + 
i
, 
t›
 - (
middÀ
 - bottom) + i);

362 
t›
 -
Àn
;

367 
Àn
 = 
t›
 - 
middÀ
;

368 
i
;

371 
i
 = 0; i < 
Àn
; i++)

373 
ãm
 = 
¨gv
[
bŸtom
 + 
i
];

374 
¨gv
[
bŸtom
 + 
i
] =árgv[
middÀ
 + i];

375 
¨gv
[
middÀ
 + 
i
] = 
ãm
;

376 
	`SWAP_FLAGS
 (
bŸtom
 + 
i
, 
middÀ
 + i);

379 
bŸtom
 +
Àn
;

385 
fú°_n⁄›t
 +(
›töd
 - 
œ°_n⁄›t
);

386 
œ°_n⁄›t
 = 
›töd
;

387 
	}
}

391 #i‡
deföed
 
__STDC__
 && __STDC__

392 c⁄° *
_gë›t_öôülize
 (, *const *, const *);

395 
	$_gë›t_öôülize
 (
¨gc
, 
¨gv
, 
›t°rög
)

396 
¨gc
;

397 *c⁄° *
¨gv
;

398 c⁄° *
›t°rög
;

404 
fú°_n⁄›t
 = 
œ°_n⁄›t
 = 
›töd
;

406 
√xtch¨
 = 
NULL
;

408 
posixly_c‹ª˘
 = 
	`gëív
 ("POSIXLY_CORRECT");

412 i‡(
›t°rög
[0] == '-')

414 
‹dîög
 = 
RETURN_IN_ORDER
;

415 ++
›t°rög
;

417 i‡(
›t°rög
[0] == '+')

419 
‹dîög
 = 
REQUIRE_ORDER
;

420 ++
›t°rög
;

422 i‡(
posixly_c‹ª˘
 !
NULL
)

423 
‹dîög
 = 
REQUIRE_ORDER
;

425 
‹dîög
 = 
PERMUTE
;

427 #ifde‡
_LIBC


428 i‡(
posixly_c‹ª˘
 =
NULL


429 && 
¨gc
 =
‹igöÆ_¨gc
 && 
¨gv
 =
‹igöÆ_¨gv
)

431 i‡(
n⁄›ti⁄_Êags_max_Àn
 == 0)

433 i‡(
__gë›t_n⁄›ti⁄_Êags
 =
NULL


434 || 
__gë›t_n⁄›ti⁄_Êags
[0] == '\0')

435 
n⁄›ti⁄_Êags_max_Àn
 = -1;

438 c⁄° *
‹ig_°r
 = 
__gë›t_n⁄›ti⁄_Êags
;

439 
Àn
 = 
n⁄›ti⁄_Êags_max_Àn
 = 
	`°æí
 (
‹ig_°r
);

440 i‡(
n⁄›ti⁄_Êags_max_Àn
 < 
¨gc
)

441 
n⁄›ti⁄_Êags_max_Àn
 = 
¨gc
;

442 
__gë›t_n⁄›ti⁄_Êags
 =

443 (*Ë
	`mÆloc
 (
n⁄›ti⁄_Êags_max_Àn
);

444 i‡(
__gë›t_n⁄›ti⁄_Êags
 =
NULL
)

445 
n⁄›ti⁄_Êags_max_Àn
 = -1;

447 
	`mem£t
 (
	`__memp˝y
 (
__gë›t_n⁄›ti⁄_Êags
, 
‹ig_°r
, 
Àn
),

448 '\0', 
n⁄›ti⁄_Êags_max_Àn
 - 
Àn
);

451 
n⁄›ti⁄_Êags_Àn
 = 
n⁄›ti⁄_Êags_max_Àn
;

454 
n⁄›ti⁄_Êags_Àn
 = 0;

457  
›t°rög
;

458 
	}
}

517 
	$_gë›t_öã∫Æ
 (
¨gc
, 
¨gv
, 
›t°rög
, 
l⁄g›ts
, 
l⁄göd
, 
l⁄g_⁄ly
)

518 
¨gc
;

519 *c⁄° *
¨gv
;

520 c⁄° *
›t°rög
;

521 c⁄° 
›ti⁄
 *
l⁄g›ts
;

522 *
l⁄göd
;

523 
l⁄g_⁄ly
;

525 
›èrg
 = 
NULL
;

527 i‡(
›töd
 =0 || !
__gë›t_öôülized
)

529 i‡(
›töd
 == 0)

530 
›töd
 = 1;

531 
›t°rög
 = 
	`_gë›t_öôülize
 (
¨gc
, 
¨gv
, optstring);

532 
__gë›t_öôülized
 = 1;

539 #ifde‡
_LIBC


540 
	#NONOPTION_P
 (
¨gv
[
›töd
][0] != '-' ||árgv[optind][1] == '\0' \

541 || (
›töd
 < 
n⁄›ti⁄_Êags_Àn
 \

542 && 
__gë›t_n⁄›ti⁄_Êags
[
›töd
] ='1'))

	)

544 
	#NONOPTION_P
 (
¨gv
[
›töd
][0] !'-' ||árgv[›töd][1] ='\0')

	)

547 i‡(
√xtch¨
 =
NULL
 || *nextchar == '\0')

553 i‡(
œ°_n⁄›t
 > 
›töd
)

554 
œ°_n⁄›t
 = 
›töd
;

555 i‡(
fú°_n⁄›t
 > 
›töd
)

556 
fú°_n⁄›t
 = 
›töd
;

558 i‡(
‹dîög
 =
PERMUTE
)

563 i‡(
fú°_n⁄›t
 !
œ°_n⁄›t
 &&Üa°_n⁄›à!
›töd
)

564 
	`exch™ge
 ((**Ë
¨gv
);

565 i‡(
œ°_n⁄›t
 !
›töd
)

566 
fú°_n⁄›t
 = 
›töd
;

571 
›töd
 < 
¨gc
 && 
NONOPTION_P
)

572 
›töd
++;

573 
œ°_n⁄›t
 = 
›töd
;

581 i‡(
›töd
 !
¨gc
 && !
	`°rcmp
 (
¨gv
[optind], "--"))

583 
›töd
++;

585 i‡(
fú°_n⁄›t
 !
œ°_n⁄›t
 &&Üa°_n⁄›à!
›töd
)

586 
	`exch™ge
 ((**Ë
¨gv
);

587 i‡(
fú°_n⁄›t
 =
œ°_n⁄›t
)

588 
fú°_n⁄›t
 = 
›töd
;

589 
œ°_n⁄›t
 = 
¨gc
;

591 
›töd
 = 
¨gc
;

597 i‡(
›töd
 =
¨gc
)

601 i‡(
fú°_n⁄›t
 !
œ°_n⁄›t
)

602 
›töd
 = 
fú°_n⁄›t
;

609 i‡(
NONOPTION_P
)

611 i‡(
‹dîög
 =
REQUIRE_ORDER
)

613 
›èrg
 = 
¨gv
[
›töd
++];

620 
√xtch¨
 = (
¨gv
[
›töd
] + 1

621 + (
l⁄g›ts
 !
NULL
 && 
¨gv
[
›töd
][1] == '-'));

639 i‡(
l⁄g›ts
 !
NULL


640 && (
¨gv
[
›töd
][1] == '-'

641 || (
l⁄g_⁄ly
 && (
¨gv
[
›töd
][2] || !
	`my_ödex
 (
›t°rög
,árgv[optind][1])))))

643 *
«mìnd
;

644 c⁄° 
›ti⁄
 *
p
;

645 c⁄° 
›ti⁄
 *
pfound
 = 
NULL
;

646 
exa˘
 = 0;

647 
ambig
 = 0;

648 
ödfound
 = -1;

649 
›ti⁄_ödex
;

651 
«mìnd
 = 
√xtch¨
; *nameend && *nameend != '=';Çameend++)

656 
p
 = 
l⁄g›ts
, 
›ti⁄_ödex
 = 0;Ö->
«me
;Ö++, option_index++)

657 i‡(!
	`°∫cmp
 (
p
->
«me
, 
√xtch¨
, 
«mìnd
 -Çextchar))

659 i‡((Ë(
«mìnd
 - 
√xtch¨
)

660 =(Ë
	`°æí
 (
p
->
«me
))

663 
pfound
 = 
p
;

664 
ödfound
 = 
›ti⁄_ödex
;

665 
exa˘
 = 1;

668 i‡(
pfound
 =
NULL
)

671 
pfound
 = 
p
;

672 
ödfound
 = 
›ti⁄_ödex
;

676 
ambig
 = 1;

679 i‡(
ambig
 && !
exa˘
)

681 i‡(
›ãº
)

682 
	`Ârötf
 (
°dîr
, 
	`_
("%s: option `%s' isámbiguous\n"),

683 
¨gv
[0],árgv[
›töd
]);

684 
√xtch¨
 +
	`°æí
 (nextchar);

685 
›töd
++;

686 
›t›t
 = 0;

690 i‡(
pfound
 !
NULL
)

692 
›ti⁄_ödex
 = 
ödfound
;

693 
›töd
++;

694 i‡(*
«mìnd
)

698 i‡(
pfound
->
has_¨g
)

699 
›èrg
 = 
«mìnd
 + 1;

702 i‡(
›ãº
)

704 i‡(
¨gv
[
›töd
 - 1][1] == '-')

706 
	`Ârötf
 (
°dîr
,

707 
	`_
("%s: option `--%s' doesn'tállowánárgument\n"),

708 
¨gv
[0], 
pfound
->
«me
);

711 
	`Ârötf
 (
°dîr
,

712 
	`_
("%s: option `%c%s' doesn'tállowánárgument\n"),

713 
¨gv
[0],árgv[
›töd
 - 1][0], 
pfound
->
«me
);

716 
√xtch¨
 +
	`°æí
 (nextchar);

718 
›t›t
 = 
pfound
->
vÆ
;

722 i‡(
pfound
->
has_¨g
 == 1)

724 i‡(
›töd
 < 
¨gc
)

725 
›èrg
 = 
¨gv
[
›töd
++];

728 i‡(
›ãº
)

729 
	`Ârötf
 (
°dîr
,

730 
	`_
("%s: option `%s'Ñequiresánárgument\n"),

731 
¨gv
[0],árgv[
›töd
 - 1]);

732 
√xtch¨
 +
	`°æí
 (nextchar);

733 
›t›t
 = 
pfound
->
vÆ
;

734  
›t°rög
[0] == ':' ? ':' : '?';

737 
√xtch¨
 +
	`°æí
 (nextchar);

738 i‡(
l⁄göd
 !
NULL
)

739 *
l⁄göd
 = 
›ti⁄_ödex
;

740 i‡(
pfound
->
Êag
)

742 *(
pfound
->
Êag
Ëpfound->
vÆ
;

745  
pfound
->
vÆ
;

752 i‡(!
l⁄g_⁄ly
 || 
¨gv
[
›töd
][1] == '-'

753 || 
	`my_ödex
 (
›t°rög
, *
√xtch¨
Ë=
NULL
)

755 i‡(
›ãº
)

757 i‡(
¨gv
[
›töd
][1] == '-')

759 
	`Ârötf
 (
°dîr
, 
	`_
("%s: unrecognized option `--%s'\n"),

760 
¨gv
[0], 
√xtch¨
);

763 
	`Ârötf
 (
°dîr
, 
	`_
("%s: unrecognized option `%c%s'\n"),

764 
¨gv
[0],árgv[
›töd
][0], 
√xtch¨
);

766 
√xtch¨
 = (*) "";

767 
›töd
++;

768 
›t›t
 = 0;

776 
c
 = *
√xtch¨
++;

777 *
ãmp
 = 
	`my_ödex
 (
›t°rög
, 
c
);

780 i‡(*
√xtch¨
 == '\0')

781 ++
›töd
;

783 i‡(
ãmp
 =
NULL
 || 
c
 == ':')

785 i‡(
›ãº
)

787 i‡(
posixly_c‹ª˘
)

789 
	`Ârötf
 (
°dîr
, 
	`_
("%s: illegal option -- %c\n"),

790 
¨gv
[0], 
c
);

792 
	`Ârötf
 (
°dîr
, 
	`_
("%s: invalid option -- %c\n"),

793 
¨gv
[0], 
c
);

795 
›t›t
 = 
c
;

799 i‡(
ãmp
[0] == 'W' &&Åemp[1] == ';')

801 *
«mìnd
;

802 c⁄° 
›ti⁄
 *
p
;

803 c⁄° 
›ti⁄
 *
pfound
 = 
NULL
;

804 
exa˘
 = 0;

805 
ambig
 = 0;

806 
ödfound
 = 0;

807 
›ti⁄_ödex
;

810 i‡(*
√xtch¨
 != '\0')

812 
›èrg
 = 
√xtch¨
;

815 
›töd
++;

817 i‡(
›töd
 =
¨gc
)

819 i‡(
›ãº
)

822 
	`Ârötf
 (
°dîr
, 
	`_
("%s: optionÑequiresánárgument -- %c\n"),

823 
¨gv
[0], 
c
);

825 
›t›t
 = 
c
;

826 i‡(
›t°rög
[0] == ':')

827 
c
 = ':';

829 
c
 = '?';

830  
c
;

835 
›èrg
 = 
¨gv
[
›töd
++];

840 
√xtch¨
 = 
«mìnd
 = 
›èrg
; *nameend && *nameend != '=';Çameend++)

845 
p
 = 
l⁄g›ts
, 
›ti⁄_ödex
 = 0;Ö->
«me
;Ö++, option_index++)

846 i‡(!
	`°∫cmp
 (
p
->
«me
, 
√xtch¨
, 
«mìnd
 -Çextchar))

848 i‡((Ë(
«mìnd
 - 
√xtch¨
Ë=
	`°æí
 (
p
->
«me
))

851 
pfound
 = 
p
;

852 
ödfound
 = 
›ti⁄_ödex
;

853 
exa˘
 = 1;

856 i‡(
pfound
 =
NULL
)

859 
pfound
 = 
p
;

860 
ödfound
 = 
›ti⁄_ödex
;

864 
ambig
 = 1;

866 i‡(
ambig
 && !
exa˘
)

868 i‡(
›ãº
)

869 
	`Ârötf
 (
°dîr
, 
	`_
("%s: option `-W %s' isámbiguous\n"),

870 
¨gv
[0],árgv[
›töd
]);

871 
√xtch¨
 +
	`°æí
 (nextchar);

872 
›töd
++;

875 i‡(
pfound
 !
NULL
)

877 
›ti⁄_ödex
 = 
ödfound
;

878 i‡(*
«mìnd
)

882 i‡(
pfound
->
has_¨g
)

883 
›èrg
 = 
«mìnd
 + 1;

886 i‡(
›ãº
)

887 
	`Ârötf
 (
°dîr
, 
	`_
("\
%s: option `-W %s' doesn'tállowánárgument\n"),

889 
¨gv
[0], 
pfound
->
«me
);

891 
√xtch¨
 +
	`°æí
 (nextchar);

895 i‡(
pfound
->
has_¨g
 == 1)

897 i‡(
›töd
 < 
¨gc
)

898 
›èrg
 = 
¨gv
[
›töd
++];

901 i‡(
›ãº
)

902 
	`Ârötf
 (
°dîr
,

903 
	`_
("%s: option `%s'Ñequiresánárgument\n"),

904 
¨gv
[0],árgv[
›töd
 - 1]);

905 
√xtch¨
 +
	`°æí
 (nextchar);

906  
›t°rög
[0] == ':' ? ':' : '?';

909 
√xtch¨
 +
	`°æí
 (nextchar);

910 i‡(
l⁄göd
 !
NULL
)

911 *
l⁄göd
 = 
›ti⁄_ödex
;

912 i‡(
pfound
->
Êag
)

914 *(
pfound
->
Êag
Ëpfound->
vÆ
;

917  
pfound
->
vÆ
;

919 
√xtch¨
 = 
NULL
;

922 i‡(
ãmp
[1] == ':')

924 i‡(
ãmp
[2] == ':')

927 i‡(*
√xtch¨
 != '\0')

929 
›èrg
 = 
√xtch¨
;

930 
›töd
++;

933 
›èrg
 = 
NULL
;

934 
√xtch¨
 = 
NULL
;

939 i‡(*
√xtch¨
 != '\0')

941 
›èrg
 = 
√xtch¨
;

944 
›töd
++;

946 i‡(
›töd
 =
¨gc
)

948 i‡(
›ãº
)

951 
	`Ârötf
 (
°dîr
,

952 
	`_
("%s: optionÑequiresánárgument -- %c\n"),

953 
¨gv
[0], 
c
);

955 
›t›t
 = 
c
;

956 i‡(
›t°rög
[0] == ':')

957 
c
 = ':';

959 
c
 = '?';

964 
›èrg
 = 
¨gv
[
›töd
++];

965 
√xtch¨
 = 
NULL
;

968  
c
;

970 
	}
}

972 #ifde‡
REALLY_NEED_PLAIN_GETOPT


975 
	$gë›t
 (
¨gc
, 
¨gv
, 
›t°rög
)

976 
¨gc
;

977 *c⁄° *
¨gv
;

978 c⁄° *
›t°rög
;

980  
	`_gë›t_öã∫Æ
 (
¨gc
, 
¨gv
, 
›t°rög
,

981 (c⁄° 
›ti⁄
 *) 0,

984 
	}
}

990 #ifde‡
TEST


996 
	$maö
 (
¨gc
, 
¨gv
)

997 
¨gc
;

998 **
¨gv
;

1000 
c
;

1001 
digô_›töd
 = 0;

1005 
this_›ti⁄_›töd
 = 
›töd
 ? optind : 1;

1007 
c
 = 
	`gë›t
 (
¨gc
, 
¨gv
, "abc:d:0123456789");

1008 i‡(
c
 == -1)

1011 
c
)

1023 i‡(
digô_›töd
 !0 && digô_›töd !
this_›ti⁄_›töd
)

1024 
	`¥ötf
 ("digits occur inÅwo differentárgv-elements.\n");

1025 
digô_›töd
 = 
this_›ti⁄_›töd
;

1026 
	`¥ötf
 ("›ti⁄ %c\n", 
c
);

1030 
	`¥ötf
 ("optioná\n");

1034 
	`¥ötf
 ("option b\n");

1038 
	`¥ötf
 ("›ti⁄ c wôh vÆuê`%s'\n", 
›èrg
);

1045 
	`¥ötf
 ("?? gë›àªtu∫ed ch¨a˘î codê0%ÿ??\n", 
c
);

1049 i‡(
›töd
 < 
¨gc
)

1051 
	`¥ötf
 ("non-option ARGV-elements: ");

1052 
›töd
 < 
¨gc
)

1053 
	`¥ötf
 ("%†", 
¨gv
[
›töd
++]);

1054 
	`¥ötf
 ("\n");

1057 
	`exô
 (0);

1058 
	}
}

	@getopt.h

22 #i‚de‡
_GETOPT_H


23 
	#_GETOPT_H
 1

	)

37 #ifdef 
__˝lu•lus


47 *
›èrg
;

61 
›töd
;

66 
›ãº
;

70 
›t›t
;

93 
	s›ti⁄


95 #i‡
deföed
 (
__STDC__
) && __STDC__

96 c⁄° *
	g«me
;

98 *
	g«me
;

102 
	ghas_¨g
;

103 *
	gÊag
;

104 
	gvÆ
;

109 
	#no_¨gumít
 0

	)

110 
	#ªquúed_¨gumít
 1

	)

111 
	#›ti⁄Æ_¨gumít
 2

	)

113 #i‡
deföed
 (
__STDC__
) && __STDC__

115 #i‡
REALLY_NEED_PLAIN_GETOPT


122 #i‚de‡
NONPOSIX_GETOPT_DEFINITION


123 
gë›t
 (
¨gc
, *c⁄° *
¨gv
, c⁄° *
sh‹t›ts
);

125 
gë›t
 ();

131 
gë›t_l⁄g
 (
¨gc
, *c⁄° *
¨gv
, c⁄° *
sh‹t›ts
,

132 c⁄° 
›ti⁄
 *
l⁄g›ts
, *
l⁄göd
);

133 
gë›t_l⁄g_⁄ly
 (
¨gc
, *c⁄° *
¨gv
,

134 c⁄° *
sh‹t›ts
,

135 c⁄° 
›ti⁄
 *
l⁄g›ts
, *
l⁄göd
);

138 
_gë›t_öã∫Æ
 (
¨gc
, *c⁄° *
¨gv
,

139 c⁄° *
sh‹t›ts
,

140 c⁄° 
›ti⁄
 *
l⁄g›ts
, *
l⁄göd
,

141 
l⁄g_⁄ly
);

144 #ifde‡
REALLY_NEED_PLAIN_GETOPT


145 
gë›t
 ();

148 
gë›t_l⁄g
 ();

149 
gë›t_l⁄g_⁄ly
 ();

151 
_gë›t_öã∫Æ
 ();

155 #ifdef 
__˝lu•lus


	@getopt1.c

24 
	~<c⁄fig.h
>

27 
	~<zebø.h
>

28 
	~"gë›t.h
"

30 #i‡!
deföed
 
__STDC__
 || !__STDC__

34 c⁄°

	)

38 
	~<°dio.h
>

48 
	#GETOPT_INTERFACE_VERSION
 2

	)

49 #i‡!
deföed
 
_LIBC
 && deföed 
__GLIBC__
 && __GLIBC__ >= 2

50 
	~<gnu-vîsi⁄s.h
>

51 #i‡
_GNU_GETOPT_INTERFACE_VERSION
 =
GETOPT_INTERFACE_VERSION


52 
	#ELIDE_CODE


	)

56 #i‚de‡
ELIDE_CODE


61 #ifde‡
__GNU_LIBRARY__


62 
	~<°dlib.h
>

65 #i‚def 
NULL


66 
	#NULL
 0

	)

70 
	$gë›t_l⁄g
 (
¨gc
, 
¨gv
, 
›ti⁄s
, 
l⁄g_›ti⁄s
, 
›t_ödex
)

71 
¨gc
;

72 *c⁄° *
¨gv
;

73 c⁄° *
›ti⁄s
;

74 c⁄° 
›ti⁄
 *
l⁄g_›ti⁄s
;

75 *
›t_ödex
;

77  
	`_gë›t_öã∫Æ
 (
¨gc
, 
¨gv
, 
›ti⁄s
, 
l⁄g_›ti⁄s
, 
›t_ödex
, 0);

78 
	}
}

86 
	$gë›t_l⁄g_⁄ly
 (
¨gc
, 
¨gv
, 
›ti⁄s
, 
l⁄g_›ti⁄s
, 
›t_ödex
)

87 
¨gc
;

88 *c⁄° *
¨gv
;

89 c⁄° *
›ti⁄s
;

90 c⁄° 
›ti⁄
 *
l⁄g_›ti⁄s
;

91 *
›t_ödex
;

93  
	`_gë›t_öã∫Æ
 (
¨gc
, 
¨gv
, 
›ti⁄s
, 
l⁄g_›ti⁄s
, 
›t_ödex
, 1);

94 
	}
}

99 #ifde‡
TEST


101 
	~<°dio.h
>

104 
	$maö
 (
¨gc
, 
¨gv
)

105 
¨gc
;

106 **
¨gv
;

108 
c
;

109 
digô_›töd
 = 0;

113 
this_›ti⁄_›töd
 = 
›töd
 ? optind : 1;

114 
›ti⁄_ödex
 = 0;

115 
›ti⁄
 
l⁄g_›ti⁄s
[] =

126 
c
 = 
	`gë›t_l⁄g
 (
¨gc
, 
¨gv
, "abc:d:0123456789",

127 
l⁄g_›ti⁄s
, &
›ti⁄_ödex
);

128 i‡(
c
 == -1)

131 
c
)

134 
	`¥ötf
 ("›ti⁄ %s", 
l⁄g_›ti⁄s
[
›ti⁄_ödex
].
«me
);

135 i‡(
›èrg
)

136 
	`¥ötf
 (" wôhárg %s", 
›èrg
);

137 
	`¥ötf
 ("\n");

150 i‡(
digô_›töd
 !0 && digô_›töd !
this_›ti⁄_›töd
)

151 
	`¥ötf
 ("digits occur inÅwo differentárgv-elements.\n");

152 
digô_›töd
 = 
this_›ti⁄_›töd
;

153 
	`¥ötf
 ("›ti⁄ %c\n", 
c
);

157 
	`¥ötf
 ("optioná\n");

161 
	`¥ötf
 ("option b\n");

165 
	`¥ötf
 ("›ti⁄ c wôh vÆuê`%s'\n", 
›èrg
);

169 
	`¥ötf
 ("›ti⁄ d wôh vÆuê`%s'\n", 
›èrg
);

176 
	`¥ötf
 ("?? gë›àªtu∫ed ch¨a˘î codê0%ÿ??\n", 
c
);

180 i‡(
›töd
 < 
¨gc
)

182 
	`¥ötf
 ("non-option ARGV-elements: ");

183 
›töd
 < 
¨gc
)

184 
	`¥ötf
 ("%†", 
¨gv
[
›töd
++]);

185 
	`¥ötf
 ("\n");

188 
	`exô
 (0);

189 
	}
}

	@hash.c

22 
	~<zebø.h
>

24 
	~"hash.h
"

25 
	~"mem‹y.h
"

28 
hash
 *

29 
hash_¸óã_size
 (
size
, (*
hash_key
) (*),

30 (*
hash_cmp
) (const *, const *))

32 
hash
 *hash;

34 
	`as£π
 ((
size
 & (size-1)) == 0);

35 
hash
 = 
	`XMALLOC
 (
MTYPE_HASH
,  (hash));

36 
hash
->
ödex
 = 
	`XCALLOC
 (
MTYPE_HASH_INDEX
,

37  (
hash_backë
 *Ë* 
size
);

38 
hash
->
size
 = size;

39 
hash
->
no_ex∑nd
 = 0;

40 
hash
->
hash_key
 = hash_key;

41 
hash
->
hash_cmp
 = hash_cmp;

42 
hash
->
cou¡
 = 0;

44  
hash
;

45 
	}
}

48 
hash
 *

49 
hash_¸óã
 ((*
hash_key
) (*),

50 (*
hash_cmp
) (const *, const *))

52  
	`hash_¸óã_size
 (
HASH_INITIAL_SIZE
, 
hash_key
, 
hash_cmp
);

53 
	}
}

59 
	$hash_Æloc_öã∫
 (*
¨g
)

61  
¨g
;

62 
	}
}

65 
	$hash_ex∑nd
 (
hash
 *hash)

67 
i
, 
√w_size
, 
lo£rs
;

68 
hash_backë
 *
hb
, *
hb√xt
, **
√w_ödex
;

70 
√w_size
 = 
hash
->
size
 * 2;

71 
√w_ödex
 = 
	`XCALLOC
(
MTYPE_HASH_INDEX
, (
hash_backë
 *Ë* 
√w_size
);

72 i‡(
√w_ödex
 =
NULL
)

75 
i
 = 0; i < 
hash
->
size
; i++)

76 
hb
 = 
hash
->
ödex
[
i
]; hb; hb = 
hb√xt
)

78 
h
 = 
hb
->
key
 & (
√w_size
 - 1);

80 
hb√xt
 = 
hb
->
√xt
;

81 
hb
->
√xt
 = 
√w_ödex
[
h
];

82 
√w_ödex
[
h
] = 
hb
;

86 
	`XFREE
(
MTYPE_HASH_INDEX
, 
hash
->
ödex
);

87 
hash
->
size
 = 
√w_size
;

88 
hash
->
ödex
 = 
√w_ödex
;

93 
lo£rs
 = 0;

94 
i
 = 0; i < 
hash
->
size
; i++)

96 
Àn
 = 0;

97 
hb
 = 
hash
->
ödex
[
i
]; hb; hb = hb->
√xt
)

99 i‡(++
Àn
 > 
HASH_THRESHOLD
/2)

100 ++
lo£rs
;

101 i‡(
Àn
 >
HASH_THRESHOLD
)

102 
hash
->
no_ex∑nd
 = 1;

106 i‡(
lo£rs
 > 
hash
->
cou¡
 / 2)

107 
hash
->
no_ex∑nd
 = 1;

108 
	}
}

114 
hash_gë
 (
hash
 *hash, *
d©a
, * (*
Æloc_func
) (*))

116 
	gkey
;

117 
	gödex
;

118 *
	g√wd©a
;

119 
	gÀn
;

120 
hash_backë
 *
	gbackë
;

122 
	gkey
 = (*
hash
->
hash_key
Ë(
d©a
);

123 
	gödex
 = 
key
 & (
hash
->
size
 - 1);

124 
	gÀn
 = 0;

126 
	gbackë
 = 
hash
->
ödex
[ödex]; backë !
NULL
; backë = 
backë
->
√xt
)

128 i‡(
backë
->
key
 =key && (*
hash
->
hash_cmp
Ë(backë->
d©a
, 
	gd©a
))

129  
	gbackë
->
	gd©a
;

130 ++
	gÀn
;

133 i‡(
	gÆloc_func
)

135 
	g√wd©a
 = (*
Æloc_func
Ë(
d©a
);

136 i‡(
	g√wd©a
 =
NULL
)

137  
NULL
;

139 i‡(
	gÀn
 > 
	gHASH_THRESHOLD
 && !
	ghash
->
	gno_ex∑nd
)

141 
hash_ex∑nd
 (
hash
);

142 
	gödex
 = 
key
 & (
hash
->
size
 - 1);

145 
	gbackë
 = 
XMALLOC
 (
MTYPE_HASH_BACKET
,  (
hash_backë
));

146 
	gbackë
->
	gd©a
 = 
√wd©a
;

147 
	gbackë
->
	gkey
 = 
key
;

148 
	gbackë
->
	g√xt
 = 
hash
->
ödex
[index];

149 
	ghash
->
	gödex
[
ödex
] = 
backë
;

150 
	ghash
->
	gcou¡
++;

151  
	gbackë
->
	gd©a
;

153  
	gNULL
;

158 
	$hash_lookup
 (
hash
 *hash, *
d©a
)

160  
	`hash_gë
 (
hash
, 
d©a
, 
NULL
);

161 
	}
}

164 
	$°rög_hash_make
 (c⁄° *
°r
)

166 
hash
 = 0;

168 *
°r
)

169 
hash
 = (hash * 33Ë^ (Ë*
°r
++;

171  
hash
;

172 
	}
}

178 
	$hash_ªÀa£
 (
hash
 *hash, *
d©a
)

180 *
ªt
;

181 
key
;

182 
ödex
;

183 
hash_backë
 *
backë
;

184 
hash_backë
 *
µ
;

186 
key
 = (*
hash
->
hash_key
Ë(
d©a
);

187 
ödex
 = 
key
 & (
hash
->
size
 - 1);

189 
backë
 = 
µ
 = 
hash
->
ödex
[ödex]; backë; backë = backë->
√xt
)

191 i‡(
backë
->
key
 =key && (*
hash
->
hash_cmp
Ë(backë->
d©a
, data))

193 i‡(
backë
 =
µ
)

194 
hash
->
ödex
[ödex] = 
backë
->
√xt
;

196 
µ
->
√xt
 = 
backë
->next;

198 
ªt
 = 
backë
->
d©a
;

199 
	`XFREE
 (
MTYPE_HASH_BACKET
, 
backë
);

200 
hash
->
cou¡
--;

201  
ªt
;

203 
µ
 = 
backë
;

205  
NULL
;

206 
	}
}

210 
hash_ôî©e
 (
hash
 *hash,

211 (*
func
Ë(
hash_backë
 *, *), *
¨g
)

213 
i
;

214 
hash_backë
 *
hb
;

215 
hash_backë
 *
hb√xt
;

217 
i
 = 0; i < 
hash
->
size
; i++)

218 
hb
 = 
hash
->
ödex
[
i
]; hb; hb = 
hb√xt
)

223 
hb√xt
 = 
hb
->
√xt
;

224 (*
func
Ë(
hb
, 
¨g
);

226 
	}
}

230 
hash_˛ón
 (
hash
 *hash, (*
‰ì_func
) (*))

232 
i
;

233 
hash_backë
 *
hb
;

234 
hash_backë
 *
√xt
;

236 
i
 = 0; i < 
hash
->
size
; i++)

238 
hb
 = 
hash
->
ödex
[
i
]; hb; hb = 
√xt
)

240 
√xt
 = 
hb
->next;

242 i‡(
‰ì_func
)

243 (*
‰ì_func
Ë(
hb
->
d©a
);

245 
	`XFREE
 (
MTYPE_HASH_BACKET
, 
hb
);

246 
hash
->
cou¡
--;

248 
hash
->
ödex
[
i
] = 
NULL
;

250 
	}
}

255 
	$hash_‰ì
 (
hash
 *hash)

257 
	`XFREE
 (
MTYPE_HASH_INDEX
, 
hash
->
ödex
);

258 
	`XFREE
 (
MTYPE_HASH
, 
hash
);

259 
	}
}

	@hash.h

21 #i‚de‡
_ZEBRA_HASH_H


22 
	#_ZEBRA_HASH_H


	)

25 
	#HASH_INITIAL_SIZE
 256

	)

26 
	#HASH_THRESHOLD
 10

	)

28 
	shash_backë


31 
hash_backë
 *
	m√xt
;

34 
	mkey
;

37 *
	md©a
;

40 
	shash


43 
hash_backë
 **
	mödex
;

46 
	msize
;

49 
	mno_ex∑nd
;

52 (*
	mhash_key
) (*);

55 (*
	mhash_cmp
) (const *, const *);

58 
	mcou¡
;

61 
hash
 *
hash_¸óã
 ((*) (*),

63 
hash
 *
	`hash_¸óã_size
 (, (*) (*),

66 *
	`hash_gë
 (
hash
 *, *, * (*) (*));

67 *
	`hash_Æloc_öã∫
 (*);

68 *
	`hash_lookup
 (
hash
 *, *);

69 *
	`hash_ªÀa£
 (
hash
 *, *);

71 
	`hash_ôî©e
 (
hash
 *,

72 (*Ë(
hash_backë
 *, *), *);

74 
	`hash_˛ón
 (
hash
 *, (*) (*));

75 
	`hash_‰ì
 (
hash
 *);

77 
	`°rög_hash_make
 (const *);

	@if.c

24 
	~<zebø.h
>

26 
	~"lökli°.h
"

27 
	~"ve˘‹.h
"

28 
	~"vty.h
"

29 
	~"comm™d.h
"

30 
	~"if.h
"

31 
	~"sockuni⁄.h
"

32 
	~"¥efix.h
"

33 
	~"mem‹y.h
"

34 
	~"èbÀ.h
"

35 
	~"buf„r.h
"

36 
	~"°r.h
"

37 
	~"log.h
"

40 
li°
 *
	giÊi°
;

43 
	sif_ma°î


45 (*
	mif_√w_hook
Ë(
	möãrÁ˚
 *);

46 (*
	mif_dñëe_hook
Ë(
	möãrÁ˚
 *);

47 } 
	gif_ma°î
;

58 
	$if_cmp_func
 (
öãrÁ˚
 *
iÂ1
, öãrÁ˚ *
iÂ2
)

60 
l1
, 
l2
;

61 
x1
, 
x2
;

62 *
p1
, *
p2
;

63 
ªs
;

65 
p1
 = 
iÂ1
->
«me
;

66 
p2
 = 
iÂ2
->
«me
;

68 *
p1
 && *
p2
) {

70 
l1
 = 
	`°rc•n
(
p1
, "0123456789");

71 
l2
 = 
	`°rc•n
(
p2
, "0123456789");

74 i‡(
l1
 !
l2
)

75  (
	`°rcmp
(
p1
, 
p2
));

80 
ªs
 = 
	`°∫cmp
(
p1
, 
p2
, 
l1
);

83 i‡(
ªs
)

84  
ªs
;

87 
p1
 +
l1
;

88 
p2
 +
l1
;

90 i‡(!*
p1
)

92 i‡(!*
p2
)

95 
x1
 = 
	`°πﬁ
(
p1
, &p1, 10);

96 
x2
 = 
	`°πﬁ
(
p2
, &p2, 10);

99 i‡(
x1
 < 
x2
)

101 i‡(
x1
 > 
x2
)

107 i‡(*
p1
)

109 i‡(*
p2
)

112 
	}
}

115 
öãrÁ˚
 *

116 
	$if_¸óã
 (c⁄° *
«me
, 
«mñí
)

118 
öãrÁ˚
 *
iÂ
;

120 
iÂ
 = 
	`XCALLOC
 (
MTYPE_IF
,  (
öãrÁ˚
));

121 
iÂ
->
ifödex
 = 
IFINDEX_INTERNAL
;

123 
	`as£π
 (
«me
);

124 
	`as£π
 (
«mñí
 <
INTERFACE_NAMSIZ
);

125 
	`°∫˝y
 (
iÂ
->
«me
,Çame, 
«mñí
);

126 
iÂ
->
«me
[
«mñí
] = '\0';

127 i‡(
	`if_lookup_by_«me
(
iÂ
->
«me
Ë=
NULL
)

128 
	`li°node_add_s‹t
 (
iÊi°
, 
iÂ
);

130 
	`zlog_îr
("if_create(%s): corruption detected -- interface withÅhis "

131 "«mêexi°†Æªady!", 
iÂ
->
«me
);

132 
iÂ
->
c⁄√˘ed
 = 
	`li°_√w
 ();

133 
iÂ
->
c⁄√˘ed
->
dñ
 = ((*Ë(*)Ë
c⁄√˘ed_‰ì
;

135 i‡(
if_ma°î
.
if_√w_hook
)

136 (*
if_ma°î
.
if_√w_hook
Ë(
iÂ
);

138  
iÂ
;

139 
	}
}

143 
	$if_dñëe_ªèö
 (
öãrÁ˚
 *
iÂ
)

145 i‡(
if_ma°î
.
if_dñëe_hook
)

146 (*
if_ma°î
.
if_dñëe_hook
Ë(
iÂ
);

149 
	`li°_dñëe_Æl_node
 (
iÂ
->
c⁄√˘ed
);

150 
	}
}

154 
	$if_dñëe
 (
öãrÁ˚
 *
iÂ
)

156 
	`li°node_dñëe
 (
iÊi°
, 
iÂ
);

158 
	`if_dñëe_ªèö
(
iÂ
);

160 
	`li°_‰ì
 (
iÂ
->
c⁄√˘ed
);

162 
	`XFREE
 (
MTYPE_IF
, 
iÂ
);

163 
	}
}

167 
if_add_hook
 (
ty≥
, (*
func
)(
öãrÁ˚
 *
iÂ
))

169 
ty≥
) {

170 
IF_NEW_HOOK
:

171 
if_ma°î
.
if_√w_hook
 = 
func
;

173 
IF_DELETE_HOOK
:

174 
if_ma°î
.
if_dñëe_hook
 = 
func
;

179 
	}
}

182 
öãrÁ˚
 *

183 
	$if_lookup_by_ödex
 (
ödex
)

185 
li°node
 *
node
;

186 
öãrÁ˚
 *
iÂ
;

188 
	`ALL_LIST_ELEMENTS_RO
(
iÊi°
, 
node
, 
iÂ
))

190 i‡(
iÂ
->
ifödex
 =
ödex
)

191  
iÂ
;

193  
NULL
;

194 
	}
}

197 
	$ifödex2i‚ame
 (
ödex
)

199 
öãrÁ˚
 *
iÂ
;

201  ((
iÂ
 = 
	`if_lookup_by_ödex
(
ödex
)Ë!
NULL
) ?

202 
iÂ
->
«me
 : "unknown";

203 
	}
}

206 
	$i‚ame2ifödex
 (c⁄° *
«me
)

208 
öãrÁ˚
 *
iÂ
;

210  ((
iÂ
 = 
	`if_lookup_by_«me
(
«me
)Ë!
NULL
Ë? iÂ->
ifödex


211 : 
IFINDEX_INTERNAL
;

212 
	}
}

215 
öãrÁ˚
 *

216 
	$if_lookup_by_«me
 (c⁄° *
«me
)

218 
li°node
 *
node
;

219 
öãrÁ˚
 *
iÂ
;

221 i‡(
«me
)

222 
	`ALL_LIST_ELEMENTS_RO
 (
iÊi°
, 
node
, 
iÂ
))

224 i‡(
	`°rcmp
(
«me
, 
iÂ
->name) == 0)

225  
iÂ
;

227  
NULL
;

228 
	}
}

230 
öãrÁ˚
 *

231 
	$if_lookup_by_«me_Àn
(c⁄° *
«me
, 
size_t
 
«mñí
)

233 
li°node
 *
node
;

234 
öãrÁ˚
 *
iÂ
;

236 i‡(
«mñí
 > 
INTERFACE_NAMSIZ
)

237  
NULL
;

239 
	`ALL_LIST_ELEMENTS_RO
 (
iÊi°
, 
node
, 
iÂ
))

241 i‡(!
	`memcmp
(
«me
, 
iÂ
->«me, 
«mñí
) && (ifp->name[namelen] == '\0'))

242  
iÂ
;

244  
NULL
;

245 
	}
}

248 
öãrÁ˚
 *

249 
	$if_lookup_exa˘_addªss
 (
ö_addr
 
§c
)

251 
li°node
 *
node
;

252 
li°node
 *
˙ode
;

253 
öãrÁ˚
 *
iÂ
;

254 
¥efix
 *
p
;

255 
c⁄√˘ed
 *
c
;

257 
	`ALL_LIST_ELEMENTS_RO
 (
iÊi°
, 
node
, 
iÂ
))

259 
	`ALL_LIST_ELEMENTS_RO
 (
iÂ
->
c⁄√˘ed
, 
˙ode
, 
c
))

261 
p
 = 
c
->
addªss
;

263 i‡(
p
 &&Ö->
Ámûy
 =
AF_INET
)

265 i‡(
	`IPV4_ADDR_SAME
 (&
p
->
u
.
¥efix4
, &
§c
))

266  
iÂ
;

270  
NULL
;

271 
	}
}

274 
öãrÁ˚
 *

275 
	$if_lookup_addªss
 (
ö_addr
 
§c
)

277 
li°node
 *
node
;

278 
¥efix
 
addr
;

279 
be°Àn
 = 0;

280 
li°node
 *
˙ode
;

281 
öãrÁ˚
 *
iÂ
;

282 
c⁄√˘ed
 *
c
;

283 
öãrÁ˚
 *
m©ch
;

285 
addr
.
Ámûy
 = 
AF_INET
;

286 
addr
.
u
.
¥efix4
 = 
§c
;

287 
addr
.
¥efixÀn
 = 
IPV4_MAX_BITLEN
;

289 
m©ch
 = 
NULL
;

291 
	`ALL_LIST_ELEMENTS_RO
 (
iÊi°
, 
node
, 
iÂ
))

293 
	`ALL_LIST_ELEMENTS_RO
 (
iÂ
->
c⁄√˘ed
, 
˙ode
, 
c
))

295 i‡(
c
->
addªss
 && (c->addªss->
Ámûy
 =
AF_INET
) &&

296 
	`¥efix_m©ch
(
	`CONNECTED_PREFIX
(
c
), &
addr
) &&

297 (
c
->
addªss
->
¥efixÀn
 > 
be°Àn
))

299 
be°Àn
 = 
c
->
addªss
->
¥efixÀn
;

300 
m©ch
 = 
iÂ
;

304  
m©ch
;

305 
	}
}

308 
öãrÁ˚
 *

309 
	$if_lookup_¥efix
 (
¥efix
 *prefix)

311 
li°node
 *
node
;

312 
li°node
 *
˙ode
;

313 
öãrÁ˚
 *
iÂ
;

314 
c⁄√˘ed
 *
c
;

316 
	`ALL_LIST_ELEMENTS_RO
 (
iÊi°
, 
node
, 
iÂ
))

318 
	`ALL_LIST_ELEMENTS_RO
 (
iÂ
->
c⁄√˘ed
, 
˙ode
, 
c
))

320 i‡(
	`¥efix_cmp
(
c
->
addªss
, 
¥efix
) == 0)

322  
iÂ
;

326  
NULL
;

327 
	}
}

331 
öãrÁ˚
 *

332 
	$if_gë_by_«me
 (c⁄° *
«me
)

334 
öãrÁ˚
 *
iÂ
;

336  ((
iÂ
 = 
	`if_lookup_by_«me
(
«me
)Ë!
NULL
) ? ifp :

337 
	`if_¸óã
(
«me
, 
	`°æí
(name));

338 
	}
}

340 
öãrÁ˚
 *

341 
	$if_gë_by_«me_Àn
(c⁄° *
«me
, 
size_t
 
«mñí
)

343 
öãrÁ˚
 *
iÂ
;

345  ((
iÂ
 = 
	`if_lookup_by_«me_Àn
(
«me
, 
«mñí
)Ë!
NULL
) ? ifp :

346 
	`if_¸óã
(
«me
, 
«mñí
);

347 
	}
}

351 
	$if_is_up
 (
öãrÁ˚
 *
iÂ
)

353  
iÂ
->
Êags
 & 
IFF_UP
;

354 
	}
}

358 
	$if_is_ru¬ög
 (
öãrÁ˚
 *
iÂ
)

360  
iÂ
->
Êags
 & 
IFF_RUNNING
;

361 
	}
}

366 
	$if_is_›î©ive
 (
öãrÁ˚
 *
iÂ
)

368  ((
iÂ
->
Êags
 & 
IFF_UP
) &&

369 (
iÂ
->
Êags
 & 
IFF_RUNNING
 || !
	`CHECK_FLAG
(iÂ->
°©us
, 
ZEBRA_INTERFACE_LINKDETECTION
)));

370 
	}
}

374 
	$if_is_lo›back
 (
öãrÁ˚
 *
iÂ
)

379  (
iÂ
->
Êags
 & (
IFF_LOOPBACK
|
IFF_NOXMIT
|
IFF_VIRTUAL
));

380 
	}
}

384 
	$if_is_brﬂdˇ°
 (
öãrÁ˚
 *
iÂ
)

386  
iÂ
->
Êags
 & 
IFF_BROADCAST
;

387 
	}
}

391 
	$if_is_poöt›oöt
 (
öãrÁ˚
 *
iÂ
)

393  
iÂ
->
Êags
 & 
IFF_POINTOPOINT
;

394 
	}
}

398 
	$if_is_mu…iˇ°
 (
öãrÁ˚
 *
iÂ
)

400  
iÂ
->
Êags
 & 
IFF_MULTICAST
;

401 
	}
}

405 
	$if_Êag_dump
 (
Êag
)

407 
£∑øt‹
 = 0;

408 
logbuf
[
BUFSIZ
];

410 
	#IFF_OUT_LOG
(
X
,
STR
) \

411 i‡(
Êag
 & (
X
)) \

413 i‡(
£∑øt‹
) \

414 
	`°æˇt
 (
logbuf
, ",", 
BUFSIZ
); \

416 
£∑øt‹
 = 1; \

417 
	`°æˇt
 (
logbuf
, 
STR
, 
BUFSIZ
); \

418 }

	)

420 
	`°æ˝y
 (
logbuf
, "<", 
BUFSIZ
);

421 
	`IFF_OUT_LOG
 (
IFF_UP
, "UP");

422 
	`IFF_OUT_LOG
 (
IFF_BROADCAST
, "BROADCAST");

423 
	`IFF_OUT_LOG
 (
IFF_DEBUG
, "DEBUG");

424 
	`IFF_OUT_LOG
 (
IFF_LOOPBACK
, "LOOPBACK");

425 
	`IFF_OUT_LOG
 (
IFF_POINTOPOINT
, "POINTOPOINT");

426 
	`IFF_OUT_LOG
 (
IFF_NOTRAILERS
, "NOTRAILERS");

427 
	`IFF_OUT_LOG
 (
IFF_RUNNING
, "RUNNING");

428 
	`IFF_OUT_LOG
 (
IFF_NOARP
, "NOARP");

429 
	`IFF_OUT_LOG
 (
IFF_PROMISC
, "PROMISC");

430 
	`IFF_OUT_LOG
 (
IFF_ALLMULTI
, "ALLMULTI");

431 
	`IFF_OUT_LOG
 (
IFF_OACTIVE
, "OACTIVE");

432 
	`IFF_OUT_LOG
 (
IFF_SIMPLEX
, "SIMPLEX");

433 
	`IFF_OUT_LOG
 (
IFF_LINK0
, "LINK0");

434 
	`IFF_OUT_LOG
 (
IFF_LINK1
, "LINK1");

435 
	`IFF_OUT_LOG
 (
IFF_LINK2
, "LINK2");

436 
	`IFF_OUT_LOG
 (
IFF_MULTICAST
, "MULTICAST");

437 
	`IFF_OUT_LOG
 (
IFF_NOXMIT
, "NOXMIT");

438 
	`IFF_OUT_LOG
 (
IFF_NORTEXCH
, "NORTEXCH");

439 
	`IFF_OUT_LOG
 (
IFF_VIRTUAL
, "VIRTUAL");

440 
	`IFF_OUT_LOG
 (
IFF_IPV4
, "IPv4");

441 
	`IFF_OUT_LOG
 (
IFF_IPV6
, "IPv6");

443 
	`°æˇt
 (
logbuf
, ">", 
BUFSIZ
);

445  
logbuf
;

446 #unde‡
IFF_OUT_LOG


447 
	}
}

451 
	$if_dump
 (c⁄° 
öãrÁ˚
 *
iÂ
)

453 
li°node
 *
node
;

454 
c⁄√˘ed
 *
c
 
	`__©åibuã__
((
unu£d
));

456 
	`ALL_LIST_ELEMENTS_RO
 (
iÂ
->
c⁄√˘ed
, 
node
, 
c
))

457 
	`zlog_öfo
 ("Interface %s index %d metric %d mtu %d "

458 #ifde‡
HAVE_IPV6


462 
iÂ
->
«me
, iÂ->
ifödex
, iÂ->
mëric
, iÂ->
mtu
,

463 #ifde‡
HAVE_IPV6


464 
iÂ
->
mtu6
,

466 
	`if_Êag_dump
 (
iÂ
->
Êags
));

467 
	}
}

471 
	$if_dump_Æl
 ()

473 
li°node
 *
node
;

474 *
p
;

476 
	`ALL_LIST_ELEMENTS_RO
 (
iÊi°
, 
node
, 
p
))

477 
	`if_dump
 (
p
);

478 
	}
}

480 
DEFUN
 (
öãrÁ˚_desc
,

481 
öãrÁ˚_desc_cmd
,

486 
öãrÁ˚
 *
	giÂ
;

488 i‡(
	g¨gc
 == 0)

489  
CMD_SUCCESS
;

491 
	giÂ
 = 
vty
->
ödex
;

492 i‡(
	giÂ
->
	gdesc
)

493 
XFREE
 (
MTYPE_TMP
, 
iÂ
->
desc
);

494 
	giÂ
->
	gdesc
 = 
¨gv_c⁄ˇt
(
¨gv
, 
¨gc
, 0);

496  
	gCMD_SUCCESS
;

499 
DEFUN
 (
no_öãrÁ˚_desc
,

500 
no_öãrÁ˚_desc_cmd
,

502 
NO_STR


505 
öãrÁ˚
 *
	giÂ
;

507 
	giÂ
 = 
vty
->
ödex
;

508 i‡(
	giÂ
->
	gdesc
)

509 
XFREE
 (
MTYPE_TMP
, 
iÂ
->
desc
);

510 
	giÂ
->
	gdesc
 = 
NULL
;

512  
	gCMD_SUCCESS
;

515 #ifde‡
SUNOS_5


536 
öãrÁ˚
 *

537 
	$if_sunwzebø_gë
 (c⁄° *
«me
, 
size_t
 
∆í
)

539 
öãrÁ˚
 *
iÂ
;

540 
size_t
 
£µos
 = 0;

542 i‡–(
iÂ
 = 
	`if_lookup_by_«me_Àn
(
«me
, 
∆í
)Ë!
NULL
)

543  
iÂ
;

546 
£µos
 < 
∆í
 && 
«me
[seppos] != ':')

547 
£µos
++;

550 i‡(
£µos
 < 
∆í
)

551  
	`if_gë_by_«me_Àn
 (
«me
, 
£µos
);

553  
	`if_gë_by_«me_Àn
 (
«me
, 
∆í
);

554 
	}
}

557 
DEFUN
 (
öãrÁ˚
,

558 
öãrÁ˚_cmd
,

563 
öãrÁ˚
 *
	giÂ
;

564 
size_t
 
	g¶
;

566 i‡((
	g¶
 = 
°æí
(
¨gv
[0])Ë> 
INTERFACE_NAMSIZ
)

568 
vty_out
 (
vty
, "%% InterfaceÇame %s is invalid:ÜengthÉxceeds "

570 
¨gv
[0], 
INTERFACE_NAMSIZ
, 
VTY_NEWLINE
);

571  
	gCMD_WARNING
;

574 #ifde‡
SUNOS_5


575 
	giÂ
 = 
if_sunwzebø_gë
 (
¨gv
[0], 
¶
);

577 
	giÂ
 = 
if_gë_by_«me_Àn
(
¨gv
[0], 
¶
);

580 
	gvty
->
	gödex
 = 
iÂ
;

581 
	gvty
->
	gnode
 = 
INTERFACE_NODE
;

583  
	gCMD_SUCCESS
;

586 
DEFUN_NOSH
 (
no_öãrÁ˚
,

587 
no_öãrÁ˚_cmd
,

589 
NO_STR


594 
öãrÁ˚
 *
	giÂ
;

596 
	giÂ
 = 
if_lookup_by_«me
 (
¨gv
[0]);

598 i‡(
	giÂ
 =
NULL
)

600 
vty_out
 (
vty
, "%% I¡îÁ˚ %†d€†nŸÉxi°%s", 
¨gv
[0], 
VTY_NEWLINE
);

601  
	gCMD_WARNING
;

604 i‡(
CHECK_FLAG
 (
iÂ
->
°©us
, 
ZEBRA_INTERFACE_ACTIVE
))

606 
vty_out
 (
vty
, "%% Only inactive interfaces can be deleted%s",

607 
VTY_NEWLINE
);

608  
	gCMD_WARNING
;

611 
if_dñëe
(
iÂ
);

613  
	gCMD_SUCCESS
;

617 
DEFUN
 (
show_addªss
,

618 
show_addªss_cmd
,

620 
SHOW_STR


623 
li°node
 *
	gnode
;

624 
li°node
 *
	gnode2
;

625 
öãrÁ˚
 *
	giÂ
;

626 
c⁄√˘ed
 *
	gifc
;

627 
¥efix
 *
	gp
;

629 
ALL_LIST_ELEMENTS_RO
 (
iÊi°
, 
node
, 
iÂ
))

631 
ALL_LIST_ELEMENTS_RO
 (
iÂ
->
c⁄√˘ed
, 
node2
, 
ifc
))

633 
	gp
 = 
ifc
->
addªss
;

635 i‡(
	gp
->
	gÁmûy
 =
AF_INET
)

636 
vty_out
 (
vty
, "%s/%d%s", 
öë_¡ﬂ
 (
p
->
u
.
¥efix4
),Ö->
¥efixÀn
,

637 
VTY_NEWLINE
);

640  
	gCMD_SUCCESS
;

644 
c⁄√˘ed
 *

645 
	$c⁄√˘ed_√w
 ()

647  
	`XCALLOC
 (
MTYPE_CONNECTED
,  (
c⁄√˘ed
));

648 
	}
}

652 
	$c⁄√˘ed_‰ì
 (
c⁄√˘ed
 *connected)

654 i‡(
c⁄√˘ed
->
addªss
)

655 
	`¥efix_‰ì
 (
c⁄√˘ed
->
addªss
);

657 i‡(
c⁄√˘ed
->
de°ö©i⁄
)

658 
	`¥efix_‰ì
 (
c⁄√˘ed
->
de°ö©i⁄
);

660 i‡(
c⁄√˘ed
->
œbñ
)

661 
	`XFREE
 (
MTYPE_CONNECTED_LABEL
, 
c⁄√˘ed
->
œbñ
);

663 
	`XFREE
 (
MTYPE_CONNECTED
, 
c⁄√˘ed
);

664 
	}
}

667 
__©åibuã__
 ((
unu£d
))

668 
	$c⁄√˘ed_log
 (
c⁄√˘ed
 *c⁄√˘ed, *
°r
)

670 
¥efix
 *
p
;

671 
öãrÁ˚
 *
iÂ
;

672 
logbuf
[
BUFSIZ
];

673 
buf
[
BUFSIZ
];

675 
iÂ
 = 
c⁄√˘ed
->ifp;

676 
p
 = 
c⁄√˘ed
->
addªss
;

678 
	`¢¥ötf
 (
logbuf
, 
BUFSIZ
, "%s interface %s %s %s/%d ",

679 
°r
, 
iÂ
->
«me
, 
	`¥efix_Ámûy_°r
 (
p
),

680 
	`öë_¡›
 (
p
->
Ámûy
, &p->
u
.
¥efix
, 
buf
, 
BUFSIZ
),

681 
p
->
¥efixÀn
);

683 
p
 = 
c⁄√˘ed
->
de°ö©i⁄
;

684 i‡(
p
)

686 
	`°∫ˇt
 (
logbuf
, 
	`öë_¡›
 (
p
->
Ámûy
, &p->
u
.
¥efix
, 
buf
, 
BUFSIZ
),

687 
BUFSIZ
 - 
	`°æí
(
logbuf
));

689 
	`zlog
 (
NULL
, 
LOG_INFO
, "%s", 
logbuf
);

690 
	}
}

694 
	$c⁄√˘ed_ßme_¥efix
 (
¥efix
 *
p1
, ¥efix *
p2
)

696 i‡(
p1
->
Ámûy
 =
p2
->family)

698 i‡(
p1
->
Ámûy
 =
AF_INET
 &&

699 
	`IPV4_ADDR_SAME
 (&
p1
->
u
.
¥efix4
, &
p2
->u.prefix4))

701 #ifde‡
HAVE_IPV6


702 i‡(
p1
->
Ámûy
 =
AF_INET6
 &&

703 
	`IPV6_ADDR_SAME
 (&
p1
->
u
.
¥efix6
, &
p2
->u.prefix6))

708 
	}
}

710 
c⁄√˘ed
 *

711 
	$c⁄√˘ed_dñëe_by_¥efix
 (
öãrÁ˚
 *
iÂ
, 
¥efix
 *
p
)

713 
li°node
 *
node
;

714 
li°node
 *
√xt
;

715 
c⁄√˘ed
 *
ifc
;

718 
node
 = 
	`li°hód
 (
iÂ
->
c⁄√˘ed
);Çode;Çodê
√xt
)

720 
ifc
 = 
	`li°gëd©a
 (
node
);

721 
√xt
 = 
node
->next;

723 i‡(
	`c⁄√˘ed_ßme_¥efix
 (
ifc
->
addªss
, 
p
))

725 
	`li°node_dñëe
 (
iÂ
->
c⁄√˘ed
, 
ifc
);

726  
ifc
;

729  
NULL
;

730 
	}
}

734 
c⁄√˘ed
 *

735 
	$c⁄√˘ed_lookup_addªss
 (
öãrÁ˚
 *
iÂ
, 
ö_addr
 
d°
)

737 
¥efix
 
addr
;

738 
li°node
 *
˙ode
;

739 
c⁄√˘ed
 *
c
;

740 
c⁄√˘ed
 *
m©ch
;

742 
addr
.
Ámûy
 = 
AF_INET
;

743 
addr
.
u
.
¥efix4
 = 
d°
;

744 
addr
.
¥efixÀn
 = 
IPV4_MAX_BITLEN
;

746 
m©ch
 = 
NULL
;

748 
	`ALL_LIST_ELEMENTS_RO
 (
iÂ
->
c⁄√˘ed
, 
˙ode
, 
c
))

750 i‡(
c
->
addªss
 && (c->addªss->
Ámûy
 =
AF_INET
) &&

751 
	`¥efix_m©ch
(
	`CONNECTED_PREFIX
(
c
), &
addr
) &&

752 (!
m©ch
 || (
c
->
addªss
->
¥efixÀn
 > match->address->prefixlen)))

753 
m©ch
 = 
c
;

755  
m©ch
;

756 
	}
}

758 
c⁄√˘ed
 *

759 
	$c⁄√˘ed_add_by_¥efix
 (
öãrÁ˚
 *
iÂ
, 
¥efix
 *
p
,

760 
¥efix
 *
de°ö©i⁄
)

762 
c⁄√˘ed
 *
ifc
;

765 
ifc
 = 
	`c⁄√˘ed_√w
 ();

766 
ifc
->
iÂ
 = ifp;

769 
ifc
->
addªss
 = 
	`¥efix_√w
();

770 
	`mem˝y
 (
ifc
->
addªss
, 
p
, (
¥efix
));

773 i‡(
de°ö©i⁄
)

775 
ifc
->
de°ö©i⁄
 = 
	`¥efix_√w
();

776 
	`mem˝y
 (
ifc
->
de°ö©i⁄
, de°ö©i⁄, (
¥efix
));

780 
	`li°node_add
 (
iÂ
->
c⁄√˘ed
, 
ifc
);

781  
ifc
;

782 
	}
}

784 #i‚de‡
HAVE_IF_NAMETOINDEX


786 
	$if_«mëoödex
 (c⁄° *
«me
)

788 
öãrÁ˚
 *
iÂ
;

790  ((
iÂ
 = 
	`if_lookup_by_«me_Àn
(
«me
, 
	`°∫Àn
“ame, 
IFNAMSIZ
))Ë!
NULL
)

791 ? 
iÂ
->
ifödex
 : 0;

792 
	}
}

795 #i‚de‡
HAVE_IF_INDEXTONAME


797 
	$if_ödext⁄ame
 (
ifödex
, *
«me
)

799 
öãrÁ˚
 *
iÂ
;

801 i‡(!(
iÂ
 = 
	`if_lookup_by_ödex
(
ifödex
)))

802  
NULL
;

803 
	`°∫˝y
 (
«me
, 
iÂ
->«me, 
IFNAMSIZ
);

804  
iÂ
->
«me
;

805 
	}
}

814 
rouã_èbÀ
 *
	giÁddr_ùv4_èbÀ
;

818 
	$iÁddr_ùv4_add
 (
ö_addr
 *
iÁddr
, 
öãrÁ˚
 *
iÂ
)

820 
rouã_node
 *
∫
;

821 
¥efix_ùv4
 
p
;

823 
p
.
Ámûy
 = 
AF_INET
;

824 
p
.
¥efixÀn
 = 
IPV4_MAX_PREFIXLEN
;

825 
p
.
¥efix
 = *
iÁddr
;

827 
∫
 = 
	`rouã_node_gë
 (
iÁddr_ùv4_èbÀ
, (
¥efix
 *Ë&
p
);

828 i‡(
∫
)

830 
	`rouã_u∆ock_node
 (
∫
);

831 
	`zlog_öfo
 ("ifaddr_ipv4_add():áddress %s isálreadyádded",

832 
	`öë_¡ﬂ
 (*
iÁddr
));

835 
∫
->
öfo
 = 
iÂ
;

836 
	}
}

839 
	$iÁddr_ùv4_dñëe
 (
ö_addr
 *
iÁddr
, 
öãrÁ˚
 *
iÂ
)

841 
rouã_node
 *
∫
;

842 
¥efix_ùv4
 
p
;

844 
p
.
Ámûy
 = 
AF_INET
;

845 
p
.
¥efixÀn
 = 
IPV4_MAX_PREFIXLEN
;

846 
p
.
¥efix
 = *
iÁddr
;

848 
∫
 = 
	`rouã_node_lookup
 (
iÁddr_ùv4_èbÀ
, (
¥efix
 *Ë&
p
);

849 i‡(! 
∫
)

851 
	`zlog_öfo
 ("ifaddr_ipv4_delete(): can't findáddress %s",

852 
	`öë_¡ﬂ
 (*
iÁddr
));

855 
∫
->
öfo
 = 
NULL
;

856 
	`rouã_u∆ock_node
 (
∫
);

857 
	`rouã_u∆ock_node
 (
∫
);

858 
	}
}

861 
öãrÁ˚
 *

862 
	$iÁddr_ùv4_lookup
 (
ö_addr
 *
addr
, 
ifödex
)

864 
¥efix_ùv4
 
p
;

865 
rouã_node
 *
∫
;

866 
öãrÁ˚
 *
iÂ
;

868 i‡(
addr
)

870 
p
.
Ámûy
 = 
AF_INET
;

871 
p
.
¥efixÀn
 = 
IPV4_MAX_PREFIXLEN
;

872 
p
.
¥efix
 = *
addr
;

874 
∫
 = 
	`rouã_node_lookup
 (
iÁddr_ùv4_èbÀ
, (
¥efix
 *Ë&
p
);

875 i‡(! 
∫
)

876  
NULL
;

878 
iÂ
 = 
∫
->
öfo
;

879 
	`rouã_u∆ock_node
 (
∫
);

880  
iÂ
;

883  
	`if_lookup_by_ödex
(
ifödex
);

884 
	}
}

889 
	$if_öô
 ()

891 
iÊi°
 = 
	`li°_√w
 ();

893 
iÁddr_ùv4_èbÀ
 = 
	`rouã_èbÀ_öô
 ();

896 i‡(
iÊi°
) {

897 
iÊi°
->
cmp
 = ((*)(*, *))
if_cmp_func
;

901 
	`mem£t
 (&
if_ma°î
, 0,  if_master);

902 
	}
}

905 
	$if_ãrmö©e
 ()

909 
öãrÁ˚
 *
iÂ
;

911 
iÂ
 = 
	`li°node_hód
 (
iÊi°
);

912 i‡(
iÂ
 =
NULL
)

915 
	`if_dñëe
 (
iÂ
);

918 
	`li°_dñëe
 (
iÊi°
);

919 
iÊi°
 = 
NULL
;

920 
	}
}

	@if.h

21 #i‚de‡
_ZEBRA_IF_H


22 
	#_ZEBRA_IF_H


	)

24 
	~"lökli°.h
"

36 
	#INTERFACE_NAMSIZ
 20

	)

37 
	#INTERFACE_HWADDR_MAX
 20

	)

39 #ifde‡
HAVE_PROC_NET_DEV


40 
	sif_°©s


42 
	mrx_∑ckës
;

43 
	mtx_∑ckës
;

44 
	mrx_byãs
;

45 
	mtx_byãs
;

46 
	mrx_îr‹s
;

47 
	mtx_îr‹s
;

48 
	mrx_dr›≥d
;

49 
	mtx_dr›≥d
;

50 
	mrx_mu…iˇ°
;

51 
	mrx_com¥es£d
;

52 
	mtx_com¥es£d
;

53 
	mcﬁlisi⁄s
;

56 
	mrx_Àngth_îr‹s
;

57 
	mrx_ovî_îr‹s
;

58 
	mrx_¸c_îr‹s
;

59 
	mrx_‰ame_îr‹s
;

60 
	mrx_fifo_îr‹s
;

61 
	mrx_mis£d_îr‹s
;

63 
	mtx_ab‹ãd_îr‹s
;

64 
	mtx_ˇºõr_îr‹s
;

65 
	mtx_fifo_îr‹s
;

66 
	mtx_hóπbót_îr‹s
;

67 
	mtx_wödow_îr‹s
;

72 
	söãrÁ˚


81 
	m«me
[
INTERFACE_NAMSIZ
 + 1];

85 
	mifödex
;

86 
	#IFINDEX_INTERNAL
 0

	)

89 
u_ch¨
 
	m°©us
;

90 
	#ZEBRA_INTERFACE_ACTIVE
 (1 << 0)

	)

91 
	#ZEBRA_INTERFACE_SUB
 (1 << 1)

	)

92 
	#ZEBRA_INTERFACE_LINKDETECTION
 (1 << 2)

	)

95 
uöt64_t
 
	mÊags
;

98 
	mmëric
;

101 
	mmtu
;

102 
	mmtu6
;

105 #ifde‡
HAVE_STRUCT_SOCKADDR_DL


110 
sockaddr_dl
 
	msdl
;

111 
sockaddr_°‹age
 
	msdl_°‹age
;

114 
	mhw_ty≥
;

115 
u_ch¨
 
	mhw_addr
[
INTERFACE_HWADDR_MAX
];

116 
	mhw_addr_Àn
;

120 
	mb™dwidth
;

123 *
	mdesc
;

126 *
	mdi°ribuã_ö
;

127 *
	mdi°ribuã_out
;

130 
li°
 *
	mc⁄√˘ed
;

133 *
	möfo
;

136 #ifde‡
HAVE_PROC_NET_DEV


137 
if_°©s
 
	m°©s
;

139 #ifde‡
HAVE_NET_RT_IFLIST


140 
if_d©a
 
	m°©s
;

145 
	sc⁄√˘ed


148 
öãrÁ˚
 *
	miÂ
;

151 
u_ch¨
 
	mc⁄f
;

152 
	#ZEBRA_IFC_REAL
 (1 << 0)

	)

153 
	#ZEBRA_IFC_CONFIGURED
 (1 << 1)

	)

154 
	#ZEBRA_IFC_QUEUED
 (1 << 2)

	)

167 
u_ch¨
 
	mÊags
;

168 
	#ZEBRA_IFA_SECONDARY
 (1 << 0)

	)

169 
	#ZEBRA_IFA_PEER
 (1 << 1)

	)

178 
¥efix
 *
	maddªss
;

182 
¥efix
 *
	mde°ö©i⁄
;

185 *
	mœbñ
;

189 
	#CONNECTED_PEER
(
C
Ë
	`CHECK_FLAG
((C)->
Êags
, 
ZEBRA_IFA_PEER
)

	)

192 
	#CONNECTED_PREFIX
(
C
) \

193 (
	`CONNECTED_PEER
(
C
Ë? (C)->
de°ö©i⁄
 : (C)->
addªss
)

	)

197 
	#CONNECTED_ID
(
C
) \

198 ((
	`CONNECTED_PEER
(
C
Ë&& !
	`¥efix_m©ch
((C)->
de°ö©i⁄
, (C)->
addªss
)) ?\

199 (
C
)->
de°ö©i⁄
 : (C)->
addªss
)

	)

202 
	#IF_NEW_HOOK
 0

	)

203 
	#IF_DELETE_HOOK
 1

	)

208 #i‚de‡
IFF_NOTRAILERS


209 
	#IFF_NOTRAILERS
 0x0

	)

211 #i‚de‡
IFF_OACTIVE


212 
	#IFF_OACTIVE
 0x0

	)

214 #i‚de‡
IFF_SIMPLEX


215 
	#IFF_SIMPLEX
 0x0

	)

217 #i‚de‡
IFF_LINK0


218 
	#IFF_LINK0
 0x0

	)

220 #i‚de‡
IFF_LINK1


221 
	#IFF_LINK1
 0x0

	)

223 #i‚de‡
IFF_LINK2


224 
	#IFF_LINK2
 0x0

	)

226 #i‚de‡
IFF_NOXMIT


227 
	#IFF_NOXMIT
 0x0

	)

229 #i‚de‡
IFF_NORTEXCH


230 
	#IFF_NORTEXCH
 0x0

	)

232 #i‚de‡
IFF_IPV4


233 
	#IFF_IPV4
 0x0

	)

235 #i‚de‡
IFF_IPV6


236 
	#IFF_IPV6
 0x0

	)

238 #i‚de‡
IFF_VIRTUAL


239 
	#IFF_VIRTUAL
 0x0

	)

243 
if_cmp_func
 (
öãrÁ˚
 *, interface *);

244 
öãrÁ˚
 *
if_¸óã
 (c⁄° *
«me
, 
«mñí
);

245 
öãrÁ˚
 *
if_lookup_by_ödex
 ();

246 
öãrÁ˚
 *
if_lookup_exa˘_addªss
 (
ö_addr
);

247 
öãrÁ˚
 *
if_lookup_addªss
 (
ö_addr
);

248 
öãrÁ˚
 *
if_lookup_¥efix
 (
¥efix
 *prefix);

252 
öãrÁ˚
 *
if_lookup_by_«me
 (c⁄° *
i‚ame
);

253 
öãrÁ˚
 *
if_gë_by_«me
 (c⁄° *
i‚ame
);

258 
öãrÁ˚
 *
if_lookup_by_«me_Àn
(c⁄° *
i‚ame
,

259 
size_t
 
«mñí
);

260 
öãrÁ˚
 *
if_gë_by_«me_Àn
(c⁄° *
i‚ame
, 
size_t
 
«mñí
);

266 
if_dñëe_ªèö
 (
öãrÁ˚
 *);

270 
if_dñëe
 (
öãrÁ˚
 *);

272 
if_is_up
 (
öãrÁ˚
 *);

273 
if_is_ru¬ög
 (
öãrÁ˚
 *);

274 
if_is_›î©ive
 (
öãrÁ˚
 *);

275 
if_is_lo›back
 (
öãrÁ˚
 *);

276 
if_is_brﬂdˇ°
 (
öãrÁ˚
 *);

277 
if_is_poöt›oöt
 (
öãrÁ˚
 *);

278 
if_is_mu…iˇ°
 (
öãrÁ˚
 *);

279 
if_add_hook
 (, (*)(
öãrÁ˚
 *));

280 
	`if_öô
 ();

281 
	`if_ãrmö©e
 ();

282 
	`if_dump_Æl
 ();

283 c⁄° *
	`if_Êag_dump
();

288 c⁄° *
	`ifödex2i‚ame
 ();

293 
	`i‚ame2ifödex
(c⁄° *
i‚ame
);

296 
c⁄√˘ed
 *
	`c⁄√˘ed_√w
 ();

297 
	`c⁄√˘ed_‰ì
 (
c⁄√˘ed
 *);

298 
	`c⁄√˘ed_add
 (
öãrÁ˚
 *, 
c⁄√˘ed
 *);

299 
c⁄√˘ed
 *
	`c⁄√˘ed_add_by_¥efix
 (
öãrÁ˚
 *,

300 
¥efix
 *,

301 
¥efix
 *);

302 
c⁄√˘ed
 *
	`c⁄√˘ed_dñëe_by_¥efix
 (
öãrÁ˚
 *,

303 
¥efix
 *);

304 
c⁄√˘ed
 *
	`c⁄√˘ed_lookup_addªss
 (
öãrÁ˚
 *,

305 
ö_addr
);

307 #i‚de‡
HAVE_IF_NAMETOINDEX


308 
	`if_«mëoödex
 (const *);

310 #i‚de‡
HAVE_IF_INDEXTONAME


311 *
	`if_ödext⁄ame
 (, *);

315 
li°
 *
iÊi°
;

316 
cmd_ñemít
 
öãrÁ˚_desc_cmd
;

317 
cmd_ñemít
 
no_öãrÁ˚_desc_cmd
;

318 
cmd_ñemít
 
öãrÁ˚_cmd
;

319 
cmd_ñemít
 
no_öãrÁ˚_cmd
;

320 
cmd_ñemít
 
öãrÁ˚_p£udo_cmd
;

321 
cmd_ñemít
 
no_öãrÁ˚_p£udo_cmd
;

322 
cmd_ñemít
 
show_addªss_cmd
;

	@if_rmap.c

22 
	~<zebø.h
>

24 
	~"hash.h
"

25 
	~"comm™d.h
"

26 
	~"mem‹y.h
"

27 
	~"if.h
"

28 
	~"if_rm≠.h
"

30 
hash
 *
	gi‰m≠hash
;

33 (*
if_rm≠_add_hook
Ë(
if_rm≠
 *Ë
NULL
;

34 (*
if_rm≠_dñëe_hook
Ë(
if_rm≠
 *Ë
NULL
;

36 
if_rm≠
 *

37 
	$if_rm≠_√w
 ()

39 
if_rm≠
 *
√w
;

41 
√w
 = 
	`XCALLOC
 (
MTYPE_IF_RMAP
,  (
if_rm≠
));

43  
√w
;

44 
	}
}

47 
	$if_rm≠_‰ì
 (
if_rm≠
 *if_rmap)

49 i‡(
if_rm≠
->
i‚ame
)

50 
	`XFREE
 (
MTYPE_IF_RMAP_NAME
, 
if_rm≠
->
i‚ame
);

52 i‡(
if_rm≠
->
rouãm≠
[
IF_RMAP_IN
])

53 
	`XFREE
 (
MTYPE_IF_RMAP_NAME
, 
if_rm≠
->
rouãm≠
[
IF_RMAP_IN
]);

54 i‡(
if_rm≠
->
rouãm≠
[
IF_RMAP_OUT
])

55 
	`XFREE
 (
MTYPE_IF_RMAP_NAME
, 
if_rm≠
->
rouãm≠
[
IF_RMAP_OUT
]);

57 
	`XFREE
 (
MTYPE_IF_RMAP
, 
if_rm≠
);

58 
	}
}

60 
if_rm≠
 *

61 
	$if_rm≠_lookup
 (c⁄° *
i‚ame
)

63 
if_rm≠
 
key
;

64 
if_rm≠
 *if_rmap;

67 
key
.
i‚ame
 = (*)ifname;

69 
if_rm≠
 = 
	`hash_lookup
 (
i‰m≠hash
, &
key
);

71  
if_rm≠
;

72 
	}
}

75 
if_rm≠_hook_add
 ((*
func
Ë(
if_rm≠
 *))

77 
if_rm≠_add_hook
 = 
func
;

78 
	}
}

81 
if_rm≠_hook_dñëe
 ((*
func
Ë(
if_rm≠
 *))

83 
if_rm≠_dñëe_hook
 = 
func
;

84 
	}
}

87 
	$if_rm≠_hash_Æloc
 (*
¨g
)

89 
if_rm≠
 *
iÁrg
 = 
¨g
;

90 
if_rm≠
 *if_rmap;

92 
if_rm≠
 = 
	`if_rm≠_√w
 ();

93 
if_rm≠
->
i‚ame
 = 
	`XSTRDUP
 (
MTYPE_IF_RMAP_NAME
, 
iÁrg
->ifname);

95  
if_rm≠
;

96 
	}
}

98 
if_rm≠
 *

99 
	$if_rm≠_gë
 (c⁄° *
i‚ame
)

101 
if_rm≠
 
key
;

104 
key
.
i‚ame
 = (*)ifname;

106  (
if_rm≠
 *Ë
	`hash_gë
 (
i‰m≠hash
, &
key
, 
if_rm≠_hash_Æloc
);

107 
	}
}

110 
	$if_rm≠_hash_make
 (*
d©a
)

112 c⁄° 
if_rm≠
 *if_rm≠ = 
d©a
;

114  
	`°rög_hash_make
 (
if_rm≠
->
i‚ame
);

115 
	}
}

118 
	$if_rm≠_hash_cmp
 (c⁄° *
¨g1
, c⁄° * 
¨g2
)

120 c⁄° 
if_rm≠
 *
if_rm≠1
 = 
¨g1
;

121 c⁄° 
if_rm≠
 *
if_rm≠2
 = 
¨g2
;

123  
	`°rcmp
 (
if_rm≠1
->
i‚ame
, 
if_rm≠2
->ifname) == 0;

124 
	}
}

126 
if_rm≠
 *

127 
	$if_rm≠_£t
 (c⁄° *
i‚ame
, 
if_rm≠_ty≥
 
ty≥
,

128 c⁄° *
rouãm≠_«me
)

130 
if_rm≠
 *if_rmap;

132 
if_rm≠
 = 
	`if_rm≠_gë
 (
i‚ame
);

134 i‡(
ty≥
 =
IF_RMAP_IN
)

136 i‡(
if_rm≠
->
rouãm≠
[
IF_RMAP_IN
])

137 
	`XFREE
 (
MTYPE_IF_RMAP_NAME
, 
if_rm≠
->
rouãm≠
[
IF_RMAP_IN
]);

138 
if_rm≠
->
rouãm≠
[
IF_RMAP_IN
]

139 
	`XSTRDUP
 (
MTYPE_IF_RMAP_NAME
, 
rouãm≠_«me
);

141 i‡(
ty≥
 =
IF_RMAP_OUT
)

143 i‡(
if_rm≠
->
rouãm≠
[
IF_RMAP_OUT
])

144 
	`XFREE
 (
MTYPE_IF_RMAP_NAME
, 
if_rm≠
->
rouãm≠
[
IF_RMAP_OUT
]);

145 
if_rm≠
->
rouãm≠
[
IF_RMAP_OUT
]

146 
	`XSTRDUP
 (
MTYPE_IF_RMAP_NAME
, 
rouãm≠_«me
);

149 i‡(
if_rm≠_add_hook
)

150 (*
if_rm≠_add_hook
Ë(
if_rm≠
);

152  
if_rm≠
;

153 
	}
}

156 
	$if_rm≠_un£t
 (c⁄° *
i‚ame
, 
if_rm≠_ty≥
 
ty≥
,

157 c⁄° *
rouãm≠_«me
)

159 
if_rm≠
 *if_rmap;

161 
if_rm≠
 = 
	`if_rm≠_lookup
 (
i‚ame
);

162 i‡(!
if_rm≠
)

165 i‡(
ty≥
 =
IF_RMAP_IN
)

167 i‡(!
if_rm≠
->
rouãm≠
[
IF_RMAP_IN
])

169 i‡(
	`°rcmp
 (
if_rm≠
->
rouãm≠
[
IF_RMAP_IN
], 
rouãm≠_«me
) != 0)

172 
	`XFREE
 (
MTYPE_IF_RMAP_NAME
, 
if_rm≠
->
rouãm≠
[
IF_RMAP_IN
]);

173 
if_rm≠
->
rouãm≠
[
IF_RMAP_IN
] = 
NULL
;

176 i‡(
ty≥
 =
IF_RMAP_OUT
)

178 i‡(!
if_rm≠
->
rouãm≠
[
IF_RMAP_OUT
])

180 i‡(
	`°rcmp
 (
if_rm≠
->
rouãm≠
[
IF_RMAP_OUT
], 
rouãm≠_«me
) != 0)

183 
	`XFREE
 (
MTYPE_IF_RMAP_NAME
, 
if_rm≠
->
rouãm≠
[
IF_RMAP_OUT
]);

184 
if_rm≠
->
rouãm≠
[
IF_RMAP_OUT
] = 
NULL
;

187 i‡(
if_rm≠_dñëe_hook
)

188 (*
if_rm≠_dñëe_hook
Ë(
if_rm≠
);

190 i‡(
if_rm≠
->
rouãm≠
[
IF_RMAP_IN
] =
NULL
 &&

191 
if_rm≠
->
rouãm≠
[
IF_RMAP_OUT
] =
NULL
)

193 
	`hash_ªÀa£
 (
i‰m≠hash
, 
if_rm≠
);

194 
	`if_rm≠_‰ì
 (
if_rm≠
);

198 
	}
}

200 
DEFUN
 (
if_rm≠
,

201 
if_rm≠_cmd
,

209 
if_rm≠_ty≥
 
	gty≥
;

211 i‡(
°∫cmp
 (
¨gv
[1], "i", 1) == 0)

212 
ty≥
 = 
IF_RMAP_IN
;

213 i‡(
°∫cmp
 (
¨gv
[1], "o", 1) == 0)

214 
ty≥
 = 
IF_RMAP_OUT
;

217 
vty_out
 (
vty
, "rouã-m≠ dúe˘i⁄ mu° bê[ö|out]%s", 
VTY_NEWLINE
);

218  
	gCMD_WARNING
;

221 
if_rm≠_£t
 (
¨gv
[2], 
ty≥
,árgv[0]);

223  
	gCMD_SUCCESS
;

226 
ALIAS
 (
if_rm≠
,

227 
if_ùv6_rm≠_cmd
,

235 
DEFUN
 (
no_if_rm≠
,

236 
no_if_rm≠_cmd
,

238 
NO_STR


245 
	gªt
;

246 
if_rm≠_ty≥
 
	gty≥
;

248 i‡(
°∫cmp
 (
¨gv
[1], "i", 1) == 0)

249 
ty≥
 = 
IF_RMAP_IN
;

250 i‡(
°∫cmp
 (
¨gv
[1], "o", 1) == 0)

251 
ty≥
 = 
IF_RMAP_OUT
;

254 
vty_out
 (
vty
, "rouã-m≠ dúe˘i⁄ mu° bê[ö|out]%s", 
VTY_NEWLINE
);

255  
	gCMD_WARNING
;

258 
	gªt
 = 
if_rm≠_un£t
 (
¨gv
[2], 
ty≥
,árgv[0]);

259 i‡(! 
	gªt
)

261 
vty_out
 (
vty
, "rouã-m≠ d€¢'àexi°%s", 
VTY_NEWLINE
);

262  
	gCMD_WARNING
;

264  
	gCMD_SUCCESS
;

267 
ALIAS
 (
no_if_rm≠
,

268 
no_if_ùv6_rm≠_cmd
,

270 
NO_STR


279 
	$c⁄fig_wrôe_if_rm≠
 (
vty
 *vty)

281 
i
;

282 
hash_backë
 *
mp
;

283 
wrôe
 = 0;

285 
i
 = 0; i < 
i‰m≠hash
->
size
; i++)

286 
mp
 = 
i‰m≠hash
->
ödex
[
i
]; mp; m∞mp->
√xt
)

288 
if_rm≠
 *if_rmap;

290 
if_rm≠
 = 
mp
->
d©a
;

292 i‡(
if_rm≠
->
rouãm≠
[
IF_RMAP_IN
])

294 
	`vty_out
 (
vty
, "Ñoute-map %s in %s%s",

295 
if_rm≠
->
rouãm≠
[
IF_RMAP_IN
],

296 
if_rm≠
->
i‚ame
,

297 
VTY_NEWLINE
);

298 
wrôe
++;

301 i‡(
if_rm≠
->
rouãm≠
[
IF_RMAP_OUT
])

303 
	`vty_out
 (
vty
, "Ñoute-map %s out %s%s",

304 
if_rm≠
->
rouãm≠
[
IF_RMAP_OUT
],

305 
if_rm≠
->
i‚ame
,

306 
VTY_NEWLINE
);

307 
wrôe
++;

310  
wrôe
;

311 
	}
}

314 
	$if_rm≠_ª£t
 ()

316 
	`hash_˛ón
 (
i‰m≠hash
, ((*Ë(*)Ë
if_rm≠_‰ì
);

317 
	}
}

320 
	$if_rm≠_öô
 (
node
)

322 
i‰m≠hash
 = 
	`hash_¸óã
 (
if_rm≠_hash_make
, 
if_rm≠_hash_cmp
);

323 i‡(
node
 =
RIPNG_NODE
) {

324 
	`ö°Æl_ñemít
 (
RIPNG_NODE
, &
if_ùv6_rm≠_cmd
);

325 
	`ö°Æl_ñemít
 (
RIPNG_NODE
, &
no_if_ùv6_rm≠_cmd
);

326 } i‡(
node
 =
RIP_NODE
) {

327 
	`ö°Æl_ñemít
 (
RIP_NODE
, &
if_rm≠_cmd
);

328 
	`ö°Æl_ñemít
 (
RIP_NODE
, &
no_if_rm≠_cmd
);

330 
	}
}

	@if_rmap.h

22 #i‚de‡
_ZEBRA_IF_RMAP_H


23 
	#_ZEBRA_IF_RMAP_H


	)

25 
	eif_rm≠_ty≥


27 
	mIF_RMAP_IN
,

28 
	mIF_RMAP_OUT
,

29 
	mIF_RMAP_MAX


32 
	sif_rm≠


35 *
	mi‚ame
;

37 *
	mrouãm≠
[
IF_RMAP_MAX
];

40 
if_rm≠_öô
 ();

41 
if_rm≠_ª£t
 ();

42 
if_rm≠_hook_add
 ((*Ë(
if_rm≠
 *));

43 
	`if_rm≠_hook_dñëe
 ((*Ë(
if_rm≠
 *));

44 
if_rm≠
 *
	`if_rm≠_lookup
 (const *);

45 
	`c⁄fig_wrôe_if_rm≠
 (
vty
 *);

	@jhash.c

20 
	~"zebø.h
"

21 
	~"jhash.h
"

24 
	#JHASH_GOLDEN_RATIO
 0x9e3779b9

	)

27 
	#__jhash_mix
(
a
, 
b
, 
c
) \

29 
a
 -
b
;á -
c
;á ^= (c>>13); \

30 
b
 -
c
; b -
a
; b ^= (a<<8); \

31 
c
 -
a
; c -
b
; c ^= (b>>13); \

32 
a
 -
b
;á -
c
;á ^= (c>>12); \

33 
b
 -
c
; b -
a
; b ^= (a<<16); \

34 
c
 -
a
; c -
b
; c ^= (b>>5); \

35 
a
 -
b
;á -
c
;á ^= (c>>3); \

36 
b
 -
c
; b -
a
; b ^= (a<<10); \

37 
c
 -
a
; c -
b
; c ^= (b>>15); \

38 }

	)

44 
u_öt32_t


45 
	$jhash
 (c⁄° *
key
, 
u_öt32_t
 
Àngth
, u_öt32_à
öôvÆ
)

47 
u_öt32_t
 
a
, 
b
, 
c
, 
Àn
;

48 c⁄° 
u_öt8_t
 *
k
 = 
key
;

50 
Àn
 = 
Àngth
;

51 
a
 = 
b
 = 
JHASH_GOLDEN_RATIO
;

52 
c
 = 
öôvÆ
;

54 
Àn
 >= 12)

56 
a
 +=

57 (
k
[0] + ((
u_öt32_t
) k[1] << 8) + ((u_int32_t) k[2] << 16) +

58 ((
u_öt32_t
Ë
k
[3] << 24));

59 
b
 +=

60 (
k
[4] + ((
u_öt32_t
) k[5] << 8) + ((u_int32_t) k[6] << 16) +

61 ((
u_öt32_t
Ë
k
[7] << 24));

62 
c
 +=

63 (
k
[8] + ((
u_öt32_t
) k[9] << 8) + ((u_int32_t) k[10] << 16) +

64 ((
u_öt32_t
Ë
k
[11] << 24));

66 
	`__jhash_mix
 (
a
, 
b
, 
c
);

68 
k
 += 12;

69 
Àn
 -= 12;

72 
c
 +
Àngth
;

73 
Àn
)

76 
c
 +((
u_öt32_t
Ë
k
[10] << 24);

78 
c
 +((
u_öt32_t
Ë
k
[9] << 16);

80 
c
 +((
u_öt32_t
Ë
k
[8] << 8);

82 
b
 +((
u_öt32_t
Ë
k
[7] << 24);

84 
b
 +((
u_öt32_t
Ë
k
[6] << 16);

86 
b
 +((
u_öt32_t
Ë
k
[5] << 8);

88 
b
 +
k
[4];

90 
a
 +((
u_öt32_t
Ë
k
[3] << 24);

92 
a
 +((
u_öt32_t
Ë
k
[2] << 16);

94 
a
 +((
u_öt32_t
Ë
k
[1] << 8);

96 
a
 +
k
[0];

99 
	`__jhash_mix
 (
a
, 
b
, 
c
);

101  
c
;

102 
	}
}

107 
u_öt32_t


108 
	$jhash2
 (c⁄° 
u_öt32_t
 *
k
, u_öt32_à
Àngth
, u_öt32_à
öôvÆ
)

110 
u_öt32_t
 
a
, 
b
, 
c
, 
Àn
;

112 
a
 = 
b
 = 
JHASH_GOLDEN_RATIO
;

113 
c
 = 
öôvÆ
;

114 
Àn
 = 
Àngth
;

116 
Àn
 >= 3)

118 
a
 +
k
[0];

119 
b
 +
k
[1];

120 
c
 +
k
[2];

121 
	`__jhash_mix
 (
a
, 
b
, 
c
);

122 
k
 += 3;

123 
Àn
 -= 3;

126 
c
 +
Àngth
 * 4;

128 
Àn
)

131 
b
 +
k
[1];

133 
a
 +
k
[0];

136 
	`__jhash_mix
 (
a
, 
b
, 
c
);

138  
c
;

139 
	}
}

148 
u_öt32_t


149 
	$jhash_3w‹ds
 (
u_öt32_t
 
a
, u_öt32_à
b
, u_öt32_à
c
, u_öt32_à
öôvÆ
)

151 
a
 +
JHASH_GOLDEN_RATIO
;

152 
b
 +
JHASH_GOLDEN_RATIO
;

153 
c
 +
öôvÆ
;

155 
	`__jhash_mix
 (
a
, 
b
, 
c
);

157  
c
;

158 
	}
}

160 
u_öt32_t


161 
	$jhash_2w‹ds
 (
u_öt32_t
 
a
, u_öt32_à
b
, u_öt32_à
öôvÆ
)

163  
	`jhash_3w‹ds
 (
a
, 
b
, 0, 
öôvÆ
);

164 
	}
}

166 
u_öt32_t


167 
	$jhash_1w‹d
 (
u_öt32_t
 
a
, u_öt32_à
öôvÆ
)

169  
	`jhash_3w‹ds
 (
a
, 0, 0, 
öôvÆ
);

170 
	}
}

	@jhash.h

20 #i‚de‡
_QUAGGA_JHASH_H


21 
	#_QUAGGA_JHASH_H


	)

27 
u_öt32_t
 
jhash
(c⁄° *
key
, u_öt32_à
Àngth
, u_öt32_à
öôvÆ
);

32 
u_öt32_t
 
jhash2
(c⁄° u_öt32_à*
k
, u_öt32_à
Àngth
, u_öt32_à
öôvÆ
);

40 
u_öt32_t
 
jhash_3w‹ds
(u_öt32_à
a
, u_öt32_à
b
, u_öt32_à
c
, u_öt32_à
öôvÆ
);

41 
u_öt32_t
 
jhash_2w‹ds
(u_öt32_à
a
, u_öt32_à
b
, u_öt32_à
öôvÆ
);

42 
u_öt32_t
 
jhash_1w‹d
(u_öt32_à
a
, u_öt32_à
öôvÆ
);

	@keychain.c

21 
	~<zebø.h
>

23 
	~"comm™d.h
"

24 
	~"mem‹y.h
"

25 
	~"lökli°.h
"

26 
	~"keychaö.h
"

29 
li°
 *
	gkeychaö_li°
;

31 
keychaö
 *

32 
	$keychaö_√w
 ()

34  
	`XCALLOC
 (
MTYPE_KEYCHAIN
,  (
keychaö
));

35 
	}
}

38 
	$keychaö_‰ì
 (
keychaö
 *keychain)

40 
	`XFREE
 (
MTYPE_KEYCHAIN
, 
keychaö
);

41 
	}
}

43 
key
 *

44 
	$key_√w
 ()

46  
	`XCALLOC
 (
MTYPE_KEY
,  (
key
));

47 
	}
}

50 
	$key_‰ì
 (
key
 *key)

52 
	`XFREE
 (
MTYPE_KEY
, 
key
);

53 
	}
}

55 
keychaö
 *

56 
	$keychaö_lookup
 (c⁄° *
«me
)

58 
li°node
 *
node
;

59 
keychaö
 *keychain;

61 i‡(
«me
 =
NULL
)

62  
NULL
;

64 
	`ALL_LIST_ELEMENTS_RO
 (
keychaö_li°
, 
node
, 
keychaö
))

66 i‡(
	`°rcmp
 (
keychaö
->
«me
,Çame) == 0)

67  
keychaö
;

69  
NULL
;

70 
	}
}

73 
	$key_cmp_func
 (*
¨g1
, *
¨g2
)

75 c⁄° 
key
 *
k1
 = 
¨g1
;

76 c⁄° 
key
 *
k2
 = 
¨g2
;

78 i‡(
k1
->
ödex
 > 
k2
->index)

80 i‡(
k1
->
ödex
 < 
k2
->index)

83 
	}
}

86 
	$key_dñëe_func
 (
key
 *key)

88 i‡(
key
->
°rög
)

89 
	`‰ì
 (
key
->
°rög
);

90 
	`key_‰ì
 (
key
);

91 
	}
}

93 
keychaö
 *

94 
	$keychaö_gë
 (c⁄° *
«me
)

96 
keychaö
 *keychain;

98 
keychaö
 = 
	`keychaö_lookup
 (
«me
);

100 i‡(
keychaö
)

101  
keychaö
;

103 
keychaö
 = 
	`keychaö_√w
 ();

104 
keychaö
->
«me
 = 
	`°rdup
 (name);

105 
keychaö
->
key
 = 
	`li°_√w
 ();

106 
keychaö
->
key
->
cmp
 = ((*)(*, *)Ë
key_cmp_func
;

107 
keychaö
->
key
->
dñ
 = ((*)(*)Ë
key_dñëe_func
;

108 
	`li°node_add
 (
keychaö_li°
, 
keychaö
);

110  
keychaö
;

111 
	}
}

114 
	$keychaö_dñëe
 (
keychaö
 *keychain)

116 i‡(
keychaö
->
«me
)

117 
	`‰ì
 (
keychaö
->
«me
);

119 
	`li°_dñëe
 (
keychaö
->
key
);

120 
	`li°node_dñëe
 (
keychaö_li°
, 
keychaö
);

121 
	`keychaö_‰ì
 (
keychaö
);

122 
	}
}

124 
key
 *

125 
	$key_lookup
 (c⁄° 
keychaö
 *keychaö, 
u_öt32_t
 
ödex
)

127 
li°node
 *
node
;

128 
key
 *key;

130 
	`ALL_LIST_ELEMENTS_RO
 (
keychaö
->
key
, 
node
, key))

132 i‡(
key
->
ödex
 == index)

133  
key
;

135  
NULL
;

136 
	}
}

138 
key
 *

139 
	$key_lookup_f‹_ac˚±
 (c⁄° 
keychaö
 *keychaö, 
u_öt32_t
 
ödex
)

141 
li°node
 *
node
;

142 
key
 *key;

143 
time_t
 
now
;

145 
now
 = 
	`time
 (
NULL
);

147 
	`ALL_LIST_ELEMENTS_RO
 (
keychaö
->
key
, 
node
, key))

149 i‡(
key
->
ödex
 >= index)

151 i‡(
key
->
ac˚±
.
°¨t
 == 0)

152  
key
;

154 i‡(
key
->
ac˚±
.
°¨t
 <
now
)

155 i‡(
key
->
ac˚±
.
íd
 >
now
 || key->accept.end == -1)

156  
key
;

159  
NULL
;

160 
	}
}

162 
key
 *

163 
	$key_m©ch_f‹_ac˚±
 (c⁄° 
keychaö
 *keychaö, c⁄° *
auth_°r
)

165 
li°node
 *
node
;

166 
key
 *key;

167 
time_t
 
now
;

169 
now
 = 
	`time
 (
NULL
);

171 
	`ALL_LIST_ELEMENTS_RO
 (
keychaö
->
key
, 
node
, key))

173 i‡(
key
->
ac˚±
.
°¨t
 == 0 ||

174 (
key
->
ac˚±
.
°¨t
 <
now
 &&

175 (
key
->
ac˚±
.
íd
 >
now
 || key->accept.end == -1)))

176 i‡(
	`°∫cmp
 (
key
->
°rög
, 
auth_°r
, 16) == 0)

177  
key
;

179  
NULL
;

180 
	}
}

182 
key
 *

183 
	$key_lookup_f‹_£nd
 (c⁄° 
keychaö
 *keychain)

185 
li°node
 *
node
;

186 
key
 *key;

187 
time_t
 
now
;

189 
now
 = 
	`time
 (
NULL
);

191 
	`ALL_LIST_ELEMENTS_RO
 (
keychaö
->
key
, 
node
, key))

193 i‡(
key
->
£nd
.
°¨t
 == 0)

194  
key
;

196 i‡(
key
->
£nd
.
°¨t
 <
now
)

197 i‡(
key
->
£nd
.
íd
 >
now
 || key->send.end == -1)

198  
key
;

200  
NULL
;

201 
	}
}

203 
key
 *

204 
	$key_gë
 (c⁄° 
keychaö
 *keychaö, 
u_öt32_t
 
ödex
)

206 
key
 *key;

208 
key
 = 
	`key_lookup
 (
keychaö
, 
ödex
);

210 i‡(
key
)

211  
key
;

213 
key
 = 
	`key_√w
 ();

214 
key
->
ödex
 = index;

215 
	`li°node_add_s‹t
 (
keychaö
->
key
, key);

217  
key
;

218 
	}
}

221 
	$key_dñëe
 (
keychaö
 *keychaö, 
key
 *key)

223 
	`li°node_dñëe
 (
keychaö
->
key
, key);

225 i‡(
key
->
°rög
)

226 
	`‰ì
 (
key
->
°rög
);

227 
	`key_‰ì
 (
key
);

228 
	}
}

230 
DEFUN
 (
key_chaö
,

231 
key_chaö_cmd
,

237 
keychaö
 *
	gkeychaö
;

239 
	gkeychaö
 = 
keychaö_gë
 (
¨gv
[0]);

240 
	gvty
->
	gödex
 = 
keychaö
;

241 
	gvty
->
	gnode
 = 
KEYCHAIN_NODE
;

243  
	gCMD_SUCCESS
;

246 
DEFUN
 (
no_key_chaö
,

247 
no_key_chaö_cmd
,

249 
NO_STR


254 
keychaö
 *
	gkeychaö
;

256 
	gkeychaö
 = 
keychaö_lookup
 (
¨gv
[0]);

258 i‡(! 
	gkeychaö
)

260 
vty_out
 (
vty
, "C™'àföd keychaö %s%s", 
¨gv
[0], 
VTY_NEWLINE
);

261  
	gCMD_WARNING
;

264 
keychaö_dñëe
 (
keychaö
);

266  
	gCMD_SUCCESS
;

269 
DEFUN
 (
key
,

270 
key_cmd
,

275 
keychaö
 *
	gkeychaö
;

276 
key
 *
	gkey
;

277 
u_öt32_t
 
	gödex
;

279 
	gkeychaö
 = 
vty
->
ödex
;

281 
VTY_GET_INTEGER
 ("key idítifõr", 
ödex
, 
¨gv
[0]);

282 
	gkey
 = 
key_gë
 (
keychaö
, 
ödex
);

283 
	gvty
->
	gödex_sub
 = 
key
;

284 
	gvty
->
	gnode
 = 
KEYCHAIN_KEY_NODE
;

286  
	gCMD_SUCCESS
;

289 
DEFUN
 (
no_key
,

290 
no_key_cmd
,

292 
NO_STR


296 
keychaö
 *
	gkeychaö
;

297 
key
 *
	gkey
;

298 
u_öt32_t
 
	gödex
;

300 
	gkeychaö
 = 
vty
->
ödex
;

302 
VTY_GET_INTEGER
 ("key idítifõr", 
ödex
, 
¨gv
[0]);

303 
	gkey
 = 
key_lookup
 (
keychaö
, 
ödex
);

304 i‡(! 
	gkey
)

306 
vty_out
 (
vty
, "C™'àföd key %d%s", 
ödex
, 
VTY_NEWLINE
);

307  
	gCMD_WARNING
;

310 
key_dñëe
 (
keychaö
, 
key
);

312 
	gvty
->
	gnode
 = 
KEYCHAIN_NODE
;

314  
	gCMD_SUCCESS
;

317 
DEFUN
 (
key_°rög
,

318 
key_°rög_cmd
,

323 
key
 *
	gkey
;

325 
	gkey
 = 
vty
->
ödex_sub
;

327 i‡(
	gkey
->
	g°rög
)

328 
‰ì
 (
key
->
°rög
);

329 
	gkey
->
	g°rög
 = 
°rdup
 (
¨gv
[0]);

331  
	gCMD_SUCCESS
;

334 
DEFUN
 (
no_key_°rög
,

335 
no_key_°rög_cmd
,

337 
NO_STR


341 
key
 *
	gkey
;

343 
	gkey
 = 
vty
->
ödex_sub
;

345 i‡(
	gkey
->
	g°rög
)

347 
‰ì
 (
key
->
°rög
);

348 
	gkey
->
	g°rög
 = 
NULL
;

351  
	gCMD_SUCCESS
;

356 
time_t


357 
	$key_°r2time
 (c⁄° *
time_°r
, c⁄° *
day_°r
, c⁄° *
m⁄th_°r
,

358 c⁄° *
yór_°r
)

360 
i
 = 0;

361 *
cﬁ⁄
;

362 
tm
Åm;

363 
time_t
 
time
;

364 
£c
, 
mö
, 
hour
;

365 
day
, 
m⁄th
, 
yór
;

367 c⁄° *
m⁄th_«me
[] =

381 
NULL


384 
	#GET_LONG_RANGE
(
V
,
STR
,
MIN
,
MAX
) \

386 
tm∂
; \

387 *
íd±r
 = 
NULL
; \

388 
tm∂
 = 
	`°πoul
 ((
STR
), &
íd±r
, 10); \

389 i‡(*
íd±r
 !'\0' || 
tm∂
 =
ULONG_MAX
) \

391 i‡–
tm∂
 < (
MIN
Ë||Åm∂ > (
MAX
)) \

393 (
V
Ë
tm∂
; \

394 }

	)

397 
cﬁ⁄
 = 
	`°rchr
 (
time_°r
, ':');

398 i‡(
cﬁ⁄
 =
NULL
)

400 *
cﬁ⁄
 = '\0';

403 
	`GET_LONG_RANGE
 (
hour
, 
time_°r
, 0, 23);

406 
time_°r
 = 
cﬁ⁄
 + 1;

407 
cﬁ⁄
 = 
	`°rchr
 (
time_°r
, ':');

408 i‡(*
time_°r
 ='\0' || 
cﬁ⁄
 =
NULL
)

410 *
cﬁ⁄
 = '\0';

413 
	`GET_LONG_RANGE
 (
mö
, 
time_°r
, 0, 59);

416 
time_°r
 = 
cﬁ⁄
 + 1;

417 i‡(*
time_°r
 == '\0')

421 
	`GET_LONG_RANGE
 (
£c
, 
time_°r
, 0, 59);

424 
	`GET_LONG_RANGE
 (
day
, 
day_°r
, 1, 31);

427 
m⁄th
 = 0;

428 i‡(
	`°æí
 (
m⁄th_°r
) >= 3)

429 
i
 = 0; 
m⁄th_«me
[i]; i++)

430 i‡(
	`°∫cmp
 (
m⁄th_°r
, 
m⁄th_«me
[
i
], 
	`°æí
 (month_str)) == 0)

432 
m⁄th
 = 
i
;

435 i‡(! 
m⁄th_«me
[
i
])

439 
	`GET_LONG_RANGE
 (
yór
, 
yór_°r
, 1993, 2035);

441 
	`mem£t
 (&
tm
, 0,  (tm));

442 
tm
.
tm_£c
 = 
£c
;

443 
tm
.
tm_mö
 = 
mö
;

444 
tm
.
tm_hour
 = 
hour
;

445 
tm
.
tm_m⁄
 = 
m⁄th
;

446 
tm
.
tm_mday
 = 
day
;

447 
tm
.
tm_yór
 = 
yór
 - 1900;

449 
time
 = 
	`mktime
 (&
tm
);

451  
time
;

452 #unde‡
GET_LONG_RANGE


453 
	}
}

456 
	$key_li„time_£t
 (
vty
 *vty, 
key_ønge
 *
kønge
,

457 c⁄° *
°ime_°r
, c⁄° *
sday_°r
,

458 c⁄° *
sm⁄th_°r
, c⁄° *
syór_°r
,

459 c⁄° *
ëime_°r
, c⁄° *
eday_°r
,

460 c⁄° *
em⁄th_°r
, c⁄° *
eyór_°r
)

462 
time_t
 
time_°¨t
;

463 
time_t
 
time_íd
;

465 
time_°¨t
 = 
	`key_°r2time
 (
°ime_°r
, 
sday_°r
, 
sm⁄th_°r
, 
syór_°r
);

466 i‡(
time_°¨t
 < 0)

468 
	`vty_out
 (
vty
, "MÆf‹medÅimêvÆue%s", 
VTY_NEWLINE
);

469  
CMD_WARNING
;

471 
time_íd
 = 
	`key_°r2time
 (
ëime_°r
, 
eday_°r
, 
em⁄th_°r
, 
eyór_°r
);

473 i‡(
time_íd
 < 0)

475 
	`vty_out
 (
vty
, "MÆf‹medÅimêvÆue%s", 
VTY_NEWLINE
);

476  
CMD_WARNING
;

479 i‡(
time_íd
 <
time_°¨t
)

481 
	`vty_out
 (
vty
, "Expúêtimêi†nŸÜ©îÅh™ sèπÅime%s", 
VTY_NEWLINE
);

482  
CMD_WARNING
;

485 
kønge
->
°¨t
 = 
time_°¨t
;

486 
kønge
->
íd
 = 
time_íd
;

488  
CMD_SUCCESS
;

489 
	}
}

492 
	$key_li„time_duøti⁄_£t
 (
vty
 *vty, 
key_ønge
 *
kønge
,

493 c⁄° *
°ime_°r
, c⁄° *
sday_°r
,

494 c⁄° *
sm⁄th_°r
, c⁄° *
syór_°r
,

495 c⁄° *
duøti⁄_°r
)

497 
time_t
 
time_°¨t
;

498 
u_öt32_t
 
duøti⁄
;

500 
time_°¨t
 = 
	`key_°r2time
 (
°ime_°r
, 
sday_°r
, 
sm⁄th_°r
, 
syór_°r
);

501 i‡(
time_°¨t
 < 0)

503 
	`vty_out
 (
vty
, "MÆf‹medÅimêvÆue%s", 
VTY_NEWLINE
);

504  
CMD_WARNING
;

506 
kønge
->
°¨t
 = 
time_°¨t
;

508 
	`VTY_GET_INTEGER
 ("duøti⁄", 
duøti⁄
, 
duøti⁄_°r
);

509 
kønge
->
duøti⁄
 = 1;

510 
kønge
->
íd
 = 
time_°¨t
 + 
duøti⁄
;

512  
CMD_SUCCESS
;

513 
	}
}

516 
	$key_li„time_öföôe_£t
 (
vty
 *vty, 
key_ønge
 *
kønge
,

517 c⁄° *
°ime_°r
, c⁄° *
sday_°r
,

518 c⁄° *
sm⁄th_°r
, c⁄° *
syór_°r
)

520 
time_t
 
time_°¨t
;

522 
time_°¨t
 = 
	`key_°r2time
 (
°ime_°r
, 
sday_°r
, 
sm⁄th_°r
, 
syór_°r
);

523 i‡(
time_°¨t
 < 0)

525 
	`vty_out
 (
vty
, "MÆf‹medÅimêvÆue%s", 
VTY_NEWLINE
);

526  
CMD_WARNING
;

528 
kønge
->
°¨t
 = 
time_°¨t
;

530 
kønge
->
íd
 = -1;

532  
CMD_SUCCESS
;

533 
	}
}

535 
DEFUN
 (
ac˚±_li„time_day_m⁄th_day_m⁄th
,

536 
ac˚±_li„time_day_m⁄th_day_m⁄th_cmd
,

548 
key
 *
	gkey
;

550 
	gkey
 = 
vty
->
ödex_sub
;

552  
key_li„time_£t
 (
vty
, &
key
->
ac˚±
, 
¨gv
[0],árgv[1],árgv[2],

553 
¨gv
[3],árgv[4],árgv[5],árgv[6],árgv[7]);

556 
DEFUN
 (
ac˚±_li„time_day_m⁄th_m⁄th_day
,

557 
ac˚±_li„time_day_m⁄th_m⁄th_day_cmd
,

569 
key
 *
	gkey
;

571 
	gkey
 = 
vty
->
ödex_sub
;

573  
key_li„time_£t
 (
vty
, &
key
->
ac˚±
, 
¨gv
[0],árgv[1],árgv[2],

574 
¨gv
[3],árgv[4],árgv[6],árgv[5],árgv[7]);

577 
DEFUN
 (
ac˚±_li„time_m⁄th_day_day_m⁄th
,

578 
ac˚±_li„time_m⁄th_day_day_m⁄th_cmd
,

590 
key
 *
	gkey
;

592 
	gkey
 = 
vty
->
ödex_sub
;

594  
key_li„time_£t
 (
vty
, &
key
->
ac˚±
, 
¨gv
[0],árgv[2],árgv[1],

595 
¨gv
[3],árgv[4],árgv[5],árgv[6],árgv[7]);

598 
DEFUN
 (
ac˚±_li„time_m⁄th_day_m⁄th_day
,

599 
ac˚±_li„time_m⁄th_day_m⁄th_day_cmd
,

611 
key
 *
	gkey
;

613 
	gkey
 = 
vty
->
ödex_sub
;

615  
key_li„time_£t
 (
vty
, &
key
->
ac˚±
, 
¨gv
[0],árgv[2],árgv[1],

616 
¨gv
[3],árgv[4],árgv[6],árgv[5],árgv[7]);

619 
DEFUN
 (
ac˚±_li„time_öföôe_day_m⁄th
,

620 
ac˚±_li„time_öföôe_day_m⁄th_cmd
,

629 
key
 *
	gkey
;

631 
	gkey
 = 
vty
->
ödex_sub
;

633  
key_li„time_öföôe_£t
 (
vty
, &
key
->
ac˚±
, 
¨gv
[0],árgv[1],

634 
¨gv
[2],árgv[3]);

637 
DEFUN
 (
ac˚±_li„time_öföôe_m⁄th_day
,

638 
ac˚±_li„time_öföôe_m⁄th_day_cmd
,

647 
key
 *
	gkey
;

649 
	gkey
 = 
vty
->
ödex_sub
;

651  
key_li„time_öföôe_£t
 (
vty
, &
key
->
ac˚±
, 
¨gv
[0],árgv[2],

652 
¨gv
[1],árgv[3]);

655 
DEFUN
 (
ac˚±_li„time_duøti⁄_day_m⁄th
,

656 
ac˚±_li„time_duøti⁄_day_m⁄th_cmd
,

666 
key
 *
	gkey
;

668 
	gkey
 = 
vty
->
ödex_sub
;

670  
key_li„time_duøti⁄_£t
 (
vty
, &
key
->
ac˚±
, 
¨gv
[0],árgv[1],

671 
¨gv
[2],árgv[3],árgv[4]);

674 
DEFUN
 (
ac˚±_li„time_duøti⁄_m⁄th_day
,

675 
ac˚±_li„time_duøti⁄_m⁄th_day_cmd
,

685 
key
 *
	gkey
;

687 
	gkey
 = 
vty
->
ödex_sub
;

689  
key_li„time_duøti⁄_£t
 (
vty
, &
key
->
ac˚±
, 
¨gv
[0],árgv[2],

690 
¨gv
[1],árgv[3],árgv[4]);

693 
DEFUN
 (
£nd_li„time_day_m⁄th_day_m⁄th
,

694 
£nd_li„time_day_m⁄th_day_m⁄th_cmd
,

706 
key
 *
	gkey
;

708 
	gkey
 = 
vty
->
ödex_sub
;

710  
key_li„time_£t
 (
vty
, &
key
->
£nd
, 
¨gv
[0],árgv[1],árgv[2],árgv[3],

711 
¨gv
[4],árgv[5],árgv[6],árgv[7]);

714 
DEFUN
 (
£nd_li„time_day_m⁄th_m⁄th_day
,

715 
£nd_li„time_day_m⁄th_m⁄th_day_cmd
,

727 
key
 *
	gkey
;

729 
	gkey
 = 
vty
->
ödex_sub
;

731  
key_li„time_£t
 (
vty
, &
key
->
£nd
, 
¨gv
[0],árgv[1],árgv[2],árgv[3],

732 
¨gv
[4],árgv[6],árgv[5],árgv[7]);

735 
DEFUN
 (
£nd_li„time_m⁄th_day_day_m⁄th
,

736 
£nd_li„time_m⁄th_day_day_m⁄th_cmd
,

748 
key
 *
	gkey
;

750 
	gkey
 = 
vty
->
ödex_sub
;

752  
key_li„time_£t
 (
vty
, &
key
->
£nd
, 
¨gv
[0],árgv[2],árgv[1],árgv[3],

753 
¨gv
[4],árgv[5],árgv[6],árgv[7]);

756 
DEFUN
 (
£nd_li„time_m⁄th_day_m⁄th_day
,

757 
£nd_li„time_m⁄th_day_m⁄th_day_cmd
,

769 
key
 *
	gkey
;

771 
	gkey
 = 
vty
->
ödex_sub
;

773  
key_li„time_£t
 (
vty
, &
key
->
£nd
, 
¨gv
[0],árgv[2],árgv[1],árgv[3],

774 
¨gv
[4],árgv[6],árgv[5],árgv[7]);

777 
DEFUN
 (
£nd_li„time_öföôe_day_m⁄th
,

778 
£nd_li„time_öföôe_day_m⁄th_cmd
,

787 
key
 *
	gkey
;

789 
	gkey
 = 
vty
->
ödex_sub
;

791  
key_li„time_öföôe_£t
 (
vty
, &
key
->
£nd
, 
¨gv
[0],árgv[1],árgv[2],

792 
¨gv
[3]);

795 
DEFUN
 (
£nd_li„time_öföôe_m⁄th_day
,

796 
£nd_li„time_öföôe_m⁄th_day_cmd
,

805 
key
 *
	gkey
;

807 
	gkey
 = 
vty
->
ödex_sub
;

809  
key_li„time_öföôe_£t
 (
vty
, &
key
->
£nd
, 
¨gv
[0],árgv[2],árgv[1],

810 
¨gv
[3]);

813 
DEFUN
 (
£nd_li„time_duøti⁄_day_m⁄th
,

814 
£nd_li„time_duøti⁄_day_m⁄th_cmd
,

824 
key
 *
	gkey
;

826 
	gkey
 = 
vty
->
ödex_sub
;

828  
key_li„time_duøti⁄_£t
 (
vty
, &
key
->
£nd
, 
¨gv
[0],árgv[1],árgv[2],

829 
¨gv
[3],árgv[4]);

832 
DEFUN
 (
£nd_li„time_duøti⁄_m⁄th_day
,

833 
£nd_li„time_duøti⁄_m⁄th_day_cmd
,

843 
key
 *
	gkey
;

845 
	gkey
 = 
vty
->
ödex_sub
;

847  
key_li„time_duøti⁄_£t
 (
vty
, &
key
->
£nd
, 
¨gv
[0],árgv[2],árgv[1],

848 
¨gv
[3],árgv[4]);

851 
cmd_node
 
	gkeychaö_node
 =

853 
KEYCHAIN_NODE
,

858 
cmd_node
 
	gkeychaö_key_node
 =

860 
KEYCHAIN_KEY_NODE
,

866 
	$keychaö_°r·ime
 (*
buf
, 
bufsiz
, 
time_t
 *
time
)

868 
tm
 *tm;

869 
size_t
 
Àn
;

871 
tm
 = 
	`loˇ…ime
 (
time
);

873 
Àn
 = 
	`°r·ime
 (
buf
, 
bufsiz
, "%T %b %d %Y", 
tm
);

875  
Àn
;

876 
	}
}

879 
	$keychaö_c⁄fig_wrôe
 (
vty
 *vty)

881 
keychaö
 *keychain;

882 
key
 *key;

883 
li°node
 *
node
;

884 
li°node
 *
knode
;

885 
buf
[
BUFSIZ
];

887 
	`ALL_LIST_ELEMENTS_RO
 (
keychaö_li°
, 
node
, 
keychaö
))

889 
	`vty_out
 (
vty
, "key chaö %s%s", 
keychaö
->
«me
, 
VTY_NEWLINE
);

891 
	`ALL_LIST_ELEMENTS_RO
 (
keychaö
->
key
, 
knode
, key))

893 
	`vty_out
 (
vty
, " key %d%s", 
key
->
ödex
, 
VTY_NEWLINE
);

895 i‡(
key
->
°rög
)

896 
	`vty_out
 (
vty
, " key-°rög %s%s", 
key
->
°rög
, 
VTY_NEWLINE
);

898 i‡(
key
->
ac˚±
.
°¨t
)

900 
	`keychaö_°r·ime
 (
buf
, 
BUFSIZ
, &
key
->
ac˚±
.
°¨t
);

901 
	`vty_out
 (
vty
, "ác˚±-li„timê%s", 
buf
);

903 i‡(
key
->
ac˚±
.
íd
 == -1)

904 
	`vty_out
 (
vty
, " infinite");

905 i‡(
key
->
ac˚±
.
duøti⁄
)

906 
	`vty_out
 (
vty
, " duration %ld",

907 ()(
key
->
ac˚±
.
íd
 - key->ac˚±.
°¨t
));

910 
	`keychaö_°r·ime
 (
buf
, 
BUFSIZ
, &
key
->
ac˚±
.
íd
);

911 
	`vty_out
 (
vty
, " %s", 
buf
);

913 
	`vty_out
 (
vty
, "%s", 
VTY_NEWLINE
);

916 i‡(
key
->
£nd
.
°¨t
)

918 
	`keychaö_°r·ime
 (
buf
, 
BUFSIZ
, &
key
->
£nd
.
°¨t
);

919 
	`vty_out
 (
vty
, " síd-li„timê%s", 
buf
);

921 i‡(
key
->
£nd
.
íd
 == -1)

922 
	`vty_out
 (
vty
, " infinite");

923 i‡(
key
->
£nd
.
duøti⁄
)

924 
	`vty_out
 (
vty
, " duøti⁄ %ld", ()(
key
->
£nd
.
íd
 - key->£nd.
°¨t
));

927 
	`keychaö_°r·ime
 (
buf
, 
BUFSIZ
, &
key
->
£nd
.
íd
);

928 
	`vty_out
 (
vty
, " %s", 
buf
);

930 
	`vty_out
 (
vty
, "%s", 
VTY_NEWLINE
);

933 
	`vty_out
 (
vty
, "!%s", 
VTY_NEWLINE
);

937 
	}
}

940 
	$keychaö_öô
 ()

942 
keychaö_li°
 = 
	`li°_√w
 ();

944 
	`ö°Æl_node
 (&
keychaö_node
, 
keychaö_c⁄fig_wrôe
);

945 
	`ö°Æl_node
 (&
keychaö_key_node
, 
NULL
);

947 
	`ö°Æl_deÁu…
 (
KEYCHAIN_NODE
);

948 
	`ö°Æl_deÁu…
 (
KEYCHAIN_KEY_NODE
);

950 
	`ö°Æl_ñemít
 (
CONFIG_NODE
, &
key_chaö_cmd
);

951 
	`ö°Æl_ñemít
 (
CONFIG_NODE
, &
no_key_chaö_cmd
);

952 
	`ö°Æl_ñemít
 (
KEYCHAIN_NODE
, &
key_cmd
);

953 
	`ö°Æl_ñemít
 (
KEYCHAIN_NODE
, &
no_key_cmd
);

955 
	`ö°Æl_ñemít
 (
KEYCHAIN_NODE
, &
key_chaö_cmd
);

956 
	`ö°Æl_ñemít
 (
KEYCHAIN_NODE
, &
no_key_chaö_cmd
);

958 
	`ö°Æl_ñemít
 (
KEYCHAIN_KEY_NODE
, &
key_°rög_cmd
);

959 
	`ö°Æl_ñemít
 (
KEYCHAIN_KEY_NODE
, &
no_key_°rög_cmd
);

961 
	`ö°Æl_ñemít
 (
KEYCHAIN_KEY_NODE
, &
key_chaö_cmd
);

962 
	`ö°Æl_ñemít
 (
KEYCHAIN_KEY_NODE
, &
no_key_chaö_cmd
);

964 
	`ö°Æl_ñemít
 (
KEYCHAIN_KEY_NODE
, &
key_cmd
);

965 
	`ö°Æl_ñemít
 (
KEYCHAIN_KEY_NODE
, &
no_key_cmd
);

967 
	`ö°Æl_ñemít
 (
KEYCHAIN_KEY_NODE
, &
ac˚±_li„time_day_m⁄th_day_m⁄th_cmd
);

968 
	`ö°Æl_ñemít
 (
KEYCHAIN_KEY_NODE
, &
ac˚±_li„time_day_m⁄th_m⁄th_day_cmd
);

969 
	`ö°Æl_ñemít
 (
KEYCHAIN_KEY_NODE
, &
ac˚±_li„time_m⁄th_day_day_m⁄th_cmd
);

970 
	`ö°Æl_ñemít
 (
KEYCHAIN_KEY_NODE
, &
ac˚±_li„time_m⁄th_day_m⁄th_day_cmd
);

971 
	`ö°Æl_ñemít
 (
KEYCHAIN_KEY_NODE
, &
ac˚±_li„time_öföôe_day_m⁄th_cmd
);

972 
	`ö°Æl_ñemít
 (
KEYCHAIN_KEY_NODE
, &
ac˚±_li„time_öföôe_m⁄th_day_cmd
);

973 
	`ö°Æl_ñemít
 (
KEYCHAIN_KEY_NODE
, &
ac˚±_li„time_duøti⁄_day_m⁄th_cmd
);

974 
	`ö°Æl_ñemít
 (
KEYCHAIN_KEY_NODE
, &
ac˚±_li„time_duøti⁄_m⁄th_day_cmd
);

976 
	`ö°Æl_ñemít
 (
KEYCHAIN_KEY_NODE
, &
£nd_li„time_day_m⁄th_day_m⁄th_cmd
);

977 
	`ö°Æl_ñemít
 (
KEYCHAIN_KEY_NODE
, &
£nd_li„time_day_m⁄th_m⁄th_day_cmd
);

978 
	`ö°Æl_ñemít
 (
KEYCHAIN_KEY_NODE
, &
£nd_li„time_m⁄th_day_day_m⁄th_cmd
);

979 
	`ö°Æl_ñemít
 (
KEYCHAIN_KEY_NODE
, &
£nd_li„time_m⁄th_day_m⁄th_day_cmd
);

980 
	`ö°Æl_ñemít
 (
KEYCHAIN_KEY_NODE
, &
£nd_li„time_öföôe_day_m⁄th_cmd
);

981 
	`ö°Æl_ñemít
 (
KEYCHAIN_KEY_NODE
, &
£nd_li„time_öföôe_m⁄th_day_cmd
);

982 
	`ö°Æl_ñemít
 (
KEYCHAIN_KEY_NODE
, &
£nd_li„time_duøti⁄_day_m⁄th_cmd
);

983 
	`ö°Æl_ñemít
 (
KEYCHAIN_KEY_NODE
, &
£nd_li„time_duøti⁄_m⁄th_day_cmd
);

984 
	}
}

	@keychain.h

22 #i‚de‡
_ZEBRA_KEYCHAIN_H


23 
	#_ZEBRA_KEYCHAIN_H


	)

25 
	skeychaö


27 *
	m«me
;

29 
li°
 *
	mkey
;

32 
	skey_ønge


34 
time_t
 
	m°¨t
;

35 
time_t
 
	míd
;

37 
u_ch¨
 
	mduøti⁄
;

40 
	skey


42 
u_öt32_t
 
	mödex
;

44 *
	m°rög
;

46 
key_ønge
 
	m£nd
;

47 
key_ønge
 
	mac˚±
;

50 
keychaö_öô
 ();

51 
keychaö
 *
keychaö_lookup
 (const *);

52 
key
 *
key_lookup_f‹_ac˚±
 (c⁄° 
keychaö
 *, 
u_öt32_t
);

53 
key
 *
key_m©ch_f‹_ac˚±
 (c⁄° 
keychaö
 *, const *);

54 
key
 *
key_lookup_f‹_£nd
 (c⁄° 
keychaö
 *);

	@libospf.h

23 #i‚de‡
_LIBOSPFD_H


24 
	#_LIBOSPFD_H


	)

27 #i‚de‡
IPTOS_PREC_INTERNETCONTROL


28 
	#IPTOS_PREC_INTERNETCONTROL
 0xC0

	)

32 #i‚de‡
IPPROTO_OSPFIGP


33 
	#IPPROTO_OSPFIGP
 89

	)

37 #ifde‡
DEBUG


38 
	#OSPF_LS_REFRESH_TIME
 60

	)

40 
	#OSPF_LS_REFRESH_TIME
 1800

	)

42 
	#OSPF_MIN_LS_INTERVAL
 5

	)

43 
	#OSPF_MIN_LS_ARRIVAL
 1

	)

44 
	#OSPF_LSA_INITIAL_AGE
 0

	)

45 
	#OSPF_LSA_MAXAGE
 3600

	)

46 
	#OSPF_CHECK_AGE
 300

	)

47 
	#OSPF_LSA_MAXAGE_DIFF
 900

	)

48 
	#OSPF_LS_INFINITY
 0xffffff

	)

49 
	#OSPF_DEFAULT_DESTINATION
 0x00000000

	)

50 
	#OSPF_INITIAL_SEQUENCE_NUMBER
 0x80000001U

	)

51 
	#OSPF_MAX_SEQUENCE_NUMBER
 0x7fffffffU

	)

54 
	#OSPF_IFTYPE_NONE
 0

	)

55 
	#OSPF_IFTYPE_POINTOPOINT
 1

	)

56 
	#OSPF_IFTYPE_BROADCAST
 2

	)

57 
	#OSPF_IFTYPE_NBMA
 3

	)

58 
	#OSPF_IFTYPE_POINTOMULTIPOINT
 4

	)

59 
	#OSPF_IFTYPE_VIRTUALLINK
 5

	)

60 
	#OSPF_IFTYPE_LOOPBACK
 6

	)

61 
	#OSPF_IFTYPE_MAX
 7

	)

64 
	#OSPF_OUTPUT_COST_DEFAULT
 10

	)

65 
	#OSPF_OUTPUT_COST_INFINITE
 
UINT16_MAX


	)

66 
	#OSPF_ROUTER_DEAD_INTERVAL_DEFAULT
 40

	)

67 
	#OSPF_ROUTER_DEAD_INTERVAL_MINIMAL
 1

	)

68 
	#OSPF_HELLO_INTERVAL_DEFAULT
 10

	)

69 
	#OSPF_ROUTER_PRIORITY_DEFAULT
 1

	)

70 
	#OSPF_RETRANSMIT_INTERVAL_DEFAULT
 5

	)

71 
	#OSPF_TRANSMIT_DELAY_DEFAULT
 1

	)

72 
	#OSPF_DEFAULT_BANDWIDTH
 10000

	)

74 
	#OSPF_DEFAULT_REF_BANDWIDTH
 100000

	)

76 
	#OSPF_POLL_INTERVAL_DEFAULT
 60

	)

77 
	#OSPF_NEIGHBOR_PRIORITY_DEFAULT
 0

	)

79 
	#OSPF_MTU_IGNORE_DEFAULT
 0

	)

80 
	#OSPF_FAST_HELLO_DEFAULT
 0

	)

82 
	#OSPF_AREA_BACKBONE
 0x00000000

	)

85 
	#OSPF_SPF_DELAY_DEFAULT
 200

	)

86 
	#OSPF_SPF_HOLDTIME_DEFAULT
 1000

	)

87 
	#OSPF_SPF_MAX_HOLDTIME_DEFAULT
 10000

	)

89 
	#OSPF_LSA_MAXAGE_CHECK_INTERVAL
 30

	)

90 
	#OSPF_LSA_MAXAGE_REMOVE_DELAY_DEFAULT
 60

	)

	@linklist.c

22 
	~<zebø.h
>

24 
	~"lökli°.h
"

25 
	~"mem‹y.h
"

28 
li°
 *

29 
	$li°_√w
 ()

31  
	`XCALLOC
 (
MTYPE_LINK_LIST
,  (
li°
));

32 
	}
}

36 
	$li°_‰ì
 (
li°
 *
l
)

38 
	`XFREE
 (
MTYPE_LINK_LIST
, 
l
);

39 
	}
}

42 
li°node
 *

43 
	$li°node_√w
 ()

45  
	`XCALLOC
 (
MTYPE_LINK_NODE
,  (
li°node
));

46 
	}
}

50 
	$li°node_‰ì
 (
li°node
 *
node
)

52 
	`XFREE
 (
MTYPE_LINK_NODE
, 
node
);

53 
	}
}

57 
	$li°node_add
 (
li°
 *li°, *
vÆ
)

59 
li°node
 *
node
;

61 
	`as£π
 (
vÆ
 !
NULL
);

63 
node
 = 
	`li°node_√w
 ();

65 
node
->
¥ev
 = 
li°
->
èû
;

66 
node
->
d©a
 = 
vÆ
;

68 i‡(
li°
->
hód
 =
NULL
)

69 
li°
->
hód
 = 
node
;

71 
li°
->
èû
->
√xt
 = 
node
;

72 
li°
->
èû
 = 
node
;

74 
li°
->
cou¡
++;

75 
	}
}

84 
	$li°node_add_s‹t
 (
li°
 *li°, *
vÆ
)

86 
li°node
 *
n
;

87 
li°node
 *
√w
;

89 
	`as£π
 (
vÆ
 !
NULL
);

91 
√w
 = 
	`li°node_√w
 ();

92 
√w
->
d©a
 = 
vÆ
;

94 i‡(
li°
->
cmp
)

96 
n
 = 
li°
->
hód
;Ç;Ç =Ç->
√xt
)

98 i‡((*
li°
->
cmp
Ë(
vÆ
, 
n
->
d©a
) < 0)

100 
√w
->
√xt
 = 
n
;

101 
√w
->
¥ev
 = 
n
->prev;

103 i‡(
n
->
¥ev
)

104 
n
->
¥ev
->
√xt
 = 
√w
;

106 
li°
->
hód
 = 
√w
;

107 
n
->
¥ev
 = 
√w
;

108 
li°
->
cou¡
++;

114 
√w
->
¥ev
 = 
li°
->
èû
;

116 i‡(
li°
->
èû
)

117 
li°
->
èû
->
√xt
 = 
√w
;

119 
li°
->
hód
 = 
√w
;

121 
li°
->
èû
 = 
√w
;

122 
li°
->
cou¡
++;

123 
	}
}

126 
	$li°node_add_a·î
 (
li°
 *li°, 
li°node
 *
µ
, *
vÆ
)

128 
li°node
 *
¬
;

130 
	`as£π
 (
vÆ
 !
NULL
);

132 
¬
 = 
	`li°node_√w
 ();

133 
¬
->
d©a
 = 
vÆ
;

135 i‡(
µ
 =
NULL
)

137 i‡(
li°
->
hód
)

138 
li°
->
hód
->
¥ev
 = 
¬
;

140 
li°
->
èû
 = 
¬
;

142 
¬
->
√xt
 = 
li°
->
hód
;

143 
¬
->
¥ev
 = 
µ
;

145 
li°
->
hód
 = 
¬
;

149 i‡(
µ
->
√xt
)

150 
µ
->
√xt
->
¥ev
 = 
¬
;

152 
li°
->
èû
 = 
¬
;

154 
¬
->
√xt
 = 
µ
->next;

155 
¬
->
¥ev
 = 
µ
;

157 
µ
->
√xt
 = 
¬
;

159 
li°
->
cou¡
++;

160 
	}
}

164 
	$li°node_move_to_èû
 (
li°
 *
l
, 
li°node
 *
n
)

166 
	`LISTNODE_DETACH
(
l
,
n
);

167 
	`LISTNODE_ATTACH
(
l
,
n
);

168 
	}
}

172 
	$li°node_dñëe
 (
li°
 *li°, *
vÆ
)

174 
li°node
 *
node
;

176 
	`as£π
(
li°
);

177 
node
 = 
li°
->
hód
;Çode;Çodênode->
√xt
)

179 i‡(
node
->
d©a
 =
vÆ
)

181 i‡(
node
->
¥ev
)

182 
node
->
¥ev
->
√xt
 =Çode->next;

184 
li°
->
hód
 = 
node
->
√xt
;

186 i‡(
node
->
√xt
)

187 
node
->
√xt
->
¥ev
 =Çode->prev;

189 
li°
->
èû
 = 
node
->
¥ev
;

191 
li°
->
cou¡
--;

192 
	`li°node_‰ì
 (
node
);

196 
	}
}

200 
	$li°node_hód
 (
li°
 *list)

202 
li°node
 *
node
;

204 
	`as£π
(
li°
);

205 
node
 = 
li°
->
hód
;

207 i‡(
node
)

208  
node
->
d©a
;

209  
NULL
;

210 
	}
}

214 
	$li°_dñëe_Æl_node
 (
li°
 *list)

216 
li°node
 *
node
;

217 
li°node
 *
√xt
;

219 
	`as£π
(
li°
);

220 
node
 = 
li°
->
hód
;Çode;Çodê
√xt
)

222 
√xt
 = 
node
->next;

223 i‡(
li°
->
dñ
)

224 (*
li°
->
dñ
Ë(
node
->
d©a
);

225 
	`li°node_‰ì
 (
node
);

227 
li°
->
hód
 =Üi°->
èû
 = 
NULL
;

228 
li°
->
cou¡
 = 0;

229 
	}
}

233 
	$li°_dñëe
 (
li°
 *list)

235 
	`as£π
(
li°
);

236 
	`li°_dñëe_Æl_node
 (
li°
);

237 
	`li°_‰ì
 (
li°
);

238 
	}
}

241 
li°node
 *

242 
	$li°node_lookup
 (
li°
 *li°, *
d©a
)

244 
li°node
 *
node
;

246 
	`as£π
(
li°
);

247 
node
 = 
	`li°hód
(
li°
);Çode;Çodê
	`li°√xäode
 (node))

248 i‡(
d©a
 =
	`li°gëd©a
 (
node
))

249  
node
;

250  
NULL
;

251 
	}
}

255 
	$li°_dñëe_node
 (
li°
 *li°, 
li°node
 *
node
)

257 i‡(
node
->
¥ev
)

258 
node
->
¥ev
->
√xt
 =Çode->next;

260 
li°
->
hód
 = 
node
->
√xt
;

261 i‡(
node
->
√xt
)

262 
node
->
√xt
->
¥ev
 =Çode->prev;

264 
li°
->
èû
 = 
node
->
¥ev
;

265 
li°
->
cou¡
--;

266 
	`li°node_‰ì
 (
node
);

267 
	}
}

271 
	$li°_add_node_¥ev
 (
li°
 *li°, 
li°node
 *
cuºít
, *
vÆ
)

273 
li°node
 *
node
;

275 
	`as£π
 (
vÆ
 !
NULL
);

277 
node
 = 
	`li°node_√w
 ();

278 
node
->
√xt
 = 
cuºít
;

279 
node
->
d©a
 = 
vÆ
;

281 i‡(
cuºít
->
¥ev
 =
NULL
)

282 
li°
->
hód
 = 
node
;

284 
cuºít
->
¥ev
->
√xt
 = 
node
;

286 
node
->
¥ev
 = 
cuºít
->prev;

287 
cuºít
->
¥ev
 = 
node
;

289 
li°
->
cou¡
++;

290 
	}
}

294 
	$li°_add_node_√xt
 (
li°
 *li°, 
li°node
 *
cuºít
, *
vÆ
)

296 
li°node
 *
node
;

298 
	`as£π
 (
vÆ
 !
NULL
);

300 
node
 = 
	`li°node_√w
 ();

301 
node
->
¥ev
 = 
cuºít
;

302 
node
->
d©a
 = 
vÆ
;

304 i‡(
cuºít
->
√xt
 =
NULL
)

305 
li°
->
èû
 = 
node
;

307 
cuºít
->
√xt
->
¥ev
 = 
node
;

309 
node
->
√xt
 = 
cuºít
->next;

310 
cuºít
->
√xt
 = 
node
;

312 
li°
->
cou¡
++;

313 
	}
}

317 
	$li°_add_li°
 (
li°
 *
l
, li° *
m
)

319 
li°node
 *
n
;

321 
n
 = 
	`li°hód
 (
m
);Ç;Ç = 
	`li°√xäode
 (n))

322 
	`li°node_add
 (
l
, 
n
->
d©a
);

323 
	}
}

	@linklist.h

22 #i‚de‡
_ZEBRA_LINKLIST_H


23 
	#_ZEBRA_LINKLIST_H


	)

28 
	sli°node


30 
li°node
 *
	m√xt
;

31 
li°node
 *
	m¥ev
;

34 *
	md©a
;

37 
	sli°


39 
li°node
 *
	mhód
;

40 
li°node
 *
	mèû
;

43 
	mcou¡
;

49 (*
	mcmp
Ë(*
	mvÆ1
, *
	mvÆ2
);

54 (*
	mdñ
Ë(*
	mvÆ
);

57 
	#li°√xäode
(
X
Ë((XË? ((X)->
√xt
Ë: 
NULL
)

	)

58 
	#li°hód
(
X
Ë((XË? ((X)->
hód
Ë: 
NULL
)

	)

59 
	#li°èû
(
X
Ë((XË? ((X)->
èû
Ë: 
NULL
)

	)

60 
	#li°cou¡
(
X
Ë((X)->
cou¡
)

	)

61 
	#li°_i£m±y
(
X
Ë((X)->
hód
 =
NULL
 && (X)->
èû
 =NULL)

	)

62 
	#li°gëd©a
(
X
Ë(
	`as£π
((X)->
d©a
 !
NULL
), (X)->d©a)

	)

65 
li°
 *
li°_√w
();

66 
li°_‰ì
 (
li°
 *);

68 
li°node_add
 (
li°
 *, *);

69 
li°node_add_s‹t
 (
li°
 *, *);

70 
li°node_add_a·î
 (
li°
 *, 
li°node
 *, *);

71 
li°node_move_to_èû
 (
li°
 *, 
li°node
 *);

72 
li°node_dñëe
 (
li°
 *, *);

73 
li°node
 *
li°node_lookup
 (
li°
 *, *);

74 *
li°node_hód
 (
li°
 *);

76 
li°_dñëe
 (
li°
 *);

77 
li°_dñëe_Æl_node
 (
li°
 *);

80 
li°_dñëe_node
 (
li°
 *, 
li°node
 *);

83 
li°_add_node_¥ev
 (
li°
 *, 
li°node
 *, *);

84 
li°_add_node_√xt
 (
li°
 *, 
li°node
 *, *);

85 
li°_add_li°
 (
li°
 *, list *);

91 
	#ALL_LIST_ELEMENTS
(
li°
,
node
,
√xäode
,
d©a
) \

92 (
node
Ë
	`li°hód
(
li°
), ((
d©a
Ë
NULL
); \

93 (
node
Ë!
NULL
 && \

94 ((
d©a
Ë
	`li°gëd©a
(
node
),(
√xäode
Ënode->
√xt
, 1); \

95 (
node
Ë(
√xäode
), ((
d©a
Ë
NULL
)

	)

103 
	#ALL_LIST_ELEMENTS_RO
(
li°
,
node
,
d©a
) \

104 (
node
Ë
	`li°hód
(
li°
), ((
d©a
Ë
NULL
);\

105 (
node
Ë!
NULL
 && ((
d©a
Ë
	`li°gëd©a
(node), 1); \

106 (
node
Ë
	`li°√xäode
“ode), ((
d©a
Ë
NULL
)

	)

113 
	#LISTNODE_ATTACH
(
L
,
N
) \

115 (
N
)->
¥ev
 = (
L
)->
èû
; \

116 (
N
)->
√xt
 = 
NULL
; \

117 i‡((
L
)->
hód
 =
NULL
) \

118 (
L
)->
hód
 = (
N
); \

120 (
L
)->
èû
->
√xt
 = (
N
); \

121 (
L
)->
èû
 = (
N
); \

122 (
L
)->
cou¡
++; \

123 } 0)

	)

126 
	#LISTNODE_DETACH
(
L
,
N
) \

128 i‡((
N
)->
¥ev
) \

129 (
N
)->
¥ev
->
√xt
 = (N)->next; \

131 (
L
)->
hód
 = (
N
)->
√xt
; \

132 i‡((
N
)->
√xt
) \

133 (
N
)->
√xt
->
¥ev
 = (N)->prev; \

135 (
L
)->
èû
 = (
N
)->
¥ev
; \

136 (
L
)->
cou¡
--; \

137 } 0)

	)

140 #i‡!
deföed
(
QUAGGA_NO_DEPRECATED_INTERFACES
)

142 
	#LISTNODE_ADD
(
L
,
N
Ë
	`LISTNODE_ATTACH
(L,N)

	)

143 
	#LISTNODE_DELETE
(
L
,
N
Ë
	`LISTNODE_DETACH
(L,N)

	)

144 
	#√xäode
(
X
Ë((XË(X)->
√xt
)

	)

145 
	#gëd©a
(
X
Ë
	`li°gëd©a
(X)

	)

146 
	#LIST_LOOP
(
L
,
V
,
N
) \

147 
	`ALL_LIST_ELEMENTS_RO
 (
L
,
N
,
V
))

	)

	@log.c

23 
	#QUAGGA_DEFINE_DESC_TABLE


	)

25 
	~<zebø.h
>

27 
	~"log.h
"

28 
	~"mem‹y.h
"

29 
	~"comm™d.h
"

30 #i‚de‡
SUNOS_5


31 
	~<sys/un.h
>

34 #ifde‡
HAVE_UCONTEXT_H


35 
	~<uc⁄ãxt.h
>

38 
	glogfûe_fd
 = -1;

40 
zlog
 *
	gzlog_deÁu…
 = 
NULL
;

42 c⁄° *
	gzlog_¥Ÿo_«mes
[] =

56 
NULL
,

59 c⁄° *
	gzlog_¥i‹ôy
[] =

69 
NULL
,

76 
size_t


77 
	$quagga_time°amp
(
time°amp_¥ecisi⁄
, *
buf
, 
size_t
 
buÊí
)

80 
time_t
 
œ°
;

81 
size_t
 
Àn
;

82 
buf
[28];

83 } 
ˇche
;

84 
timevÆ
 
˛ock
;

87 
	`gëtimeofday
(&
˛ock
, 
NULL
);

90 i‡(
ˇche
.
œ°
 !
˛ock
.
tv_£c
)

92 
tm
 *tm;

93 
ˇche
.
œ°
 = 
˛ock
.
tv_£c
;

94 
tm
 = 
	`loˇ…ime
(&
ˇche
.
œ°
);

95 
ˇche
.
Àn
 = 
	`°r·ime
(ˇche.
buf
, (cache.buf),

96 "%Y/%m/%d %H:%M:%S", 
tm
);

102 i‡(
buÊí
 > 
ˇche
.
Àn
)

104 
	`mem˝y
(
buf
, 
ˇche
.buf, cache.
Àn
);

105 i‡((
time°amp_¥ecisi⁄
 > 0) &&

106 (
buÊí
 > 
ˇche
.
Àn
+1+
time°amp_¥ecisi⁄
))

109 c⁄° 
divis‹
[] = {0, 100000, 10000, 1000, 100, 10, 1};

110 
¥ec
;

111 *
p
 = 
buf
+
ˇche
.
Àn
+1+(
¥ec
 = 
time°amp_¥ecisi⁄
);

112 *
p
-- = '\0';

113 
¥ec
 > 6)

116 *
p
-- = '0';

117 
¥ec
--;

119 
˛ock
.
tv_u£c
 /
divis‹
[
¥ec
];

122 *
p
-- = '0'+(
˛ock
.
tv_u£c
 % 10);

123 
˛ock
.
tv_u£c
 /= 10;

125 --
¥ec
 > 0);

126 *
p
 = '.';

127  
ˇche
.
Àn
+1+
time°amp_¥ecisi⁄
;

129 
buf
[
ˇche
.
Àn
] = '\0';

130  
ˇche
.
Àn
;

132 i‡(
buÊí
 > 0)

133 
buf
[0] = '\0';

135 
	}
}

139 
	$time_¥öt
(
FILE
 *
Â
, 
time°amp_c⁄åﬁ
 *
˘l
)

141 i‡(!
˘l
->
Æªady_ªndîed
)

143 
˘l
->
Àn
 = 
	`quagga_time°amp
(˘l->
¥ecisi⁄
, cé->
buf
, (ctl->buf));

144 
˘l
->
Æªady_ªndîed
 = 1;

146 
	`Ârötf
(
Â
, "%†", 
˘l
->
buf
);

147 
	}
}

152 
	$vzlog
 (
zlog
 *
zl
, 
¥i‹ôy
, c⁄° *
f‹m©
, 
va_li°
 
¨gs
)

154 
time°amp_c⁄åﬁ
 
ts˘l
;

155 
ts˘l
.
Æªady_ªndîed
 = 0;

158 i‡(
zl
 =
NULL
)

159 
zl
 = 
zlog_deÁu…
;

162 i‡(
zl
 =
NULL
)

164 
ts˘l
.
¥ecisi⁄
 = 0;

165 
	`time_¥öt
(
°dîr
, &
ts˘l
);

166 
	`Ârötf
 (
°dîr
, "%s: ", "unknown");

167 
	`vÂrötf
 (
°dîr
, 
f‹m©
, 
¨gs
);

168 
	`Ârötf
 (
°dîr
, "\n");

169 
	`fÊush
 (
°dîr
);

174 
ts˘l
.
¥ecisi⁄
 = 
zl
->
time°amp_¥ecisi⁄
;

177 i‡(
¥i‹ôy
 <
zl
->
maxlvl
[
ZLOG_DEST_SYSLOG
])

179 
va_li°
 
ac
;

180 
	`va_c›y
(
ac
, 
¨gs
);

181 
	`vsy¶og
 (
¥i‹ôy
|
zlog_deÁu…
->
Ácûôy
, 
f‹m©
, 
ac
);

182 
	`va_íd
(
ac
);

186 i‡((
¥i‹ôy
 <
zl
->
maxlvl
[
ZLOG_DEST_FILE
]Ë&& zl->
Â
)

188 
va_li°
 
ac
;

189 
	`time_¥öt
 (
zl
->
Â
, &
ts˘l
);

190 i‡(
zl
->
ªc‹d_¥i‹ôy
)

191 
	`Ârötf
 (
zl
->
Â
, "%s: ", 
zlog_¥i‹ôy
[
¥i‹ôy
]);

192 
	`Ârötf
 (
zl
->
Â
, "%s: ", 
zlog_¥Ÿo_«mes
[zl->
¥Ÿocﬁ
]);

193 
	`va_c›y
(
ac
, 
¨gs
);

194 
	`vÂrötf
 (
zl
->
Â
, 
f‹m©
, 
ac
);

195 
	`va_íd
(
ac
);

196 
	`Ârötf
 (
zl
->
Â
, "\n");

197 
	`fÊush
 (
zl
->
Â
);

201 i‡(
¥i‹ôy
 <
zl
->
maxlvl
[
ZLOG_DEST_STDOUT
])

203 
va_li°
 
ac
;

204 
	`time_¥öt
 (
°dout
, &
ts˘l
);

205 i‡(
zl
->
ªc‹d_¥i‹ôy
)

206 
	`Ârötf
 (
°dout
, "%s: ", 
zlog_¥i‹ôy
[
¥i‹ôy
]);

207 
	`Ârötf
 (
°dout
, "%s: ", 
zlog_¥Ÿo_«mes
[
zl
->
¥Ÿocﬁ
]);

208 
	`va_c›y
(
ac
, 
¨gs
);

209 
	`vÂrötf
 (
°dout
, 
f‹m©
, 
ac
);

210 
	`va_íd
(
ac
);

211 
	`Ârötf
 (
°dout
, "\n");

212 
	`fÊush
 (
°dout
);

216 i‡(
¥i‹ôy
 <
zl
->
maxlvl
[
ZLOG_DEST_MONITOR
])

217 
	`vty_log
 ((
zl
->
ªc‹d_¥i‹ôy
 ? 
zlog_¥i‹ôy
[
¥i‹ôy
] : 
NULL
),

218 
zlog_¥Ÿo_«mes
[
zl
->
¥Ÿocﬁ
], 
f‹m©
, &
ts˘l
, 
¨gs
);

219 
	}
}

222 
	$°r_≠≥nd
(*
d°
, 
Àn
, c⁄° *
§c
)

224 (
Àn
-- > 0Ë&& *
§c
)

225 *
d°
++ = *
§c
++;

226  
d°
;

227 
	}
}

230 
	$num_≠≥nd
(*
s
, 
Àn
, 
u_l⁄g
 
x
)

232 
buf
[30];

233 *
t
;

235 i‡(!
x
)

236  
	`°r_≠≥nd
(
s
,
Àn
,"0");

237 *(
t
 = &
buf
[(buf)-1]) = '\0';

238 
x
 && (
t
 > 
buf
))

240 *--
t
 = '0'+(
x
 % 10);

241 
x
 /= 10;

243  
	`°r_≠≥nd
(
s
,
Àn
,
t
);

244 
	}
}

246 #i‡
deföed
(
SA_SIGINFO
Ë|| deföed(
HAVE_STACK_TRACE
)

248 
	$hex_≠≥nd
(*
s
, 
Àn
, 
u_l⁄g
 
x
)

250 
buf
[30];

251 *
t
;

253 i‡(!
x
)

254  
	`°r_≠≥nd
(
s
,
Àn
,"0");

255 *(
t
 = &
buf
[(buf)-1]) = '\0';

256 
x
 && (
t
 > 
buf
))

258 
u_öt
 
cc
 = (
x
 % 16);

259 *--
t
 = ((
cc
 < 10) ? ('0'+cc) : ('a'+cc-10));

260 
x
 /= 16;

262  
	`°r_≠≥nd
(
s
,
Àn
,
t
);

263 
	}
}

268 
	$sy¶og_c⁄√˘
()

270 #ifde‡
SUNOS_5


273 
fd
;

274 *
s
;

275 
sockaddr_un
 
addr
;

277 i‡((
fd
 = 
	`sockë
(
AF_UNIX
,
SOCK_DGRAM
,0)) < 0)

279 
addr
.
sun_Ámûy
 = 
AF_UNIX
;

280 #ifde‡
_PATH_LOG


281 
	#SYSLOG_SOCKET_PATH
 
_PATH_LOG


	)

283 
	#SYSLOG_SOCKET_PATH
 "/dev/log"

	)

285 
s
 = 
	`°r_≠≥nd
(
addr
.
sun_∑th
,◊ddr.sun_∑th),
SYSLOG_SOCKET_PATH
);

286 #unde‡
SYSLOG_SOCKET_PATH


287 *
s
 = '\0';

288 i‡(
	`c⁄√˘
(
fd
,(
sockaddr
 *)&
addr
,(addr)) < 0)

290 
	`˛o£
(
fd
);

293  
fd
;

295 
	}
}

298 
	$sy¶og_sigß„
(
¥i‹ôy
, c⁄° *
msg
, 
size_t
 
msgÀn
)

300 
sy¶og_fd
 = -1;

301 
buf
[("<1234567890>rùngd[1234567890]: ")+
msgÀn
+50];

302 *
s
;

304 i‡((
sy¶og_fd
 < 0Ë&& ((sy¶og_fd = 
	`sy¶og_c⁄√˘
()) < 0))

307 
	#LOC
 
s
,
buf
+(buf)-
	)
s

308 
s
 = 
buf
;

309 
s
 = 
	`°r_≠≥nd
(
LOC
,"<");

310 
s
 = 
	`num_≠≥nd
(
LOC
,
¥i‹ôy
);

311 
s
 = 
	`°r_≠≥nd
(
LOC
,">");

313 
s
 = 
	`°r_≠≥nd
(
LOC
,
zlog_deÁu…
->
idít
);

314 i‡(
zlog_deÁu…
->
sy¶og_›ti⁄s
 & 
LOG_PID
)

316 
s
 = 
	`°r_≠≥nd
(
LOC
,"[");

317 
s
 = 
	`num_≠≥nd
(
LOC
,
	`gëpid
());

318 
s
 = 
	`°r_≠≥nd
(
LOC
,"]");

320 
s
 = 
	`°r_≠≥nd
(
LOC
,": ");

321 
s
 = 
	`°r_≠≥nd
(
LOC
,
msg
);

322 
	`wrôe
(
sy¶og_fd
,
buf
,
s
-buf);

323 #unde‡
LOC


324 
	}
}

327 
	$›í_¸ashlog
()

329 
	#CRASHLOG_PREFIX
 "/v¨/tmp/quagga."

	)

330 
	#CRASHLOG_SUFFIX
 "¸ashlog"

	)

331 i‡(
zlog_deÁu…
 && zlog_deÁu…->
idít
)

334 c⁄° *
p
;

335 
size_t
 
ûí
;

337 
p
 = 
zlog_deÁu…
->
idít
, 
ûí
 = 0; *p;Ö++)

338 
ûí
++;

340 
buf
[(
CRASHLOG_PREFIX
)+
ûí
+(
CRASHLOG_SUFFIX
)+3];

341 *
s
 = 
buf
;

342 
	#LOC
 
s
,
buf
+(buf)-
	)
s

343 
s
 = 
	`°r_≠≥nd
(
LOC
, 
CRASHLOG_PREFIX
);

344 
s
 = 
	`°r_≠≥nd
(
LOC
, 
zlog_deÁu…
->
idít
);

345 
s
 = 
	`°r_≠≥nd
(
LOC
, ".");

346 
s
 = 
	`°r_≠≥nd
(
LOC
, 
CRASHLOG_SUFFIX
);

347 #unde‡
LOC


348 *
s
 = '\0';

349  
	`›í
(
buf
, 
O_WRONLY
|
O_CREAT
|
O_EXCL
, 
LOGFILE_MASK
);

352  
	`›í
(
CRASHLOG_PREFIX
 
CRASHLOG_SUFFIX
, 
O_WRONLY
|
O_CREAT
|
O_EXCL
,

353 
LOGFILE_MASK
);

354 #unde‡
CRASHLOG_SUFFIX


355 #unde‡
CRASHLOG_PREFIX


356 
	}
}

360 
zlog_sig«l
(
signo
, c⁄° *
a˘i⁄


361 #ifde‡
SA_SIGINFO


362 , 
sigöfo_t
 *
sigöfo
, *
¥ogøm_cou¡î


366 
time_t
 
	gnow
;

367 
	gbuf
[("DEFAULT: Received signal Sát T (si_addr 0xP, PC 0xP);áborting...")+100];

368 *
	gs
 = 
buf
;

369 *
	gmsg°¨t
 = 
buf
;

370 
	#LOC
 
s
,
buf
+(buf)-
	)
s

372 
time
(&
now
);

373 i‡(
	gzlog_deÁu…
)

375 
	gs
 = 
°r_≠≥nd
(
LOC
,
zlog_¥Ÿo_«mes
[
zlog_deÁu…
->
¥Ÿocﬁ
]);

376 *
	gs
++ = ':';

377 *
	gs
++ = ' ';

378 
	gmsg°¨t
 = 
s
;

380 
	gs
 = 
°r_≠≥nd
(
LOC
,"Received signal ");

381 
	gs
 = 
num_≠≥nd
(
LOC
,
signo
);

382 
	gs
 = 
°r_≠≥nd
(
LOC
,"át ");

383 
	gs
 = 
num_≠≥nd
(
LOC
,
now
);

384 #ifde‡
SA_SIGINFO


385 
	gs
 = 
°r_≠≥nd
(
LOC
," (si_addr 0x");

386 
	gs
 = 
hex_≠≥nd
(
LOC
,(
u_l⁄g
)(
sigöfo
->
si_addr
));

387 i‡(
	g¥ogøm_cou¡î
)

389 
	gs
 = 
°r_≠≥nd
(
LOC
,", PC 0x");

390 
	gs
 = 
hex_≠≥nd
(
LOC
,(
u_l⁄g
)
¥ogøm_cou¡î
);

392 
	gs
 = 
°r_≠≥nd
(
LOC
,"); ");

394 
	gs
 = 
°r_≠≥nd
(
LOC
,"; ");

396 
	gs
 = 
°r_≠≥nd
(
LOC
,
a˘i⁄
);

397 i‡(
	gs
 < 
	gbuf
+(buf))

398 *
	gs
++ = '\n';

401 
	#PRI
 
LOG_CRIT


	)

403 
	#DUMP
(
FD
Ë
	`wrôe
(FD, 
buf
, 
s
-buf);

	)

405 i‡((
	glogfûe_fd
 >0Ë|| ((
logfûe_fd
 = 
›í_¸ashlog
()) >= 0))

406 
DUMP
(
logfûe_fd
)

407 i‡(!
zlog_deÁu…
)

408 
DUMP
(
STDERR_FILENO
)

411 i‡(
PRI
 <
zlog_deÁu…
->
maxlvl
[
ZLOG_DEST_STDOUT
])

412 
DUMP
(
STDOUT_FILENO
)

414 *--
s
 = '\0';

415 i‡(
	gPRI
 <
zlog_deÁu…
->
maxlvl
[
ZLOG_DEST_MONITOR
])

416 
vty_log_fixed
(
buf
,
s
-buf);

417 i‡(
	gPRI
 <
zlog_deÁu…
->
maxlvl
[
ZLOG_DEST_SYSLOG
])

418 
sy¶og_sigß„
(
PRI
|
zlog_deÁu…
->
Ácûôy
,
msg°¨t
,
s
-msgstart);

420 #unde‡
DUMP


422 
zlog_backåa˚_sigß„
(
PRI
,

423 #ifde‡
SA_SIGINFO


424 
¥ogøm_cou¡î


426 
NULL


430 
	gs
 = 
buf
;

431 i‡(!
	gthªad_cuºít
)

432 
	gs
 = 
°r_≠≥nd
 (
LOC
, "noÅhread informationávailable\n");

435 
	gs
 = 
°r_≠≥nd
 (
LOC
, "inÅhread ");

436 
	gs
 = 
°r_≠≥nd
 (
LOC
, 
thªad_cuºít
->
fun˙ame
);

437 
	gs
 = 
°r_≠≥nd
 (
LOC
, " scheduled from ");

438 
	gs
 = 
°r_≠≥nd
 (
LOC
, 
thªad_cuºít
->
sched‰om
);

439 
	gs
 = 
°r_≠≥nd
 (
LOC
, ":");

440 
	gs
 = 
num_≠≥nd
 (
LOC
, 
thªad_cuºít
->
sched‰om_löe
);

441 
	gs
 = 
°r_≠≥nd
 (
LOC
, "\n");

444 
	#DUMP
(
FD
Ë
	`wrôe
(FD, 
buf
, 
s
-buf);

	)

446 i‡(
	glogfûe_fd
 >= 0)

447 
DUMP
(
logfûe_fd
)

448 i‡(!
zlog_deÁu…
)

449 
DUMP
(
STDERR_FILENO
)

452 i‡(
PRI
 <
zlog_deÁu…
->
maxlvl
[
ZLOG_DEST_STDOUT
])

453 
DUMP
(
STDOUT_FILENO
)

455 *--
s
 = '\0';

456 i‡(
	gPRI
 <
zlog_deÁu…
->
maxlvl
[
ZLOG_DEST_MONITOR
])

457 
vty_log_fixed
(
buf
,
s
-buf);

458 i‡(
	gPRI
 <
zlog_deÁu…
->
maxlvl
[
ZLOG_DEST_SYSLOG
])

459 
sy¶og_sigß„
(
PRI
|
zlog_deÁu…
->
Ácûôy
,
msg°¨t
,
s
-msgstart);

461 #unde‡
DUMP


463 #unde‡
PRI


464 #unde‡
LOC


470 
	$zlog_backåa˚_sigß„
(
¥i‹ôy
, *
¥ogøm_cou¡î
)

472 #ifde‡
HAVE_STACK_TRACE


473 c⁄° 
p˛abñ
[] = "Program counter: ";

474 *
¨øy
[64];

475 
size
;

476 
buf
[100];

477 *
s
, **
bt
 = 
NULL
;

478 
	#LOC
 
s
,
buf
+(buf)-
	)
s

480 #ifde‡
HAVE_GLIBC_BACKTRACE


481 
size
 = 
	`backåa˚
(
¨øy
, 
	`¨øy_size
(array));

482 i‡(
size
 <0 || (
size_t
)sizê> 
	`¨øy_size
(
¨øy
))

485 
	#DUMP
(
FD
) { \

486 i‡(
¥ogøm_cou¡î
) \

488 
	`wrôe
(
FD
, 
p˛abñ
, (pclabel)-1); \

489 
	`backåa˚_symbﬁs_fd
(&
¥ogøm_cou¡î
, 1, 
FD
); \

491 
	`wrôe
(
FD
, 
buf
, 
s
-buf); \

492 
	`backåa˚_symbﬁs_fd
(
¨øy
, 
size
, 
FD
); \

493 }

	)

494 #ñi‡
	`deföed
(
HAVE_PRINTSTACK
)

495 
	#DUMP
(
FD
) { \

496 i‡(
¥ogøm_cou¡î
) \

497 
	`wrôe
((
FD
), 
p˛abñ
, (pclabel)-1); \

498 
	`wrôe
((
FD
), 
buf
, 
s
-buf); \

499 
	`¥öt°ack
((
FD
)); \

500 }

	)

503 
s
 = 
buf
;

504 
s
 = 
	`°r_≠≥nd
(
LOC
,"Backtrace for ");

505 
s
 = 
	`num_≠≥nd
(
LOC
,
size
);

506 
s
 = 
	`°r_≠≥nd
(
LOC
," stack frames:\n");

508 i‡((
logfûe_fd
 >0Ë|| (÷ogfûe_fd = 
	`›í_¸ashlog
()) >= 0))

509 
	`DUMP
(
logfûe_fd
)

510 i‡(!
zlog_deÁu…
)

511 
	`DUMP
(
STDERR_FILENO
)

514 i‡(
¥i‹ôy
 <
zlog_deÁu…
->
maxlvl
[
ZLOG_DEST_STDOUT
])

515 
	`DUMP
(
STDOUT_FILENO
)

517 *--
s
 = '\0';

518 i‡(
¥i‹ôy
 <
zlog_deÁu…
->
maxlvl
[
ZLOG_DEST_MONITOR
])

519 
	`vty_log_fixed
(
buf
,
s
-buf);

520 i‡(
¥i‹ôy
 <
zlog_deÁu…
->
maxlvl
[
ZLOG_DEST_SYSLOG
])

521 
	`sy¶og_sigß„
(
¥i‹ôy
|
zlog_deÁu…
->
Ácûôy
,
buf
,
s
-buf);

523 
i
;

524 #ifde‡
HAVE_GLIBC_BACKTRACE


525 
bt
 = 
	`backåa˚_symbﬁs
(
¨øy
, 
size
);

528 
i
 = 0; i < 
size
; i++)

530 
s
 = 
buf
;

531 i‡(
bt
)

532 
s
 = 
	`°r_≠≥nd
(
LOC
, 
bt
[
i
]);

534 
s
 = 
	`°r_≠≥nd
(
LOC
,"[bt ");

535 
s
 = 
	`num_≠≥nd
(
LOC
,
i
);

536 
s
 = 
	`°r_≠≥nd
(
LOC
,"] 0x");

537 
s
 = 
	`hex_≠≥nd
(
LOC
,(
u_l⁄g
)(
¨øy
[
i
]));

539 *
s
 = '\0';

540 i‡(
¥i‹ôy
 <
zlog_deÁu…
->
maxlvl
[
ZLOG_DEST_MONITOR
])

541 
	`vty_log_fixed
(
buf
,
s
-buf);

542 i‡(
¥i‹ôy
 <
zlog_deÁu…
->
maxlvl
[
ZLOG_DEST_SYSLOG
])

543 
	`sy¶og_sigß„
(
¥i‹ôy
|
zlog_deÁu…
->
Ácûôy
,
buf
,
s
-buf);

545 i‡(
bt
)

546 
	`‰ì
(
bt
);

549 #unde‡
DUMP


550 #unde‡
LOC


552 
	}
}

555 
	$zlog_backåa˚
(
¥i‹ôy
)

557 #i‚de‡
HAVE_GLIBC_BACKTRACE


558 
	`zlog
(
NULL
, 
¥i‹ôy
, "No backtraceávailable onÅhisÖlatform.");

560 *
¨øy
[20];

561 
size
, 
i
;

562 **
°rögs
;

564 
size
 = 
	`backåa˚
(
¨øy
, 
	`¨øy_size
(array));

565 i‡(
size
 <0 || (
size_t
)sizê> 
	`¨øy_size
(
¨øy
))

567 
	`zlog_îr
("Cannot get backtrace,Ñeturned invalid # of frames %d "

569 
size
, ()(
	`¨øy_size
(
¨øy
)));

572 
	`zlog
(
NULL
, 
¥i‹ôy
, "Backåa˚ f‹ %d sèck fømes:", 
size
);

573 i‡(!(
°rögs
 = 
	`backåa˚_symbﬁs
(
¨øy
, 
size
)))

575 
	`zlog_îr
("Cannot get backtrace symbols (out of memory?)");

576 
i
 = 0; i < 
size
; i++)

577 
	`zlog
(
NULL
, 
¥i‹ôy
, "[bà%d] %p",
i
,
¨øy
[i]);

581 
i
 = 0; i < 
size
; i++)

582 
	`zlog
(
NULL
, 
¥i‹ôy
, "[bà%d] %s",
i
,
°rögs
[i]);

583 
	`‰ì
(
°rögs
);

586 
	}
}

589 
	$zlog
 (
zlog
 *
zl
, 
¥i‹ôy
, c⁄° *
f‹m©
, ...)

591 
va_li°
 
¨gs
;

593 
	`va_°¨t
(
¨gs
, 
f‹m©
);

594 
	`vzlog
 (
zl
, 
¥i‹ôy
, 
f‹m©
, 
¨gs
);

595 
	`va_íd
 (
¨gs
);

596 
	}
}

598 
	#ZLOG_FUNC
(
FUNCNAME
,
PRIORITY
) \

600 
	`FUNCNAME
(c⁄° *
f‹m©
, ...) \

602 
va_li°
 
¨gs
; \

603 
	`va_°¨t
(
¨gs
, 
f‹m©
); \

604 
	`vzlog
 (
NULL
, 
PRIORITY
, 
f‹m©
, 
¨gs
); \

605 
	`va_íd
(
¨gs
); \

606 }

	)

608 
	$ZLOG_FUNC
(
zlog_îr
, 
LOG_ERR
)

610 
	$ZLOG_FUNC
(
zlog_w¨n
, 
LOG_WARNING
)

612 
	$ZLOG_FUNC
(
zlog_öfo
, 
LOG_INFO
)

614 
	$ZLOG_FUNC
(
zlog_nŸi˚
, 
LOG_NOTICE
)

616 
	$ZLOG_FUNC
(
zlog_debug
, 
LOG_DEBUG
)

618 #unde‡
ZLOG_FUNC


620 
	#PLOG_FUNC
(
FUNCNAME
,
PRIORITY
) \

622 
	`FUNCNAME
(
zlog
 *
zl
, c⁄° *
f‹m©
, ...) \

624 
va_li°
 
¨gs
; \

625 
	`va_°¨t
(
¨gs
, 
f‹m©
); \

626 
	`vzlog
 (
zl
, 
PRIORITY
, 
f‹m©
, 
¨gs
); \

627 
	`va_íd
(
¨gs
); \

628 
	}

	)
}

630 
	$PLOG_FUNC
(
∂og_îr
, 
LOG_ERR
)

632 
	$PLOG_FUNC
(
∂og_w¨n
, 
LOG_WARNING
)

634 
	$PLOG_FUNC
(
∂og_öfo
, 
LOG_INFO
)

636 
	$PLOG_FUNC
(
∂og_nŸi˚
, 
LOG_NOTICE
)

638 
	$PLOG_FUNC
(
∂og_debug
, 
LOG_DEBUG
)

640 #unde‡
PLOG_FUNC


642 
	$zlog_thªad_öfo
 (
log_Àvñ
)

644 i‡(
thªad_cuºít
)

645 
	`zlog
(
NULL
, 
log_Àvñ
, "CurrentÅhread function %s, scheduled from "

646 "fûê%s,Üöê%u", 
thªad_cuºít
->
fun˙ame
,

647 
thªad_cuºít
->
sched‰om
,Åhªad_cuºít->
sched‰om_löe
);

649 
	`zlog
(
NULL
, 
log_Àvñ
, "CurrentÅhreadÇot known/applicable");

650 
	}
}

653 
	$_zlog_as£π_Áûed
 (c⁄° *
as£πi⁄
, c⁄° *
fûe
,

654 
löe
, c⁄° *
fun˘i⁄
)

657 i‡(
zlog_deÁu…
 && !zlog_deÁu…->
Â
 &&

658 ((
logfûe_fd
 = 
	`›í_¸ashlog
()) >= 0) &&

659 ((
zlog_deÁu…
->
Â
 = 
	`fd›í
(
logfûe_fd
, "w")Ë!
NULL
))

660 
zlog_deÁu…
->
maxlvl
[
ZLOG_DEST_FILE
] = 
LOG_ERR
;

661 
	`zlog
(
NULL
, 
LOG_CRIT
, "Assertion `%s' failed in file %s,Üine %u, function %s",

662 
as£πi⁄
,
fûe
,
löe
,(
fun˘i⁄
 ? function : "?"));

663 
	`zlog_backåa˚
(
LOG_CRIT
);

664 
	`zlog_thªad_öfo
(
LOG_CRIT
);

665 
	`ab‹t
();

666 
	}
}

670 
zlog
 *

671 
	$›ízlog
 (c⁄° *
¥og«me
, 
zlog_¥Ÿo_t
 
¥Ÿocﬁ
,

672 
sy¶og_Êags
, 
sy¶og_Ácûôy
)

674 
zlog
 *
zl
;

675 
u_öt
 
i
;

677 
zl
 = 
	`XCALLOC
(
MTYPE_ZLOG
,  (
zlog
));

679 
zl
->
idít
 = 
¥og«me
;

680 
zl
->
¥Ÿocﬁ
 =Örotocol;

681 
zl
->
Ácûôy
 = 
sy¶og_Ácûôy
;

682 
zl
->
sy¶og_›ti⁄s
 = 
sy¶og_Êags
;

685 
i
 = 0; i < 
	`¨øy_size
(
zl
->
maxlvl
); i++)

686 
zl
->
maxlvl
[
i
] = 
ZLOG_DISABLED
;

687 
zl
->
maxlvl
[
ZLOG_DEST_MONITOR
] = 
LOG_DEBUG
;

688 
zl
->
deÁu…_lvl
 = 
LOG_DEBUG
;

690 
	`›ílog
 (
¥og«me
, 
sy¶og_Êags
, 
zl
->
Ácûôy
);

692  
zl
;

693 
	}
}

696 
	$˛o£zlog
 (
zlog
 *
zl
)

698 
	`˛o£log
();

700 i‡(
zl
->
Â
 !
NULL
)

701 
	`f˛o£
 (
zl
->
Â
);

703 i‡(
zl
->
fûíame
 !
NULL
)

704 
	`‰ì
 (
zl
->
fûíame
);

706 
	`XFREE
 (
MTYPE_ZLOG
, 
zl
);

707 
	}
}

711 
	$zlog_£t_Àvñ
 (
zlog
 *
zl
, 
zlog_de°_t
 
de°
, 
log_Àvñ
)

713 i‡(
zl
 =
NULL
)

714 
zl
 = 
zlog_deÁu…
;

716 
zl
->
maxlvl
[
de°
] = 
log_Àvñ
;

717 
	}
}

720 
	$zlog_£t_fûe
 (
zlog
 *
zl
, c⁄° *
fûíame
, 
log_Àvñ
)

722 
FILE
 *
Â
;

723 
mode_t
 
ﬁdumask
;

726 
	`zlog_ª£t_fûe
 (
zl
);

729 i‡(
zl
 =
NULL
)

730 
zl
 = 
zlog_deÁu…
;

733 
ﬁdumask
 = 
	`umask
 (0777 & ~
LOGFILE_MASK
);

734 
Â
 = 
	`f›í
 (
fûíame
, "a");

735 
	`umask
(
ﬁdumask
);

736 i‡(
Â
 =
NULL
)

740 
zl
->
fûíame
 = 
	`°rdup
 (filename);

741 
zl
->
maxlvl
[
ZLOG_DEST_FILE
] = 
log_Àvñ
;

742 
zl
->
Â
 = fp;

743 
logfûe_fd
 = 
	`fûío
(
Â
);

746 
	}
}

750 
	$zlog_ª£t_fûe
 (
zlog
 *
zl
)

752 i‡(
zl
 =
NULL
)

753 
zl
 = 
zlog_deÁu…
;

755 i‡(
zl
->
Â
)

756 
	`f˛o£
 (
zl
->
Â
);

757 
zl
->
Â
 = 
NULL
;

758 
logfûe_fd
 = -1;

759 
zl
->
maxlvl
[
ZLOG_DEST_FILE
] = 
ZLOG_DISABLED
;

761 i‡(
zl
->
fûíame
)

762 
	`‰ì
 (
zl
->
fûíame
);

763 
zl
->
fûíame
 = 
NULL
;

766 
	}
}

770 
	$zlog_rŸ©e
 (
zlog
 *
zl
)

772 
Àvñ
;

774 i‡(
zl
 =
NULL
)

775 
zl
 = 
zlog_deÁu…
;

777 i‡(
zl
->
Â
)

778 
	`f˛o£
 (
zl
->
Â
);

779 
zl
->
Â
 = 
NULL
;

780 
logfûe_fd
 = -1;

781 
Àvñ
 = 
zl
->
maxlvl
[
ZLOG_DEST_FILE
];

782 
zl
->
maxlvl
[
ZLOG_DEST_FILE
] = 
ZLOG_DISABLED
;

784 i‡(
zl
->
fûíame
)

786 
mode_t
 
ﬁdumask
;

787 
ßve_î∫o
;

789 
ﬁdumask
 = 
	`umask
 (0777 & ~
LOGFILE_MASK
);

790 
zl
->
Â
 = 
	`f›í
 (zl->
fûíame
, "a");

791 
ßve_î∫o
 = 
î∫o
;

792 
	`umask
(
ﬁdumask
);

793 i‡(
zl
->
Â
 =
NULL
)

795 
	`zlog_îr
("LogÑotate failed: cannot open file %s foráppend: %s",

796 
zl
->
fûíame
, 
	`ß„_°ªº‹
(
ßve_î∫o
));

799 
logfûe_fd
 = 
	`fûío
(
zl
->
Â
);

800 
zl
->
maxlvl
[
ZLOG_DEST_FILE
] = 
Àvñ
;

804 
	}
}

808 
	$lookup
 (c⁄° 
mesßge
 *
mes
, 
key
)

810 c⁄° 
mesßge
 *
≤t
;

812 
≤t
 = 
mes
;Ö¡->
key
 != 0;Önt++)

813 i‡(
≤t
->
key
 == key)

814  
≤t
->
°r
;

817 
	}
}

826 
	$mes_lookup
 (c⁄° 
mesßge
 *
me¶i°
, 
max
, 
ödex
,

827 c⁄° *
n⁄e
, c⁄° *
me¢ame
)

829 
pos
 = 
ödex
 - 
me¶i°
[0].
key
;

836 i‡((
pos
 >0Ë&& (po†< 
max
)

837 && (
me¶i°
[
pos
].
key
 =
ödex
))

838  
me¶i°
[
pos
].
°r
;

842 
i
;

844 
i
 = 0; i < 
max
; i++, 
me¶i°
++)

846 i‡(
me¶i°
->
key
 =
ödex
)

848 c⁄° *
°r
 = (
me¶i°
->°∏? me¶i°->°∏: 
n⁄e
);

850 
	`zlog_debug
 ("message index %d [%s] found in %sátÖosition %d (max is %d)",

851 
ödex
, 
°r
, 
me¢ame
, 
i
, 
max
);

852  
°r
;

856 
	`zlog_îr
("mesßgêödex %dÇŸ found i¿%†(max i†%d)", 
ödex
, 
me¢ame
, 
max
);

857 
	`as£π
 (
n⁄e
);

858  
n⁄e
;

859 
	}
}

863 
	$ß„_°ªº‹
(
î∫um
)

865 c⁄° *
s
 = 
	`°ªº‹
(
î∫um
);

866  (
s
 !
NULL
) ? s : "UnknownÉrror";

867 
	}
}

869 
	#DESC_ENTRY
(
T
Ë[(T)] = { (T), (#T), '\0' }

	)

870 c⁄° 
zebø_desc_èbÀ
 
	gcomm™d_ty≥s
[] = {

871 
DESC_ENTRY
 (
ZEBRA_INTERFACE_ADD
),

872 
DESC_ENTRY
 (
ZEBRA_INTERFACE_DELETE
),

873 
DESC_ENTRY
 (
ZEBRA_INTERFACE_ADDRESS_ADD
),

874 
DESC_ENTRY
 (
ZEBRA_INTERFACE_ADDRESS_DELETE
),

875 
DESC_ENTRY
 (
ZEBRA_INTERFACE_UP
),

876 
DESC_ENTRY
 (
ZEBRA_INTERFACE_DOWN
),

877 
DESC_ENTRY
 (
ZEBRA_IPV4_ROUTE_ADD
),

878 
DESC_ENTRY
 (
ZEBRA_IPV4_ROUTE_DELETE
),

879 
DESC_ENTRY
 (
ZEBRA_IPV6_ROUTE_ADD
),

880 
DESC_ENTRY
 (
ZEBRA_IPV6_ROUTE_DELETE
),

881 
DESC_ENTRY
 (
ZEBRA_REDISTRIBUTE_ADD
),

882 
DESC_ENTRY
 (
ZEBRA_REDISTRIBUTE_DELETE
),

883 
DESC_ENTRY
 (
ZEBRA_REDISTRIBUTE_DEFAULT_ADD
),

884 
DESC_ENTRY
 (
ZEBRA_REDISTRIBUTE_DEFAULT_DELETE
),

885 
DESC_ENTRY
 (
ZEBRA_IPV4_NEXTHOP_LOOKUP
),

886 
DESC_ENTRY
 (
ZEBRA_IPV6_NEXTHOP_LOOKUP
),

887 
DESC_ENTRY
 (
ZEBRA_IPV4_IMPORT_LOOKUP
),

888 
DESC_ENTRY
 (
ZEBRA_IPV6_IMPORT_LOOKUP
),

889 
DESC_ENTRY
 (
ZEBRA_INTERFACE_RENAME
),

890 
DESC_ENTRY
 (
ZEBRA_ROUTER_ID_ADD
),

891 
DESC_ENTRY
 (
ZEBRA_ROUTER_ID_DELETE
),

892 
DESC_ENTRY
 (
ZEBRA_ROUTER_ID_UPDATE
),

893 
DESC_ENTRY
 (
ZEBRA_HELLO
),

895 #unde‡
DESC_ENTRY


897 c⁄° 
zebø_desc_èbÀ
 
	gunknown
 = { 0, "unknown", '?' };

899 c⁄° 
zebø_desc_èbÀ
 *

900 
	$zrouã_lookup
(
u_öt
 
zrouã
)

902 
u_öt
 
i
;

904 i‡(
zrouã
 >
	`¨øy_size
(
rouã_ty≥s
))

906 
	`zlog_îr
("unknow¿zebøÑouãÅy≥: %u", 
zrouã
);

907  &
unknown
;

909 i‡(
zrouã
 =
rouã_ty≥s
[zrouã].
ty≥
)

910  &
rouã_ty≥s
[
zrouã
];

911 
i
 = 0; i < 
	`¨øy_size
(
rouã_ty≥s
); i++)

913 i‡(
zrouã
 =
rouã_ty≥s
[
i
].
ty≥
)

915 
	`zlog_w¨n
("internalÉrror:ÑouteÅypeÅable out of order "

916 "whûê£¨chög f‹ %u,ÖÀa£ÇŸify devñ›îs", 
zrouã
);

917  &
rouã_ty≥s
[
i
];

920 
	`zlog_îr
("öã∫ÆÉº‹: c™nŸ födÑouãÅy≥ %u i¿èbÀ!", 
zrouã
);

921  &
unknown
;

922 
	}
}

925 
	$zebø_rouã_°rög
(
u_öt
 
zrouã
)

927  
	`zrouã_lookup
(
zrouã
)->
°rög
;

928 
	}
}

931 
	$zebø_rouã_ch¨
(
u_öt
 
zrouã
)

933  
	`zrouã_lookup
(
zrouã
)->
chr
;

934 
	}
}

937 
	$z£rv_comm™d_°rög
 (
comm™d
)

939 i‡(
comm™d
 >
	`¨øy_size
(
comm™d_ty≥s
))

941 
	`zlog_îr
 ("unknow¿z£rv comm™dÅy≥: %u", 
comm™d
);

942  
unknown
.
°rög
;

944  
comm™d_ty≥s
[
comm™d
].
°rög
;

945 
	}
}

948 
	$¥Ÿo_«me2num
(c⁄° *
s
)

950 
i
;

952 
i
=0; i<
	`¨øy_size
(
rouã_ty≥s
); ++i)

953 i‡(
	`°rˇ£cmp
(
s
, 
rouã_ty≥s
[
i
].
°rög
) == 0)

954  
rouã_ty≥s
[
i
].
ty≥
;

956 
	}
}

959 
	$¥Ÿo_ªdi°num
(
afi
, c⁄° *
s
)

961 i‡(! 
s
)

964 i‡(
afi
 =
AFI_IP
)

966 i‡(
	`°∫cmp
 (
s
, "k", 1) == 0)

967  
ZEBRA_ROUTE_KERNEL
;

968 i‡(
	`°∫cmp
 (
s
, "c", 1) == 0)

969  
ZEBRA_ROUTE_CONNECT
;

970 i‡(
	`°∫cmp
 (
s
, "s", 1) == 0)

971  
ZEBRA_ROUTE_STATIC
;

972 i‡(
	`°∫cmp
 (
s
, "r", 1) == 0)

973  
ZEBRA_ROUTE_RIP
;

974 i‡(
	`°∫cmp
 (
s
, "o", 1) == 0)

975  
ZEBRA_ROUTE_OSPF
;

976 i‡(
	`°∫cmp
 (
s
, "i", 1) == 0)

977  
ZEBRA_ROUTE_ISIS
;

978 i‡(
	`°∫cmp
 (
s
, "bg", 2) == 0)

979  
ZEBRA_ROUTE_BGP
;

980 i‡(
	`°∫cmp
 (
s
, "ba", 2) == 0)

981  
ZEBRA_ROUTE_BABEL
;

983 i‡(
afi
 =
AFI_IP6
)

985 i‡(
	`°∫cmp
 (
s
, "k", 1) == 0)

986  
ZEBRA_ROUTE_KERNEL
;

987 i‡(
	`°∫cmp
 (
s
, "c", 1) == 0)

988  
ZEBRA_ROUTE_CONNECT
;

989 i‡(
	`°∫cmp
 (
s
, "s", 1) == 0)

990  
ZEBRA_ROUTE_STATIC
;

991 i‡(
	`°∫cmp
 (
s
, "r", 1) == 0)

992  
ZEBRA_ROUTE_RIPNG
;

993 i‡(
	`°∫cmp
 (
s
, "o", 1) == 0)

994  
ZEBRA_ROUTE_OSPF6
;

995 i‡(
	`°∫cmp
 (
s
, "i", 1) == 0)

996  
ZEBRA_ROUTE_ISIS
;

997 i‡(
	`°∫cmp
 (
s
, "bg", 2) == 0)

998  
ZEBRA_ROUTE_BGP
;

999 i‡(
	`°∫cmp
 (
s
, "ba", 2) == 0)

1000  
ZEBRA_ROUTE_BABEL
;

1003 
	}
}

	@log.h

23 #i‚de‡
_ZEBRA_LOG_H


24 
	#_ZEBRA_LOG_H


	)

26 
	~<sy¶og.h
>

46 
	mZLOG_NONE
,

47 
	mZLOG_DEFAULT
,

48 
	mZLOG_ZEBRA
,

49 
	mZLOG_RIP
,

50 
	mZLOG_BGP
,

51 
	mZLOG_OSPF
,

52 
	mZLOG_RIPNG
,

53 
	mZLOG_BABEL
,

54 
	mZLOG_OSPF6
,

55 
	mZLOG_ISIS
,

56 
	mZLOG_PIM
,

57 
	mZLOG_MASC


58 } 
	tzlog_¥Ÿo_t
;

62 
	#ZLOG_DISABLED
 (
LOG_EMERG
-1)

	)

66 
	mZLOG_DEST_SYSLOG
 = 0,

67 
	mZLOG_DEST_STDOUT
,

68 
	mZLOG_DEST_MONITOR
,

69 
	mZLOG_DEST_FILE


70 } 
	tzlog_de°_t
;

71 
	#ZLOG_NUM_DESTS
 (
ZLOG_DEST_FILE
+1)

	)

73 
	szlog


75 c⁄° *
	midít
;

76 
zlog_¥Ÿo_t
 
	m¥Ÿocﬁ
;

77 
	mmaxlvl
[
ZLOG_NUM_DESTS
];

79 
	mdeÁu…_lvl
;

80 
FILE
 *
	mÂ
;

81 *
	mfûíame
;

82 
	mÁcûôy
;

83 
	mªc‹d_¥i‹ôy
;

85 
	msy¶og_›ti⁄s
;

86 
	mtime°amp_¥ecisi⁄
;

90 
	smesßge


92 
	mkey
;

93 c⁄° *
	m°r
;

97 
zlog
 *
zlog_deÁu…
;

100 
zlog
 *
›ízlog
 (c⁄° *
¥og«me
, 
zlog_¥Ÿo_t
 
¥Ÿocﬁ
,

101 
sy¶og_›ti⁄s
, 
sy¶og_Ácûôy
);

104 
˛o£zlog
 (
zlog
 *
zl
);

107 #ifde‡
__GNUC__


108 
	#PRINTF_ATTRIBUTE
(
a
,
b
Ë
	`__©åibuã__
 ((
	`__f‹m©__
 (
__¥ötf__
,á, b)))

	)

110 
	#PRINTF_ATTRIBUTE
(
a
,
b
)

	)

114 
	$zlog
 (
zlog
 *
zl
, 
¥i‹ôy
, c⁄° *
f‹m©
, ...)

115 
	`PRINTF_ATTRIBUTE
(3, 4);

118 
	$zlog_îr
 (c⁄° *
f‹m©
, ...Ë
	`PRINTF_ATTRIBUTE
(1, 2);

119 
	$zlog_w¨n
 (c⁄° *
f‹m©
, ...Ë
	`PRINTF_ATTRIBUTE
(1, 2);

120 
	$zlog_öfo
 (c⁄° *
f‹m©
, ...Ë
	`PRINTF_ATTRIBUTE
(1, 2);

121 
	$zlog_nŸi˚
 (c⁄° *
f‹m©
, ...Ë
	`PRINTF_ATTRIBUTE
(1, 2);

122 
	$zlog_debug
 (c⁄° *
f‹m©
, ...Ë
	`PRINTF_ATTRIBUTE
(1, 2);

125 
	$∂og_îr
 (
zlog
 *, c⁄° *
f‹m©
, ...)

126 
	`PRINTF_ATTRIBUTE
(2, 3);

127 
	$∂og_w¨n
 (
zlog
 *, c⁄° *
f‹m©
, ...)

128 
	`PRINTF_ATTRIBUTE
(2, 3);

129 
	$∂og_öfo
 (
zlog
 *, c⁄° *
f‹m©
, ...)

130 
	`PRINTF_ATTRIBUTE
(2, 3);

131 
	$∂og_nŸi˚
 (
zlog
 *, c⁄° *
f‹m©
, ...)

132 
	`PRINTF_ATTRIBUTE
(2, 3);

133 
	$∂og_debug
 (
zlog
 *, c⁄° *
f‹m©
, ...)

134 
	`PRINTF_ATTRIBUTE
(2, 3);

136 
	`zlog_thªad_öfo
 (
log_Àvñ
);

142 
	`zlog_£t_Àvñ
 (
zlog
 *
zl
, 
zlog_de°_t
, 
log_Àvñ
);

145 
	`zlog_£t_fûe
 (
zlog
 *
zl
, c⁄° *
fûíame
, 
log_Àvñ
);

147 
	`zlog_ª£t_fûe
 (
zlog
 *
zl
);

150 
	`zlog_rŸ©e
 (
zlog
 *);

153 
	#LOOKUP_DEF
(
x
, 
y
, 
def
Ë
	`mes_lookup
(x, x ## 
_max
, y, def, #x)

	)

154 
	#LOOKUP
(
x
, 
y
Ë
	`LOOKUP_DEF
(x, y, "“ÿôem found)")

	)

156 c⁄° *
	`lookup
 (c⁄° 
mesßge
 *, );

157 c⁄° *
	`mes_lookup
 (c⁄° 
mesßge
 *
me¶i°
,

158 
max
, 
ödex
,

159 c⁄° *
no_ôem
, c⁄° *
me¢ame
);

161 c⁄° *
zlog_¥i‹ôy
[];

162 c⁄° *
zlog_¥Ÿo_«mes
[];

165 c⁄° *
	`ß„_°ªº‹
(
î∫um
);

168 
	`zlog_sig«l
(
signo
, c⁄° *
a˘i⁄


169 #ifde‡
SA_SIGINFO


170 , 
sigöfo_t
 *
sigöfo
, *
¥ogøm_cou¡î


175 
	`zlog_backåa˚
(
¥i‹ôy
);

181 
	`zlog_backåa˚_sigß„
(
¥i‹ôy
, *
¥ogøm_cou¡î
);

189 
size_t
 
	`quagga_time°amp
(
time°amp_¥ecisi⁄
 ,

190 *
buf
, 
size_t
 
buÊí
);

193 
	stime°amp_c⁄åﬁ
 {

194 
size_t
 
Àn
;

195 
¥ecisi⁄
;

196 
Æªady_ªndîed
;

197 
buf
[40];

202 
	#LOG_LEVELS
 "”mîgícõs|Æîts|¸ôiˇl|îr‹s|w¨nögs|nŸifiˇti⁄s|öf‹m©i⁄Æ|debuggög)"

	)

204 
	#LOG_LEVEL_DESC
 \

212 "Debuggög mesßges\n"

	)

214 
	#LOG_FACILITIES
 "(kîn|u£r|maû|d´m⁄|auth|sy¶og|Õr|√ws|uu˝|¸⁄|loˇl0|loˇl1|loˇl2|loˇl3|loˇl4|loˇl5|loˇl6|loˇl7)"

	)

216 
	#LOG_FACILITY_DESC
 \

234 "Loˇ»u£\n"

	)

	@md5.c

42 
	~<zebø.h
>

43 
	~"md5.h
"

45 
	#SHIFT
(
X
, 
s
Ë(((XË<< (s)Ë| ((XË>> (32 - (s))))

	)

47 
	#F
(
X
, 
Y
, 
Z
Ë(((XË& (Y)Ë| ((~XË& (Z)))

	)

48 
	#G
(
X
, 
Y
, 
Z
Ë(((XË& (Z)Ë| ((YË& (~Z)))

	)

49 
	#H
(
X
, 
Y
, 
Z
Ë((XË^ (YË^ (Z))

	)

50 
	#I
(
X
, 
Y
, 
Z
Ë((YË^ ((XË| (~Z)))

	)

52 
	#ROUND1
(
a
, 
b
, 
c
, 
d
, 
k
, 
s
, 
i
) { \

53 (
a
Ë◊Ë+ 
	`F
((
b
), (
c
), (
d
)Ë+ 
X
[(
k
)] + 
T
[(
i
)]; \

54 (
a
Ë
	`SHIFT
(◊), (
s
)); \

55 (
a
Ë(
b
) + (a); \

56 }

	)

58 
	#ROUND2
(
a
, 
b
, 
c
, 
d
, 
k
, 
s
, 
i
) { \

59 (
a
Ë◊Ë+ 
	`G
((
b
), (
c
), (
d
)Ë+ 
X
[(
k
)] + 
T
[(
i
)]; \

60 (
a
Ë
	`SHIFT
(◊), (
s
)); \

61 (
a
Ë(
b
) + (a); \

62 }

	)

64 
	#ROUND3
(
a
, 
b
, 
c
, 
d
, 
k
, 
s
, 
i
) { \

65 (
a
Ë◊Ë+ 
	`H
((
b
), (
c
), (
d
)Ë+ 
X
[(
k
)] + 
T
[(
i
)]; \

66 (
a
Ë
	`SHIFT
(◊), (
s
)); \

67 (
a
Ë(
b
) + (a); \

68 }

	)

70 
	#ROUND4
(
a
, 
b
, 
c
, 
d
, 
k
, 
s
, 
i
) { \

71 (
a
Ë◊Ë+ 
	`I
((
b
), (
c
), (
d
)Ë+ 
X
[(
k
)] + 
T
[(
i
)]; \

72 (
a
Ë
	`SHIFT
(◊), (
s
)); \

73 (
a
Ë(
b
) + (a); \

74 }

	)

76 
	#Sa
 7

	)

77 
	#Sb
 12

	)

78 
	#Sc
 17

	)

79 
	#Sd
 22

	)

81 
	#Se
 5

	)

82 
	#Sf
 9

	)

83 
	#Sg
 14

	)

84 
	#Sh
 20

	)

86 
	#Si
 4

	)

87 
	#Sj
 11

	)

88 
	#Sk
 16

	)

89 
	#Sl
 23

	)

91 
	#Sm
 6

	)

92 
	#Sn
 10

	)

93 
	#So
 15

	)

94 
	#Sp
 21

	)

96 
	#MD5_A0
 0x67452301

	)

97 
	#MD5_B0
 0xefcdab89

	)

98 
	#MD5_C0
 0x98badc„

	)

99 
	#MD5_D0
 0x10325476

	)

102 c⁄° 
uöt32_t
 
	gT
[65] = {

125 c⁄° 
uöt8_t
 
	gmd5_∑dd©
[
MD5_BUFLEN
] = {

136 
md5_ˇlc
 (c⁄° 
uöt8_t
 *, 
md5_˘xt
 *);

138 
	$md5_öô
(
md5_˘xt
 *
˘xt
)

140 
˘xt
->
md5_n
 = 0;

141 
˘xt
->
md5_i
 = 0;

142 
˘xt
->
md5_°a
 = 
MD5_A0
;

143 
˘xt
->
md5_°b
 = 
MD5_B0
;

144 
˘xt
->
md5_°c
 = 
MD5_C0
;

145 
˘xt
->
md5_°d
 = 
MD5_D0
;

146 
	`mem£t
 (
˘xt
->
md5_buf
, 0, (ctxt->md5_buf));

147 
	}
}

149 
	$md5_lo›
(
md5_˘xt
 *
˘xt
, c⁄° *
vöput
, 
uöt
 
Àn
)

151 
uöt
 
g≠
, 
i
;

152 c⁄° 
uöt8_t
 *
öput
 = 
vöput
;

154 
˘xt
->
md5_n
 +
Àn
 * 8;

155 
g≠
 = 
MD5_BUFLEN
 - 
˘xt
->
md5_i
;

157 i‡(
Àn
 >
g≠
) {

158 
	`mem˝y
 (
˘xt
->
md5_buf
 + ctxt->
md5_i
, 
öput
, 
g≠
);

159 
	`md5_ˇlc
(
˘xt
->
md5_buf
, ctxt);

161 
i
 = 
g≠
; i + 
MD5_BUFLEN
 <
Àn
; i += MD5_BUFLEN) {

162 
	`md5_ˇlc
((
öput
 + 
i
), 
˘xt
);

165 
˘xt
->
md5_i
 = 
Àn
 - 
i
;

166 
	`mem˝y
 (
˘xt
->
md5_buf
, (
öput
 + 
i
), ctxt->
md5_i
);

168 
	`mem˝y
 (
˘xt
->
md5_buf
 + ctxt->
md5_i
, 
öput
, 
Àn
);

169 
˘xt
->
md5_i
 +
Àn
;

171 
	}
}

173 
	$md5_∑d
(
md5_˘xt
 *
˘xt
)

175 
uöt
 
g≠
;

178 
g≠
 = 
MD5_BUFLEN
 - 
˘xt
->
md5_i
;

179 i‡(
g≠
 > 8) {

180 
	`mem˝y
 (
˘xt
->
md5_buf
 + ctxt->
md5_i
, 
md5_∑dd©
,

181 
g≠
 - (
˘xt
->
md5_n
));

184 
	`mem˝y
 (
˘xt
->
md5_buf
 + ctxt->
md5_i
, 
md5_∑dd©
, 
g≠
);

185 
	`md5_ˇlc
 (
˘xt
->
md5_buf
, ctxt);

186 
	`mem˝y
 (
˘xt
->
md5_buf
, 
md5_∑dd©
 + 
g≠
,

187 
MD5_BUFLEN
 - (
˘xt
->
md5_n
));

191 i‡(
BYTE_ORDER
 =
LITTLE_ENDIAN
)

192 
	`mem˝y
 (&
˘xt
->
md5_buf
[56], &˘xt->
md5_n8
[0], 8);

195 
˘xt
->
md5_buf
[56] = ctxt->
md5_n8
[7];

196 
˘xt
->
md5_buf
[57] = ctxt->
md5_n8
[6];

197 
˘xt
->
md5_buf
[58] = ctxt->
md5_n8
[5];

198 
˘xt
->
md5_buf
[59] = ctxt->
md5_n8
[4];

199 
˘xt
->
md5_buf
[60] = ctxt->
md5_n8
[3];

200 
˘xt
->
md5_buf
[61] = ctxt->
md5_n8
[2];

201 
˘xt
->
md5_buf
[62] = ctxt->
md5_n8
[1];

202 
˘xt
->
md5_buf
[63] = ctxt->
md5_n8
[0];

204 
	`md5_ˇlc
(
˘xt
->
md5_buf
, ctxt);

205 
	}
}

207 
	$md5_ªsu…
(
uöt8_t
 *
dige°
, 
md5_˘xt
 *
˘xt
)

210 i‡(
BYTE_ORDER
 =
LITTLE_ENDIAN
)

211 
	`mem˝y
 (
dige°
, &
˘xt
->
md5_°8
[0], 16);

212 i‡(
BYTE_ORDER
 =
BIG_ENDIAN
)

214 
dige°
[ 0] = 
˘xt
->
md5_°8
[ 3]; digest[ 1] = ctxt->md5_st8[ 2];

215 
dige°
[ 2] = 
˘xt
->
md5_°8
[ 1]; digest[ 3] = ctxt->md5_st8[ 0];

216 
dige°
[ 4] = 
˘xt
->
md5_°8
[ 7]; digest[ 5] = ctxt->md5_st8[ 6];

217 
dige°
[ 6] = 
˘xt
->
md5_°8
[ 5]; digest[ 7] = ctxt->md5_st8[ 4];

218 
dige°
[ 8] = 
˘xt
->
md5_°8
[11]; digest[ 9] = ctxt->md5_st8[10];

219 
dige°
[10] = 
˘xt
->
md5_°8
[ 9]; digest[11] = ctxt->md5_st8[ 8];

220 
dige°
[12] = 
˘xt
->
md5_°8
[15]; digest[13] = ctxt->md5_st8[14];

221 
dige°
[14] = 
˘xt
->
md5_°8
[13]; digest[15] = ctxt->md5_st8[12];

223 
	}
}

225 
	$md5_ˇlc
(c⁄° 
uöt8_t
 *
b64
, 
md5_˘xt
 * 
˘xt
)

227 
uöt32_t
 
A
 = 
˘xt
->
md5_°a
;

228 
uöt32_t
 
B
 = 
˘xt
->
md5_°b
;

229 
uöt32_t
 
C
 = 
˘xt
->
md5_°c
;

230 
uöt32_t
 
D
 = 
˘xt
->
md5_°d
;

231 #i‡(
BYTE_ORDER
 =
LITTLE_ENDIAN
)

232 c⁄° 
uöt32_t
 *
X
 = (c⁄° uöt32_à*)
b64
;

233 #ñi‡(
BYTE_ORDER
 =
BIG_ENDIAN
)

234 
uöt32_t
 
X
[16];

236 i‡(
BYTE_ORDER
 =
BIG_ENDIAN
)

240 
uöt8_t
 *
y
 = (uöt8_à*)
X
;

241 
y
[ 0] = 
b64
[ 3]; y[ 1] = b64[ 2]; y[ 2] = b64[ 1]; y[ 3] = b64[ 0];

242 
y
[ 4] = 
b64
[ 7]; y[ 5] = b64[ 6]; y[ 6] = b64[ 5]; y[ 7] = b64[ 4];

243 
y
[ 8] = 
b64
[11]; y[ 9] = b64[10]; y[10] = b64[ 9]; y[11] = b64[ 8];

244 
y
[12] = 
b64
[15]; y[13] = b64[14]; y[14] = b64[13]; y[15] = b64[12];

245 
y
[16] = 
b64
[19]; y[17] = b64[18]; y[18] = b64[17]; y[19] = b64[16];

246 
y
[20] = 
b64
[23]; y[21] = b64[22]; y[22] = b64[21]; y[23] = b64[20];

247 
y
[24] = 
b64
[27]; y[25] = b64[26]; y[26] = b64[25]; y[27] = b64[24];

248 
y
[28] = 
b64
[31]; y[29] = b64[30]; y[30] = b64[29]; y[31] = b64[28];

249 
y
[32] = 
b64
[35]; y[33] = b64[34]; y[34] = b64[33]; y[35] = b64[32];

250 
y
[36] = 
b64
[39]; y[37] = b64[38]; y[38] = b64[37]; y[39] = b64[36];

251 
y
[40] = 
b64
[43]; y[41] = b64[42]; y[42] = b64[41]; y[43] = b64[40];

252 
y
[44] = 
b64
[47]; y[45] = b64[46]; y[46] = b64[45]; y[47] = b64[44];

253 
y
[48] = 
b64
[51]; y[49] = b64[50]; y[50] = b64[49]; y[51] = b64[48];

254 
y
[52] = 
b64
[55]; y[53] = b64[54]; y[54] = b64[53]; y[55] = b64[52];

255 
y
[56] = 
b64
[59]; y[57] = b64[58]; y[58] = b64[57]; y[59] = b64[56];

256 
y
[60] = 
b64
[63]; y[61] = b64[62]; y[62] = b64[61]; y[63] = b64[60];

260 
	`ROUND1
(
A
, 
B
, 
C
, 
D
, 0, 
Sa
, 1); ROUND1(D, A, B, C, 1, 
Sb
, 2);

261 
	`ROUND1
(
C
, 
D
, 
A
, 
B
, 2, 
Sc
, 3); ROUND1(B, C, D, A, 3, 
Sd
, 4);

262 
	`ROUND1
(
A
, 
B
, 
C
, 
D
, 4, 
Sa
, 5); ROUND1(D, A, B, C, 5, 
Sb
, 6);

263 
	`ROUND1
(
C
, 
D
, 
A
, 
B
, 6, 
Sc
, 7); ROUND1(B, C, D, A, 7, 
Sd
, 8);

264 
	`ROUND1
(
A
, 
B
, 
C
, 
D
, 8, 
Sa
, 9); ROUND1(D, A, B, C, 9, 
Sb
, 10);

265 
	`ROUND1
(
C
, 
D
, 
A
, 
B
, 10, 
Sc
, 11); ROUND1(B, C, D, A, 11, 
Sd
, 12);

266 
	`ROUND1
(
A
, 
B
, 
C
, 
D
, 12, 
Sa
, 13); ROUND1(D, A, B, C, 13, 
Sb
, 14);

267 
	`ROUND1
(
C
, 
D
, 
A
, 
B
, 14, 
Sc
, 15); ROUND1(B, C, D, A, 15, 
Sd
, 16);

269 
	`ROUND2
(
A
, 
B
, 
C
, 
D
, 1, 
Se
, 17); ROUND2(D, A, B, C, 6, 
Sf
, 18);

270 
	`ROUND2
(
C
, 
D
, 
A
, 
B
, 11, 
Sg
, 19); ROUND2(B, C, D, A, 0, 
Sh
, 20);

271 
	`ROUND2
(
A
, 
B
, 
C
, 
D
, 5, 
Se
, 21); ROUND2(D, A, B, C, 10, 
Sf
, 22);

272 
	`ROUND2
(
C
, 
D
, 
A
, 
B
, 15, 
Sg
, 23); ROUND2(B, C, D, A, 4, 
Sh
, 24);

273 
	`ROUND2
(
A
, 
B
, 
C
, 
D
, 9, 
Se
, 25); ROUND2(D, A, B, C, 14, 
Sf
, 26);

274 
	`ROUND2
(
C
, 
D
, 
A
, 
B
, 3, 
Sg
, 27); ROUND2(B, C, D, A, 8, 
Sh
, 28);

275 
	`ROUND2
(
A
, 
B
, 
C
, 
D
, 13, 
Se
, 29); ROUND2(D, A, B, C, 2, 
Sf
, 30);

276 
	`ROUND2
(
C
, 
D
, 
A
, 
B
, 7, 
Sg
, 31); ROUND2(B, C, D, A, 12, 
Sh
, 32);

278 
	`ROUND3
(
A
, 
B
, 
C
, 
D
, 5, 
Si
, 33); ROUND3(D, A, B, C, 8, 
Sj
, 34);

279 
	`ROUND3
(
C
, 
D
, 
A
, 
B
, 11, 
Sk
, 35); ROUND3(B, C, D, A, 14, 
Sl
, 36);

280 
	`ROUND3
(
A
, 
B
, 
C
, 
D
, 1, 
Si
, 37); ROUND3(D, A, B, C, 4, 
Sj
, 38);

281 
	`ROUND3
(
C
, 
D
, 
A
, 
B
, 7, 
Sk
, 39); ROUND3(B, C, D, A, 10, 
Sl
, 40);

282 
	`ROUND3
(
A
, 
B
, 
C
, 
D
, 13, 
Si
, 41); ROUND3(D, A, B, C, 0, 
Sj
, 42);

283 
	`ROUND3
(
C
, 
D
, 
A
, 
B
, 3, 
Sk
, 43); ROUND3(B, C, D, A, 6, 
Sl
, 44);

284 
	`ROUND3
(
A
, 
B
, 
C
, 
D
, 9, 
Si
, 45); ROUND3(D, A, B, C, 12, 
Sj
, 46);

285 
	`ROUND3
(
C
, 
D
, 
A
, 
B
, 15, 
Sk
, 47); ROUND3(B, C, D, A, 2, 
Sl
, 48);

287 
	`ROUND4
(
A
, 
B
, 
C
, 
D
, 0, 
Sm
, 49); ROUND4(D, A, B, C, 7, 
Sn
, 50);

288 
	`ROUND4
(
C
, 
D
, 
A
, 
B
, 14, 
So
, 51); ROUND4(B, C, D, A, 5, 
Sp
, 52);

289 
	`ROUND4
(
A
, 
B
, 
C
, 
D
, 12, 
Sm
, 53); ROUND4(D, A, B, C, 3, 
Sn
, 54);

290 
	`ROUND4
(
C
, 
D
, 
A
, 
B
, 10, 
So
, 55); ROUND4(B, C, D, A, 1, 
Sp
, 56);

291 
	`ROUND4
(
A
, 
B
, 
C
, 
D
, 8, 
Sm
, 57); ROUND4(D, A, B, C, 15, 
Sn
, 58);

292 
	`ROUND4
(
C
, 
D
, 
A
, 
B
, 6, 
So
, 59); ROUND4(B, C, D, A, 13, 
Sp
, 60);

293 
	`ROUND4
(
A
, 
B
, 
C
, 
D
, 4, 
Sm
, 61); ROUND4(D, A, B, C, 11, 
Sn
, 62);

294 
	`ROUND4
(
C
, 
D
, 
A
, 
B
, 2, 
So
, 63); ROUND4(B, C, D, A, 9, 
Sp
, 64);

296 
˘xt
->
md5_°a
 +
A
;

297 
˘xt
->
md5_°b
 +
B
;

298 
˘xt
->
md5_°c
 +
C
;

299 
˘xt
->
md5_°d
 +
D
;

300 
	}
}

304 
	$hmac_md5
(
ãxt
, 
ãxt_Àn
, 
key
, 
key_Àn
, 
dige°
)

305 * 
ãxt
;

306 
ãxt_Àn
;

307 * 
key
;

308 
key_Àn
;

309 
uöt8_t
 * 
dige°
;

312 
MD5_CTX
 
c⁄ãxt
;

313 
k_ùad
[65];

316 
k_›ad
[65];

319 
tk
[16];

320 
i
;

322 i‡(
key_Àn
 > 64) {

324 
MD5_CTX
 
t˘x
;

326 
	`MD5Inô
(&
t˘x
);

327 
	`MD5Upd©e
(&
t˘x
, 
key
, 
key_Àn
);

328 
	`MD5FöÆ
(
tk
, &
t˘x
);

330 
key
 = 
tk
;

331 
key_Àn
 = 16;

346 
	`bzîo
–
k_ùad
,  k_ipad);

347 
	`bzîo
–
k_›ad
,  k_opad);

348 
	`bc›y
–
key
, 
k_ùad
, 
key_Àn
);

349 
	`bc›y
–
key
, 
k_›ad
, 
key_Àn
);

352 
i
=0; i<64; i++) {

353 
k_ùad
[
i
] ^= 0x36;

354 
k_›ad
[
i
] ^= 0x5c;

359 
	`MD5Inô
(&
c⁄ãxt
);

361 
	`MD5Upd©e
(&
c⁄ãxt
, 
k_ùad
, 64);

362 
	`MD5Upd©e
(&
c⁄ãxt
, 
ãxt
, 
ãxt_Àn
);

363 
	`MD5FöÆ
(
dige°
, &
c⁄ãxt
);

367 
	`MD5Inô
(&
c⁄ãxt
);

369 
	`MD5Upd©e
(&
c⁄ãxt
, 
k_›ad
, 64);

370 
	`MD5Upd©e
(&
c⁄ãxt
, 
dige°
, 16);

372 
	`MD5FöÆ
(
dige°
, &
c⁄ãxt
);

373 
	}
}

	@md5.h

42 #i‚de‡
_LIBZEBRA_MD5_H_


43 
	#_LIBZEBRA_MD5_H_


	)

45 
	#MD5_BUFLEN
 64

	)

49 
uöt32_t
 
	mmd5_°©e32
[4];

50 
uöt8_t
 
	mmd5_°©e8
[16];

51 } 
	mmd5_°
;

53 
	#md5_°a
 
md5_°
.
md5_°©e32
[0]

	)

54 
	#md5_°b
 
md5_°
.
md5_°©e32
[1]

	)

55 
	#md5_°c
 
md5_°
.
md5_°©e32
[2]

	)

56 
	#md5_°d
 
md5_°
.
md5_°©e32
[3]

	)

57 
	#md5_°8
 
md5_°
.
md5_°©e8


	)

60 
uöt64_t
 
	mmd5_cou¡64
;

61 
uöt8_t
 
	mmd5_cou¡8
[8];

62 } 
	mmd5_cou¡
;

63 
	#md5_n
 
md5_cou¡
.
md5_cou¡64


	)

64 
	#md5_n8
 
md5_cou¡
.
md5_cou¡8


	)

66 
uöt
 
	mmd5_i
;

67 
uöt8_t
 
	mmd5_buf
[
MD5_BUFLEN
];

68 } 
	tmd5_˘xt
;

70 
md5_öô
 (
md5_˘xt
 *);

71 
md5_lo›
 (
md5_˘xt
 *, c⁄° *, 
u_öt
);

72 
md5_∑d
 (
md5_˘xt
 *);

73 
md5_ªsu…
 (
uöt8_t
 *, 
md5_˘xt
 *);

76 
	#MD5_CTX
 
md5_˘xt


	)

77 
	#MD5Inô
(
x
Ë
	`md5_öô
((x))

	)

78 
	#MD5Upd©e
(
x
, 
y
, 
z
Ë
	`md5_lo›
((x), (y), (z))

	)

79 
	#MD5FöÆ
(
x
, 
y
) \

81 
	`md5_∑d
((
y
)); \

82 
	`md5_ªsu…
((
x
), (
y
)); \

83 } 0)

	)

86 
hmac_md5
(* 
ãxt
, 
ãxt_Àn
, * 
key
,

87 
key_Àn
, 
uöt8_t
 *
dige°
);

	@memory.c

23 
	~<zebø.h
>

25 #i‡!
deföed
(
HAVE_STDLIB_H
Ë|| (deföed(
GNU_LINUX
Ë&& deföed(
HAVE_MALLINFO
))

26 
	~<mÆloc.h
>

29 
	~"log.h
"

30 
	~"mem‹y.h
"

32 
Æloc_öc
 ();

33 
Æloc_dec
 ();

34 
log_mem°©s
(
log_¥i‹ôy
);

36 c⁄° 
mesßge
 
	gm°r
 [] =

38 { 
MTYPE_THREAD
, "thread" },

39 { 
MTYPE_THREAD_MASTER
, "thread_master" },

40 { 
MTYPE_VECTOR
, "vector" },

41 { 
MTYPE_VECTOR_INDEX
, "vector_index" },

42 { 
MTYPE_IF
, "interface" },

43 { 0, 
NULL
 },

47 
__©åibuã__
 ((
n‹ëu∫
))

48 
	$zîr‹
 (c⁄° *
‚ame
, 
ty≥
, 
size_t
 
size
)

50 
	`zlog_îr
 ("%s : can'tállocate memory for `%s' size %d: %s\n",

51 
‚ame
, 
	`lookup
 (
m°r
, 
ty≥
), (Ë
size
, 
	`ß„_°ªº‹
(
î∫o
));

52 
	`log_mem°©s
(
LOG_WARNING
);

57 
	`zlog_backåa˚
(
LOG_WARNING
);

58 
	`ab‹t
();

59 
	}
}

67 
	$zmÆloc
 (
ty≥
, 
size_t
 
size
)

69 *
mem‹y
;

71 
mem‹y
 = 
	`mÆloc
 (
size
);

73 i‡(
mem‹y
 =
NULL
)

74 
	`zîr‹
 ("mÆloc", 
ty≥
, 
size
);

76 
	`Æloc_öc
 (
ty≥
);

78  
mem‹y
;

79 
	}
}

85 
	$zˇŒoc
 (
ty≥
, 
size_t
 
size
)

87 *
mem‹y
;

89 
mem‹y
 = 
	`ˇŒoc
 (1, 
size
);

91 i‡(
mem‹y
 =
NULL
)

92 
	`zîr‹
 ("ˇŒoc", 
ty≥
, 
size
);

94 
	`Æloc_öc
 (
ty≥
);

96  
mem‹y
;

97 
	}
}

107 
	$zªÆloc
 (
ty≥
, *
±r
, 
size_t
 
size
)

109 *
mem‹y
;

111 
mem‹y
 = 
	`ªÆloc
 (
±r
, 
size
);

112 i‡(
mem‹y
 =
NULL
)

113 
	`zîr‹
 ("ªÆloc", 
ty≥
, 
size
);

114 i‡(
±r
 =
NULL
)

115 
	`Æloc_öc
 (
ty≥
);

117  
mem‹y
;

118 
	}
}

127 
	$z‰ì
 (
ty≥
, *
±r
)

129 i‡(
±r
 !
NULL
)

131 
	`Æloc_dec
 (
ty≥
);

132 
	`‰ì
 (
±r
);

134 
	}
}

143 
	$z°rdup
 (
ty≥
, c⁄° *
°r
)

145 *
dup
;

147 
dup
 = 
	`°rdup
 (
°r
);

148 i‡(
dup
 =
NULL
)

149 
	`zîr‹
 ("°rdup", 
ty≥
, 
	`°æí
 (
°r
));

150 
	`Æloc_öc
 (
ty≥
);

151  
dup
;

152 
	}
}

154 #ifde‡
MEMORY_LOG


157 c⁄° *
	m«me
;

158 
	mÆloc
;

159 
	mt_mÆloc
;

160 
	mc_mÆloc
;

161 
	mt_ˇŒoc
;

162 
	mc_ˇŒoc
;

163 
	mt_ªÆloc
;

164 
	mt_‰ì
;

165 
	mc_°rdup
;

166 } 
	gm°©
 [
MTYPE_MAX
];

169 
	$mty≥_log
 (*
func
, *
mem‹y
, c⁄° *
fûe
, 
löe
, 
ty≥
)

171 
	`zlog_debug
 ("%s: %†%∞%†%d", 
func
, 
	`lookup
 (
m°r
, 
ty≥
), 
mem‹y
, 
fûe
, 
löe
);

172 
	}
}

175 
	$mty≥_zmÆloc
 (c⁄° *
fûe
, 
löe
, 
ty≥
, 
size_t
 
size
)

177 *
mem‹y
;

179 
m°©
[
ty≥
].
c_mÆloc
++;

180 
m°©
[
ty≥
].
t_mÆloc
++;

182 
mem‹y
 = 
	`zmÆloc
 (
ty≥
, 
size
);

183 
	`mty≥_log
 ("zmÆloc", 
mem‹y
, 
fûe
, 
löe
, 
ty≥
);

185  
mem‹y
;

186 
	}
}

189 
	$mty≥_zˇŒoc
 (c⁄° *
fûe
, 
löe
, 
ty≥
, 
size_t
 
size
)

191 *
mem‹y
;

193 
m°©
[
ty≥
].
c_ˇŒoc
++;

194 
m°©
[
ty≥
].
t_ˇŒoc
++;

196 
mem‹y
 = 
	`zˇŒoc
 (
ty≥
, 
size
);

197 
	`mty≥_log
 ("xˇŒoc", 
mem‹y
, 
fûe
, 
löe
, 
ty≥
);

199  
mem‹y
;

200 
	}
}

203 
	$mty≥_zªÆloc
 (c⁄° *
fûe
, 
löe
, 
ty≥
, *
±r
, 
size_t
 
size
)

205 *
mem‹y
;

208 
m°©
[
ty≥
].
t_ªÆloc
++;

210 
mem‹y
 = 
	`zªÆloc
 (
ty≥
, 
±r
, 
size
);

212 
	`mty≥_log
 ("xªÆloc", 
mem‹y
, 
fûe
, 
löe
, 
ty≥
);

214  
mem‹y
;

215 
	}
}

219 
	$mty≥_z‰ì
 (c⁄° *
fûe
, 
löe
, 
ty≥
, *
±r
)

221 
m°©
[
ty≥
].
t_‰ì
++;

223 
	`mty≥_log
 ("x‰ì", 
±r
, 
fûe
, 
löe
, 
ty≥
);

225 
	`z‰ì
 (
ty≥
, 
±r
);

226 
	}
}

229 
	$mty≥_z°rdup
 (c⁄° *
fûe
, 
löe
, 
ty≥
, c⁄° *
°r
)

231 *
mem‹y
;

233 
m°©
[
ty≥
].
c_°rdup
++;

235 
mem‹y
 = 
	`z°rdup
 (
ty≥
, 
°r
);

237 
	`mty≥_log
 ("x°rdup", 
mem‹y
, 
fûe
, 
löe
, 
ty≥
);

239  
mem‹y
;

240 
	}
}

244 *
	m«me
;

245 
	mÆloc
;

246 } 
	gm°©
 [
MTYPE_MAX
];

251 
	$Æloc_öc
 (
ty≥
)

253 
m°©
[
ty≥
].
Æloc
++;

254 
	}
}

258 
	$Æloc_dec
 (
ty≥
)

260 
m°©
[
ty≥
].
Æloc
--;

261 
	}
}

264 
	~"ve˘‹.h
"

265 
	~"vty.h
"

266 
	~"comm™d.h
"

269 
	$log_mem°©s
(
¥i
)

271 
mli°
 *
ml
;

273 
ml
 = 
mli°s
; ml->
li°
; ml++)

275 
mem‹y_li°
 *
m
;

277 
	`zlog
 (
NULL
, 
¥i
, "Mem‹y utûiz©i⁄ i¿moduÀ %s:", 
ml
->
«me
);

278 
m
 = 
ml
->
li°
; m->
ödex
 >= 0; m++)

279 i‡(
m
->
ödex
 && 
m°©
[m->ödex].
Æloc
)

280 
	`zlog
 (
NULL
, 
¥i
, " %-30s: %10ld", 
m
->
f‹m©
, 
m°©
[m->
ödex
].
Æloc
);

282 
	}
}

285 
	$log_mem°©s_°dîr
 (c⁄° *
¥efix
)

287 
mli°
 *
ml
;

288 
mem‹y_li°
 *
m
;

289 
i
;

290 
j
 = 0;

292 
ml
 = 
mli°s
; ml->
li°
; ml++)

294 
i
 = 0;

296 
m
 = 
ml
->
li°
; m->
ödex
 >= 0; m++)

297 i‡(
m
->
ödex
 && 
m°©
[m->ödex].
Æloc
)

299 i‡(!
i
)

300 
	`Ârötf
 (
°dîr
,

302 
¥efix
,

303 
ml
->
«me
);

304 
	`Ârötf
 (
°dîr
,

306 
¥efix
,

307 
m
->
f‹m©
,

308 
m°©
[
m
->
ödex
].
Æloc
,

309 
m°©
[
m
->
ödex
].
Æloc
 < 0 ? " (REPORT THIS BUG!)" : "");

310 
i
 = 
j
 = 1;

314 i‡(
j
)

315 
	`Ârötf
 (
°dîr
,

318 
¥efix
);

320 
	`Ârötf
 (
°dîr
,

322 
¥efix
);

323 
	}
}

326 
	$show_£∑øt‹
(
vty
 *vty)

328 
	`vty_out
 (
vty
, "-----------------------------\r\n");

329 
	}
}

332 
	$show_mem‹y_vty
 (
vty
 *vty, 
mem‹y_li°
 *
li°
)

334 
mem‹y_li°
 *
m
;

335 
√ed£p
 = 0;

337 
m
 = 
li°
; m->
ödex
 >= 0; m++)

338 i‡(
m
->
ödex
 == 0)

340 i‡(
√ed£p
)

342 
	`show_£∑øt‹
 (
vty
);

343 
√ed£p
 = 0;

346 i‡(
m°©
[
m
->
ödex
].
Æloc
)

348 
	`vty_out
 (
vty
, "%-30s: %10ld\r\n", 
m
->
f‹m©
, 
m°©
[m->
ödex
].
Æloc
);

349 
√ed£p
 = 1;

351  
√ed£p
;

352 
	}
}

354 #ifde‡
HAVE_MALLINFO


356 
	$show_mem‹y_mÆlöfo
 (
vty
 *vty)

358 
mÆlöfo
 
möfo
 = 
	`mÆlöfo
();

359 
buf
[
MTYPE_MEMSTR_LEN
];

361 
	`vty_out
 (
vty
, "Sy°emáŒoˇt‹ sèti°ics:%s", 
VTY_NEWLINE
);

362 
	`vty_out
 (
vty
, " Total heapállocated: %s%s",

363 
	`mty≥_mem°r
 (
buf
, 
MTYPE_MEMSTR_LEN
, 
möfo
.
¨ía
),

364 
VTY_NEWLINE
);

365 
	`vty_out
 (
vty
, " Holding block headers: %s%s",

366 
	`mty≥_mem°r
 (
buf
, 
MTYPE_MEMSTR_LEN
, 
möfo
.
hblkhd
),

367 
VTY_NEWLINE
);

368 
	`vty_out
 (
vty
, " Used small blocks: %s%s",

369 
	`mty≥_mem°r
 (
buf
, 
MTYPE_MEMSTR_LEN
, 
möfo
.
usmblks
),

370 
VTY_NEWLINE
);

371 
	`vty_out
 (
vty
, " Used ordinary blocks: %s%s",

372 
	`mty≥_mem°r
 (
buf
, 
MTYPE_MEMSTR_LEN
, 
möfo
.
u‹dblks
),

373 
VTY_NEWLINE
);

374 
	`vty_out
 (
vty
, " Free small blocks: %s%s",

375 
	`mty≥_mem°r
 (
buf
, 
MTYPE_MEMSTR_LEN
, 
möfo
.
fsmblks
),

376 
VTY_NEWLINE
);

377 
	`vty_out
 (
vty
, " Free ordinary blocks: %s%s",

378 
	`mty≥_mem°r
 (
buf
, 
MTYPE_MEMSTR_LEN
, 
möfo
.
f‹dblks
),

379 
VTY_NEWLINE
);

380 
	`vty_out
 (
vty
, " Ordinary blocks: %ld%s",

381 ()
möfo
.
‹dblks
,

382 
VTY_NEWLINE
);

383 
	`vty_out
 (
vty
, " Small blocks: %ld%s",

384 ()
möfo
.
smblks
,

385 
VTY_NEWLINE
);

386 
	`vty_out
 (
vty
, " Holding blocks: %ld%s",

387 ()
möfo
.
hblks
,

388 
VTY_NEWLINE
);

389 
	`vty_out
 (
vty
, "(see system documentation for 'mallinfo' for meaning)%s",

390 
VTY_NEWLINE
);

392 
	}
}

395 
DEFUN
 (
show_mem‹y_Æl
,

396 
show_mem‹y_Æl_cmd
,

402 
mli°
 *
	gml
;

403 
	g√ed£p
 = 0;

405 #ifde‡
HAVE_MALLINFO


406 
	g√ed£p
 = 
show_mem‹y_mÆlöfo
 (
vty
);

409 
	gml
 = 
mli°s
; ml->
	gli°
; ml++)

411 i‡(
	g√ed£p
)

412 
show_£∑øt‹
 (
vty
);

413 
	g√ed£p
 = 
show_mem‹y_vty
 (
vty
, 
ml
->
li°
);

416  
	gCMD_SUCCESS
;

419 
ALIAS
 (
show_mem‹y_Æl
,

420 
show_mem‹y_cmd
,

425 
DEFUN
 (
show_mem‹y_lib
,

426 
show_mem‹y_lib_cmd
,

428 
SHOW_STR


432 
show_mem‹y_vty
 (
vty
, 
mem‹y_li°_lib
);

433  
	gCMD_SUCCESS
;

436 
DEFUN
 (
show_mem‹y_zebø
,

437 
show_mem‹y_zebø_cmd
,

439 
SHOW_STR


443 
show_mem‹y_vty
 (
vty
, 
mem‹y_li°_zebø
);

444  
	gCMD_SUCCESS
;

447 
DEFUN
 (
show_mem‹y_rù
,

448 
show_mem‹y_rù_cmd
,

450 
SHOW_STR


454 
show_mem‹y_vty
 (
vty
, 
mem‹y_li°_rù
);

455  
	gCMD_SUCCESS
;

458 
DEFUN
 (
show_mem‹y_rùng
,

459 
show_mem‹y_rùng_cmd
,

461 
SHOW_STR


465 
show_mem‹y_vty
 (
vty
, 
mem‹y_li°_rùng
);

466  
	gCMD_SUCCESS
;

469 
DEFUN
 (
show_mem‹y_babñ
,

470 
show_mem‹y_babñ_cmd
,

472 
SHOW_STR


476 
show_mem‹y_vty
 (
vty
, 
mem‹y_li°_babñ
);

477  
	gCMD_SUCCESS
;

480 
DEFUN
 (
show_mem‹y_bgp
,

481 
show_mem‹y_bgp_cmd
,

483 
SHOW_STR


487 
show_mem‹y_vty
 (
vty
, 
mem‹y_li°_bgp
);

488  
	gCMD_SUCCESS
;

491 
DEFUN
 (
show_mem‹y_o•f
,

492 
show_mem‹y_o•f_cmd
,

494 
SHOW_STR


498 
show_mem‹y_vty
 (
vty
, 
mem‹y_li°_o•f
);

499  
	gCMD_SUCCESS
;

502 
DEFUN
 (
show_mem‹y_o•f6
,

503 
show_mem‹y_o•f6_cmd
,

505 
SHOW_STR


509 
show_mem‹y_vty
 (
vty
, 
mem‹y_li°_o•f6
);

510  
	gCMD_SUCCESS
;

513 
DEFUN
 (
show_mem‹y_isis
,

514 
show_mem‹y_isis_cmd
,

516 
SHOW_STR


520 
show_mem‹y_vty
 (
vty
, 
mem‹y_li°_isis
);

521  
	gCMD_SUCCESS
;

524 
DEFUN
 (
show_mem‹y_pim
,

525 
show_mem‹y_pim_cmd
,

527 
SHOW_STR


531 
show_mem‹y_vty
 (
vty
, 
mem‹y_li°_pim
);

532  
	gCMD_SUCCESS
;

536 
	$mem‹y_öô
 ()

538 
	`ö°Æl_ñemít
 (
RESTRICTED_NODE
, &
show_mem‹y_cmd
);

539 
	`ö°Æl_ñemít
 (
RESTRICTED_NODE
, &
show_mem‹y_Æl_cmd
);

540 
	`ö°Æl_ñemít
 (
RESTRICTED_NODE
, &
show_mem‹y_lib_cmd
);

541 
	`ö°Æl_ñemít
 (
RESTRICTED_NODE
, &
show_mem‹y_rù_cmd
);

542 
	`ö°Æl_ñemít
 (
RESTRICTED_NODE
, &
show_mem‹y_rùng_cmd
);

543 
	`ö°Æl_ñemít
 (
RESTRICTED_NODE
, &
show_mem‹y_babñ_cmd
);

544 
	`ö°Æl_ñemít
 (
RESTRICTED_NODE
, &
show_mem‹y_bgp_cmd
);

545 
	`ö°Æl_ñemít
 (
RESTRICTED_NODE
, &
show_mem‹y_o•f_cmd
);

546 
	`ö°Æl_ñemít
 (
RESTRICTED_NODE
, &
show_mem‹y_o•f6_cmd
);

547 
	`ö°Æl_ñemít
 (
RESTRICTED_NODE
, &
show_mem‹y_isis_cmd
);

549 
	`ö°Æl_ñemít
 (
VIEW_NODE
, &
show_mem‹y_cmd
);

550 
	`ö°Æl_ñemít
 (
VIEW_NODE
, &
show_mem‹y_Æl_cmd
);

551 
	`ö°Æl_ñemít
 (
VIEW_NODE
, &
show_mem‹y_lib_cmd
);

552 
	`ö°Æl_ñemít
 (
VIEW_NODE
, &
show_mem‹y_rù_cmd
);

553 
	`ö°Æl_ñemít
 (
VIEW_NODE
, &
show_mem‹y_rùng_cmd
);

554 
	`ö°Æl_ñemít
 (
VIEW_NODE
, &
show_mem‹y_babñ_cmd
);

555 
	`ö°Æl_ñemít
 (
VIEW_NODE
, &
show_mem‹y_bgp_cmd
);

556 
	`ö°Æl_ñemít
 (
VIEW_NODE
, &
show_mem‹y_o•f_cmd
);

557 
	`ö°Æl_ñemít
 (
VIEW_NODE
, &
show_mem‹y_o•f6_cmd
);

558 
	`ö°Æl_ñemít
 (
VIEW_NODE
, &
show_mem‹y_isis_cmd
);

559 
	`ö°Æl_ñemít
 (
VIEW_NODE
, &
show_mem‹y_pim_cmd
);

561 
	`ö°Æl_ñemít
 (
ENABLE_NODE
, &
show_mem‹y_cmd
);

562 
	`ö°Æl_ñemít
 (
ENABLE_NODE
, &
show_mem‹y_Æl_cmd
);

563 
	`ö°Æl_ñemít
 (
ENABLE_NODE
, &
show_mem‹y_lib_cmd
);

564 
	`ö°Æl_ñemít
 (
ENABLE_NODE
, &
show_mem‹y_zebø_cmd
);

565 
	`ö°Æl_ñemít
 (
ENABLE_NODE
, &
show_mem‹y_rù_cmd
);

566 
	`ö°Æl_ñemít
 (
ENABLE_NODE
, &
show_mem‹y_rùng_cmd
);

567 
	`ö°Æl_ñemít
 (
ENABLE_NODE
, &
show_mem‹y_babñ_cmd
);

568 
	`ö°Æl_ñemít
 (
ENABLE_NODE
, &
show_mem‹y_bgp_cmd
);

569 
	`ö°Æl_ñemít
 (
ENABLE_NODE
, &
show_mem‹y_o•f_cmd
);

570 
	`ö°Æl_ñemít
 (
ENABLE_NODE
, &
show_mem‹y_o•f6_cmd
);

571 
	`ö°Æl_ñemít
 (
ENABLE_NODE
, &
show_mem‹y_isis_cmd
);

572 
	`ö°Æl_ñemít
 (
ENABLE_NODE
, &
show_mem‹y_pim_cmd
);

573 
	}
}

584 
	$mty≥_mem°r
 (*
buf
, 
size_t
 
Àn
, 
byãs
)

586 
t
, 
g
, 
m
, 
k
;

589 i‡(!
byãs
)

591 i‡(
byãs
 == 1)

597 
t
 = 
byãs
 >> ( () >= 8 ? 40 : 0);

599 
t
 = 0;

600 
g
 = 
byãs
 >> 30;

601 
m
 = 
byãs
 >> 20;

602 
k
 = 
byãs
 >> 10;

604 i‡(
t
 > 10)

610 i‡(
byãs
 & (1UL << ( () >= 8 ? 39 : 0)))

611 
t
++;

612 
	`¢¥ötf
 (
buf
, 
Àn
, "%4d TiB", 
t
);

614 i‡(
g
 > 10)

616 i‡(
byãs
 & (1 << 29))

617 
g
++;

618 
	`¢¥ötf
 (
buf
, 
Àn
, "%d GiB", 
g
);

620 i‡(
m
 > 10)

622 i‡(
byãs
 & (1 << 19))

623 
m
++;

624 
	`¢¥ötf
 (
buf
, 
Àn
, "%d MiB", 
m
);

626 i‡(
k
 > 10)

628 i‡(
byãs
 & (1 << 9))

629 
k
++;

630 
	`¢¥ötf
 (
buf
, 
Àn
, "%d KiB", 
k
);

633 
	`¢¥ötf
 (
buf
, 
Àn
, "%ld byãs", 
byãs
);

635  
buf
;

636 
	}
}

639 
	$mty≥_°©s_Æloc
 (
ty≥
)

641  
m°©
[
ty≥
].
Æloc
;

642 
	}
}

	@memory.h

21 #i‚de‡
_ZEBRA_MEMORY_H


22 
	#_ZEBRA_MEMORY_H


	)

24 
	#¨øy_size
(
¨
Ë(◊rË/ ◊r[0]))

	)

27 
	smem‹y_li°


29 
	mödex
;

30 c⁄° *
	mf‹m©
;

33 
	smli°
 {

34 
mem‹y_li°
 *
	mli°
;

35 c⁄° *
	m«me
;

38 
	~"memty≥s.h
"

40 
mli°
 
mli°s
[];

43 #ifde‡
MEMORY_LOG


44 
	#XMALLOC
(
mty≥
, 
size
) \

45 
	`mty≥_zmÆloc
 (
__FILE__
, 
__LINE__
, (
mty≥
), (
size
))

	)

46 
	#XCALLOC
(
mty≥
, 
size
) \

47 
	`mty≥_zˇŒoc
 (
__FILE__
, 
__LINE__
, (
mty≥
), (
size
))

	)

48 
	#XREALLOC
(
mty≥
, 
±r
, 
size
) \

49 
	`mty≥_zªÆloc
 (
__FILE__
, 
__LINE__
, (
mty≥
), (
±r
), (
size
))

	)

50 
	#XFREE
(
mty≥
, 
±r
) \

52 
	`mty≥_z‰ì
 (
__FILE__
, 
__LINE__
, (
mty≥
), (
±r
)); \

53 
±r
 = 
NULL
; } \

54 0)

	)

55 
	#XSTRDUP
(
mty≥
, 
°r
) \

56 
	`mty≥_z°rdup
 (
__FILE__
, 
__LINE__
, (
mty≥
), (
°r
))

	)

58 
	#XMALLOC
(
mty≥
, 
size
Ë
	`zmÆloc
 ((mty≥), (size))

	)

59 
	#XCALLOC
(
mty≥
, 
size
Ë
	`zˇŒoc
 ((mty≥), (size))

	)

60 
	#XREALLOC
(
mty≥
, 
±r
, 
size
Ë
	`zªÆloc
 ((mty≥), (±r), (size))

	)

61 
	#XFREE
(
mty≥
, 
±r
) do { \

62 
	`z‰ì
 ((
mty≥
), (
±r
)); \

63 
±r
 = 
NULL
; } \

64 0)

	)

65 
	#XSTRDUP
(
mty≥
, 
°r
Ë
	`z°rdup
 ((mty≥), (°r))

	)

69 *
zmÆloc
 (
ty≥
, 
size_t
 
size
);

70 *
zˇŒoc
 (
ty≥
, 
size_t
 
size
);

71 *
zªÆloc
 (
ty≥
, *
±r
, 
size_t
 
size
);

72 
z‰ì
 (
ty≥
, *
±r
);

73 *
z°rdup
 (
ty≥
, c⁄° *
°r
);

75 *
mty≥_zmÆloc
 (c⁄° *
fûe
, 
löe
, 
ty≥
, 
size_t
 
size
);

77 *
mty≥_zˇŒoc
 (c⁄° *
fûe
, 
löe
, 
ty≥
, 
size_t
 
size
);

79 *
mty≥_zªÆloc
 (c⁄° *
fûe
, 
löe
, 
ty≥
, *
±r
,

80 
size_t
 
size
);

82 
mty≥_z‰ì
 (c⁄° *
fûe
, 
löe
, 
ty≥
,

83 *
±r
);

85 *
mty≥_z°rdup
 (c⁄° *
fûe
, 
löe
, 
ty≥
,

86 c⁄° *
°r
);

87 
mem‹y_öô
 ();

88 
log_mem°©s_°dîr
 (const *);

91 
mty≥_°©s_Æloc
 ();

94 
	#MTYPE_MEMSTR_LEN
 20

	)

95 c⁄° *
mty≥_mem°r
 (*, 
size_t
, );

	@memtypes.c

10 
	~"zebø.h
"

11 
	~"mem‹y.h
"

13 
mem‹y_li°
 
	gmem‹y_li°_lib
[] =

15 { 
MTYPE_TMP
, "Temporary memory" },

16 { 
MTYPE_STRVEC
, "String vector" },

17 { 
MTYPE_VECTOR
, "Vector" },

18 { 
MTYPE_VECTOR_INDEX
, "Vector index" },

19 { 
MTYPE_LINK_LIST
, "Link List" },

20 { 
MTYPE_LINK_NODE
, "Link Node" },

21 { 
MTYPE_THREAD
, "Thread" },

22 { 
MTYPE_THREAD_MASTER
, "Thread master" },

23 { 
MTYPE_THREAD_STATS
, "Thread stats" },

24 { 
MTYPE_VTY
, "VTY" },

25 { 
MTYPE_VTY_OUT_BUF
, "VTY output buffer" },

26 { 
MTYPE_VTY_HIST
, "VTY history" },

27 { 
MTYPE_IF
, "Interface" },

28 { 
MTYPE_CONNECTED
, "Connected" },

29 { 
MTYPE_CONNECTED_LABEL
, "Connected interfaceÜabel" },

30 { 
MTYPE_BUFFER
, "Buffer" },

31 { 
MTYPE_BUFFER_DATA
, "Buffer data" },

32 { 
MTYPE_STREAM
, "Stream" },

33 { 
MTYPE_STREAM_DATA
, "Stream data" },

34 { 
MTYPE_STREAM_FIFO
, "Stream FIFO" },

35 { 
MTYPE_PREFIX
, "Prefix" },

36 { 
MTYPE_PREFIX_IPV4
, "Prefix IPv4" },

37 { 
MTYPE_PREFIX_IPV6
, "Prefix IPv6" },

38 { 
MTYPE_HASH
, "Hash" },

39 { 
MTYPE_HASH_BACKET
, "Hash Bucket" },

40 { 
MTYPE_HASH_INDEX
, "Hash Index" },

41 { 
MTYPE_ROUTE_TABLE
, "RouteÅable" },

42 { 
MTYPE_ROUTE_NODE
, "RouteÇode" },

43 { 
MTYPE_DISTRIBUTE
, "DistributeÜist" },

44 { 
MTYPE_DISTRIBUTE_IFNAME
, "Dist-list ifname" },

45 { 
MTYPE_ACCESS_LIST
, "Access List" },

46 { 
MTYPE_ACCESS_LIST_STR
, "Access List Str" },

47 { 
MTYPE_ACCESS_FILTER
, "Access Filter" },

48 { 
MTYPE_PREFIX_LIST
, "Prefix List" },

49 { 
MTYPE_PREFIX_LIST_ENTRY
, "Prefix List Entry" },

50 { 
MTYPE_PREFIX_LIST_STR
, "Prefix List Str" },

51 { 
MTYPE_ROUTE_MAP
, "Route map" },

52 { 
MTYPE_ROUTE_MAP_NAME
, "Route mapÇame" },

53 { 
MTYPE_ROUTE_MAP_INDEX
, "Route map index" },

54 { 
MTYPE_ROUTE_MAP_RULE
, "Route mapÑule" },

55 { 
MTYPE_ROUTE_MAP_RULE_STR
, "Route mapÑule str" },

56 { 
MTYPE_ROUTE_MAP_COMPILED
, "Route map compiled" },

57 { 
MTYPE_CMD_TOKENS
, "Command desc" },

58 { 
MTYPE_KEY
, "Key" },

59 { 
MTYPE_KEYCHAIN
, "Key chain" },

60 { 
MTYPE_IF_RMAP
, "InterfaceÑoute map" },

61 { 
MTYPE_IF_RMAP_NAME
, "I.f.Ñoute mapÇame", },

62 { 
MTYPE_SOCKUNION
, "Socket union" },

63 { 
MTYPE_PRIVS
, "Privilege information" },

64 { 
MTYPE_ZLOG
, "Logging" },

65 { 
MTYPE_ZCLIENT
, "Zclient" },

66 { 
MTYPE_WORK_QUEUE
, "Work queue" },

67 { 
MTYPE_WORK_QUEUE_ITEM
, "Work queue item" },

68 { 
MTYPE_WORK_QUEUE_NAME
, "Work queueÇame string" },

69 { 
MTYPE_PQUEUE
, "Priority queue" },

70 { 
MTYPE_PQUEUE_DATA
, "Priority queue data" },

71 { 
MTYPE_HOST
, "Host config" },

72 { -1, 
NULL
 },

75 
mem‹y_li°
 
	gmem‹y_li°_zebø
[] =

77 { 
MTYPE_RTADV_PREFIX
, "Router Advertisement Prefix" },

78 { 
MTYPE_VRF
, "VRF" },

79 { 
MTYPE_VRF_NAME
, "VRFÇame" },

80 { 
MTYPE_NEXTHOP
, "Nexthop" },

81 { 
MTYPE_RIB
, "RIB" },

82 { 
MTYPE_RIB_QUEUE
, "RIBÖrocess work queue" },

83 { 
MTYPE_STATIC_IPV4
, "Static IPv4Ñoute" },

84 { 
MTYPE_STATIC_IPV6
, "Static IPv6Ñoute" },

85 { 
MTYPE_RIB_DEST
, "RIB destination" },

86 { 
MTYPE_RIB_TABLE_INFO
, "RIBÅable info" },

87 { -1, 
NULL
 },

90 
mem‹y_li°
 
	gmem‹y_li°_bgp
[] =

92 { 
MTYPE_BGP
, "BGP instance" },

93 { 
MTYPE_BGP_LISTENER
, "BGPÜisten socket details" },

94 { 
MTYPE_BGP_PEER
, "BGPÖeer" },

95 { 
MTYPE_BGP_PEER_HOST
, "BGPÖeer hostname" },

96 { 
MTYPE_PEER_GROUP
, "Peer group" },

97 { 
MTYPE_PEER_DESC
, "Peer description" },

98 { 
MTYPE_PEER_PASSWORD
, "PeerÖassword string" },

99 { 
MTYPE_ATTR
, "BGPáttribute" },

100 { 
MTYPE_ATTR_EXTRA
, "BGPÉxtraáttributes" },

101 { 
MTYPE_AS_PATH
, "BGPáspath" },

102 { 
MTYPE_AS_SEG
, "BGPáspath seg" },

103 { 
MTYPE_AS_SEG_DATA
, "BGPáspath segment data" },

104 { 
MTYPE_AS_STR
, "BGPáspath str" },

105 { 0, 
NULL
 },

106 { 
MTYPE_BGP_TABLE
, "BGPÅable" },

107 { 
MTYPE_BGP_NODE
, "BGPÇode" },

108 { 
MTYPE_BGP_ROUTE
, "BGPÑoute" },

109 { 
MTYPE_BGP_ROUTE_EXTRA
, "BGPáncillaryÑoute info" },

110 { 
MTYPE_BGP_CONN
, "BGP connected" },

111 { 
MTYPE_BGP_STATIC
, "BGP static" },

112 { 
MTYPE_BGP_ADVERTISE_ATTR
, "BGPádváttr" },

113 { 
MTYPE_BGP_ADVERTISE
, "BGPádv" },

114 { 
MTYPE_BGP_SYNCHRONISE
, "BGP synchronise" },

115 { 
MTYPE_BGP_ADJ_IN
, "BGPádj in" },

116 { 
MTYPE_BGP_ADJ_OUT
, "BGPádj out" },

117 { 
MTYPE_BGP_MPATH_INFO
, "BGP multipath info" },

118 { 0, 
NULL
 },

119 { 
MTYPE_AS_LIST
, "BGP ASÜist" },

120 { 
MTYPE_AS_FILTER
, "BGP AS filter" },

121 { 
MTYPE_AS_FILTER_STR
, "BGP AS filter str" },

122 { 0, 
NULL
 },

123 { 
MTYPE_COMMUNITY
, "community" },

124 { 
MTYPE_COMMUNITY_VAL
, "community val" },

125 { 
MTYPE_COMMUNITY_STR
, "community str" },

126 { 0, 
NULL
 },

127 { 
MTYPE_ECOMMUNITY
, "extcommunity" },

128 { 
MTYPE_ECOMMUNITY_VAL
, "extcommunity val" },

129 { 
MTYPE_ECOMMUNITY_STR
, "extcommunity str" },

130 { 0, 
NULL
 },

131 { 
MTYPE_COMMUNITY_LIST
, "community-list" },

132 { 
MTYPE_COMMUNITY_LIST_NAME
, "community-listÇame" },

133 { 
MTYPE_COMMUNITY_LIST_ENTRY
, "community-listÉntry" },

134 { 
MTYPE_COMMUNITY_LIST_CONFIG
, "community-list config" },

135 { 
MTYPE_COMMUNITY_LIST_HANDLER
, "community-list handler" },

136 { 0, 
NULL
 },

137 { 
MTYPE_CLUSTER
, "ClusterÜist" },

138 { 
MTYPE_CLUSTER_VAL
, "ClusterÜist val" },

139 { 0, 
NULL
 },

140 { 
MTYPE_BGP_PROCESS_QUEUE
, "BGP Process queue" },

141 { 
MTYPE_BGP_CLEAR_NODE_QUEUE
, "BGPÇode clear queue" },

142 { 0, 
NULL
 },

143 { 
MTYPE_TRANSIT
, "BGPÅransitáttr" },

144 { 
MTYPE_TRANSIT_VAL
, "BGPÅransit val" },

145 { 0, 
NULL
 },

146 { 
MTYPE_BGP_DISTANCE
, "BGP distance" },

147 { 
MTYPE_BGP_NEXTHOP_CACHE
, "BGPÇexthop" },

148 { 
MTYPE_BGP_CONFED_LIST
, "BGP confedÜist" },

149 { 
MTYPE_PEER_UPDATE_SOURCE
, "BGPÖeer update interface" },

150 { 
MTYPE_BGP_DAMP_INFO
, "Dampening info" },

151 { 
MTYPE_BGP_DAMP_ARRAY
, "BGP Dampeningárray" },

152 { 
MTYPE_BGP_REGEXP
, "BGPÑegexp" },

153 { 
MTYPE_BGP_AGGREGATE
, "BGPággregate" },

154 { 
MTYPE_BGP_ADDR
, "BGP ownáddress" },

155 { -1, 
NULL
 }

158 
mem‹y_li°
 
	gmem‹y_li°_rù
[] =

160 { 
MTYPE_RIP
, "RIP structure" },

161 { 
MTYPE_RIP_INFO
, "RIPÑoute info" },

162 { 
MTYPE_RIP_INTERFACE
, "RIP interface" },

163 { 
MTYPE_RIP_PEER
, "RIPÖeer" },

164 { 
MTYPE_RIP_OFFSET_LIST
, "RIP offsetÜist" },

165 { 
MTYPE_RIP_DISTANCE
, "RIP distance" },

166 { -1, 
NULL
 }

169 
mem‹y_li°
 
	gmem‹y_li°_rùng
[] =

171 { 
MTYPE_RIPNG
, "RIPng structure" },

172 { 
MTYPE_RIPNG_ROUTE
, "RIPngÑoute info" },

173 { 
MTYPE_RIPNG_AGGREGATE
, "RIPngággregate" },

174 { 
MTYPE_RIPNG_PEER
, "RIPngÖeer" },

175 { 
MTYPE_RIPNG_OFFSET_LIST
, "RIPng offsetÜst" },

176 { 
MTYPE_RIPNG_RTE_DATA
, "RIPngÑte data" },

177 { -1, 
NULL
 }

180 
mem‹y_li°
 
	gmem‹y_li°_babñ
[] =

182 { 
MTYPE_BABEL
, "Babel structure" },

183 { 
MTYPE_BABEL_IF
, "Babel interface" },

184 { -1, 
NULL
 }

187 
mem‹y_li°
 
	gmem‹y_li°_o•f
[] =

189 { 
MTYPE_OSPF_TOP
, "OSPFÅop" },

190 { 
MTYPE_OSPF_AREA
, "OSPFárea" },

191 { 
MTYPE_OSPF_AREA_RANGE
, "OSPFáreaÑange" },

192 { 
MTYPE_OSPF_NETWORK
, "OSPFÇetwork" },

193 { 
MTYPE_OSPF_NEIGHBOR_STATIC
,"OSPF staticÇbr" },

194 { 
MTYPE_OSPF_IF
, "OSPF interface" },

195 { 
MTYPE_OSPF_NEIGHBOR
, "OSPFÇeighbor" },

196 { 
MTYPE_OSPF_ROUTE
, "OSPFÑoute" },

197 { 
MTYPE_OSPF_TMP
, "OSPFÅmp mem" },

198 { 
MTYPE_OSPF_LSA
, "OSPF LSA" },

199 { 
MTYPE_OSPF_LSA_DATA
, "OSPF LSA data" },

200 { 
MTYPE_OSPF_LSDB
, "OSPF LSDB" },

201 { 
MTYPE_OSPF_PACKET
, "OSPFÖacket" },

202 { 
MTYPE_OSPF_FIFO
, "OSPF FIFO queue" },

203 { 
MTYPE_OSPF_VERTEX
, "OSPF vertex" },

204 { 
MTYPE_OSPF_VERTEX_PARENT
, "OSPF vertexÖarent", },

205 { 
MTYPE_OSPF_NEXTHOP
, "OSPFÇexthop" },

206 { 
MTYPE_OSPF_PATH
, "OSPFÖath" },

207 { 
MTYPE_OSPF_VL_DATA
, "OSPF VL data" },

208 { 
MTYPE_OSPF_CRYPT_KEY
, "OSPF crypt key" },

209 { 
MTYPE_OSPF_EXTERNAL_INFO
, "OSPFÉxt. info" },

210 { 
MTYPE_OSPF_DISTANCE
, "OSPF distance" },

211 { 
MTYPE_OSPF_IF_INFO
, "OSPF if info" },

212 { 
MTYPE_OSPF_IF_PARAMS
, "OSPF ifÖarams" },

213 { 
MTYPE_OSPF_MESSAGE
, "OSPF message" },

214 { -1, 
NULL
 },

217 
mem‹y_li°
 
	gmem‹y_li°_o•f6
[] =

219 { 
MTYPE_OSPF6_TOP
, "OSPF6Åop" },

220 { 
MTYPE_OSPF6_AREA
, "OSPF6área" },

221 { 
MTYPE_OSPF6_IF
, "OSPF6 interface" },

222 { 
MTYPE_OSPF6_NEIGHBOR
, "OSPF6Çeighbor" },

223 { 
MTYPE_OSPF6_ROUTE
, "OSPF6Ñoute" },

224 { 
MTYPE_OSPF6_PREFIX
, "OSPF6Örefix" },

225 { 
MTYPE_OSPF6_MESSAGE
, "OSPF6 message" },

226 { 
MTYPE_OSPF6_LSA
, "OSPF6 LSA" },

227 { 
MTYPE_OSPF6_LSA_SUMMARY
, "OSPF6 LSA summary" },

228 { 
MTYPE_OSPF6_LSDB
, "OSPF6 LSA database" },

229 { 
MTYPE_OSPF6_VERTEX
, "OSPF6 vertex" },

230 { 
MTYPE_OSPF6_SPFTREE
, "OSPF6 SPFÅree" },

231 { 
MTYPE_OSPF6_NEXTHOP
, "OSPF6Çexthop" },

232 { 
MTYPE_OSPF6_EXTERNAL_INFO
,"OSPF6Éxt. info" },

233 { 
MTYPE_OSPF6_OTHER
, "OSPF6 other" },

234 { -1, 
NULL
 },

237 
mem‹y_li°
 
	gmem‹y_li°_isis
[] =

239 { 
MTYPE_ISIS
, "ISIS" },

240 { 
MTYPE_ISIS_TMP
, "ISIS TMP" },

241 { 
MTYPE_ISIS_CIRCUIT
, "ISIS circuit" },

242 { 
MTYPE_ISIS_LSP
, "ISIS LSP" },

243 { 
MTYPE_ISIS_ADJACENCY
, "ISISádjacency" },

244 { 
MTYPE_ISIS_AREA
, "ISISárea" },

245 { 
MTYPE_ISIS_AREA_ADDR
, "ISISáreaáddress" },

246 { 
MTYPE_ISIS_TLV
, "ISIS TLV" },

247 { 
MTYPE_ISIS_DYNHN
, "ISIS dyn hostname" },

248 { 
MTYPE_ISIS_SPFTREE
, "ISIS SPFtree" },

249 { 
MTYPE_ISIS_VERTEX
, "ISIS vertex" },

250 { 
MTYPE_ISIS_ROUTE_INFO
, "ISISÑoute info" },

251 { 
MTYPE_ISIS_NEXTHOP
, "ISISÇexthop" },

252 { 
MTYPE_ISIS_NEXTHOP6
, "ISISÇexthop6" },

253 { 
MTYPE_ISIS_DICT
, "ISIS dictionary" },

254 { 
MTYPE_ISIS_DICT_NODE
, "ISIS dictionaryÇode" },

255 { -1, 
NULL
 },

258 
mem‹y_li°
 
	gmem‹y_li°_pim
[] =

260 { 
MTYPE_PIM_CHANNEL_OIL
, "PIM SSM (S,G) channel OIL" },

261 { 
MTYPE_PIM_INTERFACE
, "PIM interface" },

262 { 
MTYPE_PIM_IGMP_JOIN
, "PIM interface IGMP static join" },

263 { 
MTYPE_PIM_IGMP_SOCKET
, "PIM interface IGMP socket" },

264 { 
MTYPE_PIM_IGMP_GROUP
, "PIM interface IGMP group" },

265 { 
MTYPE_PIM_IGMP_GROUP_SOURCE
, "PIM interface IGMP source" },

266 { 
MTYPE_PIM_NEIGHBOR
, "PIM interfaceÇeighbor" },

267 { 
MTYPE_PIM_IFCHANNEL
, "PIM interface (S,G) state" },

268 { 
MTYPE_PIM_UPSTREAM
, "PIM upstream (S,G) state" },

269 { 
MTYPE_PIM_SSMPINGD
, "PIM sspimgd socket" },

270 { -1, 
NULL
 },

273 
mem‹y_li°
 
	gmem‹y_li°_vtysh
[] =

275 { 
MTYPE_VTYSH_CONFIG
, "Vtysh configuration", },

276 { 
MTYPE_VTYSH_CONFIG_LINE
, "Vtysh configurationÜine" },

277 { -1, 
NULL
 },

280 
mli°
 
	gmli°s
[] 
__©åibuã__
 ((
unu£d
)) = {

281 { 
mem‹y_li°_lib
, "LIB" },

282 { 
mem‹y_li°_zebø
, "ZEBRA" },

283 { 
mem‹y_li°_rù
, "RIP" },

284 { 
mem‹y_li°_rùng
, "RIPNG" },

285 { 
mem‹y_li°_o•f
, "OSPF" },

286 { 
mem‹y_li°_o•f6
, "OSPF6" },

287 { 
mem‹y_li°_isis
, "ISIS" },

288 { 
mem‹y_li°_bgp
, "BGP" },

289 { 
mem‹y_li°_pim
, "PIM" },

290 { 
NULL
, NULL},

	@memtypes.h

4 #i‚de‡
_QUAGGA_MEMTYPES_H


5 
	#_QUAGGA_MEMTYPES_H


	)

9 
	mMTYPE_TMP
 = 1,

10 
	mMTYPE_STRVEC
,

11 
	mMTYPE_VECTOR
,

12 
	mMTYPE_VECTOR_INDEX
,

13 
	mMTYPE_LINK_LIST
,

14 
	mMTYPE_LINK_NODE
,

15 
	mMTYPE_THREAD
,

16 
	mMTYPE_THREAD_MASTER
,

17 
	mMTYPE_THREAD_STATS
,

18 
	mMTYPE_VTY
,

19 
	mMTYPE_VTY_OUT_BUF
,

20 
	mMTYPE_VTY_HIST
,

21 
	mMTYPE_IF
,

22 
	mMTYPE_CONNECTED
,

23 
	mMTYPE_CONNECTED_LABEL
,

24 
	mMTYPE_BUFFER
,

25 
	mMTYPE_BUFFER_DATA
,

26 
	mMTYPE_STREAM
,

27 
	mMTYPE_STREAM_DATA
,

28 
	mMTYPE_STREAM_FIFO
,

29 
	mMTYPE_PREFIX
,

30 
	mMTYPE_PREFIX_IPV4
,

31 
	mMTYPE_PREFIX_IPV6
,

32 
	mMTYPE_HASH
,

33 
	mMTYPE_HASH_BACKET
,

34 
	mMTYPE_HASH_INDEX
,

35 
	mMTYPE_ROUTE_TABLE
,

36 
	mMTYPE_ROUTE_NODE
,

37 
	mMTYPE_DISTRIBUTE
,

38 
	mMTYPE_DISTRIBUTE_IFNAME
,

39 
	mMTYPE_ACCESS_LIST
,

40 
	mMTYPE_ACCESS_LIST_STR
,

41 
	mMTYPE_ACCESS_FILTER
,

42 
	mMTYPE_PREFIX_LIST
,

43 
	mMTYPE_PREFIX_LIST_ENTRY
,

44 
	mMTYPE_PREFIX_LIST_STR
,

45 
	mMTYPE_ROUTE_MAP
,

46 
	mMTYPE_ROUTE_MAP_NAME
,

47 
	mMTYPE_ROUTE_MAP_INDEX
,

48 
	mMTYPE_ROUTE_MAP_RULE
,

49 
	mMTYPE_ROUTE_MAP_RULE_STR
,

50 
	mMTYPE_ROUTE_MAP_COMPILED
,

51 
	mMTYPE_CMD_TOKENS
,

52 
	mMTYPE_KEY
,

53 
	mMTYPE_KEYCHAIN
,

54 
	mMTYPE_IF_RMAP
,

55 
	mMTYPE_IF_RMAP_NAME
,

56 
	mMTYPE_SOCKUNION
,

57 
	mMTYPE_PRIVS
,

58 
	mMTYPE_ZLOG
,

59 
	mMTYPE_ZCLIENT
,

60 
	mMTYPE_WORK_QUEUE
,

61 
	mMTYPE_WORK_QUEUE_ITEM
,

62 
	mMTYPE_WORK_QUEUE_NAME
,

63 
	mMTYPE_PQUEUE
,

64 
	mMTYPE_PQUEUE_DATA
,

65 
	mMTYPE_HOST
,

66 
	mMTYPE_RTADV_PREFIX
,

67 
	mMTYPE_VRF
,

68 
	mMTYPE_VRF_NAME
,

69 
	mMTYPE_NEXTHOP
,

70 
	mMTYPE_RIB
,

71 
	mMTYPE_RIB_QUEUE
,

72 
	mMTYPE_STATIC_IPV4
,

73 
	mMTYPE_STATIC_IPV6
,

74 
	mMTYPE_RIB_DEST
,

75 
	mMTYPE_RIB_TABLE_INFO
,

76 
	mMTYPE_BGP
,

77 
	mMTYPE_BGP_LISTENER
,

78 
	mMTYPE_BGP_PEER
,

79 
	mMTYPE_BGP_PEER_HOST
,

80 
	mMTYPE_PEER_GROUP
,

81 
	mMTYPE_PEER_DESC
,

82 
	mMTYPE_PEER_PASSWORD
,

83 
	mMTYPE_ATTR
,

84 
	mMTYPE_ATTR_EXTRA
,

85 
	mMTYPE_AS_PATH
,

86 
	mMTYPE_AS_SEG
,

87 
	mMTYPE_AS_SEG_DATA
,

88 
	mMTYPE_AS_STR
,

89 
	mMTYPE_BGP_TABLE
,

90 
	mMTYPE_BGP_NODE
,

91 
	mMTYPE_BGP_ROUTE
,

92 
	mMTYPE_BGP_ROUTE_EXTRA
,

93 
	mMTYPE_BGP_CONN
,

94 
	mMTYPE_BGP_STATIC
,

95 
	mMTYPE_BGP_ADVERTISE_ATTR
,

96 
	mMTYPE_BGP_ADVERTISE
,

97 
	mMTYPE_BGP_SYNCHRONISE
,

98 
	mMTYPE_BGP_ADJ_IN
,

99 
	mMTYPE_BGP_ADJ_OUT
,

100 
	mMTYPE_BGP_MPATH_INFO
,

101 
	mMTYPE_AS_LIST
,

102 
	mMTYPE_AS_FILTER
,

103 
	mMTYPE_AS_FILTER_STR
,

104 
	mMTYPE_COMMUNITY
,

105 
	mMTYPE_COMMUNITY_VAL
,

106 
	mMTYPE_COMMUNITY_STR
,

107 
	mMTYPE_ECOMMUNITY
,

108 
	mMTYPE_ECOMMUNITY_VAL
,

109 
	mMTYPE_ECOMMUNITY_STR
,

110 
	mMTYPE_COMMUNITY_LIST
,

111 
	mMTYPE_COMMUNITY_LIST_NAME
,

112 
	mMTYPE_COMMUNITY_LIST_ENTRY
,

113 
	mMTYPE_COMMUNITY_LIST_CONFIG
,

114 
	mMTYPE_COMMUNITY_LIST_HANDLER
,

115 
	mMTYPE_CLUSTER
,

116 
	mMTYPE_CLUSTER_VAL
,

117 
	mMTYPE_BGP_PROCESS_QUEUE
,

118 
	mMTYPE_BGP_CLEAR_NODE_QUEUE
,

119 
	mMTYPE_TRANSIT
,

120 
	mMTYPE_TRANSIT_VAL
,

121 
	mMTYPE_BGP_DISTANCE
,

122 
	mMTYPE_BGP_NEXTHOP_CACHE
,

123 
	mMTYPE_BGP_CONFED_LIST
,

124 
	mMTYPE_PEER_UPDATE_SOURCE
,

125 
	mMTYPE_BGP_DAMP_INFO
,

126 
	mMTYPE_BGP_DAMP_ARRAY
,

127 
	mMTYPE_BGP_REGEXP
,

128 
	mMTYPE_BGP_AGGREGATE
,

129 
	mMTYPE_BGP_ADDR
,

130 
	mMTYPE_RIP
,

131 
	mMTYPE_RIP_INFO
,

132 
	mMTYPE_RIP_INTERFACE
,

133 
	mMTYPE_RIP_PEER
,

134 
	mMTYPE_RIP_OFFSET_LIST
,

135 
	mMTYPE_RIP_DISTANCE
,

136 
	mMTYPE_RIPNG
,

137 
	mMTYPE_RIPNG_ROUTE
,

138 
	mMTYPE_RIPNG_AGGREGATE
,

139 
	mMTYPE_RIPNG_PEER
,

140 
	mMTYPE_RIPNG_OFFSET_LIST
,

141 
	mMTYPE_RIPNG_RTE_DATA
,

142 
	mMTYPE_BABEL
,

143 
	mMTYPE_BABEL_IF
,

144 
	mMTYPE_OSPF_TOP
,

145 
	mMTYPE_OSPF_AREA
,

146 
	mMTYPE_OSPF_AREA_RANGE
,

147 
	mMTYPE_OSPF_NETWORK
,

148 
	mMTYPE_OSPF_NEIGHBOR_STATIC
,

149 
	mMTYPE_OSPF_IF
,

150 
	mMTYPE_OSPF_NEIGHBOR
,

151 
	mMTYPE_OSPF_ROUTE
,

152 
	mMTYPE_OSPF_TMP
,

153 
	mMTYPE_OSPF_LSA
,

154 
	mMTYPE_OSPF_LSA_DATA
,

155 
	mMTYPE_OSPF_LSDB
,

156 
	mMTYPE_OSPF_PACKET
,

157 
	mMTYPE_OSPF_FIFO
,

158 
	mMTYPE_OSPF_VERTEX
,

159 
	mMTYPE_OSPF_VERTEX_PARENT
,

160 
	mMTYPE_OSPF_NEXTHOP
,

161 
	mMTYPE_OSPF_PATH
,

162 
	mMTYPE_OSPF_VL_DATA
,

163 
	mMTYPE_OSPF_CRYPT_KEY
,

164 
	mMTYPE_OSPF_EXTERNAL_INFO
,

165 
	mMTYPE_OSPF_DISTANCE
,

166 
	mMTYPE_OSPF_IF_INFO
,

167 
	mMTYPE_OSPF_IF_PARAMS
,

168 
	mMTYPE_OSPF_MESSAGE
,

169 
	mMTYPE_OSPF6_TOP
,

170 
	mMTYPE_OSPF6_AREA
,

171 
	mMTYPE_OSPF6_IF
,

172 
	mMTYPE_OSPF6_NEIGHBOR
,

173 
	mMTYPE_OSPF6_ROUTE
,

174 
	mMTYPE_OSPF6_PREFIX
,

175 
	mMTYPE_OSPF6_MESSAGE
,

176 
	mMTYPE_OSPF6_LSA
,

177 
	mMTYPE_OSPF6_LSA_SUMMARY
,

178 
	mMTYPE_OSPF6_LSDB
,

179 
	mMTYPE_OSPF6_VERTEX
,

180 
	mMTYPE_OSPF6_SPFTREE
,

181 
	mMTYPE_OSPF6_NEXTHOP
,

182 
	mMTYPE_OSPF6_EXTERNAL_INFO
,

183 
	mMTYPE_OSPF6_OTHER
,

184 
	mMTYPE_ISIS
,

185 
	mMTYPE_ISIS_TMP
,

186 
	mMTYPE_ISIS_CIRCUIT
,

187 
	mMTYPE_ISIS_LSP
,

188 
	mMTYPE_ISIS_ADJACENCY
,

189 
	mMTYPE_ISIS_AREA
,

190 
	mMTYPE_ISIS_AREA_ADDR
,

191 
	mMTYPE_ISIS_TLV
,

192 
	mMTYPE_ISIS_DYNHN
,

193 
	mMTYPE_ISIS_SPFTREE
,

194 
	mMTYPE_ISIS_VERTEX
,

195 
	mMTYPE_ISIS_ROUTE_INFO
,

196 
	mMTYPE_ISIS_NEXTHOP
,

197 
	mMTYPE_ISIS_NEXTHOP6
,

198 
	mMTYPE_ISIS_DICT
,

199 
	mMTYPE_ISIS_DICT_NODE
,

200 
	mMTYPE_PIM_CHANNEL_OIL
,

201 
	mMTYPE_PIM_INTERFACE
,

202 
	mMTYPE_PIM_IGMP_JOIN
,

203 
	mMTYPE_PIM_IGMP_SOCKET
,

204 
	mMTYPE_PIM_IGMP_GROUP
,

205 
	mMTYPE_PIM_IGMP_GROUP_SOURCE
,

206 
	mMTYPE_PIM_NEIGHBOR
,

207 
	mMTYPE_PIM_IFCHANNEL
,

208 
	mMTYPE_PIM_UPSTREAM
,

209 
	mMTYPE_PIM_SSMPINGD
,

210 
	mMTYPE_VTYSH_CONFIG
,

211 
	mMTYPE_VTYSH_CONFIG_LINE
,

212 
	mMTYPE_MAX
,

215 
mem‹y_li°
 
mem‹y_li°_lib
[];

216 
mem‹y_li°
 
mem‹y_li°_zebø
[];

217 
mem‹y_li°
 
mem‹y_li°_bgp
[];

218 
mem‹y_li°
 
mem‹y_li°_rù
[];

219 
mem‹y_li°
 
mem‹y_li°_rùng
[];

220 
mem‹y_li°
 
mem‹y_li°_babñ
[];

221 
mem‹y_li°
 
mem‹y_li°_o•f
[];

222 
mem‹y_li°
 
mem‹y_li°_o•f6
[];

223 
mem‹y_li°
 
mem‹y_li°_isis
[];

224 
mem‹y_li°
 
mem‹y_li°_pim
[];

225 
mem‹y_li°
 
mem‹y_li°_vtysh
[];

	@network.c

23 
	~<zebø.h
>

24 
	~"log.h
"

25 
	~"√tw‹k.h
"

29 
	$ªadn
 (
fd
, 
u_ch¨
 *
±r
, 
nbyãs
)

31 
∆e·
;

32 
ƒód
;

34 
∆e·
 = 
nbyãs
;

36 
∆e·
 > 0)

38 
ƒód
 = 
	`ªad
 (
fd
, 
±r
, 
∆e·
);

40 i‡(
ƒód
 < 0)

41  (
ƒód
);

43 i‡(
ƒód
 == 0)

46 
∆e·
 -
ƒód
;

47 
±r
 +
ƒód
;

50  
nbyãs
 - 
∆e·
;

51 
	}
}

55 
	$wrôí
(
fd
, c⁄° 
u_ch¨
 *
±r
, 
nbyãs
)

57 
∆e·
;

58 
nwrôãn
;

60 
∆e·
 = 
nbyãs
;

62 
∆e·
 > 0)

64 
nwrôãn
 = 
	`wrôe
(
fd
, 
±r
, 
∆e·
);

66 i‡(
nwrôãn
 <= 0)

67  (
nwrôãn
);

69 
∆e·
 -
nwrôãn
;

70 
±r
 +
nwrôãn
;

72  
nbyãs
 - 
∆e·
;

73 
	}
}

76 
	$£t_n⁄blockög
(
fd
)

78 
Êags
;

82 i‡((
Êags
 = 
	`f˙é
(
fd
, 
F_GETFL
)) < 0)

84 
	`zlog_w¨n
("fcntl(F_GETFL) failed for fd %d: %s",

85 
fd
, 
	`ß„_°ªº‹
(
î∫o
));

88 i‡(
	`f˙é
(
fd
, 
F_SETFL
, (
Êags
 | 
O_NONBLOCK
)) < 0)

90 
	`zlog_w¨n
("fcntl failed setting fd %dÇon-blocking: %s",

91 
fd
, 
	`ß„_°ªº‹
(
î∫o
));

95 
	}
}

	@network.h

23 #i‚de‡
_ZEBRA_NETWORK_H


24 
	#_ZEBRA_NETWORK_H


	)

29 
ªadn
 (, 
u_ch¨
 *, );

30 
wrôí
 (, c⁄° 
u_ch¨
 *, );

34 
£t_n⁄blockög
(
fd
);

37 
	#ERRNO_IO_RETRY
(
EN
) \

38 (((
EN
Ë=
EAGAIN
Ë|| ((ENË=
EWOULDBLOCK
Ë|| ((ENË=
EINTR
))

	)

	@pid_output.c

23 
	~<zebø.h
>

24 
	~<f˙é.h
>

25 
	~<log.h
>

26 
	~"vîsi⁄.h
"

28 
	#PIDFILE_MASK
 0644

	)

29 #i‚de‡
HAVE_FCNTL


31 
pid_t


32 
	$pid_ouçut
 (c⁄° *
∑th
)

34 
FILE
 *
Â
;

35 
pid_t
 
pid
;

36 
mode_t
 
ﬁdumask
;

38 
pid
 = 
	`gëpid
();

40 
ﬁdumask
 = 
	`umask
(0777 & ~
PIDFILE_MASK
);

41 
Â
 = 
	`f›í
 (
∑th
, "w");

42 i‡(
Â
 !
NULL
)

44 
	`Ârötf
 (
Â
, "%d\n", (Ë
pid
);

45 
	`f˛o£
 (
Â
);

46 
	`umask
(
ﬁdumask
);

47  
pid
;

51 
	`zlog_w¨n
("Can't fopenÖidÜock file %s (%s), continuing",

52 
∑th
, 
	`ß„_°ªº‹
(
î∫o
));

53 
	`umask
(
ﬁdumask
);

55 
	}
}

59 
pid_t


60 
	$pid_ouçut
 (c⁄° *
∑th
)

62 
tmp
;

63 
fd
;

64 
pid_t
 
pid
;

65 
buf
[16];

66 
Êock
 
lock
;

67 
mode_t
 
ﬁdumask
;

69 
pid
 = 
	`gëpid
 ();

71 
ﬁdumask
 = 
	`umask
(0777 & ~
PIDFILE_MASK
);

72 
fd
 = 
	`›í
 (
∑th
, 
O_RDWR
 | 
O_CREAT
, 
PIDFILE_MASK
);

73 i‡(
fd
 < 0)

75 
	`zlog_îr
("Can't createÖidÜock file %s (%s),Éxiting",

76 
∑th
, 
	`ß„_°ªº‹
(
î∫o
));

77 
	`umask
(
ﬁdumask
);

78 
	`exô
(1);

82 
size_t
 
pidsize
;

84 
	`umask
(
ﬁdumask
);

85 
	`mem£t
 (&
lock
, 0, (lock));

87 
lock
.
l_ty≥
 = 
F_WRLCK
;

88 
lock
.
l_whí˚
 = 
SEEK_SET
;

90 i‡(
	`f˙é
(
fd
, 
F_SETLK
, &
lock
) < 0)

92 
	`zlog_îr
("CouldÇŸÜockÖid_fûê%s,Éxôög", 
∑th
);

93 
	`exô
(1);

96 
	`•rötf
 (
buf
, "%d\n", (Ë
pid
);

97 
pidsize
 = 
	`°æí
(
buf
);

98 i‡((
tmp
 = 
	`wrôe
 (
fd
, 
buf
, 
pidsize
)) != ()pidsize)

99 
	`zlog_îr
("CouldÇot writeÖid %dÅoÖid_file %s,Ñc was %d: %s",

100 ()
pid
,
∑th
,
tmp
,
	`ß„_°ªº‹
(
î∫o
));

101 i‡(
	`·runˇã
(
fd
, 
pidsize
) < 0)

102 
	`zlog_îr
("CouldÇotÅruncateÖid_file %sÅo %u bytes: %s",

103 
∑th
,(
u_öt
)
pidsize
,
	`ß„_°ªº‹
(
î∫o
));

105  
pid
;

106 
	}
}

	@plist.c

22 
	~<zebø.h
>

24 
	~"¥efix.h
"

25 
	~"comm™d.h
"

26 
	~"mem‹y.h
"

27 
	~"∂i°.h
"

28 
	~"sockuni⁄.h
"

29 
	~"buf„r.h
"

30 
	~"°ªam.h
"

31 
	~"log.h
"

34 
	s¥efix_li°_íåy


36 
	m£q
;

38 
	mÀ
;

39 
	mge
;

41 
¥efix_li°_ty≥
 
	mty≥
;

43 
	m™y
;

44 
¥efix
 
	m¥efix
;

46 
	mªf˙t
;

47 
	mhô˙t
;

49 
¥efix_li°_íåy
 *
	m√xt
;

50 
¥efix_li°_íåy
 *
	m¥ev
;

54 
	s¥efix_li°_li°


56 
¥efix_li°
 *
	mhód
;

57 
¥efix_li°
 *
	mèû
;

61 
	s¥efix_ma°î


64 
¥efix_li°_li°
 
	mnum
;

67 
¥efix_li°_li°
 
	m°r
;

70 
	m£qnum
;

73 
¥efix_li°
 *
	mª˚¡
;

76 (*
	madd_hook
Ë(
	m¥efix_li°
 *);

79 (*
	mdñëe_hook
Ë(
	m¥efix_li°
 *);

83 
¥efix_ma°î
 
	g¥efix_ma°î_ùv4
 =

85 {
NULL
, NULL},

86 {
NULL
, NULL},

88 
NULL
,

89 
NULL
,

92 #ifde‡
HAVE_IPV6


94 
¥efix_ma°î
 
	g¥efix_ma°î_ùv6
 =

96 {
NULL
, NULL},

97 {
NULL
, NULL},

99 
NULL
,

100 
NULL
,

105 
¥efix_ma°î
 
	g¥efix_ma°î_‹f
 =

107 {
NULL
, NULL},

108 {
NULL
, NULL},

110 
NULL
,

111 
NULL
,

114 
¥efix_ma°î
 *

115 
	$¥efix_ma°î_gë
 (
afi_t
 
afi
)

117 i‡(
afi
 =
AFI_IP
)

118  &
¥efix_ma°î_ùv4
;

119 #ifde‡
HAVE_IPV6


120 i‡(
afi
 =
AFI_IP6
)

121  &
¥efix_ma°î_ùv6
;

123 i‡(
afi
 =
AFI_ORF_PREFIX
)

124  &
¥efix_ma°î_‹f
;

125  
NULL
;

126 
	}
}

129 
¥efix_li°
 *

130 
	$¥efix_li°_lookup
 (
afi_t
 
afi
, c⁄° *
«me
)

132 
¥efix_li°
 *
∂i°
;

133 
¥efix_ma°î
 *
ma°î
;

135 i‡(
«me
 =
NULL
)

136  
NULL
;

138 
ma°î
 = 
	`¥efix_ma°î_gë
 (
afi
);

139 i‡(
ma°î
 =
NULL
)

140  
NULL
;

142 
∂i°
 = 
ma°î
->
num
.
hód
;Öli°;Öli° =Öli°->
√xt
)

143 i‡(
	`°rcmp
 (
∂i°
->
«me
,Çame) == 0)

144  
∂i°
;

146 
∂i°
 = 
ma°î
->
°r
.
hód
;Öli°;Öli° =Öli°->
√xt
)

147 i‡(
	`°rcmp
 (
∂i°
->
«me
,Çame) == 0)

148  
∂i°
;

150  
NULL
;

151 
	}
}

153 
¥efix_li°
 *

154 
	$¥efix_li°_√w
 ()

156 
¥efix_li°
 *
√w
;

158 
√w
 = 
	`XCALLOC
 (
MTYPE_PREFIX_LIST
,  (
¥efix_li°
));

159  
√w
;

160 
	}
}

163 
	$¥efix_li°_‰ì
 (
¥efix_li°
 *
∂i°
)

165 
	`XFREE
 (
MTYPE_PREFIX_LIST
, 
∂i°
);

166 
	}
}

168 
¥efix_li°_íåy
 *

169 
	$¥efix_li°_íåy_√w
 ()

171 
¥efix_li°_íåy
 *
√w
;

173 
√w
 = 
	`XCALLOC
 (
MTYPE_PREFIX_LIST_ENTRY
,  (
¥efix_li°_íåy
));

174  
√w
;

175 
	}
}

178 
	$¥efix_li°_íåy_‰ì
 (
¥efix_li°_íåy
 *
≥¡ry
)

180 
	`XFREE
 (
MTYPE_PREFIX_LIST_ENTRY
, 
≥¡ry
);

181 
	}
}

185 
¥efix_li°
 *

186 
	$¥efix_li°_ö£π
 (
afi_t
 
afi
, c⁄° *
«me
)

188 
i
;

189 
numbî
;

190 
¥efix_li°
 *
∂i°
;

191 
¥efix_li°
 *
poöt
;

192 
¥efix_li°_li°
 *
li°
;

193 
¥efix_ma°î
 *
ma°î
;

195 
ma°î
 = 
	`¥efix_ma°î_gë
 (
afi
);

196 i‡(
ma°î
 =
NULL
)

197  
NULL
;

200 
∂i°
 = 
	`¥efix_li°_√w
 ();

201 
∂i°
->
«me
 = 
	`XSTRDUP
 (
MTYPE_PREFIX_LIST_STR
,Çame);

202 
∂i°
->
ma°î
 = master;

206 
numbî
 = 0, 
i
 = 0; i < 
	`°æí
 (
«me
); i++)

208 i‡(
	`isdigô
 ((Ë
«me
[
i
]))

209 
numbî
 = (numbî * 10Ë+ (
«me
[
i
] - '0');

215 i‡(
i
 =
	`°æí
 (
«me
))

217 
∂i°
->
ty≥
 = 
PREFIX_TYPE_NUMBER
;

220 
li°
 = &
ma°î
->
num
;

222 
poöt
 = 
li°
->
hód
;Öoöt;Öoöàpoöt->
√xt
)

223 i‡(
	`©ﬁ
 (
poöt
->
«me
Ë>
numbî
)

228 
∂i°
->
ty≥
 = 
PREFIX_TYPE_STRING
;

231 
li°
 = &
ma°î
->
°r
;

234 
poöt
 = 
li°
->
hód
;Öoöt;Öoöàpoöt->
√xt
)

235 i‡(
	`°rcmp
 (
poöt
->
«me
,Çame) >= 0)

240 i‡(
li°
->
hód
 =
NULL
)

242 
li°
->
hód
 =Üi°->
èû
 = 
∂i°
;

243  
∂i°
;

247 i‡(
poöt
 =
NULL
)

249 
∂i°
->
¥ev
 = 
li°
->
èû
;

250 
li°
->
èû
->
√xt
 = 
∂i°
;

251 
li°
->
èû
 = 
∂i°
;

252  
∂i°
;

256 i‡(
poöt
 =
li°
->
hód
)

258 
∂i°
->
√xt
 = 
li°
->
hód
;

259 
li°
->
hód
->
¥ev
 = 
∂i°
;

260 
li°
->
hód
 = 
∂i°
;

261  
∂i°
;

265 
∂i°
->
√xt
 = 
poöt
;

266 
∂i°
->
¥ev
 = 
poöt
->prev;

268 i‡(
poöt
->
¥ev
)

269 
poöt
->
¥ev
->
√xt
 = 
∂i°
;

270 
poöt
->
¥ev
 = 
∂i°
;

272  
∂i°
;

273 
	}
}

275 
¥efix_li°
 *

276 
	$¥efix_li°_gë
 (
afi_t
 
afi
, c⁄° *
«me
)

278 
¥efix_li°
 *
∂i°
;

280 
∂i°
 = 
	`¥efix_li°_lookup
 (
afi
, 
«me
);

282 i‡(
∂i°
 =
NULL
)

283 
∂i°
 = 
	`¥efix_li°_ö£π
 (
afi
, 
«me
);

284  
∂i°
;

285 
	}
}

289 
	$¥efix_li°_dñëe
 (
¥efix_li°
 *
∂i°
)

291 
¥efix_li°_li°
 *
li°
;

292 
¥efix_ma°î
 *
ma°î
;

293 
¥efix_li°_íåy
 *
≥¡ry
;

294 
¥efix_li°_íåy
 *
√xt
;

297 
≥¡ry
 = 
∂i°
->
hód
;Öíåy;Öíåy = 
√xt
)

299 
√xt
 = 
≥¡ry
->next;

300 
	`¥efix_li°_íåy_‰ì
 (
≥¡ry
);

301 
∂i°
->
cou¡
--;

304 
ma°î
 = 
∂i°
->master;

306 i‡(
∂i°
->
ty≥
 =
PREFIX_TYPE_NUMBER
)

307 
li°
 = &
ma°î
->
num
;

309 
li°
 = &
ma°î
->
°r
;

311 i‡(
∂i°
->
√xt
)

312 
∂i°
->
√xt
->
¥ev
 =Ölist->prev;

314 
li°
->
èû
 = 
∂i°
->
¥ev
;

316 i‡(
∂i°
->
¥ev
)

317 
∂i°
->
¥ev
->
√xt
 =Ölist->next;

319 
li°
->
hód
 = 
∂i°
->
√xt
;

321 i‡(
∂i°
->
desc
)

322 
	`XFREE
 (
MTYPE_TMP
, 
∂i°
->
desc
);

326 
ma°î
->
ª˚¡
 = 
NULL
;

328 i‡(
∂i°
->
«me
)

329 
	`XFREE
 (
MTYPE_PREFIX_LIST_STR
, 
∂i°
->
«me
);

331 
	`¥efix_li°_‰ì
 (
∂i°
);

333 i‡(
ma°î
->
dñëe_hook
)

334 (*
ma°î
->
dñëe_hook
Ë(
NULL
);

335 
	}
}

337 
¥efix_li°_íåy
 *

338 
	$¥efix_li°_íåy_make
 (
¥efix
 *¥efix, 
¥efix_li°_ty≥
 
ty≥
,

339 
£q
, 
À
, 
ge
, 
™y
)

341 
¥efix_li°_íåy
 *
≥¡ry
;

343 
≥¡ry
 = 
	`¥efix_li°_íåy_√w
 ();

345 i‡(
™y
)

346 
≥¡ry
->
™y
 = 1;

348 
	`¥efix_c›y
 (&
≥¡ry
->
¥efix
,Örefix);

349 
≥¡ry
->
ty≥
 =Åype;

350 
≥¡ry
->
£q
 = seq;

351 
≥¡ry
->
À
 =Üe;

352 
≥¡ry
->
ge
 = ge;

354  
≥¡ry
;

355 
	}
}

359 
¥efix_li°_add_hook
 ((*
func
Ë(
¥efix_li°
 *
∂i°
))

361 
¥efix_ma°î_ùv4
.
add_hook
 = 
func
;

362 #ifde‡
HAVE_IPV6


363 
¥efix_ma°î_ùv6
.
add_hook
 = 
func
;

365 
	}
}

369 
¥efix_li°_dñëe_hook
 ((*
func
Ë(
¥efix_li°
 *
∂i°
))

371 
¥efix_ma°î_ùv4
.
dñëe_hook
 = 
func
;

372 #ifde‡
HAVE_IPV6


373 
¥efix_ma°î_ùv6
.
dñëe_hook
 = 
func
;

375 
	}
}

379 
	$¥efix_√w_£q_gë
 (
¥efix_li°
 *
∂i°
)

381 
max£q
;

382 
√w£q
;

383 
¥efix_li°_íåy
 *
≥¡ry
;

385 
max£q
 = 
√w£q
 = 0;

387 
≥¡ry
 = 
∂i°
->
hód
;Öíåy;Öíåy =Öíåy->
√xt
)

389 i‡(
max£q
 < 
≥¡ry
->
£q
)

390 
max£q
 = 
≥¡ry
->
£q
;

393 
√w£q
 = ((
max£q
 / 5) * 5) + 5;

395  
√w£q
;

396 
	}
}

399 
¥efix_li°_íåy
 *

400 
	$¥efix_£q_check
 (
¥efix_li°
 *
∂i°
, 
£q
)

402 
¥efix_li°_íåy
 *
≥¡ry
;

404 
≥¡ry
 = 
∂i°
->
hód
;Öíåy;Öíåy =Öíåy->
√xt
)

405 i‡(
≥¡ry
->
£q
 == seq)

406  
≥¡ry
;

407  
NULL
;

408 
	}
}

410 
¥efix_li°_íåy
 *

411 
	$¥efix_li°_íåy_lookup
 (
¥efix_li°
 *
∂i°
, 
¥efix
 *prefix,

412 
¥efix_li°_ty≥
 
ty≥
, 
£q
, 
À
, 
ge
)

414 
¥efix_li°_íåy
 *
≥¡ry
;

416 
≥¡ry
 = 
∂i°
->
hód
;Öíåy;Öíåy =Öíåy->
√xt
)

417 i‡(
	`¥efix_ßme
 (&
≥¡ry
->
¥efix
,ÖªfixË&&Öíåy->
ty≥
 ==Åype)

419 i‡(
£q
 >0 && 
≥¡ry
->seq != seq)

422 i‡(
≥¡ry
->
À
 !=Üe)

424 i‡(
≥¡ry
->
ge
 != ge)

427  
≥¡ry
;

430  
NULL
;

431 
	}
}

434 
	$¥efix_li°_íåy_dñëe
 (
¥efix_li°
 *
∂i°
,

435 
¥efix_li°_íåy
 *
≥¡ry
,

436 
upd©e_li°
)

438 i‡(
∂i°
 =
NULL
 || 
≥¡ry
 == NULL)

440 i‡(
≥¡ry
->
¥ev
)

441 
≥¡ry
->
¥ev
->
√xt
 =Öentry->next;

443 
∂i°
->
hód
 = 
≥¡ry
->
√xt
;

444 i‡(
≥¡ry
->
√xt
)

445 
≥¡ry
->
√xt
->
¥ev
 =Öentry->prev;

447 
∂i°
->
èû
 = 
≥¡ry
->
¥ev
;

449 
	`¥efix_li°_íåy_‰ì
 (
≥¡ry
);

451 
∂i°
->
cou¡
--;

453 i‡(
upd©e_li°
)

455 i‡(
∂i°
->
ma°î
->
dñëe_hook
)

456 (*
∂i°
->
ma°î
->
dñëe_hook
) (plist);

458 i‡(
∂i°
->
hód
 =
NULL
 &&Öli°->
èû
 =NULL &&Öli°->
desc
 == NULL)

459 
	`¥efix_li°_dñëe
 (
∂i°
);

461 
∂i°
->
ma°î
->
ª˚¡
 =Ölist;

463 
	}
}

466 
	$¥efix_li°_íåy_add
 (
¥efix_li°
 *
∂i°
,

467 
¥efix_li°_íåy
 *
≥¡ry
)

469 
¥efix_li°_íåy
 *
ª∂a˚
;

470 
¥efix_li°_íåy
 *
poöt
;

473 i‡(
≥¡ry
->
£q
 == -1)

474 
≥¡ry
->
£q
 = 
	`¥efix_√w_£q_gë
 (
∂i°
);

477 
ª∂a˚
 = 
	`¥efix_£q_check
 (
∂i°
, 
≥¡ry
->
£q
);

478 i‡(
ª∂a˚
)

479 
	`¥efix_li°_íåy_dñëe
 (
∂i°
, 
ª∂a˚
, 0);

482 
poöt
 = 
∂i°
->
hód
;Öoöt;Öoöàpoöt->
√xt
)

483 i‡(
poöt
->
£q
 >
≥¡ry
->seq)

487 
≥¡ry
->
√xt
 = 
poöt
;

489 i‡(
poöt
)

491 i‡(
poöt
->
¥ev
)

492 
poöt
->
¥ev
->
√xt
 = 
≥¡ry
;

494 
∂i°
->
hód
 = 
≥¡ry
;

496 
≥¡ry
->
¥ev
 = 
poöt
->prev;

497 
poöt
->
¥ev
 = 
≥¡ry
;

501 i‡(
∂i°
->
èû
)

502 
∂i°
->
èû
->
√xt
 = 
≥¡ry
;

504 
∂i°
->
hód
 = 
≥¡ry
;

506 
≥¡ry
->
¥ev
 = 
∂i°
->
èû
;

507 
∂i°
->
èû
 = 
≥¡ry
;

511 
∂i°
->
cou¡
++;

514 i‡(
∂i°
->
ma°î
->
add_hook
)

515 (*
∂i°
->
ma°î
->
add_hook
) (plist);

517 
∂i°
->
ma°î
->
ª˚¡
 =Ölist;

518 
	}
}

522 
	$¥efix_li°_ty≥_°r
 (
¥efix_li°_íåy
 *
≥¡ry
)

524 
≥¡ry
->
ty≥
)

526 
PREFIX_PERMIT
:

528 
PREFIX_DENY
:

533 
	}
}

536 
	$¥efix_li°_íåy_m©ch
 (
¥efix_li°_íåy
 *
≥¡ry
, 
¥efix
 *
p
)

538 
ªt
;

540 
ªt
 = 
	`¥efix_m©ch
 (&
≥¡ry
->
¥efix
, 
p
);

541 i‡(! 
ªt
)

545 i‡(! 
≥¡ry
->
À
 && !Öíåy->
ge
)

547 i‡(
≥¡ry
->
¥efix
.
¥efixÀn
 !
p
->prefixlen)

552 i‡(
≥¡ry
->
À
)

553 i‡(
p
->
¥efixÀn
 > 
≥¡ry
->
À
)

556 i‡(
≥¡ry
->
ge
)

557 i‡(
p
->
¥efixÀn
 < 
≥¡ry
->
ge
)

561 
	}
}

563 
¥efix_li°_ty≥


564 
	$¥efix_li°_≠∂y
 (
¥efix_li°
 *
∂i°
, *
obje˘
)

566 
¥efix_li°_íåy
 *
≥¡ry
;

567 
¥efix
 *
p
;

569 
p
 = (
¥efix
 *Ë
obje˘
;

571 i‡(
∂i°
 =
NULL
)

572  
PREFIX_DENY
;

574 i‡(
∂i°
->
cou¡
 == 0)

575  
PREFIX_PERMIT
;

577 
≥¡ry
 = 
∂i°
->
hód
;Öíåy;Öíåy =Öíåy->
√xt
)

579 
≥¡ry
->
ªf˙t
++;

580 i‡(
	`¥efix_li°_íåy_m©ch
 (
≥¡ry
, 
p
))

582 
≥¡ry
->
hô˙t
++;

583  
≥¡ry
->
ty≥
;

587  
PREFIX_DENY
;

588 
	}
}

590 
__©åibuã__
 ((
unu£d
))

591 
	$¥efix_li°_¥öt
 (
¥efix_li°
 *
∂i°
)

593 
¥efix_li°_íåy
 *
≥¡ry
;

595 i‡(
∂i°
 =
NULL
)

598 
	`¥ötf
 ("ùÖªfix-li° %s: %dÉ¡rõs\n", 
∂i°
->
«me
,Öli°->
cou¡
);

600 
≥¡ry
 = 
∂i°
->
hód
;Öíåy;Öíåy =Öíåy->
√xt
)

602 i‡(
≥¡ry
->
™y
)

603 
	`¥ötf
 ("™y %s\n", 
	`¥efix_li°_ty≥_°r
 (
≥¡ry
));

606 
¥efix
 *
p
;

607 
buf
[
BUFSIZ
];

609 
p
 = &
≥¡ry
->
¥efix
;

611 
	`¥ötf
 (" seq %d %s %s/%d",

612 
≥¡ry
->
£q
,

613 
	`¥efix_li°_ty≥_°r
 (
≥¡ry
),

614 
	`öë_¡›
 (
p
->
Ámûy
, &p->
u
.
¥efix
, 
buf
, 
BUFSIZ
),

615 
p
->
¥efixÀn
);

616 i‡(
≥¡ry
->
ge
)

617 
	`¥ötf
 (" gê%d", 
≥¡ry
->
ge
);

618 i‡(
≥¡ry
->
À
)

619 
	`¥ötf
 ("Üê%d", 
≥¡ry
->
À
);

620 
	`¥ötf
 ("\n");

623 
	}
}

626 
¥efix_li°_íåy
 *

627 
	$¥efix_íåy_dup_check
 (
¥efix_li°
 *
∂i°
,

628 
¥efix_li°_íåy
 *
√w
)

630 
¥efix_li°_íåy
 *
≥¡ry
;

631 
£q
 = 0;

633 i‡(
√w
->
£q
 == -1)

634 
£q
 = 
	`¥efix_√w_£q_gë
 (
∂i°
);

636 
£q
 = 
√w
->seq;

638 
≥¡ry
 = 
∂i°
->
hód
;Öíåy;Öíåy =Öíåy->
√xt
)

640 i‡(
	`¥efix_ßme
 (&
≥¡ry
->
¥efix
, &
√w
->prefix)

641 && 
≥¡ry
->
ty≥
 =
√w
->type

642 && 
≥¡ry
->
À
 =
√w
->le

643 && 
≥¡ry
->
ge
 =
√w
->ge

644 && 
≥¡ry
->
£q
 != seq)

645  
≥¡ry
;

647  
NULL
;

648 
	}
}

651 
	$vty_övÆid_¥efix_ønge
 (
vty
 *vty, c⁄° *
¥efix
)

653 
	`vty_out
 (
vty
, "%% InvalidÖrefixÑange for %s, make sure:Üen < ge-value <=Üe-value%s",

654 
¥efix
, 
VTY_NEWLINE
);

655  
CMD_WARNING
;

656 
	}
}

659 
	$vty_¥efix_li°_ö°Æl
 (
vty
 *vty, 
afi_t
 
afi
, c⁄° *
«me
,

660 c⁄° *
£q
, c⁄° *
ty≥°r
,

661 c⁄° *
¥efix
, c⁄° *
ge
, c⁄° *
À
)

663 
ªt
;

664 
¥efix_li°_ty≥
 
ty≥
;

665 
¥efix_li°
 *
∂i°
;

666 
¥efix_li°_íåy
 *
≥¡ry
;

667 
¥efix_li°_íåy
 *
dup
;

668 
¥efix
 
p
;

669 
™y
 = 0;

670 
£qnum
 = -1;

671 
Ànum
 = 0;

672 
gíum
 = 0;

675 i‡(
£q
)

676 
£qnum
 = 
	`©oi
 (
£q
);

679 i‡(
ge
)

680 
gíum
 = 
	`©oi
 (
ge
);

681 i‡(
À
)

682 
Ànum
 = 
	`©oi
 (
À
);

685 i‡(
	`°∫cmp
 ("≥rmô", 
ty≥°r
, 1) == 0)

686 
ty≥
 = 
PREFIX_PERMIT
;

687 i‡(
	`°∫cmp
 ("díy", 
ty≥°r
, 1) == 0)

688 
ty≥
 = 
PREFIX_DENY
;

691 
	`vty_out
 (
vty
, "%%ÖªfixÅy≥ mu° bê≥rmô o∏díy%s", 
VTY_NEWLINE
);

692  
CMD_WARNING
;

696 i‡(
afi
 =
AFI_IP
)

698 i‡(
	`°∫cmp
 ("™y", 
¥efix
, 
	`°æí
 (prefix)) == 0)

700 
ªt
 = 
	`°r2¥efix_ùv4
 ("0.0.0.0/0", (
¥efix_ùv4
 *Ë&
p
);

701 
gíum
 = 0;

702 
Ànum
 = 
IPV4_MAX_BITLEN
;

703 
™y
 = 1;

706 
ªt
 = 
	`°r2¥efix_ùv4
 (
¥efix
, (
¥efix_ùv4
 *Ë&
p
);

708 i‡(
ªt
 <= 0)

710 
	`vty_out
 (
vty
, "%% MÆf‹med IPv4Öªfix%s", 
VTY_NEWLINE
);

711  
CMD_WARNING
;

714 #ifde‡
HAVE_IPV6


715 i‡(
afi
 =
AFI_IP6
)

717 i‡(
	`°∫cmp
 ("™y", 
¥efix
, 
	`°æí
 (prefix)) == 0)

719 
ªt
 = 
	`°r2¥efix_ùv6
 ("::/0", (
¥efix_ùv6
 *Ë&
p
);

720 
gíum
 = 0;

721 
Ànum
 = 
IPV6_MAX_BITLEN
;

722 
™y
 = 1;

725 
ªt
 = 
	`°r2¥efix_ùv6
 (
¥efix
, (
¥efix_ùv6
 *Ë&
p
);

727 i‡(
ªt
 <= 0)

729 
	`vty_out
 (
vty
, "%% MÆf‹med IPv6Öªfix%s", 
VTY_NEWLINE
);

730  
CMD_WARNING
;

736 i‡(
gíum
 && (gíum <
p
.
¥efixÀn
))

737  
	`vty_övÆid_¥efix_ønge
 (
vty
, 
¥efix
);

739 i‡(
Ànum
 && (Ànum <
p
.
¥efixÀn
))

740  
	`vty_övÆid_¥efix_ønge
 (
vty
, 
¥efix
);

742 i‡(
Ànum
 && (
gíum
 >Üenum))

743  
	`vty_övÆid_¥efix_ønge
 (
vty
, 
¥efix
);

745 i‡(
gíum
 && (
Ànum
 =(
afi
 =
AFI_IP
 ? 32 : 128)))

746 
Ànum
 = 0;

749 
∂i°
 = 
	`¥efix_li°_gë
 (
afi
, 
«me
);

752 
≥¡ry
 = 
	`¥efix_li°_íåy_make
 (&
p
, 
ty≥
, 
£qnum
, 
Ànum
, 
gíum
, 
™y
);

755 
dup
 = 
	`¥efix_íåy_dup_check
 (
∂i°
, 
≥¡ry
);

757 i‡(
dup
)

759 
	`¥efix_li°_íåy_‰ì
 (
≥¡ry
);

760 
	`vty_out
 (
vty
, "%% Insertion failed -Örefix-listÉntryÉxists:%s",

761 
VTY_NEWLINE
);

762 
	`vty_out
 (
vty
, " seq %d %†%s", 
dup
->
£q
, 
ty≥°r
, 
¥efix
);

763 i‡(! 
™y
 && 
gíum
)

764 
	`vty_out
 (
vty
, " gê%d", 
gíum
);

765 i‡(! 
™y
 && 
Ànum
)

766 
	`vty_out
 (
vty
, "Üê%d", 
Ànum
);

767 
	`vty_out
 (
vty
, "%s", 
VTY_NEWLINE
);

768  
CMD_WARNING
;

772 
	`¥efix_li°_íåy_add
 (
∂i°
, 
≥¡ry
);

774  
CMD_SUCCESS
;

775 
	}
}

778 
	$vty_¥efix_li°_unö°Æl
 (
vty
 *vty, 
afi_t
 
afi
, c⁄° *
«me
,

779 c⁄° *
£q
, c⁄° *
ty≥°r
,

780 c⁄° *
¥efix
, c⁄° *
ge
, c⁄° *
À
)

782 
ªt
;

783 
¥efix_li°_ty≥
 
ty≥
;

784 
¥efix_li°
 *
∂i°
;

785 
¥efix_li°_íåy
 *
≥¡ry
;

786 
¥efix
 
p
;

787 
£qnum
 = -1;

788 
Ànum
 = 0;

789 
gíum
 = 0;

792 
∂i°
 = 
	`¥efix_li°_lookup
 (
afi
, 
«me
);

793 i‡(! 
∂i°
)

795 
	`vty_out
 (
vty
, "%% C™'àföd s≥cifõdÖªfix-li°%s", 
VTY_NEWLINE
);

796  
CMD_WARNING
;

800 i‡(
£q
 =
NULL
 && 
ty≥°r
 =NULL && 
¥efix
 == NULL &&

801 
ge
 =
NULL
 && 
À
 == NULL)

803 
	`¥efix_li°_dñëe
 (
∂i°
);

804  
CMD_SUCCESS
;

808 i‡((
ty≥°r
 =
NULL
Ë|| (
¥efix
 == NULL))

810 
	`vty_out
 (
vty
, "%% BŸhÖªfixándÅy≥Ñequúed%s", 
VTY_NEWLINE
);

811  
CMD_WARNING
;

815 i‡(
£q
)

816 
£qnum
 = 
	`©oi
 (
£q
);

819 i‡(
ge
)

820 
gíum
 = 
	`©oi
 (
ge
);

821 i‡(
À
)

822 
Ànum
 = 
	`©oi
 (
À
);

825 i‡(
	`°∫cmp
 ("≥rmô", 
ty≥°r
, 1) == 0)

826 
ty≥
 = 
PREFIX_PERMIT
;

827 i‡(
	`°∫cmp
 ("díy", 
ty≥°r
, 1) == 0)

828 
ty≥
 = 
PREFIX_DENY
;

831 
	`vty_out
 (
vty
, "%%ÖªfixÅy≥ mu° bê≥rmô o∏díy%s", 
VTY_NEWLINE
);

832  
CMD_WARNING
;

836 i‡(
afi
 =
AFI_IP
)

838 i‡(
	`°∫cmp
 ("™y", 
¥efix
, 
	`°æí
 (prefix)) == 0)

840 
ªt
 = 
	`°r2¥efix_ùv4
 ("0.0.0.0/0", (
¥efix_ùv4
 *Ë&
p
);

841 
gíum
 = 0;

842 
Ànum
 = 
IPV4_MAX_BITLEN
;

845 
ªt
 = 
	`°r2¥efix_ùv4
 (
¥efix
, (
¥efix_ùv4
 *Ë&
p
);

847 i‡(
ªt
 <= 0)

849 
	`vty_out
 (
vty
, "%% MÆf‹med IPv4Öªfix%s", 
VTY_NEWLINE
);

850  
CMD_WARNING
;

853 #ifde‡
HAVE_IPV6


854 i‡(
afi
 =
AFI_IP6
)

856 i‡(
	`°∫cmp
 ("™y", 
¥efix
, 
	`°æí
 (prefix)) == 0)

858 
ªt
 = 
	`°r2¥efix_ùv6
 ("::/0", (
¥efix_ùv6
 *Ë&
p
);

859 
gíum
 = 0;

860 
Ànum
 = 
IPV6_MAX_BITLEN
;

863 
ªt
 = 
	`°r2¥efix_ùv6
 (
¥efix
, (
¥efix_ùv6
 *Ë&
p
);

865 i‡(
ªt
 <= 0)

867 
	`vty_out
 (
vty
, "%% MÆf‹med IPv6Öªfix%s", 
VTY_NEWLINE
);

868  
CMD_WARNING
;

874 
≥¡ry
 = 
	`¥efix_li°_íåy_lookup
(
∂i°
, &
p
, 
ty≥
, 
£qnum
, 
Ànum
, 
gíum
);

876 i‡(
≥¡ry
 =
NULL
)

878 
	`vty_out
 (
vty
, "%% C™'àföd s≥cifõdÖªfix-li°%s", 
VTY_NEWLINE
);

879  
CMD_WARNING
;

883 
	`¥efix_li°_íåy_dñëe
 (
∂i°
, 
≥¡ry
, 1);

885  
CMD_SUCCESS
;

886 
	}
}

889 
	$vty_¥efix_li°_desc_un£t
 (
vty
 *vty, 
afi_t
 
afi
, c⁄° *
«me
)

891 
¥efix_li°
 *
∂i°
;

893 
∂i°
 = 
	`¥efix_li°_lookup
 (
afi
, 
«me
);

894 i‡(! 
∂i°
)

896 
	`vty_out
 (
vty
, "%% C™'àföd s≥cifõdÖªfix-li°%s", 
VTY_NEWLINE
);

897  
CMD_WARNING
;

900 i‡(
∂i°
->
desc
)

902 
	`XFREE
 (
MTYPE_TMP
, 
∂i°
->
desc
);

903 
∂i°
->
desc
 = 
NULL
;

906 i‡(
∂i°
->
hód
 =
NULL
 &&Öli°->
èû
 =NULL &&Öli°->
desc
 == NULL)

907 
	`¥efix_li°_dñëe
 (
∂i°
);

909  
CMD_SUCCESS
;

910 
	}
}

912 
	edi•œy_ty≥


914 
	mn‹mÆ_di•œy
,

915 
	msumm¨y_di•œy
,

916 
	mdëaû_di•œy
,

917 
	m£quítül_di•œy
,

918 
	ml⁄gî_di•œy
,

919 
	mfú°_m©ch_di•œy


923 
	$vty_show_¥efix_íåy
 (
vty
 *vty, 
afi_t
 
afi
, 
¥efix_li°
 *
∂i°
,

924 
¥efix_ma°î
 *
ma°î
, 
di•œy_ty≥
 
dty≥
,

925 
£qnum
)

927 
¥efix_li°_íåy
 *
≥¡ry
;

930 i‡(
zlog_deÁu…
)

931 
	`vty_out
 (
vty
, "%s: ", 
zlog_¥Ÿo_«mes
[
zlog_deÁu…
->
¥Ÿocﬁ
]);

933 i‡(
dty≥
 =
n‹mÆ_di•œy
)

935 
	`vty_out
 (
vty
, "ip%sÖrefix-list %s: %dÉntries%s",

936 
afi
 =
AFI_IP
 ? "" : "v6",

937 
∂i°
->
«me
,Öli°->
cou¡
, 
VTY_NEWLINE
);

938 i‡(
∂i°
->
desc
)

939 
	`vty_out
 (
vty
, " Des¸ùti⁄: %s%s", 
∂i°
->
desc
, 
VTY_NEWLINE
);

941 i‡(
dty≥
 =
summ¨y_di•œy
 || dty≥ =
dëaû_di•œy
)

943 
	`vty_out
 (
vty
, "ip%sÖrefix-list %s:%s",

944 
afi
 =
AFI_IP
 ? "" : "v6", 
∂i°
->
«me
, 
VTY_NEWLINE
);

946 i‡(
∂i°
->
desc
)

947 
	`vty_out
 (
vty
, " Des¸ùti⁄: %s%s", 
∂i°
->
desc
, 
VTY_NEWLINE
);

949 
	`vty_out
 (
vty
, " count: %d,ÑangeÉntries: %d, sequences: %d - %d%s",

950 
∂i°
->
cou¡
,Öli°->
øngecou¡
,

951 
∂i°
->
hód
 ?Öli°->hód->
£q
 : 0,

952 
∂i°
->
èû
 ?Öli°->èû->
£q
 : 0,

953 
VTY_NEWLINE
);

956 i‡(
dty≥
 !
summ¨y_di•œy
)

958 
≥¡ry
 = 
∂i°
->
hód
;Öíåy;Öíåy =Öíåy->
√xt
)

960 i‡(
dty≥
 =
£quítül_di•œy
 && 
≥¡ry
->
£q
 !
£qnum
)

963 
	`vty_out
 (
vty
, " ");

965 i‡(
ma°î
->
£qnum
)

966 
	`vty_out
 (
vty
, "£q %d ", 
≥¡ry
->
£q
);

968 
	`vty_out
 (
vty
, "%†", 
	`¥efix_li°_ty≥_°r
 (
≥¡ry
));

970 i‡(
≥¡ry
->
™y
)

971 
	`vty_out
 (
vty
, "any");

974 
¥efix
 *
p
 = &
≥¡ry
->prefix;

975 
buf
[
BUFSIZ
];

977 
	`vty_out
 (
vty
, "%s/%d",

978 
	`öë_¡›
 (
p
->
Ámûy
, &p->
u
.
¥efix
, 
buf
, 
BUFSIZ
),

979 
p
->
¥efixÀn
);

981 i‡(
≥¡ry
->
ge
)

982 
	`vty_out
 (
vty
, " gê%d", 
≥¡ry
->
ge
);

983 i‡(
≥¡ry
->
À
)

984 
	`vty_out
 (
vty
, "Üê%d", 
≥¡ry
->
À
);

987 i‡(
dty≥
 =
dëaû_di•œy
 || dty≥ =
£quítül_di•œy
)

988 
	`vty_out
 (
vty
, " (hit count: %ld,Ñefcount: %ld)",

989 
≥¡ry
->
hô˙t
,Öíåy->
ªf˙t
);

991 
	`vty_out
 (
vty
, "%s", 
VTY_NEWLINE
);

994 
	}
}

997 
	$vty_show_¥efix_li°
 (
vty
 *vty, 
afi_t
 
afi
, c⁄° *
«me
,

998 c⁄° *
£q
, 
di•œy_ty≥
 
dty≥
)

1000 
¥efix_li°
 *
∂i°
;

1001 
¥efix_ma°î
 *
ma°î
;

1002 
£qnum
 = 0;

1004 
ma°î
 = 
	`¥efix_ma°î_gë
 (
afi
);

1005 i‡(
ma°î
 =
NULL
)

1006  
CMD_WARNING
;

1008 i‡(
£q
)

1009 
£qnum
 = 
	`©oi
 (
£q
);

1011 i‡(
«me
)

1013 
∂i°
 = 
	`¥efix_li°_lookup
 (
afi
, 
«me
);

1014 i‡(! 
∂i°
)

1016 
	`vty_out
 (
vty
, "%% C™'àföd s≥cifõdÖªfix-li°%s", 
VTY_NEWLINE
);

1017  
CMD_WARNING
;

1019 
	`vty_show_¥efix_íåy
 (
vty
, 
afi
, 
∂i°
, 
ma°î
, 
dty≥
, 
£qnum
);

1023 i‡(
dty≥
 =
dëaû_di•œy
 || dty≥ =
summ¨y_di•œy
)

1025 i‡(
ma°î
->
ª˚¡
)

1026 
	`vty_out
 (
vty
, "Prefix-list withÅheÜast deletion/insertion: %s%s",

1027 
ma°î
->
ª˚¡
->
«me
, 
VTY_NEWLINE
);

1030 
∂i°
 = 
ma°î
->
num
.
hód
;Öli°;Öli° =Öli°->
√xt
)

1031 
	`vty_show_¥efix_íåy
 (
vty
, 
afi
, 
∂i°
, 
ma°î
, 
dty≥
, 
£qnum
);

1033 
∂i°
 = 
ma°î
->
°r
.
hód
;Öli°;Öli° =Öli°->
√xt
)

1034 
	`vty_show_¥efix_íåy
 (
vty
, 
afi
, 
∂i°
, 
ma°î
, 
dty≥
, 
£qnum
);

1037  
CMD_SUCCESS
;

1038 
	}
}

1041 
	$vty_show_¥efix_li°_¥efix
 (
vty
 *vty, 
afi_t
 
afi
, c⁄° *
«me
,

1042 c⁄° *
¥efix
, 
di•œy_ty≥
 
ty≥
)

1044 
¥efix_li°
 *
∂i°
;

1045 
¥efix_li°_íåy
 *
≥¡ry
;

1046 
¥efix
 
p
;

1047 
ªt
;

1048 
m©ch
;

1050 
∂i°
 = 
	`¥efix_li°_lookup
 (
afi
, 
«me
);

1051 i‡(! 
∂i°
)

1053 
	`vty_out
 (
vty
, "%% C™'àföd s≥cifõdÖªfix-li°%s", 
VTY_NEWLINE
);

1054  
CMD_WARNING
;

1057 
ªt
 = 
	`°r2¥efix
 (
¥efix
, &
p
);

1058 i‡(
ªt
 <= 0)

1060 
	`vty_out
 (
vty
, "%%Öªfix i†mÆf‹med%s", 
VTY_NEWLINE
);

1061  
CMD_WARNING
;

1064 
≥¡ry
 = 
∂i°
->
hód
;Öíåy;Öíåy =Öíåy->
√xt
)

1066 
m©ch
 = 0;

1068 i‡(
ty≥
 =
n‹mÆ_di•œy
 ||Åy≥ =
fú°_m©ch_di•œy
)

1069 i‡(
	`¥efix_ßme
 (&
p
, &
≥¡ry
->
¥efix
))

1070 
m©ch
 = 1;

1072 i‡(
ty≥
 =
l⁄gî_di•œy
)

1073 i‡(
	`¥efix_m©ch
 (&
p
, &
≥¡ry
->
¥efix
))

1074 
m©ch
 = 1;

1076 i‡(
m©ch
)

1078 
	`vty_out
 (
vty
, " seq %d %s ",

1079 
≥¡ry
->
£q
,

1080 
	`¥efix_li°_ty≥_°r
 (
≥¡ry
));

1082 i‡(
≥¡ry
->
™y
)

1083 
	`vty_out
 (
vty
, "any");

1086 
¥efix
 *
p
 = &
≥¡ry
->prefix;

1087 
buf
[
BUFSIZ
];

1089 
	`vty_out
 (
vty
, "%s/%d",

1090 
	`öë_¡›
 (
p
->
Ámûy
, &p->
u
.
¥efix
, 
buf
, 
BUFSIZ
),

1091 
p
->
¥efixÀn
);

1093 i‡(
≥¡ry
->
ge
)

1094 
	`vty_out
 (
vty
, " gê%d", 
≥¡ry
->
ge
);

1095 i‡(
≥¡ry
->
À
)

1096 
	`vty_out
 (
vty
, "Üê%d", 
≥¡ry
->
À
);

1099 i‡(
ty≥
 =
n‹mÆ_di•œy
 ||Åy≥ =
fú°_m©ch_di•œy
)

1100 
	`vty_out
 (
vty
, " (hit count: %ld,Ñefcount: %ld)",

1101 
≥¡ry
->
hô˙t
,Öíåy->
ªf˙t
);

1103 
	`vty_out
 (
vty
, "%s", 
VTY_NEWLINE
);

1105 i‡(
ty≥
 =
fú°_m©ch_di•œy
)

1106  
CMD_SUCCESS
;

1109  
CMD_SUCCESS
;

1110 
	}
}

1113 
	$vty_˛ór_¥efix_li°
 (
vty
 *vty, 
afi_t
 
afi
, c⁄° *
«me
,

1114 c⁄° *
¥efix
)

1116 
¥efix_ma°î
 *
ma°î
;

1117 
¥efix_li°
 *
∂i°
;

1118 
¥efix_li°_íåy
 *
≥¡ry
;

1119 
ªt
;

1120 
¥efix
 
p
;

1122 
ma°î
 = 
	`¥efix_ma°î_gë
 (
afi
);

1123 i‡(
ma°î
 =
NULL
)

1124  
CMD_WARNING
;

1126 i‡(
«me
 =
NULL
 && 
¥efix
 == NULL)

1128 
∂i°
 = 
ma°î
->
num
.
hód
;Öli°;Öli° =Öli°->
√xt
)

1129 
≥¡ry
 = 
∂i°
->
hód
;Öíåy;Öíåy =Öíåy->
√xt
)

1130 
≥¡ry
->
hô˙t
 = 0;

1132 
∂i°
 = 
ma°î
->
°r
.
hód
;Öli°;Öli° =Öli°->
√xt
)

1133 
≥¡ry
 = 
∂i°
->
hód
;Öíåy;Öíåy =Öíåy->
√xt
)

1134 
≥¡ry
->
hô˙t
 = 0;

1138 
∂i°
 = 
	`¥efix_li°_lookup
 (
afi
, 
«me
);

1139 i‡(! 
∂i°
)

1141 
	`vty_out
 (
vty
, "%% C™'àföd s≥cifõdÖªfix-li°%s", 
VTY_NEWLINE
);

1142  
CMD_WARNING
;

1145 i‡(
¥efix
)

1147 
ªt
 = 
	`°r2¥efix
 (
¥efix
, &
p
);

1148 i‡(
ªt
 <= 0)

1150 
	`vty_out
 (
vty
, "%%Öªfix i†mÆf‹med%s", 
VTY_NEWLINE
);

1151  
CMD_WARNING
;

1155 
≥¡ry
 = 
∂i°
->
hód
;Öíåy;Öíåy =Öíåy->
√xt
)

1157 i‡(
¥efix
)

1159 i‡(
	`¥efix_m©ch
 (&
≥¡ry
->
¥efix
, &
p
))

1160 
≥¡ry
->
hô˙t
 = 0;

1163 
≥¡ry
->
hô˙t
 = 0;

1166  
CMD_SUCCESS
;

1167 
	}
}

1169 
DEFUN
 (
ù_¥efix_li°
,

1170 
ù_¥efix_li°_cmd
,

1172 
IP_STR


1173 
PREFIX_LIST_STR


1180  
vty_¥efix_li°_ö°Æl
 (
vty
, 
AFI_IP
, 
¨gv
[0], 
NULL
,

1181 
¨gv
[1],árgv[2], 
NULL
, NULL);

1184 
DEFUN
 (
ù_¥efix_li°_ge
,

1185 
ù_¥efix_li°_ge_cmd
,

1187 
IP_STR


1188 
PREFIX_LIST_STR


1196  
vty_¥efix_li°_ö°Æl
 (
vty
, 
AFI_IP
, 
¨gv
[0], 
NULL
,árgv[1],

1197 
¨gv
[2],árgv[3], 
NULL
);

1200 
DEFUN
 (
ù_¥efix_li°_ge_À
,

1201 
ù_¥efix_li°_ge_À_cmd
,

1203 
IP_STR


1204 
PREFIX_LIST_STR


1214  
vty_¥efix_li°_ö°Æl
 (
vty
, 
AFI_IP
, 
¨gv
[0], 
NULL
,árgv[1],

1215 
¨gv
[2],árgv[3],árgv[4]);

1218 
DEFUN
 (
ù_¥efix_li°_À
,

1219 
ù_¥efix_li°_À_cmd
,

1221 
IP_STR


1222 
PREFIX_LIST_STR


1230  
vty_¥efix_li°_ö°Æl
 (
vty
, 
AFI_IP
, 
¨gv
[0], 
NULL
,árgv[1],

1231 
¨gv
[2], 
NULL
,árgv[3]);

1234 
DEFUN
 (
ù_¥efix_li°_À_ge
,

1235 
ù_¥efix_li°_À_ge_cmd
,

1237 
IP_STR


1238 
PREFIX_LIST_STR


1248  
vty_¥efix_li°_ö°Æl
 (
vty
, 
AFI_IP
, 
¨gv
[0], 
NULL
,árgv[1],

1249 
¨gv
[2],árgv[4],árgv[3]);

1252 
DEFUN
 (
ù_¥efix_li°_£q
,

1253 
ù_¥efix_li°_£q_cmd
,

1255 
IP_STR


1256 
PREFIX_LIST_STR


1265  
vty_¥efix_li°_ö°Æl
 (
vty
, 
AFI_IP
, 
¨gv
[0],árgv[1],árgv[2],

1266 
¨gv
[3], 
NULL
, NULL);

1269 
DEFUN
 (
ù_¥efix_li°_£q_ge
,

1270 
ù_¥efix_li°_£q_ge_cmd
,

1272 
IP_STR


1273 
PREFIX_LIST_STR


1283  
vty_¥efix_li°_ö°Æl
 (
vty
, 
AFI_IP
, 
¨gv
[0],árgv[1],árgv[2],

1284 
¨gv
[3],árgv[4], 
NULL
);

1287 
DEFUN
 (
ù_¥efix_li°_£q_ge_À
,

1288 
ù_¥efix_li°_£q_ge_À_cmd
,

1290 
IP_STR


1291 
PREFIX_LIST_STR


1303  
vty_¥efix_li°_ö°Æl
 (
vty
, 
AFI_IP
, 
¨gv
[0],árgv[1],árgv[2],

1304 
¨gv
[3],árgv[4],árgv[5]);

1307 
DEFUN
 (
ù_¥efix_li°_£q_À
,

1308 
ù_¥efix_li°_£q_À_cmd
,

1310 
IP_STR


1311 
PREFIX_LIST_STR


1321  
vty_¥efix_li°_ö°Æl
 (
vty
, 
AFI_IP
, 
¨gv
[0],árgv[1],árgv[2],

1322 
¨gv
[3], 
NULL
,árgv[4]);

1325 
DEFUN
 (
ù_¥efix_li°_£q_À_ge
,

1326 
ù_¥efix_li°_£q_À_ge_cmd
,

1328 
IP_STR


1329 
PREFIX_LIST_STR


1341  
vty_¥efix_li°_ö°Æl
 (
vty
, 
AFI_IP
, 
¨gv
[0],árgv[1],árgv[2],

1342 
¨gv
[3],árgv[5],árgv[4]);

1345 
DEFUN
 (
no_ù_¥efix_li°
,

1346 
no_ù_¥efix_li°_cmd
,

1348 
NO_STR


1349 
IP_STR


1350 
PREFIX_LIST_STR


1353  
vty_¥efix_li°_unö°Æl
 (
vty
, 
AFI_IP
, 
¨gv
[0], 
NULL
, NULL,

1354 
NULL
, NULL, NULL);

1357 
DEFUN
 (
no_ù_¥efix_li°_¥efix
,

1358 
no_ù_¥efix_li°_¥efix_cmd
,

1360 
NO_STR


1361 
IP_STR


1362 
PREFIX_LIST_STR


1369  
vty_¥efix_li°_unö°Æl
 (
vty
, 
AFI_IP
, 
¨gv
[0], 
NULL
,árgv[1],

1370 
¨gv
[2], 
NULL
, NULL);

1373 
DEFUN
 (
no_ù_¥efix_li°_ge
,

1374 
no_ù_¥efix_li°_ge_cmd
,

1376 
NO_STR


1377 
IP_STR


1378 
PREFIX_LIST_STR


1386  
vty_¥efix_li°_unö°Æl
 (
vty
, 
AFI_IP
, 
¨gv
[0], 
NULL
,árgv[1],

1387 
¨gv
[2],árgv[3], 
NULL
);

1390 
DEFUN
 (
no_ù_¥efix_li°_ge_À
,

1391 
no_ù_¥efix_li°_ge_À_cmd
,

1393 
NO_STR


1394 
IP_STR


1395 
PREFIX_LIST_STR


1405  
vty_¥efix_li°_unö°Æl
 (
vty
, 
AFI_IP
, 
¨gv
[0], 
NULL
,árgv[1],

1406 
¨gv
[2],árgv[3],árgv[4]);

1409 
DEFUN
 (
no_ù_¥efix_li°_À
,

1410 
no_ù_¥efix_li°_À_cmd
,

1412 
NO_STR


1413 
IP_STR


1414 
PREFIX_LIST_STR


1422  
vty_¥efix_li°_unö°Æl
 (
vty
, 
AFI_IP
, 
¨gv
[0], 
NULL
,árgv[1],

1423 
¨gv
[2], 
NULL
,árgv[3]);

1426 
DEFUN
 (
no_ù_¥efix_li°_À_ge
,

1427 
no_ù_¥efix_li°_À_ge_cmd
,

1429 
NO_STR


1430 
IP_STR


1431 
PREFIX_LIST_STR


1441  
vty_¥efix_li°_unö°Æl
 (
vty
, 
AFI_IP
, 
¨gv
[0], 
NULL
,árgv[1],

1442 
¨gv
[2],árgv[4],árgv[3]);

1445 
DEFUN
 (
no_ù_¥efix_li°_£q
,

1446 
no_ù_¥efix_li°_£q_cmd
,

1448 
NO_STR


1449 
IP_STR


1450 
PREFIX_LIST_STR


1459  
vty_¥efix_li°_unö°Æl
 (
vty
, 
AFI_IP
, 
¨gv
[0],árgv[1],árgv[2],

1460 
¨gv
[3], 
NULL
, NULL);

1463 
DEFUN
 (
no_ù_¥efix_li°_£q_ge
,

1464 
no_ù_¥efix_li°_£q_ge_cmd
,

1466 
NO_STR


1467 
IP_STR


1468 
PREFIX_LIST_STR


1478  
vty_¥efix_li°_unö°Æl
 (
vty
, 
AFI_IP
, 
¨gv
[0],árgv[1],árgv[2],

1479 
¨gv
[3],árgv[4], 
NULL
);

1482 
DEFUN
 (
no_ù_¥efix_li°_£q_ge_À
,

1483 
no_ù_¥efix_li°_£q_ge_À_cmd
,

1485 
NO_STR


1486 
IP_STR


1487 
PREFIX_LIST_STR


1499  
vty_¥efix_li°_unö°Æl
 (
vty
, 
AFI_IP
, 
¨gv
[0],árgv[1],árgv[2],

1500 
¨gv
[3],árgv[4],árgv[5]);

1503 
DEFUN
 (
no_ù_¥efix_li°_£q_À
,

1504 
no_ù_¥efix_li°_£q_À_cmd
,

1506 
NO_STR


1507 
IP_STR


1508 
PREFIX_LIST_STR


1518  
vty_¥efix_li°_unö°Æl
 (
vty
, 
AFI_IP
, 
¨gv
[0],árgv[1],árgv[2],

1519 
¨gv
[3], 
NULL
,árgv[4]);

1522 
DEFUN
 (
no_ù_¥efix_li°_£q_À_ge
,

1523 
no_ù_¥efix_li°_£q_À_ge_cmd
,

1525 
NO_STR


1526 
IP_STR


1527 
PREFIX_LIST_STR


1539  
vty_¥efix_li°_unö°Æl
 (
vty
, 
AFI_IP
, 
¨gv
[0],árgv[1],árgv[2],

1540 
¨gv
[3],árgv[5],árgv[4]);

1543 
DEFUN
 (
ù_¥efix_li°_£quí˚_numbî
,

1544 
ù_¥efix_li°_£quí˚_numbî_cmd
,

1546 
IP_STR


1547 
PREFIX_LIST_STR


1550 
	g¥efix_ma°î_ùv4
.
	g£qnum
 = 1;

1551  
	gCMD_SUCCESS
;

1554 
DEFUN
 (
no_ù_¥efix_li°_£quí˚_numbî
,

1555 
no_ù_¥efix_li°_£quí˚_numbî_cmd
,

1557 
NO_STR


1558 
IP_STR


1559 
PREFIX_LIST_STR


1562 
	g¥efix_ma°î_ùv4
.
	g£qnum
 = 0;

1563  
	gCMD_SUCCESS
;

1566 
DEFUN
 (
ù_¥efix_li°_des¸ùti⁄
,

1567 
ù_¥efix_li°_des¸ùti⁄_cmd
,

1569 
IP_STR


1570 
PREFIX_LIST_STR


1575 
¥efix_li°
 *
	g∂i°
;

1577 
	g∂i°
 = 
¥efix_li°_gë
 (
AFI_IP
, 
¨gv
[0]);

1579 i‡(
	g∂i°
->
	gdesc
)

1581 
XFREE
 (
MTYPE_TMP
, 
∂i°
->
desc
);

1582 
	g∂i°
->
	gdesc
 = 
NULL
;

1584 
	g∂i°
->
	gdesc
 = 
¨gv_c⁄ˇt
(
¨gv
, 
¨gc
, 1);

1586  
	gCMD_SUCCESS
;

1589 
DEFUN
 (
no_ù_¥efix_li°_des¸ùti⁄
,

1590 
no_ù_¥efix_li°_des¸ùti⁄_cmd
,

1592 
NO_STR


1593 
IP_STR


1594 
PREFIX_LIST_STR


1598  
vty_¥efix_li°_desc_un£t
 (
vty
, 
AFI_IP
, 
¨gv
[0]);

1601 
ALIAS
 (
no_ù_¥efix_li°_des¸ùti⁄
,

1602 
no_ù_¥efix_li°_des¸ùti⁄_¨g_cmd
,

1604 
NO_STR


1605 
IP_STR


1606 
PREFIX_LIST_STR


1611 
DEFUN
 (
show_ù_¥efix_li°
,

1612 
show_ù_¥efix_li°_cmd
,

1614 
SHOW_STR


1615 
IP_STR


1616 
PREFIX_LIST_STR
)

1618  
vty_show_¥efix_li°
 (
vty
, 
AFI_IP
, 
NULL
, NULL, 
n‹mÆ_di•œy
);

1621 
DEFUN
 (
show_ù_¥efix_li°_«me
,

1622 
show_ù_¥efix_li°_«me_cmd
,

1624 
SHOW_STR


1625 
IP_STR


1626 
PREFIX_LIST_STR


1629  
vty_show_¥efix_li°
 (
vty
, 
AFI_IP
, 
¨gv
[0], 
NULL
, 
n‹mÆ_di•œy
);

1632 
DEFUN
 (
show_ù_¥efix_li°_«me_£q
,

1633 
show_ù_¥efix_li°_«me_£q_cmd
,

1635 
SHOW_STR


1636 
IP_STR


1637 
PREFIX_LIST_STR


1642  
vty_show_¥efix_li°
 (
vty
, 
AFI_IP
, 
¨gv
[0],árgv[1], 
£quítül_di•œy
);

1645 
DEFUN
 (
show_ù_¥efix_li°_¥efix
,

1646 
show_ù_¥efix_li°_¥efix_cmd
,

1648 
SHOW_STR


1649 
IP_STR


1650 
PREFIX_LIST_STR


1654  
vty_show_¥efix_li°_¥efix
 (
vty
, 
AFI_IP
, 
¨gv
[0],árgv[1], 
n‹mÆ_di•œy
);

1657 
DEFUN
 (
show_ù_¥efix_li°_¥efix_l⁄gî
,

1658 
show_ù_¥efix_li°_¥efix_l⁄gî_cmd
,

1660 
SHOW_STR


1661 
IP_STR


1662 
PREFIX_LIST_STR


1667  
vty_show_¥efix_li°_¥efix
 (
vty
, 
AFI_IP
, 
¨gv
[0],árgv[1], 
l⁄gî_di•œy
);

1670 
DEFUN
 (
show_ù_¥efix_li°_¥efix_fú°_m©ch
,

1671 
show_ù_¥efix_li°_¥efix_fú°_m©ch_cmd
,

1673 
SHOW_STR


1674 
IP_STR


1675 
PREFIX_LIST_STR


1680  
vty_show_¥efix_li°_¥efix
 (
vty
, 
AFI_IP
, 
¨gv
[0],árgv[1], 
fú°_m©ch_di•œy
);

1683 
DEFUN
 (
show_ù_¥efix_li°_summ¨y
,

1684 
show_ù_¥efix_li°_summ¨y_cmd
,

1686 
SHOW_STR


1687 
IP_STR


1688 
PREFIX_LIST_STR


1691  
vty_show_¥efix_li°
 (
vty
, 
AFI_IP
, 
NULL
, NULL, 
summ¨y_di•œy
);

1694 
DEFUN
 (
show_ù_¥efix_li°_summ¨y_«me
,

1695 
show_ù_¥efix_li°_summ¨y_«me_cmd
,

1697 
SHOW_STR


1698 
IP_STR


1699 
PREFIX_LIST_STR


1703  
vty_show_¥efix_li°
 (
vty
, 
AFI_IP
, 
¨gv
[0], 
NULL
, 
summ¨y_di•œy
);

1707 
DEFUN
 (
show_ù_¥efix_li°_dëaû
,

1708 
show_ù_¥efix_li°_dëaû_cmd
,

1710 
SHOW_STR


1711 
IP_STR


1712 
PREFIX_LIST_STR


1715  
vty_show_¥efix_li°
 (
vty
, 
AFI_IP
, 
NULL
, NULL, 
dëaû_di•œy
);

1718 
DEFUN
 (
show_ù_¥efix_li°_dëaû_«me
,

1719 
show_ù_¥efix_li°_dëaû_«me_cmd
,

1721 
SHOW_STR


1722 
IP_STR


1723 
PREFIX_LIST_STR


1727  
vty_show_¥efix_li°
 (
vty
, 
AFI_IP
, 
¨gv
[0], 
NULL
, 
dëaû_di•œy
);

1730 
DEFUN
 (
˛ór_ù_¥efix_li°
,

1731 
˛ór_ù_¥efix_li°_cmd
,

1733 
CLEAR_STR


1734 
IP_STR


1735 
PREFIX_LIST_STR
)

1737  
vty_˛ór_¥efix_li°
 (
vty
, 
AFI_IP
, 
NULL
, NULL);

1740 
DEFUN
 (
˛ór_ù_¥efix_li°_«me
,

1741 
˛ór_ù_¥efix_li°_«me_cmd
,

1743 
CLEAR_STR


1744 
IP_STR


1745 
PREFIX_LIST_STR


1748  
vty_˛ór_¥efix_li°
 (
vty
, 
AFI_IP
, 
¨gv
[0], 
NULL
);

1751 
DEFUN
 (
˛ór_ù_¥efix_li°_«me_¥efix
,

1752 
˛ór_ù_¥efix_li°_«me_¥efix_cmd
,

1754 
CLEAR_STR


1755 
IP_STR


1756 
PREFIX_LIST_STR


1760  
vty_˛ór_¥efix_li°
 (
vty
, 
AFI_IP
, 
¨gv
[0],árgv[1]);

1763 #ifde‡
HAVE_IPV6


1764 
DEFUN
 (
ùv6_¥efix_li°
,

1765 
ùv6_¥efix_li°_cmd
,

1767 
IPV6_STR


1768 
PREFIX_LIST_STR


1775  
vty_¥efix_li°_ö°Æl
 (
vty
, 
AFI_IP6
, 
¨gv
[0], 
NULL
,

1776 
¨gv
[1],árgv[2], 
NULL
, NULL);

1779 
DEFUN
 (
ùv6_¥efix_li°_ge
,

1780 
ùv6_¥efix_li°_ge_cmd
,

1782 
IPV6_STR


1783 
PREFIX_LIST_STR


1791  
vty_¥efix_li°_ö°Æl
 (
vty
, 
AFI_IP6
, 
¨gv
[0], 
NULL
,árgv[1],

1792 
¨gv
[2],árgv[3], 
NULL
);

1795 
DEFUN
 (
ùv6_¥efix_li°_ge_À
,

1796 
ùv6_¥efix_li°_ge_À_cmd
,

1798 
IPV6_STR


1799 
PREFIX_LIST_STR


1810  
vty_¥efix_li°_ö°Æl
 (
vty
, 
AFI_IP6
, 
¨gv
[0], 
NULL
,árgv[1],

1811 
¨gv
[2],árgv[3],árgv[4]);

1814 
DEFUN
 (
ùv6_¥efix_li°_À
,

1815 
ùv6_¥efix_li°_À_cmd
,

1817 
IPV6_STR


1818 
PREFIX_LIST_STR


1826  
vty_¥efix_li°_ö°Æl
 (
vty
, 
AFI_IP6
, 
¨gv
[0], 
NULL
,árgv[1],

1827 
¨gv
[2], 
NULL
,árgv[3]);

1830 
DEFUN
 (
ùv6_¥efix_li°_À_ge
,

1831 
ùv6_¥efix_li°_À_ge_cmd
,

1833 
IPV6_STR


1834 
PREFIX_LIST_STR


1844  
vty_¥efix_li°_ö°Æl
 (
vty
, 
AFI_IP6
, 
¨gv
[0], 
NULL
,árgv[1],

1845 
¨gv
[2],árgv[4],árgv[3]);

1848 
DEFUN
 (
ùv6_¥efix_li°_£q
,

1849 
ùv6_¥efix_li°_£q_cmd
,

1851 
IPV6_STR


1852 
PREFIX_LIST_STR


1861  
vty_¥efix_li°_ö°Æl
 (
vty
, 
AFI_IP6
, 
¨gv
[0],árgv[1],árgv[2],

1862 
¨gv
[3], 
NULL
, NULL);

1865 
DEFUN
 (
ùv6_¥efix_li°_£q_ge
,

1866 
ùv6_¥efix_li°_£q_ge_cmd
,

1868 
IPV6_STR


1869 
PREFIX_LIST_STR


1879  
vty_¥efix_li°_ö°Æl
 (
vty
, 
AFI_IP6
, 
¨gv
[0],árgv[1],árgv[2],

1880 
¨gv
[3],árgv[4], 
NULL
);

1883 
DEFUN
 (
ùv6_¥efix_li°_£q_ge_À
,

1884 
ùv6_¥efix_li°_£q_ge_À_cmd
,

1886 
IPV6_STR


1887 
PREFIX_LIST_STR


1899  
vty_¥efix_li°_ö°Æl
 (
vty
, 
AFI_IP6
, 
¨gv
[0],árgv[1],árgv[2],

1900 
¨gv
[3],árgv[4],árgv[5]);

1903 
DEFUN
 (
ùv6_¥efix_li°_£q_À
,

1904 
ùv6_¥efix_li°_£q_À_cmd
,

1906 
IPV6_STR


1907 
PREFIX_LIST_STR


1917  
vty_¥efix_li°_ö°Æl
 (
vty
, 
AFI_IP6
, 
¨gv
[0],árgv[1],árgv[2],

1918 
¨gv
[3], 
NULL
,árgv[4]);

1921 
DEFUN
 (
ùv6_¥efix_li°_£q_À_ge
,

1922 
ùv6_¥efix_li°_£q_À_ge_cmd
,

1924 
IPV6_STR


1925 
PREFIX_LIST_STR


1937  
vty_¥efix_li°_ö°Æl
 (
vty
, 
AFI_IP6
, 
¨gv
[0],árgv[1],árgv[2],

1938 
¨gv
[3],árgv[5],árgv[4]);

1941 
DEFUN
 (
no_ùv6_¥efix_li°
,

1942 
no_ùv6_¥efix_li°_cmd
,

1944 
NO_STR


1945 
IPV6_STR


1946 
PREFIX_LIST_STR


1949  
vty_¥efix_li°_unö°Æl
 (
vty
, 
AFI_IP6
, 
¨gv
[0], 
NULL
, NULL,

1950 
NULL
, NULL, NULL);

1953 
DEFUN
 (
no_ùv6_¥efix_li°_¥efix
,

1954 
no_ùv6_¥efix_li°_¥efix_cmd
,

1956 
NO_STR


1957 
IPV6_STR


1958 
PREFIX_LIST_STR


1965  
vty_¥efix_li°_unö°Æl
 (
vty
, 
AFI_IP6
, 
¨gv
[0], 
NULL
,árgv[1],

1966 
¨gv
[2], 
NULL
, NULL);

1969 
DEFUN
 (
no_ùv6_¥efix_li°_ge
,

1970 
no_ùv6_¥efix_li°_ge_cmd
,

1972 
NO_STR


1973 
IPV6_STR


1974 
PREFIX_LIST_STR


1982  
vty_¥efix_li°_unö°Æl
 (
vty
, 
AFI_IP6
, 
¨gv
[0], 
NULL
,árgv[1],

1983 
¨gv
[2],árgv[3], 
NULL
);

1986 
DEFUN
 (
no_ùv6_¥efix_li°_ge_À
,

1987 
no_ùv6_¥efix_li°_ge_À_cmd
,

1989 
NO_STR


1990 
IPV6_STR


1991 
PREFIX_LIST_STR


2001  
vty_¥efix_li°_unö°Æl
 (
vty
, 
AFI_IP6
, 
¨gv
[0], 
NULL
,árgv[1],

2002 
¨gv
[2],árgv[3],árgv[4]);

2005 
DEFUN
 (
no_ùv6_¥efix_li°_À
,

2006 
no_ùv6_¥efix_li°_À_cmd
,

2008 
NO_STR


2009 
IPV6_STR


2010 
PREFIX_LIST_STR


2018  
vty_¥efix_li°_unö°Æl
 (
vty
, 
AFI_IP6
, 
¨gv
[0], 
NULL
,árgv[1],

2019 
¨gv
[2], 
NULL
,árgv[3]);

2022 
DEFUN
 (
no_ùv6_¥efix_li°_À_ge
,

2023 
no_ùv6_¥efix_li°_À_ge_cmd
,

2025 
NO_STR


2026 
IPV6_STR


2027 
PREFIX_LIST_STR


2037  
vty_¥efix_li°_unö°Æl
 (
vty
, 
AFI_IP6
, 
¨gv
[0], 
NULL
,árgv[1],

2038 
¨gv
[2],árgv[4],árgv[3]);

2041 
DEFUN
 (
no_ùv6_¥efix_li°_£q
,

2042 
no_ùv6_¥efix_li°_£q_cmd
,

2044 
NO_STR


2045 
IPV6_STR


2046 
PREFIX_LIST_STR


2055  
vty_¥efix_li°_unö°Æl
 (
vty
, 
AFI_IP6
, 
¨gv
[0],árgv[1],árgv[2],

2056 
¨gv
[3], 
NULL
, NULL);

2059 
DEFUN
 (
no_ùv6_¥efix_li°_£q_ge
,

2060 
no_ùv6_¥efix_li°_£q_ge_cmd
,

2062 
NO_STR


2063 
IPV6_STR


2064 
PREFIX_LIST_STR


2074  
vty_¥efix_li°_unö°Æl
 (
vty
, 
AFI_IP6
, 
¨gv
[0],árgv[1],árgv[2],

2075 
¨gv
[3],árgv[4], 
NULL
);

2078 
DEFUN
 (
no_ùv6_¥efix_li°_£q_ge_À
,

2079 
no_ùv6_¥efix_li°_£q_ge_À_cmd
,

2081 
NO_STR


2082 
IPV6_STR


2083 
PREFIX_LIST_STR


2095  
vty_¥efix_li°_unö°Æl
 (
vty
, 
AFI_IP6
, 
¨gv
[0],árgv[1],árgv[2],

2096 
¨gv
[3],árgv[4],árgv[5]);

2099 
DEFUN
 (
no_ùv6_¥efix_li°_£q_À
,

2100 
no_ùv6_¥efix_li°_£q_À_cmd
,

2102 
NO_STR


2103 
IPV6_STR


2104 
PREFIX_LIST_STR


2114  
vty_¥efix_li°_unö°Æl
 (
vty
, 
AFI_IP6
, 
¨gv
[0],árgv[1],árgv[2],

2115 
¨gv
[3], 
NULL
,árgv[4]);

2118 
DEFUN
 (
no_ùv6_¥efix_li°_£q_À_ge
,

2119 
no_ùv6_¥efix_li°_£q_À_ge_cmd
,

2121 
NO_STR


2122 
IPV6_STR


2123 
PREFIX_LIST_STR


2135  
vty_¥efix_li°_unö°Æl
 (
vty
, 
AFI_IP6
, 
¨gv
[0],árgv[1],árgv[2],

2136 
¨gv
[3],árgv[5],árgv[4]);

2139 
DEFUN
 (
ùv6_¥efix_li°_£quí˚_numbî
,

2140 
ùv6_¥efix_li°_£quí˚_numbî_cmd
,

2142 
IPV6_STR


2143 
PREFIX_LIST_STR


2146 
	g¥efix_ma°î_ùv6
.
	g£qnum
 = 1;

2147  
	gCMD_SUCCESS
;

2150 
DEFUN
 (
no_ùv6_¥efix_li°_£quí˚_numbî
,

2151 
no_ùv6_¥efix_li°_£quí˚_numbî_cmd
,

2153 
NO_STR


2154 
IPV6_STR


2155 
PREFIX_LIST_STR


2158 
	g¥efix_ma°î_ùv6
.
	g£qnum
 = 0;

2159  
	gCMD_SUCCESS
;

2162 
DEFUN
 (
ùv6_¥efix_li°_des¸ùti⁄
,

2163 
ùv6_¥efix_li°_des¸ùti⁄_cmd
,

2165 
IPV6_STR


2166 
PREFIX_LIST_STR


2171 
¥efix_li°
 *
	g∂i°
;

2173 
	g∂i°
 = 
¥efix_li°_gë
 (
AFI_IP6
, 
¨gv
[0]);

2175 i‡(
	g∂i°
->
	gdesc
)

2177 
XFREE
 (
MTYPE_TMP
, 
∂i°
->
desc
);

2178 
	g∂i°
->
	gdesc
 = 
NULL
;

2180 
	g∂i°
->
	gdesc
 = 
¨gv_c⁄ˇt
(
¨gv
, 
¨gc
, 1);

2182  
	gCMD_SUCCESS
;

2185 
DEFUN
 (
no_ùv6_¥efix_li°_des¸ùti⁄
,

2186 
no_ùv6_¥efix_li°_des¸ùti⁄_cmd
,

2188 
NO_STR


2189 
IPV6_STR


2190 
PREFIX_LIST_STR


2194  
vty_¥efix_li°_desc_un£t
 (
vty
, 
AFI_IP6
, 
¨gv
[0]);

2197 
ALIAS
 (
no_ùv6_¥efix_li°_des¸ùti⁄
,

2198 
no_ùv6_¥efix_li°_des¸ùti⁄_¨g_cmd
,

2200 
NO_STR


2201 
IPV6_STR


2202 
PREFIX_LIST_STR


2207 
DEFUN
 (
show_ùv6_¥efix_li°
,

2208 
show_ùv6_¥efix_li°_cmd
,

2210 
SHOW_STR


2211 
IPV6_STR


2212 
PREFIX_LIST_STR
)

2214  
vty_show_¥efix_li°
 (
vty
, 
AFI_IP6
, 
NULL
, NULL, 
n‹mÆ_di•œy
);

2217 
DEFUN
 (
show_ùv6_¥efix_li°_«me
,

2218 
show_ùv6_¥efix_li°_«me_cmd
,

2220 
SHOW_STR


2221 
IPV6_STR


2222 
PREFIX_LIST_STR


2225  
vty_show_¥efix_li°
 (
vty
, 
AFI_IP6
, 
¨gv
[0], 
NULL
, 
n‹mÆ_di•œy
);

2228 
DEFUN
 (
show_ùv6_¥efix_li°_«me_£q
,

2229 
show_ùv6_¥efix_li°_«me_£q_cmd
,

2231 
SHOW_STR


2232 
IPV6_STR


2233 
PREFIX_LIST_STR


2238  
vty_show_¥efix_li°
 (
vty
, 
AFI_IP6
, 
¨gv
[0],árgv[1], 
£quítül_di•œy
);

2241 
DEFUN
 (
show_ùv6_¥efix_li°_¥efix
,

2242 
show_ùv6_¥efix_li°_¥efix_cmd
,

2244 
SHOW_STR


2245 
IPV6_STR


2246 
PREFIX_LIST_STR


2250  
vty_show_¥efix_li°_¥efix
 (
vty
, 
AFI_IP6
, 
¨gv
[0],árgv[1], 
n‹mÆ_di•œy
);

2253 
DEFUN
 (
show_ùv6_¥efix_li°_¥efix_l⁄gî
,

2254 
show_ùv6_¥efix_li°_¥efix_l⁄gî_cmd
,

2256 
SHOW_STR


2257 
IPV6_STR


2258 
PREFIX_LIST_STR


2263  
vty_show_¥efix_li°_¥efix
 (
vty
, 
AFI_IP6
, 
¨gv
[0],árgv[1], 
l⁄gî_di•œy
);

2266 
DEFUN
 (
show_ùv6_¥efix_li°_¥efix_fú°_m©ch
,

2267 
show_ùv6_¥efix_li°_¥efix_fú°_m©ch_cmd
,

2269 
SHOW_STR


2270 
IPV6_STR


2271 
PREFIX_LIST_STR


2276  
vty_show_¥efix_li°_¥efix
 (
vty
, 
AFI_IP6
, 
¨gv
[0],árgv[1], 
fú°_m©ch_di•œy
);

2279 
DEFUN
 (
show_ùv6_¥efix_li°_summ¨y
,

2280 
show_ùv6_¥efix_li°_summ¨y_cmd
,

2282 
SHOW_STR


2283 
IPV6_STR


2284 
PREFIX_LIST_STR


2287  
vty_show_¥efix_li°
 (
vty
, 
AFI_IP6
, 
NULL
, NULL, 
summ¨y_di•œy
);

2290 
DEFUN
 (
show_ùv6_¥efix_li°_summ¨y_«me
,

2291 
show_ùv6_¥efix_li°_summ¨y_«me_cmd
,

2293 
SHOW_STR


2294 
IPV6_STR


2295 
PREFIX_LIST_STR


2299  
vty_show_¥efix_li°
 (
vty
, 
AFI_IP6
, 
¨gv
[0], 
NULL
, 
summ¨y_di•œy
);

2302 
DEFUN
 (
show_ùv6_¥efix_li°_dëaû
,

2303 
show_ùv6_¥efix_li°_dëaû_cmd
,

2305 
SHOW_STR


2306 
IPV6_STR


2307 
PREFIX_LIST_STR


2310  
vty_show_¥efix_li°
 (
vty
, 
AFI_IP6
, 
NULL
, NULL, 
dëaû_di•œy
);

2313 
DEFUN
 (
show_ùv6_¥efix_li°_dëaû_«me
,

2314 
show_ùv6_¥efix_li°_dëaû_«me_cmd
,

2316 
SHOW_STR


2317 
IPV6_STR


2318 
PREFIX_LIST_STR


2322  
vty_show_¥efix_li°
 (
vty
, 
AFI_IP6
, 
¨gv
[0], 
NULL
, 
dëaû_di•œy
);

2325 
DEFUN
 (
˛ór_ùv6_¥efix_li°
,

2326 
˛ór_ùv6_¥efix_li°_cmd
,

2328 
CLEAR_STR


2329 
IPV6_STR


2330 
PREFIX_LIST_STR
)

2332  
vty_˛ór_¥efix_li°
 (
vty
, 
AFI_IP6
, 
NULL
, NULL);

2335 
DEFUN
 (
˛ór_ùv6_¥efix_li°_«me
,

2336 
˛ór_ùv6_¥efix_li°_«me_cmd
,

2338 
CLEAR_STR


2339 
IPV6_STR


2340 
PREFIX_LIST_STR


2343  
vty_˛ór_¥efix_li°
 (
vty
, 
AFI_IP6
, 
¨gv
[0], 
NULL
);

2346 
DEFUN
 (
˛ór_ùv6_¥efix_li°_«me_¥efix
,

2347 
˛ór_ùv6_¥efix_li°_«me_¥efix_cmd
,

2349 
CLEAR_STR


2350 
IPV6_STR


2351 
PREFIX_LIST_STR


2355  
vty_˛ór_¥efix_li°
 (
vty
, 
AFI_IP6
, 
¨gv
[0],árgv[1]);

2361 
	$c⁄fig_wrôe_¥efix_afi
 (
afi_t
 
afi
, 
vty
 *vty)

2363 
¥efix_li°
 *
∂i°
;

2364 
¥efix_li°_íåy
 *
≥¡ry
;

2365 
¥efix_ma°î
 *
ma°î
;

2366 
wrôe
 = 0;

2368 
ma°î
 = 
	`¥efix_ma°î_gë
 (
afi
);

2369 i‡(
ma°î
 =
NULL
)

2372 i‡(! 
ma°î
->
£qnum
)

2374 
	`vty_out
 (
vty
, "no ip%sÖrefix-list sequence-number%s",

2375 
afi
 =
AFI_IP
 ? "" : "v6", 
VTY_NEWLINE
);

2376 
	`vty_out
 (
vty
, "!%s", 
VTY_NEWLINE
);

2379 
∂i°
 = 
ma°î
->
num
.
hód
;Öli°;Öli° =Öli°->
√xt
)

2381 i‡(
∂i°
->
desc
)

2383 
	`vty_out
 (
vty
, "ip%sÖrefix-list %s description %s%s",

2384 
afi
 =
AFI_IP
 ? "" : "v6",

2385 
∂i°
->
«me
,Öli°->
desc
, 
VTY_NEWLINE
);

2386 
wrôe
++;

2389 
≥¡ry
 = 
∂i°
->
hód
;Öíåy;Öíåy =Öíåy->
√xt
)

2391 
	`vty_out
 (
vty
, "ip%sÖrefix-list %s ",

2392 
afi
 =
AFI_IP
 ? "" : "v6",

2393 
∂i°
->
«me
);

2395 i‡(
ma°î
->
£qnum
)

2396 
	`vty_out
 (
vty
, "£q %d ", 
≥¡ry
->
£q
);

2398 
	`vty_out
 (
vty
, "%†", 
	`¥efix_li°_ty≥_°r
 (
≥¡ry
));

2400 i‡(
≥¡ry
->
™y
)

2401 
	`vty_out
 (
vty
, "any");

2404 
¥efix
 *
p
 = &
≥¡ry
->prefix;

2405 
buf
[
BUFSIZ
];

2407 
	`vty_out
 (
vty
, "%s/%d",

2408 
	`öë_¡›
 (
p
->
Ámûy
, &p->
u
.
¥efix
, 
buf
, 
BUFSIZ
),

2409 
p
->
¥efixÀn
);

2411 i‡(
≥¡ry
->
ge
)

2412 
	`vty_out
 (
vty
, " gê%d", 
≥¡ry
->
ge
);

2413 i‡(
≥¡ry
->
À
)

2414 
	`vty_out
 (
vty
, "Üê%d", 
≥¡ry
->
À
);

2416 
	`vty_out
 (
vty
, "%s", 
VTY_NEWLINE
);

2417 
wrôe
++;

2422 
∂i°
 = 
ma°î
->
°r
.
hód
;Öli°;Öli° =Öli°->
√xt
)

2424 i‡(
∂i°
->
desc
)

2426 
	`vty_out
 (
vty
, "ip%sÖrefix-list %s description %s%s",

2427 
afi
 =
AFI_IP
 ? "" : "v6",

2428 
∂i°
->
«me
,Öli°->
desc
, 
VTY_NEWLINE
);

2429 
wrôe
++;

2432 
≥¡ry
 = 
∂i°
->
hód
;Öíåy;Öíåy =Öíåy->
√xt
)

2434 
	`vty_out
 (
vty
, "ip%sÖrefix-list %s ",

2435 
afi
 =
AFI_IP
 ? "" : "v6",

2436 
∂i°
->
«me
);

2438 i‡(
ma°î
->
£qnum
)

2439 
	`vty_out
 (
vty
, "£q %d ", 
≥¡ry
->
£q
);

2441 
	`vty_out
 (
vty
, "%s", 
	`¥efix_li°_ty≥_°r
 (
≥¡ry
));

2443 i‡(
≥¡ry
->
™y
)

2444 
	`vty_out
 (
vty
, "ány");

2447 
¥efix
 *
p
 = &
≥¡ry
->prefix;

2448 
buf
[
BUFSIZ
];

2450 
	`vty_out
 (
vty
, " %s/%d",

2451 
	`öë_¡›
 (
p
->
Ámûy
, &p->
u
.
¥efix
, 
buf
, 
BUFSIZ
),

2452 
p
->
¥efixÀn
);

2454 i‡(
≥¡ry
->
ge
)

2455 
	`vty_out
 (
vty
, " gê%d", 
≥¡ry
->
ge
);

2456 i‡(
≥¡ry
->
À
)

2457 
	`vty_out
 (
vty
, "Üê%d", 
≥¡ry
->
À
);

2459 
	`vty_out
 (
vty
, "%s", 
VTY_NEWLINE
);

2460 
wrôe
++;

2464  
wrôe
;

2465 
	}
}

2467 
°ªam
 *

2468 
	$¥efix_bgp_‹f_íåy
 (
°ªam
 *
s
, 
¥efix_li°
 *
∂i°
,

2469 
u_ch¨
 
öô_Êag
, u_ch¨ 
≥rmô_Êag
, u_ch¨ 
díy_Êag
)

2471 
¥efix_li°_íåy
 *
≥¡ry
;

2473 i‡(! 
∂i°
)

2474  
s
;

2476 
≥¡ry
 = 
∂i°
->
hód
;Öíåy;Öíåy =Öíåy->
√xt
)

2478 
u_ch¨
 
Êag
 = 
öô_Êag
;

2479 
¥efix
 *
p
 = &
≥¡ry
->prefix;

2481 
Êag
 |(
≥¡ry
->
ty≥
 =
PREFIX_PERMIT
 ?

2482 
≥rmô_Êag
 : 
díy_Êag
);

2483 
	`°ªam_putc
 (
s
, 
Êag
);

2484 
	`°ªam_pué
 (
s
, (
u_öt32_t
)
≥¡ry
->
£q
);

2485 
	`°ªam_putc
 (
s
, (
u_ch¨
)
≥¡ry
->
ge
);

2486 
	`°ªam_putc
 (
s
, (
u_ch¨
)
≥¡ry
->
À
);

2487 
	`°ªam_put_¥efix
 (
s
, 
p
);

2490  
s
;

2491 
	}
}

2494 
	$¥efix_bgp_‹f_£t
 (*
«me
, 
afi_t
 
afi
, 
‹f_¥efix
 *
‹Â
,

2495 
≥rmô
, 
£t
)

2497 
¥efix_li°
 *
∂i°
;

2498 
¥efix_li°_íåy
 *
≥¡ry
;

2501 i‡(
‹Â
->
ge
 && orÂ->gê<‹Â->
p
.
¥efixÀn
)

2502  
CMD_WARNING
;

2503 i‡(
‹Â
->
À
 && orÂ->À <‹Â->
p
.
¥efixÀn
)

2504  
CMD_WARNING
;

2505 i‡(
‹Â
->
À
 && orÂ->
ge
 > orfp->le)

2506  
CMD_WARNING
;

2508 i‡(
‹Â
->
ge
 && orÂ->
À
 =(
afi
 =
AFI_IP
 ? 32 : 128))

2509 
‹Â
->
À
 = 0;

2511 
∂i°
 = 
	`¥efix_li°_gë
 (
AFI_ORF_PREFIX
, 
«me
);

2512 i‡(! 
∂i°
)

2513  
CMD_WARNING
;

2515 i‡(
£t
)

2517 
≥¡ry
 = 
	`¥efix_li°_íåy_make
 (&
‹Â
->
p
,

2518 (
≥rmô
 ? 
PREFIX_PERMIT
 : 
PREFIX_DENY
),

2519 
‹Â
->
£q
, orÂ->
À
, orÂ->
ge
, 0);

2521 i‡(
	`¥efix_íåy_dup_check
 (
∂i°
, 
≥¡ry
))

2523 
	`¥efix_li°_íåy_‰ì
 (
≥¡ry
);

2524  
CMD_WARNING
;

2527 
	`¥efix_li°_íåy_add
 (
∂i°
, 
≥¡ry
);

2531 
≥¡ry
 = 
	`¥efix_li°_íåy_lookup
 (
∂i°
, &
‹Â
->
p
,

2532 (
≥rmô
 ? 
PREFIX_PERMIT
 : 
PREFIX_DENY
),

2533 
‹Â
->
£q
, orÂ->
À
, orÂ->
ge
);

2535 i‡(! 
≥¡ry
)

2536  
CMD_WARNING
;

2538 
	`¥efix_li°_íåy_dñëe
 (
∂i°
, 
≥¡ry
, 1);

2541  
CMD_SUCCESS
;

2542 
	}
}

2545 
	$¥efix_bgp_‹f_ªmove_Æl
 (*
«me
)

2547 
¥efix_li°
 *
∂i°
;

2549 
∂i°
 = 
	`¥efix_li°_lookup
 (
AFI_ORF_PREFIX
, 
«me
);

2550 i‡(
∂i°
)

2551 
	`¥efix_li°_dñëe
 (
∂i°
);

2552 
	}
}

2556 
	$¥efix_bgp_show_¥efix_li°
 (
vty
 *vty, 
afi_t
 
afi
, *
«me
)

2558 
¥efix_li°
 *
∂i°
;

2559 
¥efix_li°_íåy
 *
≥¡ry
;

2561 
∂i°
 = 
	`¥efix_li°_lookup
 (
AFI_ORF_PREFIX
, 
«me
);

2562 i‡(! 
∂i°
)

2565 i‡(! 
vty
)

2566  
∂i°
->
cou¡
;

2568 
	`vty_out
 (
vty
, "ip%sÖrefix-list %s: %dÉntries%s",

2569 
afi
 =
AFI_IP
 ? "" : "v6",

2570 
∂i°
->
«me
,Öli°->
cou¡
, 
VTY_NEWLINE
);

2572 
≥¡ry
 = 
∂i°
->
hód
;Öíåy;Öíåy =Öíåy->
√xt
)

2574 
¥efix
 *
p
 = &
≥¡ry
->prefix;

2575 
buf
[
BUFSIZ
];

2577 
	`vty_out
 (
vty
, " seq %d %†%s/%d", 
≥¡ry
->
£q
,

2578 
	`¥efix_li°_ty≥_°r
 (
≥¡ry
),

2579 
	`öë_¡›
 (
p
->
Ámûy
, &p->
u
.
¥efix
, 
buf
, 
BUFSIZ
),

2580 
p
->
¥efixÀn
);

2582 i‡(
≥¡ry
->
ge
)

2583 
	`vty_out
 (
vty
, " gê%d", 
≥¡ry
->
ge
);

2584 i‡(
≥¡ry
->
À
)

2585 
	`vty_out
 (
vty
, "Üê%d", 
≥¡ry
->
À
);

2587 
	`vty_out
 (
vty
, "%s", 
VTY_NEWLINE
);

2589  
∂i°
->
cou¡
;

2590 
	}
}

2593 
	$¥efix_li°_ª£t_‹f
 ()

2595 
¥efix_li°
 *
∂i°
;

2596 
¥efix_li°
 *
√xt
;

2597 
¥efix_ma°î
 *
ma°î
;

2599 
ma°î
 = 
	`¥efix_ma°î_gë
 (
AFI_ORF_PREFIX
);

2600 i‡(
ma°î
 =
NULL
)

2603 
∂i°
 = 
ma°î
->
num
.
hód
;Öli°;Öli° = 
√xt
)

2605 
√xt
 = 
∂i°
->next;

2606 
	`¥efix_li°_dñëe
 (
∂i°
);

2608 
∂i°
 = 
ma°î
->
°r
.
hód
;Öli°;Öli° = 
√xt
)

2610 
√xt
 = 
∂i°
->next;

2611 
	`¥efix_li°_dñëe
 (
∂i°
);

2614 
	`as£π
 (
ma°î
->
num
.
hód
 =
NULL
);

2615 
	`as£π
 (
ma°î
->
num
.
èû
 =
NULL
);

2617 
	`as£π
 (
ma°î
->
°r
.
hód
 =
NULL
);

2618 
	`as£π
 (
ma°î
->
°r
.
èû
 =
NULL
);

2620 
ma°î
->
£qnum
 = 1;

2621 
ma°î
->
ª˚¡
 = 
NULL
;

2622 
	}
}

2626 
cmd_node
 
	g¥efix_node
 =

2628 
PREFIX_NODE
,

2634 
	$c⁄fig_wrôe_¥efix_ùv4
 (
vty
 *vty)

2636  
	`c⁄fig_wrôe_¥efix_afi
 (
AFI_IP
, 
vty
);

2637 
	}
}

2640 
	$¥efix_li°_ª£t_ùv4
 ()

2642 
¥efix_li°
 *
∂i°
;

2643 
¥efix_li°
 *
√xt
;

2644 
¥efix_ma°î
 *
ma°î
;

2646 
ma°î
 = 
	`¥efix_ma°î_gë
 (
AFI_IP
);

2647 i‡(
ma°î
 =
NULL
)

2650 
∂i°
 = 
ma°î
->
num
.
hód
;Öli°;Öli° = 
√xt
)

2652 
√xt
 = 
∂i°
->next;

2653 
	`¥efix_li°_dñëe
 (
∂i°
);

2655 
∂i°
 = 
ma°î
->
°r
.
hód
;Öli°;Öli° = 
√xt
)

2657 
√xt
 = 
∂i°
->next;

2658 
	`¥efix_li°_dñëe
 (
∂i°
);

2661 
	`as£π
 (
ma°î
->
num
.
hód
 =
NULL
);

2662 
	`as£π
 (
ma°î
->
num
.
èû
 =
NULL
);

2664 
	`as£π
 (
ma°î
->
°r
.
hód
 =
NULL
);

2665 
	`as£π
 (
ma°î
->
°r
.
èû
 =
NULL
);

2667 
ma°î
->
£qnum
 = 1;

2668 
ma°î
->
ª˚¡
 = 
NULL
;

2669 
	}
}

2672 
	$¥efix_li°_öô_ùv4
 ()

2674 
	`ö°Æl_node
 (&
¥efix_node
, 
c⁄fig_wrôe_¥efix_ùv4
);

2676 
	`ö°Æl_ñemít
 (
CONFIG_NODE
, &
ù_¥efix_li°_cmd
);

2677 
	`ö°Æl_ñemít
 (
CONFIG_NODE
, &
ù_¥efix_li°_ge_cmd
);

2678 
	`ö°Æl_ñemít
 (
CONFIG_NODE
, &
ù_¥efix_li°_ge_À_cmd
);

2679 
	`ö°Æl_ñemít
 (
CONFIG_NODE
, &
ù_¥efix_li°_À_cmd
);

2680 
	`ö°Æl_ñemít
 (
CONFIG_NODE
, &
ù_¥efix_li°_À_ge_cmd
);

2681 
	`ö°Æl_ñemít
 (
CONFIG_NODE
, &
ù_¥efix_li°_£q_cmd
);

2682 
	`ö°Æl_ñemít
 (
CONFIG_NODE
, &
ù_¥efix_li°_£q_ge_cmd
);

2683 
	`ö°Æl_ñemít
 (
CONFIG_NODE
, &
ù_¥efix_li°_£q_ge_À_cmd
);

2684 
	`ö°Æl_ñemít
 (
CONFIG_NODE
, &
ù_¥efix_li°_£q_À_cmd
);

2685 
	`ö°Æl_ñemít
 (
CONFIG_NODE
, &
ù_¥efix_li°_£q_À_ge_cmd
);

2687 
	`ö°Æl_ñemít
 (
CONFIG_NODE
, &
no_ù_¥efix_li°_cmd
);

2688 
	`ö°Æl_ñemít
 (
CONFIG_NODE
, &
no_ù_¥efix_li°_¥efix_cmd
);

2689 
	`ö°Æl_ñemít
 (
CONFIG_NODE
, &
no_ù_¥efix_li°_ge_cmd
);

2690 
	`ö°Æl_ñemít
 (
CONFIG_NODE
, &
no_ù_¥efix_li°_ge_À_cmd
);

2691 
	`ö°Æl_ñemít
 (
CONFIG_NODE
, &
no_ù_¥efix_li°_À_cmd
);

2692 
	`ö°Æl_ñemít
 (
CONFIG_NODE
, &
no_ù_¥efix_li°_À_ge_cmd
);

2693 
	`ö°Æl_ñemít
 (
CONFIG_NODE
, &
no_ù_¥efix_li°_£q_cmd
);

2694 
	`ö°Æl_ñemít
 (
CONFIG_NODE
, &
no_ù_¥efix_li°_£q_ge_cmd
);

2695 
	`ö°Æl_ñemít
 (
CONFIG_NODE
, &
no_ù_¥efix_li°_£q_ge_À_cmd
);

2696 
	`ö°Æl_ñemít
 (
CONFIG_NODE
, &
no_ù_¥efix_li°_£q_À_cmd
);

2697 
	`ö°Æl_ñemít
 (
CONFIG_NODE
, &
no_ù_¥efix_li°_£q_À_ge_cmd
);

2699 
	`ö°Æl_ñemít
 (
CONFIG_NODE
, &
ù_¥efix_li°_des¸ùti⁄_cmd
);

2700 
	`ö°Æl_ñemít
 (
CONFIG_NODE
, &
no_ù_¥efix_li°_des¸ùti⁄_cmd
);

2701 
	`ö°Æl_ñemít
 (
CONFIG_NODE
, &
no_ù_¥efix_li°_des¸ùti⁄_¨g_cmd
);

2703 
	`ö°Æl_ñemít
 (
CONFIG_NODE
, &
ù_¥efix_li°_£quí˚_numbî_cmd
);

2704 
	`ö°Æl_ñemít
 (
CONFIG_NODE
, &
no_ù_¥efix_li°_£quí˚_numbî_cmd
);

2706 
	`ö°Æl_ñemít
 (
VIEW_NODE
, &
show_ù_¥efix_li°_cmd
);

2707 
	`ö°Æl_ñemít
 (
VIEW_NODE
, &
show_ù_¥efix_li°_«me_cmd
);

2708 
	`ö°Æl_ñemít
 (
VIEW_NODE
, &
show_ù_¥efix_li°_«me_£q_cmd
);

2709 
	`ö°Æl_ñemít
 (
VIEW_NODE
, &
show_ù_¥efix_li°_¥efix_cmd
);

2710 
	`ö°Æl_ñemít
 (
VIEW_NODE
, &
show_ù_¥efix_li°_¥efix_l⁄gî_cmd
);

2711 
	`ö°Æl_ñemít
 (
VIEW_NODE
, &
show_ù_¥efix_li°_¥efix_fú°_m©ch_cmd
);

2712 
	`ö°Æl_ñemít
 (
VIEW_NODE
, &
show_ù_¥efix_li°_summ¨y_cmd
);

2713 
	`ö°Æl_ñemít
 (
VIEW_NODE
, &
show_ù_¥efix_li°_summ¨y_«me_cmd
);

2714 
	`ö°Æl_ñemít
 (
VIEW_NODE
, &
show_ù_¥efix_li°_dëaû_cmd
);

2715 
	`ö°Æl_ñemít
 (
VIEW_NODE
, &
show_ù_¥efix_li°_dëaû_«me_cmd
);

2717 
	`ö°Æl_ñemít
 (
ENABLE_NODE
, &
show_ù_¥efix_li°_cmd
);

2718 
	`ö°Æl_ñemít
 (
ENABLE_NODE
, &
show_ù_¥efix_li°_«me_cmd
);

2719 
	`ö°Æl_ñemít
 (
ENABLE_NODE
, &
show_ù_¥efix_li°_«me_£q_cmd
);

2720 
	`ö°Æl_ñemít
 (
ENABLE_NODE
, &
show_ù_¥efix_li°_¥efix_cmd
);

2721 
	`ö°Æl_ñemít
 (
ENABLE_NODE
, &
show_ù_¥efix_li°_¥efix_l⁄gî_cmd
);

2722 
	`ö°Æl_ñemít
 (
ENABLE_NODE
, &
show_ù_¥efix_li°_¥efix_fú°_m©ch_cmd
);

2723 
	`ö°Æl_ñemít
 (
ENABLE_NODE
, &
show_ù_¥efix_li°_summ¨y_cmd
);

2724 
	`ö°Æl_ñemít
 (
ENABLE_NODE
, &
show_ù_¥efix_li°_summ¨y_«me_cmd
);

2725 
	`ö°Æl_ñemít
 (
ENABLE_NODE
, &
show_ù_¥efix_li°_dëaû_cmd
);

2726 
	`ö°Æl_ñemít
 (
ENABLE_NODE
, &
show_ù_¥efix_li°_dëaû_«me_cmd
);

2728 
	`ö°Æl_ñemít
 (
ENABLE_NODE
, &
˛ór_ù_¥efix_li°_cmd
);

2729 
	`ö°Æl_ñemít
 (
ENABLE_NODE
, &
˛ór_ù_¥efix_li°_«me_cmd
);

2730 
	`ö°Æl_ñemít
 (
ENABLE_NODE
, &
˛ór_ù_¥efix_li°_«me_¥efix_cmd
);

2731 
	}
}

2733 #ifde‡
HAVE_IPV6


2735 
cmd_node
 
	g¥efix_ùv6_node
 =

2737 
PREFIX_IPV6_NODE
,

2743 
	$c⁄fig_wrôe_¥efix_ùv6
 (
vty
 *vty)

2745  
	`c⁄fig_wrôe_¥efix_afi
 (
AFI_IP6
, 
vty
);

2746 
	}
}

2749 
	$¥efix_li°_ª£t_ùv6
 ()

2751 
¥efix_li°
 *
∂i°
;

2752 
¥efix_li°
 *
√xt
;

2753 
¥efix_ma°î
 *
ma°î
;

2755 
ma°î
 = 
	`¥efix_ma°î_gë
 (
AFI_IP6
);

2756 i‡(
ma°î
 =
NULL
)

2759 
∂i°
 = 
ma°î
->
num
.
hód
;Öli°;Öli° = 
√xt
)

2761 
√xt
 = 
∂i°
->next;

2762 
	`¥efix_li°_dñëe
 (
∂i°
);

2764 
∂i°
 = 
ma°î
->
°r
.
hód
;Öli°;Öli° = 
√xt
)

2766 
√xt
 = 
∂i°
->next;

2767 
	`¥efix_li°_dñëe
 (
∂i°
);

2770 
	`as£π
 (
ma°î
->
num
.
hód
 =
NULL
);

2771 
	`as£π
 (
ma°î
->
num
.
èû
 =
NULL
);

2773 
	`as£π
 (
ma°î
->
°r
.
hód
 =
NULL
);

2774 
	`as£π
 (
ma°î
->
°r
.
èû
 =
NULL
);

2776 
ma°î
->
£qnum
 = 1;

2777 
ma°î
->
ª˚¡
 = 
NULL
;

2778 
	}
}

2781 
	$¥efix_li°_öô_ùv6
 ()

2783 
	`ö°Æl_node
 (&
¥efix_ùv6_node
, 
c⁄fig_wrôe_¥efix_ùv6
);

2785 
	`ö°Æl_ñemít
 (
CONFIG_NODE
, &
ùv6_¥efix_li°_cmd
);

2786 
	`ö°Æl_ñemít
 (
CONFIG_NODE
, &
ùv6_¥efix_li°_ge_cmd
);

2787 
	`ö°Æl_ñemít
 (
CONFIG_NODE
, &
ùv6_¥efix_li°_ge_À_cmd
);

2788 
	`ö°Æl_ñemít
 (
CONFIG_NODE
, &
ùv6_¥efix_li°_À_cmd
);

2789 
	`ö°Æl_ñemít
 (
CONFIG_NODE
, &
ùv6_¥efix_li°_À_ge_cmd
);

2790 
	`ö°Æl_ñemít
 (
CONFIG_NODE
, &
ùv6_¥efix_li°_£q_cmd
);

2791 
	`ö°Æl_ñemít
 (
CONFIG_NODE
, &
ùv6_¥efix_li°_£q_ge_cmd
);

2792 
	`ö°Æl_ñemít
 (
CONFIG_NODE
, &
ùv6_¥efix_li°_£q_ge_À_cmd
);

2793 
	`ö°Æl_ñemít
 (
CONFIG_NODE
, &
ùv6_¥efix_li°_£q_À_cmd
);

2794 
	`ö°Æl_ñemít
 (
CONFIG_NODE
, &
ùv6_¥efix_li°_£q_À_ge_cmd
);

2796 
	`ö°Æl_ñemít
 (
CONFIG_NODE
, &
no_ùv6_¥efix_li°_cmd
);

2797 
	`ö°Æl_ñemít
 (
CONFIG_NODE
, &
no_ùv6_¥efix_li°_¥efix_cmd
);

2798 
	`ö°Æl_ñemít
 (
CONFIG_NODE
, &
no_ùv6_¥efix_li°_ge_cmd
);

2799 
	`ö°Æl_ñemít
 (
CONFIG_NODE
, &
no_ùv6_¥efix_li°_ge_À_cmd
);

2800 
	`ö°Æl_ñemít
 (
CONFIG_NODE
, &
no_ùv6_¥efix_li°_À_cmd
);

2801 
	`ö°Æl_ñemít
 (
CONFIG_NODE
, &
no_ùv6_¥efix_li°_À_ge_cmd
);

2802 
	`ö°Æl_ñemít
 (
CONFIG_NODE
, &
no_ùv6_¥efix_li°_£q_cmd
);

2803 
	`ö°Æl_ñemít
 (
CONFIG_NODE
, &
no_ùv6_¥efix_li°_£q_ge_cmd
);

2804 
	`ö°Æl_ñemít
 (
CONFIG_NODE
, &
no_ùv6_¥efix_li°_£q_ge_À_cmd
);

2805 
	`ö°Æl_ñemít
 (
CONFIG_NODE
, &
no_ùv6_¥efix_li°_£q_À_cmd
);

2806 
	`ö°Æl_ñemít
 (
CONFIG_NODE
, &
no_ùv6_¥efix_li°_£q_À_ge_cmd
);

2808 
	`ö°Æl_ñemít
 (
CONFIG_NODE
, &
ùv6_¥efix_li°_des¸ùti⁄_cmd
);

2809 
	`ö°Æl_ñemít
 (
CONFIG_NODE
, &
no_ùv6_¥efix_li°_des¸ùti⁄_cmd
);

2810 
	`ö°Æl_ñemít
 (
CONFIG_NODE
, &
no_ùv6_¥efix_li°_des¸ùti⁄_¨g_cmd
);

2812 
	`ö°Æl_ñemít
 (
CONFIG_NODE
, &
ùv6_¥efix_li°_£quí˚_numbî_cmd
);

2813 
	`ö°Æl_ñemít
 (
CONFIG_NODE
, &
no_ùv6_¥efix_li°_£quí˚_numbî_cmd
);

2815 
	`ö°Æl_ñemít
 (
VIEW_NODE
, &
show_ùv6_¥efix_li°_cmd
);

2816 
	`ö°Æl_ñemít
 (
VIEW_NODE
, &
show_ùv6_¥efix_li°_«me_cmd
);

2817 
	`ö°Æl_ñemít
 (
VIEW_NODE
, &
show_ùv6_¥efix_li°_«me_£q_cmd
);

2818 
	`ö°Æl_ñemít
 (
VIEW_NODE
, &
show_ùv6_¥efix_li°_¥efix_cmd
);

2819 
	`ö°Æl_ñemít
 (
VIEW_NODE
, &
show_ùv6_¥efix_li°_¥efix_l⁄gî_cmd
);

2820 
	`ö°Æl_ñemít
 (
VIEW_NODE
, &
show_ùv6_¥efix_li°_¥efix_fú°_m©ch_cmd
);

2821 
	`ö°Æl_ñemít
 (
VIEW_NODE
, &
show_ùv6_¥efix_li°_summ¨y_cmd
);

2822 
	`ö°Æl_ñemít
 (
VIEW_NODE
, &
show_ùv6_¥efix_li°_summ¨y_«me_cmd
);

2823 
	`ö°Æl_ñemít
 (
VIEW_NODE
, &
show_ùv6_¥efix_li°_dëaû_cmd
);

2824 
	`ö°Æl_ñemít
 (
VIEW_NODE
, &
show_ùv6_¥efix_li°_dëaû_«me_cmd
);

2826 
	`ö°Æl_ñemít
 (
ENABLE_NODE
, &
show_ùv6_¥efix_li°_cmd
);

2827 
	`ö°Æl_ñemít
 (
ENABLE_NODE
, &
show_ùv6_¥efix_li°_«me_cmd
);

2828 
	`ö°Æl_ñemít
 (
ENABLE_NODE
, &
show_ùv6_¥efix_li°_«me_£q_cmd
);

2829 
	`ö°Æl_ñemít
 (
ENABLE_NODE
, &
show_ùv6_¥efix_li°_¥efix_cmd
);

2830 
	`ö°Æl_ñemít
 (
ENABLE_NODE
, &
show_ùv6_¥efix_li°_¥efix_l⁄gî_cmd
);

2831 
	`ö°Æl_ñemít
 (
ENABLE_NODE
, &
show_ùv6_¥efix_li°_¥efix_fú°_m©ch_cmd
);

2832 
	`ö°Æl_ñemít
 (
ENABLE_NODE
, &
show_ùv6_¥efix_li°_summ¨y_cmd
);

2833 
	`ö°Æl_ñemít
 (
ENABLE_NODE
, &
show_ùv6_¥efix_li°_summ¨y_«me_cmd
);

2834 
	`ö°Æl_ñemít
 (
ENABLE_NODE
, &
show_ùv6_¥efix_li°_dëaû_cmd
);

2835 
	`ö°Æl_ñemít
 (
ENABLE_NODE
, &
show_ùv6_¥efix_li°_dëaû_«me_cmd
);

2837 
	`ö°Æl_ñemít
 (
ENABLE_NODE
, &
˛ór_ùv6_¥efix_li°_cmd
);

2838 
	`ö°Æl_ñemít
 (
ENABLE_NODE
, &
˛ór_ùv6_¥efix_li°_«me_cmd
);

2839 
	`ö°Æl_ñemít
 (
ENABLE_NODE
, &
˛ór_ùv6_¥efix_li°_«me_¥efix_cmd
);

2840 
	}
}

2844 
	$¥efix_li°_öô
 ()

2846 
	`¥efix_li°_öô_ùv4
 ();

2847 #ifde‡
HAVE_IPV6


2848 
	`¥efix_li°_öô_ùv6
 ();

2850 
	}
}

2853 
	$¥efix_li°_ª£t
 ()

2855 
	`¥efix_li°_ª£t_ùv4
 ();

2856 #ifde‡
HAVE_IPV6


2857 
	`¥efix_li°_ª£t_ùv6
 ();

2859 
	`¥efix_li°_ª£t_‹f
 ();

2860 
	}
}

	@plist.h

23 #i‚de‡
_QUAGGA_PLIST_H


24 
	#_QUAGGA_PLIST_H


	)

26 
	#AFI_ORF_PREFIX
 65535

	)

28 
	e¥efix_li°_ty≥


30 
	mPREFIX_DENY
,

31 
	mPREFIX_PERMIT
,

34 
	e¥efix_«me_ty≥


36 
	mPREFIX_TYPE_STRING
,

37 
	mPREFIX_TYPE_NUMBER


40 
	s¥efix_li°


42 *
	m«me
;

43 *
	mdesc
;

45 
¥efix_ma°î
 *
	mma°î
;

47 
¥efix_«me_ty≥
 
	mty≥
;

49 
	mcou¡
;

50 
	møngecou¡
;

52 
¥efix_li°_íåy
 *
	mhód
;

53 
¥efix_li°_íåy
 *
	mèû
;

55 
¥efix_li°
 *
	m√xt
;

56 
¥efix_li°
 *
	m¥ev
;

59 
	s‹f_¥efix


61 
u_öt32_t
 
	m£q
;

62 
u_ch¨
 
	mge
;

63 
u_ch¨
 
	mÀ
;

64 
¥efix
 
	mp
;

68 
¥efix_li°_öô
 ();

69 
¥efix_li°_ª£t
 ();

70 
¥efix_li°_add_hook
 ((*
func
Ë(
¥efix_li°
 *));

71 
	`¥efix_li°_dñëe_hook
 ((*
func
Ë(
¥efix_li°
 *));

73 
¥efix_li°
 *
	`¥efix_li°_lookup
 (
afi_t
, const *);

74 
¥efix_li°_ty≥
 
	`¥efix_li°_≠∂y
 (
¥efix_li°
 *, *);

76 
°ªam
 * 
	`¥efix_bgp_‹f_íåy
 (stream *,

77 
¥efix_li°
 *,

78 
u_ch¨
, u_char, u_char);

79 
	`¥efix_bgp_‹f_£t
 (*, 
afi_t
, 
‹f_¥efix
 *, , );

80 
	`¥efix_bgp_‹f_ªmove_Æl
 (*);

81 
	`¥efix_bgp_show_¥efix_li°
 (
vty
 *, 
afi_t
, *);

	@pqueue.c

21 
	~<zebø.h
>

23 
	~"mem‹y.h
"

24 
	~"pqueue.h
"

39 
	#DATA_SIZE
 ( (*))

	)

40 
	#PARENT_OF
(
x
Ë((x - 1Ë/ 2)

	)

41 
	#LEFT_OF
(
x
Ë(2 * x + 1)

	)

42 
	#RIGHT_OF
(
x
Ë(2 * x + 2)

	)

43 
	#HAVE_CHILD
(
x
,
q
Ë(x < (q)->
size
 / 2)

	)

46 
	$åickÀ_up
 (
ödex
, 
pqueue
 *
queue
)

48 *
tmp
;

51 
tmp
 = 
queue
->
¨øy
[
ödex
];

55 
ödex
 > 0 &&

56 (*
queue
->
cmp
Ë(
tmp
, queue->
¨øy
[
	`PARENT_OF
 (
ödex
)]) < 0)

59 
queue
->
¨øy
[
ödex
] = queue->¨øy[
	`PARENT_OF
 (index)];

60 i‡(
queue
->
upd©e
 !
NULL
)

61 (*
queue
->
upd©e
Ë(queue->
¨øy
[
ödex
], index);

62 
ödex
 = 
	`PARENT_OF
 (index);

66 
queue
->
¨øy
[
ödex
] = 
tmp
;

67 i‡(
queue
->
upd©e
 !
NULL
)

68 (*
queue
->
upd©e
Ë(
tmp
, 
ödex
);

69 
	}
}

72 
	$åickÀ_down
 (
ödex
, 
pqueue
 *
queue
)

74 *
tmp
;

75 
which
;

78 
tmp
 = 
queue
->
¨øy
[
ödex
];

81 
	`HAVE_CHILD
 (
ödex
, 
queue
))

85 i‡(
	`RIGHT_OF
 (
ödex
Ë< 
queue
->
size
 &&

86 (*
queue
->
cmp
Ë(queue->
¨øy
[
	`LEFT_OF
 (
ödex
)],

87 
queue
->
¨øy
[
	`RIGHT_OF
 (
ödex
)]) > 0)

88 
which
 = 
	`RIGHT_OF
 (
ödex
);

90 
which
 = 
	`LEFT_OF
 (
ödex
);

93 i‡((*
queue
->
cmp
Ë(queue->
¨øy
[
which
], 
tmp
) > 0)

97 
queue
->
¨øy
[
ödex
] = queue->¨øy[
which
];

98 i‡(
queue
->
upd©e
 !
NULL
)

99 (*
queue
->
upd©e
Ë(queue->
¨øy
[
ödex
], index);

100 
ödex
 = 
which
;

104 
queue
->
¨øy
[
ödex
] = 
tmp
;

105 i‡(
queue
->
upd©e
 !
NULL
)

106 (*
queue
->
upd©e
Ë(
tmp
, 
ödex
);

107 
	}
}

109 
pqueue
 *

110 
	$pqueue_¸óã
 ()

112 
pqueue
 *
queue
;

114 
queue
 = 
	`XCALLOC
 (
MTYPE_PQUEUE
,  (
pqueue
));

116 
queue
->
¨øy
 = 
	`XCALLOC
 (
MTYPE_PQUEUE_DATA
,

117 
DATA_SIZE
 * 
PQUEUE_INIT_ARRAYSIZE
);

118 
queue
->
¨øy_size
 = 
PQUEUE_INIT_ARRAYSIZE
;

121 
queue
->
upd©e
 = 
NULL
;

122  
queue
;

123 
	}
}

126 
	$pqueue_dñëe
 (
pqueue
 *
queue
)

128 
	`XFREE
 (
MTYPE_PQUEUE_DATA
, 
queue
->
¨øy
);

129 
	`XFREE
 (
MTYPE_PQUEUE
, 
queue
);

130 
	}
}

133 
	$pqueue_ex∑nd
 (
pqueue
 *
queue
)

135 **
√w¨øy
;

137 
√w¨øy
 = 
	`XCALLOC
 (
MTYPE_PQUEUE_DATA
, 
queue
->
¨øy_size
 * 
DATA_SIZE
 * 2);

138 i‡(
√w¨øy
 =
NULL
)

141 
	`mem˝y
 (
√w¨øy
, 
queue
->
¨øy
, queue->
¨øy_size
 * 
DATA_SIZE
);

143 
	`XFREE
 (
MTYPE_PQUEUE_DATA
, 
queue
->
¨øy
);

144 
queue
->
¨øy
 = 
√w¨øy
;

145 
queue
->
¨øy_size
 *= 2;

148 
	}
}

151 
	$pqueue_íqueue
 (*
d©a
, 
pqueue
 *
queue
)

153 i‡(
queue
->
size
 + 2 >queue->
¨øy_size
 && ! 
	`pqueue_ex∑nd
 (queue))

156 
queue
->
¨øy
[queue->
size
] = 
d©a
;

157 i‡(
queue
->
upd©e
 !
NULL
)

158 (*
queue
->
upd©e
Ë(
d©a
, queue->
size
);

159 
	`åickÀ_up
 (
queue
->
size
, queue);

160 
queue
->
size
 ++;

161 
	}
}

164 
	$pqueue_dequeue
 (
pqueue
 *
queue
)

166 *
d©a
 = 
queue
->
¨øy
[0];

167 
queue
->
¨øy
[0] = queue->¨øy[--queue->
size
];

168 
	`åickÀ_down
 (0, 
queue
);

169  
d©a
;

170 
	}
}

173 
	$pqueue_ªmove_©
 (
ödex
, 
pqueue
 *
queue
)

175 
queue
->
¨øy
[
ödex
] = queue->¨øy[--queue->
size
];

177 i‡(
ödex
 > 0

178 && (*
queue
->
cmp
Ë(queue->
¨øy
[
ödex
],

179 
queue
->
¨øy
[
	`PARENT_OF
(
ödex
)]) < 0)

181 
	`åickÀ_up
 (
ödex
, 
queue
);

185 
	`åickÀ_down
 (
ödex
, 
queue
);

187 
	}
}

	@pqueue.h

21 #i‚de‡
_ZEBRA_PQUEUE_H


22 
	#_ZEBRA_PQUEUE_H


	)

24 
	spqueue


26 **
	m¨øy
;

27 
	m¨øy_size
;

28 
	msize
;

30 (*
	mcmp
) (*, *);

31 (*
	mupd©e
Ë(* 
	mnode
, 
	ma˘uÆ_posôi⁄
);

34 
	#PQUEUE_INIT_ARRAYSIZE
 32

	)

36 
pqueue
 *
pqueue_¸óã
 ();

37 
pqueue_dñëe
 (
pqueue
 *
queue
);

39 
pqueue_íqueue
 (*
d©a
, 
pqueue
 *
queue
);

40 *
pqueue_dequeue
 (
pqueue
 *
queue
);

41 
pqueue_ªmove_©
 (
ödex
, 
pqueue
 *
queue
);

43 
åickÀ_down
 (
ödex
, 
pqueue
 *
queue
);

44 
åickÀ_up
 (
ödex
, 
pqueue
 *
queue
);

	@prefix.c

23 
	~<zebø.h
>

25 
	~"¥efix.h
"

26 
	~"vty.h
"

27 
	~"sockuni⁄.h
"

28 
	~"mem‹y.h
"

29 
	~"log.h
"

32 c⁄° 
u_ch¨
 
	gmaskbô
[] = {0x00, 0x80, 0xc0, 0xe0, 0xf0,

35 c⁄° 
ö6_addr
 
	gmaskbyãs6
[] =

169 #i‚de‡
PNBBY


170 
	#PNBBY
 8

	)

173 
	#MASKBIT
(
off£t
Ë((0xf‡<< (
PNBBY
 - (off£t))Ë& 0xff)

	)

176 
	$¥efix_bô
 (c⁄° 
u_ch¨
 *
¥efix
, c⁄° u_ch¨ 
¥efixÀn
)

178 
off£t
 = 
¥efixÀn
 / 8;

179 
shi·
 = 7 - (
¥efixÀn
 % 8);

181  (
¥efix
[
off£t
] >> 
shi·
) & 1;

182 
	}
}

185 
	$¥efix6_bô
 (c⁄° 
ö6_addr
 *
¥efix
, c⁄° 
u_ch¨
 
¥efixÀn
)

187  
	`¥efix_bô
((c⁄° 
u_ch¨
 *Ë&
¥efix
->
s6_addr
, 
¥efixÀn
);

188 
	}
}

192 
	$afi2Ámûy
 (
afi_t
 
afi
)

194 i‡(
afi
 =
AFI_IP
)

195  
AF_INET
;

196 #ifde‡
HAVE_IPV6


197 i‡(
afi
 =
AFI_IP6
)

198  
AF_INET6
;

201 
	}
}

203 
afi_t


204 
	$Ámûy2afi
 (
Ámûy
)

206 i‡(
Ámûy
 =
AF_INET
)

207  
AFI_IP
;

208 #ifde‡
HAVE_IPV6


209 i‡(
Ámûy
 =
AF_INET6
)

210  
AFI_IP6
;

213 
	}
}

217 
	$¥efix_m©ch
 (c⁄° 
¥efix
 *
n
, c⁄° ¥efix *
p
)

219 
off£t
;

220 
shi·
;

221 c⁄° 
u_ch¨
 *
≈
, *
µ
;

224 i‡(
n
->
¥efixÀn
 > 
p
->prefixlen)

228 
≈
 = (c⁄° 
u_ch¨
 *)&
n
->
u
.
¥efix
;

229 
µ
 = (c⁄° 
u_ch¨
 *)&
p
->
u
.
¥efix
;

231 
off£t
 = 
n
->
¥efixÀn
 / 
PNBBY
;

232 
shi·
 = 
n
->
¥efixÀn
 % 
PNBBY
;

234 i‡(
shi·
)

235 i‡(
maskbô
[
shi·
] & (
≈
[
off£t
] ^ 
µ
[offset]))

238 
off£t
--)

239 i‡(
≈
[
off£t
] !
µ
[offset])

242 
	}
}

246 
	$¥efix_c›y
 (
¥efix
 *
de°
, c⁄° ¥efix *
§c
)

248 
de°
->
Ámûy
 = 
§c
->family;

249 
de°
->
¥efixÀn
 = 
§c
->prefixlen;

251 i‡(
§c
->
Ámûy
 =
AF_INET
)

252 
de°
->
u
.
¥efix4
 = 
§c
->u.prefix4;

253 #ifde‡
HAVE_IPV6


254 i‡(
§c
->
Ámûy
 =
AF_INET6
)

255 
de°
->
u
.
¥efix6
 = 
§c
->u.prefix6;

257 i‡(
§c
->
Ámûy
 =
AF_UNSPEC
)

259 
de°
->
u
.
Õ
.
id
 = 
§c
->u.lp.id;

260 
de°
->
u
.
Õ
.
adv_rouãr
 = 
§c
->u.lp.adv_router;

264 
	`zlog
 (
NULL
, 
LOG_ERR
, "prefix_copy(): Unknownáddress family %d",

265 
§c
->
Ámûy
);

266 
	`as£π
 (0);

268 
	}
}

279 
	$¥efix_ßme
 (c⁄° 
¥efix
 *
p1
, c⁄° ¥efix *
p2
)

281 i‡(
p1
->
Ámûy
 =
p2
->Ámûy &&Ö1->
¥efixÀn
 ==Ö2->prefixlen)

283 i‡(
p1
->
Ámûy
 =
AF_INET
)

284 i‡(
	`IPV4_ADDR_SAME
 (&
p1
->
u
.
¥efix4
.
s_addr
, &
p2
->u.prefix4.s_addr))

286 #ifde‡
HAVE_IPV6


287 i‡(
p1
->
Ámûy
 =
AF_INET6
 )

288 i‡(
	`IPV6_ADDR_SAME
 (&
p1
->
u
.
¥efix6
.
s6_addr
, &
p2
->u.prefix6.s6_addr))

293 
	}
}

306 
	$¥efix_cmp
 (c⁄° 
¥efix
 *
p1
, c⁄° ¥efix *
p2
)

308 
off£t
;

309 
shi·
;

312 c⁄° 
u_ch¨
 *
µ1
 = (c⁄° u_ch¨ *)&
p1
->
u
.
¥efix
;

313 c⁄° 
u_ch¨
 *
µ2
 = (c⁄° u_ch¨ *)&
p2
->
u
.
¥efix
;

315 i‡(
p1
->
Ámûy
 !
p2
->Ámûy ||Ö1->
¥efixÀn
 !=Ö2->prefixlen)

318 
off£t
 = 
p1
->
¥efixÀn
 / 
PNBBY
;

319 
shi·
 = 
p1
->
¥efixÀn
 % 
PNBBY
;

321 i‡(
shi·
)

322 i‡(
maskbô
[
shi·
] & (
µ1
[
off£t
] ^ 
µ2
[offset]))

325 
off£t
--)

326 i‡(
µ1
[
off£t
] !
µ2
[offset])

330 
	}
}

339 
	$¥efix_comm⁄_bôs
 (c⁄° 
¥efix
 *
p1
, c⁄° ¥efix *
p2
)

341 
pos
, 
bô
;

342 
Àngth
 = 0;

343 
u_ch¨
 
x‹
;

346 c⁄° 
u_ch¨
 *
µ1
 = (c⁄° u_ch¨ *)&
p1
->
u
.
¥efix
;

347 c⁄° 
u_ch¨
 *
µ2
 = (c⁄° u_ch¨ *)&
p2
->
u
.
¥efix
;

349 i‡(
p1
->
Ámûy
 =
AF_INET
)

350 
Àngth
 = 
IPV4_MAX_BYTELEN
;

351 #ifde‡
HAVE_IPV6


352 i‡(
p1
->
Ámûy
 =
AF_INET6
)

353 
Àngth
 = 
IPV6_MAX_BYTELEN
;

355 i‡(
p1
->
Ámûy
 !
p2
->Ámûy || !
Àngth
)

358 
pos
 = 0;Öo†< 
Àngth
;Öos++)

359 i‡(
µ1
[
pos
] !
µ2
[pos])

361 i‡(
pos
 =
Àngth
)

362  
pos
 * 8;

364 
x‹
 = 
µ1
[
pos
] ^ 
µ2
[pos];

365 
bô
 = 0; bit < 8; bit++)

366 i‡(
x‹
 & (1 << (7 - 
bô
)))

369  
pos
 * 8 + 
bô
;

370 
	}
}

374 
	$¥efix_Ámûy_°r
 (c⁄° 
¥efix
 *
p
)

376 i‡(
p
->
Ámûy
 =
AF_INET
)

378 #ifde‡
HAVE_IPV6


379 i‡(
p
->
Ámûy
 =
AF_INET6
)

383 
	}
}

386 
¥efix_ùv4
 *

387 
	$¥efix_ùv4_√w
 ()

389 
¥efix_ùv4
 *
p
;

394 
p
 = (
¥efix_ùv4
 *)
	`¥efix_√w
();

395 
p
->
Ámûy
 = 
AF_INET
;

396  
p
;

397 
	}
}

401 
	$¥efix_ùv4_‰ì
 (
¥efix_ùv4
 *
p
)

403 
	`¥efix_‰ì
((
¥efix
 *)
p
);

404 
	}
}

408 
	$°r2¥efix_ùv4
 (c⁄° *
°r
, 
¥efix_ùv4
 *
p
)

410 
ªt
;

411 
∂í
;

412 *
≤t
;

413 *
˝
;

416 
≤t
 = 
	`°rchr
 (
°r
, '/');

419 i‡(
≤t
 =
NULL
)

422 
ªt
 = 
	`öë_©⁄
 (
°r
, &
p
->
¥efix
);

423 i‡(
ªt
 == 0)

427 
p
->
Ámûy
 = 
AF_INET
;

428 
p
->
¥efixÀn
 = 
IPV4_MAX_BITLEN
;

430  
ªt
;

434 
˝
 = 
	`XMALLOC
 (
MTYPE_TMP
, (
≤t
 - 
°r
) + 1);

435 
	`°∫˝y
 (
˝
, 
°r
, 
≤t
 - str);

436 *(
˝
 + (
≤t
 - 
°r
)) = '\0';

437 
ªt
 = 
	`öë_©⁄
 (
˝
, &
p
->
¥efix
);

438 
	`XFREE
 (
MTYPE_TMP
, 
˝
);

441 
∂í
 = (
u_ch¨
Ë
	`©oi
 (++
≤t
);

442 i‡(
∂í
 > 
IPV4_MAX_PREFIXLEN
)

445 
p
->
Ámûy
 = 
AF_INET
;

446 
p
->
¥efixÀn
 = 
∂í
;

449  
ªt
;

450 
	}
}

454 
	$maskÀn2ù
 (c⁄° 
maskÀn
, 
ö_addr
 *
√tmask
)

456 
	`as£π
 (
maskÀn
 >0 && maskÀ¿<
IPV4_MAX_BITLEN
);

463 
√tmask
->
s_addr
 = 
	`ht⁄l
(0xffffffffULL << (32 - 
maskÀn
));

465 
√tmask
->
s_addr
 = 
	`ht⁄l
(
maskÀn
 ? 0xffffffffU << (32 - masklen) : 0);

466 
	}
}

470 
u_ch¨


471 
	$ù_maskÀn
 (
ö_addr
 
√tmask
)

473 
uöt32_t
 
tmp
 = ~
	`¡ohl
(
√tmask
.
s_addr
);

474 i‡(
tmp
)

477  
	`__buûtö_˛z
(
tmp
);

480 
	}
}

484 
	$≠∂y_mask_ùv4
 (
¥efix_ùv4
 *
p
)

486 
ö_addr
 
mask
;

487 
	`maskÀn2ù
(
p
->
¥efixÀn
, &
mask
);

488 
p
->
¥efix
.
s_addr
 &
mask
.s_addr;

489 
	}
}

493 
	$¥efix_ùv4_™y
 (c⁄° 
¥efix_ùv4
 *
p
)

495  (
p
->
¥efix
.
s_addr
 =0 &&Ö->
¥efixÀn
 == 0);

496 
	}
}

498 #ifde‡
HAVE_IPV6


501 
¥efix_ùv6
 *

502 
	$¥efix_ùv6_√w
 ()

504 
¥efix_ùv6
 *
p
;

508 
p
 = (
¥efix_ùv6
 *)
	`¥efix_√w
();

509 
p
->
Ámûy
 = 
AF_INET6
;

510  
p
;

511 
	}
}

515 
	$¥efix_ùv6_‰ì
 (
¥efix_ùv6
 *
p
)

517 
	`¥efix_‰ì
((
¥efix
 *)
p
);

518 
	}
}

522 
	$°r2¥efix_ùv6
 (c⁄° *
°r
, 
¥efix_ùv6
 *
p
)

524 *
≤t
;

525 *
˝
;

526 
ªt
;

528 
≤t
 = 
	`°rchr
 (
°r
, '/');

531 i‡(
≤t
 =
NULL
)

533 
ªt
 = 
	`öë_±⁄
 (
AF_INET6
, 
°r
, &
p
->
¥efix
);

534 i‡(
ªt
 == 0)

536 
p
->
¥efixÀn
 = 
IPV6_MAX_BITLEN
;

540 
∂í
;

542 
˝
 = 
	`XMALLOC
 (0, (
≤t
 - 
°r
) + 1);

543 
	`°∫˝y
 (
˝
, 
°r
, 
≤t
 - str);

544 *(
˝
 + (
≤t
 - 
°r
)) = '\0';

545 
ªt
 = 
	`öë_±⁄
 (
AF_INET6
, 
˝
, &
p
->
¥efix
);

546 
	`‰ì
 (
˝
);

547 i‡(
ªt
 == 0)

549 
∂í
 = (
u_ch¨
Ë
	`©oi
 (++
≤t
);

550 i‡(
∂í
 > 
IPV6_MAX_BITLEN
)

552 
p
->
¥efixÀn
 = 
∂í
;

554 
p
->
Ámûy
 = 
AF_INET6
;

556  
ªt
;

557 
	}
}

562 
	$ù6_maskÀn
 (
ö6_addr
 
√tmask
)

564 
Àn
 = 0;

565 
vÆ
;

566 *
≤t
;

568 
≤t
 = (*Ë& 
√tmask
;

570 (*
≤t
 =0xffË&& 
Àn
 < 
IPV6_MAX_BITLEN
)

572 
Àn
 += 8;

573 
≤t
++;

576 i‡(
Àn
 < 
IPV6_MAX_BITLEN
)

578 
vÆ
 = *
≤t
;

579 
vÆ
)

581 
Àn
++;

582 
vÆ
 <<= 1;

585  
Àn
;

586 
	}
}

589 
	$maskÀn2ù6
 (c⁄° 
maskÀn
, 
ö6_addr
 *
√tmask
)

591 
	`as£π
 (
maskÀn
 >0 && maskÀ¿<
IPV6_MAX_BITLEN
);

592 
	`mem˝y
 (
√tmask
, 
maskbyãs6
 + 
maskÀn
,  (
ö6_addr
));

593 
	}
}

596 
	$≠∂y_mask_ùv6
 (
¥efix_ùv6
 *
p
)

598 
u_ch¨
 *
≤t
;

599 
ödex
;

600 
off£t
;

602 
ödex
 = 
p
->
¥efixÀn
 / 8;

604 i‡(
ödex
 < 16)

606 
≤t
 = (
u_ch¨
 *Ë&
p
->
¥efix
;

607 
off£t
 = 
p
->
¥efixÀn
 % 8;

609 
≤t
[
ödex
] &
maskbô
[
off£t
];

610 
ödex
++;

612 
ödex
 < 16)

613 
≤t
[
ödex
++] = 0;

615 
	}
}

618 
	$°r2ö6_addr
 (c⁄° *
°r
, 
ö6_addr
 *
addr
)

620 
i
;

621 
x
;

624 
i
 = 0; i < 16; i++)

626 
	`ssˇnf
 (
°r
 + (
i
 * 2), "%02x", &
x
);

627 
addr
->
s6_addr
[
i
] = 
x
 & 0xff;

629 
	}
}

633 
	$≠∂y_mask
 (
¥efix
 *
p
)

635 
p
->
Ámûy
)

637 
AF_INET
:

638 
	`≠∂y_mask_ùv4
 ((
¥efix_ùv4
 *)
p
);

640 #ifde‡
HAVE_IPV6


641 
AF_INET6
:

642 
	`≠∂y_mask_ùv6
 ((
¥efix_ùv6
 *)
p
);

649 
	}
}

653 
¥efix
 *

654 
	$sockuni⁄2¥efix
 (c⁄° 
sockuni⁄
 *
de°
,

655 c⁄° 
sockuni⁄
 *
mask
)

657 i‡(
de°
->
ß
.
ß_Ámûy
 =
AF_INET
)

659 
¥efix_ùv4
 *
p
;

661 
p
 = 
	`¥efix_ùv4_√w
 ();

662 
p
->
Ámûy
 = 
AF_INET
;

663 
p
->
¥efix
 = 
de°
->
sö
.
sö_addr
;

664 
p
->
¥efixÀn
 = 
	`ù_maskÀn
 (
mask
->
sö
.
sö_addr
);

665  (
¥efix
 *Ë
p
;

667 #ifde‡
HAVE_IPV6


668 i‡(
de°
->
ß
.
ß_Ámûy
 =
AF_INET6
)

670 
¥efix_ùv6
 *
p
;

672 
p
 = 
	`¥efix_ùv6_√w
 ();

673 
p
->
Ámûy
 = 
AF_INET6
;

674 
p
->
¥efixÀn
 = 
	`ù6_maskÀn
 (
mask
->
sö6
.
sö6_addr
);

675 
	`mem˝y
 (&
p
->
¥efix
, &
de°
->
sö6
.
sö6_addr
,  (
ö6_addr
));

676  (
¥efix
 *Ë
p
;

679  
NULL
;

680 
	}
}

683 
¥efix
 *

684 
	$sockuni⁄2ho°¥efix
 (c⁄° 
sockuni⁄
 *
su
)

686 i‡(
su
->
ß
.
ß_Ámûy
 =
AF_INET
)

688 
¥efix_ùv4
 *
p
;

690 
p
 = 
	`¥efix_ùv4_√w
 ();

691 
p
->
Ámûy
 = 
AF_INET
;

692 
p
->
¥efix
 = 
su
->
sö
.
sö_addr
;

693 
p
->
¥efixÀn
 = 
IPV4_MAX_BITLEN
;

694  (
¥efix
 *Ë
p
;

696 #ifde‡
HAVE_IPV6


697 i‡(
su
->
ß
.
ß_Ámûy
 =
AF_INET6
)

699 
¥efix_ùv6
 *
p
;

701 
p
 = 
	`¥efix_ùv6_√w
 ();

702 
p
->
Ámûy
 = 
AF_INET6
;

703 
p
->
¥efixÀn
 = 
IPV6_MAX_BITLEN
;

704 
	`mem˝y
 (&
p
->
¥efix
, &
su
->
sö6
.
sö6_addr
,  (
ö6_addr
));

705  (
¥efix
 *Ë
p
;

708  
NULL
;

709 
	}
}

712 
	$¥efix2sockuni⁄
 (c⁄° 
¥efix
 *
p
, 
sockuni⁄
 *
su
)

714 
	`mem£t
 (
su
, 0,  (*su));

716 
su
->
ß
.
ß_Ámûy
 = 
p
->
Ámûy
;

717 i‡(
p
->
Ámûy
 =
AF_INET
)

718 
su
->
sö
.
sö_addr
 = 
p
->
u
.
¥efix4
;

719 #ifde‡
HAVE_IPV6


720 i‡(
p
->
Ámûy
 =
AF_INET6
)

721 
	`mem˝y
 (&
su
->
sö6
.
sö6_addr
, &
p
->
u
.
¥efix6
,  (
ö6_addr
));

723 
	}
}

726 
	$¥efix_bÀn
 (c⁄° 
¥efix
 *
p
)

728 
p
->
Ámûy
)

730 
AF_INET
:

731  
IPV4_MAX_BYTELEN
;

733 #ifde‡
HAVE_IPV6


734 
AF_INET6
:

735  
IPV6_MAX_BYTELEN
;

740 
	}
}

744 
	$°r2¥efix
 (c⁄° *
°r
, 
¥efix
 *
p
)

746 
ªt
;

749 
ªt
 = 
	`°r2¥efix_ùv4
 (
°r
, (
¥efix_ùv4
 *Ë
p
);

750 i‡(
ªt
)

751  
ªt
;

753 #ifde‡
HAVE_IPV6


755 
ªt
 = 
	`°r2¥efix_ùv6
 (
°r
, (
¥efix_ùv6
 *Ë
p
);

756 i‡(
ªt
)

757  
ªt
;

761 
	}
}

764 
	$¥efix2°r
 (c⁄° 
¥efix
 *
p
, *
°r
, 
size
)

766 
buf
[
BUFSIZ
];

768 
	`öë_¡›
 (
p
->
Ámûy
, &p->
u
.
¥efix
, 
buf
, 
BUFSIZ
);

769 
	`¢¥ötf
 (
°r
, 
size
, "%s/%d", 
buf
, 
p
->
¥efixÀn
);

771 
	}
}

773 
¥efix
 *

774 
	$¥efix_√w
 ()

776 
¥efix
 *
p
;

778 
p
 = 
	`XCALLOC
 (
MTYPE_PREFIX
,  *p);

779  
p
;

780 
	}
}

784 
	$¥efix_‰ì
 (
¥efix
 *
p
)

786 
	`XFREE
 (
MTYPE_PREFIX
, 
p
);

787 
	}
}

793 
	$Æl_digô
 (c⁄° *
°r
)

795 ; *
°r
 != '\0'; str++)

796 i‡(!
	`isdigô
 ((Ë*
°r
))

799 
	}
}

802 
	$≠∂y_˛assful_mask_ùv4
 (
¥efix_ùv4
 *
p
)

805 
u_öt32_t
 
de°ö©i⁄
;

807 
de°ö©i⁄
 = 
	`¡ohl
 (
p
->
¥efix
.
s_addr
);

809 i‡(
p
->
¥efixÀn
 =
IPV4_MAX_PREFIXLEN
);

811 i‡(
	`IN_CLASSC
 (
de°ö©i⁄
))

813 
p
->
¥efixÀn
=24;

814 
	`≠∂y_mask_ùv4
(
p
);

816 i‡(
	`IN_CLASSB
(
de°ö©i⁄
))

818 
p
->
¥efixÀn
=16;

819 
	`≠∂y_mask_ùv4
(
p
);

823 
p
->
¥efixÀn
=8;

824 
	`≠∂y_mask_ùv4
(
p
);

826 
	}
}

828 
ö_addr_t


829 
	$ùv4_√tw‹k_addr
 (
ö_addr_t
 
ho°addr
, 
maskÀn
)

831 
ö_addr
 
mask
;

833 
	`maskÀn2ù
 (
maskÀn
, &
mask
);

834  
ho°addr
 & 
mask
.
s_addr
;

835 
	}
}

837 
ö_addr_t


838 
	$ùv4_brﬂdˇ°_addr
 (
ö_addr_t
 
ho°addr
, 
maskÀn
)

840 
ö_addr
 
mask
;

842 
	`maskÀn2ù
 (
maskÀn
, &
mask
);

843  (
maskÀn
 !
IPV4_MAX_PREFIXLEN
-1) ?

845 (
ho°addr
 | ~
mask
.
s_addr
) :

847 (
ho°addr
 ^ ~
mask
.
s_addr
);

848 
	}
}

854 
	$√tmask_°r2¥efix_°r
 (c⁄° *
√t_°r
, c⁄° *
mask_°r
,

855 *
¥efix_°r
)

857 
ö_addr
 
√tw‹k
;

858 
ö_addr
 
mask
;

859 
u_ch¨
 
¥efixÀn
;

860 
u_öt32_t
 
de°ö©i⁄
;

861 
ªt
;

863 
ªt
 = 
	`öë_©⁄
 (
√t_°r
, &
√tw‹k
);

864 i‡(! 
ªt
)

867 i‡(
mask_°r
)

869 
ªt
 = 
	`öë_©⁄
 (
mask_°r
, &
mask
);

870 i‡(! 
ªt
)

873 
¥efixÀn
 = 
	`ù_maskÀn
 (
mask
);

877 
de°ö©i⁄
 = 
	`¡ohl
 (
√tw‹k
.
s_addr
);

879 i‡(
√tw‹k
.
s_addr
 == 0)

880 
¥efixÀn
 = 0;

881 i‡(
	`IN_CLASSC
 (
de°ö©i⁄
))

882 
¥efixÀn
 = 24;

883 i‡(
	`IN_CLASSB
 (
de°ö©i⁄
))

884 
¥efixÀn
 = 16;

885 i‡(
	`IN_CLASSA
 (
de°ö©i⁄
))

886 
¥efixÀn
 = 8;

891 
	`•rötf
 (
¥efix_°r
, "%s/%d", 
√t_°r
, 
¥efixÀn
);

894 
	}
}

896 #ifde‡
HAVE_IPV6


899 
	$öë6_¡ﬂ
 (
ö6_addr
 
addr
)

901 
buf
[
INET6_ADDRSTRLEN
];

903 
	`öë_¡›
 (
AF_INET6
, &
addr
, 
buf
, 
INET6_ADDRSTRLEN
);

904  
buf
;

905 
	}
}

	@prefix.h

23 #i‚de‡
_ZEBRA_PREFIX_H


24 
	#_ZEBRA_PREFIX_H


	)

26 
	~"sockuni⁄.h
"

38 
	s¥efix


40 
u_ch¨
 
	mÁmûy
;

41 
u_ch¨
 
	m¥efixÀn
;

44 
u_ch¨
 
	m¥efix
;

45 
ö_addr
 
	m¥efix4
;

46 #ifde‡
HAVE_IPV6


47 
ö6_addr
 
	m¥efix6
;

51 
ö_addr
 
	mid
;

52 
ö_addr
 
	madv_rouãr
;

53 } 
	mÕ
;

54 
u_ch¨
 
	mvÆ
[8];

55 
uöçå_t
 
	m±r
;

56 } 
u
 
__©åibuã__
 ((
Æig√d
 (8)));

60 
	s¥efix_ùv4


62 
u_ch¨
 
	mÁmûy
;

63 
u_ch¨
 
	m¥efixÀn
;

64 
ö_addr
 
¥efix
 
__©åibuã__
 ((
Æig√d
 (8)));

68 #ifde‡
HAVE_IPV6


69 
	s¥efix_ùv6


71 
u_ch¨
 
	mÁmûy
;

72 
u_ch¨
 
	m¥efixÀn
;

73 
ö6_addr
 
¥efix
 
__©åibuã__
 ((
Æig√d
 (8)));

77 
	s¥efix_ls


79 
u_ch¨
 
	mÁmûy
;

80 
u_ch¨
 
	m¥efixÀn
;

81 
ö_addr
 
id
 
__©åibuã__
 ((
Æig√d
 (8)));

82 
ö_addr
 
	madv_rouãr
;

86 
	s¥efix_rd


88 
u_ch¨
 
	mÁmûy
;

89 
u_ch¨
 
	m¥efixÀn
;

90 
u_ch¨
 
	mvÆ
[8] 
__©åibuã__
 ((
Æig√d
 (8)));

94 
	s¥efix_±r


96 
u_ch¨
 
	mÁmûy
;

97 
u_ch¨
 
	m¥efixÀn
;

98 
uöçå_t
 
¥efix
 
__©åibuã__
 ((
Æig√d
 (8)));

106 
	u¥efix46±r


108 
¥efix
 *
	mp
;

109 
¥efix_ùv4
 *
	mp4
;

110 
¥efix_ùv6
 *
	mp6
;

111 } 
__©åibuã__
 ((
å™•¨ít_uni⁄
));

113 
	u¥efix46c⁄°±r


115 c⁄° 
¥efix
 *
	mp
;

116 c⁄° 
¥efix_ùv4
 *
	mp4
;

117 c⁄° 
¥efix_ùv6
 *
	mp6
;

118 } 
__©åibuã__
 ((
å™•¨ít_uni⁄
));

120 #i‚de‡
INET_ADDRSTRLEN


121 
	#INET_ADDRSTRLEN
 16

	)

124 #i‚de‡
INET6_ADDRSTRLEN


125 
	#INET6_ADDRSTRLEN
 46

	)

128 #i‚de‡
INET6_BUFSIZ


129 
	#INET6_BUFSIZ
 51

	)

133 
	#IPV4_MAX_BYTELEN
 4

	)

134 
	#IPV4_MAX_BITLEN
 32

	)

135 
	#IPV4_MAX_PREFIXLEN
 32

	)

136 
	#IPV4_ADDR_CMP
(
D
,
S
Ë
	`memcmp
 ((D), (S), 
IPV4_MAX_BYTELEN
)

	)

137 
	#IPV4_ADDR_SAME
(
D
,
S
Ë(
	`memcmp
 ((D), (S), 
IPV4_MAX_BYTELEN
Ë=0)

	)

138 
	#IPV4_ADDR_COPY
(
D
,
S
Ë
	`mem˝y
 ((D), (S), 
IPV4_MAX_BYTELEN
)

	)

140 
	#IPV4_NET0
(
a
Ë((((
u_öt32_t
Ë◊)Ë& 0xff000000Ë=0x00000000)

	)

141 
	#IPV4_NET127
(
a
Ë((((
u_öt32_t
Ë◊)Ë& 0xff000000Ë=0x7f000000)

	)

142 
	#IPV4_LINKLOCAL
(
a
Ë((((
u_öt32_t
Ë◊)Ë& 0xffff0000Ë=0xa9„0000)

	)

143 
	#IPV4_CLASS_DE
(
a
Ë((((
u_öt32_t
Ë◊)Ë& 0xe0000000Ë=0xe0000000)

	)

146 
	#IPV6_MAX_BYTELEN
 16

	)

147 
	#IPV6_MAX_BITLEN
 128

	)

148 
	#IPV6_MAX_PREFIXLEN
 128

	)

149 
	#IPV6_ADDR_CMP
(
D
,
S
Ë
	`memcmp
 ((D), (S), 
IPV6_MAX_BYTELEN
)

	)

150 
	#IPV6_ADDR_SAME
(
D
,
S
Ë(
	`memcmp
 ((D), (S), 
IPV6_MAX_BYTELEN
Ë=0)

	)

151 
	#IPV6_ADDR_COPY
(
D
,
S
Ë
	`mem˝y
 ((D), (S), 
IPV6_MAX_BYTELEN
)

	)

154 
	#PSIZE
(
a
Ë((◊Ë+ 7Ë/ (8))

	)

157 
	#PREFIX_FAMILY
(
p
Ë(’)->
Ámûy
)

	)

160 
afi2Ámûy
 (
afi_t
);

161 
afi_t
 
Ámûy2afi
 ();

164 
¥efix_bô
 (c⁄° 
u_ch¨
 *
¥efix
, c⁄° u_ch¨ 
¥efixÀn
);

165 
¥efix6_bô
 (c⁄° 
ö6_addr
 *
¥efix
, c⁄° 
u_ch¨
 
¥efixÀn
);

167 
¥efix
 *
¥efix_√w
 ();

168 
¥efix_‰ì
 (
¥efix
 *);

169 c⁄° *
¥efix_Ámûy_°r
 (c⁄° 
¥efix
 *);

170 
¥efix_bÀn
 (c⁄° 
¥efix
 *);

171 
°r2¥efix
 (c⁄° *, 
¥efix
 *);

172 
¥efix2°r
 (c⁄° 
¥efix
 *, *, );

173 
¥efix_m©ch
 (c⁄° 
¥efix
 *, const prefix *);

174 
¥efix_ßme
 (c⁄° 
¥efix
 *, const prefix *);

175 
¥efix_cmp
 (c⁄° 
¥efix
 *, const prefix *);

176 
¥efix_comm⁄_bôs
 (c⁄° 
¥efix
 *, const prefix *);

177 
¥efix_c›y
 (
¥efix
 *
de°
, c⁄° ¥efix *
§c
);

178 
≠∂y_mask
 (
¥efix
 *);

180 
¥efix
 *
sockuni⁄2¥efix
 (c⁄° 
sockuni⁄
 *
de°
,

181 c⁄° 
sockuni⁄
 *
mask
);

182 
¥efix
 *
sockuni⁄2ho°¥efix
 (c⁄° 
sockuni⁄
 *);

183 
¥efix2sockuni⁄
 (c⁄° 
¥efix
 *, 
sockuni⁄
 *);

185 
¥efix_ùv4
 *
¥efix_ùv4_√w
 ();

186 
¥efix_ùv4_‰ì
 (
¥efix_ùv4
 *);

187 
°r2¥efix_ùv4
 (c⁄° *, 
¥efix_ùv4
 *);

188 
≠∂y_mask_ùv4
 (
¥efix_ùv4
 *);

190 
	#PREFIX_COPY_IPV4
(
DST
, 
SRC
) \

191 *((
¥efix_ùv4
 *)(
DST
)Ë*((c⁄° ¥efix_ùv4 *)(
SRC
));

	)

193 
¥efix_ùv4_™y
 (c⁄° 
¥efix_ùv4
 *);

194 
≠∂y_˛assful_mask_ùv4
 (
¥efix_ùv4
 *);

196 
u_ch¨
 
ù_maskÀn
 (
ö_addr
);

197 
maskÀn2ù
 (c⁄° , 
ö_addr
 *);

199 
ö_addr_t
 
ùv4_√tw‹k_addr
 (ö_addr_à
ho°addr
, 
maskÀn
);

204 
ö_addr_t
 
ùv4_brﬂdˇ°_addr
 (ö_addr_à
ho°addr
, 
maskÀn
);

206 
√tmask_°r2¥efix_°r
 (const *, const *, *);

208 #ifde‡
HAVE_IPV6


209 
¥efix_ùv6
 *
¥efix_ùv6_√w
 ();

210 
¥efix_ùv6_‰ì
 (
¥efix_ùv6
 *);

211 
°r2¥efix_ùv6
 (c⁄° *, 
¥efix_ùv6
 *);

212 
≠∂y_mask_ùv6
 (
¥efix_ùv6
 *);

214 
	#PREFIX_COPY_IPV6
(
DST
, 
SRC
) \

215 *((
¥efix_ùv6
 *)(
DST
)Ë*((c⁄° ¥efix_ùv6 *)(
SRC
));

	)

217 
ù6_maskÀn
 (
ö6_addr
);

218 
maskÀn2ù6
 (c⁄° , 
ö6_addr
 *);

220 
°r2ö6_addr
 (c⁄° *, 
ö6_addr
 *);

221 c⁄° *
öë6_¡ﬂ
 (
ö6_addr
);

225 
Æl_digô
 (const *);

227 
ölöe
 
	$ùv4_m¨tün
 (
ö_addr
 *
addr
)

229 
ö_addr_t
 
ù
 = 
addr
->
s_addr
;

231 i‡(
	`IPV4_NET0
(
ù
Ë|| 
	`IPV4_NET127
(ùË|| 
	`IPV4_CLASS_DE
(ip)) {

235 
	}
}

	@privs.c

24 
	~<zebø.h
>

25 
	~"log.h
"

26 
	~"¥ivs.h
"

27 
	~"mem‹y.h
"

29 #ifde‡
HAVE_CAPABILITIES


41 #ifde‡
HAVE_LCAPS


43 
	s_p£t
 {

44 
	mnum
;

45 
ˇp_vÆue_t
 *
	mˇps
;

47 
ˇp_vÆue_t
 
	tpvÆue_t
;

48 
_p£t
 
	tp£t_t
;

49 
ˇp_t
 
	tp°‹age_t
;

51 #ñi‡
deföed
 (
HAVE_SOLARIS_CAPABILITIES
)

52 
¥iv_t
 
	tpvÆue_t
;

53 
¥iv_£t_t
 
	tp£t_t
;

54 
¥iv_£t_t
 *
	tp°‹age_t
;

63 
zebø_¥ivs_cuºít_t
 
	gz¥ivs_nuŒ_°©e
 = 
ZPRIVS_RAISED
;

66 
	s_z¥ivs_t


68 #ifde‡
HAVE_CAPABILITIES


69 
p°‹age_t
 
	mˇps
;

70 
p£t_t
 *
	msysˇps_p
;

71 
p£t_t
 *
	msysˇps_i
;

73 
uid_t
 
	mzuid
,

74 
	mzsuid
;

75 
gid_t
 
	mzgid
;

76 
gid_t
 
	mvtygΩ
;

77 } 
	gz¥ivs_°©e
;

80 #ifde‡
HAVE_CAPABILITIES


81 
z¥ivs_ch™ge_ˇps
 (
zebø_¥ivs_›s_t
);

82 
zebø_¥ivs_cuºít_t
 
z¥ivs_°©e_ˇps
 ();

84 
z¥ivs_ch™ge_uid
 (
zebø_¥ivs_›s_t
);

85 
zebø_¥ivs_cuºít_t
 
z¥ivs_°©e_uid
 ();

86 
z¥ivs_ch™ge_nuŒ
 (
zebø_¥ivs_›s_t
);

87 
zebø_¥ivs_cuºít_t
 
z¥ivs_°©e_nuŒ
 ();

89 #ifde‡
HAVE_CAPABILITIES


91 
p£t_t
 *
zˇps2sys
 (
zebø_ˇ∑bûôõs_t
 *, );

92 
z¥ivs_ˇps_öô
 (
zebø_¥ivs_t
 *);

93 
z¥ivs_ˇps_ãrmö©e
 ();

98 
	mnum
;

99 
pvÆue_t
 *
	msy°em_ˇps
;

100 } 
	gˇp_m≠
 [
ZCAP_MAX
] =

102 #ifde‡
HAVE_LCAPS


103 [
ZCAP_SETID
] = { 2, (
pvÆue_t
 []Ë{ 
CAP_SETGID
,

104 
CAP_SETUID
 }, },

105 [
ZCAP_BIND
] = { 2, (
pvÆue_t
 []Ë{ 
CAP_NET_BIND_SERVICE
,

106 
CAP_NET_BROADCAST
 }, },

107 [
ZCAP_NET_ADMIN
] = { 1, (
pvÆue_t
 []Ë{ 
CAP_NET_ADMIN
 }, },

108 [
ZCAP_NET_RAW
] = { 1, (
pvÆue_t
 []Ë{ 
CAP_NET_RAW
 }, },

109 [
ZCAP_CHROOT
] = { 1, (
pvÆue_t
 []Ë{ 
CAP_SYS_CHROOT
, }, },

110 [
ZCAP_NICE
] = { 1, (
pvÆue_t
 []Ë{ 
CAP_SYS_NICE
 }, },

111 [
ZCAP_PTRACE
] = { 1, (
pvÆue_t
 []Ë{ 
CAP_SYS_PTRACE
 }, },

112 [
ZCAP_DAC_OVERRIDE
] = { 1, (
pvÆue_t
 []Ë{ 
CAP_DAC_OVERRIDE
 }, },

113 [
ZCAP_READ_SEARCH
] = { 1, (
pvÆue_t
 []Ë{ 
CAP_DAC_READ_SEARCH
 }, },

114 [
ZCAP_SYS_ADMIN
] = { 1, (
pvÆue_t
 []Ë{ 
CAP_SYS_ADMIN
 }, },

115 [
ZCAP_FOWNER
] = { 1, (
pvÆue_t
 []Ë{ 
CAP_FOWNER
 }, },

116 #ñi‡
deföed
(
HAVE_SOLARIS_CAPABILITIES
)

118 [
ZCAP_SETID
] = { 1, (
pvÆue_t
 []Ë{ 
PRIV_PROC_SETID
 }, },

119 [
ZCAP_BIND
] = { 1, (
pvÆue_t
 []Ë{ 
PRIV_NET_PRIVADDR
 }, },

121 #ifde‡
PRIV_SYS_IP_CONFIG


122 [
ZCAP_NET_ADMIN
] = { 1, (
pvÆue_t
 []Ë{ 
PRIV_SYS_IP_CONFIG
 }, },

124 [
ZCAP_NET_ADMIN
] = { 1, (
pvÆue_t
 []Ë{ 
PRIV_SYS_NET_CONFIG
 }, },

126 [
ZCAP_NET_RAW
] = { 2, (
pvÆue_t
 []Ë{ 
PRIV_NET_RAWACCESS
,

127 
PRIV_NET_ICMPACCESS
 }, },

128 [
ZCAP_CHROOT
] = { 1, (
pvÆue_t
 []Ë{ 
PRIV_PROC_CHROOT
 }, },

129 [
ZCAP_NICE
] = { 1, (
pvÆue_t
 []Ë{ 
PRIV_PROC_PRIOCNTL
 }, },

130 [
ZCAP_PTRACE
] = { 1, (
pvÆue_t
 []Ë{ 
PRIV_PROC_SESSION
 }, },

131 [
ZCAP_DAC_OVERRIDE
] = { 2, (
pvÆue_t
 []Ë{ 
PRIV_FILE_DAC_EXECUTE
,

132 
PRIV_FILE_DAC_READ
,

133 
PRIV_FILE_DAC_SEARCH
,

134 
PRIV_FILE_DAC_WRITE
,

135 
PRIV_FILE_DAC_SEARCH
 }, },

136 [
ZCAP_READ_SEARCH
] = { 2, (
pvÆue_t
 []Ë{ 
PRIV_FILE_DAC_SEARCH
,

137 
PRIV_FILE_DAC_READ
 }, },

138 [
ZCAP_SYS_ADMIN
] = { 1, (
pvÆue_t
 []Ë{ 
PRIV_SYS_ADMIN
 }, },

139 [
ZCAP_FOWNER
] = { 1, (
pvÆue_t
 []Ë{ 
PRIV_FILE_OWNER
 }, },

143 #ifde‡
HAVE_LCAPS


146 
p£t_t
 *

147 
	$zˇps2sys
 (
zebø_ˇ∑bûôõs_t
 *
zˇps
, 
num
)

149 
p£t_t
 *
sysˇps
;

150 
i
, 
j
 = 0, 
cou¡
 = 0;

152 i‡(!
num
)

153  
NULL
;

156 
i
0; i < 
num
; i++)

157 
cou¡
 +
ˇp_m≠
[
zˇps
[
i
]].
num
;

159 i‡–(
sysˇps
 = 
	`XCALLOC
 (
MTYPE_PRIVS
, ((
p£t_t
Ë* 
num
))Ë=
NULL
)

161 
	`Ârötf
 (
°dîr
, "%s: couldÇŸáŒoˇã sysˇps!", 
__func__
);

162  
NULL
;

165 
sysˇps
->
ˇps
 = 
	`XCALLOC
 (
MTYPE_PRIVS
, ( (
pvÆue_t
Ë* 
cou¡
));

167 i‡(!
sysˇps
->
ˇps
)

169 
	`Ârötf
 (
°dîr
, "%s: couldÇŸ XCALLOC c≠s!", 
__func__
);

170  
NULL
;

174 
cou¡
 = 0;

175 
i
=0; i < 
num
; i++)

176 
j
 = 0; j < 
ˇp_m≠
[
zˇps
[
i
]].
num
; j++)

177 
sysˇps
->
ˇps
[
cou¡
++] = 
ˇp_m≠
[
zˇps
[
i
]].
sy°em_ˇps
[
j
];

180 
sysˇps
->
num
 = 
cou¡
;

182  
sysˇps
;

183 
	}
}

187 
	$z¥ivs_ch™ge_ˇps
 (
zebø_¥ivs_›s_t
 
›
)

189 
ˇp_Êag_vÆue_t
 
cÊag
;

192 
	`as£π
 (
z¥ivs_°©e
.
sysˇps_p
 && z¥ivs_°©e.
ˇps
);

193 i‡(! (
z¥ivs_°©e
.
sysˇps_p
 && z¥ivs_°©e.
ˇps
))

194 
	`exô
 (1);

196 i‡(
›
 =
ZPRIVS_RAISE
)

197 
cÊag
 = 
CAP_SET
;

198 i‡(
›
 =
ZPRIVS_LOWER
)

199 
cÊag
 = 
CAP_CLEAR
;

203 i‡–!
	`ˇp_£t_Êag
 (
z¥ivs_°©e
.
ˇps
, 
CAP_EFFECTIVE
,

204 
z¥ivs_°©e
.
sysˇps_p
->
num
,

205 
z¥ivs_°©e
.
sysˇps_p
->
ˇps
,

206 
cÊag
))

207  
	`ˇp_£t_¥oc
 (
z¥ivs_°©e
.
ˇps
);

209 
	}
}

211 
zebø_¥ivs_cuºít_t


212 
	$z¥ivs_°©e_ˇps
 ()

214 
i
;

215 
ˇp_Êag_vÆue_t
 
vÆ
;

218 
	`as£π
 (
z¥ivs_°©e
.
sysˇps_p
 && z¥ivs_°©e.
ˇps
);

219 i‡(! (
z¥ivs_°©e
.
sysˇps_p
 && z¥ivs_°©e.
ˇps
))

220 
	`exô
 (1);

222 
i
=0; i < 
z¥ivs_°©e
.
sysˇps_p
->
num
; i++)

224 i‡–
	`ˇp_gë_Êag
 (
z¥ivs_°©e
.
ˇps
, z¥ivs_°©e.
sysˇps_p
->ˇps[
i
],

225 
CAP_EFFECTIVE
, &
vÆ
) )

227 
	`zlog_w¨n
 ("zprivs_state_caps: couldÇot cap_get_flag, %s",

228 
	`ß„_°ªº‹
 (
î∫o
) );

229  
ZPRIVS_UNKNOWN
;

231 i‡(
vÆ
 =
CAP_SET
)

232  
ZPRIVS_RAISED
;

234  
ZPRIVS_LOWERED
;

235 
	}
}

238 
	$z¥ivs_ˇps_öô
 (
zebø_¥ivs_t
 *
z¥ivs
)

240 
z¥ivs_°©e
.
sysˇps_p
 = 
	`zˇps2sys
 (
z¥ivs
->
ˇps_p
, z¥ivs->
ˇp_num_p
);

241 
z¥ivs_°©e
.
sysˇps_i
 = 
	`zˇps2sys
 (
z¥ivs
->
ˇps_i
, z¥ivs->
ˇp_num_i
);

244 i‡–
	`¥˘l
(
PR_SET_KEEPCAPS
, 1, 0, 0, 0) == -1 )

246 
	`Ârötf
 (
°dîr
, "privs_init: couldÇot set PR_SET_KEEPCAPS, %s\n",

247 
	`ß„_°ªº‹
 (
î∫o
) );

248 
	`exô
(1);

251 i‡–!
z¥ivs_°©e
.
sysˇps_p
 )

253 
	`Ârötf
 (
°dîr
, "privs_init: capabilitiesÉnabled, "

258 i‡(
z¥ivs_°©e
.
zuid
)

260 i‡–
	`£åeuid
 (
z¥ivs_°©e
.
zuid
, zprivs_state.zuid) )

262 
	`Ârötf
 (
°dîr
, "zprivs_init (cap): couldÇot setreuid, %s\n",

263 
	`ß„_°ªº‹
 (
î∫o
));

264 
	`exô
 (1);

268 i‡–!(
z¥ivs_°©e
.
ˇps
 = 
	`ˇp_öô
()) )

270 
	`Ârötf
 (
°dîr
, "privs_init: failedÅo cap_init, %s\n",

271 
	`ß„_°ªº‹
 (
î∫o
));

272 
	`exô
 (1);

275 i‡–
	`ˇp_˛ór
 (
z¥ivs_°©e
.
ˇps
) )

277 
	`Ârötf
 (
°dîr
, "privs_init: failedÅo cap_clear, %s\n",

278 
	`ß„_°ªº‹
 (
î∫o
));

279 
	`exô
 (1);

283 
	`ˇp_£t_Êag
(
z¥ivs_°©e
.
ˇps
, 
CAP_PERMITTED
,

284 
z¥ivs_°©e
.
sysˇps_p
->
num
,

285 
z¥ivs_°©e
.
sysˇps_p
->
ˇps
,

286 
CAP_SET
);

289 i‡(
z¥ivs_°©e
.
sysˇps_i
 && z¥ivs_°©e.sysˇps_i->
num
)

291 
	`ˇp_£t_Êag
(
z¥ivs_°©e
.
ˇps
, 
CAP_INHERITABLE
,

292 
z¥ivs_°©e
.
sysˇps_i
->
num
,

293 
z¥ivs_°©e
.
sysˇps_i
->
ˇps
,

294 
CAP_SET
);

300 i‡–
	`ˇp_£t_¥oc
 (
z¥ivs_°©e
.
ˇps
) )

302 
	`Ârötf
 (
°dîr
, "privs_init: initial cap_set_proc failed\n");

303 
	`exô
 (1);

307 
z¥ivs
->
ch™ge
 = 
z¥ivs_ch™ge_ˇps
;

308 
z¥ivs
->
cuºít_°©e
 = 
z¥ivs_°©e_ˇps
;

309 
	}
}

312 
	$z¥ivs_ˇps_ãrmö©e
 ()

315 i‡(
z¥ivs_°©e
.
ˇps
)

316 
	`ˇp_˛ór
 (
z¥ivs_°©e
.
ˇps
);

319 i‡–
	`ˇp_£t_¥oc
 (
z¥ivs_°©e
.
ˇps
) )

321 
	`Ârötf
 (
°dîr
, "privs_terminate: cap_set_proc failed, %s",

322 
	`ß„_°ªº‹
 (
î∫o
) );

323 
	`exô
 (1);

327 i‡(
z¥ivs_°©e
.
sysˇps_p
->
num
)

329 
	`XFREE
 (
MTYPE_PRIVS
, 
z¥ivs_°©e
.
sysˇps_p
->
ˇps
);

330 
	`XFREE
 (
MTYPE_PRIVS
, 
z¥ivs_°©e
.
sysˇps_p
);

333 i‡(
z¥ivs_°©e
.
sysˇps_i
 && z¥ivs_°©e.sysˇps_i->
num
)

335 
	`XFREE
 (
MTYPE_PRIVS
, 
z¥ivs_°©e
.
sysˇps_i
->
ˇps
);

336 
	`XFREE
 (
MTYPE_PRIVS
, 
z¥ivs_°©e
.
sysˇps_i
);

339 
	`ˇp_‰ì
 (
z¥ivs_°©e
.
ˇps
);

340 
	}
}

341 #ñi‡
deföed
 (
HAVE_SOLARIS_CAPABILITIES
)

352 
p£t_t
 *

353 
	$zˇps2sys
 (
zebø_ˇ∑bûôõs_t
 *
zˇps
, 
num
)

355 
p£t_t
 *
sysˇps
;

356 
i
, 
j
 = 0;

358 i‡((
sysˇps
 = 
	`¥iv_Æloc£t
()Ë=
NULL
)

360 
	`Ârötf
 (
°dîr
, "%s: couldÇŸáŒoˇã sysˇps!\n", 
__func__
);

361 
	`exô
 (1);

364 
	`¥iv_em±y£t
 (
sysˇps
);

366 
i
=0; i < 
num
; i++)

367 
j
 = 0; j < 
ˇp_m≠
[
zˇps
[
i
]].
num
; j++)

368 
	`¥iv_add£t
 (
sysˇps
, 
ˇp_m≠
[
zˇps
[
i
]].
sy°em_ˇps
[
j
]);

370  
sysˇps
;

371 
	}
}

377 
	$z¥ivs_ch™ge_ˇps
 (
zebø_¥ivs_›s_t
 
›
)

381 
	`as£π
 (
z¥ivs_°©e
.
sysˇps_p
);

382 i‡(!
z¥ivs_°©e
.
sysˇps_p
)

384 
	`Ârötf
 (
°dîr
, "%s: Eek, missög c≠s!", 
__func__
);

385 
	`exô
 (1);

391 i‡(
›
 =
ZPRIVS_RAISE
)

392 
	`¥iv_c›y£t
 (
z¥ivs_°©e
.
sysˇps_p
, z¥ivs_°©e.
ˇps
);

393 i‡(
›
 =
ZPRIVS_LOWER
)

394 
	`¥iv_em±y£t
 (
z¥ivs_°©e
.
ˇps
);

398 i‡(
	`£ç¥iv
 (
PRIV_SET
, 
PRIV_EFFECTIVE
, 
z¥ivs_°©e
.
ˇps
) != 0)

402 
	}
}

405 
zebø_¥ivs_cuºít_t


406 
	$z¥ivs_°©e_ˇps
 ()

408 
zebø_¥ivs_cuºít_t
 
ªsu…
;

409 
p£t_t
 *
ef„˘ive
;

411 i‡–(
ef„˘ive
 = 
	`¥iv_Æloc£t
()Ë=
NULL
)

413 
	`Ârötf
 (
°dîr
, "%s: faûedÅÿgëÖriv_Æloc£t! %s\n", 
__func__
,

414 
	`ß„_°ªº‹
 (
î∫o
));

415  
ZPRIVS_UNKNOWN
;

418 i‡(
	`gëµriv
 (
PRIV_EFFECTIVE
, 
ef„˘ive
))

420 
	`Ârötf
 (
°dîr
, "%s: faûedÅÿgë sèã! %s\n", 
__func__
,

421 
	`ß„_°ªº‹
 (
î∫o
));

422 
ªsu…
 = 
ZPRIVS_UNKNOWN
;

426 i‡(
	`¥iv_i£m±y£t
 (
ef„˘ive
Ë=
B_TRUE
)

427 
ªsu…
 = 
ZPRIVS_LOWERED
;

429 
ªsu…
 = 
ZPRIVS_RAISED
;

432 i‡(
ef„˘ive
)

433 
	`¥iv_‰ì£t
 (
ef„˘ive
);

435  
ªsu…
;

436 
	}
}

439 
	$z¥ivs_ˇps_öô
 (
zebø_¥ivs_t
 *
z¥ivs
)

441 
p£t_t
 *
basic
;

442 
p£t_t
 *
em±y
;

445 
z¥ivs_°©e
.
sysˇps_p
 = 
	`zˇps2sys
 (
z¥ivs
->
ˇps_p
, z¥ivs->
ˇp_num_p
);

446 
z¥ivs_°©e
.
sysˇps_i
 = 
	`zˇps2sys
 (
z¥ivs
->
ˇps_i
, z¥ivs->
ˇp_num_i
);

449 i‡(!
z¥ivs_°©e
.
sysˇps_p
)

451 
	`Ârötf
 (
°dîr
, "%s: capabilitiesÉnabled, "

453 
__func__
);

460 i‡((
basic
 = 
	`¥iv_°r_to_£t
("basic", ",", 
NULL
)) == NULL)

462 
	`Ârötf
 (
°dîr
, "%s: couldn'àgë basi¯£t!\n", 
__func__
);

463 
	`exô
 (1);

467 
	`¥iv_uni⁄
 (
basic
, 
z¥ivs_°©e
.
sysˇps_p
);

468 
	`¥iv_‰ì£t
 (
basic
);

471 i‡–(
em±y
 = 
	`¥iv_Æloc£t
()Ë=
NULL
)

473 
	`Ârötf
 (
°dîr
, "%s: couldn'àgëÉm±y së!\n", 
__func__
);

474 
	`exô
 (1);

476 
	`¥iv_em±y£t
 (
em±y
);

481 i‡(
	`£çÊags
 (
PRIV_AWARE
, 1))

483 
	`Ârötf
 (
°dîr
, "%s:Éº‹ sëtög PRIV_AWARE!, %s\n", 
__func__
,

484 
	`ß„_°ªº‹
 (
î∫o
) );

485 
	`exô
 (1);

489 
	`as£π
 (
z¥ivs_°©e
.
sysˇps_i
 && z¥ivs_°©e.
sysˇps_p
);

494 i‡(
z¥ivs_°©e
.
zuid
)

496 i‡–
	`£åeuid
 (
z¥ivs_°©e
.
zuid
, zprivs_state.zuid) )

498 
	`Ârötf
 (
°dîr
, "%s: couldÇot setreuid, %s\n",

499 
__func__
, 
	`ß„_°ªº‹
 (
î∫o
));

500 
	`exô
 (1);

505 i‡(
	`£ç¥iv
 (
PRIV_SET
, 
PRIV_PERMITTED
, 
z¥ivs_°©e
.
sysˇps_p
))

507 
	`Ârötf
 (
°dîr
, "%s:Éº‹ sëtögÖîmôãd së!, %s\n", 
__func__
,

508 
	`ß„_°ªº‹
 (
î∫o
) );

509 
	`exô
 (1);

513 i‡(
	`£ç¥iv
 (
PRIV_SET
, 
PRIV_INHERITABLE
, 
z¥ivs_°©e
.
sysˇps_i
))

515 
	`Ârötf
 (
°dîr
, "%s:Éº‹ sëtög inhîôabÀ së!, %s\n", 
__func__
,

516 
	`ß„_°ªº‹
 (
î∫o
) );

517 
	`exô
 (1);

521 i‡(
	`£ç¥iv
 (
PRIV_SET
, 
PRIV_EFFECTIVE
, 
em±y
))

523 
	`Ârötf
 (
°dîr
, "%s:Éº‹ sëtögÉf„˘ivê£t!, %s\n", 
__func__
,

524 
	`ß„_°ªº‹
 (
î∫o
) );

525 
	`exô
 (1);

529 
z¥ivs_°©e
.
ˇps
 = 
em±y
;

532 
z¥ivs
->
ch™ge
 = 
z¥ivs_ch™ge_ˇps
;

533 
z¥ivs
->
cuºít_°©e
 = 
z¥ivs_°©e_ˇps
;

534 
	}
}

537 
	$z¥ivs_ˇps_ãrmö©e
 ()

539 
	`as£π
 (
z¥ivs_°©e
.
ˇps
);

542 
	`¥iv_em±y£t
 (
z¥ivs_°©e
.
ˇps
);

543 
	`£ç¥iv
 (
PRIV_SET
, 
PRIV_EFFECTIVE
, 
z¥ivs_°©e
.
ˇps
);

544 
	`£ç¥iv
 (
PRIV_SET
, 
PRIV_PERMITTED
, 
z¥ivs_°©e
.
ˇps
);

545 
	`£ç¥iv
 (
PRIV_SET
, 
PRIV_INHERITABLE
, 
z¥ivs_°©e
.
ˇps
);

548 i‡(
z¥ivs_°©e
.
sysˇps_p
)

549 
	`¥iv_‰ì£t
 (
z¥ivs_°©e
.
sysˇps_p
);

550 i‡(
z¥ivs_°©e
.
sysˇps_i
)

551 
	`¥iv_‰ì£t
 (
z¥ivs_°©e
.
sysˇps_i
);

553 
	`¥iv_‰ì£t
 (
z¥ivs_°©e
.
ˇps
);

554 
	}
}

561 
	$z¥ivs_ch™ge_uid
 (
zebø_¥ivs_›s_t
 
›
)

564 i‡(
›
 =
ZPRIVS_RAISE
)

565  
	`£ãuid
 (
z¥ivs_°©e
.
zsuid
);

566 i‡(
›
 =
ZPRIVS_LOWER
)

567  
	`£ãuid
 (
z¥ivs_°©e
.
zuid
);

570 
	}
}

572 
zebø_¥ivs_cuºít_t


573 
	$z¥ivs_°©e_uid
 ()

575  ( (
z¥ivs_°©e
.
zuid
 =
	`gëeuid
()Ë? 
ZPRIVS_LOWERED
 : 
ZPRIVS_RAISED
);

576 
	}
}

579 
	$z¥ivs_ch™ge_nuŒ
 (
zebø_¥ivs_›s_t
 
›
)

582 
	}
}

584 
zebø_¥ivs_cuºít_t


585 
	$z¥ivs_°©e_nuŒ
 ()

587  
z¥ivs_nuŒ_°©e
;

588 
	}
}

591 
	$z¥ivs_öô
(
zebø_¥ivs_t
 *
z¥ivs
)

593 
∑sswd
 *
pwíåy
 = 
NULL
;

594 
group
 *
gª¡ry
 = 
NULL
;

596 i‡(!
z¥ivs
)

598 
	`Ârötf
 (
°dîr
, "zprivs_init: called with NULLárg!\n");

599 
	`exô
 (1);

603 i‡(! (
z¥ivs
->
u£r
 || z¥ivs->
group


604 || 
z¥ivs
->
ˇp_num_p
 || z¥ivs->
ˇp_num_i
) )

606 
z¥ivs
->
ch™ge
 = 
z¥ivs_ch™ge_nuŒ
;

607 
z¥ivs
->
cuºít_°©e
 = 
z¥ivs_°©e_nuŒ
;

611 i‡(
z¥ivs
->
u£r
)

613 i‡–(
pwíåy
 = 
	`gëpw«m
 (
z¥ivs
->
u£r
)) )

615 
z¥ivs_°©e
.
zuid
 = 
pwíåy
->
pw_uid
;

620 
	`Ârötf
 (
°dîr
, "privs_init: couldÇotÜookup user %s\n",

621 
z¥ivs
->
u£r
);

622 
	`exô
 (1);

626 
gª¡ry
 = 
NULL
;

628 i‡(
z¥ivs
->
vty_group
)

631 i‡–(
gª¡ry
 = 
	`gëg∫am
 (
z¥ivs
->
vty_group
)) )

633 
z¥ivs_°©e
.
vtygΩ
 = 
gª¡ry
->
gr_gid
;

634 i‡–
	`£tgroups
 (1, &
z¥ivs_°©e
.
vtygΩ
) )

636 
	`Ârötf
 (
°dîr
, "privs_init: couldÇot setgroups, %s\n",

637 
	`ß„_°ªº‹
 (
î∫o
) );

638 
	`exô
 (1);

643 
	`Ârötf
 (
°dîr
, "privs_init: couldÇotÜookup vty group %s\n",

644 
z¥ivs
->
vty_group
);

645 
	`exô
 (1);

649 i‡(
z¥ivs
->
group
)

651 i‡–(
gª¡ry
 = 
	`gëg∫am
 (
z¥ivs
->
group
)) )

653 
z¥ivs_°©e
.
zgid
 = 
gª¡ry
->
gr_gid
;

657 
	`Ârötf
 (
°dîr
, "privs_init: couldÇotÜookup group %s\n",

658 
z¥ivs
->
group
);

659 
	`exô
 (1);

662 i‡–
	`£åegid
 (
z¥ivs_°©e
.
zgid
, zprivs_state.zgid) )

664 
	`Ârötf
 (
°dîr
, "zprivs_init: couldÇot setregid, %s\n",

665 
	`ß„_°ªº‹
 (
î∫o
) );

666 
	`exô
 (1);

670 #ifde‡
HAVE_CAPABILITIES


671 
	`z¥ivs_ˇps_öô
 (
z¥ivs
);

679 
z¥ivs_°©e
.
zsuid
 = 
	`gëeuid
();

680 i‡–
z¥ivs_°©e
.
zuid
 )

682 i‡–
	`£åeuid
 (-1, 
z¥ivs_°©e
.
zuid
) )

684 
	`Ârötf
 (
°dîr
, "privs_init (uid): couldÇot setreuid, %s\n",

685 
	`ß„_°ªº‹
 (
î∫o
));

686 
	`exô
 (1);

690 
z¥ivs
->
ch™ge
 = 
z¥ivs_ch™ge_uid
;

691 
z¥ivs
->
cuºít_°©e
 = 
z¥ivs_°©e_uid
;

693 
	}
}

696 
	$z¥ivs_ãrmö©e
 (
zebø_¥ivs_t
 *
z¥ivs
)

698 i‡(!
z¥ivs
)

700 
	`Ârötf
 (
°dîr
, "%s:Çÿ¥iv†°ru˘ giví,Åîmö©ög", 
__func__
);

701 
	`exô
 (0);

704 #ifde‡
HAVE_CAPABILITIES


705 
	`z¥ivs_ˇps_ãrmö©e
();

707 i‡(
z¥ivs_°©e
.
zuid
)

709 i‡–
	`£åeuid
 (
z¥ivs_°©e
.
zuid
, zprivs_state.zuid) )

711 
	`Ârötf
 (
°dîr
, "privs_terminate: couldÇot setreuid, %s",

712 
	`ß„_°ªº‹
 (
î∫o
) );

713 
	`exô
 (1);

718 
z¥ivs
->
ch™ge
 = 
z¥ivs_ch™ge_nuŒ
;

719 
z¥ivs
->
cuºít_°©e
 = 
z¥ivs_°©e_nuŒ
;

720 
z¥ivs_nuŒ_°©e
 = 
ZPRIVS_LOWERED
;

722 
	}
}

725 
	$z¥ivs_gë_ids
(
z¥ivs_ids_t
 *
ids
)

728 
ids
->
uid_¥iv
 = 
	`gëuid
();

729 (
z¥ivs_°©e
.
zuid
Ë? (
ids
->
uid_n‹mÆ
 = zprivs_state.zuid)

730 : (
ids
->
uid_n‹mÆ
 = -1);

731 (
z¥ivs_°©e
.
zgid
Ë? (
ids
->
gid_n‹mÆ
 = zprivs_state.zgid)

732 : (
ids
->
gid_n‹mÆ
 = -1);

733 (
z¥ivs_°©e
.
vtygΩ
Ë? (
ids
->
gid_vty
 = zprivs_state.vtygrp)

734 : (
ids
->
gid_vty
 = -1);

737 
	}
}

	@privs.h

24 #i‚de‡
_ZEBRA_PRIVS_H


25 
	#_ZEBRA_PRIVS_H


	)

30 
	mZCAP_SETID
,

31 
	mZCAP_BIND
,

32 
	mZCAP_NET_ADMIN
,

33 
	mZCAP_SYS_ADMIN
,

34 
	mZCAP_NET_RAW
,

35 
	mZCAP_CHROOT
,

36 
	mZCAP_NICE
,

37 
	mZCAP_PTRACE
,

38 
	mZCAP_DAC_OVERRIDE
,

39 
	mZCAP_READ_SEARCH
,

40 
	mZCAP_FOWNER
,

41 
	mZCAP_MAX


42 } 
	tzebø_ˇ∑bûôõs_t
;

46 
	mZPRIVS_LOWERED
,

47 
	mZPRIVS_RAISED
,

48 
	mZPRIVS_UNKNOWN
,

49 } 
	tzebø_¥ivs_cuºít_t
;

53 
	mZPRIVS_RAISE
,

54 
	mZPRIVS_LOWER
,

55 } 
	tzebø_¥ivs_›s_t
;

57 
	szebø_¥ivs_t


59 
zebø_ˇ∑bûôõs_t
 *
	mˇps_p
;

60 
zebø_ˇ∑bûôõs_t
 *
	mˇps_i
;

61 
	mˇp_num_p
;

62 
	mˇp_num_i
;

63 c⁄° *
	mu£r
;

64 c⁄° *
	mgroup
;

65 c⁄° *
	mvty_group
;

68 (*
	mch™ge
Ë(
	mzebø_¥ivs_›s_t
);

69 
	mzebø_¥ivs_cuºít_t


70 (*
	mcuºít_°©e
) ();

73 
	sz¥ivs_ids_t


76 
uid_t
 
	muid_¥iv
;

77 
uid_t
 
	muid_n‹mÆ
;

78 
gid_t
 
	mgid_¥iv
;

79 
gid_t
 
	mgid_n‹mÆ
;

80 
gid_t
 
	mgid_vty
;

84 
z¥ivs_öô
 (
zebø_¥ivs_t
 *
z¥ivs
);

86 
z¥ivs_ãrmö©e
 (
zebø_¥ivs_t
 *);

88 
z¥ivs_gë_ids
(
z¥ivs_ids_t
 *);

	@queue.h

33 #i‚de‡
_SYS_QUEUE_H_


34 
	#_SYS_QUEUE_H_


	)

103 #ifde‡
QUEUE_MACRO_DEBUG


105 
	sqm_åa˚
 {

106 * 
	mœ°fûe
;

107 
	mœ°löe
;

108 * 
	m¥evfûe
;

109 
	m¥evlöe
;

112 
	#TRACEBUF
 
qm_åa˚
 
åa˚
;

	)

113 
	#TRASHIT
(
x
Ëdÿ{(xË(*)-1;} 0)

	)

114 
	#QMD_SAVELINK
(
«me
, 
lök
Ë**«mê(*)&÷ök)

	)

116 
	#QMD_TRACE_HEAD
(
hód
) do { \

117 (
hód
)->
åa˚
.
¥evlöe
 = (hód)->åa˚.
œ°löe
; \

118 (
hód
)->
åa˚
.
¥evfûe
 = (hód)->åa˚.
œ°fûe
; \

119 (
hód
)->
åa˚
.
œ°löe
 = 
__LINE__
; \

120 (
hód
)->
åa˚
.
œ°fûe
 = 
__FILE__
; \

121 } 0)

	)

123 
	#QMD_TRACE_ELEM
(
ñem
) do { \

124 (
ñem
)->
åa˚
.
¥evlöe
 = (ñem)->åa˚.
œ°löe
; \

125 (
ñem
)->
åa˚
.
¥evfûe
 = (ñem)->åa˚.
œ°fûe
; \

126 (
ñem
)->
åa˚
.
œ°löe
 = 
__LINE__
; \

127 (
ñem
)->
åa˚
.
œ°fûe
 = 
__FILE__
; \

128 } 0)

	)

131 
	#QMD_TRACE_ELEM
(
ñem
)

	)

132 
	#QMD_TRACE_HEAD
(
hód
)

	)

133 
	#QMD_SAVELINK
(
«me
, 
lök
)

	)

134 
	#TRACEBUF


	)

135 
	#TRASHIT
(
x
)

	)

141 
	#SLIST_HEAD
(
«me
, 
ty≥
) \

142 
	s«me
 { \

143 
ty≥
 *
¶h_fú°
; \

144 }

	)

146 
	#SLIST_HEAD_INITIALIZER
(
hód
) \

147 { 
NULL
 }

	)

149 
	#SLIST_ENTRY
(
ty≥
) \

151 
ty≥
 *
¶e_√xt
; \

152 }

	)

157 
	#SLIST_EMPTY
(
hód
Ë((hód)->
¶h_fú°
 =
NULL
)

	)

159 
	#SLIST_FIRST
(
hód
Ë((hód)->
¶h_fú°
)

	)

161 
	#SLIST_FOREACH
(
v¨
, 
hód
, 
fõld
) \

162 (
v¨
Ë
	`SLIST_FIRST
((
hód
)); \

163 (
v¨
); \

164 (
v¨
Ë
	`SLIST_NEXT
((v¨), 
fõld
))

	)

166 
	#SLIST_FOREACH_SAFE
(
v¨
, 
hód
, 
fõld
, 
tv¨
) \

167 (
v¨
Ë
	`SLIST_FIRST
((
hód
)); \

168 (
v¨
Ë&& ((
tv¨
Ë
	`SLIST_NEXT
((v¨), 
fõld
), 1); \

169 (
v¨
Ë(
tv¨
))

	)

171 
	#SLIST_FOREACH_PREVPTR
(
v¨
, 
v¨p
, 
hód
, 
fõld
) \

172 (
v¨p
Ë&
	`SLIST_FIRST
((
hód
)); \

173 ((
v¨
Ë*(
v¨p
)Ë!
NULL
; \

174 (
v¨p
Ë&
	`SLIST_NEXT
((
v¨
), 
fõld
))

	)

176 
	#SLIST_INIT
(
hód
) do { \

177 
	`SLIST_FIRST
((
hód
)Ë
NULL
; \

178 } 0)

	)

180 
	#SLIST_INSERT_AFTER
(
¶i°ñm
, 
ñm
, 
fõld
) do { \

181 
	`SLIST_NEXT
((
ñm
), 
fõld
ËSLIST_NEXT((
¶i°ñm
), field); \

182 
	`SLIST_NEXT
((
¶i°ñm
), 
fõld
Ë(
ñm
); \

183 } 0)

	)

185 
	#SLIST_INSERT_HEAD
(
hód
, 
ñm
, 
fõld
) do { \

186 
	`SLIST_NEXT
((
ñm
), 
fõld
Ë
	`SLIST_FIRST
((
hód
)); \

187 
	`SLIST_FIRST
((
hód
)Ë(
ñm
); \

188 } 0)

	)

190 
	#SLIST_NEXT
(
ñm
, 
fõld
Ë(”lm)->fõld.
¶e_√xt
)

	)

192 
	#SLIST_REMOVE
(
hód
, 
ñm
, 
ty≥
, 
fõld
) do { \

193 
	`QMD_SAVELINK
(
ﬁd√xt
, (
ñm
)->
fõld
.
¶e_√xt
); \

194 i‡(
	`SLIST_FIRST
((
hód
)Ë=(
ñm
)) { \

195 
	`SLIST_REMOVE_HEAD
((
hód
), 
fõld
); \

198 
ty≥
 *
cuªlm
 = 
	`SLIST_FIRST
((
hód
)); \

199 
	`SLIST_NEXT
(
cuªlm
, 
fõld
Ë!(
ñm
)) \

200 
cuªlm
 = 
	`SLIST_NEXT
(cuªlm, 
fõld
); \

201 
	`SLIST_REMOVE_AFTER
(
cuªlm
, 
fõld
); \

203 
	`TRASHIT
(*
ﬁd√xt
); \

204 } 0)

	)

206 
	#SLIST_REMOVE_AFTER
(
ñm
, 
fõld
) do { \

207 
	`SLIST_NEXT
(
ñm
, 
fõld
) = \

208 
	`SLIST_NEXT
(SLIST_NEXT(
ñm
, 
fõld
), field); \

209 } 0)

	)

211 
	#SLIST_REMOVE_HEAD
(
hód
, 
fõld
) do { \

212 
	`SLIST_FIRST
((
hód
)Ë
	`SLIST_NEXT
(SLIST_FIRST((hód)), 
fõld
); \

213 } 0)

	)

215 
	#SLIST_SWAP
(
hód1
, 
hód2
, 
ty≥
) do { \

216 
ty≥
 *
sw≠_fú°
 = 
	`SLIST_FIRST
(
hód1
); \

217 
	`SLIST_FIRST
(
hód1
ËSLIST_FIRST(
hód2
); \

218 
	`SLIST_FIRST
(
hód2
Ë
sw≠_fú°
; \

219 } 0)

	)

224 
	#STAILQ_HEAD
(
«me
, 
ty≥
) \

225 
	s«me
 { \

226 
ty≥
 *
°qh_fú°
; \

227 
ty≥
 **
°qh_œ°
; \

228 }

	)

230 
	#STAILQ_HEAD_INITIALIZER
(
hód
) \

231 { 
NULL
, &(
hód
).
°qh_fú°
 }

	)

233 
	#STAILQ_ENTRY
(
ty≥
) \

235 
ty≥
 *
°qe_√xt
; \

236 }

	)

241 
	#STAILQ_CONCAT
(
hód1
, 
hód2
) do { \

242 i‡(!
	`STAILQ_EMPTY
((
hód2
))) { \

243 *(
hód1
)->
°qh_œ°
 = (
hód2
)->
°qh_fú°
; \

244 (
hód1
)->
°qh_œ°
 = (
hód2
)->stqh_last; \

245 
	`STAILQ_INIT
((
hód2
)); \

247 } 0)

	)

249 
	#STAILQ_EMPTY
(
hód
Ë((hód)->
°qh_fú°
 =
NULL
)

	)

251 
	#STAILQ_FIRST
(
hód
Ë((hód)->
°qh_fú°
)

	)

253 
	#STAILQ_FOREACH
(
v¨
, 
hód
, 
fõld
) \

254 (
v¨
Ë
	`STAILQ_FIRST
((
hód
)); \

255 (
v¨
); \

256 (
v¨
Ë
	`STAILQ_NEXT
((v¨), 
fõld
))

	)

259 
	#STAILQ_FOREACH_SAFE
(
v¨
, 
hód
, 
fõld
, 
tv¨
) \

260 (
v¨
Ë
	`STAILQ_FIRST
((
hód
)); \

261 (
v¨
Ë&& ((
tv¨
Ë
	`STAILQ_NEXT
((v¨), 
fõld
), 1); \

262 (
v¨
Ë(
tv¨
))

	)

264 
	#STAILQ_INIT
(
hód
) do { \

265 
	`STAILQ_FIRST
((
hód
)Ë
NULL
; \

266 (
hód
)->
°qh_œ°
 = &
	`STAILQ_FIRST
((head)); \

267 } 0)

	)

269 
	#STAILQ_INSERT_AFTER
(
hód
, 
tqñm
, 
ñm
, 
fõld
) do { \

270 i‡((
	`STAILQ_NEXT
((
ñm
), 
fõld
ËSTAILQ_NEXT((
tqñm
), fõld)Ë=
NULL
)\

271 (
hód
)->
°qh_œ°
 = &
	`STAILQ_NEXT
((
ñm
), 
fõld
); \

272 
	`STAILQ_NEXT
((
tqñm
), 
fõld
Ë(
ñm
); \

273 } 0)

	)

275 
	#STAILQ_INSERT_HEAD
(
hód
, 
ñm
, 
fõld
) do { \

276 i‡((
	`STAILQ_NEXT
((
ñm
), 
fõld
Ë
	`STAILQ_FIRST
((
hód
))Ë=
NULL
) \

277 (
hód
)->
°qh_œ°
 = &
	`STAILQ_NEXT
((
ñm
), 
fõld
); \

278 
	`STAILQ_FIRST
((
hód
)Ë(
ñm
); \

279 } 0)

	)

281 
	#STAILQ_INSERT_TAIL
(
hód
, 
ñm
, 
fõld
) do { \

282 
	`STAILQ_NEXT
((
ñm
), 
fõld
Ë
NULL
; \

283 *(
hód
)->
°qh_œ°
 = (
ñm
); \

284 (
hód
)->
°qh_œ°
 = &
	`STAILQ_NEXT
((
ñm
), 
fõld
); \

285 } 0)

	)

287 
	#STAILQ_LAST
(
hód
, 
ty≥
, 
fõld
) \

288 (
	`STAILQ_EMPTY
((
hód
)) ? \

289 
NULL
 : \

290 ((
ty≥
 *)(*) \

291 ((*)((
hód
)->
°qh_œ°
Ë- 
	`__off£tof
(
ty≥
, 
fõld
))))

	)

293 
	#STAILQ_NEXT
(
ñm
, 
fõld
Ë(”lm)->fõld.
°qe_√xt
)

	)

295 
	#STAILQ_REMOVE
(
hód
, 
ñm
, 
ty≥
, 
fõld
) do { \

296 
	`QMD_SAVELINK
(
ﬁd√xt
, (
ñm
)->
fõld
.
°qe_√xt
); \

297 i‡(
	`STAILQ_FIRST
((
hód
)Ë=(
ñm
)) { \

298 
	`STAILQ_REMOVE_HEAD
((
hód
), 
fõld
); \

301 
ty≥
 *
cuªlm
 = 
	`STAILQ_FIRST
((
hód
)); \

302 
	`STAILQ_NEXT
(
cuªlm
, 
fõld
Ë!(
ñm
)) \

303 
cuªlm
 = 
	`STAILQ_NEXT
(cuªlm, 
fõld
); \

304 
	`STAILQ_REMOVE_AFTER
(
hód
, 
cuªlm
, 
fõld
); \

306 
	`TRASHIT
(*
ﬁd√xt
); \

307 } 0)

	)

309 
	#STAILQ_REMOVE_AFTER
(
hód
, 
ñm
, 
fõld
) do { \

310 i‡((
	`STAILQ_NEXT
(
ñm
, 
fõld
) = \

311 
	`STAILQ_NEXT
(STAILQ_NEXT(
ñm
, 
fõld
), fõld)Ë=
NULL
) \

312 (
hód
)->
°qh_œ°
 = &
	`STAILQ_NEXT
((
ñm
), 
fõld
); \

313 } 0)

	)

315 
	#STAILQ_REMOVE_HEAD
(
hód
, 
fõld
) do { \

316 i‡((
	`STAILQ_FIRST
((
hód
)) = \

317 
	`STAILQ_NEXT
(
	`STAILQ_FIRST
((
hód
)), 
fõld
)Ë=
NULL
) \

318 (
hód
)->
°qh_œ°
 = &
	`STAILQ_FIRST
((head)); \

319 } 0)

	)

321 
	#STAILQ_SWAP
(
hód1
, 
hód2
, 
ty≥
) do { \

322 
ty≥
 *
sw≠_fú°
 = 
	`STAILQ_FIRST
(
hód1
); \

323 
ty≥
 **
sw≠_œ°
 = (
hód1
)->
°qh_œ°
; \

324 
	`STAILQ_FIRST
(
hód1
ËSTAILQ_FIRST(
hód2
); \

325 (
hód1
)->
°qh_œ°
 = (
hód2
)->stqh_last; \

326 
	`STAILQ_FIRST
(
hód2
Ë
sw≠_fú°
; \

327 (
hód2
)->
°qh_œ°
 = 
sw≠_œ°
; \

328 i‡(
	`STAILQ_EMPTY
(
hód1
)) \

329 (
hód1
)->
°qh_œ°
 = &
	`STAILQ_FIRST
(head1); \

330 i‡(
	`STAILQ_EMPTY
(
hód2
)) \

331 (
hód2
)->
°qh_œ°
 = &
	`STAILQ_FIRST
(head2); \

332 } 0)

	)

338 
	#LIST_HEAD
(
«me
, 
ty≥
) \

339 
	s«me
 { \

340 
ty≥
 *
lh_fú°
; \

341 }

	)

343 
	#LIST_HEAD_INITIALIZER
(
hód
) \

344 { 
NULL
 }

	)

346 
	#LIST_ENTRY
(
ty≥
) \

348 
ty≥
 *
À_√xt
; \

349 
ty≥
 **
À_¥ev
; \

350 }

	)

356 #i‡(
deföed
(
_KERNEL
Ë&& deföed(
INVARIANTS
))

357 
	#QMD_LIST_CHECK_HEAD
(
hód
, 
fõld
) do { \

358 i‡(
	`LIST_FIRST
((
hód
)Ë!
NULL
 && \

359 
	`LIST_FIRST
((
hód
))->
fõld
.
À_¥ev
 != \

360 &
	`LIST_FIRST
((
hód
))) \

361 
	`∑nic
("BadÜi° hód %∞fú°->¥ev !hód", (
hód
)); \

362 } 0)

	)

364 
	#QMD_LIST_CHECK_NEXT
(
ñm
, 
fõld
) do { \

365 i‡(
	`LIST_NEXT
((
ñm
), 
fõld
Ë!
NULL
 && \

366 
	`LIST_NEXT
((
ñm
), 
fõld
)->fõld.
À_¥ev
 != \

367 &((
ñm
)->
fõld
.
À_√xt
)) \

368 
	`∑nic
("BadÜökÉlm %∞√xt->¥ev !ñm", (
ñm
)); \

369 } 0)

	)

371 
	#QMD_LIST_CHECK_PREV
(
ñm
, 
fõld
) do { \

372 i‡(*(
ñm
)->
fõld
.
À_¥ev
 != (elm)) \

373 
	`∑nic
("BadÜökÉlm %∞¥ev->√xà!ñm", (
ñm
)); \

374 } 0)

	)

376 
	#QMD_LIST_CHECK_HEAD
(
hód
, 
fõld
)

	)

377 
	#QMD_LIST_CHECK_NEXT
(
ñm
, 
fõld
)

	)

378 
	#QMD_LIST_CHECK_PREV
(
ñm
, 
fõld
)

	)

381 
	#LIST_EMPTY
(
hód
Ë((hód)->
lh_fú°
 =
NULL
)

	)

383 
	#LIST_FIRST
(
hód
Ë((hód)->
lh_fú°
)

	)

385 
	#LIST_FOREACH
(
v¨
, 
hód
, 
fõld
) \

386 (
v¨
Ë
	`LIST_FIRST
((
hód
)); \

387 (
v¨
); \

388 (
v¨
Ë
	`LIST_NEXT
((v¨), 
fõld
))

	)

390 
	#LIST_FOREACH_SAFE
(
v¨
, 
hód
, 
fõld
, 
tv¨
) \

391 (
v¨
Ë
	`LIST_FIRST
((
hód
)); \

392 (
v¨
Ë&& ((
tv¨
Ë
	`LIST_NEXT
((v¨), 
fõld
), 1); \

393 (
v¨
Ë(
tv¨
))

	)

395 
	#LIST_INIT
(
hód
) do { \

396 
	`LIST_FIRST
((
hód
)Ë
NULL
; \

397 } 0)

	)

399 
	#LIST_INSERT_AFTER
(
li°ñm
, 
ñm
, 
fõld
) do { \

400 
	`QMD_LIST_CHECK_NEXT
(
li°ñm
, 
fõld
); \

401 i‡((
	`LIST_NEXT
((
ñm
), 
fõld
ËLIST_NEXT((
li°ñm
), fõld)Ë!
NULL
)\

402 
	`LIST_NEXT
((
li°ñm
), 
fõld
)->fõld.
À_¥ev
 = \

403 &
	`LIST_NEXT
((
ñm
), 
fõld
); \

404 
	`LIST_NEXT
((
li°ñm
), 
fõld
Ë(
ñm
); \

405 (
ñm
)->
fõld
.
À_¥ev
 = &
	`LIST_NEXT
((
li°ñm
), field); \

406 } 0)

	)

408 
	#LIST_INSERT_BEFORE
(
li°ñm
, 
ñm
, 
fõld
) do { \

409 
	`QMD_LIST_CHECK_PREV
(
li°ñm
, 
fõld
); \

410 (
ñm
)->
fõld
.
À_¥ev
 = (
li°ñm
)->field.le_prev; \

411 
	`LIST_NEXT
((
ñm
), 
fõld
Ë(
li°ñm
); \

412 *(
li°ñm
)->
fõld
.
À_¥ev
 = (
ñm
); \

413 (
li°ñm
)->
fõld
.
À_¥ev
 = &
	`LIST_NEXT
((
ñm
), field); \

414 } 0)

	)

416 
	#LIST_INSERT_HEAD
(
hód
, 
ñm
, 
fõld
) do { \

417 
	`QMD_LIST_CHECK_HEAD
((
hód
), 
fõld
); \

418 i‡((
	`LIST_NEXT
((
ñm
), 
fõld
Ë
	`LIST_FIRST
((
hód
))Ë!
NULL
) \

419 
	`LIST_FIRST
((
hód
))->
fõld
.
À_¥ev
 = &
	`LIST_NEXT
((
ñm
), field);\

420 
	`LIST_FIRST
((
hód
)Ë(
ñm
); \

421 (
ñm
)->
fõld
.
À_¥ev
 = &
	`LIST_FIRST
((
hód
)); \

422 } 0)

	)

424 
	#LIST_NEXT
(
ñm
, 
fõld
Ë(”lm)->fõld.
À_√xt
)

	)

426 
	#LIST_REMOVE
(
ñm
, 
fõld
) do { \

427 
	`QMD_SAVELINK
(
ﬁd√xt
, (
ñm
)->
fõld
.
À_√xt
); \

428 
	`QMD_SAVELINK
(
ﬁd¥ev
, (
ñm
)->
fõld
.
À_¥ev
); \

429 
	`QMD_LIST_CHECK_NEXT
(
ñm
, 
fõld
); \

430 
	`QMD_LIST_CHECK_PREV
(
ñm
, 
fõld
); \

431 i‡(
	`LIST_NEXT
((
ñm
), 
fõld
Ë!
NULL
) \

432 
	`LIST_NEXT
((
ñm
), 
fõld
)->fõld.
À_¥ev
 = \

433 (
ñm
)->
fõld
.
À_¥ev
; \

434 *(
ñm
)->
fõld
.
À_¥ev
 = 
	`LIST_NEXT
((elm), field); \

435 
	`TRASHIT
(*
ﬁd√xt
); \

436 
	`TRASHIT
(*
ﬁd¥ev
); \

437 } 0)

	)

439 
	#LIST_SWAP
(
hód1
, 
hód2
, 
ty≥
, 
fõld
) do { \

440 
ty≥
 *
sw≠_tmp
 = 
	`LIST_FIRST
((
hód1
)); \

441 
	`LIST_FIRST
((
hód1
)ËLIST_FIRST((
hód2
)); \

442 
	`LIST_FIRST
((
hód2
)Ë
sw≠_tmp
; \

443 i‡((
sw≠_tmp
 = 
	`LIST_FIRST
((
hód1
))Ë!
NULL
) \

444 
sw≠_tmp
->
fõld
.
À_¥ev
 = &
	`LIST_FIRST
((
hód1
)); \

445 i‡((
sw≠_tmp
 = 
	`LIST_FIRST
((
hód2
))Ë!
NULL
) \

446 
sw≠_tmp
->
fõld
.
À_¥ev
 = &
	`LIST_FIRST
((
hód2
)); \

447 } 0)

	)

452 
	#TAILQ_HEAD
(
«me
, 
ty≥
) \

453 
	s«me
 { \

454 
ty≥
 *
tqh_fú°
; \

455 
ty≥
 **
tqh_œ°
; \

456 
TRACEBUF
 \

457 }

	)

459 
	#TAILQ_HEAD_INITIALIZER
(
hód
) \

460 { 
NULL
, &(
hód
).
tqh_fú°
 }

	)

462 
	#TAILQ_ENTRY
(
ty≥
) \

464 
ty≥
 *
tqe_√xt
; \

465 
ty≥
 **
tqe_¥ev
; \

466 
TRACEBUF
 \

467 }

	)

472 #i‡(
deföed
(
_KERNEL
Ë&& deföed(
INVARIANTS
))

473 
	#QMD_TAILQ_CHECK_HEAD
(
hód
, 
fõld
) do { \

474 i‡(!
	`TAILQ_EMPTY
(
hód
) && \

475 
	`TAILQ_FIRST
((
hód
))->
fõld
.
tqe_¥ev
 != \

476 &
	`TAILQ_FIRST
((
hód
))) \

477 
	`∑nic
("BadÅaûq hód %∞fú°->¥ev !hód", (
hód
)); \

478 } 0)

	)

480 
	#QMD_TAILQ_CHECK_TAIL
(
hód
, 
fõld
) do { \

481 i‡(*(
hód
)->
tqh_œ°
 !
NULL
) \

482 
	`∑nic
("BadÅaûq NEXT(%p->tqh_œ°Ë!NULL", (
hód
)); \

483 } 0)

	)

485 
	#QMD_TAILQ_CHECK_NEXT
(
ñm
, 
fõld
) do { \

486 i‡(
	`TAILQ_NEXT
((
ñm
), 
fõld
Ë!
NULL
 && \

487 
	`TAILQ_NEXT
((
ñm
), 
fõld
)->fõld.
tqe_¥ev
 != \

488 &((
ñm
)->
fõld
.
tqe_√xt
)) \

489 
	`∑nic
("BadÜökÉlm %∞√xt->¥ev !ñm", (
ñm
)); \

490 } 0)

	)

492 
	#QMD_TAILQ_CHECK_PREV
(
ñm
, 
fõld
) do { \

493 i‡(*(
ñm
)->
fõld
.
tqe_¥ev
 != (elm)) \

494 
	`∑nic
("BadÜökÉlm %∞¥ev->√xà!ñm", (
ñm
)); \

495 } 0)

	)

497 
	#QMD_TAILQ_CHECK_HEAD
(
hód
, 
fõld
)

	)

498 
	#QMD_TAILQ_CHECK_TAIL
(
hód
, 
hód«me
)

	)

499 
	#QMD_TAILQ_CHECK_NEXT
(
ñm
, 
fõld
)

	)

500 
	#QMD_TAILQ_CHECK_PREV
(
ñm
, 
fõld
)

	)

503 
	#TAILQ_CONCAT
(
hód1
, 
hód2
, 
fõld
) do { \

504 i‡(!
	`TAILQ_EMPTY
(
hód2
)) { \

505 *(
hód1
)->
tqh_œ°
 = (
hód2
)->
tqh_fú°
; \

506 (
hód2
)->
tqh_fú°
->
fõld
.
tqe_¥ev
 = (
hód1
)->
tqh_œ°
; \

507 (
hód1
)->
tqh_œ°
 = (
hód2
)->tqh_last; \

508 
	`TAILQ_INIT
((
hód2
)); \

509 
	`QMD_TRACE_HEAD
(
hód1
); \

510 
	`QMD_TRACE_HEAD
(
hód2
); \

512 } 0)

	)

514 
	#TAILQ_EMPTY
(
hód
Ë((hód)->
tqh_fú°
 =
NULL
)

	)

516 
	#TAILQ_FIRST
(
hód
Ë((hód)->
tqh_fú°
)

	)

518 
	#TAILQ_FOREACH
(
v¨
, 
hód
, 
fõld
) \

519 (
v¨
Ë
	`TAILQ_FIRST
((
hód
)); \

520 (
v¨
); \

521 (
v¨
Ë
	`TAILQ_NEXT
((v¨), 
fõld
))

	)

523 
	#TAILQ_FOREACH_SAFE
(
v¨
, 
hód
, 
fõld
, 
tv¨
) \

524 (
v¨
Ë
	`TAILQ_FIRST
((
hód
)); \

525 (
v¨
Ë&& ((
tv¨
Ë
	`TAILQ_NEXT
((v¨), 
fõld
), 1); \

526 (
v¨
Ë(
tv¨
))

	)

528 
	#TAILQ_FOREACH_REVERSE
(
v¨
, 
hód
, 
hód«me
, 
fõld
) \

529 (
v¨
Ë
	`TAILQ_LAST
((
hód
), 
hód«me
); \

530 (
v¨
); \

531 (
v¨
Ë
	`TAILQ_PREV
((v¨), 
hód«me
, 
fõld
))

	)

533 
	#TAILQ_FOREACH_REVERSE_SAFE
(
v¨
, 
hód
, 
hód«me
, 
fõld
, 
tv¨
) \

534 (
v¨
Ë
	`TAILQ_LAST
((
hód
), 
hód«me
); \

535 (
v¨
Ë&& ((
tv¨
Ë
	`TAILQ_PREV
((v¨), 
hód«me
, 
fõld
), 1); \

536 (
v¨
Ë(
tv¨
))

	)

538 
	#TAILQ_INIT
(
hód
) do { \

539 
	`TAILQ_FIRST
((
hód
)Ë
NULL
; \

540 (
hód
)->
tqh_œ°
 = &
	`TAILQ_FIRST
((head)); \

541 
	`QMD_TRACE_HEAD
(
hód
); \

542 } 0)

	)

544 
	#TAILQ_INSERT_AFTER
(
hód
, 
li°ñm
, 
ñm
, 
fõld
) do { \

545 
	`QMD_TAILQ_CHECK_NEXT
(
li°ñm
, 
fõld
); \

546 i‡((
	`TAILQ_NEXT
((
ñm
), 
fõld
ËTAILQ_NEXT((
li°ñm
), fõld)Ë!
NULL
)\

547 
	`TAILQ_NEXT
((
ñm
), 
fõld
)->fõld.
tqe_¥ev
 = \

548 &
	`TAILQ_NEXT
((
ñm
), 
fõld
); \

550 (
hód
)->
tqh_œ°
 = &
	`TAILQ_NEXT
((
ñm
), 
fõld
); \

551 
	`QMD_TRACE_HEAD
(
hód
); \

553 
	`TAILQ_NEXT
((
li°ñm
), 
fõld
Ë(
ñm
); \

554 (
ñm
)->
fõld
.
tqe_¥ev
 = &
	`TAILQ_NEXT
((
li°ñm
), field); \

555 
	`QMD_TRACE_ELEM
(&(
ñm
)->
fõld
); \

556 
	`QMD_TRACE_ELEM
(&
li°ñm
->
fõld
); \

557 } 0)

	)

559 
	#TAILQ_INSERT_BEFORE
(
li°ñm
, 
ñm
, 
fõld
) do { \

560 
	`QMD_TAILQ_CHECK_PREV
(
li°ñm
, 
fõld
); \

561 (
ñm
)->
fõld
.
tqe_¥ev
 = (
li°ñm
)->field.tqe_prev; \

562 
	`TAILQ_NEXT
((
ñm
), 
fõld
Ë(
li°ñm
); \

563 *(
li°ñm
)->
fõld
.
tqe_¥ev
 = (
ñm
); \

564 (
li°ñm
)->
fõld
.
tqe_¥ev
 = &
	`TAILQ_NEXT
((
ñm
), field); \

565 
	`QMD_TRACE_ELEM
(&(
ñm
)->
fõld
); \

566 
	`QMD_TRACE_ELEM
(&
li°ñm
->
fõld
); \

567 } 0)

	)

569 
	#TAILQ_INSERT_HEAD
(
hód
, 
ñm
, 
fõld
) do { \

570 
	`QMD_TAILQ_CHECK_HEAD
(
hód
, 
fõld
); \

571 i‡((
	`TAILQ_NEXT
((
ñm
), 
fõld
Ë
	`TAILQ_FIRST
((
hód
))Ë!
NULL
) \

572 
	`TAILQ_FIRST
((
hód
))->
fõld
.
tqe_¥ev
 = \

573 &
	`TAILQ_NEXT
((
ñm
), 
fõld
); \

575 (
hód
)->
tqh_œ°
 = &
	`TAILQ_NEXT
((
ñm
), 
fõld
); \

576 
	`TAILQ_FIRST
((
hód
)Ë(
ñm
); \

577 (
ñm
)->
fõld
.
tqe_¥ev
 = &
	`TAILQ_FIRST
((
hód
)); \

578 
	`QMD_TRACE_HEAD
(
hód
); \

579 
	`QMD_TRACE_ELEM
(&(
ñm
)->
fõld
); \

580 } 0)

	)

582 
	#TAILQ_INSERT_TAIL
(
hód
, 
ñm
, 
fõld
) do { \

583 
	`QMD_TAILQ_CHECK_TAIL
(
hód
, 
fõld
); \

584 
	`TAILQ_NEXT
((
ñm
), 
fõld
Ë
NULL
; \

585 (
ñm
)->
fõld
.
tqe_¥ev
 = (
hód
)->
tqh_œ°
; \

586 *(
hód
)->
tqh_œ°
 = (
ñm
); \

587 (
hód
)->
tqh_œ°
 = &
	`TAILQ_NEXT
((
ñm
), 
fõld
); \

588 
	`QMD_TRACE_HEAD
(
hód
); \

589 
	`QMD_TRACE_ELEM
(&(
ñm
)->
fõld
); \

590 } 0)

	)

592 
	#TAILQ_LAST
(
hód
, 
hód«me
) \

593 (*(((
hód«me
 *)((
hód
)->
tqh_œ°
))->tqh_œ°))

	)

595 
	#TAILQ_NEXT
(
ñm
, 
fõld
Ë(”lm)->fõld.
tqe_√xt
)

	)

597 
	#TAILQ_PREV
(
ñm
, 
hód«me
, 
fõld
) \

598 (*(((
hód«me
 *)((
ñm
)->
fõld
.
tqe_¥ev
))->
tqh_œ°
))

	)

600 
	#TAILQ_REMOVE
(
hód
, 
ñm
, 
fõld
) do { \

601 
	`QMD_SAVELINK
(
ﬁd√xt
, (
ñm
)->
fõld
.
tqe_√xt
); \

602 
	`QMD_SAVELINK
(
ﬁd¥ev
, (
ñm
)->
fõld
.
tqe_¥ev
); \

603 
	`QMD_TAILQ_CHECK_NEXT
(
ñm
, 
fõld
); \

604 
	`QMD_TAILQ_CHECK_PREV
(
ñm
, 
fõld
); \

605 i‡((
	`TAILQ_NEXT
((
ñm
), 
fõld
)Ë!
NULL
) \

606 
	`TAILQ_NEXT
((
ñm
), 
fõld
)->fõld.
tqe_¥ev
 = \

607 (
ñm
)->
fõld
.
tqe_¥ev
; \

609 (
hód
)->
tqh_œ°
 = (
ñm
)->
fõld
.
tqe_¥ev
; \

610 
	`QMD_TRACE_HEAD
(
hód
); \

612 *(
ñm
)->
fõld
.
tqe_¥ev
 = 
	`TAILQ_NEXT
((elm), field); \

613 
	`TRASHIT
(*
ﬁd√xt
); \

614 
	`TRASHIT
(*
ﬁd¥ev
); \

615 
	`QMD_TRACE_ELEM
(&(
ñm
)->
fõld
); \

616 } 0)

	)

618 
	#TAILQ_SWAP
(
hód1
, 
hód2
, 
ty≥
, 
fõld
) do { \

619 
ty≥
 *
sw≠_fú°
 = (
hód1
)->
tqh_fú°
; \

620 
ty≥
 **
sw≠_œ°
 = (
hód1
)->
tqh_œ°
; \

621 (
hód1
)->
tqh_fú°
 = (
hód2
)->tqh_first; \

622 (
hód1
)->
tqh_œ°
 = (
hód2
)->tqh_last; \

623 (
hód2
)->
tqh_fú°
 = 
sw≠_fú°
; \

624 (
hód2
)->
tqh_œ°
 = 
sw≠_œ°
; \

625 i‡((
sw≠_fú°
 = (
hód1
)->
tqh_fú°
Ë!
NULL
) \

626 
sw≠_fú°
->
fõld
.
tqe_¥ev
 = &(
hód1
)->
tqh_fú°
; \

628 (
hód1
)->
tqh_œ°
 = &(hód1)->
tqh_fú°
; \

629 i‡((
sw≠_fú°
 = (
hód2
)->
tqh_fú°
Ë!
NULL
) \

630 
sw≠_fú°
->
fõld
.
tqe_¥ev
 = &(
hód2
)->
tqh_fú°
; \

632 (
hód2
)->
tqh_œ°
 = &(hód2)->
tqh_fú°
; \

633 } 0)

	)

	@regex-gnu.h

23 #i‚de‡
_REGEX_H


24 
	#_REGEX_H
 1

	)

27 #ifde‡
__˝lu•lus


34 #i‡!
deföed
 
_POSIX_C_SOURCE
 && !deföed 
_POSIX_SOURCE
 && deföed 
VMS


37 
	~<°ddef.h
>

44 
	ts_ªg_t
;

45 
	ta˘ive_ªg_t
;

52 
	tªg_sy¡ax_t
;

56 
	#RE_BACKSLASH_ESCAPE_IN_LISTS
 ((Ë1)

	)

61 
	#RE_BK_PLUS_QM
 (
RE_BACKSLASH_ESCAPE_IN_LISTS
 << 1)

	)

67 
	#RE_CHAR_CLASSES
 (
RE_BK_PLUS_QM
 << 1)

	)

81 
	#RE_CONTEXT_INDEP_ANCHORS
 (
RE_CHAR_CLASSES
 << 1)

	)

89 
	#RE_CONTEXT_INDEP_OPS
 (
RE_CONTEXT_INDEP_ANCHORS
 << 1)

	)

93 
	#RE_CONTEXT_INVALID_OPS
 (
RE_CONTEXT_INDEP_OPS
 << 1)

	)

97 
	#RE_DOT_NEWLINE
 (
RE_CONTEXT_INVALID_OPS
 << 1)

	)

101 
	#RE_DOT_NOT_NULL
 (
RE_DOT_NEWLINE
 << 1)

	)

105 
	#RE_HAT_LISTS_NOT_NEWLINE
 (
RE_DOT_NOT_NULL
 << 1)

	)

110 
	#RE_INTERVALS
 (
RE_HAT_LISTS_NOT_NEWLINE
 << 1)

	)

114 
	#RE_LIMITED_OPS
 (
RE_INTERVALS
 << 1)

	)

118 
	#RE_NEWLINE_ALT
 (
RE_LIMITED_OPS
 << 1)

	)

123 
	#RE_NO_BK_BRACES
 (
RE_NEWLINE_ALT
 << 1)

	)

127 
	#RE_NO_BK_PARENS
 (
RE_NO_BK_BRACES
 << 1)

	)

131 
	#RE_NO_BK_REFS
 (
RE_NO_BK_PARENS
 << 1)

	)

135 
	#RE_NO_BK_VBAR
 (
RE_NO_BK_REFS
 << 1)

	)

141 
	#RE_NO_EMPTY_RANGES
 (
RE_NO_BK_VBAR
 << 1)

	)

145 
	#RE_UNMATCHED_RIGHT_PAREN_ORD
 (
RE_NO_EMPTY_RANGES
 << 1)

	)

149 
	#RE_NO_POSIX_BACKTRACKING
 (
RE_UNMATCHED_RIGHT_PAREN_ORD
 << 1)

	)

153 
	#RE_NO_GNU_OPS
 (
RE_NO_POSIX_BACKTRACKING
 << 1)

	)

161 
	#RE_DEBUG
 (
RE_NO_GNU_OPS
 << 1)

	)

167 
ªg_sy¡ax_t
 
ª_sy¡ax_›ti⁄s
;

173 
	#RE_SYNTAX_EMACS
 0

	)

175 
	#RE_SYNTAX_AWK
 \

176 (
RE_BACKSLASH_ESCAPE_IN_LISTS
 | 
RE_DOT_NOT_NULL
 \

177 | 
RE_NO_BK_PARENS
 | 
RE_NO_BK_REFS
 \

178 | 
RE_NO_BK_VBAR
 | 
RE_NO_EMPTY_RANGES
 \

179 | 
RE_DOT_NEWLINE
 | 
RE_CONTEXT_INDEP_ANCHORS
 \

180 | 
RE_UNMATCHED_RIGHT_PAREN_ORD
 | 
RE_NO_GNU_OPS
)

	)

182 
	#RE_SYNTAX_GNU_AWK
 \

183 ((
RE_SYNTAX_POSIX_EXTENDED
 | 
RE_BACKSLASH_ESCAPE_IN_LISTS
 | 
RE_DEBUG
) \

184 & ~(
RE_DOT_NOT_NULL
 | 
RE_INTERVALS
 | 
RE_CONTEXT_INDEP_OPS
))

	)

186 
	#RE_SYNTAX_POSIX_AWK
 \

187 (
RE_SYNTAX_POSIX_EXTENDED
 | 
RE_BACKSLASH_ESCAPE_IN_LISTS
 \

188 | 
RE_INTERVALS
 | 
RE_NO_GNU_OPS
)

	)

190 
	#RE_SYNTAX_GREP
 \

191 (
RE_BK_PLUS_QM
 | 
RE_CHAR_CLASSES
 \

192 | 
RE_HAT_LISTS_NOT_NEWLINE
 | 
RE_INTERVALS
 \

193 | 
RE_NEWLINE_ALT
)

	)

195 
	#RE_SYNTAX_EGREP
 \

196 (
RE_CHAR_CLASSES
 | 
RE_CONTEXT_INDEP_ANCHORS
 \

197 | 
RE_CONTEXT_INDEP_OPS
 | 
RE_HAT_LISTS_NOT_NEWLINE
 \

198 | 
RE_NEWLINE_ALT
 | 
RE_NO_BK_PARENS
 \

199 | 
RE_NO_BK_VBAR
)

	)

201 
	#RE_SYNTAX_POSIX_EGREP
 \

202 (
RE_SYNTAX_EGREP
 | 
RE_INTERVALS
 | 
RE_NO_BK_BRACES
)

	)

205 
	#RE_SYNTAX_ED
 
RE_SYNTAX_POSIX_BASIC


	)

207 
	#RE_SYNTAX_SED
 
RE_SYNTAX_POSIX_BASIC


	)

210 
	#_RE_SYNTAX_POSIX_COMMON
 \

211 (
RE_CHAR_CLASSES
 | 
RE_DOT_NEWLINE
 | 
RE_DOT_NOT_NULL
 \

212 | 
RE_INTERVALS
 | 
RE_NO_EMPTY_RANGES
)

	)

214 
	#RE_SYNTAX_POSIX_BASIC
 \

215 (
_RE_SYNTAX_POSIX_COMMON
 | 
RE_BK_PLUS_QM
)

	)

220 
	#RE_SYNTAX_POSIX_MINIMAL_BASIC
 \

221 (
_RE_SYNTAX_POSIX_COMMON
 | 
RE_LIMITED_OPS
)

	)

223 
	#RE_SYNTAX_POSIX_EXTENDED
 \

224 (
_RE_SYNTAX_POSIX_COMMON
 | 
RE_CONTEXT_INDEP_ANCHORS
 \

225 | 
RE_CONTEXT_INDEP_OPS
 | 
RE_NO_BK_BRACES
 \

226 | 
RE_NO_BK_PARENS
 | 
RE_NO_BK_VBAR
 \

227 | 
RE_UNMATCHED_RIGHT_PAREN_ORD
)

	)

231 
	#RE_SYNTAX_POSIX_MINIMAL_EXTENDED
 \

232 (
_RE_SYNTAX_POSIX_COMMON
 | 
RE_CONTEXT_INDEP_ANCHORS
 \

233 | 
RE_CONTEXT_INVALID_OPS
 | 
RE_NO_BK_BRACES
 \

234 | 
RE_NO_BK_PARENS
 | 
RE_NO_BK_REFS
 \

235 | 
RE_NO_BK_VBAR
 | 
RE_UNMATCHED_RIGHT_PAREN_ORD
)

	)

241 #ifde‡
RE_DUP_MAX


242 #unde‡
RE_DUP_MAX


245 
	#RE_DUP_MAX
 (0x7fff)

	)

252 
	#REG_EXTENDED
 1

	)

256 
	#REG_ICASE
 (
REG_EXTENDED
 << 1)

	)

261 
	#REG_NEWLINE
 (
REG_ICASE
 << 1)

	)

265 
	#REG_NOSUB
 (
REG_NEWLINE
 << 1)

	)

275 
	#REG_NOTBOL
 1

	)

278 
	#REG_NOTEOL
 (1 << 1)

	)

285 #ifde‡
_XOPEN_SOURCE


286 
	gREG_ENOSYS
 = -1,

289 
	gREG_NOERROR
 = 0,

290 
	gREG_NOMATCH
,

294 
	gREG_BADPAT
,

295 
	gREG_ECOLLATE
,

296 
	gREG_ECTYPE
,

297 
	gREG_EESCAPE
,

298 
	gREG_ESUBREG
,

299 
	gREG_EBRACK
,

300 
	gREG_EPAREN
,

301 
	gREG_EBRACE
,

302 
	gREG_BADBR
,

303 
	gREG_ERANGE
,

304 
	gREG_ESPACE
,

305 
	gREG_BADRPT
,

308 
	gREG_EEND
,

309 
	gREG_ESIZE
,

310 
	gREG_ERPAREN


311 } 
	tªg_îrcode_t
;

319 #i‚de‡
RE_TRANSLATE_TYPE


320 
	#RE_TRANSLATE_TYPE
 *

	)

323 
	sª_∑âîn_buf„r


329 *
	gbuf„r
;

332 
	gÆloˇãd
;

335 
	gu£d
;

338 
ªg_sy¡ax_t
 
	gsy¡ax
;

343 *
	gÁ°m≠
;

349 
RE_TRANSLATE_TYPE
 
	gå™¶©e
;

352 
size_t
 
	gª_nsub
;

359 
	gˇn_be_nuŒ
 : 1;

365 
	#REGS_UNALLOCATED
 0

	)

366 
	#REGS_REALLOCATE
 1

	)

367 
	#REGS_FIXED
 2

	)

368 
	gªgs_Æloˇãd
 : 2;

372 
	gÁ°m≠_accuøã
 : 1;

376 
	gno_sub
 : 1;

380 
	gnŸ_bﬁ
 : 1;

383 
	gnŸ_eﬁ
 : 1;

386 
	g√wlöe_™ch‹
 : 1;

391 
ª_∑âîn_buf„r
 
	tªgex_t
;

394 
	tªgoff_t
;

399 
	sª_ªgi°îs


401 
	gnum_ªgs
;

402 
ªgoff_t
 *
	g°¨t
;

403 
ªgoff_t
 *
	gíd
;

410 #i‚de‡
RE_NREGS


411 
	#RE_NREGS
 30

	)

420 
ªgoff_t
 
	grm_so
;

421 
ªgoff_t
 
	grm_eo
;

422 } 
	tªgm©ch_t
;

432 #i‡
__STDC__


434 
	#_RE_ARGS
(
¨gs
Ë
	)
args

438 
	#_RE_ARGS
(
¨gs
Ë()

	)

444 
ªg_sy¡ax_t
 
ª_£t_sy¡ax
 
_RE_ARGS
 (‘eg_sy¡ax_à
sy¡ax
));

449 c⁄° *
ª_compûe_∑âîn


450 
_RE_ARGS
 ((c⁄° *
∑âîn
, 
size_t
 
Àngth
,

451 
ª_∑âîn_buf„r
 *
buf„r
));

457 
ª_compûe_Á°m≠
 
_RE_ARGS
 ((
ª_∑âîn_buf„r
 *
buf„r
));

465 
ª_£¨ch


466 
_RE_ARGS
 ((
ª_∑âîn_buf„r
 *
buf„r
, c⁄° *
°rög
,

467 
Àngth
, 
°¨t
, 
ønge
, 
ª_ªgi°îs
 *
ªgs
));

472 
ª_£¨ch_2


473 
_RE_ARGS
 ((
ª_∑âîn_buf„r
 *
buf„r
, c⁄° *
°rög1
,

474 
Àngth1
, c⁄° *
°rög2
, 
Àngth2
,

475 
°¨t
, 
ønge
, 
ª_ªgi°îs
 *
ªgs
, 
°›
));

480 
ª_m©ch


481 
_RE_ARGS
 ((
ª_∑âîn_buf„r
 *
buf„r
, c⁄° *
°rög
,

482 
Àngth
, 
°¨t
, 
ª_ªgi°îs
 *
ªgs
));

486 
ª_m©ch_2


487 
_RE_ARGS
 ((
ª_∑âîn_buf„r
 *
buf„r
, c⁄° *
°rög1
,

488 
Àngth1
, c⁄° *
°rög2
, 
Àngth2
,

489 
°¨t
, 
ª_ªgi°îs
 *
ªgs
, 
°›
));

504 
ª_£t_ªgi°îs


505 
_RE_ARGS
 ((
ª_∑âîn_buf„r
 *
buf„r
, 
ª_ªgi°îs
 *
ªgs
,

506 
num_ªgs
, 
ªgoff_t
 *
°¨ts
,Ñegoff_à*
íds
));

508 #i‡
deföed
 
_REGEX_RE_COMP
 || deföed 
_LIBC


509 #i‚de‡
_CRAY


511 *
ª_comp
 
_RE_ARGS
 ((const *));

512 
ª_exec
 
_RE_ARGS
 ((const *));

517 
ªgcomp
 
_RE_ARGS
 ((
ªgex_t
 *
__¥eg
, c⁄° *
__∑âîn
,

518 
__cÊags
));

520 
ªgexec
 
_RE_ARGS
 ((c⁄° 
ªgex_t
 *
__¥eg
,

521 c⁄° *
__°rög
, 
size_t
 
__nm©ch
,

522 
ªgm©ch_t
 
__pm©ch
[], 
__eÊags
));

524 
size_t
 
ªgîr‹
 
_RE_ARGS
 ((
__îrcode
, c⁄° 
ªgex_t
 *
__¥eg
,

525 *
__îrbuf
, 
size_t
 
__îrbuf_size
));

527 
ªg‰ì
 
_RE_ARGS
 ((
ªgex_t
 *
__¥eg
));

530 #ifde‡
__˝lu•lus


	@regex.c

23 #i‡
deföed
 
_AIX
 && !deföed 
REGEX_MALLOC


24 #¥agm®
Æloˇ


27 #unde‡
_GNU_SOURCE


28 
	#_GNU_SOURCE


	)

31 
	~<c⁄fig.h
>

33 #ifde‡
_WIN32


35 
	~<¥o˚ss.h
>

38 #i‚de‡
PARAMS


39 #i‡
deföed
 
__GNUC__
 || (deföed 
__STDC__
 && __STDC__)

40 
	#PARAMS
(
¨gs
Ë
	)
args

42 
	#PARAMS
(
¨gs
Ë()

	)

46 #i‡
deföed
 
STDC_HEADERS
 && !deföed 
emacs


47 
	~<°ddef.h
>

50 
	~<sys/ty≥s.h
>

53 
	#WIDE_CHAR_SUPPORT
 (
HAVE_WCTYPE_H
 && 
HAVE_WCHAR_H
 && 
HAVE_BTOWC
)

	)

57 #i‡
deföed
 
_LIBC
 || 
WIDE_CHAR_SUPPORT


59 
	~<wch¨.h
>

60 
	~<w˘y≥.h
>

63 #ifde‡
_LIBC


65 
	#ªg‰ì
(
¥eg
Ë
	`__ªg‰ì
 (¥eg)

	)

66 
	#ªgexec
(
¥
, 
°
, 
nm
, 
pm
, 
ef
Ë
	`__ªgexec
 (¥, st,Çm,Öm,Éf)

	)

67 
	#ªgcomp
(
¥eg
, 
∑âîn
, 
cÊags
Ë
	`__ªgcomp
 (¥eg,Ö©ã∫, cÊags)

	)

68 
	#ªgîr‹
(
îrcode
, 
¥eg
, 
îrbuf
, 
îrbuf_size
) \

69 
	`__ªgîr‹
(
îrcode
, 
¥eg
, 
îrbuf
, 
îrbuf_size
)

	)

70 
	#ª_£t_ªgi°îs
(
bu
, 
ª
, 
nu
, 
°
, 
í
) \

71 
	`__ª_£t_ªgi°îs
 (
bu
, 
ª
, 
nu
, 
°
, 
í
)

	)

72 
	#ª_m©ch_2
(
buÂ
, 
°rög1
, 
size1
, 
°rög2
, 
size2
, 
pos
, 
ªgs
, 
°›
) \

73 
	`__ª_m©ch_2
 (
buÂ
, 
°rög1
, 
size1
, 
°rög2
, 
size2
, 
pos
, 
ªgs
, 
°›
)

	)

74 
	#ª_m©ch
(
buÂ
, 
°rög
, 
size
, 
pos
, 
ªgs
) \

75 
	`__ª_m©ch
 (
buÂ
, 
°rög
, 
size
, 
pos
, 
ªgs
)

	)

76 
	#ª_£¨ch
(
buÂ
, 
°rög
, 
size
, 
°¨ços
, 
ønge
, 
ªgs
) \

77 
	`__ª_£¨ch
 (
buÂ
, 
°rög
, 
size
, 
°¨ços
, 
ønge
, 
ªgs
)

	)

78 
	#ª_compûe_∑âîn
(
∑âîn
, 
Àngth
, 
buÂ
) \

79 
	`__ª_compûe_∑âîn
 (
∑âîn
, 
Àngth
, 
buÂ
)

	)

80 
	#ª_£t_sy¡ax
(
sy¡ax
Ë
	`__ª_£t_sy¡ax
 (sy¡ax)

	)

81 
	#ª_£¨ch_2
(
buÂ
, 
°1
, 
s1
, 
°2
, 
s2
, 
°¨ços
, 
ønge
, 
ªgs
, 
°›
) \

82 
	`__ª_£¨ch_2
 (
buÂ
, 
°1
, 
s1
, 
°2
, 
s2
, 
°¨ços
, 
ønge
, 
ªgs
, 
°›
)

	)

83 
	#ª_compûe_Á°m≠
(
buÂ
Ë
	`__ª_compûe_Á°m≠
 (buÂ)

	)

85 
	#btowc
 
__btowc


	)

89 #i‡
HAVE_LIBINTL_H
 || 
deföed
 
_LIBC


90 
	~<liböé.h
>

92 
	#gëãxt
(
msgid
Ë(msgid)

	)

95 #i‚de‡
gëãxt_no›


98 
	#gëãxt_no›
(
Såög
Ë
	)
String

103 #ifde‡
emacs


105 
	~"li•.h
"

106 
	~"buf„r.h
"

107 
	~"sy¡ax.h
"

114 #unde‡
REL_ALLOC


116 #i‡
deföed
 
STDC_HEADERS
 || deföed 
_LIBC


117 
	~<°dlib.h
>

119 *
mÆloc
 ();

120 *
ªÆloc
 ();

125 #ifde‡
INHIBIT_STRING_HEADER


126 #i‡!(
deföed
 
HAVE_BZERO
 && deföed 
HAVE_BCOPY
)

127 #i‡!
deföed
 
bzîo
 && !deföed 
bc›y


128 #unde‡
INHIBIT_STRING_HEADER


136 #i‚de‡
INHIBIT_STRING_HEADER


137 #i‡
deföed
 
HAVE_STRING_H
 || deföed 
STDC_HEADERS
 || deföed 
_LIBC


138 
	~<°rög.h
>

139 #i‚de‡
bzîo


140 #i‚de‡
_LIBC


141 
	#bzîo
(
s
, 
n
Ë(
	`mem£t
 (s, '\0',Ç), (s))

	)

143 
	#bzîo
(
s
, 
n
Ë
	`__bzîo
 (s,Ç)

	)

147 
	~<°rögs.h
>

148 #i‚de‡
memcmp


149 
	#memcmp
(
s1
, 
s2
, 
n
Ë
	`bcmp
 (s1, s2,Ç)

	)

151 #i‚de‡
mem˝y


152 
	#mem˝y
(
d
, 
s
, 
n
Ë(
	`bc›y
 (s, d,Ç), (d))

	)

161 #i‚de‡
Sw‹d


162 
	#Sw‹d
 1

	)

165 #ifde‡
SWITCH_ENUM_BUG


166 
	#SWITCH_ENUM_CAST
(
x
Ë(()(x))

	)

168 
	#SWITCH_ENUM_CAST
(
x
Ë(x)

	)

172 
	#CHAR_SET_SIZE
 256

	)

174 #ifde‡
SYNTAX_TABLE


176 *
ª_sy¡ax_èbÀ
;

180 
	gª_sy¡ax_èbÀ
[
CHAR_SET_SIZE
];

183 
	$öô_sy¡ax_⁄˚
 ()

185 
c
;

186 
d⁄e
;

188 i‡(
d⁄e
)

191 
	`mem£t
 (
ª_sy¡ax_èbÀ
, 0, Ñe_syntax_table);

193 
c
 = 'a'; c <= 'z'; c++)

194 
ª_sy¡ax_èbÀ
[
c
] = 
Sw‹d
;

196 
c
 = 'A'; c <= 'Z'; c++)

197 
ª_sy¡ax_èbÀ
[
c
] = 
Sw‹d
;

199 
c
 = '0'; c <= '9'; c++)

200 
ª_sy¡ax_èbÀ
[
c
] = 
Sw‹d
;

202 
ª_sy¡ax_èbÀ
['_'] = 
Sw‹d
;

204 
d⁄e
 = 1;

205 
	}
}

209 
	#SYNTAX
(
c
Ë
ª_sy¡ax_èbÀ
[c]

	)

214 
	~<ªgex-gnu.h
>

217 
	~<˘y≥.h
>

231 #unde‡
ISASCII


232 #i‡
deföed
 
STDC_HEADERS
 || (!deföed 
ißscii
 && !deföed 
HAVE_ISASCII
)

233 
	#ISASCII
(
c
Ë1

	)

235 
	#ISASCII
(
c
Ë
	`ißscii
(c)

	)

238 #ifde‡
isbœnk


239 
	#ISBLANK
(
c
Ë(
	`ISASCII
 (cË&& 
	`isbœnk
 (c))

	)

241 
	#ISBLANK
(
c
Ë((cË=' ' || (cË='\t')

	)

243 #ifde‡
isgøph


244 
	#ISGRAPH
(
c
Ë(
	`ISASCII
 (cË&& 
	`isgøph
 (c))

	)

246 
	#ISGRAPH
(
c
Ë(
	`ISASCII
 (cË&& 
	`i•röt
 (cË&& !
	`is•a˚
 (c))

	)

249 #unde‡
ISPRINT


250 
	#ISPRINT
(
c
Ë(
	`ISASCII
 (cË&& 
	`i•röt
 (c))

	)

251 
	#ISDIGIT
(
c
Ë(
	`ISASCII
 (cË&& 
	`isdigô
 (c))

	)

252 
	#ISALNUM
(
c
Ë(
	`ISASCII
 (cË&& 
	`iß um
 (c))

	)

253 
	#ISALPHA
(
c
Ë(
	`ISASCII
 (cË&& 
	`ißÕha
 (c))

	)

254 
	#ISCNTRL
(
c
Ë(
	`ISASCII
 (cË&& 
	`is˙ål
 (c))

	)

255 
	#ISLOWER
(
c
Ë(
	`ISASCII
 (cË&& 
	`i¶owî
 (c))

	)

256 
	#ISPUNCT
(
c
Ë(
	`ISASCII
 (cË&& 
	`i•un˘
 (c))

	)

257 
	#ISSPACE
(
c
Ë(
	`ISASCII
 (cË&& 
	`is•a˚
 (c))

	)

258 
	#ISUPPER
(
c
Ë(
	`ISASCII
 (cË&& 
	`isuµî
 (c))

	)

259 
	#ISXDIGIT
(
c
Ë(
	`ISASCII
 (cË&& 
	`isxdigô
 (c))

	)

261 #ifde‡
_tﬁowî


262 
	#TOLOWER
(
c
Ë
	`_tﬁowî
(c)

	)

264 
	#TOLOWER
(
c
Ë
	`tﬁowî
(c)

	)

267 #i‚de‡
NULL


268 
	#NULL
 (*)0

	)

275 #unde‡
SIGN_EXTEND_CHAR


276 #i‡
__STDC__


277 
	#SIGN_EXTEND_CHAR
(
c
Ë((sig√d Ë(c))

	)

280 
	#SIGN_EXTEND_CHAR
(
c
Ë((((Ë(c)Ë^ 128Ë- 128)

	)

293 #ifde‡
REGEX_MALLOC


295 
	#REGEX_ALLOCATE
 
mÆloc


	)

296 
	#REGEX_REALLOCATE
(
sour˚
, 
osize
, 
nsize
Ë
	`ªÆloc
 (sour˚,Çsize)

	)

297 
	#REGEX_FREE
 
‰ì


	)

302 #i‚de‡
Æloˇ


305 #ifde‡
__GNUC__


306 
	#Æloˇ
 
__buûtö_Æloˇ


	)

308 #i‡
HAVE_ALLOCA_H


309 
	~<Æloˇ.h
>

315 
	#REGEX_ALLOCATE
 
Æloˇ


	)

318 
	#REGEX_REALLOCATE
(
sour˚
, 
osize
, 
nsize
) \

319 (
de°ö©i⁄
 = (*Ë
	`Æloˇ
 (
nsize
), \

320 
	`mem˝y
 (
de°ö©i⁄
, 
sour˚
, 
osize
))

	)

323 
	#REGEX_FREE
(
¨g
Ë(()0Ë

	)

329 #i‡
deföed
 
REL_ALLOC
 && deföed 
REGEX_MALLOC


331 
	#REGEX_ALLOCATE_STACK
(
size
) \

332 
	`r_Æloc
 (&
Áûuª_°ack_±r
, (
size
))

	)

333 
	#REGEX_REALLOCATE_STACK
(
sour˚
, 
osize
, 
nsize
) \

334 
	`r_ª_Æloc
 (&
Áûuª_°ack_±r
, (
nsize
))

	)

335 
	#REGEX_FREE_STACK
(
±r
) \

336 
	`r_Æloc_‰ì
 (&
Áûuª_°ack_±r
)

	)

340 #ifde‡
REGEX_MALLOC


342 
	#REGEX_ALLOCATE_STACK
 
mÆloc


	)

343 
	#REGEX_REALLOCATE_STACK
(
sour˚
, 
osize
, 
nsize
Ë
	`ªÆloc
 (sour˚,Çsize)

	)

344 
	#REGEX_FREE_STACK
 
‰ì


	)

348 
	#REGEX_ALLOCATE_STACK
 
Æloˇ


	)

350 
	#REGEX_REALLOCATE_STACK
(
sour˚
, 
osize
, 
nsize
) \

351 
	`REGEX_REALLOCATE
 (
sour˚
, 
osize
, 
nsize
)

	)

353 
	#REGEX_FREE_STACK
(
¨g
)

	)

362 
	#FIRST_STRING_P
(
±r
) \

363 (
size1
 && 
°rög1
 <(
±r
Ë&& (±rË<°rög1 + size1)

	)

366 
	#TALLOC
(
n
, 
t
Ë(— *Ë
	`mÆloc
 (“Ë*  (t)))

	)

367 
	#RETALLOC
(
addr
, 
n
, 
t
Ë(◊ddrË— *Ë
	`ªÆloc
 (addr, (nË*  (t)))

	)

368 
	#RETALLOC_IF
(
addr
, 
n
, 
t
) \

369 i‡(
addr
Ë
	`RETALLOC
(◊ddr), (
n
), 
t
); ◊ddrË
	`TALLOC
 (“),Å)

	)

370 
	#REGEX_TALLOC
(
n
, 
t
Ë(— *Ë
	`REGEX_ALLOCATE
 (“Ë*  (t)))

	)

372 
	#BYTEWIDTH
 8

	)

374 
	#STREQ
(
s1
, 
s2
Ë((
	`°rcmp
 (s1, s2Ë=0))

	)

376 #unde‡
MAX


377 #unde‡
MIN


378 
	#MAX
(
a
, 
b
Ë(◊Ë> (bË? (aË: (b))

	)

379 
	#MIN
(
a
, 
b
Ë(◊Ë< (bË? (aË: (b))

	)

381 
	tboﬁón
;

382 
	#Ál£
 0

	)

383 
	#åue
 1

	)

385 
ª_m©ch_2_öã∫Æ
 
PARAMS
 ((
ª_∑âîn_buf„r
 *
buÂ
,

386 c⁄° *
°rög1
, 
size1
,

387 c⁄° *
°rög2
, 
size2
,

388 
pos
,

389 
ª_ªgi°îs
 *
ªgs
,

390 
°›
));

399 
	mno_›
 = 0,

402 
	msuc˚ed
,

405 
	mexa˘n
,

408 
	m™ych¨
,

416 
	mch¨£t
,

420 
	mch¨£t_nŸ
,

429 
	m°¨t_mem‹y
,

438 
	m°›_mem‹y
,

442 
	mdu∂iˇã
,

445 
	mbeglöe
,

448 
	mídlöe
,

452 
	mbegbuf
,

455 
	mídbuf
,

458 
	mjump
,

461 
	mjump_∑°_Æt
,

465 
	m⁄_Áûuª_jump
,

469 
	m⁄_Áûuª_kìp_°rög_jump
,

473 
	mp›_Áûuª_jump
,

482 
	mmaybe_p›_jump
,

489 
	mdummy_Áûuª_jump
,

493 
	mpush_dummy_Áûuª
,

497 
	msuc˚ed_n
,

501 
	mjump_n
,

506 
	m£t_numbî_©
,

508 
	mw‹dch¨
,

509 
	mnŸw‹dch¨
,

511 
	mw‹dbeg
,

512 
	mw‹díd
,

514 
	mw‹dbound
,

515 
	mnŸw‹dbound


517 #ifde‡
emacs


518 ,
	mbef‹e_dŸ
,

519 
	m©_dŸ
,

520 
	ma·î_dŸ
,

524 
	msy¡ax•ec
,

527 
	mnŸsy¡ax•ec


529 } 
	tª_›code_t
;

535 
	#STORE_NUMBER
(
de°ö©i⁄
, 
numbî
) \

537 (
de°ö©i⁄
)[0] = (
numbî
) & 0377; \

538 (
de°ö©i⁄
)[1] = (
numbî
) >> 8; \

539 } 0)

	)

545 
	#STORE_NUMBER_AND_INCR
(
de°ö©i⁄
, 
numbî
) \

547 
	`STORE_NUMBER
 (
de°ö©i⁄
, 
numbî
); \

548 (
de°ö©i⁄
) += 2; \

549 } 0)

	)

554 
	#EXTRACT_NUMBER
(
de°ö©i⁄
, 
sour˚
) \

556 (
de°ö©i⁄
Ë*(
sour˚
) & 0377; \

557 (
de°ö©i⁄
Ë+
	`SIGN_EXTEND_CHAR
 (*((
sour˚
) + 1)) << 8; \

558 } 0)

	)

560 #ifde‡
DEBUG


561 
exåa˘_numbî
 
_RE_ARGS
 ((*
de°
, *
sour˚
));

563 
	$exåa˘_numbî
 (
de°
, 
sour˚
)

564 *
de°
;

565 *
sour˚
;

567 
ãmp
 = 
	`SIGN_EXTEND_CHAR
 (*(
sour˚
 + 1));

568 *
de°
 = *
sour˚
 & 0377;

569 *
de°
 +
ãmp
 << 8;

570 
	}
}

572 #i‚de‡
EXTRACT_MACROS


573 #unde‡
EXTRACT_NUMBER


574 
	#EXTRACT_NUMBER
(
de°
, 
§c
Ë
	`exåa˘_numbî
 (&de°, src)

	)

582 
	#EXTRACT_NUMBER_AND_INCR
(
de°ö©i⁄
, 
sour˚
) \

584 
	`EXTRACT_NUMBER
 (
de°ö©i⁄
, 
sour˚
); \

585 (
sour˚
) += 2; \

586 } 0)

	)

588 #ifde‡
DEBUG


589 
exåa˘_numbî_™d_ö¸
 
_RE_ARGS
 ((*
de°ö©i⁄
,

590 **
sour˚
));

592 
	$exåa˘_numbî_™d_ö¸
 (
de°ö©i⁄
, 
sour˚
)

593 *
de°ö©i⁄
;

594 **
sour˚
;

596 
	`exåa˘_numbî
 (
de°ö©i⁄
, *
sour˚
);

597 *
sour˚
 += 2;

598 
	}
}

600 #i‚de‡
EXTRACT_MACROS


601 #unde‡
EXTRACT_NUMBER_AND_INCR


602 
	#EXTRACT_NUMBER_AND_INCR
(
de°
, 
§c
) \

603 
	`exåa˘_numbî_™d_ö¸
 (&
de°
, &
§c
)

	)

614 #ifde‡
DEBUG


617 
	~<°dio.h
>

620 
	~"zas£π.h
"

622 
	gdebug
;

624 
	#DEBUG_STATEMENT
(
e
Ë
	)
e

625 
	#DEBUG_PRINT1
(
x
Ëi‡(
debug
Ë
	`¥ötf
 (x)

	)

626 
	#DEBUG_PRINT2
(
x1
, 
x2
Ëi‡(
debug
Ë
	`¥ötf
 (x1, x2)

	)

627 
	#DEBUG_PRINT3
(
x1
, 
x2
, 
x3
Ëi‡(
debug
Ë
	`¥ötf
 (x1, x2, x3)

	)

628 
	#DEBUG_PRINT4
(
x1
, 
x2
, 
x3
, 
x4
Ëi‡(
debug
Ë
	`¥ötf
 (x1, x2, x3, x4)

	)

629 
	#DEBUG_PRINT_COMPILED_PATTERN
(
p
, 
s
, 
e
) \

630 i‡(
debug
Ë
	`¥öt_∑πül_compûed_∑âîn
 (
s
, 
e
)

	)

631 
	#DEBUG_PRINT_DOUBLE_STRING
(
w
, 
s1
, 
sz1
, 
s2
, 
sz2
) \

632 i‡(
debug
Ë
	`¥öt_doubÀ_°rög
 (
w
, 
s1
, 
sz1
, 
s2
, 
sz2
)

	)

638 
	$¥öt_Á°m≠
 (
Á°m≠
)

639 *
Á°m≠
;

641 
was_a_ønge
 = 0;

642 
i
 = 0;

644 
i
 < (1 << 
BYTEWIDTH
))

646 i‡(
Á°m≠
[
i
++])

648 
was_a_ønge
 = 0;

649 
	`putch¨
 (
i
 - 1);

650 
i
 < (1 << 
BYTEWIDTH
Ë&& 
Á°m≠
[i])

652 
was_a_ønge
 = 1;

653 
i
++;

655 i‡(
was_a_ønge
)

657 
	`¥ötf
 ("-");

658 
	`putch¨
 (
i
 - 1);

662 
	`putch¨
 ('\n');

663 
	}
}

670 
	$¥öt_∑πül_compûed_∑âîn
 (
°¨t
, 
íd
)

671 *
°¨t
;

672 *
íd
;

674 
m˙t
, 
m˙t2
;

675 *
p1
;

676 *
p
 = 
°¨t
;

677 *
≥nd
 = 
íd
;

679 i‡(
°¨t
 =
NULL
)

681 
	`¥ötf
 ("(null)\n");

686 
p
 < 
≥nd
)

688 
	`¥ötf
 ("%d:\t", 
p
 - 
°¨t
);

690 (
ª_›code_t
Ë*
p
++)

692 
no_›
:

693 
	`¥ötf
 ("/no_op");

696 
exa˘n
:

697 
m˙t
 = *
p
++;

698 
	`¥ötf
 ("/exa˘n/%d", 
m˙t
);

701 
	`putch¨
 ('/');

702 
	`putch¨
 (*
p
++);

704 --
m˙t
);

707 
°¨t_mem‹y
:

708 
m˙t
 = *
p
++;

709 
	`¥ötf
 ("/°¨t_mem‹y/%d/%d", 
m˙t
, *
p
++);

712 
°›_mem‹y
:

713 
m˙t
 = *
p
++;

714 
	`¥ötf
 ("/°›_mem‹y/%d/%d", 
m˙t
, *
p
++);

717 
du∂iˇã
:

718 
	`¥ötf
 ("/du∂iˇã/%d", *
p
++);

721 
™ych¨
:

722 
	`¥ötf
 ("/anychar");

725 
ch¨£t
:

726 
ch¨£t_nŸ
:

728 
c
, 
œ°
 = -100;

729 
ö_ønge
 = 0;

731 
	`¥ötf
 ("/charset [%s",

732 (
ª_›code_t
Ë*(
p
 - 1Ë=
ch¨£t_nŸ
 ? "^" : "");

734 
	`as£π
 (
p
 + *∞< 
≥nd
);

736 
c
 = 0; c < 256; c++)

737 i‡(
c
 / 8 < *
p


738 && (
p
[1 + (
c
/8)] & (1 << (c % 8))))

741 i‡(
œ°
 + 1 =
c
 && ! 
ö_ønge
)

743 
	`putch¨
 ('-');

744 
ö_ønge
 = 1;

747 i‡(
œ°
 + 1 !
c
 && 
ö_ønge
)

749 
	`putch¨
 (
œ°
);

750 
ö_ønge
 = 0;

753 i‡(! 
ö_ønge
)

754 
	`putch¨
 (
c
);

756 
œ°
 = 
c
;

759 i‡(
ö_ønge
)

760 
	`putch¨
 (
œ°
);

762 
	`putch¨
 (']');

764 
p
 += 1 + *p;

768 
beglöe
:

769 
	`¥ötf
 ("/begline");

772 
ídlöe
:

773 
	`¥ötf
 ("/endline");

776 
⁄_Áûuª_jump
:

777 
	`exåa˘_numbî_™d_ö¸
 (&
m˙t
, &
p
);

778 
	`¥ötf
 ("/⁄_Áûuª_jum∞tÿ%d", 
p
 + 
m˙t
 - 
°¨t
);

781 
⁄_Áûuª_kìp_°rög_jump
:

782 
	`exåa˘_numbî_™d_ö¸
 (&
m˙t
, &
p
);

783 
	`¥ötf
 ("/⁄_Áûuª_kìp_°rög_jum∞tÿ%d", 
p
 + 
m˙t
 - 
°¨t
);

786 
dummy_Áûuª_jump
:

787 
	`exåa˘_numbî_™d_ö¸
 (&
m˙t
, &
p
);

788 
	`¥ötf
 ("/dummy_Áûuª_jum∞tÿ%d", 
p
 + 
m˙t
 - 
°¨t
);

791 
push_dummy_Áûuª
:

792 
	`¥ötf
 ("/push_dummy_failure");

795 
maybe_p›_jump
:

796 
	`exåa˘_numbî_™d_ö¸
 (&
m˙t
, &
p
);

797 
	`¥ötf
 ("/maybe_p›_jum∞tÿ%d", 
p
 + 
m˙t
 - 
°¨t
);

800 
p›_Áûuª_jump
:

801 
	`exåa˘_numbî_™d_ö¸
 (&
m˙t
, &
p
);

802 
	`¥ötf
 ("/p›_Áûuª_jum∞tÿ%d", 
p
 + 
m˙t
 - 
°¨t
);

805 
jump_∑°_Æt
:

806 
	`exåa˘_numbî_™d_ö¸
 (&
m˙t
, &
p
);

807 
	`¥ötf
 ("/jump_∑°_Æàtÿ%d", 
p
 + 
m˙t
 - 
°¨t
);

810 
jump
:

811 
	`exåa˘_numbî_™d_ö¸
 (&
m˙t
, &
p
);

812 
	`¥ötf
 ("/jum∞tÿ%d", 
p
 + 
m˙t
 - 
°¨t
);

815 
suc˚ed_n
:

816 
	`exåa˘_numbî_™d_ö¸
 (&
m˙t
, &
p
);

817 
p1
 = 
p
 + 
m˙t
;

818 
	`exåa˘_numbî_™d_ö¸
 (&
m˙t2
, &
p
);

819 
	`¥ötf
 ("/suc˚ed_¿tÿ%d, %dÅimes", 
p1
 - 
°¨t
, 
m˙t2
);

822 
jump_n
:

823 
	`exåa˘_numbî_™d_ö¸
 (&
m˙t
, &
p
);

824 
p1
 = 
p
 + 
m˙t
;

825 
	`exåa˘_numbî_™d_ö¸
 (&
m˙t2
, &
p
);

826 
	`¥ötf
 ("/jump_¿tÿ%d, %dÅimes", 
p1
 - 
°¨t
, 
m˙t2
);

829 
£t_numbî_©
:

830 
	`exåa˘_numbî_™d_ö¸
 (&
m˙t
, &
p
);

831 
p1
 = 
p
 + 
m˙t
;

832 
	`exåa˘_numbî_™d_ö¸
 (&
m˙t2
, &
p
);

833 
	`¥ötf
 ("/£t_numbî_©Üoˇti⁄ %dÅÿ%d", 
p1
 - 
°¨t
, 
m˙t2
);

836 
w‹dbound
:

837 
	`¥ötf
 ("/wordbound");

840 
nŸw‹dbound
:

841 
	`¥ötf
 ("/notwordbound");

844 
w‹dbeg
:

845 
	`¥ötf
 ("/wordbeg");

848 
w‹díd
:

849 
	`¥ötf
 ("/wordend");

851 #ifde‡
emacs


852 
bef‹e_dŸ
:

853 
	`¥ötf
 ("/before_dot");

856 
©_dŸ
:

857 
	`¥ötf
 ("/at_dot");

860 
a·î_dŸ
:

861 
	`¥ötf
 ("/after_dot");

864 
sy¡ax•ec
:

865 
	`¥ötf
 ("/syntaxspec");

866 
m˙t
 = *
p
++;

867 
	`¥ötf
 ("/%d", 
m˙t
);

870 
nŸsy¡ax•ec
:

871 
	`¥ötf
 ("/notsyntaxspec");

872 
m˙t
 = *
p
++;

873 
	`¥ötf
 ("/%d", 
m˙t
);

877 
w‹dch¨
:

878 
	`¥ötf
 ("/wordchar");

881 
nŸw‹dch¨
:

882 
	`¥ötf
 ("/notwordchar");

885 
begbuf
:

886 
	`¥ötf
 ("/begbuf");

889 
ídbuf
:

890 
	`¥ötf
 ("/endbuf");

894 
	`¥ötf
 ("?%d", *(
p
-1));

897 
	`putch¨
 ('\n');

900 
	`¥ötf
 ("%d:\ãnd o‡∑âîn.\n", 
p
 - 
°¨t
);

901 
	}
}

905 
	$¥öt_compûed_∑âîn
 (
buÂ
)

906 
ª_∑âîn_buf„r
 *
buÂ
;

908 *
buf„r
 = 
buÂ
->buffer;

910 
	`¥öt_∑πül_compûed_∑âîn
 (
buf„r
, buf„∏+ 
buÂ
->
u£d
);

911 
	`¥ötf
 ("%ld bytes used/%ld bytesállocated.\n",

912 
buÂ
->
u£d
, buÂ->
Æloˇãd
);

914 i‡(
buÂ
->
Á°m≠_accuøã
 && buÂ->
Á°m≠
)

916 
	`¥ötf
 ("fastmap: ");

917 
	`¥öt_Á°m≠
 (
buÂ
->
Á°m≠
);

920 
	`¥ötf
 ("ª_nsub: %d\t", 
buÂ
->
ª_nsub
);

921 
	`¥ötf
 ("ªgs_Æloc: %d\t", 
buÂ
->
ªgs_Æloˇãd
);

922 
	`¥ötf
 ("ˇn_be_nuŒ: %d\t", 
buÂ
->
ˇn_be_nuŒ
);

923 
	`¥ötf
 ("√wlöe_™ch‹: %d\n", 
buÂ
->
√wlöe_™ch‹
);

924 
	`¥ötf
 ("no_sub: %d\t", 
buÂ
->
no_sub
);

925 
	`¥ötf
 ("nŸ_bﬁ: %d\t", 
buÂ
->
nŸ_bﬁ
);

926 
	`¥ötf
 ("nŸ_eﬁ: %d\t", 
buÂ
->
nŸ_eﬁ
);

927 
	`¥ötf
 ("sy¡ax: %lx\n", 
buÂ
->
sy¡ax
);

929 
	}
}

933 
	$¥öt_doubÀ_°rög
 (
whîe
, 
°rög1
, 
size1
, 
°rög2
, 
size2
)

934 c⁄° *
whîe
;

935 c⁄° *
°rög1
;

936 c⁄° *
°rög2
;

937 
size1
;

938 
size2
;

940 
this_ch¨
;

942 i‡(
whîe
 =
NULL
)

943 
	`¥ötf
 ("(null)");

946 i‡(
	`FIRST_STRING_P
 (
whîe
))

948 
this_ch¨
 = 
whîe
 - 
°rög1
;Åhis_ch¨ < 
size1
;Åhis_char++)

949 
	`putch¨
 (
°rög1
[
this_ch¨
]);

951 
whîe
 = 
°rög2
;

954 
this_ch¨
 = 
whîe
 - 
°rög2
;Åhis_ch¨ < 
size2
;Åhis_char++)

955 
	`putch¨
 (
°rög2
[
this_ch¨
]);

957 
	}
}

960 
	$¥ötch¨
 (
c
)

961 
c
;

963 
	`putc
 (
c
, 
°dîr
);

964 
	}
}

968 #unde‡
as£π


969 
	#as£π
(
e
)

	)

971 
	#DEBUG_STATEMENT
(
e
)

	)

972 
	#DEBUG_PRINT1
(
x
)

	)

973 
	#DEBUG_PRINT2
(
x1
, 
x2
)

	)

974 
	#DEBUG_PRINT3
(
x1
, 
x2
, 
x3
)

	)

975 
	#DEBUG_PRINT4
(
x1
, 
x2
, 
x3
, 
x4
)

	)

976 
	#DEBUG_PRINT_COMPILED_PATTERN
(
p
, 
s
, 
e
)

	)

977 
	#DEBUG_PRINT_DOUBLE_STRING
(
w
, 
s1
, 
sz1
, 
s2
, 
sz2
)

	)

986 
ªg_sy¡ax_t
 
	gª_sy¡ax_›ti⁄s
;

996 
ªg_sy¡ax_t


997 
	$ª_£t_sy¡ax
 (
sy¡ax
)

998 
ªg_sy¡ax_t
 
sy¡ax
;

1000 
ªg_sy¡ax_t
 
ªt
 = 
ª_sy¡ax_›ti⁄s
;

1002 
ª_sy¡ax_›ti⁄s
 = 
sy¡ax
;

1003 #ifde‡
DEBUG


1004 i‡(
sy¡ax
 & 
RE_DEBUG
)

1005 
debug
 = 1;

1006 i‡(
debug
)

1007 
debug
 = 0;

1009  
ªt
;

1010 
	}
}

1011 #ifde‡
_LIBC


1012 
	$wók_Æüs
 (
__ª_£t_sy¡ax
, 
ª_£t_sy¡ax
)

1020 c⁄° 
ª_îr‹_msgid
[] =

1022 
	#REG_NOERROR_IDX
 0

	)

1023 
	`gëãxt_no›
 ("Success")

1025 
	#REG_NOMATCH_IDX
 (
REG_NOERROR_IDX
 +  "Suc˚ss")

	)

1026 
	`gëãxt_no›
 ("No match")

1028 
	#REG_BADPAT_IDX
 (
REG_NOMATCH_IDX
 +  "Nÿm©ch")

	)

1029 
	`gëãxt_no›
 ("InvalidÑegularÉxpression")

1031 
	#REG_ECOLLATE_IDX
 (
REG_BADPAT_IDX
 +  "InvÆidÑeguœ∏ex¥essi⁄")

	)

1032 
	`gëãxt_no›
 ("Invalid collation character")

1034 
	#REG_ECTYPE_IDX
 (
REG_ECOLLATE_IDX
 +  "InvÆid cﬁœti⁄ ch¨a˘î")

	)

1035 
	`gëãxt_no›
 ("Invalid character classÇame")

1037 
	#REG_EESCAPE_IDX
 (
REG_ECTYPE_IDX
 +  "InvÆid ch¨a˘î cœs†«me")

	)

1038 
	`gëãxt_no›
 ("Trailing backslash")

1040 
	#REG_ESUBREG_IDX
 (
REG_EESCAPE_IDX
 +  "Tøûög back¶ash")

	)

1041 
	`gëãxt_no›
 ("Invalid backÑeference")

1043 
	#REG_EBRACK_IDX
 (
REG_ESUBREG_IDX
 +  "InvÆid backÑe„ªn˚")

	)

1044 
	`gëãxt_no›
 ("Unmatched [ or [^")

1046 
	#REG_EPAREN_IDX
 (
REG_EBRACK_IDX
 +  "Unm©ched [ o∏[^")

	)

1047 
	`gëãxt_no›
 ("Unmatched ( or \\(")

1049 
	#REG_EBRACE_IDX
 (
REG_EPAREN_IDX
 +  "Unm©ched ( o∏\\(")

	)

1050 
	`gëãxt_no›
 ("Unmatched \\{")

1052 
	#REG_BADBR_IDX
 (
REG_EBRACE_IDX
 +  "Unm©ched \\{")

	)

1053 
	`gëãxt_no›
 ("Invalid content of \\{\\}")

1055 
	#REG_ERANGE_IDX
 (
REG_BADBR_IDX
 +  "InvÆid c⁄ã¡ o‡\\{\\}")

	)

1056 
	`gëãxt_no›
 ("InvalidÑangeÉnd")

1058 
	#REG_ESPACE_IDX
 (
REG_ERANGE_IDX
 +  "InvÆidÑ™gêíd")

	)

1059 
	`gëãxt_no›
 ("MemoryÉxhausted")

1061 
	#REG_BADRPT_IDX
 (
REG_ESPACE_IDX
 +  "Mem‹yÉxhau°ed")

	)

1062 
	`gëãxt_no›
 ("InvalidÖrecedingÑegularÉxpression")

1064 
	#REG_EEND_IDX
 (
REG_BADRPT_IDX
 +  "InvÆidÖª˚dögÑeguœ∏ex¥essi⁄")

	)

1065 
	`gëãxt_no›
 ("PrematureÉnd ofÑegularÉxpression")

1067 
	#REG_ESIZE_IDX
 (
REG_EEND_IDX
 +  "Pªm©uªÉnd o‡ªguœ∏ex¥essi⁄")

	)

1068 
	`gëãxt_no›
 ("RegularÉxpressionÅoo big")

1070 
	#REG_ERPAREN_IDX
 (
REG_ESIZE_IDX
 +  "Reguœ∏ex¥essi⁄Åoÿbig")

	)

1071 
	`gëãxt_no›
 ("Unmatched ) or \\)"),

1072 
	}
};

1074 c⁄° 
size_t
 
	gª_îr‹_msgid_idx
[] =

1076 
REG_NOERROR_IDX
,

1077 
REG_NOMATCH_IDX
,

1078 
REG_BADPAT_IDX
,

1079 
REG_ECOLLATE_IDX
,

1080 
REG_ECTYPE_IDX
,

1081 
REG_EESCAPE_IDX
,

1082 
REG_ESUBREG_IDX
,

1083 
REG_EBRACK_IDX
,

1084 
REG_EPAREN_IDX
,

1085 
REG_EBRACE_IDX
,

1086 
REG_BADBR_IDX
,

1087 
REG_ERANGE_IDX
,

1088 
REG_ESPACE_IDX
,

1089 
REG_BADRPT_IDX
,

1090 
REG_EEND_IDX
,

1091 
REG_ESIZE_IDX
,

1092 
REG_ERPAREN_IDX


1115 
	#MATCH_MAY_ALLOCATE


	)

1119 #ifde‡
__GNUC__


1120 #unde‡
C_ALLOCA


1128 #i‡(
deföed
 
C_ALLOCA
 || deföed 
REGEX_MALLOC
Ë&& deföed 
emacs


1129 #unde‡
MATCH_MAY_ALLOCATE


1141 #i‚de‡
INIT_FAILURE_ALLOC


1142 
	#INIT_FAILURE_ALLOC
 5

	)

1150 #ifde‡
INT_IS_16BIT


1152 #i‡
deföed
 
MATCH_MAY_ALLOCATE


1155 
	gª_max_Áûuªs
 = 4000;

1157 
	gª_max_Áûuªs
 = 2000;

1160 
	uÁû_°ack_ñt


1162 *
	mpoöãr
;

1163 
	möãgî
;

1166 
Áû_°ack_ñt
 
	tÁû_°ack_ñt_t
;

1170 
Áû_°ack_ñt_t
 *
	m°ack
;

1171 
	msize
;

1172 
	mavaû
;

1173 } 
	tÁû_°ack_ty≥
;

1177 #i‡
deföed
 
MATCH_MAY_ALLOCATE


1180 
	gª_max_Áûuªs
 = 20000;

1182 
	gª_max_Áûuªs
 = 2000;

1185 
	uÁû_°ack_ñt


1187 *
	mpoöãr
;

1188 
	möãgî
;

1191 
Áû_°ack_ñt
 
	tÁû_°ack_ñt_t
;

1195 
Áû_°ack_ñt_t
 *
	m°ack
;

1196 
	msize
;

1197 
	mavaû
;

1198 } 
	tÁû_°ack_ty≥
;

1202 
	#FAIL_STACK_EMPTY
(Ë(
Áû_°ack
.
avaû
 =0)

	)

1203 
	#FAIL_STACK_PTR_EMPTY
(Ë(
Áû_°ack_±r
->
avaû
 =0)

	)

1204 
	#FAIL_STACK_FULL
(Ë(
Áû_°ack
.
avaû
 =Áû_°ack.
size
)

	)

1210 #ifde‡
MATCH_MAY_ALLOCATE


1211 
	#INIT_FAIL_STACK
() \

1213 
Áû_°ack
.
°ack
 = (
Áû_°ack_ñt_t
 *) \

1214 
	`REGEX_ALLOCATE_STACK
 (
INIT_FAILURE_ALLOC
 *  (
Áû_°ack_ñt_t
)); \

1216 i‡(
Áû_°ack
.
°ack
 =
NULL
) \

1219 
Áû_°ack
.
size
 = 
INIT_FAILURE_ALLOC
; \

1220 
Áû_°ack
.
avaû
 = 0; \

1221 } 0)

	)

1223 
	#RESET_FAIL_STACK
(Ë
	`REGEX_FREE_STACK
 (
Áû_°ack
.
°ack
)

	)

1225 
	#INIT_FAIL_STACK
() \

1227 
Áû_°ack
.
avaû
 = 0; \

1228 } 0)

	)

1230 
	#RESET_FAIL_STACK
()

	)

1241 
	#DOUBLE_FAIL_STACK
(
Áû_°ack
) \

1242 ((
Áû_°ack
).
size
 > (Ë(
ª_max_Áûuªs
 * 
MAX_FAILURE_ITEMS
) \

1244 : ((
Áû_°ack
).
°ack
 = (
Áû_°ack_ñt_t
 *) \

1245 
	`REGEX_REALLOCATE_STACK
 ((
Áû_°ack
).
°ack
, \

1246 (
Áû_°ack
).
size
 *  (
Áû_°ack_ñt_t
), \

1247 ((
Áû_°ack
).
size
 << 1Ë*  (
Áû_°ack_ñt_t
)), \

1249 (
Áû_°ack
).
°ack
 =
NULL
 \

1251 : ((
Áû_°ack
).
size
 <<= 1, \

1252 1)))

	)

1258 
	#PUSH_PATTERN_OP
(
POINTER
, 
FAIL_STACK
) \

1259 ((
	`FAIL_STACK_FULL
 () \

1260 && !
	`DOUBLE_FAIL_STACK
 (
FAIL_STACK
)) \

1262 : ((
FAIL_STACK
).
°ack
[(FAIL_STACK).
avaû
++].
poöãr
 = 
POINTER
, \

1263 1))

	)

1268 
	#PUSH_FAILURE_POINTER
(
ôem
) \

1269 
Áû_°ack
.
°ack
[Áû_°ack.
avaû
++].
poöãr
 = (*Ë(
ôem
)

	)

1274 
	#PUSH_FAILURE_INT
(
ôem
) \

1275 
Áû_°ack
.
°ack
[Áû_°ack.
avaû
++].
öãgî
 = (
ôem
)

	)

1280 
	#PUSH_FAILURE_ELT
(
ôem
) \

1281 
Áû_°ack
.
°ack
[Áû_°ack.
avaû
++] = (
ôem
)

	)

1285 
	#POP_FAILURE_POINTER
(Ë
Áû_°ack
.
°ack
[--Áû_°ack.
avaû
].
poöãr


	)

1286 
	#POP_FAILURE_INT
(Ë
Áû_°ack
.
°ack
[--Áû_°ack.
avaû
].
öãgî


	)

1287 
	#POP_FAILURE_ELT
(Ë
Áû_°ack
.
°ack
[--Áû_°ack.
avaû
]

	)

1290 #ifde‡
DEBUG


1291 
	#DEBUG_PUSH
 
PUSH_FAILURE_INT


	)

1292 
	#DEBUG_POP
(
ôem_addr
Ë*(ôem_addrË
	`POP_FAILURE_INT
 ()

	)

1294 
	#DEBUG_PUSH
(
ôem
)

	)

1295 
	#DEBUG_POP
(
ôem_addr
)

	)

1308 
	#PUSH_FAILURE_POINT
(
∑âîn_∂a˚
, 
°rög_∂a˚
, 
Áûuª_code
) \

1310 *
de°ö©i⁄
; \

1316 
a˘ive_ªg_t
 
this_ªg
; \

1318 
	`DEBUG_STATEMENT
 (
Áûuª_id
++); \

1319 
	`DEBUG_STATEMENT
 (
nÁûuª_poöts_pushed
++); \

1320 
	`DEBUG_PRINT2
 ("\nPUSH_FAILURE_POINT #%u:\n", 
Áûuª_id
); \

1321 
	`DEBUG_PRINT2
 (" Bef‹êpush,Çexàavaû: %d\n", (
Áû_°ack
).
avaû
);\

1322 
	`DEBUG_PRINT2
 (" size: %d\n", (
Áû_°ack
).
size
);\

1324 
	`DEBUG_PRINT2
 (" slŸ†√eded: %ld\n", 
NUM_FAILURE_ITEMS
); \

1325 
	`DEBUG_PRINT2
 ("ávaûabÀ: %d\n", 
REMAINING_AVAIL_SLOTS
); \

1328 
REMAINING_AVAIL_SLOTS
 < 
NUM_FAILURE_ITEMS
) \

1330 i‡(!
	`DOUBLE_FAIL_STACK
 (
Áû_°ack
)) \

1331  
Áûuª_code
; \

1333 
	`DEBUG_PRINT2
 ("\n Doubled stack; sizeÇow: %d\n", \

1334 (
Áû_°ack
).
size
); \

1335 
	`DEBUG_PRINT2
 (" slŸ†avaûabÀ: %d\n", 
REMAINING_AVAIL_SLOTS
);\

1339 
	`DEBUG_PRINT1
 ("\n"); \

1342 
this_ªg
 = 
lowe°_a˘ive_ªg
;Åhis_ªg <
highe°_a˘ive_ªg
; \

1343 
this_ªg
++) \

1345 
	`DEBUG_PRINT2
 (" PushögÑeg: %lu\n", 
this_ªg
); \

1346 
	`DEBUG_STATEMENT
 (
num_ªgs_pushed
++); \

1348 
	`DEBUG_PRINT2
 (" sèπ: %p\n", 
ªg°¨t
[
this_ªg
]); \

1349 
	`PUSH_FAILURE_POINTER
 (
ªg°¨t
[
this_ªg
]); \

1351 
	`DEBUG_PRINT2
 ("Énd: %p\n", 
ªgíd
[
this_ªg
]); \

1352 
	`PUSH_FAILURE_POINTER
 (
ªgíd
[
this_ªg
]); \

1354 
	`DEBUG_PRINT2
 (" info: %p\n ", \

1355 
ªg_öfo
[
this_ªg
].
w‹d
.
poöãr
); \

1356 
	`DEBUG_PRINT2
 (" match_null=%d", \

1357 
	`REG_MATCH_NULL_STRING_P
 (
ªg_öfo
[
this_ªg
])); \

1358 
	`DEBUG_PRINT2
 ("á˘ive=%d", 
	`IS_ACTIVE
 (
ªg_öfo
[
this_ªg
])); \

1359 
	`DEBUG_PRINT2
 (" matched_something=%d", \

1360 
	`MATCHED_SOMETHING
 (
ªg_öfo
[
this_ªg
])); \

1361 
	`DEBUG_PRINT2
 ("Éver_matched=%d", \

1362 
	`EVER_MATCHED_SOMETHING
 (
ªg_öfo
[
this_ªg
])); \

1363 
	`DEBUG_PRINT1
 ("\n"); \

1364 
	`PUSH_FAILURE_ELT
 (
ªg_öfo
[
this_ªg
].
w‹d
); \

1367 
	`DEBUG_PRINT2
 (" PushögÜowá˘ivêªg: %ld\n", 
lowe°_a˘ive_ªg
);\

1368 
	`PUSH_FAILURE_INT
 (
lowe°_a˘ive_ªg
); \

1370 
	`DEBUG_PRINT2
 (" Pushög highá˘ivêªg: %ld\n", 
highe°_a˘ive_ªg
);\

1371 
	`PUSH_FAILURE_INT
 (
highe°_a˘ive_ªg
); \

1373 
	`DEBUG_PRINT2
 (" PushögÖ©ã∫ %p:\n", 
∑âîn_∂a˚
); \

1374 
	`DEBUG_PRINT_COMPILED_PATTERN
 (
buÂ
, 
∑âîn_∂a˚
, 
≥nd
); \

1375 
	`PUSH_FAILURE_POINTER
 (
∑âîn_∂a˚
); \

1377 
	`DEBUG_PRINT2
 (" Pushög såög %p: `", 
°rög_∂a˚
); \

1378 
	`DEBUG_PRINT_DOUBLE_STRING
 (
°rög_∂a˚
, 
°rög1
, 
size1
, 
°rög2
, \

1379 
size2
); \

1380 
	`DEBUG_PRINT1
 ("'\n"); \

1381 
	`PUSH_FAILURE_POINTER
 (
°rög_∂a˚
); \

1383 
	`DEBUG_PRINT2
 (" Pushög faûuª id: %u\n", 
Áûuª_id
); \

1384 
	`DEBUG_PUSH
 (
Áûuª_id
); \

1385 } 0)

	)

1389 
	#NUM_REG_ITEMS
 3

	)

1392 #ifde‡
DEBUG


1393 
	#NUM_NONREG_ITEMS
 5

	)

1395 
	#NUM_NONREG_ITEMS
 4

	)

1402 
	#MAX_FAILURE_ITEMS
 (5 * 
NUM_REG_ITEMS
 + 
NUM_NONREG_ITEMS
)

	)

1405 
	#NUM_FAILURE_ITEMS
 \

1407 ? 0 : 
highe°_a˘ive_ªg
 - 
lowe°_a˘ive_ªg
 + 1) \

1408 * 
NUM_REG_ITEMS
) \

1409 + 
NUM_NONREG_ITEMS
)

	)

1412 
	#REMAINING_AVAIL_SLOTS
 ((
Áû_°ack
).
size
 - (Áû_°ack).
avaû
)

	)

1427 
	#POP_FAILURE_POINT
(
°r
, 
∑t
, 
low_ªg
, 
high_ªg
, 
ªg°¨t
, 
ªgíd
, 
ªg_öfo
)\

1429 
	`DEBUG_STATEMENT
 (
Áûuª_id
;) \

1430 
a˘ive_ªg_t
 
this_ªg
; \

1431 c⁄° *
°rög_ãmp
; \

1433 
	`as£π
 (!
	`FAIL_STACK_EMPTY
 ()); \

1436 
	`DEBUG_PRINT1
 ("POP_FAILURE_POINT:\n"); \

1437 
	`DEBUG_PRINT2
 (" Bef‹êp›,Çexàavaû: %d\n", 
Áû_°ack
.
avaû
); \

1438 
	`DEBUG_PRINT2
 (" size: %d\n", 
Áû_°ack
.
size
); \

1440 
	`as£π
 (
Áû_°ack
.
avaû
 >
NUM_NONREG_ITEMS
); \

1442 
	`DEBUG_POP
 (&
Áûuª_id
); \

1443 
	`DEBUG_PRINT2
 (" P›pög faûuª id: %u\n", 
Áûuª_id
); \

1448 
°rög_ãmp
 = 
	`POP_FAILURE_POINTER
 (); \

1449 i‡(
°rög_ãmp
 !
NULL
) \

1450 
°r
 = (c⁄° *Ë
°rög_ãmp
; \

1452 
	`DEBUG_PRINT2
 (" P›pög såög %p: `", 
°r
); \

1453 
	`DEBUG_PRINT_DOUBLE_STRING
 (
°r
, 
°rög1
, 
size1
, 
°rög2
, 
size2
); \

1454 
	`DEBUG_PRINT1
 ("'\n"); \

1456 
∑t
 = (*Ë
	`POP_FAILURE_POINTER
 (); \

1457 
	`DEBUG_PRINT2
 (" P›pögÖ©ã∫ %p:\n", 
∑t
); \

1458 
	`DEBUG_PRINT_COMPILED_PATTERN
 (
buÂ
, 
∑t
, 
≥nd
); \

1461 
high_ªg
 = (
a˘ive_ªg_t
Ë
	`POP_FAILURE_INT
 (); \

1462 
	`DEBUG_PRINT2
 (" P›pög highá˘ivêªg: %ld\n", 
high_ªg
); \

1464 
low_ªg
 = (
a˘ive_ªg_t
Ë
	`POP_FAILURE_INT
 (); \

1465 
	`DEBUG_PRINT2
 (" P›pögÜowá˘ivêªg: %ld\n", 
low_ªg
); \

1468 
this_ªg
 = 
high_ªg
;Åhis_ªg >
low_ªg
;Åhis_reg--) \

1470 
	`DEBUG_PRINT2
 (" P›pögÑeg: %ld\n", 
this_ªg
); \

1472 
ªg_öfo
[
this_ªg
].
w‹d
 = 
	`POP_FAILURE_ELT
 (); \

1473 
	`DEBUG_PRINT2
 (" info: %p\n", \

1474 
ªg_öfo
[
this_ªg
].
w‹d
.
poöãr
); \

1476 
ªgíd
[
this_ªg
] = (c⁄° *Ë
	`POP_FAILURE_POINTER
 (); \

1477 
	`DEBUG_PRINT2
 ("Énd: %p\n", 
ªgíd
[
this_ªg
]); \

1479 
ªg°¨t
[
this_ªg
] = (c⁄° *Ë
	`POP_FAILURE_POINTER
 (); \

1480 
	`DEBUG_PRINT2
 (" sèπ: %p\n", 
ªg°¨t
[
this_ªg
]); \

1484 
this_ªg
 = 
highe°_a˘ive_ªg
;Åhis_ªg > 
high_ªg
;Åhis_reg--) \

1486 
ªg_öfo
[
this_ªg
].
w‹d
.
öãgî
 = 0; \

1487 
ªgíd
[
this_ªg
] = 0; \

1488 
ªg°¨t
[
this_ªg
] = 0; \

1490 
highe°_a˘ive_ªg
 = 
high_ªg
; \

1493 
£t_ªgs_m©ched_d⁄e
 = 0; \

1494 
	`DEBUG_STATEMENT
 (
nÁûuª_poöts_p›≥d
++); \

1495 }

	)

1515 
Áû_°ack_ñt_t
 
	mw‹d
;

1520 
	#MATCH_NULL_UNSET_VALUE
 3

	)

1521 
	mm©ch_nuŒ_°rög_p
 : 2;

1522 
	mis_a˘ive
 : 1;

1523 
	mm©ched_somëhög
 : 1;

1524 
	mevî_m©ched_somëhög
 : 1;

1525 } 
	mbôs
;

1526 } 
	tªgi°î_öfo_ty≥
;

1528 
	#REG_MATCH_NULL_STRING_P
(
R
Ë((R).
bôs
.
m©ch_nuŒ_°rög_p
)

	)

1529 
	#IS_ACTIVE
(
R
Ë((R).
bôs
.
is_a˘ive
)

	)

1530 
	#MATCHED_SOMETHING
(
R
Ë((R).
bôs
.
m©ched_somëhög
)

	)

1531 
	#EVER_MATCHED_SOMETHING
(
R
Ë((R).
bôs
.
evî_m©ched_somëhög
)

	)

1537 
	#SET_REGS_MATCHED
() \

1540 i‡(!
£t_ªgs_m©ched_d⁄e
) \

1542 
a˘ive_ªg_t
 
r
; \

1543 
£t_ªgs_m©ched_d⁄e
 = 1; \

1544 
r
 = 
lowe°_a˘ive_ªg
;Ñ <
highe°_a˘ive_ªg
;Ñ++) \

1546 
	`MATCHED_SOMETHING
 (
ªg_öfo
[
r
]) \

1547 
	`EVER_MATCHED_SOMETHING
 (
ªg_öfo
[
r
]) \

1552 0)

	)

1555 
	gªg_un£t_dummy
;

1556 
	#REG_UNSET_VALUE
 (&
ªg_un£t_dummy
)

	)

1557 
	#REG_UNSET
(
e
Ë(”Ë=
REG_UNSET_VALUE
)

	)

1561 
ªg_îrcode_t
 
ªgex_compûe
 
_RE_ARGS
 ((c⁄° *
∑âîn
, 
size_t
 
size
,

1562 
ªg_sy¡ax_t
 
sy¡ax
,

1563 
ª_∑âîn_buf„r
 *
buÂ
));

1564 
°‹e_›1
 
_RE_ARGS
 ((
ª_›code_t
 
›
, *
loc
, 
¨g
));

1565 
°‹e_›2
 
_RE_ARGS
 ((
ª_›code_t
 
›
, *
loc
,

1566 
¨g1
, 
¨g2
));

1567 
ö£π_›1
 
_RE_ARGS
 ((
ª_›code_t
 
›
, *
loc
,

1568 
¨g
, *
íd
));

1569 
ö£π_›2
 
_RE_ARGS
 ((
ª_›code_t
 
›
, *
loc
,

1570 
¨g1
, 
¨g2
, *
íd
));

1571 
boﬁón
 
©_beglöe_loc_p
 
_RE_ARGS
 ((c⁄° *
∑âîn
, c⁄° *
p
,

1572 
ªg_sy¡ax_t
 
sy¡ax
));

1573 
boﬁón
 
©_ídlöe_loc_p
 
_RE_ARGS
 ((c⁄° *
p
, c⁄° *
≥nd
,

1574 
ªg_sy¡ax_t
 
sy¡ax
));

1575 
ªg_îrcode_t
 
compûe_ønge
 
_RE_ARGS
 ((c⁄° **
p_±r
,

1576 c⁄° *
≥nd
,

1577 *
å™¶©e
,

1578 
ªg_sy¡ax_t
 
sy¡ax
,

1579 *
b
));

1585 #i‚de‡
PATFETCH


1586 
	#PATFETCH
(
c
) \

1587 dÿ{i‡(
p
 =
≥nd
Ë 
REG_EEND
; \

1588 
c
 = (Ë*
p
++; \

1589 i‡(
å™¶©e
Ë
c
 = ()Åranslate[c]; \

1590 } 0)

	)

1595 
	#PATFETCH_RAW
(
c
) \

1596 dÿ{i‡(
p
 =
≥nd
Ë 
REG_EEND
; \

1597 
c
 = (Ë*
p
++; \

1598 } 0)

	)

1601 
	#PATUNFETCH
 
p
--

	)

1608 #i‚de‡
TRANSLATE


1609 
	#TRANSLATE
(
d
) \

1610 (
å™¶©e
 ? (Ëå™¶©e[(Ë(
d
)] : (d))

	)

1617 
	#INIT_BUF_SIZE
 32

	)

1620 
	#GET_BUFFER_SPACE
(
n
) \

1621 (Ë(
b
 - 
buÂ
->
buf„r
 + (
n
)Ë> buÂ->
Æloˇãd
) \

1622 
	`EXTEND_BUFFER
 ()

	)

1625 
	#BUF_PUSH
(
c
) \

1627 
	`GET_BUFFER_SPACE
 (1); \

1628 *
b
++ = (Ë(
c
); \

1629 } 0)

	)

1633 
	#BUF_PUSH_2
(
c1
, 
c2
) \

1635 
	`GET_BUFFER_SPACE
 (2); \

1636 *
b
++ = (Ë(
c1
); \

1637 *
b
++ = (Ë(
c2
); \

1638 } 0)

	)

1642 
	#BUF_PUSH_3
(
c1
, 
c2
, 
c3
) \

1644 
	`GET_BUFFER_SPACE
 (3); \

1645 *
b
++ = (Ë(
c1
); \

1646 *
b
++ = (Ë(
c2
); \

1647 *
b
++ = (Ë(
c3
); \

1648 } 0)

	)

1653 
	#STORE_JUMP
(
›
, 
loc
, 
to
) \

1654 
	`°‹e_›1
 (
›
, 
loc
, (Ë((
to
Ë- (locË- 3))

	)

1657 
	#STORE_JUMP2
(
›
, 
loc
, 
to
, 
¨g
) \

1658 
	`°‹e_›2
 (
›
, 
loc
, (Ë((
to
Ë- (locË- 3), 
¨g
)

	)

1661 
	#INSERT_JUMP
(
›
, 
loc
, 
to
) \

1662 
	`ö£π_›1
 (
›
, 
loc
, (Ë((
to
Ë- (locË- 3), 
b
)

	)

1665 
	#INSERT_JUMP2
(
›
, 
loc
, 
to
, 
¨g
) \

1666 
	`ö£π_›2
 (
›
, 
loc
, (Ë((
to
Ë- (locË- 3), 
¨g
, 
b
)

	)

1677 #i‡
deföed
 
_MSC_VER
 && !deföed 
_WIN32


1681 
	#MAX_BUF_SIZE
 65500L

	)

1682 
	#REALLOC
(
p
,
s
Ë
	`ªÆloc
 (’), (
size_t
Ë(s))

	)

1684 
	#MAX_BUF_SIZE
 (1L << 16)

	)

1685 
	#REALLOC
(
p
,
s
Ë
	`ªÆloc
 (’), (s))

	)

1692 
	#EXTEND_BUFFER
() \

1694 *
ﬁd_buf„r
 = 
buÂ
->
buf„r
; \

1695 i‡(
buÂ
->
Æloˇãd
 =
MAX_BUF_SIZE
) \

1696  
REG_ESIZE
; \

1697 
buÂ
->
Æloˇãd
 <<= 1; \

1698 i‡(
buÂ
->
Æloˇãd
 > 
MAX_BUF_SIZE
) \

1699 
buÂ
->
Æloˇãd
 = 
MAX_BUF_SIZE
; \

1700 
buÂ
->
buf„r
 = (*Ë
	`REALLOC
 (buÂ->buf„r, buÂ->
Æloˇãd
);\

1701 i‡(
buÂ
->
buf„r
 =
NULL
) \

1702  
REG_ESPACE
; \

1704 i‡(
ﬁd_buf„r
 !
buÂ
->
buf„r
) \

1706 
b
 = (b - 
ﬁd_buf„r
Ë+ 
buÂ
->
buf„r
; \

1707 
begÆt
 = (begÆà- 
ﬁd_buf„r
Ë+ 
buÂ
->
buf„r
; \

1708 i‡(
fixup_Æt_jump
) \

1709 
fixup_Æt_jump
 = (fixup_Æt_jum∞- 
ﬁd_buf„r
Ë+ 
buÂ
->
buf„r
;\

1710 i‡(
œ°°¨t
) \

1711 
œ°°¨t
 = (œ°°¨à- 
ﬁd_buf„r
Ë+ 
buÂ
->
buf„r
; \

1712 i‡(
≥ndög_exa˘
) \

1713 
≥ndög_exa˘
 = (≥ndög_exa˘ - 
ﬁd_buf„r
Ë+ 
buÂ
->
buf„r
; \

1715 } 0)

	)

1721 
	#MAX_REGNUM
 255

	)

1725 
	tªgnum_t
;

1733 
	t∑âîn_off£t_t
;

1737 
∑âîn_off£t_t
 
	mbegÆt_off£t
;

1738 
∑âîn_off£t_t
 
	mfixup_Æt_jump
;

1739 
∑âîn_off£t_t
 
	mö√r_group_off£t
;

1740 
∑âîn_off£t_t
 
	mœ°°¨t_off£t
;

1741 
ªgnum_t
 
	mªgnum
;

1742 } 
	tcompûe_°ack_ñt_t
;

1747 
compûe_°ack_ñt_t
 *
	m°ack
;

1748 
	msize
;

1749 
	mavaû
;

1750 } 
	tcompûe_°ack_ty≥
;

1753 
	#INIT_COMPILE_STACK_SIZE
 32

	)

1755 
	#COMPILE_STACK_EMPTY
 (
compûe_°ack
.
avaû
 =0)

	)

1756 
	#COMPILE_STACK_FULL
 (
compûe_°ack
.
avaû
 =compûe_°ack.
size
)

	)

1759 
	#COMPILE_STACK_TOP
 (
compûe_°ack
.
°ack
[compûe_°ack.
avaû
])

	)

1763 
	#SET_LIST_BIT
(
c
) \

1764 (
b
[((Ë(
c
)Ë/ 
BYTEWIDTH
] \

1765 |1 << (((Ë
c
Ë% 
BYTEWIDTH
))

	)

1769 
	#GET_UNSIGNED_NUMBER
(
num
) \

1770 { i‡(
p
 !
≥nd
) \

1772 
	`PATFETCH
 (
c
); \

1773 
	`ISDIGIT
 (
c
)) \

1775 i‡(
num
 < 0) \

1776 
num
 = 0; \

1777 
num
 =Çum * 10 + 
c
 - '0'; \

1778 i‡(
p
 =
≥nd
) \

1780 
	`PATFETCH
 (
c
); \

1783 }

	)

1785 #i‡
deföed
 
_LIBC
 || 
WIDE_CHAR_SUPPORT


1788 #ifde‡
CHARCLASS_NAME_MAX


1789 
	#CHAR_CLASS_MAX_LENGTH
 
CHARCLASS_NAME_MAX


	)

1793 
	#CHAR_CLASS_MAX_LENGTH
 256

	)

1796 #ifde‡
_LIBC


1797 
	#IS_CHAR_CLASS
(
°rög
Ë
	`__w˘y≥
 (°rög)

	)

1799 
	#IS_CHAR_CLASS
(
°rög
Ë
	`w˘y≥
 (°rög)

	)

1802 
	#CHAR_CLASS_MAX_LENGTH
 6

	)

1804 
	#IS_CHAR_CLASS
(
°rög
) \

1805 (
	`STREQ
 (
°rög
, "alpha") || STREQ (string, "upper") \

1806 || 
	`STREQ
 (
°rög
, "lower") || STREQ (string, "digit") \

1807 || 
	`STREQ
 (
°rög
, "alnum") || STREQ (string, "xdigit") \

1808 || 
	`STREQ
 (
°rög
, "space") || STREQ (string, "print") \

1809 || 
	`STREQ
 (
°rög
, "punct") || STREQ (string, "graph") \

1810 || 
	`STREQ
 (
°rög
, "˙ål"Ë|| STREQ (°rög, "bœnk"))

	)

1813 #i‚de‡
MATCH_MAY_ALLOCATE


1822 
Áû_°ack_ty≥
 
	gÁû_°ack
;

1827 
	gªgs_Æloˇãd_size
;

1829 c⁄° ** 
	gªg°¨t
, ** 
	gªgíd
;

1830 c⁄° ** 
	gﬁd_ªg°¨t
, ** 
	gﬁd_ªgíd
;

1831 c⁄° **
	gbe°_ªg°¨t
, **
	gbe°_ªgíd
;

1832 
ªgi°î_öfo_ty≥
 *
	gªg_öfo
;

1833 c⁄° **
	gªg_dummy
;

1834 
ªgi°î_öfo_ty≥
 *
	gªg_öfo_dummy
;

1840 
	$ªgex_grow_ªgi°îs
 (
num_ªgs
)

1841 
num_ªgs
;

1843 i‡(
num_ªgs
 > 
ªgs_Æloˇãd_size
)

1845 
	`RETALLOC_IF
 (
ªg°¨t
, 
num_ªgs
, const *);

1846 
	`RETALLOC_IF
 (
ªgíd
, 
num_ªgs
, const *);

1847 
	`RETALLOC_IF
 (
ﬁd_ªg°¨t
, 
num_ªgs
, const *);

1848 
	`RETALLOC_IF
 (
ﬁd_ªgíd
, 
num_ªgs
, const *);

1849 
	`RETALLOC_IF
 (
be°_ªg°¨t
, 
num_ªgs
, const *);

1850 
	`RETALLOC_IF
 (
be°_ªgíd
, 
num_ªgs
, const *);

1851 
	`RETALLOC_IF
 (
ªg_öfo
, 
num_ªgs
, 
ªgi°î_öfo_ty≥
);

1852 
	`RETALLOC_IF
 (
ªg_dummy
, 
num_ªgs
, const *);

1853 
	`RETALLOC_IF
 (
ªg_öfo_dummy
, 
num_ªgs
, 
ªgi°î_öfo_ty≥
);

1855 
ªgs_Æloˇãd_size
 = 
num_ªgs
;

1857 
	}
}

1861 
boﬁón
 
group_ö_compûe_°ack
 
_RE_ARGS
 ((
compûe_°ack_ty≥


1862 
compûe_°ack
,

1863 
ªgnum_t
 
ªgnum
));

1884 
	#FREE_STACK_RETURN
(
vÆue
) \

1885  (
	`‰ì
 (
compûe_°ack
.
°ack
), 
vÆue
)

	)

1887 
ªg_îrcode_t


1888 
	$ªgex_compûe
 (
∑âîn
, 
size
, 
sy¡ax
, 
buÂ
)

1889 c⁄° *
∑âîn
;

1890 
size_t
 
size
;

1891 
ªg_sy¡ax_t
 
sy¡ax
;

1892 
ª_∑âîn_buf„r
 *
buÂ
;

1897 
c
, 
c1
;

1900 c⁄° *
p1
;

1903 *
b
;

1906 
compûe_°ack_ty≥
 
compûe_°ack
;

1909 c⁄° *
p
 = 
∑âîn
;

1910 c⁄° *
≥nd
 = 
∑âîn
 + 
size
;

1913 
RE_TRANSLATE_TYPE
 
å™¶©e
 = 
buÂ
->translate;

1919 *
≥ndög_exa˘
 = 0;

1924 *
œ°°¨t
 = 0;

1927 *
begÆt
;

1931 c⁄° *
beg_öãrvÆ
;

1936 *
fixup_Æt_jump
 = 0;

1941 
ªgnum_t
 
ªgnum
 = 0;

1943 #ifde‡
DEBUG


1944 
	`DEBUG_PRINT1
 ("\nCompilingÖattern: ");

1945 i‡(
debug
)

1947 
debug_cou¡
;

1949 
debug_cou¡
 = 0; debug_cou¡ < 
size
; debug_count++)

1950 
	`putch¨
 (
∑âîn
[
debug_cou¡
]);

1951 
	`putch¨
 ('\n');

1956 
compûe_°ack
.
°ack
 = 
	`TALLOC
 (
INIT_COMPILE_STACK_SIZE
, 
compûe_°ack_ñt_t
);

1957 i‡(
compûe_°ack
.
°ack
 =
NULL
)

1958  
REG_ESPACE
;

1960 
compûe_°ack
.
size
 = 
INIT_COMPILE_STACK_SIZE
;

1961 
compûe_°ack
.
avaû
 = 0;

1964 
buÂ
->
sy¡ax
 = syntax;

1965 
buÂ
->
Á°m≠_accuøã
 = 0;

1966 
buÂ
->
nŸ_bﬁ
 = buÂ->
nŸ_eﬁ
 = 0;

1971 
buÂ
->
u£d
 = 0;

1974 
buÂ
->
ª_nsub
 = 0;

1976 #i‡!
deföed
 
emacs
 && !deföed 
SYNTAX_TABLE


1978 
	`öô_sy¡ax_⁄˚
 ();

1981 i‡(
buÂ
->
Æloˇãd
 == 0)

1983 i‡(
buÂ
->
buf„r
)

1987 
	`RETALLOC
 (
buÂ
->
buf„r
, 
INIT_BUF_SIZE
, );

1991 
buÂ
->
buf„r
 = 
	`TALLOC
 (
INIT_BUF_SIZE
, );

1993 i‡(!
buÂ
->
buf„r
Ë
	`FREE_STACK_RETURN
 (
REG_ESPACE
);

1995 
buÂ
->
Æloˇãd
 = 
INIT_BUF_SIZE
;

1998 
begÆt
 = 
b
 = 
buÂ
->
buf„r
;

2001 
p
 !
≥nd
)

2003 
	`PATFETCH
 (
c
);

2005 
c
)

2010 
p
 =
∑âîn
 + 1

2012 || 
sy¡ax
 & 
RE_CONTEXT_INDEP_ANCHORS


2014 || 
	`©_beglöe_loc_p
 (
∑âîn
, 
p
, 
sy¡ax
))

2015 
	`BUF_PUSH
 (
beglöe
);

2017 
n‹mÆ_ch¨
;

2025 
p
 =
≥nd


2027 || 
sy¡ax
 & 
RE_CONTEXT_INDEP_ANCHORS


2029 || 
	`©_ídlöe_loc_p
 (
p
, 
≥nd
, 
sy¡ax
))

2030 
	`BUF_PUSH
 (
ídlöe
);

2032 
n‹mÆ_ch¨
;

2039 i‡((
sy¡ax
 & 
RE_BK_PLUS_QM
)

2040 || (
sy¡ax
 & 
RE_LIMITED_OPS
))

2041 
n‹mÆ_ch¨
;

2042 
h™dÀ_∂us
:

2045 i‡(!
œ°°¨t
)

2047 i‡(
sy¡ax
 & 
RE_CONTEXT_INVALID_OPS
)

2048 
	`FREE_STACK_RETURN
 (
REG_BADRPT
);

2049 i‡(!(
sy¡ax
 & 
RE_CONTEXT_INDEP_OPS
))

2050 
n‹mÆ_ch¨
;

2055 
boﬁón
 
kìp_°rög_p
 = 
Ál£
;

2058 
zîo_times_ok
 = 0, 
m™y_times_ok
 = 0;

2067 
zîo_times_ok
 |
c
 != '+';

2068 
m™y_times_ok
 |
c
 != '?';

2070 i‡(
p
 =
≥nd
)

2073 
	`PATFETCH
 (
c
);

2075 i‡(
c
 == '*'

2076 || (!(
sy¡ax
 & 
RE_BK_PLUS_QM
Ë&& (
c
 == '+' || c == '?')))

2079 i‡(
sy¡ax
 & 
RE_BK_PLUS_QM
 && 
c
 == '\\')

2081 i‡(
p
 =
≥nd
Ë
	`FREE_STACK_RETURN
 (
REG_EESCAPE
);

2083 
	`PATFETCH
 (
c1
);

2084 i‡(!(
c1
 == '+' || c1 == '?'))

2086 
PATUNFETCH
;

2087 
PATUNFETCH
;

2091 
c
 = 
c1
;

2095 
PATUNFETCH
;

2104 i‡(!
œ°°¨t
)

2109 i‡(
m™y_times_ok
)

2120 
	`as£π
 (
p
 - 1 > 
∑âîn
);

2123 
	`GET_BUFFER_SPACE
 (3);

2130 i‡(
	`TRANSLATE
 (*(
p
 - 2)) == TRANSLATE ('.')

2131 && 
zîo_times_ok


2132 && 
p
 < 
≥nd
 && 
	`TRANSLATE
 (*p) == TRANSLATE ('\n')

2133 && !(
sy¡ax
 & 
RE_DOT_NEWLINE
))

2135 
	`STORE_JUMP
 (
jump
, 
b
, 
œ°°¨t
);

2136 
kìp_°rög_p
 = 
åue
;

2140 
	`STORE_JUMP
 (
maybe_p›_jump
, 
b
, 
œ°°¨t
 - 3);

2143 
b
 += 3;

2148 
	`GET_BUFFER_SPACE
 (3);

2149 
	`INSERT_JUMP
 (
kìp_°rög_p
 ? 
⁄_Áûuª_kìp_°rög_jump


2150 : 
⁄_Áûuª_jump
,

2151 
œ°°¨t
, 
b
 + 3);

2152 
≥ndög_exa˘
 = 0;

2153 
b
 += 3;

2155 i‡(!
zîo_times_ok
)

2162 
	`GET_BUFFER_SPACE
 (3);

2163 
	`INSERT_JUMP
 (
dummy_Áûuª_jump
, 
œ°°¨t
,Üaststart + 6);

2164 
b
 += 3;

2171 
œ°°¨t
 = 
b
;

2172 
	`BUF_PUSH
 (
™ych¨
);

2178 
boﬁón
 
had_ch¨_˛ass
 = 
Ál£
;

2180 i‡(
p
 =
≥nd
Ë
	`FREE_STACK_RETURN
 (
REG_EBRACK
);

2184 
	`GET_BUFFER_SPACE
 (34);

2186 
œ°°¨t
 = 
b
;

2190 
	`BUF_PUSH
 (*
p
 ='^' ? 
ch¨£t_nŸ
 : 
ch¨£t
);

2191 i‡(*
p
 == '^')

2192 
p
++;

2195 
p1
 = 
p
;

2198 
	`BUF_PUSH
 ((1 << 
BYTEWIDTH
) / BYTEWIDTH);

2201 
	`mem£t
 (
b
, 0, (1 << 
BYTEWIDTH
) / BYTEWIDTH);

2204 i‡((
ª_›code_t
Ë
b
[-2] =
ch¨£t_nŸ


2205 && (
sy¡ax
 & 
RE_HAT_LISTS_NOT_NEWLINE
))

2206 
	`SET_LIST_BIT
 ('\n');

2211 i‡(
p
 =
≥nd
Ë
	`FREE_STACK_RETURN
 (
REG_EBRACK
);

2213 
	`PATFETCH
 (
c
);

2216 i‡((
sy¡ax
 & 
RE_BACKSLASH_ESCAPE_IN_LISTS
Ë&& 
c
 == '\\')

2218 i‡(
p
 =
≥nd
Ë
	`FREE_STACK_RETURN
 (
REG_EESCAPE
);

2220 
	`PATFETCH
 (
c1
);

2221 
	`SET_LIST_BIT
 (
c1
);

2228 i‡(
c
 =']' && 
p
 !
p1
 + 1)

2233 i‡(
had_ch¨_˛ass
 && 
c
 ='-' && *
p
 != ']')

2234 
	`FREE_STACK_RETURN
 (
REG_ERANGE
);

2240 i‡(
c
 == '-'

2241 && !(
p
 - 2 >
∑âîn
 &&Ö[-2] == '[')

2242 && !(
p
 - 3 >
∑âîn
 &&Ö[-3] == '[' &&Ö[-2] == '^')

2243 && *
p
 != ']')

2245 
ªg_îrcode_t
 
ªt


2246 
	`compûe_ønge
 (&
p
, 
≥nd
, 
å™¶©e
, 
sy¡ax
, 
b
);

2247 i‡(
ªt
 !
REG_NOERROR
Ë
	`FREE_STACK_RETURN
 (ret);

2250 i‡(
p
[0] == '-' &&Ö[1] != ']')

2252 
ªg_îrcode_t
 
ªt
;

2255 
	`PATFETCH
 (
c1
);

2257 
ªt
 = 
	`compûe_ønge
 (&
p
, 
≥nd
, 
å™¶©e
, 
sy¡ax
, 
b
);

2258 i‡(
ªt
 !
REG_NOERROR
Ë
	`FREE_STACK_RETURN
 (ret);

2264 i‡(
sy¡ax
 & 
RE_CHAR_CLASSES
 && 
c
 ='[' && *
p
 == ':')

2266 
°r
[
CHAR_CLASS_MAX_LENGTH
 + 1];

2268 
	`PATFETCH
 (
c
);

2269 
c1
 = 0;

2272 i‡(
p
 =
≥nd
Ë
	`FREE_STACK_RETURN
 (
REG_EBRACK
);

2276 
	`PATFETCH
 (
c
);

2277 i‡((
c
 =':' && *
p
 =']'Ë||Ö =
≥nd
)

2279 i‡(
c1
 < 
CHAR_CLASS_MAX_LENGTH
)

2280 
°r
[
c1
++] = 
c
;

2283 
°r
[0] = '\0';

2285 
°r
[
c1
] = '\0';

2290 i‡(
c
 =':' && *
p
 == ']')

2292 #i‡
deföed
 
_LIBC
 || 
WIDE_CHAR_SUPPORT


2293 
boﬁón
 
is_lowî
 = 
	`STREQ
 (
°r
, "lower");

2294 
boﬁón
 
is_uµî
 = 
	`STREQ
 (
°r
, "upper");

2295 
w˘y≥_t
 
wt
;

2296 
ch
;

2298 
wt
 = 
	`IS_CHAR_CLASS
 (
°r
);

2299 i‡(
wt
 == 0)

2300 
	`FREE_STACK_RETURN
 (
REG_ECTYPE
);

2304 
	`PATFETCH
 (
c
);

2306 i‡(
p
 =
≥nd
Ë
	`FREE_STACK_RETURN
 (
REG_EBRACK
);

2308 
ch
 = 0; ch < 1 << 
BYTEWIDTH
; ++ch)

2310 #ifde‡
_LIBC


2311 i‡(
	`__isw˘y≥
 (
	`__btowc
 (
ch
), 
wt
))

2312 
	`SET_LIST_BIT
 (
ch
);

2314 i‡(
	`isw˘y≥
 (
	`btowc
 (
ch
), 
wt
))

2315 
	`SET_LIST_BIT
 (
ch
);

2318 i‡(
å™¶©e
 && (
is_uµî
 || 
is_lowî
)

2319 && (
	`ISUPPER
 (
ch
Ë|| 
	`ISLOWER
 (ch)))

2320 
	`SET_LIST_BIT
 (
ch
);

2323 
had_ch¨_˛ass
 = 
åue
;

2325 
ch
;

2326 
boﬁón
 
is_Ænum
 = 
	`STREQ
 (
°r
, "alnum");

2327 
boﬁón
 
is_Æpha
 = 
	`STREQ
 (
°r
, "alpha");

2328 
boﬁón
 
is_bœnk
 = 
	`STREQ
 (
°r
, "blank");

2329 
boﬁón
 
is_˙ål
 = 
	`STREQ
 (
°r
, "cntrl");

2330 
boﬁón
 
is_digô
 = 
	`STREQ
 (
°r
, "digit");

2331 
boﬁón
 
is_gøph
 = 
	`STREQ
 (
°r
, "graph");

2332 
boﬁón
 
is_lowî
 = 
	`STREQ
 (
°r
, "lower");

2333 
boﬁón
 
is_¥öt
 = 
	`STREQ
 (
°r
, "print");

2334 
boﬁón
 
is_pun˘
 = 
	`STREQ
 (
°r
, "punct");

2335 
boﬁón
 
is_•a˚
 = 
	`STREQ
 (
°r
, "space");

2336 
boﬁón
 
is_uµî
 = 
	`STREQ
 (
°r
, "upper");

2337 
boﬁón
 
is_xdigô
 = 
	`STREQ
 (
°r
, "xdigit");

2339 i‡(!
	`IS_CHAR_CLASS
 (
°r
))

2340 
	`FREE_STACK_RETURN
 (
REG_ECTYPE
);

2344 
	`PATFETCH
 (
c
);

2346 i‡(
p
 =
≥nd
Ë
	`FREE_STACK_RETURN
 (
REG_EBRACK
);

2348 
ch
 = 0; ch < 1 << 
BYTEWIDTH
; ch++)

2352 i‡–(
is_Ænum
 && 
	`ISALNUM
 (
ch
))

2353 || (
is_Æpha
 && 
	`ISALPHA
 (
ch
))

2354 || (
is_bœnk
 && 
	`ISBLANK
 (
ch
))

2355 || (
is_˙ål
 && 
	`ISCNTRL
 (
ch
)))

2356 
	`SET_LIST_BIT
 (
ch
);

2357 i‡–(
is_digô
 && 
	`ISDIGIT
 (
ch
))

2358 || (
is_gøph
 && 
	`ISGRAPH
 (
ch
))

2359 || (
is_lowî
 && 
	`ISLOWER
 (
ch
))

2360 || (
is_¥öt
 && 
	`ISPRINT
 (
ch
)))

2361 
	`SET_LIST_BIT
 (
ch
);

2362 i‡–(
is_pun˘
 && 
	`ISPUNCT
 (
ch
))

2363 || (
is_•a˚
 && 
	`ISSPACE
 (
ch
))

2364 || (
is_uµî
 && 
	`ISUPPER
 (
ch
))

2365 || (
is_xdigô
 && 
	`ISXDIGIT
 (
ch
)))

2366 
	`SET_LIST_BIT
 (
ch
);

2367 i‡–
å™¶©e
 && (
is_uµî
 || 
is_lowî
)

2368 && (
	`ISUPPER
 (
ch
Ë|| 
	`ISLOWER
 (ch)))

2369 
	`SET_LIST_BIT
 (
ch
);

2371 
had_ch¨_˛ass
 = 
åue
;

2376 
c1
++;

2377 
c1
--)

2378 
PATUNFETCH
;

2379 
	`SET_LIST_BIT
 ('[');

2380 
	`SET_LIST_BIT
 (':');

2381 
had_ch¨_˛ass
 = 
Ál£
;

2386 
had_ch¨_˛ass
 = 
Ál£
;

2387 
	`SET_LIST_BIT
 (
c
);

2393 (Ë
b
[-1] > 0 && b[b[-1] - 1] == 0)

2394 
b
[-1]--;

2395 
b
 += b[-1];

2401 i‡(
sy¡ax
 & 
RE_NO_BK_PARENS
)

2402 
h™dÀ_›í
;

2404 
n‹mÆ_ch¨
;

2408 i‡(
sy¡ax
 & 
RE_NO_BK_PARENS
)

2409 
h™dÀ_˛o£
;

2411 
n‹mÆ_ch¨
;

2415 i‡(
sy¡ax
 & 
RE_NEWLINE_ALT
)

2416 
h™dÀ_Æt
;

2418 
n‹mÆ_ch¨
;

2422 i‡(
sy¡ax
 & 
RE_NO_BK_VBAR
)

2423 
h™dÀ_Æt
;

2425 
n‹mÆ_ch¨
;

2429 i‡(
sy¡ax
 & 
RE_INTERVALS
 && sy¡ax & 
RE_NO_BK_BRACES
)

2430 
h™dÀ_öãrvÆ
;

2432 
n‹mÆ_ch¨
;

2436 i‡(
p
 =
≥nd
Ë
	`FREE_STACK_RETURN
 (
REG_EESCAPE
);

2441 
	`PATFETCH_RAW
 (
c
);

2443 
c
)

2446 i‡(
sy¡ax
 & 
RE_NO_BK_PARENS
)

2447 
n‹mÆ_back¶ash
;

2449 
h™dÀ_›í
:

2450 
buÂ
->
ª_nsub
++;

2451 
ªgnum
++;

2453 i‡(
COMPILE_STACK_FULL
)

2455 
	`RETALLOC
 (
compûe_°ack
.
°ack
, compûe_°ack.
size
 << 1,

2456 
compûe_°ack_ñt_t
);

2457 i‡(
compûe_°ack
.
°ack
 =
NULL
Ë 
REG_ESPACE
;

2459 
compûe_°ack
.
size
 <<= 1;

2466 
COMPILE_STACK_TOP
.
begÆt_off£t
 = 
begÆt
 - 
buÂ
->
buf„r
;

2467 
COMPILE_STACK_TOP
.
fixup_Æt_jump


2468 
fixup_Æt_jump
 ? fixup_Æt_jum∞- 
buÂ
->
buf„r
 + 1 : 0;

2469 
COMPILE_STACK_TOP
.
œ°°¨t_off£t
 = 
b
 - 
buÂ
->
buf„r
;

2470 
COMPILE_STACK_TOP
.
ªgnum
 =Ñegnum;

2476 i‡(
ªgnum
 <
MAX_REGNUM
)

2478 
COMPILE_STACK_TOP
.
ö√r_group_off£t
 = 
b
 - 
buÂ
->
buf„r
 + 2;

2479 
	`BUF_PUSH_3
 (
°¨t_mem‹y
, 
ªgnum
, 0);

2482 
compûe_°ack
.
avaû
++;

2484 
fixup_Æt_jump
 = 0;

2485 
œ°°¨t
 = 0;

2486 
begÆt
 = 
b
;

2490 
≥ndög_exa˘
 = 0;

2495 i‡(
sy¡ax
 & 
RE_NO_BK_PARENS
Ë
n‹mÆ_back¶ash
;

2497 i‡(
COMPILE_STACK_EMPTY
)

2499 i‡(
sy¡ax
 & 
RE_UNMATCHED_RIGHT_PAREN_ORD
)

2500 
n‹mÆ_back¶ash
;

2502 
	`FREE_STACK_RETURN
 (
REG_ERPAREN
);

2505 
h™dÀ_˛o£
:

2506 i‡(
fixup_Æt_jump
)

2511 
	`BUF_PUSH
 (
push_dummy_Áûuª
);

2515 
	`STORE_JUMP
 (
jump_∑°_Æt
, 
fixup_Æt_jump
, 
b
 - 1);

2519 i‡(
COMPILE_STACK_EMPTY
)

2521 i‡(
sy¡ax
 & 
RE_UNMATCHED_RIGHT_PAREN_ORD
)

2522 
n‹mÆ_ch¨
;

2524 
	`FREE_STACK_RETURN
 (
REG_ERPAREN
);

2529 
	`as£π
 (
compûe_°ack
.
avaû
 != 0);

2534 
ªgnum_t
 
this_group_ªgnum
;

2536 
compûe_°ack
.
avaû
--;

2537 
begÆt
 = 
buÂ
->
buf„r
 + 
COMPILE_STACK_TOP
.
begÆt_off£t
;

2538 
fixup_Æt_jump


2539 
COMPILE_STACK_TOP
.
fixup_Æt_jump


2540 ? 
buÂ
->
buf„r
 + 
COMPILE_STACK_TOP
.
fixup_Æt_jump
 - 1

2542 
œ°°¨t
 = 
buÂ
->
buf„r
 + 
COMPILE_STACK_TOP
.
œ°°¨t_off£t
;

2543 
this_group_ªgnum
 = 
COMPILE_STACK_TOP
.
ªgnum
;

2547 
≥ndög_exa˘
 = 0;

2551 i‡(
this_group_ªgnum
 <
MAX_REGNUM
)

2553 *
ö√r_group_loc


2554 
buÂ
->
buf„r
 + 
COMPILE_STACK_TOP
.
ö√r_group_off£t
;

2556 *
ö√r_group_loc
 = 
ªgnum
 - 
this_group_ªgnum
;

2557 
	`BUF_PUSH_3
 (
°›_mem‹y
, 
this_group_ªgnum
,

2558 
ªgnum
 - 
this_group_ªgnum
);

2565 i‡(
sy¡ax
 & 
RE_LIMITED_OPS
 || sy¡ax & 
RE_NO_BK_VBAR
)

2566 
n‹mÆ_back¶ash
;

2567 
h™dÀ_Æt
:

2568 i‡(
sy¡ax
 & 
RE_LIMITED_OPS
)

2569 
n‹mÆ_ch¨
;

2573 
	`GET_BUFFER_SPACE
 (3);

2574 
	`INSERT_JUMP
 (
⁄_Áûuª_jump
, 
begÆt
, 
b
 + 6);

2575 
≥ndög_exa˘
 = 0;

2576 
b
 += 3;

2594 i‡(
fixup_Æt_jump
)

2595 
	`STORE_JUMP
 (
jump_∑°_Æt
, 
fixup_Æt_jump
, 
b
);

2600 
fixup_Æt_jump
 = 
b
;

2601 
	`GET_BUFFER_SPACE
 (3);

2602 
b
 += 3;

2604 
œ°°¨t
 = 0;

2605 
begÆt
 = 
b
;

2611 i‡(!(
sy¡ax
 & 
RE_INTERVALS
)

2614 || ((
sy¡ax
 & 
RE_INTERVALS
Ë&& (sy¡ax & 
RE_NO_BK_BRACES
))

2615 || (
p
 - 2 =
∑âîn
 &&Ö =
≥nd
))

2616 
n‹mÆ_back¶ash
;

2618 
h™dÀ_öãrvÆ
:

2623 
lowî_bound
 = -1, 
uµî_bound
 = -1;

2625 
beg_öãrvÆ
 = 
p
 - 1;

2627 i‡(
p
 =
≥nd
)

2629 i‡(
sy¡ax
 & 
RE_NO_BK_BRACES
)

2630 
un„tch_öãrvÆ
;

2632 
	`FREE_STACK_RETURN
 (
REG_EBRACE
);

2635 
	`GET_UNSIGNED_NUMBER
 (
lowî_bound
);

2637 i‡(
c
 == ',')

2639 
	`GET_UNSIGNED_NUMBER
 (
uµî_bound
);

2640 i‡(
uµî_bound
 < 0Ëuµî_bound = 
RE_DUP_MAX
;

2644 
uµî_bound
 = 
lowî_bound
;

2646 i‡(
lowî_bound
 < 0 || 
uµî_bound
 > 
RE_DUP_MAX


2647 || 
lowî_bound
 > 
uµî_bound
)

2649 i‡(
sy¡ax
 & 
RE_NO_BK_BRACES
)

2650 
un„tch_öãrvÆ
;

2652 
	`FREE_STACK_RETURN
 (
REG_BADBR
);

2655 i‡(!(
sy¡ax
 & 
RE_NO_BK_BRACES
))

2657 i‡(
c
 !'\\'Ë
	`FREE_STACK_RETURN
 (
REG_EBRACE
);

2659 
	`PATFETCH
 (
c
);

2662 i‡(
c
 != '}')

2664 i‡(
sy¡ax
 & 
RE_NO_BK_BRACES
)

2665 
un„tch_öãrvÆ
;

2667 
	`FREE_STACK_RETURN
 (
REG_BADBR
);

2673 i‡(!
œ°°¨t
)

2675 i‡(
sy¡ax
 & 
RE_CONTEXT_INVALID_OPS
)

2676 
	`FREE_STACK_RETURN
 (
REG_BADRPT
);

2677 i‡(
sy¡ax
 & 
RE_CONTEXT_INDEP_OPS
)

2678 
œ°°¨t
 = 
b
;

2680 
un„tch_öãrvÆ
;

2686 i‡(
uµî_bound
 == 0)

2688 
	`GET_BUFFER_SPACE
 (3);

2689 
	`INSERT_JUMP
 (
jump
, 
œ°°¨t
, 
b
 + 3);

2690 
b
 += 3;

2705 
nbyãs
 = 10 + (
uµî_bound
 > 1) * 10;

2707 
	`GET_BUFFER_SPACE
 (
nbyãs
);

2714 
	`INSERT_JUMP2
 (
suc˚ed_n
, 
œ°°¨t
,

2715 
b
 + 5 + (
uµî_bound
 > 1) * 5,

2716 
lowî_bound
);

2717 
b
 += 5;

2723 
	`ö£π_›2
 (
£t_numbî_©
, 
œ°°¨t
, 5, 
lowî_bound
, 
b
);

2724 
b
 += 5;

2726 i‡(
uµî_bound
 > 1)

2734 
	`STORE_JUMP2
 (
jump_n
, 
b
, 
œ°°¨t
 + 5,

2735 
uµî_bound
 - 1);

2736 
b
 += 5;

2752 
	`ö£π_›2
 (
£t_numbî_©
, 
œ°°¨t
, 
b
 -Üaststart,

2753 
uµî_bound
 - 1, 
b
);

2754 
b
 += 5;

2757 
≥ndög_exa˘
 = 0;

2758 
beg_öãrvÆ
 = 
NULL
;

2762 
un„tch_öãrvÆ
:

2764 
	`as£π
 (
beg_öãrvÆ
);

2765 
p
 = 
beg_öãrvÆ
;

2766 
beg_öãrvÆ
 = 
NULL
;

2769 
	`PATFETCH
 (
c
);

2771 i‡(!(
sy¡ax
 & 
RE_NO_BK_BRACES
))

2773 i‡(
p
 > 
∑âîn
 &&Ö[-1] == '\\')

2774 
n‹mÆ_back¶ash
;

2776 
n‹mÆ_ch¨
;

2778 #ifde‡
emacs


2782 
	`BUF_PUSH
 (
©_dŸ
);

2786 
œ°°¨t
 = 
b
;

2787 
	`PATFETCH
 (
c
);

2788 
	`BUF_PUSH_2
 (
sy¡ax•ec
, 
sy¡ax_•ec_code
[
c
]);

2792 
œ°°¨t
 = 
b
;

2793 
	`PATFETCH
 (
c
);

2794 
	`BUF_PUSH_2
 (
nŸsy¡ax•ec
, 
sy¡ax_•ec_code
[
c
]);

2800 i‡(
sy¡ax
 & 
RE_NO_GNU_OPS
)

2801 
n‹mÆ_ch¨
;

2802 
œ°°¨t
 = 
b
;

2803 
	`BUF_PUSH
 (
w‹dch¨
);

2808 i‡(
sy¡ax
 & 
RE_NO_GNU_OPS
)

2809 
n‹mÆ_ch¨
;

2810 
œ°°¨t
 = 
b
;

2811 
	`BUF_PUSH
 (
nŸw‹dch¨
);

2816 i‡(
sy¡ax
 & 
RE_NO_GNU_OPS
)

2817 
n‹mÆ_ch¨
;

2818 
	`BUF_PUSH
 (
w‹dbeg
);

2822 i‡(
sy¡ax
 & 
RE_NO_GNU_OPS
)

2823 
n‹mÆ_ch¨
;

2824 
	`BUF_PUSH
 (
w‹díd
);

2828 i‡(
sy¡ax
 & 
RE_NO_GNU_OPS
)

2829 
n‹mÆ_ch¨
;

2830 
	`BUF_PUSH
 (
w‹dbound
);

2834 i‡(
sy¡ax
 & 
RE_NO_GNU_OPS
)

2835 
n‹mÆ_ch¨
;

2836 
	`BUF_PUSH
 (
nŸw‹dbound
);

2840 i‡(
sy¡ax
 & 
RE_NO_GNU_OPS
)

2841 
n‹mÆ_ch¨
;

2842 
	`BUF_PUSH
 (
begbuf
);

2846 i‡(
sy¡ax
 & 
RE_NO_GNU_OPS
)

2847 
n‹mÆ_ch¨
;

2848 
	`BUF_PUSH
 (
ídbuf
);

2853 i‡(
sy¡ax
 & 
RE_NO_BK_REFS
)

2854 
n‹mÆ_ch¨
;

2856 
c1
 = 
c
 - '0';

2858 i‡(
c1
 > 
ªgnum
)

2859 
	`FREE_STACK_RETURN
 (
REG_ESUBREG
);

2862 i‡(
	`group_ö_compûe_°ack
 (
compûe_°ack
, (
ªgnum_t
Ë
c1
))

2863 
n‹mÆ_ch¨
;

2865 
œ°°¨t
 = 
b
;

2866 
	`BUF_PUSH_2
 (
du∂iˇã
, 
c1
);

2872 i‡(
sy¡ax
 & 
RE_BK_PLUS_QM
)

2873 
h™dÀ_∂us
;

2875 
n‹mÆ_back¶ash
;

2878 
n‹mÆ_back¶ash
:

2882 
c
 = 
	`TRANSLATE
 (c);

2883 
n‹mÆ_ch¨
;

2890 
n‹mÆ_ch¨
:

2892 i‡(!
≥ndög_exa˘


2895 || 
≥ndög_exa˘
 + *≥ndög_exa˘ + 1 !
b


2898 || *
≥ndög_exa˘
 =(1 << 
BYTEWIDTH
) - 1

2901 || *
p
 == '*' || *p == '^'

2902 || ((
sy¡ax
 & 
RE_BK_PLUS_QM
)

2903 ? *
p
 == '\\' && (p[1] == '+' ||Ö[1] == '?')

2904 : (*
p
 == '+' || *p == '?'))

2905 || ((
sy¡ax
 & 
RE_INTERVALS
)

2906 && ((
sy¡ax
 & 
RE_NO_BK_BRACES
)

2907 ? *
p
 == '{'

2908 : (
p
[0] == '\\' &&Ö[1] == '{'))))

2912 
œ°°¨t
 = 
b
;

2914 
	`BUF_PUSH_2
 (
exa˘n
, 0);

2915 
≥ndög_exa˘
 = 
b
 - 1;

2918 
	`BUF_PUSH
 (
c
);

2919 (*
≥ndög_exa˘
)++;

2927 i‡(
fixup_Æt_jump
)

2928 
	`STORE_JUMP
 (
jump_∑°_Æt
, 
fixup_Æt_jump
, 
b
);

2930 i‡(!
COMPILE_STACK_EMPTY
)

2931 
	`FREE_STACK_RETURN
 (
REG_EPAREN
);

2935 i‡(
sy¡ax
 & 
RE_NO_POSIX_BACKTRACKING
)

2936 
	`BUF_PUSH
 (
suc˚ed
);

2938 
	`‰ì
 (
compûe_°ack
.
°ack
);

2941 
buÂ
->
u£d
 = 
b
 - buÂ->
buf„r
;

2943 #ifde‡
DEBUG


2944 i‡(
debug
)

2946 
	`DEBUG_PRINT1
 ("\nCompiledÖattern: \n");

2947 
	`¥öt_compûed_∑âîn
 (
buÂ
);

2951 #i‚de‡
MATCH_MAY_ALLOCATE


2956 
num_ªgs
 = 
buÂ
->
ª_nsub
 + 1;

2961 i‡(
Áû_°ack
.
size
 < (2 * 
ª_max_Áûuªs
 * 
MAX_FAILURE_ITEMS
))

2963 
Áû_°ack
.
size
 = (2 * 
ª_max_Áûuªs
 * 
MAX_FAILURE_ITEMS
);

2965 #ifde‡
emacs


2966 i‡(! 
Áû_°ack
.
°ack
)

2967 
Áû_°ack
.
°ack


2968 (
Áû_°ack_ñt_t
 *Ë
	`xmÆloc
 (
Áû_°ack
.
size


2969 *  (
Áû_°ack_ñt_t
));

2971 
Áû_°ack
.
°ack


2972 (
Áû_°ack_ñt_t
 *Ë
	`xªÆloc
 (
Áû_°ack
.
°ack
,

2973 (
Áû_°ack
.
size


2974 *  (
Áû_°ack_ñt_t
)));

2976 i‡(! 
Áû_°ack
.
°ack
)

2977 
Áû_°ack
.
°ack


2978 (
Áû_°ack_ñt_t
 *Ë
	`mÆloc
 (
Áû_°ack
.
size


2979 *  (
Áû_°ack_ñt_t
));

2981 
Áû_°ack
.
°ack


2982 (
Áû_°ack_ñt_t
 *Ë
	`ªÆloc
 (
Áû_°ack
.
°ack
,

2983 (
Áû_°ack
.
size


2984 *  (
Áû_°ack_ñt_t
)));

2988 
	`ªgex_grow_ªgi°îs
 (
num_ªgs
);

2992  
REG_NOERROR
;

2993 
	}
}

3000 
	$°‹e_›1
 (
›
, 
loc
, 
¨g
)

3001 
ª_›code_t
 
›
;

3002 *
loc
;

3003 
¨g
;

3005 *
loc
 = (Ë
›
;

3006 
	`STORE_NUMBER
 (
loc
 + 1, 
¨g
);

3007 
	}
}

3013 
	$°‹e_›2
 (
›
, 
loc
, 
¨g1
, 
¨g2
)

3014 
ª_›code_t
 
›
;

3015 *
loc
;

3016 
¨g1
, 
¨g2
;

3018 *
loc
 = (Ë
›
;

3019 
	`STORE_NUMBER
 (
loc
 + 1, 
¨g1
);

3020 
	`STORE_NUMBER
 (
loc
 + 3, 
¨g2
);

3021 
	}
}

3028 
	$ö£π_›1
 (
›
, 
loc
, 
¨g
, 
íd
)

3029 
ª_›code_t
 
›
;

3030 *
loc
;

3031 
¨g
;

3032 *
íd
;

3034 *
p‰om
 = 
íd
;

3035 *
±o
 = 
íd
 + 3;

3037 
p‰om
 !
loc
)

3038 *--
±o
 = *--
p‰om
;

3040 
	`°‹e_›1
 (
›
, 
loc
, 
¨g
);

3041 
	}
}

3047 
	$ö£π_›2
 (
›
, 
loc
, 
¨g1
, 
¨g2
, 
íd
)

3048 
ª_›code_t
 
›
;

3049 *
loc
;

3050 
¨g1
, 
¨g2
;

3051 *
íd
;

3053 *
p‰om
 = 
íd
;

3054 *
±o
 = 
íd
 + 5;

3056 
p‰om
 !
loc
)

3057 *--
±o
 = *--
p‰om
;

3059 
	`°‹e_›2
 (
›
, 
loc
, 
¨g1
, 
¨g2
);

3060 
	}
}

3067 
boﬁón


3068 
	$©_beglöe_loc_p
 (
∑âîn
, 
p
, 
sy¡ax
)

3069 c⁄° *
∑âîn
, *
p
;

3070 
ªg_sy¡ax_t
 
sy¡ax
;

3072 c⁄° *
¥ev
 = 
p
 - 2;

3073 
boﬁón
 
¥ev_¥ev_back¶ash
 = 
¥ev
 > 
∑âîn
 &&Örev[-1] == '\\';

3077 (*
¥ev
 ='(' && (
sy¡ax
 & 
RE_NO_BK_PARENS
 || 
¥ev_¥ev_back¶ash
))

3079 || (*
¥ev
 ='|' && (
sy¡ax
 & 
RE_NO_BK_VBAR
 || 
¥ev_¥ev_back¶ash
));

3080 
	}
}

3086 
boﬁón


3087 
	$©_ídlöe_loc_p
 (
p
, 
≥nd
, 
sy¡ax
)

3088 c⁄° *
p
, *
≥nd
;

3089 
ªg_sy¡ax_t
 
sy¡ax
;

3091 c⁄° *
√xt
 = 
p
;

3092 
boﬁón
 
√xt_back¶ash
 = *
√xt
 == '\\';

3093 c⁄° *
√xt_√xt
 = 
p
 + 1 < 
≥nd
 ?Ö + 1 : 0;

3097 (
sy¡ax
 & 
RE_NO_BK_PARENS
 ? *
√xt
 == ')'

3098 : 
√xt_back¶ash
 && 
√xt_√xt
 && *next_next == ')')

3100 || (
sy¡ax
 & 
RE_NO_BK_VBAR
 ? *
√xt
 == '|'

3101 : 
√xt_back¶ash
 && 
√xt_√xt
 && *next_next == '|');

3102 
	}
}

3108 
boﬁón


3109 
	$group_ö_compûe_°ack
 (
compûe_°ack
, 
ªgnum
)

3110 
compûe_°ack_ty≥
 
compûe_°ack
;

3111 
ªgnum_t
 
ªgnum
;

3113 
this_ñemít
;

3115 
this_ñemít
 = 
compûe_°ack
.
avaû
 - 1;

3116 
this_ñemít
 >= 0;

3117 
this_ñemít
--)

3118 i‡(
compûe_°ack
.
°ack
[
this_ñemít
].
ªgnum
 ==Ñegnum)

3119  
åue
;

3121  
Ál£
;

3122 
	}
}

3136 
ªg_îrcode_t


3137 
	$compûe_ønge
 (
p_±r
, 
≥nd
, 
å™¶©e
, 
sy¡ax
, 
b
)

3138 c⁄° **
p_±r
, *
≥nd
;

3139 
RE_TRANSLATE_TYPE
 
å™¶©e
;

3140 
ªg_sy¡ax_t
 
sy¡ax
;

3141 *
b
;

3143 
this_ch¨
;

3145 c⁄° *
p
 = *
p_±r
;

3146 
ønge_°¨t
, 
ønge_íd
;

3148 i‡(
p
 =
≥nd
)

3149  
REG_ERANGE
;

3159 
ønge_°¨t
 = ((c⁄° *Ë
p
)[-2];

3160 
ønge_íd
 = ((c⁄° *Ë
p
)[0];

3164 (*
p_±r
)++;

3167 i‡(
ønge_°¨t
 > 
ønge_íd
)

3168  
sy¡ax
 & 
RE_NO_EMPTY_RANGES
 ? 
REG_ERANGE
 : 
REG_NOERROR
;

3174 
this_ch¨
 = 
ønge_°¨t
;Åhis_ch¨ <
ønge_íd
;Åhis_char++)

3176 
	`SET_LIST_BIT
 (
	`TRANSLATE
 (
this_ch¨
));

3179  
REG_NOERROR
;

3180 
	}
}

3196 
	$ª_compûe_Á°m≠
 (
buÂ
)

3197 
ª_∑âîn_buf„r
 *
buÂ
;

3199 
j
, 
k
;

3200 #ifde‡
MATCH_MAY_ALLOCATE


3201 
Áû_°ack_ty≥
 
Áû_°ack
;

3203 #i‚de‡
REGEX_MALLOC


3204 *
de°ö©i⁄
;

3207 *
Á°m≠
 = 
buÂ
->fastmap;

3208 *
∑âîn
 = 
buÂ
->
buf„r
;

3209 *
p
 = 
∑âîn
;

3210 *
≥nd
 = 
∑âîn
 + 
buÂ
->
u£d
;

3212 #ifde‡
REL_ALLOC


3215 
Áû_°ack_ñt_t
 *
Áûuª_°ack_±r
;

3222 
boﬁón
 
∑th_ˇn_be_nuŒ
 = 
åue
;

3225 
boﬁón
 
suc˚ed_n_p
 = 
Ál£
;

3227 
	`as£π
 (
Á°m≠
 !
NULL
 && 
p
 != NULL);

3229 
	`INIT_FAIL_STACK
 ();

3230 
	`mem£t
 (
Á°m≠
, 0, 1 << 
BYTEWIDTH
);

3231 
buÂ
->
Á°m≠_accuøã
 = 1;

3232 
buÂ
->
ˇn_be_nuŒ
 = 0;

3236 i‡(
p
 =
≥nd
 || *∞=
suc˚ed
)

3239 i‡(!
	`FAIL_STACK_EMPTY
 ())

3241 
buÂ
->
ˇn_be_nuŒ
 |
∑th_ˇn_be_nuŒ
;

3244 
∑th_ˇn_be_nuŒ
 = 
åue
;

3246 
p
 = 
Áû_°ack
.
°ack
[--Áû_°ack.
avaû
].
poöãr
;

3255 
	`as£π
 (
p
 < 
≥nd
);

3257 
	`SWITCH_ENUM_CAST
 ((
ª_›code_t
Ë*
p
++))

3265 
du∂iˇã
:

3266 
buÂ
->
ˇn_be_nuŒ
 = 1;

3267 
d⁄e
;

3273 
exa˘n
:

3274 
Á°m≠
[
p
[1]] = 1;

3278 
ch¨£t
:

3279 
j
 = *
p
++ * 
BYTEWIDTH
 - 1; j >= 0; j--)

3280 i‡(
p
[
j
 / 
BYTEWIDTH
] & (1 << (j % BYTEWIDTH)))

3281 
Á°m≠
[
j
] = 1;

3285 
ch¨£t_nŸ
:

3287 
j
 = *
p
 * 
BYTEWIDTH
; j < (1 << BYTEWIDTH); j++)

3288 
Á°m≠
[
j
] = 1;

3290 
j
 = *
p
++ * 
BYTEWIDTH
 - 1; j >= 0; j--)

3291 i‡(!(
p
[
j
 / 
BYTEWIDTH
] & (1 << (j % BYTEWIDTH))))

3292 
Á°m≠
[
j
] = 1;

3296 
w‹dch¨
:

3297 
j
 = 0; j < (1 << 
BYTEWIDTH
); j++)

3298 i‡(
	`SYNTAX
 (
j
Ë=
Sw‹d
)

3299 
Á°m≠
[
j
] = 1;

3303 
nŸw‹dch¨
:

3304 
j
 = 0; j < (1 << 
BYTEWIDTH
); j++)

3305 i‡(
	`SYNTAX
 (
j
Ë!
Sw‹d
)

3306 
Á°m≠
[
j
] = 1;

3310 
™ych¨
:

3312 
Á°m≠_√wlöe
 = 
Á°m≠
['\n'];

3315 
j
 = 0; j < (1 << 
BYTEWIDTH
); j++)

3316 
Á°m≠
[
j
] = 1;

3319 i‡(!(
buÂ
->
sy¡ax
 & 
RE_DOT_NEWLINE
))

3320 
Á°m≠
['\n'] = 
Á°m≠_√wlöe
;

3324 i‡(
buÂ
->
ˇn_be_nuŒ
)

3325 
d⁄e
;

3331 #ifde‡
emacs


3332 
sy¡ax•ec
:

3333 
k
 = *
p
++;

3334 
j
 = 0; j < (1 << 
BYTEWIDTH
); j++)

3335 i‡(
	`SYNTAX
 (
j
Ë=(
sy¡axcode
Ë
k
)

3336 
Á°m≠
[
j
] = 1;

3340 
nŸsy¡ax•ec
:

3341 
k
 = *
p
++;

3342 
j
 = 0; j < (1 << 
BYTEWIDTH
); j++)

3343 i‡(
	`SYNTAX
 (
j
Ë!(
sy¡axcode
Ë
k
)

3344 
Á°m≠
[
j
] = 1;

3352 
bef‹e_dŸ
:

3353 
©_dŸ
:

3354 
a·î_dŸ
:

3359 
no_›
:

3360 
beglöe
:

3361 
ídlöe
:

3362 
begbuf
:

3363 
ídbuf
:

3364 
w‹dbound
:

3365 
nŸw‹dbound
:

3366 
w‹dbeg
:

3367 
w‹díd
:

3368 
push_dummy_Áûuª
:

3372 
jump_n
:

3373 
p›_Áûuª_jump
:

3374 
maybe_p›_jump
:

3375 
jump
:

3376 
jump_∑°_Æt
:

3377 
dummy_Áûuª_jump
:

3378 
	`EXTRACT_NUMBER_AND_INCR
 (
j
, 
p
);

3379 
p
 +
j
;

3380 i‡(
j
 > 0)

3388 i‡((
ª_›code_t
Ë*
p
 !
⁄_Áûuª_jump


3389 && (
ª_›code_t
Ë*
p
 !
suc˚ed_n
)

3392 
p
++;

3393 
	`EXTRACT_NUMBER_AND_INCR
 (
j
, 
p
);

3394 
p
 +
j
;

3397 i‡(!
	`FAIL_STACK_EMPTY
 ()

3398 && 
Áû_°ack
.
°ack
[Áû_°ack.
avaû
 - 1].
poöãr
 =
p
)

3399 
Áû_°ack
.
avaû
--;

3404 
⁄_Áûuª_jump
:

3405 
⁄_Áûuª_kìp_°rög_jump
:

3406 
h™dÀ_⁄_Áûuª_jump
:

3407 
	`EXTRACT_NUMBER_AND_INCR
 (
j
, 
p
);

3416 i‡(
p
 + 
j
 < 
≥nd
)

3418 i‡(!
	`PUSH_PATTERN_OP
 (
p
 + 
j
, 
Áû_°ack
))

3420 
	`RESET_FAIL_STACK
 ();

3425 
buÂ
->
ˇn_be_nuŒ
 = 1;

3427 i‡(
suc˚ed_n_p
)

3429 
	`EXTRACT_NUMBER_AND_INCR
 (
k
, 
p
);

3430 
suc˚ed_n_p
 = 
Ál£
;

3436 
suc˚ed_n
:

3438 
p
 += 2;

3441 
	`EXTRACT_NUMBER_AND_INCR
 (
k
, 
p
);

3442 i‡(
k
 == 0)

3444 
p
 -= 4;

3445 
suc˚ed_n_p
 = 
åue
;

3446 
h™dÀ_⁄_Áûuª_jump
;

3451 
£t_numbî_©
:

3452 
p
 += 4;

3456 
°¨t_mem‹y
:

3457 
°›_mem‹y
:

3458 
p
 += 2;

3463 
	`ab‹t
 ();

3472 
∑th_ˇn_be_nuŒ
 = 
Ál£
;

3473 
p
 = 
≥nd
;

3478 
buÂ
->
ˇn_be_nuŒ
 |
∑th_ˇn_be_nuŒ
;

3480 
d⁄e
:

3481 
	`RESET_FAIL_STACK
 ();

3483 
	}
}

3484 #ifde‡
_LIBC


3485 
	$wók_Æüs
 (
__ª_compûe_Á°m≠
, 
ª_compûe_Á°m≠
)

3502 
	$ª_£t_ªgi°îs
 (
buÂ
, 
ªgs
, 
num_ªgs
, 
°¨ts
, 
íds
)

3503 
ª_∑âîn_buf„r
 *
buÂ
;

3504 
ª_ªgi°îs
 *
ªgs
;

3505 
num_ªgs
;

3506 
ªgoff_t
 *
°¨ts
, *
íds
;

3508 i‡(
num_ªgs
)

3510 
buÂ
->
ªgs_Æloˇãd
 = 
REGS_REALLOCATE
;

3511 
ªgs
->
num_ªgs
 =Çum_regs;

3512 
ªgs
->
°¨t
 = 
°¨ts
;

3513 
ªgs
->
íd
 = 
íds
;

3517 
buÂ
->
ªgs_Æloˇãd
 = 
REGS_UNALLOCATED
;

3518 
ªgs
->
num_ªgs
 = 0;

3519 
ªgs
->
°¨t
 =Ñegs->
íd
 = (
ªgoff_t
 *) 0;

3521 
	}
}

3522 #ifde‡
_LIBC


3523 
	$wók_Æüs
 (
__ª_£t_ªgi°îs
, 
ª_£t_ªgi°îs
)

3532 
	$ª_£¨ch
 (
buÂ
, 
°rög
, 
size
, 
°¨ços
, 
ønge
, 
ªgs
)

3533 
ª_∑âîn_buf„r
 *
buÂ
;

3534 c⁄° *
°rög
;

3535 
size
, 
°¨ços
, 
ønge
;

3536 
ª_ªgi°îs
 *
ªgs
;

3538  
	`ª_£¨ch_2
 (
buÂ
, 
NULL
, 0, 
°rög
, 
size
, 
°¨ços
, 
ønge
,

3539 
ªgs
, 
size
);

3540 
	}
}

3541 #ifde‡
_LIBC


3542 
	$wók_Æüs
 (
__ª_£¨ch
, 
ª_£¨ch
)

3568 
	$ª_£¨ch_2
 (
buÂ
, 
°rög1
, 
size1
, 
°rög2
, 
size2
, 
°¨ços
, 
ønge
, 
ªgs
, 
°›
)

3569 
ª_∑âîn_buf„r
 *
buÂ
;

3570 c⁄° *
°rög1
, *
°rög2
;

3571 
size1
, 
size2
;

3572 
°¨ços
;

3573 
ønge
;

3574 
ª_ªgi°îs
 *
ªgs
;

3575 
°›
;

3577 
vÆ
;

3578 *
Á°m≠
 = 
buÂ
->fastmap;

3579 
RE_TRANSLATE_TYPE
 
å™¶©e
 = 
buÂ
->translate;

3580 
tŸÆ_size
 = 
size1
 + 
size2
;

3581 
ídpos
 = 
°¨ços
 + 
ønge
;

3584 i‡(
°¨ços
 < 0 || sèπpo†> 
tŸÆ_size
)

3590 i‡(
ídpos
 < 0)

3591 
ønge
 = 0 - 
°¨ços
;

3592 i‡(
ídpos
 > 
tŸÆ_size
)

3593 
ønge
 = 
tŸÆ_size
 - 
°¨ços
;

3597 i‡(
buÂ
->
u£d
 > 0 && 
ønge
 > 0

3598 && ((
ª_›code_t
Ë
buÂ
->
buf„r
[0] =
begbuf


3600 || ((
ª_›code_t
Ë
buÂ
->
buf„r
[0] =
beglöe


3601 && !
buÂ
->
√wlöe_™ch‹
)))

3603 i‡(
°¨ços
 > 0)

3606 
ønge
 = 1;

3609 #ifde‡
emacs


3612 i‡(
buÂ
->
u£d
 > 0 && (
ª_›code_t
ËbuÂ->
buf„r
[0] =
©_dŸ
 && 
ønge
 > 0)

3614 
ønge
 = 
PT
 - 
°¨ços
;

3615 i‡(
ønge
 <= 0)

3621 i‡(
Á°m≠
 && !
buÂ
->
Á°m≠_accuøã
)

3622 i‡(
	`ª_compûe_Á°m≠
 (
buÂ
) == -2)

3632 i‡(
Á°m≠
 && 
°¨ços
 < 
tŸÆ_size
 && !
buÂ
->
ˇn_be_nuŒ
)

3634 i‡(
ønge
 > 0)

3636 c⁄° *
d
;

3637 
lim
 = 0;

3638 
ú™ge
 = 
ønge
;

3640 i‡(
°¨ços
 < 
size1
 && sèπpo†+ 
ønge
 >= size1)

3641 
lim
 = 
ønge
 - (
size1
 - 
°¨ços
);

3643 
d
 = (
°¨ços
 >
size1
 ? 
°rög2
 - size1 : 
°rög1
) + startpos;

3647 i‡(
å™¶©e
)

3648 
ønge
 > 
lim


3649 && !
Á°m≠
[()

3650 
å™¶©e
[(Ë*
d
++]])

3651 
ønge
--;

3653 
ønge
 > 
lim
 && !
Á°m≠
[(Ë*
d
++])

3654 
ønge
--;

3656 
°¨ços
 +
ú™ge
 - 
ønge
;

3660 
c
 = (
size1
 =0 || 
°¨ços
 >= size1

3661 ? 
°rög2
[
°¨ços
 - 
size1
]

3662 : 
°rög1
[
°¨ços
]);

3664 i‡(!
Á°m≠
[(Ë
	`TRANSLATE
 (
c
)])

3665 
adv™˚
;

3670 i‡(
ønge
 >0 && 
°¨ços
 =
tŸÆ_size
 && 
Á°m≠


3671 && !
buÂ
->
ˇn_be_nuŒ
)

3674 
vÆ
 = 
	`ª_m©ch_2_öã∫Æ
 (
buÂ
, 
°rög1
, 
size1
, 
°rög2
, 
size2
,

3675 
°¨ços
, 
ªgs
, 
°›
);

3676 #i‚de‡
REGEX_MALLOC


3677 #ifde‡
C_ALLOCA


3678 
	`Æloˇ
 (0);

3682 i‡(
vÆ
 >= 0)

3683  
°¨ços
;

3685 i‡(
vÆ
 == -2)

3688 
adv™˚
:

3689 i‡(!
ønge
)

3691 i‡(
ønge
 > 0)

3693 
ønge
--;

3694 
°¨ços
++;

3698 
ønge
++;

3699 
°¨ços
--;

3703 
	}
}

3704 #ifde‡
_LIBC


3705 
	$wók_Æüs
 (
__ª_£¨ch_2
, 
ª_£¨ch_2
)

3710 
	#POINTER_TO_OFFSET
(
±r
) \

3711 (
	`FIRST_STRING_P
 (
±r
) \

3712 ? ((
ªgoff_t
Ë((
±r
Ë- 
°rög1
)) \

3713 : ((
ªgoff_t
Ë((
±r
Ë- 
°rög2
 + 
size1
)))

	)

3717 
	#MATCHING_IN_FIRST_STRING
 (
díd
 =
íd_m©ch_1
)

	)

3721 
	#PREFETCH
() \

3722 
d
 =
díd
) \

3725 i‡(
díd
 =
íd_m©ch_2
) \

3726 
Áû
; \

3728 
d
 = 
°rög2
; \

3729 
díd
 = 
íd_m©ch_2
; \

3730 
	}

	)
}

3735 
	#AT_STRINGS_BEG
(
d
Ë((dË=(
size1
 ? 
°rög1
 : 
°rög2
Ë|| !
size2
)

	)

3736 
	#AT_STRINGS_END
(
d
Ë((dË=
íd2
)

	)

3743 
	#WORDCHAR_P
(
d
) \

3744 (
	`SYNTAX
 ((
d
Ë=
íd1
 ? *
°rög2
 \

3745 : (
d
Ë=
°rög2
 - 1 ? *(
íd1
 - 1) : *(d)) \

3746 =
Sw‹d
)

	)

3752 
	#AT_WORD_BOUNDARY
(
d
) \

3753 (
	`AT_STRINGS_BEG
 (
d
Ë|| 
	`AT_STRINGS_END
 (d) \

3754 || 
	`WORDCHAR_P
 (
d
 - 1Ë!WORDCHAR_P (d))

	)

3758 #ifde‡
MATCH_MAY_ALLOCATE


3759 
	#FREE_VAR
(
v¨
Ëi‡(v¨Ë
	`REGEX_FREE
 (v¨); v¨ = 
NULL


	)

3760 
	#FREE_VARIABLES
() \

3762 
	`REGEX_FREE_STACK
 (
Áû_°ack
.
°ack
); \

3763 
	`FREE_VAR
 (
ªg°¨t
); \

3764 
	`FREE_VAR
 (
ªgíd
); \

3765 
	`FREE_VAR
 (
ﬁd_ªg°¨t
); \

3766 
	`FREE_VAR
 (
ﬁd_ªgíd
); \

3767 
	`FREE_VAR
 (
be°_ªg°¨t
); \

3768 
	`FREE_VAR
 (
be°_ªgíd
); \

3769 
	`FREE_VAR
 (
ªg_öfo
); \

3770 
	`FREE_VAR
 (
ªg_dummy
); \

3771 
	`FREE_VAR
 (
ªg_öfo_dummy
); \

3772 } 0)

	)

3774 
	#FREE_VARIABLES
(Ë(()0Ë

	)

3784 
	#NO_HIGHEST_ACTIVE_REG
 (1 << 
BYTEWIDTH
)

	)

3785 
	#NO_LOWEST_ACTIVE_REG
 (
NO_HIGHEST_ACTIVE_REG
 + 1)

	)

3789 #i‚de‡
emacs


3793 
	$ª_m©ch
 (
buÂ
, 
°rög
, 
size
, 
pos
, 
ªgs
)

3794 
ª_∑âîn_buf„r
 *
buÂ
;

3795 c⁄° *
°rög
;

3796 
size
, 
pos
;

3797 
ª_ªgi°îs
 *
ªgs
;

3799 
ªsu…
 = 
	`ª_m©ch_2_öã∫Æ
 (
buÂ
, 
NULL
, 0, 
°rög
, 
size
,

3800 
pos
, 
ªgs
, 
size
);

3801 #i‚de‡
REGEX_MALLOC


3802 #ifde‡
C_ALLOCA


3803 
	`Æloˇ
 (0);

3806  
ªsu…
;

3807 
	}
}

3808 #ifde‡
_LIBC


3809 
	$wók_Æüs
 (
__ª_m©ch
, 
ª_m©ch
)

3813 
boﬁón
 
group_m©ch_nuŒ_°rög_p
 
	`_RE_ARGS
 ((**
p
,

3814 *
íd
,

3815 
ªgi°î_öfo_ty≥
 *
ªg_öfo
));

3816 
boﬁón
 
Æt_m©ch_nuŒ_°rög_p
 
	`_RE_ARGS
 ((*
p
,

3817 *
íd
,

3818 
ªgi°î_öfo_ty≥
 *
ªg_öfo
));

3819 
boﬁón
 
comm⁄_›_m©ch_nuŒ_°rög_p
 
	`_RE_ARGS
 ((**
p
,

3820 *
íd
,

3821 
ªgi°î_öfo_ty≥
 *
ªg_öfo
));

3822 
bcmp_å™¶©e
 
	`_RE_ARGS
 ((c⁄° *
s1
, c⁄° *
s2
,

3823 
Àn
, *
å™¶©e
));

3839 
	$ª_m©ch_2
 (
buÂ
, 
°rög1
, 
size1
, 
°rög2
, 
size2
, 
pos
, 
ªgs
, 
°›
)

3840 
ª_∑âîn_buf„r
 *
buÂ
;

3841 c⁄° *
°rög1
, *
°rög2
;

3842 
size1
, 
size2
;

3843 
pos
;

3844 
ª_ªgi°îs
 *
ªgs
;

3845 
°›
;

3847 
ªsu…
 = 
	`ª_m©ch_2_öã∫Æ
 (
buÂ
, 
°rög1
, 
size1
, 
°rög2
, 
size2
,

3848 
pos
, 
ªgs
, 
°›
);

3849 #i‚de‡
REGEX_MALLOC


3850 #ifde‡
C_ALLOCA


3851 
	`Æloˇ
 (0);

3854  
ªsu…
;

3855 
	}
}

3856 #ifde‡
_LIBC


3857 
	$wók_Æüs
 (
__ª_m©ch_2
, 
ª_m©ch_2
)

3863 
	$ª_m©ch_2_öã∫Æ
 (
buÂ
, 
°rög1
, 
size1
, 
°rög2
, 
size2
, 
pos
, 
ªgs
, 
°›
)

3864 
ª_∑âîn_buf„r
 *
buÂ
;

3865 c⁄° *
°rög1
, *
°rög2
;

3866 
size1
, 
size2
;

3867 
pos
;

3868 
ª_ªgi°îs
 *
ªgs
;

3869 
°›
;

3872 
m˙t
;

3873 *
p1
;

3876 c⁄° *
íd1
, *
íd2
;

3880 c⁄° *
íd_m©ch_1
, *
íd_m©ch_2
;

3883 c⁄° *
d
, *
díd
;

3886 *
p
 = 
buÂ
->
buf„r
;

3887 *
≥nd
 = 
p
 + 
buÂ
->
u£d
;

3891 *
ju°_∑°_°¨t_mem
 = 0;

3894 
RE_TRANSLATE_TYPE
 
å™¶©e
 = 
buÂ
->translate;

3905 #ifde‡
MATCH_MAY_ALLOCATE


3906 
Áû_°ack_ty≥
 
Áû_°ack
;

3908 #ifde‡
DEBUG


3909 
Áûuª_id
;

3910 
nÁûuª_poöts_pushed
 = 0, 
nÁûuª_poöts_p›≥d
 = 0;

3913 #ifde‡
REL_ALLOC


3916 
Áû_°ack_ñt_t
 *
Áûuª_°ack_±r
;

3922 
size_t
 
num_ªgs
 = 
buÂ
->
ª_nsub
 + 1;

3925 
a˘ive_ªg_t
 
lowe°_a˘ive_ªg
 = 
NO_LOWEST_ACTIVE_REG
;

3926 
a˘ive_ªg_t
 
highe°_a˘ive_ªg
 = 
NO_HIGHEST_ACTIVE_REG
;

3935 #ifde‡
MATCH_MAY_ALLOCATE


3936 c⁄° **
ªg°¨t
, **
ªgíd
;

3944 #ifde‡
MATCH_MAY_ALLOCATE


3945 c⁄° **
ﬁd_ªg°¨t
, **
ﬁd_ªgíd
;

3954 #ifde‡
MATCH_MAY_ALLOCATE


3955 
ªgi°î_öfo_ty≥
 *
ªg_öfo
;

3962 
be°_ªgs_£t
 = 
Ál£
;

3963 #ifde‡
MATCH_MAY_ALLOCATE


3964 c⁄° **
be°_ªg°¨t
, **
be°_ªgíd
;

3975 c⁄° *
m©ch_íd
 = 
NULL
;

3978 
£t_ªgs_m©ched_d⁄e
 = 0;

3981 #ifde‡
MATCH_MAY_ALLOCATE


3982 c⁄° **
ªg_dummy
;

3983 
ªgi°î_öfo_ty≥
 *
ªg_öfo_dummy
;

3986 #ifde‡
DEBUG


3988 
num_ªgs_pushed
 = 0;

3991 
	`DEBUG_PRINT1
 ("\n\nEnteringÑe_match_2.\n");

3993 
	`INIT_FAIL_STACK
 ();

3995 #ifde‡
MATCH_MAY_ALLOCATE


4001 i‡(
buÂ
->
ª_nsub
)

4003 
ªg°¨t
 = 
	`REGEX_TALLOC
 (
num_ªgs
, const *);

4004 
ªgíd
 = 
	`REGEX_TALLOC
 (
num_ªgs
, const *);

4005 
ﬁd_ªg°¨t
 = 
	`REGEX_TALLOC
 (
num_ªgs
, const *);

4006 
ﬁd_ªgíd
 = 
	`REGEX_TALLOC
 (
num_ªgs
, const *);

4007 
be°_ªg°¨t
 = 
	`REGEX_TALLOC
 (
num_ªgs
, const *);

4008 
be°_ªgíd
 = 
	`REGEX_TALLOC
 (
num_ªgs
, const *);

4009 
ªg_öfo
 = 
	`REGEX_TALLOC
 (
num_ªgs
, 
ªgi°î_öfo_ty≥
);

4010 
ªg_dummy
 = 
	`REGEX_TALLOC
 (
num_ªgs
, const *);

4011 
ªg_öfo_dummy
 = 
	`REGEX_TALLOC
 (
num_ªgs
, 
ªgi°î_öfo_ty≥
);

4013 i‡(!(
ªg°¨t
 && 
ªgíd
 && 
ﬁd_ªg°¨t
 && 
ﬁd_ªgíd
 && 
ªg_öfo


4014 && 
be°_ªg°¨t
 && 
be°_ªgíd
 && 
ªg_dummy
 && 
ªg_öfo_dummy
))

4016 
	`FREE_VARIABLES
 ();

4024 
ªg°¨t
 = 
ªgíd
 = 
ﬁd_ªg°¨t
 = 
ﬁd_ªgíd
 = 
be°_ªg°¨t


4025 
be°_ªgíd
 = 
ªg_dummy
 = 
NULL
;

4026 
ªg_öfo
 = 
ªg_öfo_dummy
 = (
ªgi°î_öfo_ty≥
 *Ë
NULL
;

4031 i‡(
pos
 < 0 ||Öo†> 
size1
 + 
size2
)

4033 
	`FREE_VARIABLES
 ();

4040 
m˙t
 = 1; (Ëm˙à< 
num_ªgs
; mcnt++)

4042 
ªg°¨t
[
m˙t
] = 
ªgíd
[mcnt]

4043 
ﬁd_ªg°¨t
[
m˙t
] = 
ﬁd_ªgíd
[m˙t] = 
REG_UNSET_VALUE
;

4045 
	`REG_MATCH_NULL_STRING_P
 (
ªg_öfo
[
m˙t
]Ë
MATCH_NULL_UNSET_VALUE
;

4046 
	`IS_ACTIVE
 (
ªg_öfo
[
m˙t
]) = 0;

4047 
	`MATCHED_SOMETHING
 (
ªg_öfo
[
m˙t
]) = 0;

4048 
	`EVER_MATCHED_SOMETHING
 (
ªg_öfo
[
m˙t
]) = 0;

4053 i‡(
size2
 =0 && 
°rög1
 !
NULL
)

4055 
°rög2
 = 
°rög1
;

4056 
size2
 = 
size1
;

4057 
°rög1
 = 0;

4058 
size1
 = 0;

4060 
íd1
 = 
°rög1
 + 
size1
;

4061 
íd2
 = 
°rög2
 + 
size2
;

4064 i‡(
°›
 <
size1
)

4066 
íd_m©ch_1
 = 
°rög1
 + 
°›
;

4067 
íd_m©ch_2
 = 
°rög2
;

4071 
íd_m©ch_1
 = 
íd1
;

4072 
íd_m©ch_2
 = 
°rög2
 + 
°›
 - 
size1
;

4081 i‡(
size1
 > 0 && 
pos
 <= size1)

4083 
d
 = 
°rög1
 + 
pos
;

4084 
díd
 = 
íd_m©ch_1
;

4088 
d
 = 
°rög2
 + 
pos
 - 
size1
;

4089 
díd
 = 
íd_m©ch_2
;

4092 
	`DEBUG_PRINT1
 ("The compiledÖattern is:\n");

4093 
	`DEBUG_PRINT_COMPILED_PATTERN
 (
buÂ
, 
p
, 
≥nd
);

4094 
	`DEBUG_PRINT1
 ("The stringÅo match is: `");

4095 
	`DEBUG_PRINT_DOUBLE_STRING
 (
d
, 
°rög1
, 
size1
, 
°rög2
, 
size2
);

4096 
	`DEBUG_PRINT1
 ("'\n");

4103 #ifde‡
_LIBC


4104 
	`DEBUG_PRINT2
 ("\n%p: ", 
p
);

4106 
	`DEBUG_PRINT2
 ("\n0x%x: ", 
p
);

4109 i‡(
p
 =
≥nd
)

4111 
	`DEBUG_PRINT1
 ("end ofÖattern ... ");

4115 i‡(
d
 !
íd_m©ch_2
)

4119 
boﬁón
 
ßme_°r_p
 = (
	`FIRST_STRING_P
 (
m©ch_íd
)

4120 =
MATCHING_IN_FIRST_STRING
);

4122 
boﬁón
 
be°_m©ch_p
;

4126 i‡(
ßme_°r_p
)

4127 
be°_m©ch_p
 = 
d
 > 
m©ch_íd
;

4129 
be°_m©ch_p
 = !
MATCHING_IN_FIRST_STRING
;

4131 
	`DEBUG_PRINT1
 ("backtracking.\n");

4133 i‡(!
	`FAIL_STACK_EMPTY
 ())

4137 i‡(!
be°_ªgs_£t
 || 
be°_m©ch_p
)

4139 
be°_ªgs_£t
 = 
åue
;

4140 
m©ch_íd
 = 
d
;

4142 
	`DEBUG_PRINT1
 ("\nSAVING matchás best so far.\n");

4144 
m˙t
 = 1; (Ëm˙à< 
num_ªgs
; mcnt++)

4146 
be°_ªg°¨t
[
m˙t
] = 
ªg°¨t
[mcnt];

4147 
be°_ªgíd
[
m˙t
] = 
ªgíd
[mcnt];

4150 
Áû
;

4156 i‡(
be°_ªgs_£t
 && !
be°_m©ch_p
)

4158 
ª°‹e_be°_ªgs
:

4164 
	`DEBUG_PRINT1
 ("Restoring bestÑegisters.\n");

4166 
d
 = 
m©ch_íd
;

4167 
díd
 = ((
d
 >
°rög1
 && d <
íd1
)

4168 ? 
íd_m©ch_1
 : 
íd_m©ch_2
);

4170 
m˙t
 = 1; (Ëm˙à< 
num_ªgs
; mcnt++)

4172 
ªg°¨t
[
m˙t
] = 
be°_ªg°¨t
[mcnt];

4173 
ªgíd
[
m˙t
] = 
be°_ªgíd
[mcnt];

4178 
suc˚ed_œbñ
:

4179 
	`DEBUG_PRINT1
 ("Accepting match.\n");

4182 i‡(
ªgs
 && !
buÂ
->
no_sub
)

4185 i‡(
buÂ
->
ªgs_Æloˇãd
 =
REGS_UNALLOCATED
)

4189 
ªgs
->
num_ªgs
 = 
	`MAX
 (
RE_NREGS
,Çum_regs + 1);

4190 
ªgs
->
°¨t
 = 
	`TALLOC
 (ªgs->
num_ªgs
, 
ªgoff_t
);

4191 
ªgs
->
íd
 = 
	`TALLOC
 (ªgs->
num_ªgs
, 
ªgoff_t
);

4192 i‡(
ªgs
->
°¨t
 =
NULL
 ||Ñegs->
íd
 == NULL)

4194 
	`FREE_VARIABLES
 ();

4197 
buÂ
->
ªgs_Æloˇãd
 = 
REGS_REALLOCATE
;

4199 i‡(
buÂ
->
ªgs_Æloˇãd
 =
REGS_REALLOCATE
)

4203 i‡(
ªgs
->
num_ªgs
 <Çum_regs + 1)

4205 
ªgs
->
num_ªgs
 =Çum_regs + 1;

4206 
	`RETALLOC
 (
ªgs
->
°¨t
,Ñegs->
num_ªgs
, 
ªgoff_t
);

4207 
	`RETALLOC
 (
ªgs
->
íd
,Ñegs->
num_ªgs
, 
ªgoff_t
);

4208 i‡(
ªgs
->
°¨t
 =
NULL
 ||Ñegs->
íd
 == NULL)

4210 
	`FREE_VARIABLES
 ();

4219 
	`as£π
 (
buÂ
->
ªgs_Æloˇãd
 =
REGS_FIXED
);

4225 i‡(
ªgs
->
num_ªgs
 > 0)

4227 
ªgs
->
°¨t
[0] = 
pos
;

4228 
ªgs
->
íd
[0] = (
MATCHING_IN_FIRST_STRING


4229 ? ((
ªgoff_t
Ë(
d
 - 
°rög1
))

4230 : ((
ªgoff_t
Ë(
d
 - 
°rög2
 + 
size1
)));

4235 
m˙t
 = 1; (Ëm˙à< 
	`MIN
 (
num_ªgs
, 
ªgs
->num_regs);

4236 
m˙t
++)

4238 i‡(
	`REG_UNSET
 (
ªg°¨t
[
m˙t
]Ë|| REG_UNSET (
ªgíd
[mcnt]))

4239 
ªgs
->
°¨t
[
m˙t
] =Ñegs->
íd
[mcnt] = -1;

4242 
ªgs
->
°¨t
[
m˙t
]

4243 (
ªgoff_t
Ë
	`POINTER_TO_OFFSET
 (
ªg°¨t
[
m˙t
]);

4244 
ªgs
->
íd
[
m˙t
]

4245 (
ªgoff_t
Ë
	`POINTER_TO_OFFSET
 (
ªgíd
[
m˙t
]);

4254 
m˙t
 = 
num_ªgs
; (Ëm˙à< 
ªgs
->num_regs; mcnt++)

4255 
ªgs
->
°¨t
[
m˙t
] =Ñegs->
íd
[mcnt] = -1;

4258 
	`DEBUG_PRINT4
 ("%u failureÖointsÖushed, %uÖopped (%uÑemain).\n",

4259 
nÁûuª_poöts_pushed
, 
nÁûuª_poöts_p›≥d
,

4260 
nÁûuª_poöts_pushed
 - 
nÁûuª_poöts_p›≥d
);

4261 
	`DEBUG_PRINT2
 ("%uÑegi°î†pushed.\n", 
num_ªgs_pushed
);

4263 
m˙t
 = 
d
 - 
pos
 - (
MATCHING_IN_FIRST_STRING


4264 ? 
°rög1


4265 : 
°rög2
 - 
size1
);

4267 
	`DEBUG_PRINT2
 ("Rëu∫ög %d fromÑe_m©ch_2.\n", 
m˙t
);

4269 
	`FREE_VARIABLES
 ();

4270  
m˙t
;

4274 
	`SWITCH_ENUM_CAST
 ((
ª_›code_t
Ë*
p
++))

4278 
no_›
:

4279 
	`DEBUG_PRINT1
 ("EXECUTINGÇo_op.\n");

4282 
suc˚ed
:

4283 
	`DEBUG_PRINT1
 ("EXECUTING succeed.\n");

4284 
suc˚ed_œbñ
;

4289 
exa˘n
:

4290 
m˙t
 = *
p
++;

4291 
	`DEBUG_PRINT2
 ("EXECUTINGÉxa˘¿%d.\n", 
m˙t
);

4295 i‡(
å™¶©e
)

4299 
	`PREFETCH
 ();

4300 i‡((Ë
å™¶©e
[(Ë*
d
++]

4301 !(Ë*
p
++)

4302 
Áû
;

4304 --
m˙t
);

4310 
	`PREFETCH
 ();

4311 i‡(*
d
++ !(Ë*
p
++Ë
Áû
;

4313 --
m˙t
);

4315 
	`SET_REGS_MATCHED
 ();

4320 
™ych¨
:

4321 
	`DEBUG_PRINT1
 ("EXECUTINGánychar.\n");

4323 
	`PREFETCH
 ();

4325 i‡((!(
buÂ
->
sy¡ax
 & 
RE_DOT_NEWLINE
Ë&& 
	`TRANSLATE
 (*
d
) == '\n')

4326 || (
buÂ
->
sy¡ax
 & 
RE_DOT_NOT_NULL
 && 
	`TRANSLATE
 (*
d
) == '\000'))

4327 
Áû
;

4329 
	`SET_REGS_MATCHED
 ();

4330 
	`DEBUG_PRINT2
 (" M©ched `%d'.\n", *
d
);

4331 
d
++;

4335 
ch¨£t
:

4336 
ch¨£t_nŸ
:

4338 
c
;

4339 
boﬁón
 
nŸ
 = (
ª_›code_t
Ë*(
p
 - 1Ë=
ch¨£t_nŸ
;

4341 
	`DEBUG_PRINT2
 ("EXECUTING ch¨£t%s.\n", 
nŸ
 ? "_not" : "");

4343 
	`PREFETCH
 ();

4344 
c
 = 
	`TRANSLATE
 (*
d
);

4348 i‡(
c
 < (Ë(*
p
 * 
BYTEWIDTH
)

4349 && 
p
[1 + 
c
 / 
BYTEWIDTH
] & (1 << (c % BYTEWIDTH)))

4350 
nŸ
 = !not;

4352 
p
 += 1 + *p;

4354 i‡(!
nŸ
Ë
Áû
;

4356 
	`SET_REGS_MATCHED
 ();

4357 
d
++;

4367 
°¨t_mem‹y
:

4368 
	`DEBUG_PRINT3
 ("EXECUTING sèπ_mem‹y %d (%d):\n", *
p
,Ö[1]);

4371 
p1
 = 
p
;

4373 i‡(
	`REG_MATCH_NULL_STRING_P
 (
ªg_öfo
[*
p
]Ë=
MATCH_NULL_UNSET_VALUE
)

4374 
	`REG_MATCH_NULL_STRING_P
 (
ªg_öfo
[*
p
])

4375 
	`group_m©ch_nuŒ_°rög_p
 (&
p1
, 
≥nd
, 
ªg_öfo
);

4382 
ﬁd_ªg°¨t
[*
p
] = 
	`REG_MATCH_NULL_STRING_P
 (
ªg_öfo
[*p])

4383 ? 
	`REG_UNSET
 (
ªg°¨t
[*
p
]Ë? 
d
 :Ñegstart[*p]

4384 : 
ªg°¨t
[*
p
];

4385 
	`DEBUG_PRINT2
 (" old_regstart: %d\n",

4386 
	`POINTER_TO_OFFSET
 (
ﬁd_ªg°¨t
[*
p
]));

4388 
ªg°¨t
[*
p
] = 
d
;

4389 
	`DEBUG_PRINT2
 ("Ñeg°¨t: %d\n", 
	`POINTER_TO_OFFSET
 (
ªg°¨t
[*
p
]));

4391 
	`IS_ACTIVE
 (
ªg_öfo
[*
p
]) = 1;

4392 
	`MATCHED_SOMETHING
 (
ªg_öfo
[*
p
]) = 0;

4395 
£t_ªgs_m©ched_d⁄e
 = 0;

4398 
highe°_a˘ive_ªg
 = *
p
;

4402 i‡(
lowe°_a˘ive_ªg
 =
NO_LOWEST_ACTIVE_REG
)

4403 
lowe°_a˘ive_ªg
 = *
p
;

4406 
p
 += 2;

4407 
ju°_∑°_°¨t_mem
 = 
p
;

4415 
°›_mem‹y
:

4416 
	`DEBUG_PRINT3
 ("EXECUTING st›_mem‹y %d (%d):\n", *
p
,Ö[1]);

4423 
ﬁd_ªgíd
[*
p
] = 
	`REG_MATCH_NULL_STRING_P
 (
ªg_öfo
[*p])

4424 ? 
	`REG_UNSET
 (
ªgíd
[*
p
]Ë? 
d
 :Ñegend[*p]

4425 : 
ªgíd
[*
p
];

4426 
	`DEBUG_PRINT2
 (" old_regend: %d\n",

4427 
	`POINTER_TO_OFFSET
 (
ﬁd_ªgíd
[*
p
]));

4429 
ªgíd
[*
p
] = 
d
;

4430 
	`DEBUG_PRINT2
 ("Ñegíd: %d\n", 
	`POINTER_TO_OFFSET
 (
ªgíd
[*
p
]));

4433 
	`IS_ACTIVE
 (
ªg_öfo
[*
p
]) = 0;

4436 
£t_ªgs_m©ched_d⁄e
 = 0;

4440 i‡(
lowe°_a˘ive_ªg
 =
highe°_a˘ive_ªg
)

4442 
lowe°_a˘ive_ªg
 = 
NO_LOWEST_ACTIVE_REG
;

4443 
highe°_a˘ive_ªg
 = 
NO_HIGHEST_ACTIVE_REG
;

4450 
r
 = *
p
 - 1;

4451 
r
 > 0 && !
	`IS_ACTIVE
 (
ªg_öfo
[r]))

4452 
r
--;

4461 i‡(
r
 == 0)

4463 
lowe°_a˘ive_ªg
 = 
NO_LOWEST_ACTIVE_REG
;

4464 
highe°_a˘ive_ªg
 = 
NO_HIGHEST_ACTIVE_REG
;

4467 
highe°_a˘ive_ªg
 = 
r
;

4475 i‡((!
	`MATCHED_SOMETHING
 (
ªg_öfo
[*
p
])

4476 || 
ju°_∑°_°¨t_mem
 =
p
 - 1)

4477 && (
p
 + 2Ë< 
≥nd
)

4479 
boﬁón
 
is_a_jump_n
 = 
Ál£
;

4481 
p1
 = 
p
 + 2;

4482 
m˙t
 = 0;

4483 (
ª_›code_t
Ë*
p1
++)

4485 
jump_n
:

4486 
is_a_jump_n
 = 
åue
;

4487 
p›_Áûuª_jump
:

4488 
maybe_p›_jump
:

4489 
jump
:

4490 
dummy_Áûuª_jump
:

4491 
	`EXTRACT_NUMBER_AND_INCR
 (
m˙t
, 
p1
);

4492 i‡(
is_a_jump_n
)

4493 
p1
 += 2;

4499 
p1
 +
m˙t
;

4506 i‡(
m˙t
 < 0 && (
ª_›code_t
Ë*
p1
 =
⁄_Áûuª_jump


4507 && (
ª_›code_t
Ë
p1
[3] =
°¨t_mem‹y
 &&Ö1[4] =*
p
)

4519 i‡(
	`EVER_MATCHED_SOMETHING
 (
ªg_öfo
[*
p
]))

4521 
r
;

4523 
	`EVER_MATCHED_SOMETHING
 (
ªg_öfo
[*
p
]) = 0;

4526 
r
 = *
p
;Ñ < () *p + () *(p + 1);

4527 
r
++)

4529 
ªg°¨t
[
r
] = 
ﬁd_ªg°¨t
[r];

4532 i‡(
ﬁd_ªgíd
[
r
] >
ªg°¨t
[r])

4533 
ªgíd
[
r
] = 
ﬁd_ªgíd
[r];

4536 
p1
++;

4537 
	`EXTRACT_NUMBER_AND_INCR
 (
m˙t
, 
p1
);

4538 
	`PUSH_FAILURE_POINT
 (
p1
 + 
m˙t
, 
d
, -2);

4540 
Áû
;

4545 
p
 += 2;

4551 
du∂iˇã
:

4553 c⁄° *
d2
, *
díd2
;

4554 
ªgno
 = *
p
++;

4555 
	`DEBUG_PRINT2
 ("EXECUTING du∂iˇã %d.\n", 
ªgno
);

4558 i‡(
	`REG_UNSET
 (
ªg°¨t
[
ªgno
]Ë|| REG_UNSET (
ªgíd
[regno]))

4559 
Áû
;

4562 
d2
 = 
ªg°¨t
[
ªgno
];

4569 
díd2
 = ((
	`FIRST_STRING_P
 (
ªg°¨t
[
ªgno
])

4570 =
	`FIRST_STRING_P
 (
ªgíd
[
ªgno
]))

4571 ? 
ªgíd
[
ªgno
] : 
íd_m©ch_1
);

4576 
d2
 =
díd2
)

4578 i‡(
díd2
 =
íd_m©ch_2
) ;

4579 i‡(
díd2
 =
ªgíd
[
ªgno
]) ;

4582 
d2
 = 
°rög2
;

4583 
díd2
 = 
ªgíd
[
ªgno
];

4586 i‡(
d2
 =
díd2
) ;

4589 
	`PREFETCH
 ();

4592 
m˙t
 = 
díd
 - 
d
;

4596 i‡(
m˙t
 > 
díd2
 - 
d2
)

4597 
m˙t
 = 
díd2
 - 
d2
;

4601 i‡(
å™¶©e


4602 ? 
	`bcmp_å™¶©e
 (
d
, 
d2
, 
m˙t
, 
å™¶©e
)

4603 : 
	`memcmp
 (
d
, 
d2
, 
m˙t
))

4604 
Áû
;

4605 
d
 +
m˙t
, 
d2
 += mcnt;

4608 
	`SET_REGS_MATCHED
 ();

4617 
beglöe
:

4618 
	`DEBUG_PRINT1
 ("EXECUTING begline.\n");

4620 i‡(
	`AT_STRINGS_BEG
 (
d
))

4622 i‡(!
buÂ
->
nŸ_bﬁ
) ;

4624 i‡(
d
[-1] ='\n' && 
buÂ
->
√wlöe_™ch‹
)

4629 
Áû
;

4633 
ídlöe
:

4634 
	`DEBUG_PRINT1
 ("EXECUTINGÉndline.\n");

4636 i‡(
	`AT_STRINGS_END
 (
d
))

4638 i‡(!
buÂ
->
nŸ_eﬁ
) ;

4642 i‡((
d
 =
íd1
 ? *
°rög2
 : *d) == '\n'

4643 && 
buÂ
->
√wlöe_™ch‹
)

4647 
Áû
;

4651 
begbuf
:

4652 
	`DEBUG_PRINT1
 ("EXECUTING begbuf.\n");

4653 i‡(
	`AT_STRINGS_BEG
 (
d
))

4655 
Áû
;

4659 
ídbuf
:

4660 
	`DEBUG_PRINT1
 ("EXECUTINGÉndbuf.\n");

4661 i‡(
	`AT_STRINGS_END
 (
d
))

4663 
Áû
;

4682 
⁄_Áûuª_kìp_°rög_jump
:

4683 
	`DEBUG_PRINT1
 ("EXECUTING on_failure_keep_string_jump");

4685 
	`EXTRACT_NUMBER_AND_INCR
 (
m˙t
, 
p
);

4686 #ifde‡
_LIBC


4687 
	`DEBUG_PRINT3
 (" %d (tÿ%p):\n", 
m˙t
, 
p
 + mcnt);

4689 
	`DEBUG_PRINT3
 (" %d (tÿ0x%x):\n", 
m˙t
, 
p
 + mcnt);

4692 
	`PUSH_FAILURE_POINT
 (
p
 + 
m˙t
, 
NULL
, -2);

4708 
⁄_Áûuª_jump
:

4709 
⁄_Áûuª
:

4710 
	`DEBUG_PRINT1
 ("EXECUTING on_failure_jump");

4712 
	`EXTRACT_NUMBER_AND_INCR
 (
m˙t
, 
p
);

4713 #ifde‡
_LIBC


4714 
	`DEBUG_PRINT3
 (" %d (tÿ%p)", 
m˙t
, 
p
 + mcnt);

4716 
	`DEBUG_PRINT3
 (" %d (tÿ0x%x)", 
m˙t
, 
p
 + mcnt);

4728 
p1
 = 
p
;

4734 
p1
 < 
≥nd
 && (
ª_›code_t
Ë*p1 =
no_›
)

4735 
p1
++;

4737 i‡(
p1
 < 
≥nd
 && (
ª_›code_t
Ë*p1 =
°¨t_mem‹y
)

4743 
highe°_a˘ive_ªg
 = *(
p1
 + 1) + *(p1 + 2);

4744 i‡(
lowe°_a˘ive_ªg
 =
NO_LOWEST_ACTIVE_REG
)

4745 
lowe°_a˘ive_ªg
 = *(
p1
 + 1);

4748 
	`DEBUG_PRINT1
 (":\n");

4749 
	`PUSH_FAILURE_POINT
 (
p
 + 
m˙t
, 
d
, -2);

4755 
maybe_p›_jump
:

4756 
	`EXTRACT_NUMBER_AND_INCR
 (
m˙t
, 
p
);

4757 
	`DEBUG_PRINT2
 ("EXECUTING maybe_p›_jum∞%d.\n", 
m˙t
);

4759 *
p2
 = 
p
;

4780 i‡(
p2
 + 2 < 
≥nd


4781 && ((
ª_›code_t
Ë*
p2
 =
°›_mem‹y


4782 || (
ª_›code_t
Ë*
p2
 =
°¨t_mem‹y
))

4783 
p2
 += 3;

4784 i‡(
p2
 + 6 < 
≥nd


4785 && (
ª_›code_t
Ë*
p2
 =
dummy_Áûuª_jump
)

4786 
p2
 += 6;

4791 
p1
 = 
p
 + 
m˙t
;

4797 i‡(
p2
 =
≥nd
)

4802 
p
[-3] = (Ë
p›_Áûuª_jump
;

4803 
DEBUG_PRINT1


4807 i‡((
ª_›code_t
Ë*
p2
 =
exa˘n


4808 || (
buÂ
->
√wlöe_™ch‹
 && (
ª_›code_t
Ë*
p2
 =
ídlöe
))

4810 
c


4811 *
p2
 =(Ë
ídlöe
 ? '\n' :Ö2[2];

4813 i‡((
ª_›code_t
Ë
p1
[3] =
exa˘n
 &&Ö1[5] !
c
)

4815 
p
[-3] = (Ë
p›_Áûuª_jump
;

4816 
	`DEBUG_PRINT3
 (" %c != %c =>Öop_failure_jump.\n",

4817 
c
, 
p1
[5]);

4820 i‡((
ª_›code_t
Ë
p1
[3] =
ch¨£t


4821 || (
ª_›code_t
Ë
p1
[3] =
ch¨£t_nŸ
)

4823 
nŸ
 = (
ª_›code_t
Ë
p1
[3] =
ch¨£t_nŸ
;

4825 i‡(
c
 < (Ë(
p1
[4] * 
BYTEWIDTH
)

4826 && 
p1
[5 + 
c
 / 
BYTEWIDTH
] & (1 << (c % BYTEWIDTH)))

4827 
nŸ
 = !not;

4831 i‡(!
nŸ
)

4833 
p
[-3] = (Ë
p›_Áûuª_jump
;

4834 
	`DEBUG_PRINT1
 (" No match =>Öop_failure_jump.\n");

4838 i‡((
ª_›code_t
Ë*
p2
 =
ch¨£t
)

4840 #ifde‡
DEBUG


4841 
c


4842 *
p2
 =(Ë
ídlöe
 ? '\n' :Ö2[2];

4846 i‡((
ª_›code_t
Ë
p1
[3] =
exa˘n


4847 && ! ((Ë
p2
[1] * 
BYTEWIDTH
 > (Ë
p1
[5]

4848 && (
p2
[2 + 
p1
[5] / 
BYTEWIDTH
]

4849 & (1 << (
p1
[5] % 
BYTEWIDTH
)))))

4851 i‡((
ª_›code_t
Ë
p1
[3] =
exa˘n


4852 && ! ((Ë
p2
[1] * 
BYTEWIDTH
 > (Ë
p1
[4]

4853 && (
p2
[2 + 
p1
[4] / 
BYTEWIDTH
]

4854 & (1 << (
p1
[4] % 
BYTEWIDTH
)))))

4857 
p
[-3] = (Ë
p›_Áûuª_jump
;

4858 
	`DEBUG_PRINT3
 (" %c != %c =>Öop_failure_jump.\n",

4859 
c
, 
p1
[5]);

4862 i‡((
ª_›code_t
Ë
p1
[3] =
ch¨£t_nŸ
)

4864 
idx
;

4867 
idx
 = 0; idx < (Ë
p2
[1]; idx++)

4868 i‡(! (
p2
[2 + 
idx
] == 0

4869 || (
idx
 < (Ë
p1
[4]

4870 && ((
p2
[2 + 
idx
] & ~ 
p1
[5 + idx]) == 0))))

4873 i‡(
idx
 =
p2
[1])

4875 
p
[-3] = (Ë
p›_Áûuª_jump
;

4876 
	`DEBUG_PRINT1
 (" No match =>Öop_failure_jump.\n");

4879 i‡((
ª_›code_t
Ë
p1
[3] =
ch¨£t
)

4881 
idx
;

4884 
idx
 = 0;

4885 
idx
 < (Ë
p2
[1] && idx < (Ë
p1
[4];

4886 
idx
++)

4887 i‡((
p2
[2 + 
idx
] & 
p1
[5 + idx]) != 0)

4890 i‡(
idx
 =
p2
[1] || idx =
p1
[4])

4892 
p
[-3] = (Ë
p›_Áûuª_jump
;

4893 
	`DEBUG_PRINT1
 (" No match =>Öop_failure_jump.\n");

4898 
p
 -= 2;

4899 i‡((
ª_›code_t
Ë
p
[-1] !
p›_Áûuª_jump
)

4901 
p
[-1] = (Ë
jump
;

4902 
	`DEBUG_PRINT1
 (" Match => jump.\n");

4903 
unc⁄dôi⁄Æ_jump
;

4914 
p›_Áûuª_jump
:

4921 
a˘ive_ªg_t
 
dummy_low_ªg
, 
dummy_high_ªg
;

4922 *
pdummy
;

4923 c⁄° *
sdummy
;

4925 
	`DEBUG_PRINT1
 ("EXECUTINGÖop_failure_jump.\n");

4926 
	`POP_FAILURE_POINT
 (
sdummy
, 
pdummy
,

4927 
dummy_low_ªg
, 
dummy_high_ªg
,

4928 
ªg_dummy
,Ñeg_dummy, 
ªg_öfo_dummy
);

4932 
unc⁄dôi⁄Æ_jump
:

4933 #ifde‡
_LIBC


4934 
	`DEBUG_PRINT2
 ("\n%p: ", 
p
);

4936 
	`DEBUG_PRINT2
 ("\n0x%x: ", 
p
);

4941 
jump
:

4942 
	`EXTRACT_NUMBER_AND_INCR
 (
m˙t
, 
p
);

4943 
	`DEBUG_PRINT2
 ("EXECUTING jum∞%d ", 
m˙t
);

4944 
p
 +
m˙t
;

4945 #ifde‡
_LIBC


4946 
	`DEBUG_PRINT2
 ("—ÿ%p).\n", 
p
);

4948 
	`DEBUG_PRINT2
 ("—ÿ0x%x).\n", 
p
);

4955 
jump_∑°_Æt
:

4956 
	`DEBUG_PRINT1
 ("EXECUTING jump_past_alt.\n");

4957 
unc⁄dôi⁄Æ_jump
;

4965 
dummy_Áûuª_jump
:

4966 
	`DEBUG_PRINT1
 ("EXECUTING dummy_failure_jump.\n");

4969 
	`PUSH_FAILURE_POINT
 (
NULL
, NULL, -2);

4970 
unc⁄dôi⁄Æ_jump
;

4978 
push_dummy_Áûuª
:

4979 
	`DEBUG_PRINT1
 ("EXECUTINGÖush_dummy_failure.\n");

4982 
	`PUSH_FAILURE_POINT
 (
NULL
, NULL, -2);

4987 
suc˚ed_n
:

4988 
	`EXTRACT_NUMBER
 (
m˙t
, 
p
 + 2);

4989 
	`DEBUG_PRINT2
 ("EXECUTING suc˚ed_¿%d.\n", 
m˙t
);

4991 
	`as£π
 (
m˙t
 >= 0);

4993 i‡(
m˙t
 > 0)

4995 
m˙t
--;

4996 
p
 += 2;

4997 
	`STORE_NUMBER_AND_INCR
 (
p
, 
m˙t
);

4998 #ifde‡
_LIBC


4999 
	`DEBUG_PRINT3
 (" Sëtög %∞tÿ%d.\n", 
p
 - 2, 
m˙t
);

5001 
	`DEBUG_PRINT3
 (" Sëtög 0x%xÅÿ%d.\n", 
p
 - 2, 
m˙t
);

5004 i‡(
m˙t
 == 0)

5006 #ifde‡
_LIBC


5007 
	`DEBUG_PRINT2
 (" SëtögÅwÿbyã†‰om %∞tÿno_›.\n", 
p
+2);

5009 
	`DEBUG_PRINT2
 (" SëtögÅwÿbyã†‰om 0x%xÅÿno_›.\n", 
p
+2);

5011 
p
[2] = (Ë
no_›
;

5012 
p
[3] = (Ë
no_›
;

5013 
⁄_Áûuª
;

5017 
jump_n
:

5018 
	`EXTRACT_NUMBER
 (
m˙t
, 
p
 + 2);

5019 
	`DEBUG_PRINT2
 ("EXECUTING jump_¿%d.\n", 
m˙t
);

5022 i‡(
m˙t
)

5024 
m˙t
--;

5025 
	`STORE_NUMBER
 (
p
 + 2, 
m˙t
);

5026 #ifde‡
_LIBC


5027 
	`DEBUG_PRINT3
 (" Sëtög %∞tÿ%d.\n", 
p
 + 2, 
m˙t
);

5029 
	`DEBUG_PRINT3
 (" Sëtög 0x%xÅÿ%d.\n", 
p
 + 2, 
m˙t
);

5031 
unc⁄dôi⁄Æ_jump
;

5035 
p
 += 4;

5038 
£t_numbî_©
:

5040 
	`DEBUG_PRINT1
 ("EXECUTING set_number_at.\n");

5042 
	`EXTRACT_NUMBER_AND_INCR
 (
m˙t
, 
p
);

5043 
p1
 = 
p
 + 
m˙t
;

5044 
	`EXTRACT_NUMBER_AND_INCR
 (
m˙t
, 
p
);

5045 #ifde‡
_LIBC


5046 
	`DEBUG_PRINT3
 (" Sëtög %∞tÿ%d.\n", 
p1
, 
m˙t
);

5048 
	`DEBUG_PRINT3
 (" Sëtög 0x%xÅÿ%d.\n", 
p1
, 
m˙t
);

5050 
	`STORE_NUMBER
 (
p1
, 
m˙t
);

5060 
w‹dbound
:

5061 
	`DEBUG_PRINT1
 ("EXECUTING wordbound.\n");

5062 i‡(
	`AT_WORD_BOUNDARY
 (
d
))

5064 
Áû
;

5066 
nŸw‹dbound
:

5067 
	`DEBUG_PRINT1
 ("EXECUTINGÇotwordbound.\n");

5068 i‡(
	`AT_WORD_BOUNDARY
 (
d
))

5069 
Áû
;

5072 
w‹dbound
:

5074 
boﬁón
 
¥evch¨
, 
thisch¨
;

5076 
	`DEBUG_PRINT1
 ("EXECUTING wordbound.\n");

5077 i‡(
	`AT_STRINGS_BEG
 (
d
Ë|| 
	`AT_STRINGS_END
 (d))

5080 
¥evch¨
 = 
	`WORDCHAR_P
 (
d
 - 1);

5081 
thisch¨
 = 
	`WORDCHAR_P
 (
d
);

5082 i‡(
¥evch¨
 !
thisch¨
)

5084 
Áû
;

5087 
nŸw‹dbound
:

5089 
boﬁón
 
¥evch¨
, 
thisch¨
;

5091 
	`DEBUG_PRINT1
 ("EXECUTINGÇotwordbound.\n");

5092 i‡(
	`AT_STRINGS_BEG
 (
d
Ë|| 
	`AT_STRINGS_END
 (d))

5093 
Áû
;

5095 
¥evch¨
 = 
	`WORDCHAR_P
 (
d
 - 1);

5096 
thisch¨
 = 
	`WORDCHAR_P
 (
d
);

5097 i‡(
¥evch¨
 !
thisch¨
)

5098 
Áû
;

5103 
w‹dbeg
:

5104 
	`DEBUG_PRINT1
 ("EXECUTING wordbeg.\n");

5105 i‡(
	`WORDCHAR_P
 (
d
Ë&& (
	`AT_STRINGS_BEG
 (d) || !WORDCHAR_P (d - 1)))

5107 
Áû
;

5109 
w‹díd
:

5110 
	`DEBUG_PRINT1
 ("EXECUTING wordend.\n");

5111 i‡(!
	`AT_STRINGS_BEG
 (
d
Ë&& 
	`WORDCHAR_P
 (d - 1)

5112 && (!
	`WORDCHAR_P
 (
d
Ë|| 
	`AT_STRINGS_END
 (d)))

5114 
Áû
;

5116 #ifde‡
emacs


5117 
bef‹e_dŸ
:

5118 
	`DEBUG_PRINT1
 ("EXECUTING before_dot.\n");

5119 i‡(
	`PTR_CHAR_POS
 ((*Ë
d
Ë>
poöt
)

5120 
Áû
;

5123 
©_dŸ
:

5124 
	`DEBUG_PRINT1
 ("EXECUTINGát_dot.\n");

5125 i‡(
	`PTR_CHAR_POS
 ((*Ë
d
Ë!
poöt
)

5126 
Áû
;

5129 
a·î_dŸ
:

5130 
	`DEBUG_PRINT1
 ("EXECUTINGáfter_dot.\n");

5131 i‡(
	`PTR_CHAR_POS
 ((*Ë
d
Ë<
poöt
)

5132 
Áû
;

5135 
sy¡ax•ec
:

5136 
	`DEBUG_PRINT2
 ("EXECUTING sy¡ax•e¯%d.\n", 
m˙t
);

5137 
m˙t
 = *
p
++;

5138 
m©chsy¡ax
;

5140 
w‹dch¨
:

5141 
	`DEBUG_PRINT1
 ("EXECUTING Emacs wordchar.\n");

5142 
m˙t
 = (Ë
Sw‹d
;

5143 
m©chsy¡ax
:

5144 
	`PREFETCH
 ();

5146 
d
++;

5147 i‡(
	`SYNTAX
 (
d
[-1]Ë!(
sy¡axcode
Ë
m˙t
)

5148 
Áû
;

5149 
	`SET_REGS_MATCHED
 ();

5152 
nŸsy¡ax•ec
:

5153 
	`DEBUG_PRINT2
 ("EXECUTINGÇŸsy¡ax•e¯%d.\n", 
m˙t
);

5154 
m˙t
 = *
p
++;

5155 
m©chnŸsy¡ax
;

5157 
nŸw‹dch¨
:

5158 
	`DEBUG_PRINT1
 ("EXECUTING EmacsÇotwordchar.\n");

5159 
m˙t
 = (Ë
Sw‹d
;

5160 
m©chnŸsy¡ax
:

5161 
	`PREFETCH
 ();

5163 
d
++;

5164 i‡(
	`SYNTAX
 (
d
[-1]Ë=(
sy¡axcode
Ë
m˙t
)

5165 
Áû
;

5166 
	`SET_REGS_MATCHED
 ();

5170 
w‹dch¨
:

5171 
	`DEBUG_PRINT1
 ("EXECUTINGÇon-Emacs wordchar.\n");

5172 
	`PREFETCH
 ();

5173 i‡(!
	`WORDCHAR_P
 (
d
))

5174 
Áû
;

5175 
	`SET_REGS_MATCHED
 ();

5176 
d
++;

5179 
nŸw‹dch¨
:

5180 
	`DEBUG_PRINT1
 ("EXECUTINGÇon-EmacsÇotwordchar.\n");

5181 
	`PREFETCH
 ();

5182 i‡(
	`WORDCHAR_P
 (
d
))

5183 
Áû
;

5184 
	`SET_REGS_MATCHED
 ();

5185 
d
++;

5190 
	`ab‹t
 ();

5196 
Áû
:

5197 i‡(!
	`FAIL_STACK_EMPTY
 ())

5199 
	`DEBUG_PRINT1
 ("\nFAIL:\n");

5200 
	`POP_FAILURE_POINT
 (
d
, 
p
,

5201 
lowe°_a˘ive_ªg
, 
highe°_a˘ive_ªg
,

5202 
ªg°¨t
, 
ªgíd
, 
ªg_öfo
);

5205 i‡(!
p
)

5206 
Áû
;

5209 
	`as£π
 (
p
 <
≥nd
);

5210 i‡(
p
 < 
≥nd
)

5212 
boﬁón
 
is_a_jump_n
 = 
Ál£
;

5216 (
ª_›code_t
Ë*
p
)

5218 
jump_n
:

5219 
is_a_jump_n
 = 
åue
;

5220 
maybe_p›_jump
:

5221 
p›_Áûuª_jump
:

5222 
jump
:

5223 
p1
 = 
p
 + 1;

5224 
	`EXTRACT_NUMBER_AND_INCR
 (
m˙t
, 
p1
);

5225 
p1
 +
m˙t
;

5227 i‡((
is_a_jump_n
 && (
ª_›code_t
Ë*
p1
 =
suc˚ed_n
)

5228 || (!
is_a_jump_n


5229 && (
ª_›code_t
Ë*
p1
 =
⁄_Áûuª_jump
))

5230 
Áû
;

5237 i‡(
d
 >
°rög1
 && d <
íd1
)

5238 
díd
 = 
íd_m©ch_1
;

5244 i‡(
be°_ªgs_£t
)

5245 
ª°‹e_be°_ªgs
;

5247 
	`FREE_VARIABLES
 ();

5250 
	}
}

5265 
boﬁón


5266 
	$group_m©ch_nuŒ_°rög_p
 (
p
, 
íd
, 
ªg_öfo
)

5267 **
p
, *
íd
;

5268 
ªgi°î_öfo_ty≥
 *
ªg_öfo
;

5270 
m˙t
;

5272 *
p1
 = *
p
 + 2;

5274 
p1
 < 
íd
)

5280 (
ª_›code_t
Ë*
p1
)

5283 
⁄_Áûuª_jump
:

5284 
p1
++;

5285 
	`EXTRACT_NUMBER_AND_INCR
 (
m˙t
, 
p1
);

5290 i‡(
m˙t
 >= 0)

5310 (
ª_›code_t
Ë
p1
[
m˙t
-3] =
jump_∑°_Æt
)

5316 i‡(!
	`Æt_m©ch_nuŒ_°rög_p
 (
p1
,Ö1 + 
m˙t
 - 3,

5317 
ªg_öfo
))

5318  
Ál£
;

5322 
p1
 +
m˙t
;

5326 i‡((
ª_›code_t
Ë*
p1
 !
⁄_Áûuª_jump
)

5331 
p1
++;

5332 
	`EXTRACT_NUMBER_AND_INCR
 (
m˙t
, 
p1
);

5333 i‡((
ª_›code_t
Ë
p1
[
m˙t
-3] !
jump_∑°_Æt
)

5336 
p1
 -= 3;

5344 
	`EXTRACT_NUMBER
 (
m˙t
, 
p1
 - 2);

5346 i‡(!
	`Æt_m©ch_nuŒ_°rög_p
 (
p1
,Ö1 + 
m˙t
, 
ªg_öfo
))

5347  
Ál£
;

5349 
p1
 +
m˙t
;

5354 
°›_mem‹y
:

5355 
	`as£π
 (
p1
[1] =**
p
);

5356 *
p
 = 
p1
 + 2;

5357  
åue
;

5361 i‡(!
	`comm⁄_›_m©ch_nuŒ_°rög_p
 (&
p1
, 
íd
, 
ªg_öfo
))

5362  
Ál£
;

5366  
Ál£
;

5367 
	}
}

5374 
boﬁón


5375 
	$Æt_m©ch_nuŒ_°rög_p
 (
p
, 
íd
, 
ªg_öfo
)

5376 *
p
, *
íd
;

5377 
ªgi°î_öfo_ty≥
 *
ªg_öfo
;

5379 
m˙t
;

5380 *
p1
 = 
p
;

5382 
p1
 < 
íd
)

5387 (
ª_›code_t
Ë*
p1
)

5390 
⁄_Áûuª_jump
:

5391 
p1
++;

5392 
	`EXTRACT_NUMBER_AND_INCR
 (
m˙t
, 
p1
);

5393 
p1
 +
m˙t
;

5397 i‡(!
	`comm⁄_›_m©ch_nuŒ_°rög_p
 (&
p1
, 
íd
, 
ªg_öfo
))

5398  
Ál£
;

5402  
åue
;

5403 
	}
}

5411 
boﬁón


5412 
	$comm⁄_›_m©ch_nuŒ_°rög_p
 (
p
, 
íd
, 
ªg_öfo
)

5413 **
p
, *
íd
;

5414 
ªgi°î_öfo_ty≥
 *
ªg_öfo
;

5416 
m˙t
;

5417 
boﬁón
 
ªt
;

5418 
ªg_no
;

5419 *
p1
 = *
p
;

5421 (
ª_›code_t
Ë*
p1
++)

5423 
no_›
:

5424 
beglöe
:

5425 
ídlöe
:

5426 
begbuf
:

5427 
ídbuf
:

5428 
w‹dbeg
:

5429 
w‹díd
:

5430 
w‹dbound
:

5431 
nŸw‹dbound
:

5432 #ifde‡
emacs


5433 
bef‹e_dŸ
:

5434 
©_dŸ
:

5435 
a·î_dŸ
:

5439 
°¨t_mem‹y
:

5440 
ªg_no
 = *
p1
;

5441 
	`as£π
 (
ªg_no
 > 0 &&Ñeg_nÿ<
MAX_REGNUM
);

5442 
ªt
 = 
	`group_m©ch_nuŒ_°rög_p
 (&
p1
, 
íd
, 
ªg_öfo
);

5447 i‡(
	`REG_MATCH_NULL_STRING_P
 (
ªg_öfo
[
ªg_no
]Ë=
MATCH_NULL_UNSET_VALUE
)

5448 
	`REG_MATCH_NULL_STRING_P
 (
ªg_öfo
[
ªg_no
]Ë
ªt
;

5450 i‡(!
ªt
)

5451  
Ál£
;

5455 
jump
:

5456 
	`EXTRACT_NUMBER_AND_INCR
 (
m˙t
, 
p1
);

5457 i‡(
m˙t
 >= 0)

5458 
p1
 +
m˙t
;

5460  
Ál£
;

5463 
suc˚ed_n
:

5465 
p1
 += 2;

5466 
	`EXTRACT_NUMBER_AND_INCR
 (
m˙t
, 
p1
);

5468 i‡(
m˙t
 == 0)

5470 
p1
 -= 4;

5471 
	`EXTRACT_NUMBER_AND_INCR
 (
m˙t
, 
p1
);

5472 
p1
 +
m˙t
;

5475  
Ál£
;

5478 
du∂iˇã
:

5479 i‡(!
	`REG_MATCH_NULL_STRING_P
 (
ªg_öfo
[*
p1
]))

5480  
Ál£
;

5483 
£t_numbî_©
:

5484 
p1
 += 4;

5488  
Ál£
;

5491 *
p
 = 
p1
;

5492  
åue
;

5493 
	}
}

5500 
	$bcmp_å™¶©e
 (
s1
, 
s2
, 
Àn
, 
å™¶©e
)

5501 c⁄° *
s1
, *
s2
;

5502 
Àn
;

5503 
RE_TRANSLATE_TYPE
 
å™¶©e
;

5505 c⁄° *
p1
 = (c⁄° *Ë
s1
;

5506 c⁄° *
p2
 = (c⁄° *Ë
s2
;

5507 
Àn
)

5509 i‡(
å™¶©e
[*
p1
++] !å™¶©e[*
p2
++])  1;

5510 
Àn
--;

5513 
	}
}

5527 
	$ª_compûe_∑âîn
 (
∑âîn
, 
Àngth
, 
buÂ
)

5528 c⁄° *
∑âîn
;

5529 
size_t
 
Àngth
;

5530 
ª_∑âîn_buf„r
 *
buÂ
;

5532 
ªg_îrcode_t
 
ªt
;

5536 
buÂ
->
ªgs_Æloˇãd
 = 
REGS_UNALLOCATED
;

5541 
buÂ
->
no_sub
 = 0;

5544 
buÂ
->
√wlöe_™ch‹
 = 1;

5546 
ªt
 = 
	`ªgex_compûe
 (
∑âîn
, 
Àngth
, 
ª_sy¡ax_›ti⁄s
, 
buÂ
);

5548 i‡(!
ªt
)

5549  
NULL
;

5550  
	`gëãxt
 (
ª_îr‹_msgid
 + 
ª_îr‹_msgid_idx
[(Ë
ªt
]);

5551 
	}
}

5552 #ifde‡
_LIBC


5553 
	$wók_Æüs
 (
__ª_compûe_∑âîn
, 
ª_compûe_∑âîn
)

5559 #i‡
deföed
 
_REGEX_RE_COMP
 || deföed 
_LIBC


5562 
ª_∑âîn_buf„r
 
ª_comp_buf
;

5565 #ifde‡
_LIBC


5569 
wók_fun˘i⁄


5571 
	$ª_comp
 (
s
)

5572 c⁄° *
s
;

5574 
ªg_îrcode_t
 
ªt
;

5576 i‡(!
s
)

5578 i‡(!
ª_comp_buf
.
buf„r
)

5579  
	`gëãxt
 ("NoÖreviousÑegularÉxpression");

5583 i‡(!
ª_comp_buf
.
buf„r
)

5585 
ª_comp_buf
.
buf„r
 = (*Ë
	`mÆloc
 (200);

5586 i‡(
ª_comp_buf
.
buf„r
 =
NULL
)

5587  (*Ë
	`gëãxt
 (
ª_îr‹_msgid


5588 + 
ª_îr‹_msgid_idx
[(Ë
REG_ESPACE
]);

5589 
ª_comp_buf
.
Æloˇãd
 = 200;

5591 
ª_comp_buf
.
Á°m≠
 = (*Ë
	`mÆloc
 (1 << 
BYTEWIDTH
);

5592 i‡(
ª_comp_buf
.
Á°m≠
 =
NULL
)

5593  (*Ë
	`gëãxt
 (
ª_îr‹_msgid


5594 + 
ª_îr‹_msgid_idx
[(Ë
REG_ESPACE
]);

5601 
ª_comp_buf
.
√wlöe_™ch‹
 = 1;

5603 
ªt
 = 
	`ªgex_compûe
 (
s
, 
	`°æí
 (s), 
ª_sy¡ax_›ti⁄s
, &
ª_comp_buf
);

5605 i‡(!
ªt
)

5606  
NULL
;

5609  (*Ë
	`gëãxt
 (
ª_îr‹_msgid
 + 
ª_îr‹_msgid_idx
[(Ë
ªt
]);

5610 
	}
}

5614 #ifde‡
_LIBC


5615 
	gwók_fun˘i⁄


5617 
	$ª_exec
 (
s
)

5618 c⁄° *
s
;

5620 c⁄° 
Àn
 = 
	`°æí
 (
s
);

5622 0 <
	`ª_£¨ch
 (&
ª_comp_buf
, 
s
, 
Àn
, 0,Üí, (
ª_ªgi°îs
 *) 0);

5623 
	}
}

5629 #i‚de‡
emacs


5667 
	$ªgcomp
 (
¥eg
, 
∑âîn
, 
cÊags
)

5668 
ªgex_t
 *
¥eg
;

5669 c⁄° *
∑âîn
;

5670 
cÊags
;

5672 
ªg_îrcode_t
 
ªt
;

5673 
ªg_sy¡ax_t
 
sy¡ax


5674 (
cÊags
 & 
REG_EXTENDED
) ?

5675 
RE_SYNTAX_POSIX_EXTENDED
 : 
RE_SYNTAX_POSIX_BASIC
;

5678 
¥eg
->
buf„r
 = 0;

5679 
¥eg
->
Æloˇãd
 = 0;

5680 
¥eg
->
u£d
 = 0;

5683 
¥eg
->
Á°m≠
 = (*Ë
	`mÆloc
 (1 << 
BYTEWIDTH
);

5685 i‡(
cÊags
 & 
REG_ICASE
)

5687 
i
;

5689 
¥eg
->
å™¶©e


5690 (
RE_TRANSLATE_TYPE
Ë
	`mÆloc
 (
CHAR_SET_SIZE


5691 *  (*(
RE_TRANSLATE_TYPE
)0));

5692 i‡(
¥eg
->
å™¶©e
 =
NULL
)

5693  (Ë
REG_ESPACE
;

5696 
i
 = 0; i < 
CHAR_SET_SIZE
; i++)

5697 
¥eg
->
å™¶©e
[
i
] = 
	`ISUPPER
 (iË? 
	`TOLOWER
 (i) : i;

5700 
¥eg
->
å™¶©e
 = 
NULL
;

5703 i‡(
cÊags
 & 
REG_NEWLINE
)

5705 
sy¡ax
 &~
RE_DOT_NEWLINE
;

5706 
sy¡ax
 |
RE_HAT_LISTS_NOT_NEWLINE
;

5708 
¥eg
->
√wlöe_™ch‹
 = 1;

5711 
¥eg
->
√wlöe_™ch‹
 = 0;

5713 
¥eg
->
no_sub
 = !!(
cÊags
 & 
REG_NOSUB
);

5717 
ªt
 = 
	`ªgex_compûe
 (
∑âîn
, 
	`°æí
 (∑âîn), 
sy¡ax
, 
¥eg
);

5721 i‡(
ªt
 =
REG_ERPAREN
Ëªà
REG_EPAREN
;

5723 i‡(
ªt
 =
REG_NOERROR
 && 
¥eg
->
Á°m≠
)

5727 i‡(
	`ª_compûe_Á°m≠
 (
¥eg
) == -2)

5731 
	`‰ì
 (
¥eg
->
Á°m≠
);

5732 
¥eg
->
Á°m≠
 = 
NULL
;

5736  (Ë
ªt
;

5737 
	}
}

5738 #ifde‡
_LIBC


5739 
	$wók_Æüs
 (
__ªgcomp
, 
ªgcomp
)

5758 
	$ªgexec
 (
¥eg
, 
°rög
, 
nm©ch
, 
pm©ch
, 
eÊags
)

5759 c⁄° 
ªgex_t
 *
¥eg
;

5760 c⁄° *
°rög
;

5761 
size_t
 
nm©ch
;

5762 
ªgm©ch_t
 
pm©ch
[];

5763 
eÊags
;

5765 
ªt
;

5766 
ª_ªgi°îs
 
ªgs
;

5767 
ªgex_t
 
¥iv©e_¥eg
;

5768 
Àn
 = 
	`°æí
 (
°rög
);

5769 
boﬁón
 
w™t_ªg_öfo
 = !
¥eg
->
no_sub
 && 
nm©ch
 > 0;

5771 
¥iv©e_¥eg
 = *
¥eg
;

5773 
¥iv©e_¥eg
.
nŸ_bﬁ
 = !!(
eÊags
 & 
REG_NOTBOL
);

5774 
¥iv©e_¥eg
.
nŸ_eﬁ
 = !!(
eÊags
 & 
REG_NOTEOL
);

5779 
¥iv©e_¥eg
.
ªgs_Æloˇãd
 = 
REGS_FIXED
;

5781 i‡(
w™t_ªg_öfo
)

5783 
ªgs
.
num_ªgs
 = 
nm©ch
;

5784 
ªgs
.
°¨t
 = 
	`TALLOC
 (
nm©ch
 * 2, 
ªgoff_t
);

5785 i‡(
ªgs
.
°¨t
 =
NULL
)

5786  (Ë
REG_NOMATCH
;

5787 
ªgs
.
íd
 =Ñegs.
°¨t
 + 
nm©ch
;

5791 
ªt
 = 
	`ª_£¨ch
 (&
¥iv©e_¥eg
, 
°rög
, 
Àn
,

5792  0, 
Àn
,

5793 
w™t_ªg_öfo
 ? &
ªgs
 : (
ª_ªgi°îs
 *) 0);

5796 i‡(
w™t_ªg_öfo
)

5798 i‡(
ªt
 >= 0)

5800 
r
;

5802 
r
 = 0;Ñ < 
nm©ch
;Ñ++)

5804 
pm©ch
[
r
].
rm_so
 = 
ªgs
.
°¨t
[r];

5805 
pm©ch
[
r
].
rm_eo
 = 
ªgs
.
íd
[r];

5810 
	`‰ì
 (
ªgs
.
°¨t
);

5814  
ªt
 >0 ? (Ë
REG_NOERROR
 : (Ë
REG_NOMATCH
;

5815 
	}
}

5816 #ifde‡
_LIBC


5817 
	$wók_Æüs
 (
__ªgexec
, 
ªgexec
)

5824 
size_t


5825 
	$ªgîr‹
 (
îr
, 
¥eg
, 
îrbuf
, 
îrbuf_size
)

5826 
îr
;

5827 c⁄° 
ªgex_t
 *
¥eg
;

5828 *
îrbuf
;

5829 
size_t
 
îrbuf_size
;

5831 c⁄° *
msg
;

5832 
size_t
 
msg_size
;

5834 i‡(
îr
 < 0

5835 || 
îr
 >(Ë( (
ª_îr‹_msgid_idx
)

5836 /  (
ª_îr‹_msgid_idx
[0])))

5841 
	`ab‹t
 ();

5843 
msg
 = 
	`gëãxt
 (
ª_îr‹_msgid
 + 
ª_îr‹_msgid_idx
[
îr
]);

5845 
msg_size
 = 
	`°æí
 (
msg
) + 1;

5847 i‡(
îrbuf_size
 != 0)

5849 i‡(
msg_size
 > 
îrbuf_size
)

5851 #i‡
deföed
 
HAVE_MEMPCPY
 || deföed 
_LIBC


5852 *((*Ë
	`__memp˝y
 (
îrbuf
, 
msg
, 
îrbuf_size
 - 1)) = '\0';

5854 
	`mem˝y
 (
îrbuf
, 
msg
, 
îrbuf_size
 - 1);

5855 
îrbuf
[
îrbuf_size
 - 1] = 0;

5859 
	`mem˝y
 (
îrbuf
, 
msg
, 
msg_size
);

5862  
msg_size
;

5863 
	}
}

5864 #ifde‡
_LIBC


5865 
	$wók_Æüs
 (
__ªgîr‹
, 
ªgîr‹
)

5872 
	$ªg‰ì
 (
¥eg
)

5873 
ªgex_t
 *
¥eg
;

5875 i‡(
¥eg
->
buf„r
 !
NULL
)

5876 
	`‰ì
 (
¥eg
->
buf„r
);

5877 
¥eg
->
buf„r
 = 
NULL
;

5879 
¥eg
->
Æloˇãd
 = 0;

5880 
¥eg
->
u£d
 = 0;

5882 i‡(
¥eg
->
Á°m≠
 !
NULL
)

5883 
	`‰ì
 (
¥eg
->
Á°m≠
);

5884 
¥eg
->
Á°m≠
 = 
NULL
;

5885 
¥eg
->
Á°m≠_accuøã
 = 0;

5887 i‡(
¥eg
->
å™¶©e
 !
NULL
)

5888 
	`‰ì
 (
¥eg
->
å™¶©e
);

5889 
¥eg
->
å™¶©e
 = 
NULL
;

5890 
	}
}

5891 #ifde‡
_LIBC


5892 
	$wók_Æüs
 (
__ªg‰ì
, 
ªg‰ì
)

	@route_types.h

4 #i‚de‡
_QUAGGA_ROUTE_TYPES_H


5 
	#_QUAGGA_ROUTE_TYPES_H


	)

8 
	#ZEBRA_ROUTE_SYSTEM
 0

	)

9 
	#ZEBRA_ROUTE_KERNEL
 1

	)

10 
	#ZEBRA_ROUTE_CONNECT
 2

	)

11 
	#ZEBRA_ROUTE_STATIC
 3

	)

12 
	#ZEBRA_ROUTE_RIP
 4

	)

13 
	#ZEBRA_ROUTE_RIPNG
 5

	)

14 
	#ZEBRA_ROUTE_OSPF
 6

	)

15 
	#ZEBRA_ROUTE_OSPF6
 7

	)

16 
	#ZEBRA_ROUTE_ISIS
 8

	)

17 
	#ZEBRA_ROUTE_BGP
 9

	)

18 
	#ZEBRA_ROUTE_PIM
 10

	)

19 
	#ZEBRA_ROUTE_HSLS
 11

	)

20 
	#ZEBRA_ROUTE_OLSR
 12

	)

21 
	#ZEBRA_ROUTE_BABEL
 13

	)

22 
	#ZEBRA_ROUTE_MAX
 14

	)

24 
	#SHOW_ROUTE_V4_HEADER
 \

28 
VTY_NEWLINE
, VTY_NEWLINE, VTY_NEWLINE, 
	)
VTY_NEWLINE

29 
	#SHOW_ROUTE_V6_HEADER
 \

33 
VTY_NEWLINE
, VTY_NEWLINE, VTY_NEWLINE, 
	)
VTY_NEWLINE

36 
	#QUAGGA_REDIST_STR_BABELD
 \

37 "(kî√l|c⁄√˘ed|°©ic|rù|rùng|o•f|o•f6|isis|bgp|pim)"

	)

38 
	#QUAGGA_REDIST_HELP_STR_BABELD
 \

48 "PrŸocﬁ IndïídíàMu…iˇ° (PIM)\n"

	)

49 
	#QUAGGA_IP_REDIST_STR_BABELD
 \

50 "(kî√l|c⁄√˘ed|°©ic|rù|o•f|isis|bgp|pim)"

	)

51 
	#QUAGGA_IP_REDIST_HELP_STR_BABELD
 \

59 "PrŸocﬁ IndïídíàMu…iˇ° (PIM)\n"

	)

60 
	#QUAGGA_IP6_REDIST_STR_BABELD
 \

61 "(kî√l|c⁄√˘ed|°©ic|rùng|o•f6|isis|bgp)"

	)

62 
	#QUAGGA_IP6_REDIST_HELP_STR_BABELD
 \

69 "B‹dî G©eway PrŸocﬁ (BGP)\n"

	)

72 
	#QUAGGA_REDIST_STR_BGPD
 \

73 "(kî√l|c⁄√˘ed|°©ic|rù|rùng|o•f|o•f6|isis|pim|babñ)"

	)

74 
	#QUAGGA_REDIST_HELP_STR_BGPD
 \

84 "BabñÑoutögÖrŸocﬁ (Babñ)\n"

	)

85 
	#QUAGGA_IP_REDIST_STR_BGPD
 \

86 "(kî√l|c⁄√˘ed|°©ic|rù|o•f|isis|pim|babñ)"

	)

87 
	#QUAGGA_IP_REDIST_HELP_STR_BGPD
 \

95 "BabñÑoutögÖrŸocﬁ (Babñ)\n"

	)

96 
	#QUAGGA_IP6_REDIST_STR_BGPD
 \

97 "(kî√l|c⁄√˘ed|°©ic|rùng|o•f6|isis|babñ)"

	)

98 
	#QUAGGA_IP6_REDIST_HELP_STR_BGPD
 \

105 "BabñÑoutögÖrŸocﬁ (Babñ)\n"

	)

108 
	#QUAGGA_REDIST_STR_ISISD
 \

109 "(kî√l|c⁄√˘ed|°©ic|rù|rùng|o•f|o•f6|bgp|pim|babñ)"

	)

110 
	#QUAGGA_REDIST_HELP_STR_ISISD
 \

120 "BabñÑoutögÖrŸocﬁ (Babñ)\n"

	)

121 
	#QUAGGA_IP_REDIST_STR_ISISD
 \

122 "(kî√l|c⁄√˘ed|°©ic|rù|o•f|bgp|pim|babñ)"

	)

123 
	#QUAGGA_IP_REDIST_HELP_STR_ISISD
 \

131 "BabñÑoutögÖrŸocﬁ (Babñ)\n"

	)

132 
	#QUAGGA_IP6_REDIST_STR_ISISD
 \

133 "(kî√l|c⁄√˘ed|°©ic|rùng|o•f6|bgp|babñ)"

	)

134 
	#QUAGGA_IP6_REDIST_HELP_STR_ISISD
 \

141 "BabñÑoutögÖrŸocﬁ (Babñ)\n"

	)

144 
	#QUAGGA_REDIST_STR_OSPF6D
 \

145 "(kî√l|c⁄√˘ed|°©ic|rùng|isis|bgp|babñ)"

	)

146 
	#QUAGGA_REDIST_HELP_STR_OSPF6D
 \

153 "BabñÑoutögÖrŸocﬁ (Babñ)\n"

	)

156 
	#QUAGGA_REDIST_STR_OSPFD
 \

157 "(kî√l|c⁄√˘ed|°©ic|rù|isis|bgp|pim|babñ)"

	)

158 
	#QUAGGA_REDIST_HELP_STR_OSPFD
 \

166 "BabñÑoutögÖrŸocﬁ (Babñ)\n"

	)

169 
	#QUAGGA_REDIST_STR_PIMD
 \

170 "(kî√l|c⁄√˘ed|°©ic|rù|o•f|isis|bgp|babñ)"

	)

171 
	#QUAGGA_REDIST_HELP_STR_PIMD
 \

179 "BabñÑoutögÖrŸocﬁ (Babñ)\n"

	)

182 
	#QUAGGA_REDIST_STR_RIPD
 \

183 "(kî√l|c⁄√˘ed|°©ic|o•f|isis|bgp|pim|babñ)"

	)

184 
	#QUAGGA_REDIST_HELP_STR_RIPD
 \

192 "BabñÑoutögÖrŸocﬁ (Babñ)\n"

	)

195 
	#QUAGGA_REDIST_STR_RIPNGD
 \

196 "(kî√l|c⁄√˘ed|°©ic|o•f6|isis|bgp|babñ)"

	)

197 
	#QUAGGA_REDIST_HELP_STR_RIPNGD
 \

204 "BabñÑoutögÖrŸocﬁ (Babñ)\n"

	)

207 
	#QUAGGA_REDIST_STR_ZEBRA
 \

208 "(kî√l|c⁄√˘ed|°©ic|rù|rùng|o•f|o•f6|isis|bgp|pim|babñ)"

	)

209 
	#QUAGGA_REDIST_HELP_STR_ZEBRA
 \

220 "BabñÑoutögÖrŸocﬁ (Babñ)\n"

	)

221 
	#QUAGGA_IP_REDIST_STR_ZEBRA
 \

222 "(kî√l|c⁄√˘ed|°©ic|rù|o•f|isis|bgp|pim|babñ)"

	)

223 
	#QUAGGA_IP_REDIST_HELP_STR_ZEBRA
 \

232 "BabñÑoutögÖrŸocﬁ (Babñ)\n"

	)

233 
	#QUAGGA_IP6_REDIST_STR_ZEBRA
 \

234 "(kî√l|c⁄√˘ed|°©ic|rùng|o•f6|isis|bgp|babñ)"

	)

235 
	#QUAGGA_IP6_REDIST_HELP_STR_ZEBRA
 \

243 "BabñÑoutögÖrŸocﬁ (Babñ)\n"

	)

246 #ifde‡
QUAGGA_DEFINE_DESC_TABLE


248 
	szebø_desc_èbÀ


250 
	mty≥
;

251 c⁄° *
	m°rög
;

252 
	mchr
;

255 
	#DESC_ENTRY
(
T
,
S
,
C
Ë[(T)] = { (T), (S), (CË}

	)

256 c⁄° 
zebø_desc_èbÀ
 
	grouã_ty≥s
[] = {

257 
DESC_ENTRY
 (
ZEBRA_ROUTE_SYSTEM
, "system", 'X' ),

258 
DESC_ENTRY
 (
ZEBRA_ROUTE_KERNEL
, "kernel", 'K' ),

259 
DESC_ENTRY
 (
ZEBRA_ROUTE_CONNECT
, "connected", 'C' ),

260 
DESC_ENTRY
 (
ZEBRA_ROUTE_STATIC
, "static", 'S' ),

261 
DESC_ENTRY
 (
ZEBRA_ROUTE_RIP
, "rip", 'R' ),

262 
DESC_ENTRY
 (
ZEBRA_ROUTE_RIPNG
, "ripng", 'R' ),

263 
DESC_ENTRY
 (
ZEBRA_ROUTE_OSPF
, "ospf", 'O' ),

264 
DESC_ENTRY
 (
ZEBRA_ROUTE_OSPF6
, "ospf6", 'O' ),

265 
DESC_ENTRY
 (
ZEBRA_ROUTE_ISIS
, "isis", 'I' ),

266 
DESC_ENTRY
 (
ZEBRA_ROUTE_BGP
, "bgp", 'B' ),

267 
DESC_ENTRY
 (
ZEBRA_ROUTE_PIM
, "pim", 'P' ),

268 
DESC_ENTRY
 (
ZEBRA_ROUTE_HSLS
, "hsls", 'H' ),

269 
DESC_ENTRY
 (
ZEBRA_ROUTE_OLSR
, "olsr", 'o' ),

270 
DESC_ENTRY
 (
ZEBRA_ROUTE_BABEL
, "babel", 'A' ),

272 #unde‡
DESC_ENTRY


	@routemap.c

21 
	~<zebø.h
>

23 
	~"lökli°.h
"

24 
	~"mem‹y.h
"

25 
	~"ve˘‹.h
"

26 
	~"¥efix.h
"

27 
	~"rouãm≠.h
"

28 
	~"comm™d.h
"

29 
	~"vty.h
"

30 
	~"log.h
"

33 
ve˘‹
 
	grouã_m©ch_vec
;

36 
ve˘‹
 
	grouã_£t_vec
;

39 
	srouã_m≠_ruÀ


42 
rouã_m≠_ruÀ_cmd
 *
	mcmd
;

45 *
	mruÀ_°r
;

48 *
	mvÆue
;

51 
rouã_m≠_ruÀ
 *
	m√xt
;

52 
rouã_m≠_ruÀ
 *
	m¥ev
;

56 
	srouã_m≠_li°


58 
rouã_m≠
 *
	mhód
;

59 
rouã_m≠
 *
	mèû
;

61 (*
	madd_hook
) (const *);

62 (*
	mdñëe_hook
) (const *);

63 (*
	mevít_hook
Ë(
	mrouã_m≠_evít_t
, const *);

67 
rouã_m≠_li°
 
	grouã_m≠_ma°î
 = { 
NULL
, NULL, NULL, NULL };

70 
rouã_m≠_ruÀ_dñëe
 (
rouã_m≠_ruÀ_li°
 *,

71 
rouã_m≠_ruÀ
 *);

74 
rouã_m≠_ödex_dñëe
 (
rouã_m≠_ödex
 *, );

78 
rouã_m≠
 *

79 
	$rouã_m≠_√w
 (c⁄° *
«me
)

81 
rouã_m≠
 *
√w
;

83 
√w
 = 
	`XCALLOC
 (
MTYPE_ROUTE_MAP
,  (
rouã_m≠
));

84 
√w
->
«me
 = 
	`XSTRDUP
 (
MTYPE_ROUTE_MAP_NAME
,Çame);

85  
√w
;

86 
	}
}

89 
rouã_m≠
 *

90 
	$rouã_m≠_add
 (c⁄° *
«me
)

92 
rouã_m≠
 *
m≠
;

93 
rouã_m≠_li°
 *
li°
;

95 
m≠
 = 
	`rouã_m≠_√w
 (
«me
);

96 
li°
 = &
rouã_m≠_ma°î
;

98 
m≠
->
√xt
 = 
NULL
;

99 
m≠
->
¥ev
 = 
li°
->
èû
;

100 i‡(
li°
->
èû
)

101 
li°
->
èû
->
√xt
 = 
m≠
;

103 
li°
->
hód
 = 
m≠
;

104 
li°
->
èû
 = 
m≠
;

107 i‡(
rouã_m≠_ma°î
.
add_hook
)

108 (*
rouã_m≠_ma°î
.
add_hook
Ë(
«me
);

110  
m≠
;

111 
	}
}

115 
	$rouã_m≠_dñëe
 (
rouã_m≠
 *
m≠
)

117 
rouã_m≠_li°
 *
li°
;

118 
rouã_m≠_ödex
 *
ödex
;

119 *
«me
;

121 (
ödex
 = 
m≠
->
hód
Ë!
NULL
)

122 
	`rouã_m≠_ödex_dñëe
 (
ödex
, 0);

124 
«me
 = 
m≠
->name;

126 
li°
 = &
rouã_m≠_ma°î
;

128 i‡(
m≠
->
√xt
)

129 
m≠
->
√xt
->
¥ev
 = map->prev;

131 
li°
->
èû
 = 
m≠
->
¥ev
;

133 i‡(
m≠
->
¥ev
)

134 
m≠
->
¥ev
->
√xt
 = map->next;

136 
li°
->
hód
 = 
m≠
->
√xt
;

138 
	`XFREE
 (
MTYPE_ROUTE_MAP
, 
m≠
);

141 i‡(
rouã_m≠_ma°î
.
dñëe_hook
)

142 (*
rouã_m≠_ma°î
.
dñëe_hook
Ë(
«me
);

144 i‡(
«me
)

145 
	`XFREE
 (
MTYPE_ROUTE_MAP_NAME
, 
«me
);

147 
	}
}

150 
rouã_m≠
 *

151 
	$rouã_m≠_lookup_by_«me
 (c⁄° *
«me
)

153 
rouã_m≠
 *
m≠
;

155 
m≠
 = 
rouã_m≠_ma°î
.
hód
; m≠; m≠ = m≠->
√xt
)

156 i‡(
	`°rcmp
 (
m≠
->
«me
,Çame) == 0)

157  
m≠
;

158  
NULL
;

159 
	}
}

163 
rouã_m≠
 *

164 
	$rouã_m≠_gë
 (c⁄° *
«me
)

166 
rouã_m≠
 *
m≠
;

168 
m≠
 = 
	`rouã_m≠_lookup_by_«me
 (
«me
);

169 i‡(
m≠
 =
NULL
)

170 
m≠
 = 
	`rouã_m≠_add
 (
«me
);

171  
m≠
;

172 
	}
}

176 
	$rouã_m≠_ty≥_°r
 (
rouã_m≠_ty≥
 
ty≥
)

178 
ty≥
)

180 
RMAP_PERMIT
:

183 
RMAP_DENY
:

190 
	}
}

193 
	$rouã_m≠_em±y
 (
rouã_m≠
 *
m≠
)

195 i‡(
m≠
->
hód
 =
NULL
 && m≠->
èû
 == NULL)

199 
	}
}

203 
	$vty_show_rouã_m≠_íåy
 (
vty
 *vty, 
rouã_m≠
 *
m≠
)

205 
rouã_m≠_ödex
 *
ödex
;

206 
rouã_m≠_ruÀ
 *
ruÀ
;

209 i‡(
zlog_deÁu…
)

210 
	`vty_out
 (
vty
, "%s:%s", 
zlog_¥Ÿo_«mes
[
zlog_deÁu…
->
¥Ÿocﬁ
],

211 
VTY_NEWLINE
);

213 
ödex
 = 
m≠
->
hód
; index; index = index->
√xt
)

215 
	`vty_out
 (
vty
, "route-map %s, %s, sequence %d%s",

216 
m≠
->
«me
, 
	`rouã_m≠_ty≥_°r
 (
ödex
->
ty≥
),

217 
ödex
->
¥ef
, 
VTY_NEWLINE
);

220 i‡(
ödex
->
des¸ùti⁄
)

221 
	`vty_out
 (
vty
, " Des¸ùti⁄:%† %s%s", 
VTY_NEWLINE
,

222 
ödex
->
des¸ùti⁄
, 
VTY_NEWLINE
);

225 
	`vty_out
 (
vty
, " M©ch cœu£s:%s", 
VTY_NEWLINE
);

226 
ruÀ
 = 
ödex
->
m©ch_li°
.
hód
;ÑuÀ;ÑuÀ =ÑuÀ->
√xt
)

227 
	`vty_out
 (
vty
, " %s %s%s",

228 
ruÀ
->
cmd
->
°r
,ÑuÀ->
ruÀ_°r
, 
VTY_NEWLINE
);

230 
	`vty_out
 (
vty
, " Së cœu£s:%s", 
VTY_NEWLINE
);

231 
ruÀ
 = 
ödex
->
£t_li°
.
hód
;ÑuÀ;ÑuÀ =ÑuÀ->
√xt
)

232 
	`vty_out
 (
vty
, " %s %s%s",

233 
ruÀ
->
cmd
->
°r
,ÑuÀ->
ruÀ_°r
, 
VTY_NEWLINE
);

236 
	`vty_out
 (
vty
, " CÆ»˛au£:%s", 
VTY_NEWLINE
);

237 i‡(
ödex
->
√xåm
)

238 
	`vty_out
 (
vty
, " CÆ»%s%s", 
ödex
->
√xåm
, 
VTY_NEWLINE
);

241 
	`vty_out
 (
vty
, " A˘i⁄:%s", 
VTY_NEWLINE
);

242 i‡(
ödex
->
exôpﬁicy
 =
RMAP_GOTO
)

243 
	`vty_out
 (
vty
, " GŸÿ%d%s", 
ödex
->
√xçªf
, 
VTY_NEWLINE
);

244 i‡(
ödex
->
exôpﬁicy
 =
RMAP_NEXT
)

245 
	`vty_out
 (
vty
, " C⁄töuêtÿ√xàíåy%s", 
VTY_NEWLINE
);

246 i‡(
ödex
->
exôpﬁicy
 =
RMAP_EXIT
)

247 
	`vty_out
 (
vty
, " ExôÑouãm≠%s", 
VTY_NEWLINE
);

249 
	}
}

252 
	$vty_show_rouã_m≠
 (
vty
 *vty, c⁄° *
«me
)

254 
rouã_m≠
 *
m≠
;

256 i‡(
«me
)

258 
m≠
 = 
	`rouã_m≠_lookup_by_«me
 (
«me
);

260 i‡(
m≠
)

262 
	`vty_show_rouã_m≠_íåy
 (
vty
, 
m≠
);

263  
CMD_SUCCESS
;

267 
	`vty_out
 (
vty
, "%%rouã-m≠ %†nŸ found%s", 
«me
, 
VTY_NEWLINE
);

268  
CMD_WARNING
;

273 
m≠
 = 
rouã_m≠_ma°î
.
hód
; m≠; m≠ = m≠->
√xt
)

274 
	`vty_show_rouã_m≠_íåy
 (
vty
, 
m≠
);

276  
CMD_SUCCESS
;

277 
	}
}

282 
rouã_m≠_ödex
 *

283 
	$rouã_m≠_ödex_√w
 ()

285 
rouã_m≠_ödex
 *
√w
;

287 
√w
 = 
	`XCALLOC
 (
MTYPE_ROUTE_MAP_INDEX
,  (
rouã_m≠_ödex
));

288 
√w
->
exôpﬁicy
 = 
RMAP_EXIT
;

289  
√w
;

290 
	}
}

294 
	$rouã_m≠_ödex_dñëe
 (
rouã_m≠_ödex
 *
ödex
, 
nŸify
)

296 
rouã_m≠_ruÀ
 *
ruÀ
;

299 (
ruÀ
 = 
ödex
->
m©ch_li°
.
hód
Ë!
NULL
)

300 
	`rouã_m≠_ruÀ_dñëe
 (&
ödex
->
m©ch_li°
, 
ruÀ
);

303 (
ruÀ
 = 
ödex
->
£t_li°
.
hód
Ë!
NULL
)

304 
	`rouã_m≠_ruÀ_dñëe
 (&
ödex
->
£t_li°
, 
ruÀ
);

307 i‡(
ödex
->
√xt
)

308 
ödex
->
√xt
->
¥ev
 = index->prev;

310 
ödex
->
m≠
->
èû
 = index->
¥ev
;

312 i‡(
ödex
->
¥ev
)

313 
ödex
->
¥ev
->
√xt
 = index->next;

315 
ödex
->
m≠
->
hód
 = index->
√xt
;

318 i‡(
ödex
->
√xåm
)

319 
	`XFREE
 (
MTYPE_ROUTE_MAP_NAME
, 
ödex
->
√xåm
);

322 i‡(
rouã_m≠_ma°î
.
evít_hook
 && 
nŸify
)

323 (*
rouã_m≠_ma°î
.
evít_hook
Ë(
RMAP_EVENT_INDEX_DELETED
,

324 
ödex
->
m≠
->
«me
);

326 
	`XFREE
 (
MTYPE_ROUTE_MAP_INDEX
, 
ödex
);

327 
	}
}

330 
rouã_m≠_ödex
 *

331 
	$rouã_m≠_ödex_lookup
 (
rouã_m≠
 *
m≠
, 
rouã_m≠_ty≥
 
ty≥
,

332 
¥ef
)

334 
rouã_m≠_ödex
 *
ödex
;

336 
ödex
 = 
m≠
->
hód
; index; index = index->
√xt
)

337 i‡((
ödex
->
ty≥
 =ty≥ ||Åy≥ =
RMAP_ANY
)

338 && 
ödex
->
¥ef
 ==Öref)

339  
ödex
;

340  
NULL
;

341 
	}
}

344 
rouã_m≠_ödex
 *

345 
	$rouã_m≠_ödex_add
 (
rouã_m≠
 *
m≠
, 
rouã_m≠_ty≥
 
ty≥
,

346 
¥ef
)

348 
rouã_m≠_ödex
 *
ödex
;

349 
rouã_m≠_ödex
 *
poöt
;

352 
ödex
 = 
	`rouã_m≠_ödex_√w
 ();

353 
ödex
->
m≠
 = map;

354 
ödex
->
ty≥
 =Åype;

355 
ödex
->
¥ef
 =Öref;

358 
poöt
 = 
m≠
->
hód
;Öoöt;Öoöàpoöt->
√xt
)

359 i‡(
poöt
->
¥ef
 >=Öref)

362 i‡(
m≠
->
hód
 =
NULL
)

364 
m≠
->
hód
 = m≠->
èû
 = 
ödex
;

366 i‡(
poöt
 =
NULL
)

368 
ödex
->
¥ev
 = 
m≠
->
èû
;

369 
m≠
->
èû
->
√xt
 = 
ödex
;

370 
m≠
->
èû
 = 
ödex
;

372 i‡(
poöt
 =
m≠
->
hód
)

374 
ödex
->
√xt
 = 
m≠
->
hód
;

375 
m≠
->
hód
->
¥ev
 = 
ödex
;

376 
m≠
->
hód
 = 
ödex
;

380 
ödex
->
√xt
 = 
poöt
;

381 
ödex
->
¥ev
 = 
poöt
->prev;

382 i‡(
poöt
->
¥ev
)

383 
poöt
->
¥ev
->
√xt
 = 
ödex
;

384 
poöt
->
¥ev
 = 
ödex
;

388 i‡(
rouã_m≠_ma°î
.
evít_hook
)

389 (*
rouã_m≠_ma°î
.
evít_hook
Ë(
RMAP_EVENT_INDEX_ADDED
,

390 
m≠
->
«me
);

392  
ödex
;

393 
	}
}

396 
rouã_m≠_ödex
 *

397 
	$rouã_m≠_ödex_gë
 (
rouã_m≠
 *
m≠
, 
rouã_m≠_ty≥
 
ty≥
,

398 
¥ef
)

400 
rouã_m≠_ödex
 *
ödex
;

402 
ödex
 = 
	`rouã_m≠_ödex_lookup
 (
m≠
, 
RMAP_ANY
, 
¥ef
);

403 i‡(
ödex
 && index->
ty≥
 !=Åype)

406 
	`rouã_m≠_ödex_dñëe
 (
ödex
, 1);

407 
ödex
 = 
NULL
;

409 i‡(
ödex
 =
NULL
)

410 
ödex
 = 
	`rouã_m≠_ödex_add
 (
m≠
, 
ty≥
, 
¥ef
);

411  
ödex
;

412 
	}
}

415 
rouã_m≠_ruÀ
 *

416 
	$rouã_m≠_ruÀ_√w
 ()

418 
rouã_m≠_ruÀ
 *
√w
;

420 
√w
 = 
	`XCALLOC
 (
MTYPE_ROUTE_MAP_RULE
,  (
rouã_m≠_ruÀ
));

421  
√w
;

422 
	}
}

426 
	$rouã_m≠_ö°Æl_m©ch
 (
rouã_m≠_ruÀ_cmd
 *
cmd
)

428 
	`ve˘‹_£t
 (
rouã_m©ch_vec
, 
cmd
);

429 
	}
}

433 
	$rouã_m≠_ö°Æl_£t
 (
rouã_m≠_ruÀ_cmd
 *
cmd
)

435 
	`ve˘‹_£t
 (
rouã_£t_vec
, 
cmd
);

436 
	}
}

439 
rouã_m≠_ruÀ_cmd
 *

440 
	$rouã_m≠_lookup_m©ch
 (c⁄° *
«me
)

442 
i
;

443 
rouã_m≠_ruÀ_cmd
 *
ruÀ
;

445 
i
 = 0; i < 
	`ve˘‹_a˘ive
 (
rouã_m©ch_vec
); i++)

446 i‡((
ruÀ
 = 
	`ve˘‹_¶Ÿ
 (
rouã_m©ch_vec
, 
i
)Ë!
NULL
)

447 i‡(
	`°rcmp
 (
ruÀ
->
°r
, 
«me
) == 0)

448  
ruÀ
;

449  
NULL
;

450 
	}
}

453 
rouã_m≠_ruÀ_cmd
 *

454 
	$rouã_m≠_lookup_£t
 (c⁄° *
«me
)

456 
i
;

457 
rouã_m≠_ruÀ_cmd
 *
ruÀ
;

459 
i
 = 0; i < 
	`ve˘‹_a˘ive
 (
rouã_£t_vec
); i++)

460 i‡((
ruÀ
 = 
	`ve˘‹_¶Ÿ
 (
rouã_£t_vec
, 
i
)Ë!
NULL
)

461 i‡(
	`°rcmp
 (
ruÀ
->
°r
, 
«me
) == 0)

462  
ruÀ
;

463  
NULL
;

464 
	}
}

468 
	$rouã_m≠_ruÀ_add
 (
rouã_m≠_ruÀ_li°
 *
li°
,

469 
rouã_m≠_ruÀ
 *
ruÀ
)

471 
ruÀ
->
√xt
 = 
NULL
;

472 
ruÀ
->
¥ev
 = 
li°
->
èû
;

473 i‡(
li°
->
èû
)

474 
li°
->
èû
->
√xt
 = 
ruÀ
;

476 
li°
->
hód
 = 
ruÀ
;

477 
li°
->
èû
 = 
ruÀ
;

478 
	}
}

482 
	$rouã_m≠_ruÀ_dñëe
 (
rouã_m≠_ruÀ_li°
 *
li°
,

483 
rouã_m≠_ruÀ
 *
ruÀ
)

485 i‡(
ruÀ
->
cmd
->
func_‰ì
)

486 (*
ruÀ
->
cmd
->
func_‰ì
Ë‘uÀ->
vÆue
);

488 i‡(
ruÀ
->
ruÀ_°r
)

489 
	`XFREE
 (
MTYPE_ROUTE_MAP_RULE_STR
, 
ruÀ
->
ruÀ_°r
);

491 i‡(
ruÀ
->
√xt
)

492 
ruÀ
->
√xt
->
¥ev
 =Ñule->prev;

494 
li°
->
èû
 = 
ruÀ
->
¥ev
;

495 i‡(
ruÀ
->
¥ev
)

496 
ruÀ
->
¥ev
->
√xt
 =Ñule->next;

498 
li°
->
hód
 = 
ruÀ
->
√xt
;

500 
	`XFREE
 (
MTYPE_ROUTE_MAP_RULE
, 
ruÀ
);

501 
	}
}

505 
	$ruÀcmp
 (c⁄° *
d°
, c⁄° *
§c
)

507 i‡(
d°
 =
NULL
)

509 i‡(
§c
 =
NULL
)

516 i‡(
§c
 =
NULL
)

519  
	`°rcmp
 (
d°
, 
§c
);

522 
	}
}

526 
	$rouã_m≠_add_m©ch
 (
rouã_m≠_ödex
 *
ödex
, c⁄° *
m©ch_«me
,

527 c⁄° *
m©ch_¨g
)

529 
rouã_m≠_ruÀ
 *
ruÀ
;

530 
rouã_m≠_ruÀ
 *
√xt
;

531 
rouã_m≠_ruÀ_cmd
 *
cmd
;

532 *
compûe
;

533 
ª∂a˚d
 = 0;

536 
cmd
 = 
	`rouã_m≠_lookup_m©ch
 (
m©ch_«me
);

537 i‡(
cmd
 =
NULL
)

538  
RMAP_RULE_MISSING
;

541 i‡(
cmd
->
func_compûe
)

543 
compûe
(*
cmd
->
func_compûe
)(
m©ch_¨g
);

544 i‡(
compûe
 =
NULL
)

545  
RMAP_COMPILE_ERROR
;

548 
compûe
 = 
NULL
;

551 
ruÀ
 = 
ödex
->
m©ch_li°
.
hód
;ÑuÀ;ÑuÀ = 
√xt
)

553 
√xt
 = 
ruÀ
->next;

554 i‡(
ruÀ
->
cmd
 == cmd)

556 
	`rouã_m≠_ruÀ_dñëe
 (&
ödex
->
m©ch_li°
, 
ruÀ
);

557 
ª∂a˚d
 = 1;

562 
ruÀ
 = 
	`rouã_m≠_ruÀ_√w
 ();

563 
ruÀ
->
cmd
 = cmd;

564 
ruÀ
->
vÆue
 = 
compûe
;

565 i‡(
m©ch_¨g
)

566 
ruÀ
->
ruÀ_°r
 = 
	`XSTRDUP
 (
MTYPE_ROUTE_MAP_RULE_STR
, 
m©ch_¨g
);

568 
ruÀ
->
ruÀ_°r
 = 
NULL
;

571 
	`rouã_m≠_ruÀ_add
 (&
ödex
->
m©ch_li°
, 
ruÀ
);

574 i‡(
rouã_m≠_ma°î
.
evít_hook
)

575 (*
rouã_m≠_ma°î
.
evít_hook
Ë(
ª∂a˚d
 ?

576 
RMAP_EVENT_MATCH_REPLACED
:

577 
RMAP_EVENT_MATCH_ADDED
,

578 
ödex
->
m≠
->
«me
);

581 
	}
}

585 
	$rouã_m≠_dñëe_m©ch
 (
rouã_m≠_ödex
 *
ödex
, c⁄° *
m©ch_«me
,

586 c⁄° *
m©ch_¨g
)

588 
rouã_m≠_ruÀ
 *
ruÀ
;

589 
rouã_m≠_ruÀ_cmd
 *
cmd
;

591 
cmd
 = 
	`rouã_m≠_lookup_m©ch
 (
m©ch_«me
);

592 i‡(
cmd
 =
NULL
)

595 
ruÀ
 = 
ödex
->
m©ch_li°
.
hód
;ÑuÀ;ÑuÀ =ÑuÀ->
√xt
)

596 i‡(
ruÀ
->
cmd
 == cmd &&

597 (
	`ruÀcmp
 (
ruÀ
->
ruÀ_°r
, 
m©ch_¨g
Ë=0 || m©ch_¨g =
NULL
))

599 
	`rouã_m≠_ruÀ_dñëe
 (&
ödex
->
m©ch_li°
, 
ruÀ
);

601 i‡(
rouã_m≠_ma°î
.
evít_hook
)

602 (*
rouã_m≠_ma°î
.
evít_hook
Ë(
RMAP_EVENT_MATCH_DELETED
,

603 
ödex
->
m≠
->
«me
);

608 
	}
}

612 
	$rouã_m≠_add_£t
 (
rouã_m≠_ödex
 *
ödex
, c⁄° *
£t_«me
,

613 c⁄° *
£t_¨g
)

615 
rouã_m≠_ruÀ
 *
ruÀ
;

616 
rouã_m≠_ruÀ
 *
√xt
;

617 
rouã_m≠_ruÀ_cmd
 *
cmd
;

618 *
compûe
;

619 
ª∂a˚d
 = 0;

621 
cmd
 = 
	`rouã_m≠_lookup_£t
 (
£t_«me
);

622 i‡(
cmd
 =
NULL
)

623  
RMAP_RULE_MISSING
;

626 i‡(
cmd
->
func_compûe
)

628 
compûe
(*
cmd
->
func_compûe
)(
£t_¨g
);

629 i‡(
compûe
 =
NULL
)

630  
RMAP_COMPILE_ERROR
;

633 
compûe
 = 
NULL
;

638 
ruÀ
 = 
ödex
->
£t_li°
.
hód
;ÑuÀ;ÑuÀ = 
√xt
)

640 
√xt
 = 
ruÀ
->next;

641 i‡(
ruÀ
->
cmd
 == cmd)

643 
	`rouã_m≠_ruÀ_dñëe
 (&
ödex
->
£t_li°
, 
ruÀ
);

644 
ª∂a˚d
 = 1;

649 
ruÀ
 = 
	`rouã_m≠_ruÀ_√w
 ();

650 
ruÀ
->
cmd
 = cmd;

651 
ruÀ
->
vÆue
 = 
compûe
;

652 i‡(
£t_¨g
)

653 
ruÀ
->
ruÀ_°r
 = 
	`XSTRDUP
 (
MTYPE_ROUTE_MAP_RULE_STR
, 
£t_¨g
);

655 
ruÀ
->
ruÀ_°r
 = 
NULL
;

658 
	`rouã_m≠_ruÀ_add
 (&
ödex
->
£t_li°
, 
ruÀ
);

661 i‡(
rouã_m≠_ma°î
.
evít_hook
)

662 (*
rouã_m≠_ma°î
.
evít_hook
Ë(
ª∂a˚d
 ?

663 
RMAP_EVENT_SET_REPLACED
:

664 
RMAP_EVENT_SET_ADDED
,

665 
ödex
->
m≠
->
«me
);

667 
	}
}

671 
	$rouã_m≠_dñëe_£t
 (
rouã_m≠_ödex
 *
ödex
, c⁄° *
£t_«me
,

672 c⁄° *
£t_¨g
)

674 
rouã_m≠_ruÀ
 *
ruÀ
;

675 
rouã_m≠_ruÀ_cmd
 *
cmd
;

677 
cmd
 = 
	`rouã_m≠_lookup_£t
 (
£t_«me
);

678 i‡(
cmd
 =
NULL
)

681 
ruÀ
 = 
ödex
->
£t_li°
.
hód
;ÑuÀ;ÑuÀ =ÑuÀ->
√xt
)

682 i‡((
ruÀ
->
cmd
 == cmd) &&

683 (
	`ruÀcmp
 (
ruÀ
->
ruÀ_°r
, 
£t_¨g
Ë=0 || së_¨g =
NULL
))

685 
	`rouã_m≠_ruÀ_dñëe
 (&
ödex
->
£t_li°
, 
ruÀ
);

687 i‡(
rouã_m≠_ma°î
.
evít_hook
)

688 (*
rouã_m≠_ma°î
.
evít_hook
Ë(
RMAP_EVENT_SET_DELETED
,

689 
ödex
->
m≠
->
«me
);

694 
	}
}

742 
rouã_m≠_ªsu…_t


743 
	$rouã_m≠_≠∂y_m©ch
 (
rouã_m≠_ruÀ_li°
 *
m©ch_li°
,

744 
¥efix
 *¥efix, 
rouã_m≠_obje˘_t
 
ty≥
,

745 *
obje˘
)

747 
rouã_m≠_ªsu…_t
 
ªt
 = 
RMAP_NOMATCH
;

748 
rouã_m≠_ruÀ
 *
m©ch
;

753 i‡(!
m©ch_li°
->
hód
)

754 
ªt
 = 
RMAP_MATCH
;

757 
m©ch
 = 
m©ch_li°
->
hód
; m©ch; m©ch = m©ch->
√xt
)

763 
ªt
 = (*
m©ch
->
cmd
->
func_≠∂y
Ë(m©ch->
vÆue
, 
¥efix
,

764 
ty≥
, 
obje˘
);

765 i‡(
ªt
 !
RMAP_MATCH
)

766  
ªt
;

769  
ªt
;

770 
	}
}

773 
rouã_m≠_ªsu…_t


774 
	$rouã_m≠_≠∂y
 (
rouã_m≠
 *
m≠
, 
¥efix
 *prefix,

775 
rouã_m≠_obje˘_t
 
ty≥
, *
obje˘
)

777 
ªcursi⁄
 = 0;

778 
ªt
 = 0;

779 
rouã_m≠_ödex
 *
ödex
;

780 
rouã_m≠_ruÀ
 *
£t
;

782 i‡(
ªcursi⁄
 > 
RMAP_RECURSION_LIMIT
)

784 
	`zlog
 (
NULL
, 
LOG_WARNING
,

786 
RMAP_RECURSION_LIMIT
);

787 
ªcursi⁄
 = 0;

788  
RMAP_DENYMATCH
;

791 i‡(
m≠
 =
NULL
)

792  
RMAP_DENYMATCH
;

794 
ödex
 = 
m≠
->
hód
; index; index = index->
√xt
)

797 
ªt
 = 
	`rouã_m≠_≠∂y_m©ch
 (&
ödex
->
m©ch_li°
, 
¥efix
, 
ty≥
, 
obje˘
);

800 i‡(
ªt
 =
RMAP_NOMATCH
)

803 i‡(
ªt
 =
RMAP_MATCH
)

805 i‡(
ödex
->
ty≥
 =
RMAP_PERMIT
)

809 
£t
 = 
ödex
->
£t_li°
.
hód
; së; së = së->
√xt
)

810 
ªt
 = (*
£t
->
cmd
->
func_≠∂y
Ë(£t->
vÆue
, 
¥efix
,

811 
ty≥
, 
obje˘
);

814 i‡(
ödex
->
√xåm
)

816 
rouã_m≠
 *
√xåm
 =

817 
	`rouã_m≠_lookup_by_«me
 (
ödex
->
√xåm
);

819 i‡(
√xåm
)

821 
ªcursi⁄
++;

822 
ªt
 = 
	`rouã_m≠_≠∂y
 (
√xåm
, 
¥efix
, 
ty≥
, 
obje˘
);

823 
ªcursi⁄
--;

827 i‡(
ªt
 =
RMAP_DENYMATCH
)

828  
ªt
;

831 
ödex
->
exôpﬁicy
)

833 
RMAP_EXIT
:

834  
ªt
;

835 
RMAP_NEXT
:

837 
RMAP_GOTO
:

840 
rouã_m≠_ödex
 *
√xt
 = 
ödex
->next;

841 
√xçªf
 = 
ödex
->nextpref;

843 
√xt
 &&Çext->
¥ef
 < 
√xçªf
)

845 
ödex
 = 
√xt
;

846 
√xt
 =Çext->next;

848 i‡(
√xt
 =
NULL
)

851  
ªt
;

856 i‡(
ödex
->
ty≥
 =
RMAP_DENY
)

859  
RMAP_DENYMATCH
;

864  
RMAP_DENYMATCH
;

865 
	}
}

868 
rouã_m≠_add_hook
 ((*
func
) (const *))

870 
rouã_m≠_ma°î
.
add_hook
 = 
func
;

871 
	}
}

874 
rouã_m≠_dñëe_hook
 ((*
func
) (const *))

876 
rouã_m≠_ma°î
.
dñëe_hook
 = 
func
;

877 
	}
}

880 
rouã_m≠_evít_hook
 ((*
func
Ë(
rouã_m≠_evít_t
, const *))

882 
rouã_m≠_ma°î
.
evít_hook
 = 
func
;

883 
	}
}

886 
	$rouã_m≠_öô
 ()

889 
rouã_m©ch_vec
 = 
	`ve˘‹_öô
 (1);

890 
rouã_£t_vec
 = 
	`ve˘‹_öô
 (1);

891 
	}
}

894 
	$rouã_m≠_föish
 ()

896 
	`ve˘‹_‰ì
 (
rouã_m©ch_vec
);

897 
rouã_m©ch_vec
 = 
NULL
;

898 
	`ve˘‹_‰ì
 (
rouã_£t_vec
);

899 
rouã_£t_vec
 = 
NULL
;

900 
	}
}

903 
DEFUN
 (
rouã_m≠
,

904 
rouã_m≠_cmd
,

912 
	g≥rmô
;

913 
	g¥ef
;

914 
rouã_m≠
 *
	gm≠
;

915 
rouã_m≠_ödex
 *
	gödex
;

916 *
	gíd±r
 = 
NULL
;

919 i‡(
°∫cmp
 (
¨gv
[1], "≥rmô", 
°æí
 (argv[1])) == 0)

920 
≥rmô
 = 
RMAP_PERMIT
;

921 i‡(
°∫cmp
 (
¨gv
[1], "díy", 
°æí
 (argv[1])) == 0)

922 
≥rmô
 = 
RMAP_DENY
;

925 
vty_out
 (
vty
, "thêthúd fõld mu° bê[≥rmô|díy]%s", 
VTY_NEWLINE
);

926  
	gCMD_WARNING
;

930 
	g¥ef
 = 
°πoul
 (
¨gv
[2], &
íd±r
, 10);

931 i‡(
	g¥ef
 =
ULONG_MAX
 || *
íd±r
 != '\0')

933 
vty_out
 (
vty
, "the fourth field must beÖositive integer%s",

934 
VTY_NEWLINE
);

935  
	gCMD_WARNING
;

937 i‡(
	g¥ef
 =0 || 
¥ef
 > 65535)

939 
vty_out
 (
vty
, "thêfouπh fõld mu° bê<1-65535>%s", 
VTY_NEWLINE
);

940  
	gCMD_WARNING
;

944 
	gm≠
 = 
rouã_m≠_gë
 (
¨gv
[0]);

945 
	gödex
 = 
rouã_m≠_ödex_gë
 (
m≠
, 
≥rmô
, 
¥ef
);

947 
	gvty
->
	gödex
 = 
ödex
;

948 
	gvty
->
	gnode
 = 
RMAP_NODE
;

949  
	gCMD_SUCCESS
;

952 
DEFUN
 (
no_rouã_m≠_Æl
,

953 
no_rouã_m≠_Æl_cmd
,

955 
NO_STR


959 
rouã_m≠
 *
	gm≠
;

961 
	gm≠
 = 
rouã_m≠_lookup_by_«me
 (
¨gv
[0]);

962 i‡(
	gm≠
 =
NULL
)

964 
vty_out
 (
vty
, "%% CouldÇot findÑoute-map %s%s",

965 
¨gv
[0], 
VTY_NEWLINE
);

966  
	gCMD_WARNING
;

969 
rouã_m≠_dñëe
 (
m≠
);

971  
	gCMD_SUCCESS
;

974 
DEFUN
 (
no_rouã_m≠
,

975 
no_rouã_m≠_cmd
,

977 
NO_STR


984 
	g≥rmô
;

985 
	g¥ef
;

986 
rouã_m≠
 *
	gm≠
;

987 
rouã_m≠_ödex
 *
	gödex
;

988 *
	gíd±r
 = 
NULL
;

991 i‡(
°∫cmp
 (
¨gv
[1], "≥rmô", 
°æí
 (argv[1])) == 0)

992 
≥rmô
 = 
RMAP_PERMIT
;

993 i‡(
°∫cmp
 (
¨gv
[1], "díy", 
°æí
 (argv[1])) == 0)

994 
≥rmô
 = 
RMAP_DENY
;

997 
vty_out
 (
vty
, "thêthúd fõld mu° bê[≥rmô|díy]%s", 
VTY_NEWLINE
);

998  
	gCMD_WARNING
;

1002 
	g¥ef
 = 
°πoul
 (
¨gv
[2], &
íd±r
, 10);

1003 i‡(
	g¥ef
 =
ULONG_MAX
 || *
íd±r
 != '\0')

1005 
vty_out
 (
vty
, "the fourth field must beÖositive integer%s",

1006 
VTY_NEWLINE
);

1007  
	gCMD_WARNING
;

1009 i‡(
	g¥ef
 =0 || 
¥ef
 > 65535)

1011 
vty_out
 (
vty
, "thêfouπh fõld mu° bê<1-65535>%s", 
VTY_NEWLINE
);

1012  
	gCMD_WARNING
;

1016 
	gm≠
 = 
rouã_m≠_lookup_by_«me
 (
¨gv
[0]);

1017 i‡(
	gm≠
 =
NULL
)

1019 
vty_out
 (
vty
, "%% CouldÇot findÑoute-map %s%s",

1020 
¨gv
[0], 
VTY_NEWLINE
);

1021  
	gCMD_WARNING
;

1025 
	gödex
 = 
rouã_m≠_ödex_lookup
 (
m≠
, 
≥rmô
, 
¥ef
);

1026 i‡(
	gödex
 =
NULL
)

1028 
vty_out
 (
vty
, "%% CouldÇot findÑoute-mapÉntry %s %s%s",

1029 
¨gv
[0],árgv[2], 
VTY_NEWLINE
);

1030  
	gCMD_WARNING
;

1034 
rouã_m≠_ödex_dñëe
 (
ödex
, 1);

1037 i‡(
rouã_m≠_em±y
 (
m≠
))

1038 
rouã_m≠_dñëe
 (
m≠
);

1040  
	gCMD_SUCCESS
;

1043 
DEFUN
 (
rm≠_⁄m©ch_√xt
,

1044 
rm≠_⁄m©ch_√xt_cmd
,

1049 
rouã_m≠_ödex
 *
	gödex
;

1051 
	gödex
 = 
vty
->
ödex
;

1053 i‡(
	gödex
)

1054 
	gödex
->
	gexôpﬁicy
 = 
RMAP_NEXT
;

1056  
	gCMD_SUCCESS
;

1059 
DEFUN
 (
no_rm≠_⁄m©ch_√xt
,

1060 
no_rm≠_⁄m©ch_√xt_cmd
,

1062 
NO_STR


1066 
rouã_m≠_ödex
 *
	gödex
;

1068 
	gödex
 = 
vty
->
ödex
;

1070 i‡(
	gödex
)

1071 
	gödex
->
	gexôpﬁicy
 = 
RMAP_EXIT
;

1073  
	gCMD_SUCCESS
;

1076 
DEFUN
 (
rm≠_⁄m©ch_gŸo
,

1077 
rm≠_⁄m©ch_gŸo_cmd
,

1083 
rouã_m≠_ödex
 *
	gödex
 = 
vty
->
ödex
;

1084 
	gd
 = 0;

1086 i‡(
	gödex
)

1088 i‡(
	g¨gc
 =1 && 
¨gv
[0])

1089 
VTY_GET_INTEGER_RANGE
("rouã-m≠ index", 
d
, 
¨gv
[0], 1, 65536);

1091 
	gd
 = 
ödex
->
¥ef
 + 1;

1093 i‡(
	gd
 <
ödex
->
¥ef
)

1096 
vty_out
 (
vty
, "can't jump backwards inÑoute-maps%s",

1097 
VTY_NEWLINE
);

1098  
	gCMD_WARNING
;

1102 
	gödex
->
	gexôpﬁicy
 = 
RMAP_GOTO
;

1103 
	gödex
->
	g√xçªf
 = 
d
;

1106  
	gCMD_SUCCESS
;

1109 
DEFUN
 (
no_rm≠_⁄m©ch_gŸo
,

1110 
no_rm≠_⁄m©ch_gŸo_cmd
,

1112 
NO_STR


1116 
rouã_m≠_ödex
 *
	gödex
;

1118 
	gödex
 = 
vty
->
ödex
;

1120 i‡(
	gödex
)

1121 
	gödex
->
	gexôpﬁicy
 = 
RMAP_EXIT
;

1123  
	gCMD_SUCCESS
;

1127 
ALIAS
 (
rm≠_⁄m©ch_gŸo
,

1128 
rm≠_c⁄töue_cmd
,

1132 
ALIAS
 (
no_rm≠_⁄m©ch_gŸo
,

1133 
no_rm≠_c⁄töue_cmd
,

1135 
NO_STR


1139 
ALIAS
 (
rm≠_⁄m©ch_gŸo
,

1140 
rm≠_c⁄töue_£q_cmd
,

1145 
ALIAS
 (
no_rm≠_⁄m©ch_gŸo
,

1146 
no_rm≠_c⁄töue_£q
,

1148 
NO_STR


1152 
DEFUN
 (
rm≠_show_«me
,

1153 
rm≠_show_«me_cmd
,

1155 
SHOW_STR


1159 c⁄° *
	g«me
 = 
NULL
;

1160 i‡(
	g¨gc
)

1161 
	g«me
 = 
¨gv
[0];

1162  
vty_show_rouã_m≠
 (
vty
, 
«me
);

1165 
ALIAS
 (
rm≠_⁄m©ch_gŸo
,

1166 
rm≠_c⁄töue_ödex_cmd
,

1171 
DEFUN
 (
rm≠_ˇŒ
,

1172 
rm≠_ˇŒ_cmd
,

1177 
rouã_m≠_ödex
 *
	gödex
;

1179 
	gödex
 = 
vty
->
ödex
;

1180 i‡(
	gödex
)

1182 i‡(
	gödex
->
	g√xåm
)

1183 
XFREE
 (
MTYPE_ROUTE_MAP_NAME
, 
ödex
->
√xåm
);

1184 
	gödex
->
	g√xåm
 = 
XSTRDUP
 (
MTYPE_ROUTE_MAP_NAME
, 
¨gv
[0]);

1186  
	gCMD_SUCCESS
;

1189 
DEFUN
 (
no_rm≠_ˇŒ
,

1190 
no_rm≠_ˇŒ_cmd
,

1192 
NO_STR


1195 
rouã_m≠_ödex
 *
	gödex
;

1197 
	gödex
 = 
vty
->
ödex
;

1199 i‡(
	gödex
->
	g√xåm
)

1201 
XFREE
 (
MTYPE_ROUTE_MAP_NAME
, 
ödex
->
√xåm
);

1202 
	gödex
->
	g√xåm
 = 
NULL
;

1205  
	gCMD_SUCCESS
;

1208 
DEFUN
 (
rm≠_des¸ùti⁄
,

1209 
rm≠_des¸ùti⁄_cmd
,

1214 
rouã_m≠_ödex
 *
	gödex
;

1216 
	gödex
 = 
vty
->
ödex
;

1217 i‡(
	gödex
)

1219 i‡(
	gödex
->
	gdes¸ùti⁄
)

1220 
XFREE
 (
MTYPE_TMP
, 
ödex
->
des¸ùti⁄
);

1221 
	gödex
->
	gdes¸ùti⁄
 = 
¨gv_c⁄ˇt
 (
¨gv
, 
¨gc
, 0);

1223  
	gCMD_SUCCESS
;

1226 
DEFUN
 (
no_rm≠_des¸ùti⁄
,

1227 
no_rm≠_des¸ùti⁄_cmd
,

1229 
NO_STR


1232 
rouã_m≠_ödex
 *
	gödex
;

1234 
	gödex
 = 
vty
->
ödex
;

1235 i‡(
	gödex
)

1237 i‡(
	gödex
->
	gdes¸ùti⁄
)

1238 
XFREE
 (
MTYPE_TMP
, 
ödex
->
des¸ùti⁄
);

1239 
	gödex
->
	gdes¸ùti⁄
 = 
NULL
;

1241  
	gCMD_SUCCESS
;

1246 
	$rouã_m≠_c⁄fig_wrôe
 (
vty
 *vty)

1248 
rouã_m≠
 *
m≠
;

1249 
rouã_m≠_ödex
 *
ödex
;

1250 
rouã_m≠_ruÀ
 *
ruÀ
;

1251 
fú°
 = 1;

1252 
wrôe
 = 0;

1254 
m≠
 = 
rouã_m≠_ma°î
.
hód
; m≠; m≠ = m≠->
√xt
)

1255 
ödex
 = 
m≠
->
hód
; index; index = index->
√xt
)

1257 i‡(!
fú°
)

1258 
	`vty_out
 (
vty
, "!%s", 
VTY_NEWLINE
);

1260 
fú°
 = 0;

1262 
	`vty_out
 (
vty
, "route-map %s %s %d%s",

1263 
m≠
->
«me
,

1264 
	`rouã_m≠_ty≥_°r
 (
ödex
->
ty≥
),

1265 
ödex
->
¥ef
, 
VTY_NEWLINE
);

1267 i‡(
ödex
->
des¸ùti⁄
)

1268 
	`vty_out
 (
vty
, " des¸ùti⁄ %s%s", 
ödex
->
des¸ùti⁄
, 
VTY_NEWLINE
);

1270 
ruÀ
 = 
ödex
->
m©ch_li°
.
hód
;ÑuÀ;ÑuÀ =ÑuÀ->
√xt
)

1271 
	`vty_out
 (
vty
, " m©ch %†%s%s", 
ruÀ
->
cmd
->
°r
,

1272 
ruÀ
->
ruÀ_°r
 ?Ñule->rule_str : "",

1273 
VTY_NEWLINE
);

1275 
ruÀ
 = 
ödex
->
£t_li°
.
hód
;ÑuÀ;ÑuÀ =ÑuÀ->
√xt
)

1276 
	`vty_out
 (
vty
, " së %†%s%s", 
ruÀ
->
cmd
->
°r
,

1277 
ruÀ
->
ruÀ_°r
 ?Ñule->rule_str : "",

1278 
VTY_NEWLINE
);

1279 i‡(
ödex
->
√xåm
)

1280 
	`vty_out
 (
vty
, " cÆ»%s%s", 
ödex
->
√xåm
, 
VTY_NEWLINE
);

1281 i‡(
ödex
->
exôpﬁicy
 =
RMAP_GOTO
)

1282 
	`vty_out
 (
vty
, " on-m©ch gŸÿ%d%s", 
ödex
->
√xçªf
, 
VTY_NEWLINE
);

1283 i‡(
ödex
->
exôpﬁicy
 =
RMAP_NEXT
)

1284 
	`vty_out
 (
vty
," on-m©chÇext%s", 
VTY_NEWLINE
);

1286 
wrôe
++;

1288  
wrôe
;

1289 
	}
}

1292 
cmd_node
 
	grm≠_node
 =

1294 
RMAP_NODE
,

1301 
	$rouã_m≠_öô_vty
 ()

1304 
	`ö°Æl_node
 (&
rm≠_node
, 
rouã_m≠_c⁄fig_wrôe
);

1307 
	`ö°Æl_deÁu…
 (
RMAP_NODE
);

1308 
	`ö°Æl_ñemít
 (
CONFIG_NODE
, &
rouã_m≠_cmd
);

1309 
	`ö°Æl_ñemít
 (
CONFIG_NODE
, &
no_rouã_m≠_cmd
);

1310 
	`ö°Æl_ñemít
 (
CONFIG_NODE
, &
no_rouã_m≠_Æl_cmd
);

1313 
	`ö°Æl_ñemít
 (
RMAP_NODE
, &
rouã_m≠_cmd
);

1314 
	`ö°Æl_ñemít
 (
RMAP_NODE
, &
rm≠_⁄m©ch_√xt_cmd
);

1315 
	`ö°Æl_ñemít
 (
RMAP_NODE
, &
no_rm≠_⁄m©ch_√xt_cmd
);

1316 
	`ö°Æl_ñemít
 (
RMAP_NODE
, &
rm≠_⁄m©ch_gŸo_cmd
);

1317 
	`ö°Æl_ñemít
 (
RMAP_NODE
, &
no_rm≠_⁄m©ch_gŸo_cmd
);

1320 
	`ö°Æl_ñemít
 (
RMAP_NODE
, &
rm≠_c⁄töue_cmd
);

1321 
	`ö°Æl_ñemít
 (
RMAP_NODE
, &
no_rm≠_c⁄töue_cmd
);

1322 
	`ö°Æl_ñemít
 (
RMAP_NODE
, &
rm≠_c⁄töue_ödex_cmd
);

1325 
	`ö°Æl_ñemít
 (
RMAP_NODE
, &
rm≠_ˇŒ_cmd
);

1326 
	`ö°Æl_ñemít
 (
RMAP_NODE
, &
no_rm≠_ˇŒ_cmd
);

1329 
	`ö°Æl_ñemít
 (
RMAP_NODE
, &
rm≠_des¸ùti⁄_cmd
);

1330 
	`ö°Æl_ñemít
 (
RMAP_NODE
, &
no_rm≠_des¸ùti⁄_cmd
);

1333 
	`ö°Æl_ñemít
 (
ENABLE_NODE
, &
rm≠_show_«me_cmd
);

1334 
	}
}

	@routemap.h

22 #i‚de‡
_ZEBRA_ROUTEMAP_H


23 
	#_ZEBRA_ROUTEMAP_H


	)

26 
	erouã_m≠_ty≥


28 
	mRMAP_PERMIT
,

29 
	mRMAP_DENY
,

30 
	mRMAP_ANY


35 
	mRMAP_MATCH
,

36 
	mRMAP_DENYMATCH
,

37 
	mRMAP_NOMATCH
,

38 
	mRMAP_ERROR
,

39 
	mRMAP_OKAY


40 } 
	trouã_m≠_ªsu…_t
;

44 
	mRMAP_RIP
,

45 
	mRMAP_RIPNG
,

46 
	mRMAP_BABEL
,

47 
	mRMAP_OSPF
,

48 
	mRMAP_OSPF6
,

49 
	mRMAP_BGP
,

50 
	mRMAP_ZEBRA


51 } 
	trouã_m≠_obje˘_t
;

55 
	mRMAP_EXIT
,

56 
	mRMAP_GOTO
,

57 
	mRMAP_NEXT


58 } 
	trouã_m≠_íd_t
;

62 
	mRMAP_EVENT_SET_ADDED
,

63 
	mRMAP_EVENT_SET_DELETED
,

64 
	mRMAP_EVENT_SET_REPLACED
,

65 
	mRMAP_EVENT_MATCH_ADDED
,

66 
	mRMAP_EVENT_MATCH_DELETED
,

67 
	mRMAP_EVENT_MATCH_REPLACED
,

68 
	mRMAP_EVENT_INDEX_ADDED
,

69 
	mRMAP_EVENT_INDEX_DELETED


70 } 
	trouã_m≠_evít_t
;

73 
	#RMAP_RECURSION_LIMIT
 10

	)

76 
	srouã_m≠_ruÀ_cmd


79 c⁄° *
	m°r
;

82 
rouã_m≠_ªsu…_t
 (*
func_≠∂y
)(*, 
	m¥efix
 *,

83 
	mrouã_m≠_obje˘_t
, *);

86 *(*
	mfunc_compûe
)(const *);

89 (*
	mfunc_‰ì
)(*);

96 
	mRMAP_RULE_MISSING
 = 1,

99 
	mRMAP_COMPILE_ERROR


103 
	srouã_m≠_ruÀ_li°


105 
rouã_m≠_ruÀ
 *
	mhód
;

106 
rouã_m≠_ruÀ
 *
	mèû
;

110 
	srouã_m≠_ödex


112 
rouã_m≠
 *
	mm≠
;

113 *
	mdes¸ùti⁄
;

116 
	m¥ef
;

119 
rouã_m≠_ty≥
 
	mty≥
;

122 
rouã_m≠_íd_t
 
	mexôpﬁicy
;

125 
	m√xçªf
;

128 *
	m√xåm
;

131 
rouã_m≠_ruÀ_li°
 
	mm©ch_li°
;

132 
rouã_m≠_ruÀ_li°
 
	m£t_li°
;

135 
rouã_m≠_ödex
 *
	m√xt
;

136 
rouã_m≠_ödex
 *
	m¥ev
;

140 
	srouã_m≠


143 *
	m«me
;

146 
rouã_m≠_ödex
 *
	mhód
;

147 
rouã_m≠_ödex
 *
	mèû
;

150 
rouã_m≠
 *
	m√xt
;

151 
rouã_m≠
 *
	m¥ev
;

155 
rouã_m≠_öô
 ();

156 
rouã_m≠_öô_vty
 ();

157 
rouã_m≠_föish
 ();

160 
rouã_m≠_add_m©ch
 (
rouã_m≠_ödex
 *
ödex
,

161 c⁄° *
m©ch_«me
,

162 c⁄° *
m©ch_¨g
);

165 
rouã_m≠_dñëe_m©ch
 (
rouã_m≠_ödex
 *
ödex
,

166 c⁄° *
m©ch_«me
,

167 c⁄° *
m©ch_¨g
);

170 
rouã_m≠_add_£t
 (
rouã_m≠_ödex
 *
ödex
,

171 c⁄° *
£t_«me
,

172 c⁄° *
£t_¨g
);

175 
rouã_m≠_dñëe_£t
 (
rouã_m≠_ödex
 *
ödex
,

176 c⁄° *
£t_«me
,

177 c⁄° *
£t_¨g
);

180 
rouã_m≠_ö°Æl_m©ch
 (
rouã_m≠_ruÀ_cmd
 *
cmd
);

183 
rouã_m≠_ö°Æl_£t
 (
rouã_m≠_ruÀ_cmd
 *
cmd
);

186 
rouã_m≠
 * 
rouã_m≠_lookup_by_«me
 (c⁄° *
«me
);

189 
rouã_m≠_ªsu…_t
 
rouã_m≠_≠∂y
 (
rouã_m≠
 *
m≠
,

190 
¥efix
 *,

191 
rouã_m≠_obje˘_t
 
obje˘_ty≥
,

192 *
obje˘
);

194 
rouã_m≠_add_hook
 ((*
func
) (const *));

195 
	`rouã_m≠_dñëe_hook
 ((*
func
) (const *));

196 
	`rouã_m≠_evít_hook
 ((*
func
Ë(
rouã_m≠_evít_t
, const *));

	@sigevent.c

22 
	~<zebø.h
>

23 
	~<sigevít.h
>

24 
	~<log.h
>

25 
	~<mem‹y.h
>

27 #ifde‡
SA_SIGINFO


28 #ifde‡
HAVE_UCONTEXT_H


29 #ifde‡
GNU_LINUX


31 #i‚de‡
__USE_GNU


32 
	#__USE_GNU


	)

35 
	~<uc⁄ãxt.h
>

41 
	squagga_sigevít_ma°î_t


43 
thªad
 *
	mt
;

45 
quagga_sig«l_t
 *
	msig«ls
;

46 
	msigc
;

48 vﬁ©ûê
sig_©omic_t
 
	mˇught
;

49 } 
	gsigma°î
;

55 
	$quagga_sig«l_h™dÀr
 (
signo
)

57 
i
;

58 
quagga_sig«l_t
 *
sig
;

60 
i
 = 0; i < 
sigma°î
.
sigc
; i++)

62 
sig
 = &(
sigma°î
.
sig«ls
[
i
]);

64 i‡(
sig
->
sig«l
 =
signo
)

65 
sig
->
ˇught
 = 1;

68 
sigma°î
.
ˇught
 = 1;

69 
	}
}

73 
	$quagga_sigevít_¥o˚ss
 ()

75 
quagga_sig«l_t
 *
sig
;

76 
i
;

77 #ifde‡
SIGEVENT_BLOCK_SIGNALS


79 
sig£t_t
 
√wmask
, 
ﬁdmask
;

86 
	`sigfûl£t
 (&
√wmask
);

87 
	`sigdñ£t
 (&
√wmask
, 
SIGTRAP
);

88 
	`sigdñ£t
 (&
√wmask
, 
SIGKILL
);

90 i‡–(
	`sig¥ocmask
 (
SIG_BLOCK
, &
√wmask
, &
ﬁdmask
)) < 0)

92 
	`zlog_îr
 ("quagga_signal_timer: couldnt block signals!");

97 i‡(
sigma°î
.
ˇught
 > 0)

99 
sigma°î
.
ˇught
 = 0;

104 
i
 = 0; i < 
sigma°î
.
sigc
; i++)

106 
sig
 = &(
sigma°î
.
sig«ls
[
i
]);

108 i‡(
sig
->
ˇught
 > 0)

110 
sig
->
ˇught
 = 0;

111 
sig
->
	`h™dÀr
 ();

116 #ifde‡
SIGEVENT_BLOCK_SIGNALS


117 i‡–
	`sig¥ocmask
 (
SIG_UNBLOCK
, &
ﬁdmask
, 
NULL
) < 0 );

122 
	}
}

124 #ifde‡
SIGEVENT_SCHEDULE_THREAD


127 
	$quagga_sig«l_timî
 (
thªad
 *
t
)

129 
quagga_sigevít_ma°î_t
 *
sigm
;

130 
quagga_sig«l_t
 *
sig
;

131 
i
;

133 
sigm
 = 
	`THREAD_ARG
 (
t
);

134 
sigm
->
t
 = 
	`thªad_add_timî
 (sigm->t->
ma°î
, 
quagga_sig«l_timî
, &
sigma°î
,

135 
QUAGGA_SIGNAL_TIMER_INTERVAL
);

136  
	`quagga_sigevít_¥o˚ss
 ();

137 
	}
}

143 
	$sig«l_£t
 (
signo
)

145 
ªt
;

146 
siga˘i⁄
 
sig
;

147 
siga˘i⁄
 
osig
;

149 
sig
.
ß_h™dÀr
 = &
quagga_sig«l_h™dÀr
;

150 
	`sigfûl£t
 (&
sig
.
ß_mask
);

151 
sig
.
ß_Êags
 = 0;

152 i‡(
signo
 =
SIGALRM
) {

153 #ifde‡
SA_INTERRUPT


154 
sig
.
ß_Êags
 |
SA_INTERRUPT
;

157 #ifde‡
SA_RESTART


158 
sig
.
ß_Êags
 |
SA_RESTART
;

162 
ªt
 = 
	`siga˘i⁄
 (
signo
, &
sig
, &
osig
);

163 i‡(
ªt
 < 0)

164  
ªt
;

167 
	}
}

169 #ifde‡
SA_SIGINFO


174 
	$¥ogøm_cou¡î
(*
c⁄ãxt
)

176 #ifde‡
HAVE_UCONTEXT_H


177 #ifde‡
GNU_LINUX


179 #i‡
	`deföed
(
REG_EIP
)

180 
	#REG_INDEX
 
REG_EIP


	)

181 #ñi‡
	`deföed
(
REG_RIP
)

182 
	#REG_INDEX
 
REG_RIP


	)

183 #ñi‡
	`deföed
(
__powîpc__
)

184 
	#REG_INDEX
 32

	)

186 #ñi‡
	`deföed
(
SUNOS_5
)

187 
	#REG_INDEX
 
REG_PC


	)

190 #ifde‡
REG_INDEX


191 #ifde‡
HAVE_UCONTEXT_T_UC_MCONTEXT_GREGS


192 
	#REGS
 
gªgs
[
REG_INDEX
]

	)

193 #ñi‡
	`deföed
(
HAVE_UCONTEXT_T_UC_MCONTEXT_UC_REGS
)

194 
	#REGS
 
uc_ªgs
->
gªgs
[
REG_INDEX
]

	)

198 #ifde‡
REGS


199 i‡(
c⁄ãxt
)

200  (*)(((
uc⁄ãxt_t
 *)
c⁄ãxt
)->
uc_mc⁄ãxt
.
REGS
);

201 #ñi‡
	`deföed
(
HAVE_UCONTEXT_T_UC_MCONTEXT_REGS__NIP
)

203 i‡(
c⁄ãxt
)

204  (*)(((
uc⁄ãxt_t
 *)
c⁄ãxt
)->
uc_mc⁄ãxt
.
ªgs
->
nù
);

208  
NULL
;

209 
	}
}

213 
__©åibuã__
 ((
n‹ëu∫
))

214 
exô_h™dÀr
(
signo


215 #ifde‡
SA_SIGINFO


216 , 
sigöfo_t
 *
sigöfo
, *
c⁄ãxt


220 
zlog_sig«l
(
signo
, "exiting..."

221 #ifde‡
SA_SIGINFO


222 , 
sigöfo
, 
¥ogøm_cou¡î
(
c⁄ãxt
)

225 
_exô
(128+
signo
);

228 
__©åibuã__
 ((
n‹ëu∫
))

229 
c‹e_h™dÀr
(
signo


230 #ifde‡
SA_SIGINFO


231 , 
sigöfo_t
 *
sigöfo
, *
c⁄ãxt


235 
zlog_sig«l
(
signo
, "aborting..."

236 #ifde‡
SA_SIGINFO


237 , 
sigöfo
, 
¥ogøm_cou¡î
(
c⁄ãxt
)

240 
ab‹t
();

244 
	$å≠_deÁu…_sig«ls
()

246 c⁄° 
c‹e_sig«ls
[] = {

247 
SIGQUIT
,

248 
SIGILL
,

249 #ifde‡
SIGEMT


250 
SIGEMT
,

252 
SIGFPE
,

253 
SIGBUS
,

254 
SIGSEGV
,

255 #ifde‡
SIGSYS


256 
SIGSYS
,

258 #ifde‡
SIGXCPU


259 
SIGXCPU
,

261 #ifde‡
SIGXFSZ


262 
SIGXFSZ
,

265 c⁄° 
exô_sig«ls
[] = {

266 
SIGHUP
,

267 
SIGINT
,

268 
SIGALRM
,

269 
SIGTERM
,

270 
SIGUSR1
,

271 
SIGUSR2
,

272 #ifde‡
SIGPOLL


273 
SIGPOLL
,

275 #ifde‡
SIGVTALRM


276 
SIGVTALRM
,

278 #ifde‡
SIGSTKFLT


279 
SIGSTKFLT
,

282 c⁄° 
ign‹e_sig«ls
[] = {

283 
SIGPIPE
,

286 c⁄° *
sigs
;

287 
u_öt
 
nsigs
;

288 (*
h™dÀr
)(
signo


289 #ifde‡
SA_SIGINFO


290 , 
sigöfo_t
 *
öfo
, *
c⁄ãxt


293 } 
sigm≠
[] = {

294 { 
c‹e_sig«ls
, 
	`¨øy_size
(c‹e_sig«ls), 
c‹e_h™dÀr
},

295 { 
exô_sig«ls
, 
	`¨øy_size
”xô_sig«ls), 
exô_h™dÀr
},

296 { 
ign‹e_sig«ls
, 
	`¨øy_size
(ign‹e_sig«ls), 
NULL
},

298 
u_öt
 
i
;

300 
i
 = 0; i < 
	`¨øy_size
(
sigm≠
); i++)

302 
u_öt
 
j
;

304 
j
 = 0; j < 
sigm≠
[
i
].
nsigs
; j++)

306 
siga˘i⁄
 
ﬂ˘
;

307 i‡((
	`siga˘i⁄
(
sigm≠
[
i
].
sigs
[
j
],
NULL
,&
ﬂ˘
) == 0) &&

308 (
ﬂ˘
.
ß_h™dÀr
 =
SIG_DFL
))

310 
siga˘i⁄
 
a˘
;

311 
	`sigfûl£t
 (&
a˘
.
ß_mask
);

312 i‡(
sigm≠
[
i
].
h™dÀr
 =
NULL
)

314 
a˘
.
ß_h™dÀr
 = 
SIG_IGN
;

315 
a˘
.
ß_Êags
 = 0;

319 #ifde‡
SA_SIGINFO


321 
a˘
.
ß_siga˘i⁄
 = 
sigm≠
[
i
].
h™dÀr
;

322 
a˘
.
ß_Êags
 = 
SA_SIGINFO
;

324 
a˘
.
ß_h™dÀr
 = 
sigm≠
[
i
].
h™dÀr
;

325 
a˘
.
ß_Êags
 = 0;

328 i‡(
	`siga˘i⁄
(
sigm≠
[
i
].
sigs
[
j
],&
a˘
,
NULL
) < 0)

329 
	`zlog_w¨n
("UnableÅo set signal handler for signal %d: %s",

330 
sigm≠
[
i
].
sigs
[
j
],
	`ß„_°ªº‹
(
î∫o
));

335 
	}
}

338 
	$sig«l_öô
 (
thªad_ma°î
 *
m
, 
sigc
,

339 
quagga_sig«l_t
 
sig«ls
[])

342 
i
 = 0;

343 
quagga_sig«l_t
 *
sig
;

347 
	`å≠_deÁu…_sig«ls
();

349 
i
 < 
sigc
)

351 
sig
 = &
sig«ls
[
i
];

352 i‡–
	`sig«l_£t
 (
sig
->
sig«l
) < 0 )

353 
	`exô
 (-1);

354 
i
++;

357 
sigma°î
.
sigc
 = sigc;

358 
sigma°î
.
sig«ls
 = signals;

360 #ifde‡
SIGEVENT_SCHEDULE_THREAD


361 
sigma°î
.
t
 =

362 
	`thªad_add_timî
 (
m
, 
quagga_sig«l_timî
, &
sigma°î
,

363 
QUAGGA_SIGNAL_TIMER_INTERVAL
);

365 
	}
}

	@sigevent.h

24 #i‚de‡
_QUAGGA_SIGNAL_H


25 
	#_QUAGGA_SIGNAL_H


	)

27 
	~<thªad.h
>

29 
	#QUAGGA_SIGNAL_TIMER_INTERVAL
 2L

	)

31 
	squagga_sig«l_t


33 
	msig«l
;

34 (*
	mh™dÀr
) ();

36 vﬁ©ûê
sig_©omic_t
 
	mˇught
;

46 
sig«l_öô
 (
thªad_ma°î
 *
m
, 
sigc
,

47 
quagga_sig«l_t
 *
sig«ls
);

50 
quagga_sigevít_¥o˚ss
 ();

	@smux.c

22 
	~<zebø.h
>

24 #i‡
deföed
 
HAVE_SNMP
 && deföed 
SNMP_SMUX


25 
	~<√t-¢mp/√t-¢mp-c⁄fig.h
>

26 
	~<√t-¢mp/√t-¢mp-ö˛udes.h
>

28 
	~"log.h
"

29 
	~"thªad.h
"

30 
	~"lökli°.h
"

31 
	~"comm™d.h
"

32 
	~<lib/vîsi⁄.h
>

33 
	~"mem‹y.h
"

34 
	~"sockuni⁄.h
"

35 
	~"smux.h
"

37 
	#SMUX_PORT_DEFAULT
 199

	)

39 
	#SMUXMAXPKTSIZE
 1500

	)

40 
	#SMUXMAXSTRLEN
 256

	)

42 
	#SMUX_OPEN
 (
ASN_APPLICATION
 | 
ASN_CONSTRUCTOR
 | 0)

	)

43 
	#SMUX_CLOSE
 (
ASN_APPLICATION
 | 
ASN_PRIMITIVE
 | 1)

	)

44 
	#SMUX_RREQ
 (
ASN_APPLICATION
 | 
ASN_CONSTRUCTOR
 | 2)

	)

45 
	#SMUX_RRSP
 (
ASN_APPLICATION
 | 
ASN_PRIMITIVE
 | 3)

	)

46 
	#SMUX_SOUT
 (
ASN_APPLICATION
 | 
ASN_PRIMITIVE
 | 4)

	)

48 
	#SMUX_GET
 (
ASN_CONTEXT
 | 
ASN_CONSTRUCTOR
 | 0)

	)

49 
	#SMUX_GETNEXT
 (
ASN_CONTEXT
 | 
ASN_CONSTRUCTOR
 | 1)

	)

50 
	#SMUX_GETRSP
 (
ASN_CONTEXT
 | 
ASN_CONSTRUCTOR
 | 2)

	)

51 
	#SMUX_SET
 (
ASN_CONTEXT
 | 
ASN_CONSTRUCTOR
 | 3)

	)

52 
	#SMUX_TRAP
 (
ASN_CONTEXT
 | 
ASN_CONSTRUCTOR
 | 4)

	)

54 
	#SMUX_MAX_FAILURE
 3

	)

57 
	ssubåì


60 
oid
 
	m«me
[
MAX_OID_LEN
];

61 
u_ch¨
 
	m«me_Àn
;

64 
v¨übÀ
 *
	mv¨übÀs
;

67 
	mv¨übÀs_num
;

70 
	mv¨übÀs_width
;

73 
	mªgi°îed
;

76 
	#mö
(
A
,
B
Ë((AË< (BË? (AË: (B))

	)

78 
	esmux_evít
 {
	mSMUX_SCHEDULE
, 
	mSMUX_CONNECT
, 
	mSMUX_READ
};

80 
smux_evít
 (smux_event, );

84 
	gsmux_sock
 = -1;

87 
li°
 *
	gåìli°
;

90 
oid
 *
	gsmux_oid
 = 
NULL
;

91 
size_t
 
	gsmux_oid_Àn
;

94 *
	gsmux_∑sswd
 = 
NULL
;

97 
thªad
 *
	gsmux_ªad_thªad
;

100 
thªad
 *
	gsmux_c⁄√˘_thªad
;

103 
	gdebug_smux
 = 0;

106 
	gÁû
 = 0;

109 
cmd_node
 
	gsmux_node
 =

111 
SMUX_NODE
,

116 
thªad_ma°î
 *
	gma°î
;

119 
	$oid_com∑ª_∑π
 (
oid
 *
o1
, 
o1_Àn
, oid *
o2
, 
o2_Àn
)

121 
i
;

123 
i
 = 0; i < 
	`mö
 (
o1_Àn
, 
o2_Àn
); i++)

125 i‡(
o1
[
i
] < 
o2
[i])

127 i‡(
o1
[
i
] > 
o2
[i])

130 i‡(
o1_Àn
 < 
o2_Àn
)

134 
	}
}

137 
	$smux_oid_dump
 (c⁄° *
¥efix
, c⁄° 
oid
 *oid, 
size_t
 
oid_Àn
)

139 
i
;

140 
fú°
 = 1;

141 
buf
[
MAX_OID_LEN
 * 3];

143 
buf
[0] = '\0';

145 
i
 = 0; i < 
oid_Àn
; i++)

147 
	`•rötf
 (
buf
 + 
	`°æí
 (buf), "%s%d", 
fú°
 ? "" : ".", (Ë
oid
[
i
]);

148 
fú°
 = 0;

150 
	`zlog_debug
 ("%s: %s", 
¥efix
, 
buf
);

151 
	}
}

154 
	$smux_sockë
 ()

156 
ªt
;

157 #ifde‡
HAVE_IPV6


158 
addröfo
 
höts
, *
ªs0
, *
ªs
;

159 
gai
;

161 
sockaddr_ö
 
£rv
;

162 
£rvít
 *
•
;

164 
sock
 = 0;

166 #ifde‡
HAVE_IPV6


167 
	`mem£t
(&
höts
, 0, (hints));

168 
höts
.
ai_Ámûy
 = 
PF_UNSPEC
;

169 
höts
.
ai_sockty≥
 = 
SOCK_STREAM
;

170 
gai
 = 
	`gëaddröfo
(
NULL
, "smux", &
höts
, &
ªs0
);

171 i‡(
gai
 =
EAI_SERVICE
)

173 
£rvbuf
[
NI_MAXSERV
];

174 
	`•rötf
(
£rvbuf
,"%d",
SMUX_PORT_DEFAULT
);

175 
£rvbuf
[ (servbuf) - 1] = '\0';

176 
gai
 = 
	`gëaddröfo
(
NULL
, 
£rvbuf
, &
höts
, &
ªs0
);

178 i‡(
gai
)

180 
	`zlog_w¨n
("CannotÜocateÜoopback service smux");

183 
ªs
=
ªs0
;Ñes;ÑesÙes->
ai_√xt
)

185 i‡(
ªs
->
ai_Ámûy
 !
AF_INET


186 #ifde‡
HAVE_IPV6


187 && 
ªs
->
ai_Ámûy
 !
AF_INET6


192 
sock
 = 
	`sockë
(
ªs
->
ai_Ámûy
,Ñes->
ai_sockty≥
,Ñes->
ai_¥Ÿocﬁ
);

193 i‡(
sock
 < 0)

195 
	`sock›t_ªu£addr
 (
sock
);

196 
	`sock›t_ªu£p‹t
 (
sock
);

197 
ªt
 = 
	`c⁄√˘
 (
sock
, 
ªs
->
ai_addr
,Ñes->
ai_addæí
);

198 i‡(
ªt
 < 0)

200 
	`˛o£
(
sock
);

201 
sock
 = -1;

206 
	`‰ìaddröfo
(
ªs0
);

207 i‡(
sock
 < 0)

208 
	`zlog_w¨n
 ("Can't connectÅo SNMPágent with SMUX");

210 
sock
 = 
	`sockë
 (
AF_INET
, 
SOCK_STREAM
, 0);

211 i‡(
sock
 < 0)

213 
	`zlog_w¨n
 ("Can't make socket for SNMP");

217 
	`mem£t
 (&
£rv
, 0,  (
sockaddr_ö
));

218 
£rv
.
sö_Ámûy
 = 
AF_INET
;

219 #ifde‡
HAVE_STRUCT_SOCKADDR_IN_SIN_LEN


220 
£rv
.
sö_Àn
 =  (
sockaddr_ö
);

223 
•
 = 
	`gë£rvby«me
 ("smux", "tcp");

224 i‡(
•
 !
NULL
)

225 
£rv
.
sö_p‹t
 = 
•
->
s_p‹t
;

227 
£rv
.
sö_p‹t
 = 
	`ht⁄s
 (
SMUX_PORT_DEFAULT
);

229 
£rv
.
sö_addr
.
s_addr
 = 
	`ht⁄l
 (
INADDR_LOOPBACK
);

231 
	`sock›t_ªu£addr
 (
sock
);

232 
	`sock›t_ªu£p‹t
 (
sock
);

234 
ªt
 = 
	`c⁄√˘
 (
sock
, (
sockaddr
 *Ë&
£rv
,  (
sockaddr_ö
));

235 i‡(
ªt
 < 0)

237 
	`˛o£
 (
sock
);

238 
smux_sock
 = -1;

239 
	`zlog_w¨n
 ("Can't connectÅo SNMPágent with SMUX");

243  
sock
;

244 
	}
}

247 
	$smux_gëª•_£nd
 (
oid
 
objid
[], 
size_t
 
objid_Àn
, 
ªqid
, 
îr°©
,

248 
îrödex
, 
u_ch¨
 
vÆ_ty≥
, *
¨g
, 
size_t
 
¨g_Àn
)

250 
u_ch¨
 
buf
[
BUFSIZ
];

251 
u_ch¨
 *
±r
, *
h1
, *
h1e
, *
h2
, *
h2e
;

252 
size_t
 
Àn
, 
Àngth
;

254 
±r
 = 
buf
;

255 
Àn
 = 
BUFSIZ
;

256 
Àngth
 = 
Àn
;

258 i‡(
debug_smux
)

260 
	`zlog_debug
 ("SMUX GETRSP send");

261 
	`zlog_debug
 ("SMUX GETRSPÑeqid: %ld", 
ªqid
);

264 
h1
 = 
±r
;

266 
±r
 = 
	`a¢_buûd_£quí˚
 (±r, &
Àn
, (
u_ch¨
Ë
SMUX_GETRSP
, 0);

267 
h1e
 = 
±r
;

269 
±r
 = 
	`a¢_buûd_öt
 (±r, &
Àn
,

270 (
u_ch¨
Ë(
ASN_UNIVERSAL
 | 
ASN_PRIMITIVE
 | 
ASN_INTEGER
),

271 &
ªqid
,  (reqid));

273 i‡(
debug_smux
)

274 
	`zlog_debug
 ("SMUX GETRSPÉº°©: %ld", 
îr°©
);

276 
±r
 = 
	`a¢_buûd_öt
 (±r, &
Àn
,

277 (
u_ch¨
Ë(
ASN_UNIVERSAL
 | 
ASN_PRIMITIVE
 | 
ASN_INTEGER
),

278 &
îr°©
,  (errstat));

279 i‡(
debug_smux
)

280 
	`zlog_debug
 ("SMUX GETRSPÉºödex: %ld", 
îrödex
);

282 
±r
 = 
	`a¢_buûd_öt
 (±r, &
Àn
,

283 (
u_ch¨
Ë(
ASN_UNIVERSAL
 | 
ASN_PRIMITIVE
 | 
ASN_INTEGER
),

284 &
îrödex
,  (errindex));

286 
h2
 = 
±r
;

288 
±r
 = 
	`a¢_buûd_£quí˚
 (±r, &
Àn
,

289 (
u_ch¨
)(
ASN_SEQUENCE
 | 
ASN_CONSTRUCTOR
),

291 
h2e
 = 
±r
;

293 
±r
 = 
	`¢mp_buûd_v¨_›
 (±r, 
objid
, &
objid_Àn
,

294 
vÆ_ty≥
, 
¨g_Àn
, 
¨g
, &
Àn
);

297 
	`a¢_buûd_£quí˚
(
h2
,&
Àngth
,(
u_ch¨
)(
ASN_SEQUENCE
|
ASN_CONSTRUCTOR
),
±r
-
h2e
);

300 
	`a¢_buûd_£quí˚
(
h1
,&
Àngth
,(
u_ch¨
)
SMUX_GETRSP
,
±r
-
h1e
);

302 i‡(
debug_smux
)

303 
	`zlog_debug
 ("SMUX gëª• síd: %td", (
±r
 - 
buf
));

305 
	`£nd
 (
smux_sock
, 
buf
, (
±r
 - buf), 0);

306 
	}
}

308 
u_ch¨
 *

309 
	$smux_v¨
 (
u_ch¨
 *
±r
, 
size_t
 
Àn
, 
oid
 
objid
[], size_à*
objid_Àn
,

310 
size_t
 *
v¨_vÆ_Àn
,

311 
u_ch¨
 *
v¨_vÆ_ty≥
,

312 **
v¨_vÆue
)

314 
u_ch¨
 
ty≥
;

315 
u_ch¨
 
vÆ_ty≥
;

316 
size_t
 
vÆ_Àn
;

317 
u_ch¨
 *
vÆ
;

319 i‡(
debug_smux
)

320 
	`zlog_debug
 ("SMUX v¨Ö¨£:Üí %zd", 
Àn
);

323 
±r
 = 
	`a¢_∑r£_hódî
 (±r, &
Àn
, &
ty≥
);

325 i‡(
debug_smux
)

327 
	`zlog_debug
 ("SMUX v¨Ö¨£:Åy≥ %dÜí %zd", 
ty≥
, 
Àn
);

328 
	`zlog_debug
 ("SMUX varÖarse:Åype must be %d",

329 (
ASN_SEQUENCE
 | 
ASN_CONSTRUCTOR
));

333 *
objid_Àn
 = 
MAX_OID_LEN
;

334 
±r
 = 
	`¢mp_∑r£_v¨_›
’å, 
objid
, 
objid_Àn
, &
vÆ_ty≥
,

335 &
vÆ_Àn
, &
vÆ
, &
Àn
);

337 i‡(
v¨_vÆ_Àn
)

338 *
v¨_vÆ_Àn
 = 
vÆ_Àn
;

340 i‡(
v¨_vÆue
)

341 *
v¨_vÆue
 = (*Ë
vÆ
;

343 i‡(
v¨_vÆ_ty≥
)

344 *
v¨_vÆ_ty≥
 = 
vÆ_ty≥
;

347 i‡(
debug_smux
)

348 
	`smux_oid_dump
 ("Reque° OID", 
objid
, *
objid_Àn
);

350 i‡(
debug_smux
)

351 
	`zlog_debug
 ("SMUX vÆ_ty≥: %d", 
vÆ_ty≥
);

354 i‡(
debug_smux
)

355 
vÆ_ty≥
)

357 
ASN_NULL
:

360 
	`zlog_debug
 ("ASN_NULL");

363 
ASN_INTEGER
:

364 
	`zlog_debug
 ("ASN_INTEGER");

366 
ASN_COUNTER
:

367 
ASN_GAUGE
:

368 
ASN_TIMETICKS
:

369 
ASN_UINTEGER
:

370 
	`zlog_debug
 ("ASN_COUNTER");

372 
ASN_COUNTER64
:

373 
	`zlog_debug
 ("ASN_COUNTER64");

375 
ASN_IPADDRESS
:

376 
	`zlog_debug
 ("ASN_IPADDRESS");

378 
ASN_OCTET_STR
:

379 
	`zlog_debug
 ("ASN_OCTET_STR");

381 
ASN_OPAQUE
:

382 
ASN_NSAP
:

383 
ASN_OBJECT_ID
:

384 
	`zlog_debug
 ("ASN_OPAQUE");

386 
SNMP_NOSUCHOBJECT
:

387 
	`zlog_debug
 ("SNMP_NOSUCHOBJECT");

389 
SNMP_NOSUCHINSTANCE
:

390 
	`zlog_debug
 ("SNMP_NOSUCHINSTANCE");

392 
SNMP_ENDOFMIBVIEW
:

393 
	`zlog_debug
 ("SNMP_ENDOFMIBVIEW");

395 
ASN_BIT_STR
:

396 
	`zlog_debug
 ("ASN_BIT_STR");

399 
	`zlog_debug
 ("UnknownÅype");

402  
±r
;

403 
	}
}

410 
	$smux_£t
 (
oid
 *
ªqid
, 
size_t
 *
ªqid_Àn
,

411 
u_ch¨
 
vÆ_ty≥
, *
vÆ
, 
size_t
 
vÆ_Àn
, 
a˘i⁄
)

413 
j
;

414 
subåì
 *subtree;

415 
v¨übÀ
 *
v
;

416 
subªsu…
;

417 
oid
 *
suffix
;

418 
size_t
 
suffix_Àn
;

419 
ªsu…
;

420 
u_ch¨
 *
°©P
 = 
NULL
;

421 
WrôeMëhod
 *
wrôe_mëhod
 = 
NULL
;

422 
li°node
 *
node
, *
¬ode
;

425 
	`ALL_LIST_ELEMENTS
 (
åìli°
, 
node
, 
¬ode
, 
subåì
))

427 
subªsu…
 = 
	`oid_com∑ª_∑π
 (
ªqid
, *
ªqid_Àn
,

428 
subåì
->
«me
, subåì->
«me_Àn
);

431 i‡(
subªsu…
 == 0)

434 
suffix
 = 
ªqid
 + 
subåì
->
«me_Àn
;

435 
suffix_Àn
 = *
ªqid_Àn
 - 
subåì
->
«me_Àn
;

436 
ªsu…
 = 
subªsu…
;

439 
j
 = 0; j < 
subåì
->
v¨übÀs_num
; j++)

441 
v
 = &
subåì
->
v¨übÀs
[
j
];

444 
ªsu…
 = 
	`oid_com∑ª_∑π
 (
suffix
, 
suffix_Àn
,

445 
v
->
«me
, v->
«mñí
);

448 i‡(
ªsu…
 == 0)

450 i‡(
debug_smux
)

451 
	`zlog_debug
 ("SMUX fun˘i⁄ cÆ»ödex i†%d", 
v
->
magic
);

453 
°©P
 = (*
v
->
födV¨
Ë(v, 
suffix
, &
suffix_Àn
, 1,

454 &
vÆ_Àn
, &
wrôe_mëhod
);

456 i‡(
wrôe_mëhod
)

458  (*
wrôe_mëhod
)(
a˘i⁄
, 
vÆ
, 
vÆ_ty≥
, 
vÆ_Àn
,

459 
°©P
, 
suffix
, 
suffix_Àn
);

463  
SNMP_ERR_READONLY
;

469 i‡(
ªsu…
 < 0)

470  
SNMP_ERR_NOSUCHNAME
;

474  
SNMP_ERR_NOSUCHNAME
;

475 
	}
}

478 
	$smux_gë
 (
oid
 *
ªqid
, 
size_t
 *
ªqid_Àn
, 
exa˘
,

479 
u_ch¨
 *
vÆ_ty≥
,**
vÆ
, 
size_t
 *
vÆ_Àn
)

481 
j
;

482 
subåì
 *subtree;

483 
v¨übÀ
 *
v
;

484 
subªsu…
;

485 
oid
 *
suffix
;

486 
size_t
 
suffix_Àn
;

487 
ªsu…
;

488 
WrôeMëhod
 *
wrôe_mëhod
=
NULL
;

489 
li°node
 *
node
, *
¬ode
;

492 
	`ALL_LIST_ELEMENTS
 (
åìli°
, 
node
, 
¬ode
,
subåì
))

494 
subªsu…
 = 
	`oid_com∑ª_∑π
 (
ªqid
, *
ªqid_Àn
,

495 
subåì
->
«me
, subåì->
«me_Àn
);

498 i‡(
subªsu…
 == 0)

501 
suffix
 = 
ªqid
 + 
subåì
->
«me_Àn
;

502 
suffix_Àn
 = *
ªqid_Àn
 - 
subåì
->
«me_Àn
;

503 
ªsu…
 = 
subªsu…
;

506 
j
 = 0; j < 
subåì
->
v¨übÀs_num
; j++)

508 
v
 = &
subåì
->
v¨übÀs
[
j
];

511 
ªsu…
 = 
	`oid_com∑ª_∑π
 (
suffix
, 
suffix_Àn
,

512 
v
->
«me
, v->
«mñí
);

515 i‡(
ªsu…
 == 0)

517 i‡(
debug_smux
)

518 
	`zlog_debug
 ("SMUX fun˘i⁄ cÆ»ödex i†%d", 
v
->
magic
);

520 *
vÆ
 = (*
v
->
födV¨
Ë(v, 
suffix
, &
suffix_Àn
, 
exa˘
,

521 
vÆ_Àn
, &
wrôe_mëhod
);

524 i‡(*
vÆ
 =
NULL
)

525  
SNMP_NOSUCHINSTANCE
;

528 *
vÆ_ty≥
 = 
v
->
ty≥
;

535 i‡(
ªsu…
 < 0)

536  
SNMP_ERR_NOSUCHNAME
;

540  
SNMP_ERR_NOSUCHNAME
;

541 
	}
}

544 
	$smux_gë√xt
 (
oid
 *
ªqid
, 
size_t
 *
ªqid_Àn
, 
exa˘
,

545 
u_ch¨
 *
vÆ_ty≥
,**
vÆ
, 
size_t
 *
vÆ_Àn
)

547 
j
;

548 
oid
 
ßve
[
MAX_OID_LEN
];

549 
ßvñí
 = 0;

550 
subåì
 *subtree;

551 
v¨übÀ
 *
v
;

552 
subªsu…
;

553 
oid
 *
suffix
;

554 
size_t
 
suffix_Àn
;

555 
ªsu…
;

556 
WrôeMëhod
 *
wrôe_mëhod
=
NULL
;

557 
li°node
 *
node
, *
¬ode
;

561 
	`oid_c›y
 (
ßve
, 
ªqid
, *
ªqid_Àn
);

562 
ßvñí
 = *
ªqid_Àn
;

565 
	`ALL_LIST_ELEMENTS
 (
åìli°
, 
node
, 
¬ode
, 
subåì
))

567 
subªsu…
 = 
	`oid_com∑ª_∑π
 (
ªqid
, *
ªqid_Àn
,

568 
subåì
->
«me
, subåì->
«me_Àn
);

581 i‡(
subªsu…
 <= 0)

584 
suffix
 = 
ªqid
 + 
subåì
->
«me_Àn
;

585 
suffix_Àn
 = *
ªqid_Àn
 - 
subåì
->
«me_Àn
;

586 i‡(
subªsu…
 < 0)

588 
	`oid_c›y
(
ªqid
, 
subåì
->
«me
, subåì->
«me_Àn
);

589 *
ªqid_Àn
 = 
subåì
->
«me_Àn
;

591 
j
 = 0; j < 
subåì
->
v¨übÀs_num
; j++)

593 
ªsu…
 = 
subªsu…
;

594 
v
 = &
subåì
->
v¨übÀs
[
j
];

597 i‡(
ªsu…
 == 0)

598 
ªsu…
 = 
	`oid_com∑ª_∑π
 (
suffix
, 
suffix_Àn
,

599 
v
->
«me
, v->
«mñí
);

601 i‡(
ªsu…
 <= 0)

603 i‡(
debug_smux
)

604 
	`zlog_debug
 ("SMUX fun˘i⁄ cÆ»ödex i†%d", 
v
->
magic
);

605 if(
ªsu…
<0)

607 
	`oid_c›y
(
suffix
, 
v
->
«me
, v->
«mñí
);

608 
suffix_Àn
 = 
v
->
«mñí
;

610 *
vÆ
 = (*
v
->
födV¨
Ë(v, 
suffix
, &
suffix_Àn
, 
exa˘
,

611 
vÆ_Àn
, &
wrôe_mëhod
);

612 *
ªqid_Àn
 = 
suffix_Àn
 + 
subåì
->
«me_Àn
;

613 i‡(*
vÆ
)

615 *
vÆ_ty≥
 = 
v
->
ty≥
;

622 
	`mem˝y
 (
ªqid
, 
ßve
, 
ßvñí
 * (
oid
));

623 *
ªqid_Àn
 = 
ßvñí
;

625  
SNMP_ERR_NOSUCHNAME
;

626 
	}
}

629 
u_ch¨
 *

630 
	$smux_∑r£_gë_hódî
 (
u_ch¨
 *
±r
, 
size_t
 *
Àn
, *
ªqid
)

632 
u_ch¨
 
ty≥
;

633 
îr°©
;

634 
îrödex
;

637 
±r
 = 
	`a¢_∑r£_öt
 (±r, 
Àn
, &
ty≥
, 
ªqid
,  (*reqid));

639 i‡(
debug_smux
)

640 
	`zlog_debug
 ("SMUX GETÑeqid: %dÜí: %d", (Ë*
ªqid
, (Ë*
Àn
);

643 
±r
 = 
	`a¢_∑r£_öt
 (±r, 
Àn
, &
ty≥
, &
îr°©
,  (errstat));

645 i‡(
debug_smux
)

646 
	`zlog_debug
 ("SMUX GETÉº°© %ldÜí: %zd", 
îr°©
, *
Àn
);

649 
±r
 = 
	`a¢_∑r£_öt
 (±r, 
Àn
, &
ty≥
, &
îrödex
,  (errindex));

651 i‡(
debug_smux
)

652 
	`zlog_debug
 ("SMUX GETÉºödex %ldÜí: %zd", 
îrödex
, *
Àn
);

654  
±r
;

655 
	}
}

658 
	$smux_∑r£_£t
 (
u_ch¨
 *
±r
, 
size_t
 
Àn
, 
a˘i⁄
)

660 
ªqid
;

661 
oid
 oid[
MAX_OID_LEN
];

662 
size_t
 
oid_Àn
;

663 
u_ch¨
 
vÆ_ty≥
;

664 *
vÆ
;

665 
size_t
 
vÆ_Àn
;

666 
ªt
;

668 i‡(
debug_smux
)

669 
	`zlog_debug
 ("SMUX SET(%s) messageÖarse:Üen %zd",

670 (
RESERVE1
 =
a˘i⁄
Ë? "RESERVE1" : ((
FREE
 ==áction) ? "FREE" : "COMMIT"),

671 
Àn
);

674 
±r
 = 
	`smux_∑r£_gë_hódî
 (±r, &
Àn
, &
ªqid
);

677 
±r
 = 
	`smux_v¨
 (±r, 
Àn
, 
oid
, &
oid_Àn
, &
vÆ_Àn
, &
vÆ_ty≥
, &
vÆ
);

679 
ªt
 = 
	`smux_£t
 (
oid
, &
oid_Àn
, 
vÆ_ty≥
, 
vÆ
, 
vÆ_Àn
, 
a˘i⁄
);

680 i‡(
debug_smux
)

681 
	`zlog_debug
 ("SMUX SETÑë %d", 
ªt
);

684 i‡(
RESERVE1
 =
a˘i⁄
)

685 
	`smux_gëª•_£nd
 (
oid
, 
oid_Àn
, 
ªqid
, 
ªt
, 3, 
ASN_NULL
, 
NULL
, 0);

686 
	}
}

689 
	$smux_∑r£_gë
 (
u_ch¨
 *
±r
, 
size_t
 
Àn
, 
exa˘
)

691 
ªqid
;

692 
oid
 oid[
MAX_OID_LEN
];

693 
size_t
 
oid_Àn
;

694 
u_ch¨
 
vÆ_ty≥
;

695 *
vÆ
;

696 
size_t
 
vÆ_Àn
;

697 
ªt
;

699 i‡(
debug_smux
)

700 
	`zlog_debug
 ("SMUX GET mesßgê∑r£:Üí %zd", 
Àn
);

703 
±r
 = 
	`smux_∑r£_gë_hódî
 (±r, &
Àn
, &
ªqid
);

706 
±r
 = 
	`smux_v¨
 (±r, 
Àn
, 
oid
, &
oid_Àn
, 
NULL
, NULL, NULL);

709 i‡(
exa˘
)

710 
ªt
 = 
	`smux_gë
 (
oid
, &
oid_Àn
, 
exa˘
, &
vÆ_ty≥
, &
vÆ
, &
vÆ_Àn
);

712 
ªt
 = 
	`smux_gë√xt
 (
oid
, &
oid_Àn
, 
exa˘
, &
vÆ_ty≥
, &
vÆ
, &
vÆ_Àn
);

715 i‡(
ªt
 == 0)

716 
	`smux_gëª•_£nd
 (
oid
, 
oid_Àn
, 
ªqid
, 0, 0, 
vÆ_ty≥
, 
vÆ
, 
vÆ_Àn
);

718 
	`smux_gëª•_£nd
 (
oid
, 
oid_Àn
, 
ªqid
, 
ªt
, 3, 
ASN_NULL
, 
NULL
, 0);

719 
	}
}

723 
	$smux_∑r£_˛o£
 (
u_ch¨
 *
±r
, 
Àn
)

725 
ªas⁄
 = 0;

727 
Àn
--)

729 
ªas⁄
 = (ªas⁄ << 8Ë| (Ë*
±r
;

730 
±r
++;

732 
	`zlog_öfo
 ("SMUX_CLOSE wôhÑós⁄: %ld", 
ªas⁄
);

733 
	}
}

737 
	$smux_∑r£_º•
 (
u_ch¨
 *
±r
, 
size_t
 
Àn
)

739 
u_ch¨
 
vÆ
;

740 
îr°©
;

742 
±r
 = 
	`a¢_∑r£_öt
 (±r, &
Àn
, &
vÆ
, &
îr°©
,  (errstat));

744 i‡(
debug_smux
)

745 
	`zlog_debug
 ("SMUX_RRSP vÆue: %dÉº°©: %ld", 
vÆ
, 
îr°©
);

746 
	}
}

750 
	$smux_∑r£
 (
u_ch¨
 *
±r
, 
size_t
 
Àn
)

755 
u_ch¨
 
sout_ßve_buff
[
SMUXMAXPKTSIZE
];

756 
sout_ßve_Àn
 = 0;

758 
Àn_öcome
 = 
Àn
;

759 
u_ch¨
 
ty≥
;

760 
u_ch¨
 
rﬁlback
;

762 
rﬁlback
 = 
±r
[2];

764 
¥o˚ss_ª°
:

767 
±r
 = 
	`a¢_∑r£_hódî
 (±r, &
Àn
, &
ty≥
);

769 i‡(
debug_smux
)

770 
	`zlog_debug
 ("SMUX mesßgêª˚ivedÅy≥: %dÑe°Üí: %zd", 
ty≥
, 
Àn
);

772 
ty≥
)

774 
SMUX_OPEN
:

776 
	`zlog_w¨n
 ("SMUX_OPENÑeceived:Ñesetting connection.");

779 
SMUX_RREQ
:

781 
	`zlog_w¨n
 ("SMUX_RREQÑeceived:Ñesetting connection.");

784 
SMUX_SOUT
:

786 i‡(
debug_smux
)

787 
	`zlog_debug
 ("SMUX_SOUT(%s)", 
rﬁlback
 ? "rollback" : "commit");

789 i‡(
sout_ßve_Àn
 > 0)

791 
	`smux_∑r£_£t
 (
sout_ßve_buff
, 
sout_ßve_Àn
, 
rﬁlback
 ? 
FREE
 : 
COMMIT
);

792 
sout_ßve_Àn
 = 0;

795 
	`zlog_w¨n
 ("SMUX_SOUT sout_ßve_Àn=%d - invÆid", (Ë
sout_ßve_Àn
);

797 i‡(
Àn_öcome
 > 3)

809 
±r
++;

810 
Àn
 = 
Àn_öcome
 - 3;

811 
¥o˚ss_ª°
;

814 
SMUX_GETRSP
:

816 
	`zlog_w¨n
 ("SMUX_GETRSPÑeceived:Ñesetting connection.");

819 
SMUX_CLOSE
:

821 i‡(
debug_smux
)

822 
	`zlog_debug
 ("SMUX_CLOSE");

823 
	`smux_∑r£_˛o£
 (
±r
, 
Àn
);

826 
SMUX_RRSP
:

828 i‡(
debug_smux
)

829 
	`zlog_debug
 ("SMUX_RRSP");

830 
	`smux_∑r£_º•
 (
±r
, 
Àn
);

832 
SMUX_GET
:

834 i‡(
debug_smux
)

835 
	`zlog_debug
 ("SMUX_GET");

836 
	`smux_∑r£_gë
 (
±r
, 
Àn
, 1);

838 
SMUX_GETNEXT
:

840 i‡(
debug_smux
)

841 
	`zlog_debug
 ("SMUX_GETNEXT");

842 
	`smux_∑r£_gë
 (
±r
, 
Àn
, 0);

844 
SMUX_SET
:

846 i‡(
debug_smux
)

847 
	`zlog_debug
 ("SMUX_SET");

850 
	`mem˝y
 (
sout_ßve_buff
, 
±r
, 
Àn
);

851 
sout_ßve_Àn
 = 
Àn
;

852 
	`smux_∑r£_£t
 (
±r
, 
Àn
, 
RESERVE1
);

855 
	`zlog_öfo
 ("Unknow¿ty≥: %d", 
ty≥
);

859 
	}
}

863 
	$smux_ªad
 (
thªad
 *
t
)

865 
sock
;

866 
Àn
;

867 
u_ch¨
 
buf
[
SMUXMAXPKTSIZE
];

868 
ªt
;

871 
sock
 = 
	`THREAD_FD
 (
t
);

872 
smux_ªad_thªad
 = 
NULL
;

874 i‡(
debug_smux
)

875 
	`zlog_debug
 ("SMUXÑead start");

878 
Àn
 = 
	`ªcv
 (
sock
, 
buf
, 
SMUXMAXPKTSIZE
, 0);

880 i‡(
Àn
 < 0)

882 
	`zlog_w¨n
 ("C™'àªadáŒ SMUXÖackë: %s", 
	`ß„_°ªº‹
 (
î∫o
));

883 
	`˛o£
 (
sock
);

884 
smux_sock
 = -1;

885 
	`smux_evít
 (
SMUX_CONNECT
, 0);

889 i‡(
Àn
 == 0)

891 
	`zlog_w¨n
 ("SMUX c⁄√˘i⁄ clo£d: %d", 
sock
);

892 
	`˛o£
 (
sock
);

893 
smux_sock
 = -1;

894 
	`smux_evít
 (
SMUX_CONNECT
, 0);

898 i‡(
debug_smux
)

899 
	`zlog_debug
 ("SMUXÑódÜí: %d", 
Àn
);

902 
ªt
 = 
	`smux_∑r£
 (
buf
, 
Àn
);

904 i‡(
ªt
 < 0)

906 
	`˛o£
 (
sock
);

907 
smux_sock
 = -1;

908 
	`smux_evít
 (
SMUX_CONNECT
, 0);

913 
	`smux_evít
 (
SMUX_READ
, 
sock
);

916 
	}
}

919 
	$smux_›í
 (
sock
)

921 
u_ch¨
 
buf
[
BUFSIZ
];

922 
u_ch¨
 *
±r
;

923 
size_t
 
Àn
;

924 
vîsi⁄
;

925 c⁄° 
¥og«me
[] = 
QUAGGA_PROGNAME
 "-" 
QUAGGA_VERSION
;

927 i‡(
debug_smux
)

929 
	`smux_oid_dump
 ("SMUX o≥¿oid", 
smux_oid
, 
smux_oid_Àn
);

930 
	`zlog_debug
 ("SMUX o≥¿¥og«me: %s", 
¥og«me
);

931 
	`zlog_debug
 ("SMUX o≥¿∑ssw‹d: %s", 
smux_∑sswd
);

934 
±r
 = 
buf
;

935 
Àn
 = 
BUFSIZ
;

938 
±r
 = 
	`a¢_buûd_hódî
 (±r, &
Àn
, (
u_ch¨
Ë
SMUX_OPEN
, 0);

941 
vîsi⁄
 = 0;

942 
±r
 = 
	`a¢_buûd_öt
 (±r, &
Àn
,

943 (
u_ch¨
)(
ASN_UNIVERSAL
 | 
ASN_PRIMITIVE
 | 
ASN_INTEGER
),

944 &
vîsi⁄
,  (version));

947 
±r
 = 
	`a¢_buûd_objid
 (±r, &
Àn
,

948 (
u_ch¨
)

949 (
ASN_UNIVERSAL
 | 
ASN_PRIMITIVE
 | 
ASN_OBJECT_ID
),

950 
smux_oid
, 
smux_oid_Àn
);

953 
±r
 = 
	`a¢_buûd_°rög
 (±r, &
Àn
,

954 (
u_ch¨
)

955 (
ASN_UNIVERSAL
 | 
ASN_PRIMITIVE
 | 
ASN_OCTET_STR
),

956 (c⁄° 
u_ch¨
 *Ë
¥og«me
, 
	`°æí
 (progname));

959 
±r
 = 
	`a¢_buûd_°rög
 (±r, &
Àn
,

960 (
u_ch¨
)

961 (
ASN_UNIVERSAL
 | 
ASN_PRIMITIVE
 | 
ASN_OCTET_STR
),

962 (
u_ch¨
 *)
smux_∑sswd
, 
	`°æí
 (smux_passwd));

965 
Àn
 = 
BUFSIZ
;

966 
	`a¢_buûd_hódî
 (
buf
, &
Àn
, (
u_ch¨
Ë
SMUX_OPEN
, (
±r
 - buf) - 2);

968  
	`£nd
 (
sock
, 
buf
, (
±r
 - buf), 0);

969 
	}
}

977 
	$smux_å≠
 (
v¨übÀ
 *
vp
, 
size_t
 
vp_Àn
,

978 c⁄° 
oid
 *
íame
, 
size_t
 
íamñí
,

979 c⁄° 
oid
 *
«me
, 
size_t
 
«mñí
,

980 c⁄° 
oid
 *
öame
, 
size_t
 
öamñí
,

981 c⁄° 
å≠_obje˘
 *
å≠obj
, 
size_t
 
å≠objÀn
,

982 
u_ch¨
 
•å≠
)

984 
i
;

985 
u_ch¨
 
buf
[
BUFSIZ
];

986 
u_ch¨
 *
±r
;

987 
size_t
 
Àn
, 
Àngth
;

988 
ö_addr
 
addr
;

989 
vÆ
;

990 
u_ch¨
 *
h1
, *
h1e
;

992 
±r
 = 
buf
;

993 
Àn
 = 
BUFSIZ
;

994 
Àngth
 = 
Àn
;

997 i‡(
smux_sock
 < 0)

1001 
±r
 = 
	`a¢_buûd_hódî
 (±r, &
Àn
, (
u_ch¨
Ë
SMUX_TRAP
, 0);

1004 
±r
 = 
	`a¢_buûd_objid
 (±r, &
Àn
,

1005 (
u_ch¨
)

1006 (
ASN_UNIVERSAL
 | 
ASN_PRIMITIVE
 | 
ASN_OBJECT_ID
),

1007 
smux_oid
, 
smux_oid_Àn
);

1010 
addr
.
s_addr
 = 0;

1011 
±r
 = 
	`a¢_buûd_°rög
 (±r, &
Àn
,

1012 (
u_ch¨
)

1013 (
ASN_UNIVERSAL
 | 
ASN_PRIMITIVE
 | 
ASN_IPADDRESS
),

1014 (
u_ch¨
 *)&
addr
,  (addr));

1017 
vÆ
 = 
SNMP_TRAP_ENTERPRISESPECIFIC
;

1018 
±r
 = 
	`a¢_buûd_öt
 (±r, &
Àn
,

1019 (
u_ch¨
)(
ASN_UNIVERSAL
 | 
ASN_PRIMITIVE
 | 
ASN_INTEGER
),

1020 (*)&
vÆ
,  (val));

1023 
vÆ
 = 
•å≠
;

1024 
±r
 = 
	`a¢_buûd_öt
 (±r, &
Àn
,

1025 (
u_ch¨
)(
ASN_UNIVERSAL
 | 
ASN_PRIMITIVE
 | 
ASN_INTEGER
),

1026 (*)&
vÆ
,  (val));

1029 
vÆ
 = 0;

1030 
±r
 = 
	`a¢_buûd_unsig√d_öt
 (±r, &
Àn
,

1031 (
u_ch¨
)(
ASN_UNIVERSAL
 | 
ASN_PRIMITIVE
 | 
ASN_TIMETICKS
),

1032 &
vÆ
,  (val));

1035 
h1
 = 
±r
;

1036 
±r
 = 
	`a¢_buûd_£quí˚
 (±r, &
Àn
,

1037 (
u_ch¨
Ë(
ASN_SEQUENCE
 | 
ASN_CONSTRUCTOR
),

1042 
h1e
 = 
±r
;

1043 
i
 = 0; i < 
å≠objÀn
; i++)

1045 
ªt
;

1046 
oid
 oid[
MAX_OID_LEN
];

1047 
size_t
 
oid_Àn
;

1048 *
vÆ
;

1049 
size_t
 
vÆ_Àn
;

1050 
u_ch¨
 
vÆ_ty≥
;

1053 i‡(
å≠obj
[
i
].
«mñí
 > 0)

1055 
	`oid_c›y
 (
oid
, 
«me
, 
«mñí
);

1056 
	`oid_c›y
 (
oid
 + 
«mñí
, 
å≠obj
[
i
].
«me
,Årapobj[i].namelen);

1057 
	`oid_c›y
 (
oid
 + 
«mñí
 + 
å≠obj
[
i
].«mñí, 
öame
, 
öamñí
);

1058 
oid_Àn
 = 
«mñí
 + 
å≠obj
[
i
].«mñí + 
öamñí
;

1062 
	`oid_c›y
 (
oid
, 
«me
, 
«mñí
);

1063 
	`oid_c›y
 (
oid
 + 
«mñí
, 
å≠obj
[
i
].
«me
,Årapobj[i].namelen * (-1));

1064 
oid_Àn
 = 
«mñí
 + 
å≠obj
[
i
].namelen * (-1) ;

1067 i‡(
debug_smux
)

1069 
	`smux_oid_dump
 ("Tøp", 
«me
, 
«mñí
);

1070 i‡(
å≠obj
[
i
].
«mñí
 < 0)

1071 
	`smux_oid_dump
 ("Trap",

1072 
å≠obj
[
i
].
«me
, (- 1Ë* (å≠obj[i].
«mñí
));

1075 
	`smux_oid_dump
 ("Tøp", 
å≠obj
[
i
].
«me
, (å≠obj[i].
«mñí
));

1076 
	`smux_oid_dump
 ("Tøp", 
öame
, 
öamñí
);

1078 
	`smux_oid_dump
 ("Tøp", 
oid
, 
oid_Àn
);

1079 
	`zlog_öfo
 ("BUFSIZ: %d // oid_Àn: %lu", 
BUFSIZ
, (
u_l⁄g
)
oid_Àn
);

1082 
ªt
 = 
	`smux_gë
 (
oid
, &
oid_Àn
, 1, &
vÆ_ty≥
, &
vÆ
, &
vÆ_Àn
);

1084 i‡(
debug_smux
)

1085 
	`zlog_debug
 ("smux_gëÑesu… %d", 
ªt
);

1087 i‡(
ªt
 == 0)

1088 
±r
 = 
	`¢mp_buûd_v¨_›
 (±r, 
oid
, &
oid_Àn
,

1089 
vÆ_ty≥
, 
vÆ_Àn
, 
vÆ
, &
Àn
);

1093 
	`a¢_buûd_£quí˚
(
h1
, &
Àngth
,

1094 (
u_ch¨
Ë(
ASN_SEQUENCE
 | 
ASN_CONSTRUCTOR
),

1095 
±r
 - 
h1e
);

1098 
Àn
 = 
BUFSIZ
;

1099 
	`a¢_buûd_hódî
 (
buf
, &
Àn
, (
u_ch¨
Ë
SMUX_TRAP
, (
±r
 - buf) - 2);

1101  
	`£nd
 (
smux_sock
, 
buf
, (
±r
 - buf), 0);

1102 
	}
}

1105 
	$smux_ªgi°î
 (
sock
)

1107 
u_ch¨
 
buf
[
BUFSIZ
];

1108 
u_ch¨
 *
±r
;

1109 
ªt
;

1110 
size_t
 
Àn
;

1111 
¥i‹ôy
;

1112 
›î©i⁄
;

1113 
subåì
 *subtree;

1114 
li°node
 *
node
, *
¬ode
;

1116 
ªt
 = 0;

1118 
	`ALL_LIST_ELEMENTS
 (
åìli°
, 
node
, 
¬ode
, 
subåì
))

1120 
±r
 = 
buf
;

1121 
Àn
 = 
BUFSIZ
;

1124 
±r
 = 
	`a¢_buûd_hódî
 (±r, &
Àn
, (
u_ch¨
Ë
SMUX_RREQ
, 0);

1127 
±r
 = 
	`a¢_buûd_objid
 (±r, &
Àn
,

1128 (
u_ch¨
)

1129 (
ASN_UNIVERSAL
 | 
ASN_PRIMITIVE
 | 
ASN_OBJECT_ID
),

1130 
subåì
->
«me
, subåì->
«me_Àn
);

1133 
¥i‹ôy
 = -1;

1134 
±r
 = 
	`a¢_buûd_öt
 (±r, &
Àn
,

1135 (
u_ch¨
)(
ASN_UNIVERSAL
 | 
ASN_PRIMITIVE
 | 
ASN_INTEGER
),

1136 &
¥i‹ôy
,  (priority));

1139 
›î©i⁄
 = 2;

1140 
±r
 = 
	`a¢_buûd_öt
 (±r, &
Àn
,

1141 (
u_ch¨
)(
ASN_UNIVERSAL
 | 
ASN_PRIMITIVE
 | 
ASN_INTEGER
),

1142 &
›î©i⁄
,  (operation));

1144 i‡(
debug_smux
)

1146 
	`smux_oid_dump
 ("SMUXÑegi°î oid", 
subåì
->
«me
, subåì->
«me_Àn
);

1147 
	`zlog_debug
 ("SMUXÑegi°îÖri‹ôy: %ld", 
¥i‹ôy
);

1148 
	`zlog_debug
 ("SMUXÑegi°î o≥øti⁄: %ld", 
›î©i⁄
);

1151 
Àn
 = 
BUFSIZ
;

1152 
	`a¢_buûd_hódî
 (
buf
, &
Àn
, (
u_ch¨
Ë
SMUX_RREQ
, (
±r
 - buf) - 2);

1153 
ªt
 = 
	`£nd
 (
sock
, 
buf
, (
±r
 - buf), 0);

1154 i‡(
ªt
 < 0)

1155  
ªt
;

1157  
ªt
;

1158 
	}
}

1162 
	$smux_c⁄√˘
 (
thªad
 *
t
)

1164 
ªt
;

1166 i‡(
debug_smux
)

1167 
	`zlog_debug
 ("SMUX c⁄√˘Åry %d", 
Áû
 + 1);

1170 
smux_c⁄√˘_thªad
 = 
NULL
;

1173 
smux_sock
 = 
	`smux_sockë
 ();

1174 i‡(
smux_sock
 < 0)

1176 i‡(++
Áû
 < 
SMUX_MAX_FAILURE
)

1177 
	`smux_evít
 (
SMUX_CONNECT
, 0);

1182 
ªt
 = 
	`smux_›í
 (
smux_sock
);

1183 i‡(
ªt
 < 0)

1185 
	`zlog_w¨n
 ("SMUX o≥¿mesßgê£nd faûed: %s", 
	`ß„_°ªº‹
 (
î∫o
));

1186 
	`˛o£
 (
smux_sock
);

1187 
smux_sock
 = -1;

1188 i‡(++
Áû
 < 
SMUX_MAX_FAILURE
)

1189 
	`smux_evít
 (
SMUX_CONNECT
, 0);

1194 
ªt
 = 
	`smux_ªgi°î
 (
smux_sock
);

1195 i‡(
ªt
 < 0)

1197 
	`zlog_w¨n
 ("SMUXÑegi°î mesßgê£nd faûed: %s", 
	`ß„_°ªº‹
 (
î∫o
));

1198 
	`˛o£
 (
smux_sock
);

1199 
smux_sock
 = -1;

1200 i‡(++
Áû
 < 
SMUX_MAX_FAILURE
)

1201 
	`smux_evít
 (
SMUX_CONNECT
, 0);

1206 
	`smux_evít
 (
SMUX_READ
, 
smux_sock
);

1209 
	}
}

1213 
	$smux_°›
 ()

1215 i‡(
smux_ªad_thªad
)

1217 
	`thªad_ˇn˚l
 (
smux_ªad_thªad
);

1218 
smux_ªad_thªad
 = 
NULL
;

1221 i‡(
smux_c⁄√˘_thªad
)

1223 
	`thªad_ˇn˚l
 (
smux_c⁄√˘_thªad
);

1224 
smux_c⁄√˘_thªad
 = 
NULL
;

1227 i‡(
smux_sock
 >= 0)

1229 
	`˛o£
 (
smux_sock
);

1230 
smux_sock
 = -1;

1232 
	}
}

1237 
	$smux_evít
 (
smux_evít
 
evít
, 
sock
)

1239 
evít
)

1241 
SMUX_SCHEDULE
:

1242 
smux_c⁄√˘_thªad
 = 
	`thªad_add_evít
 (
ma°î
, 
smux_c⁄√˘
, 
NULL
, 0);

1244 
SMUX_CONNECT
:

1245 
smux_c⁄√˘_thªad
 = 
	`thªad_add_timî
 (
ma°î
, 
smux_c⁄√˘
, 
NULL
, 10);

1247 
SMUX_READ
:

1248 
smux_ªad_thªad
 = 
	`thªad_add_ªad
 (
ma°î
, 
smux_ªad
, 
NULL
, 
sock
);

1253 
	}
}

1256 
	$smux_°r2oid
 (c⁄° *
°r
, 
oid
 *oid, 
size_t
 *
oid_Àn
)

1258 
Àn
;

1259 
vÆ
;

1261 
Àn
 = 0;

1262 
vÆ
 = 0;

1263 *
oid_Àn
 = 0;

1265 i‡(*
°r
 == '.')

1266 
°r
++;

1267 i‡(*
°r
 == '\0')

1272 i‡(! 
	`isdigô
 (*
°r
))

1275 
	`isdigô
 (*
°r
))

1277 
vÆ
 *= 10;

1278 
vÆ
 +(*
°r
 - '0');

1279 
°r
++;

1282 i‡(*
°r
 == '\0')

1284 i‡(*
°r
 != '.')

1287 
oid
[
Àn
++] = 
vÆ
;

1288 
vÆ
 = 0;

1289 
°r
++;

1292 
oid
[
Àn
++] = 
vÆ
;

1293 *
oid_Àn
 = 
Àn
;

1296 
	}
}

1298 
oid
 *

1299 
	$smux_oid_dup
 (
oid
 *
objid
, 
size_t
 
objid_Àn
)

1301 
oid
 *
√w
;

1303 
√w
 = 
	`XMALLOC
 (
MTYPE_TMP
,  (
oid
Ë* 
objid_Àn
);

1304 
	`oid_c›y
 (
√w
, 
objid
, 
objid_Àn
);

1306  
√w
;

1307 
	}
}

1310 
	$smux_≥î_oid
 (
vty
 *vty, c⁄° *
oid_°r
, c⁄° *
∑sswd_°r
)

1312 
ªt
;

1313 
oid
 oid[
MAX_OID_LEN
];

1314 
size_t
 
oid_Àn
;

1316 
ªt
 = 
	`smux_°r2oid
 (
oid_°r
, 
oid
, &
oid_Àn
);

1317 i‡(
ªt
 != 0)

1319 
	`vty_out
 (
vty
, "obje˘ ID mÆf‹med%s", 
VTY_NEWLINE
);

1320  
CMD_WARNING
;

1323 i‡(
smux_oid
)

1325 
	`‰ì
 (
smux_oid
);

1326 
smux_oid
 = 
NULL
;

1330 i‡(
smux_∑sswd
)

1332 
	`‰ì
 (
smux_∑sswd
);

1333 
smux_∑sswd
 = 
NULL
;

1336 
smux_oid
 = 
	`smux_oid_dup
 (
oid
, 
oid_Àn
);

1337 
smux_oid_Àn
 = 
oid_Àn
;

1339 i‡(
∑sswd_°r
)

1340 
smux_∑sswd
 = 
	`°rdup
 (
∑sswd_°r
);

1342 
smux_∑sswd
 = 
	`°rdup
 ("");

1345 
	}
}

1348 
	$smux_≥î_deÁu…
 ()

1350 i‡(
smux_oid
)

1352 
	`‰ì
 (
smux_oid
);

1353 
smux_oid
 = 
NULL
;

1357 i‡(
smux_∑sswd
)

1359 
	`‰ì
 (
smux_∑sswd
);

1360 
smux_∑sswd
 = 
NULL
;

1363  
CMD_SUCCESS
;

1364 
	}
}

1366 
DEFUN
 (
smux_≥î
,

1367 
smux_≥î_cmd
,

1373 i‡(
smux_≥î_oid
 (
vty
, 
¨gv
[0], 
NULL
) == 0)

1375 
smux_°¨t
();

1376  
	gCMD_SUCCESS
;

1379  
	gCMD_WARNING
;

1382 
DEFUN
 (
smux_≥î_∑ssw‹d
,

1383 
smux_≥î_∑ssw‹d_cmd
,

1390 i‡(
smux_≥î_oid
 (
vty
, 
¨gv
[0],árgv[1]) == 0)

1392 
smux_°¨t
();

1393  
	gCMD_SUCCESS
;

1396  
	gCMD_WARNING
;

1399 
DEFUN
 (
no_smux_≥î
,

1400 
no_smux_≥î_cmd
,

1402 
NO_STR


1406 
smux_°›
();

1407  
smux_≥î_deÁu…
 ();

1410 
ALIAS
 (
no_smux_≥î
,

1411 
no_smux_≥î_oid_cmd
,

1413 
NO_STR


1418 
ALIAS
 (
no_smux_≥î
,

1419 
no_smux_≥î_oid_∑ssw‹d_cmd
,

1421 
NO_STR


1428 
	$c⁄fig_wrôe_smux
 (
vty
 *vty)

1430 
fú°
 = 1;

1431 
i
;

1433 i‡(
smux_oid
)

1435 
	`vty_out
 (
vty
, "smuxÖeer ");

1436 
i
 = 0; i < 
smux_oid_Àn
; i++)

1438 
	`vty_out
 (
vty
, "%s%d", 
fú°
 ? "" : ".", (Ë
smux_oid
[
i
]);

1439 
fú°
 = 0;

1441 
	`vty_out
 (
vty
, " %s%s", 
smux_∑sswd
, 
VTY_NEWLINE
);

1444 
	}
}

1448 
	$smux_ªgi°î_mib
 (c⁄° *
des¸
, 
v¨übÀ
 *
v¨
,

1449 
size_t
 
width
, 
num
,

1450 
oid
 
«me
[], 
size_t
 
«mñí
)

1452 
subåì
 *
åì
;

1454 
åì
 = (
subåì
 *)
	`mÆloc
((subtree));

1455 
	`oid_c›y
 (
åì
->
«me
,Çame, 
«mñí
);

1456 
åì
->
«me_Àn
 = 
«mñí
;

1457 
åì
->
v¨übÀs
 = 
v¨
;

1458 
åì
->
v¨übÀs_num
 = 
num
;

1459 
åì
->
v¨übÀs_width
 = 
width
;

1460 
åì
->
ªgi°îed
 = 0;

1461 
	`li°node_add_s‹t
(
åìli°
, 
åì
);

1462 
	}
}

1466 
	$smux_åì_cmp
(
subåì
 *
åì1
, subåì *
åì2
)

1468  
	`oid_com∑ª
(
åì1
->
«me
,Åªe1->
«me_Àn
,

1469 
åì2
->
«me
,Åªe2->
«me_Àn
);

1470 
	}
}

1474 
	$smux_öô
 (
thªad_ma°î
 *
tm
)

1477 
ma°î
 = 
tm
;

1480 
åìli°
 = 
	`li°_√w
();

1481 
åìli°
->
cmp
 = ((*)(*, *))
smux_åì_cmp
;

1484 
	`ö°Æl_node
 (&
smux_node
, 
c⁄fig_wrôe_smux
);

1486 
	`ö°Æl_ñemít
 (
CONFIG_NODE
, &
smux_≥î_cmd
);

1487 
	`ö°Æl_ñemít
 (
CONFIG_NODE
, &
smux_≥î_∑ssw‹d_cmd
);

1488 
	`ö°Æl_ñemít
 (
CONFIG_NODE
, &
no_smux_≥î_cmd
);

1489 
	`ö°Æl_ñemít
 (
CONFIG_NODE
, &
no_smux_≥î_oid_cmd
);

1490 
	`ö°Æl_ñemít
 (
CONFIG_NODE
, &
no_smux_≥î_oid_∑ssw‹d_cmd
);

1491 
	}
}

1494 
	$smux_°¨t
()

1497 
	`smux_°›
();

1500 
	`smux_evít
 (
SMUX_SCHEDULE
, 0);

1501 
	}
}

	@smux.h

22 #i‚de‡
_ZEBRA_SNMP_H


23 
	#_ZEBRA_SNMP_H


	)

25 
	~<√t-¢mp/agít/√t-¢mp-agít-ö˛udes.h
>

26 
	~<√t-¢mp/agít/¢mp_v¨s.h
>

29 
	#MATCH_FAILED
 (-1)

	)

30 
	#MATCH_SUCCEEDED
 0

	)

33 
	#SNMP_TRUE
 1

	)

34 
	#SNMP_FALSE
 2

	)

37 
	#SNMP_VALID
 1

	)

38 
	#SNMP_INVALID
 2

	)

40 
	#IN_ADDR_SIZE
 (
ö_addr
)

	)

42 #unde‡
REGISTER_MIB


43 
	#REGISTER_MIB
(
des¸
, 
v¨
, 
v¨ty≥
, 
theoid
) \

44 
	`smux_ªgi°î_mib
(
des¸
, (
v¨übÀ
 *)
v¨
, (
v¨ty≥
), \

45 (
v¨
)/(
v¨ty≥
), \

46 
theoid
, —heoid)/(
oid
))

	)

48 
	så≠_obje˘


50 
	m«mñí
;

51 
oid
 
	m«me
[
MAX_OID_LEN
];

55 
	#SNMP_LOCAL_VARIABLES
 \

56 
¢mp_öt_vÆ
; \

57 
ö_addr
 
¢mp_ö_addr_vÆ
;

	)

59 
	#SNMP_INTEGER
(
V
) \

61 *
v¨_Àn
 =  (
¢mp_öt_vÆ
), \

62 
¢mp_öt_vÆ
 = 
V
, \

63 (
u_ch¨
 *Ë&
¢mp_öt_vÆ
 \

64 )

	)

66 
	#SNMP_IPADDRESS
(
V
) \

68 *
v¨_Àn
 =  (
ö_addr
), \

69 
¢mp_ö_addr_vÆ
 = 
V
, \

70 (
u_ch¨
 *Ë&
¢mp_ö_addr_vÆ
 \

71 )

	)

73 
smux_öô
 (
thªad_ma°î
 *
tm
);

74 
smux_ªgi°î_mib
(c⁄° *, 
v¨übÀ
 *,

75 
size_t
, , 
oid
 [], size_t);

76 
smux_hódî_gíîic
 (
v¨übÀ
 *, 
oid
 [], 
size_t
 *,

77 , 
size_t
 *, 
WrôeMëhod
 **);

78 
smux_hódî_èbÀ
 (
v¨übÀ
 *, 
oid
 *, 
size_t
 *,

79 , 
size_t
 *, 
WrôeMëhod
 **);

102 
smux_å≠
 (
v¨übÀ
 *, 
size_t
,

103 c⁄° 
oid
 *, 
size_t
,

104 c⁄° 
oid
 *, 
size_t
,

105 c⁄° 
oid
 *, 
size_t
,

106 c⁄° 
å≠_obje˘
 *, 
size_t
,

107 
u_ch¨
);

109 
oid_com∑ª
 (
oid
 *, , oid *, );

110 
oid2ö_addr
 (
oid
 [], , 
ö_addr
 *);

111 *
oid_c›y
 (*, c⁄° *, 
size_t
);

112 
oid_c›y_addr
 (
oid
 [], 
ö_addr
 *, );

	@snmp.c

22 
	~<zebø.h
>

24 #ifde‡
HAVE_SNMP


25 
	~<√t-¢mp/√t-¢mp-c⁄fig.h
>

26 
	~<√t-¢mp/√t-¢mp-ö˛udes.h
>

28 
	~"smux.h
"

30 
	#mö
(
A
,
B
Ë((AË< (BË? (AË: (B))

	)

33 
	$oid_com∑ª
 (
oid
 *
o1
, 
o1_Àn
, oid *
o2
, 
o2_Àn
)

35 
i
;

37 
i
 = 0; i < 
	`mö
 (
o1_Àn
, 
o2_Àn
); i++)

39 i‡(
o1
[
i
] < 
o2
[i])

41 i‡(
o1
[
i
] > 
o2
[i])

44 i‡(
o1_Àn
 < 
o2_Àn
)

46 i‡(
o1_Àn
 > 
o2_Àn
)

50 
	}
}

53 
	$oid_c›y
 (*
de°
, c⁄° *
§c
, 
size_t
 
size
)

55  
	`mem˝y
 (
de°
, 
§c
, 
size
 *  (
oid
));

56 
	}
}

59 
	$oid2ö_addr
 (
oid
 oid[], 
Àn
, 
ö_addr
 *
addr
)

61 
i
;

62 
u_ch¨
 *
≤t
;

64 i‡(
Àn
 == 0)

67 
≤t
 = (
u_ch¨
 *Ë
addr
;

69 
i
 = 0; i < 
Àn
; i++)

70 *
≤t
++ = 
oid
[
i
];

71 
	}
}

74 
	$oid_c›y_addr
 (
oid
 oid[], 
ö_addr
 *
addr
, 
Àn
)

76 
i
;

77 
u_ch¨
 *
≤t
;

79 i‡(
Àn
 == 0)

82 
≤t
 = (
u_ch¨
 *Ë
addr
;

84 
i
 = 0; i < 
Àn
; i++)

85 
oid
[
i
] = *
≤t
++;

86 
	}
}

89 
	$smux_hódî_gíîic
 (
v¨übÀ
 *
v
, 
oid
 *
«me
, 
size_t
 *
Àngth
, 
exa˘
,

90 
size_t
 *
v¨_Àn
, 
WrôeMëhod
 **
wrôe_mëhod
)

92 
oid
 
fuŒoid
[
MAX_OID_LEN
];

93 
ªt
;

95 
	`oid_c›y
 (
fuŒoid
, 
v
->
«me
, v->
«mñí
);

96 
fuŒoid
[
v
->
«mñí
] = 0;

98 
ªt
 = 
	`oid_com∑ª
 (
«me
, *
Àngth
, 
fuŒoid
, 
v
->
«mñí
 + 1);

101 i‡((
exa˘
 && (
ªt
 != 0)) || (!exact && (ret >= 0)))

102  
MATCH_FAILED
;

105 
	`mem˝y
 (
«me
, 
fuŒoid
, (
v
->
«mñí
 + 1Ë*  (
oid
));

106 *
Àngth
 = 
v
->
«mñí
 + 1;

108 *
wrôe_mëhod
 = 0;

109 *
v¨_Àn
 = ();

111  
MATCH_SUCCEEDED
;

112 
	}
}

115 
	$smux_hódî_èbÀ
 (
v¨übÀ
 *
v
, 
oid
 *
«me
, 
size_t
 *
Àngth
, 
exa˘
,

116 
size_t
 *
v¨_Àn
, 
WrôeMëhod
 **
wrôe_mëhod
)

120 i‡((
	`oid_com∑ª
 (
«me
, *
Àngth
, 
v
->«me, v->
«mñí
)) < 0)

122 i‡(
exa˘
)

123  
MATCH_FAILED
;

124 
	`oid_c›y
(
«me
, 
v
->«me, v->
«mñí
);

125 *
Àngth
 = 
v
->
«mñí
;

128 *
wrôe_mëhod
 = 0;

129 *
v¨_Àn
 = ();

131  
MATCH_SUCCEEDED
;

132 
	}
}

	@sockopt.c

22 
	~<zebø.h
>

23 
	~"log.h
"

24 
	~"sock›t.h
"

25 
	~"sockuni⁄.h
"

28 
	$£tsock›t_so_ªcvbuf
 (
sock
, 
size
)

30 
ªt
;

32 i‡–(
ªt
 = 
	`£tsock›t
 (
sock
, 
SOL_SOCKET
, 
SO_RCVBUF
, (*)

33 &
size
,  ())) < 0)

34 
	`zlog_îr
 ("fd %d: can't setsockopt SO_RCVBUFÅo %d: %s",

35 
sock
,
size
,
	`ß„_°ªº‹
(
î∫o
));

37  
ªt
;

38 
	}
}

41 
	$£tsock›t_so_£ndbuf
 (c⁄° 
sock
, 
size
)

43 
ªt
 = 
	`£tsock›t
 (
sock
, 
SOL_SOCKET
, 
SO_SNDBUF
,

44 (*)&
size
,  ());

46 i‡(
ªt
 < 0)

47 
	`zlog_îr
 ("fd %d: can't setsockopt SO_SNDBUFÅo %d: %s",

48 
sock
, 
size
, 
	`ß„_°ªº‹
 (
î∫o
));

50  
ªt
;

51 
	}
}

54 
	$gësock›t_so_£ndbuf
 (c⁄° 
sock
)

56 
u_öt32_t
 
›tvÆ
;

57 
sockÀn_t
 
›éí
 =  (
›tvÆ
);

58 
ªt
 = 
	`gësock›t
 (
sock
, 
SOL_SOCKET
, 
SO_SNDBUF
,

59 (*)&
›tvÆ
, &
›éí
);

60 i‡(
ªt
 < 0)

62 
	`zlog_îr
 ("fd %d: can't getsockopt SO_SNDBUF: %d (%s)",

63 
sock
, 
î∫o
, 
	`ß„_°ªº‹
 (errno));

64  
ªt
;

66  
›tvÆ
;

67 
	}
}

70 
	$gësock›t_cmsg_d©a
 (
msghdr
 *
msgh
, 
Àvñ
, 
ty≥
)

72 
cmsghdr
 *
cmsg
;

73 *
±r
 = 
NULL
;

75 
cmsg
 = 
	`ZCMSG_FIRSTHDR
(
msgh
);

76 
cmsg
 !
NULL
;

77 
cmsg
 = 
	`CMSG_NXTHDR
(
msgh
, cmsg))

78 i‡(
cmsg
->
cmsg_Àvñ
 =
Àvñ
 && cmsg->
cmsg_ty≥
)

79  (
±r
 = 
	`CMSG_DATA
(
cmsg
));

81  
NULL
;

82 
	}
}

84 #ifde‡
HAVE_IPV6


87 
	$£tsock›t_ùv6_pktöfo
 (
sock
, 
vÆ
)

89 
ªt
;

91 #ifde‡
IPV6_RECVPKTINFO


92 
ªt
 = 
	`£tsock›t
(
sock
, 
IPPROTO_IPV6
, 
IPV6_RECVPKTINFO
, &
vÆ
, (val));

93 i‡(
ªt
 < 0)

94 
	`zlog_w¨n
 ("ˇn'à£tsock›àIPV6_RECVPKTINFO : %s", 
	`ß„_°ªº‹
 (
î∫o
));

96 
ªt
 = 
	`£tsock›t
(
sock
, 
IPPROTO_IPV6
, 
IPV6_PKTINFO
, &
vÆ
, (val));

97 i‡(
ªt
 < 0)

98 
	`zlog_w¨n
 ("ˇn'à£tsock›àIPV6_PKTINFO : %s", 
	`ß„_°ªº‹
 (
î∫o
));

100  
ªt
;

101 
	}
}

105 
	$£tsock›t_ùv6_checksum
 (
sock
, 
vÆ
)

107 
ªt
;

109 #ifde‡
GNU_LINUX


110 
ªt
 = 
	`£tsock›t
(
sock
, 
IPPROTO_RAW
, 
IPV6_CHECKSUM
, &
vÆ
, (val));

112 
ªt
 = 
	`£tsock›t
(
sock
, 
IPPROTO_IPV6
, 
IPV6_CHECKSUM
, &
vÆ
, (val));

114 i‡(
ªt
 < 0)

115 
	`zlog_w¨n
 ("can't setsockopt IPV6_CHECKSUM");

116  
ªt
;

117 
	}
}

121 
	$£tsock›t_ùv6_mu…iˇ°_h›s
 (
sock
, 
vÆ
)

123 
ªt
;

125 
ªt
 = 
	`£tsock›t
(
sock
, 
IPPROTO_IPV6
, 
IPV6_MULTICAST_HOPS
, &
vÆ
, (val));

126 i‡(
ªt
 < 0)

127 
	`zlog_w¨n
 ("can't setsockopt IPV6_MULTICAST_HOPS");

128  
ªt
;

129 
	}
}

133 
	$£tsock›t_ùv6_uniˇ°_h›s
 (
sock
, 
vÆ
)

135 
ªt
;

137 
ªt
 = 
	`£tsock›t
(
sock
, 
IPPROTO_IPV6
, 
IPV6_UNICAST_HOPS
, &
vÆ
, (val));

138 i‡(
ªt
 < 0)

139 
	`zlog_w¨n
 ("can't setsockopt IPV6_UNICAST_HOPS");

140  
ªt
;

141 
	}
}

144 
	$£tsock›t_ùv6_h›limô
 (
sock
, 
vÆ
)

146 
ªt
;

148 #ifde‡
IPV6_RECVHOPLIMIT


149 
ªt
 = 
	`£tsock›t
 (
sock
, 
IPPROTO_IPV6
, 
IPV6_RECVHOPLIMIT
, &
vÆ
, (val));

150 i‡(
ªt
 < 0)

151 
	`zlog_w¨n
 ("can't setsockopt IPV6_RECVHOPLIMIT");

153 
ªt
 = 
	`£tsock›t
 (
sock
, 
IPPROTO_IPV6
, 
IPV6_HOPLIMIT
, &
vÆ
, (val));

154 i‡(
ªt
 < 0)

155 
	`zlog_w¨n
 ("can't setsockopt IPV6_HOPLIMIT");

157  
ªt
;

158 
	}
}

162 
	$£tsock›t_ùv6_mu…iˇ°_lo›
 (
sock
, 
vÆ
)

164 
ªt
;

166 
ªt
 = 
	`£tsock›t
 (
sock
, 
IPPROTO_IPV6
, 
IPV6_MULTICAST_LOOP
, &
vÆ
,

167  (
vÆ
));

168 i‡(
ªt
 < 0)

169 
	`zlog_w¨n
 ("can't setsockopt IPV6_MULTICAST_LOOP");

170  
ªt
;

171 
	}
}

174 
	$gësock›t_ùv6_ifödex
 (
msghdr
 *
msgh
)

176 
ö6_pktöfo
 *
pktöfo
;

178 
pktöfo
 = 
	`gësock›t_cmsg_d©a
 (
msgh
, 
IPPROTO_IPV6
, 
IPV6_PKTINFO
);

180  
pktöfo
->
ùi6_ifödex
;

181 
	}
}

184 
	$£tsock›t_ùv6_t˛ass
(
sock
, 
t˛ass
)

186 
ªt
 = 0;

188 #ifde‡
IPV6_TCLASS


189 
ªt
 = 
	`£tsock›t
 (
sock
, 
IPPROTO_IPV6
, 
IPV6_TCLASS
, &
t˛ass
,  (tclass));

190 i‡(
ªt
 < 0)

191 
	`zlog_w¨n
 ("Can't set IPV6_TCLASS option for fd %dÅo %#x: %s",

192 
sock
, 
t˛ass
, 
	`ß„_°ªº‹
(
î∫o
));

194  
ªt
;

195 
	}
}

220 
	$£tsock›t_ùv4_mu…iˇ°
(
sock
,

221 
›äame
,

222 
mˇ°_addr
,

223 
ifödex
)

225 #ifde‡
HAVE_RFC3678


226 
group_ªq
 
gr
;

227 
sockaddr_ö
 *
si
;

228 
ªt
;

229 
	`mem£t
 (&
gr
, 0, (gr));

230 
si
 = (
sockaddr_ö
 *)&
gr
.
gr_group
;

231 
gr
.
gr_öãrÁ˚
 = 
ifödex
;

232 
si
->
sö_Ámûy
 = 
AF_INET
;

233 #ifde‡
HAVE_STRUCT_SOCKADDR_IN_SIN_LEN


234 
si
->
sö_Àn
 = (
sockaddr_ö
);

236 
si
->
sö_addr
.
s_addr
 = 
mˇ°_addr
;

237 
ªt
 = 
	`£tsock›t
(
sock
, 
IPPROTO_IP
, (
›äame
 =
IP_ADD_MEMBERSHIP
) ?

238 
MCAST_JOIN_GROUP
 : 
MCAST_LEAVE_GROUP
, (*)&
gr
, (gr));

239 i‡((
ªt
 < 0Ë&& (
›äame
 =
IP_ADD_MEMBERSHIP
Ë&& (
î∫o
 =
EADDRINUSE
))

241 
	`£tsock›t
(
sock
, 
IPPROTO_IP
, 
MCAST_LEAVE_GROUP
, (*)&
gr
, (gr));

242 
ªt
 = 
	`£tsock›t
(
sock
, 
IPPROTO_IP
, 
MCAST_JOIN_GROUP
, (*)&
gr
, (gr));

244  
ªt
;

246 #ñi‡
	`deföed
(
HAVE_STRUCT_IP_MREQN_IMR_IFINDEX
Ë&& !deföed(
__FªeBSD__
)

247 
ù_mªqn
 
mªqn
;

248 
ªt
;

250 
	`as£π
(
›äame
 =
IP_ADD_MEMBERSHIP
 || o±«mê=
IP_DROP_MEMBERSHIP
);

251 
	`mem£t
 (&
mªqn
, 0, (mreqn));

253 
mªqn
.
imr_mu…üddr
.
s_addr
 = 
mˇ°_addr
;

254 
mªqn
.
imr_ifödex
 = 
ifödex
;

256 
ªt
 = 
	`£tsock›t
(
sock
, 
IPPROTO_IP
, 
›äame
,

257 (*)&
mªqn
, (mreqn));

258 i‡((
ªt
 < 0Ë&& (
›äame
 =
IP_ADD_MEMBERSHIP
Ë&& (
î∫o
 =
EADDRINUSE
))

261 
buf
[1][
INET_ADDRSTRLEN
];

262 
	`zlog_öfo
("setsockopt_ipv4_multicastáttemptingÅo dropánd "

264 
sock
,

265 
	`öë_¡›
(
AF_INET
, &
mªqn
.
imr_mu…üddr
,

266 
buf
[0], (buf[0])), 
ifödex
);

267 
	`£tsock›t
(
sock
, 
IPPROTO_IP
, 
IP_DROP_MEMBERSHIP
,

268 (*)&
mªqn
, (mreqn));

269 
ªt
 = 
	`£tsock›t
(
sock
, 
IPPROTO_IP
, 
IP_ADD_MEMBERSHIP
,

270 (*)&
mªqn
, (mreqn));

272  
ªt
;

279 #ñi‡
	`deföed
(
HAVE_BSD_STRUCT_IP_MREQ_HACK
)

282 
ö_addr
 
m
;

283 
ù_mªq
 
mªq
;

284 
ªt
;

286 
	`as£π
(
›äame
 =
IP_ADD_MEMBERSHIP
 || o±«mê=
IP_DROP_MEMBERSHIP
);

288 
m
.
s_addr
 = 
	`ht⁄l
(
ifödex
);

290 
	`mem£t
 (&
mªq
, 0, (mreq));

291 
mªq
.
imr_mu…üddr
.
s_addr
 = 
mˇ°_addr
;

292 
mªq
.
imr_öãrÁ˚
 = 
m
;

294 
ªt
 = 
	`£tsock›t
 (
sock
, 
IPPROTO_IP
, 
›äame
, (*)&
mªq
, (mreq));

295 i‡((
ªt
 < 0Ë&& (
›äame
 =
IP_ADD_MEMBERSHIP
Ë&& (
î∫o
 =
EADDRINUSE
))

298 
buf
[1][
INET_ADDRSTRLEN
];

299 
	`zlog_öfo
("setsockopt_ipv4_multicastáttemptingÅo dropánd "

301 
sock
,

302 
	`öë_¡›
(
AF_INET
, &
mªq
.
imr_mu…üddr
,

303 
buf
[0], (buf[0])), 
ifödex
);

304 
	`£tsock›t
 (
sock
, 
IPPROTO_IP
, 
IP_DROP_MEMBERSHIP
,

305 (*)&
mªq
, (mreq));

306 
ªt
 = 
	`£tsock›t
 (
sock
, 
IPPROTO_IP
, 
IP_ADD_MEMBERSHIP
,

307 (*)&
mªq
, (mreq));

309  
ªt
;

315 
	}
}

321 
	$£tsock›t_ùv4_mu…iˇ°_if
(
sock
,

322 
ifödex
)

325 #ifde‡
HAVE_STRUCT_IP_MREQN_IMR_IFINDEX


326 
ù_mªqn
 
mªqn
;

327 
	`mem£t
 (&
mªqn
, 0, (mreqn));

329 
mªqn
.
imr_ifödex
 = 
ifödex
;

330  
	`£tsock›t
(
sock
, 
IPPROTO_IP
, 
IP_MULTICAST_IF
, (*)&
mªqn
, (mreqn));

336 #ñi‡
	`deföed
(
HAVE_BSD_STRUCT_IP_MREQ_HACK
)

337 
ö_addr
 
m
;

339 
m
.
s_addr
 = 
	`ht⁄l
(
ifödex
);

341  
	`£tsock›t
 (
sock
, 
IPPROTO_IP
, 
IP_MULTICAST_IF
, (*)&
m
, (m));

345 
	}
}

348 
	$£tsock›t_ùv4_ifödex
 (
sock
, 
vÆ
)

350 
ªt
;

352 #i‡
	`deföed
 (
IP_PKTINFO
)

353 i‡((
ªt
 = 
	`£tsock›t
 (
sock
, 
IPPROTO_IP
, 
IP_PKTINFO
, &
vÆ
,  (val))) < 0)

354 
	`zlog_w¨n
 ("Can't set IP_PKTINFO option for fd %dÅo %d: %s",

355 
sock
,
vÆ
,
	`ß„_°ªº‹
(
î∫o
));

356 #ñi‡
	`deföed
 (
IP_RECVIF
)

357 i‡((
ªt
 = 
	`£tsock›t
 (
sock
, 
IPPROTO_IP
, 
IP_RECVIF
, &
vÆ
,  (val))) < 0)

358 
	`zlog_w¨n
 ("Can't set IP_RECVIF option for fd %dÅo %d: %s",

359 
sock
,
vÆ
,
	`ß„_°ªº‹
(
î∫o
));

365 
ªt
 = -1;

367  
ªt
;

368 
	}
}

371 
	$£tsock›t_ùv4_tos
(
sock
, 
tos
)

373 
ªt
;

375 
ªt
 = 
	`£tsock›t
 (
sock
, 
IPPROTO_IP
, 
IP_TOS
, &
tos
,  (tos));

376 i‡(
ªt
 < 0)

377 
	`zlog_w¨n
 ("Can't set IP_TOS option for fd %dÅo %#x: %s",

378 
sock
, 
tos
, 
	`ß„_°ªº‹
(
î∫o
));

379  
ªt
;

380 
	}
}

384 
	$£tsock›t_ifödex
 (
af
, 
sock
, 
vÆ
)

386 
ªt
 = -1;

388 
af
)

390 
AF_INET
:

391 
ªt
 = 
	`£tsock›t_ùv4_ifödex
 (
sock
, 
vÆ
);

393 #ifde‡
HAVE_IPV6


394 
AF_INET6
:

395 
ªt
 = 
	`£tsock›t_ùv6_pktöfo
 (
sock
, 
vÆ
);

399 
	`zlog_w¨n
 ("£tsock›t_ifödex: unknow¿addªs†Ámûy %d", 
af
);

401  
ªt
;

402 
	}
}

412 
	$gësock›t_ùv4_ifödex
 (
msghdr
 *
msgh
)

415 
ifödex
 = -1;

417 #i‡
	`deföed
(
IP_PKTINFO
)

419 
ö_pktöfo
 *
pktöfo
;

421 
pktöfo
 =

422 (
ö_pktöfo
 *)
	`gësock›t_cmsg_d©a
 (
msgh
, 
IPPROTO_IP
, 
IP_PKTINFO
);

424 
ifödex
 = 
pktöfo
->
ùi_ifödex
;

426 #ñi‡
	`deföed
(
IP_RECVIF
)

430 #i‚de‡
SUNOS_5


432 
sockaddr_dl
 *
sdl
;

435 *
ifödex_p
;

438 #i‚de‡
SUNOS_5


440 
sdl
 =

441 (
sockaddr_dl
 *)
	`gësock›t_cmsg_d©a
 (
msgh
, 
IPPROTO_IP
, 
IP_RECVIF
);

442 i‡(
sdl
 !
NULL
)

443 
ifödex
 = 
sdl
->
sdl_ödex
;

445 
ifödex
 = 0;

452 
ifödex_p
 = (
uöt_t
 *)
	`gësock›t_cmsg_d©a
 (
msgh
, 
IPPROTO_IP
, 
IP_RECVIF
);

453 i‡(
ifödex_p
 !
NULL
)

454 
ifödex
 = *
ifödex_p
;

456 
ifödex
 = 0;

468 
ifödex
 = 0;

472  
ifödex
;

473 
	}
}

477 
	$gësock›t_ifödex
 (
af
, 
msghdr
 *
msgh
)

479 
af
)

481 
AF_INET
:

482  (
	`gësock›t_ùv4_ifödex
 (
msgh
));

484 #ifde‡
HAVE_IPV6


485 
AF_INET6
:

486  (
	`gësock›t_ùv6_ifödex
 (
msgh
));

490 
	`zlog_w¨n
 ("gësock›t_ifödex: unknow¿addªs†Ámûy %d", 
af
);

493 
	}
}

497 
	$sock›t_ùhdrö˛_swab_htosys
 (
ù
 *
ùh
)

502 #i‚de‡
HAVE_IP_HDRINCL_BSD_ORDER


503 
ùh
->
ù_Àn
 = 
	`ht⁄s
(iph->ip_len);

504 
ùh
->
ù_off
 = 
	`ht⁄s
(iph->ip_off);

507 
ùh
->
ù_id
 = 
	`ht⁄s
(iph->ip_id);

508 
	}
}

511 
	$sock›t_ùhdrö˛_swab_sy°oh
 (
ù
 *
ùh
)

513 #i‚de‡
HAVE_IP_HDRINCL_BSD_ORDER


514 
ùh
->
ù_Àn
 = 
	`¡ohs
(iph->ip_len);

515 
ùh
->
ù_off
 = 
	`¡ohs
(iph->ip_off);

518 
ùh
->
ù_id
 = 
	`¡ohs
(iph->ip_id);

519 
	}
}

522 
	$sock›t_t˝_sig«tuª
 (
sock
, 
sockuni⁄
 *
su
, c⁄° *
∑ssw‹d
)

524 #i‡
	`deföed
(
HAVE_TCP_MD5_LINUX24
Ë&& deföed(
GNU_LINUX
)

529 
	#TCP_MD5_AUTH
 13

	)

530 
	#TCP_MD5_AUTH_ADD
 1

	)

531 
	#TCP_MD5_AUTH_DEL
 2

	)

532 
	st˝_rfc2385_cmd
 {

533 
u_öt8_t
 
comm™d
;

534 
u_öt32_t
 
addªss
;

535 
u_öt8_t
 
keyÀn
;

536 *
key
;

537 } 
cmd
;

538 
ö_addr
 *
addr
 = &
su
->
sö
.
sö_addr
;

540 
cmd
.
comm™d
 = (
∑ssw‹d
 !
NULL
 ? 
TCP_MD5_AUTH_ADD
 : 
TCP_MD5_AUTH_DEL
);

541 
cmd
.
addªss
 = 
addr
->
s_addr
;

542 
cmd
.
keyÀn
 = (
∑ssw‹d
 !
NULL
 ? 
	`°æí
 (password) : 0);

543 
cmd
.
key
 = 
∑ssw‹d
;

545  
	`£tsock›t
 (
sock
, 
IPPROTO_TCP
, 
TCP_MD5_AUTH
, &
cmd
,  cmd);

547 #ñi‡
HAVE_DECL_TCP_MD5SIG


548 
ªt
;

549 #i‚de‡
GNU_LINUX


554 
md5sig
 = 
∑ssw‹d
 && *password ? 1 : 0;

556 
keyÀn
 = 
∑ssw‹d
 ? 
	`°æí
 (password) : 0;

557 
t˝_md5sig
 
md5sig
;

558 
sockuni⁄
 *
su2
, *
susock
;

563 i‡(!(
susock
 = 
	`sockuni⁄_gësock«me
 (
sock
)))

566 i‡(
susock
->
ß
.
ß_Ámûy
 =
su
->sa.sa_family)

567 
su2
 = 
su
;

571 
su2
 = 
susock
;

573 i‡(
su2
->
ß
.
ß_Ámûy
 =
AF_INET
)

575 
	`sockuni⁄_‰ì
 (
susock
);

579 #ifde‡
HAVE_IPV6


587 i‡(
su2
->
ß
.
ß_Ámûy
 =
AF_INET6


588 && 
su
->
ß
.
ß_Ámûy
 =
AF_INET
)

590 
su2
->
sö6
.
sö6_Ámûy
 = 
AF_INET6
;

592 
	`mem£t
 (&
su2
->
sö6
.
sö6_addr
, 0,  (
ö6_addr
));

593 
su2
->
sö6
.
sö6_addr
.
s6_addr32
[2] = 
	`ht⁄l
(0xffff);

594 
	`mem˝y
 (&
su2
->
sö6
.
sö6_addr
.
s6_addr32
[3], &
su
->
sö
.
sö_addr
, 4);

599 
	`mem£t
 (&
md5sig
, 0,  (md5sig));

600 
	`mem˝y
 (&
md5sig
.
t˝m_addr
, 
su2
,  (*su2));

601 
md5sig
.
t˝m_keyÀn
 = 
keyÀn
;

602 i‡(
keyÀn
)

603 
	`mem˝y
 (
md5sig
.
t˝m_key
, 
∑ssw‹d
, 
keyÀn
);

604 
	`sockuni⁄_‰ì
 (
susock
);

606 i‡((
ªt
 = 
	`£tsock›t
 (
sock
, 
IPPROTO_TCP
, 
TCP_MD5SIG
, &
md5sig
,  md5sig)) < 0)

610 i‡(
ENOENT
 =
î∫o
)

611 
ªt
 = 0;

613 
	`zlog_îr
 ("sockopt_tcp_signature: setsockopt(%d): %s",

614 
sock
, 
	`ß„_°ªº‹
(
î∫o
));

616  
ªt
;

620 
	}
}

	@sockopt.h

22 #i‚de‡
_ZEBRA_SOCKOPT_H


23 
	#_ZEBRA_SOCKOPT_H


	)

25 
	~"sockuni⁄.h
"

27 
£tsock›t_so_ªcvbuf
 (
sock
, 
size
);

28 
£tsock›t_so_£ndbuf
 (c⁄° 
sock
, 
size
);

29 
gësock›t_so_£ndbuf
 (c⁄° 
sock
);

31 #ifde‡
HAVE_IPV6


32 
£tsock›t_ùv6_pktöfo
 (, );

33 
£tsock›t_ùv6_checksum
 (, );

34 
£tsock›t_ùv6_mu…iˇ°_h›s
 (, );

35 
£tsock›t_ùv6_uniˇ°_h›s
 (, );

36 
£tsock›t_ùv6_h›limô
 (, );

37 
£tsock›t_ùv6_mu…iˇ°_lo›
 (, );

38 
£tsock›t_ùv6_t˛ass
 (, );

46 
	#SOPT_SIZE_CMSG_PKTINFO_IPV6
(Ë( (
ö6_pktöfo
));

	)

54 #i‡
deföed
 (
IP_PKTINFO
)

56 
	#SOPT_SIZE_CMSG_PKTINFO_IPV4
(Ë(
	`CMSG_SPACE
( (
ö_pktöfo
)))

	)

58 
	#SOPT_SIZE_CMSG_PKTINFO
(
af
) \

59 ((
af
 =
AF_INET
Ë? 
	`SOPT_SIZE_CMSG_PKTINFO_IPV4
() \

60 : 
	`SOPT_SIZE_CMSG_PKTINFO_IPV6
()

	)

63 #i‡
deföed
 (
IP_RECVIF
)

66 #i‡
deföed
 (
SUNOS_5
)

67 
	#SOPT_SIZE_CMSG_RECVIF_IPV4
(Ë( (
uöt_t
))

	)

69 
	#SOPT_SIZE_CMSG_RECVIF_IPV4
(Ë( (
sockaddr_dl
))

	)

74 #i‡
deföed
 (
SOPT_SIZE_CMSG_PKTINFO
)

75 
	#SOPT_SIZE_CMSG_IFINDEX_IPV4
(Ë
	`SOPT_SIZE_CMSG_PKTINFO_IPV4
()

	)

76 #ñi‡
deföed
 (
SOPT_SIZE_CMSG_RECVIF_IPV4
)

77 
	#SOPT_SIZE_CMSG_IFINDEX_IPV4
(Ë
	`SOPT_SIZE_CMSG_RECVIF_IPV4
()

	)

79 
	#SOPT_SIZE_CMSG_IFINDEX_IPV4
(Ë( (*))

	)

82 
	#SOPT_SIZE_CMSG_IFINDEX
(
af
) \

83 (((
af
Ë=
AF_INET
Ë: 
	`SOPT_SIZE_CMSG_IFINDEX_IPV4
() \

84 ? 
	`SOPT_SIZE_CMSG_PKTINFO_IPV6
())

	)

86 
£tsock›t_ùv4_mu…iˇ°_if
(
sock
,

87 
ifödex
);

88 
£tsock›t_ùv4_mu…iˇ°
(
sock
, 
›äame
,

89 
mˇ°_addr
,

90 
ifödex
);

91 
£tsock›t_ùv4_tos
(
sock
, 
tos
);

94 
£tsock›t_ifödex
 (, , );

95 
gësock›t_ifödex
 (, 
msghdr
 *);

100 
sock›t_ùhdrö˛_swab_htosys
 (
ù
 *
ùh
);

101 
sock›t_ùhdrö˛_swab_sy°oh
 (
ù
 *
ùh
);

103 
sock›t_t˝_sig«tuª
(
sock
, 
sockuni⁄
 *
su
,

104 c⁄° *
∑ssw‹d
);

	@sockunion.c

22 
	~<zebø.h
>

24 
	~"¥efix.h
"

25 
	~"vty.h
"

26 
	~"sockuni⁄.h
"

27 
	~"mem‹y.h
"

28 
	~"°r.h
"

29 
	~"log.h
"

31 #i‚de‡
HAVE_INET_ATON


33 
	$öë_©⁄
 (c⁄° *
˝
, 
ö_addr
 *
öaddr
)

35 
dŸs
 = 0;

36 
u_l⁄g
 
addr
 = 0;

37 
u_l⁄g
 
vÆ
 = 0, 
ba£
 = 10;

41 
c
 = *
˝
;

43 
c
)

47 
vÆ
 = (vÆ * 
ba£
Ë+ (
c
 - '0');

50 i‡(++
dŸs
 > 3)

53 i‡(
vÆ
 > 255)

55 
addr
 =ádd∏<< 8 | 
vÆ
;

56 
vÆ
 = 0;

61 } *
˝
++) ;

63 i‡(
dŸs
 < 3)

64 
addr
 <<8 * (3 - 
dŸs
);

65 i‡(
öaddr
)

66 
öaddr
->
s_addr
 = 
	`ht⁄l
 (
addr
);

68 
	}
}

72 #i‚de‡
HAVE_INET_PTON


74 
	$öë_±⁄
 (
Ámûy
, c⁄° *
°Ωå
, *
addΩå
)

76 i‡(
Ámûy
 =
AF_INET
)

78 
ö_addr
 
ö_vÆ
;

80 i‡(
	`öë_©⁄
 (
°Ωå
, &
ö_vÆ
))

82 
	`mem˝y
 (
addΩå
, &
ö_vÆ
,  (
ö_addr
));

87 
î∫o
 = 
EAFNOSUPPORT
;

89 
	}
}

92 #i‚de‡
HAVE_INET_NTOP


94 
	$öë_¡›
 (
Ámûy
, c⁄° *
addΩå
, *
°Ωå
, 
size_t
 
Àn
)

96 *
p
 = (*Ë
addΩå
;

98 i‡(
Ámûy
 =
AF_INET
)

100 
ãmp
[
INET_ADDRSTRLEN
];

102 
	`¢¥ötf
(
ãmp
, —emp), "%d.%d.%d.%d", 
p
[0],Ö[1],Ö[2],Ö[3]);

104 i‡(
	`°æí
(
ãmp
Ë>
Àn
)

106 
î∫o
 = 
ENOSPC
;

107  
NULL
;

109 
	`°r˝y
(
°Ωå
, 
ãmp
);

110  
°Ωå
;

113 
î∫o
 = 
EAFNOSUPPORT
;

114  
NULL
;

115 
	}
}

119 
	$öë_sut›
 (
sockuni⁄
 *
su
, *
°r
)

121 
su
->
ß
.
ß_Ámûy
)

123 
AF_INET
:

124 
	`öë_¡›
 (
AF_INET
, &
su
->
sö
.
sö_addr
, 
°r
, 
INET_ADDRSTRLEN
);

126 #ifde‡
HAVE_IPV6


127 
AF_INET6
:

128 
	`öë_¡›
 (
AF_INET6
, &
su
->
sö6
.
sö6_addr
, 
°r
, 
INET6_ADDRSTRLEN
);

132  
°r
;

133 
	}
}

136 
	$°r2sockuni⁄
 (c⁄° *
°r
, 
sockuni⁄
 *
su
)

138 
ªt
;

140 
	`mem£t
 (
su
, 0,  (
sockuni⁄
));

142 
ªt
 = 
	`öë_±⁄
 (
AF_INET
, 
°r
, &
su
->
sö
.
sö_addr
);

143 i‡(
ªt
 > 0)

145 
su
->
sö
.
sö_Ámûy
 = 
AF_INET
;

146 #ifde‡
HAVE_STRUCT_SOCKADDR_IN_SIN_LEN


147 
su
->
sö
.
sö_Àn
 = (
sockaddr_ö
);

151 #ifde‡
HAVE_IPV6


152 
ªt
 = 
	`öë_±⁄
 (
AF_INET6
, 
°r
, &
su
->
sö6
.
sö6_addr
);

153 i‡(
ªt
 > 0)

155 
su
->
sö6
.
sö6_Ámûy
 = 
AF_INET6
;

156 #ifde‡
SIN6_LEN


157 
su
->
sö6
.
sö6_Àn
 = (
sockaddr_ö6
);

163 
	}
}

166 
	$sockuni⁄2°r
 (
sockuni⁄
 *
su
, *
buf
, 
size_t
 
Àn
)

168 i‡(
su
->
ß
.
ß_Ámûy
 =
AF_INET
)

169  
	`öë_¡›
 (
AF_INET
, &
su
->
sö
.
sö_addr
, 
buf
, 
Àn
);

170 #ifde‡
HAVE_IPV6


171 i‡(
su
->
ß
.
ß_Ámûy
 =
AF_INET6
)

172  
	`öë_¡›
 (
AF_INET6
, &
su
->
sö6
.
sö6_addr
, 
buf
, 
Àn
);

174  
NULL
;

175 
	}
}

177 
sockuni⁄
 *

178 
	$sockuni⁄_°r2su
 (c⁄° *
°r
)

180 
sockuni⁄
 *
su
 = 
	`XCALLOC
 (
MTYPE_SOCKUNION
,  (sockunion));

182 i‡(!
	`°r2sockuni⁄
 (
°r
, 
su
))

183  
su
;

185 
	`XFREE
 (
MTYPE_SOCKUNION
, 
su
);

186  
NULL
;

187 
	}
}

191 
	$sockuni⁄_n‹mÆi£_m≠≥d
 (
sockuni⁄
 *
su
)

193 
sockaddr_ö
 
sö
;

195 #ifde‡
HAVE_IPV6


196 i‡(
su
->
ß
.
ß_Ámûy
 =
AF_INET6


197 && 
	`IN6_IS_ADDR_V4MAPPED
 (&
su
->
sö6
.
sö6_addr
))

199 
	`mem£t
 (&
sö
, 0,  (
sockaddr_ö
));

200 
sö
.
sö_Ámûy
 = 
AF_INET
;

201 
sö
.
sö_p‹t
 = 
su
->
sö6
.
sö6_p‹t
;

202 
	`mem˝y
 (&
sö
.
sö_addr
, ((*)&
su
->
sö6
.
sö6_addr
) + 12, 4);

203 
	`mem˝y
 (
su
, &
sö
,  (
sockaddr_ö
));

206 
	}
}

210 
	$sockuni⁄_sockë
 (
sockuni⁄
 *
su
)

212 
sock
;

214 
sock
 = 
	`sockë
 (
su
->
ß
.
ß_Ámûy
, 
SOCK_STREAM
, 0);

215 i‡(
sock
 < 0)

217 
	`zlog
 (
NULL
, 
LOG_WARNING
, "C™'àmakêsockë : %s", 
	`ß„_°ªº‹
 (
î∫o
));

221  
sock
;

222 
	}
}

226 
	$sockuni⁄_ac˚±
 (
sock
, 
sockuni⁄
 *
su
)

228 
sockÀn_t
 
Àn
;

229 
˛õ¡_sock
;

231 
Àn
 =  (
sockuni⁄
);

232 
˛õ¡_sock
 = 
	`ac˚±
 (
sock
, (
sockaddr
 *Ë
su
, &
Àn
);

234 
	`sockuni⁄_n‹mÆi£_m≠≥d
 (
su
);

235  
˛õ¡_sock
;

236 
	}
}

240 
	$sockuni⁄_sizeof
 (
sockuni⁄
 *
su
)

242 
ªt
;

244 
ªt
 = 0;

245 
su
->
ß
.
ß_Ámûy
)

247 
AF_INET
:

248 
ªt
 =  (
sockaddr_ö
);

250 #ifde‡
HAVE_IPV6


251 
AF_INET6
:

252 
ªt
 =  (
sockaddr_ö6
);

256  
ªt
;

257 
	}
}

261 
	$sockuni⁄_log
 (
sockuni⁄
 *
su
, *
buf
, 
size_t
 
Àn
)

263 
su
->
ß
.
ß_Ámûy
)

265 
AF_INET
:

266  
	`öë_¡›
(
AF_INET
, &
su
->
sö
.
sö_addr
, 
buf
, 
Àn
);

268 #ifde‡
HAVE_IPV6


269 
AF_INET6
:

270  
	`öë_¡›
(
AF_INET6
, &(
su
->
sö6
.
sö6_addr
), 
buf
, 
Àn
);

275 
	`¢¥ötf
 (
buf
, 
Àn
, "af_unknow¿%d ", 
su
->
ß
.
ß_Ámûy
);

276  
buf
;

278 
	}
}

284 
c⁄√˘_ªsu…


285 
	$sockuni⁄_c⁄√˘
 (
fd
, 
sockuni⁄
 *
≥îsu
, 
p‹t
,

286 
ifödex
)

288 
ªt
;

289 
vÆ
;

290 
sockuni⁄
 
su
;

292 
	`mem˝y
 (&
su
, 
≥îsu
,  (
sockuni⁄
));

294 
su
.
ß
.
ß_Ámûy
)

296 
AF_INET
:

297 
su
.
sö
.
sö_p‹t
 = 
p‹t
;

299 #ifde‡
HAVE_IPV6


300 
AF_INET6
:

301 
su
.
sö6
.
sö6_p‹t
 = 
p‹t
;

302 #ifde‡
KAME


303 i‡(
	`IN6_IS_ADDR_LINKLOCAL
(&
su
.
sö6
.
sö6_addr
Ë&& 
ifödex
)

305 #ifde‡
HAVE_STRUCT_SOCKADDR_IN6_SIN6_SCOPE_ID


308 
	`SET_IN6_LINKLOCAL_IFINDEX
 (
su
.
sö6
.
sö6_addr
, 
ifödex
);

316 
vÆ
 = 
	`f˙é
 (
fd
, 
F_GETFL
, 0);

317 
	`f˙é
 (
fd
, 
F_SETFL
, 
vÆ
|
O_NONBLOCK
);

320 
ªt
 = 
	`c⁄√˘
 (
fd
, (
sockaddr
 *Ë&
su
, 
	`sockuni⁄_sizeof
 (&su));

323 i‡(
ªt
 == 0)

325 
	`f˙é
 (
fd
, 
F_SETFL
, 
vÆ
);

326  
c⁄√˘_suc˚ss
;

330 i‡(
ªt
 < 0)

332 i‡(
î∫o
 !
EINPROGRESS
)

334 
°r
[
SU_ADDRSTRLEN
];

335 
	`zlog_öfo
 ("can't connectÅo %s fd %d : %s",

336 
	`sockuni⁄_log
 (&
su
, 
°r
,  str),

337 
fd
, 
	`ß„_°ªº‹
 (
î∫o
));

338  
c⁄√˘_îr‹
;

342 
	`f˙é
 (
fd
, 
F_SETFL
, 
vÆ
);

344  
c⁄√˘_ö_¥ogªss
;

345 
	}
}

349 
	$sockuni⁄_°ªam_sockë
 (
sockuni⁄
 *
su
)

351 
sock
;

353 i‡(
su
->
ß
.
ß_Ámûy
 == 0)

354 
su
->
ß
.
ß_Ámûy
 = 
AF_INET_UNION
;

356 
sock
 = 
	`sockë
 (
su
->
ß
.
ß_Ámûy
, 
SOCK_STREAM
, 0);

358 i‡(
sock
 < 0)

359 
	`zlog
 (
NULL
, 
LOG_WARNING
, "can't make socket sockunion_stream_socket");

361  
sock
;

362 
	}
}

366 
	$sockuni⁄_böd
 (
sock
, 
sockuni⁄
 *
su
, 
p‹t
,

367 
sockuni⁄
 *
su_addr
)

369 
size
 = 0;

370 
ªt
;

372 i‡(
su
->
ß
.
ß_Ámûy
 =
AF_INET
)

374 
size
 =  (
sockaddr_ö
);

375 
su
->
sö
.
sö_p‹t
 = 
	`ht⁄s
 (
p‹t
);

376 #ifde‡
HAVE_STRUCT_SOCKADDR_IN_SIN_LEN


377 
su
->
sö
.
sö_Àn
 = 
size
;

379 i‡(
su_addr
 =
NULL
)

380 
	`sockuni⁄2ù
 (
su
Ë
	`ht⁄l
 (
INADDR_ANY
);

382 #ifde‡
HAVE_IPV6


383 i‡(
su
->
ß
.
ß_Ámûy
 =
AF_INET6
)

385 
size
 =  (
sockaddr_ö6
);

386 
su
->
sö6
.
sö6_p‹t
 = 
	`ht⁄s
 (
p‹t
);

387 #ifde‡
SIN6_LEN


388 
su
->
sö6
.
sö6_Àn
 = 
size
;

390 i‡(
su_addr
 =
NULL
)

392 #ifde‡
LINUX_IPV6


393 
	`mem£t
 (&
su
->
sö6
.
sö6_addr
, 0,  (
ö6_addr
));

395 
su
->
sö6
.
sö6_addr
 = 
ö6addr_™y
;

402 
ªt
 = 
	`böd
 (
sock
, (
sockaddr
 *)
su
, 
size
);

403 i‡(
ªt
 < 0)

404 
	`zlog
 (
NULL
, 
LOG_WARNING
, "ˇn'àböd sockë : %s", 
	`ß„_°ªº‹
 (
î∫o
));

406  
ªt
;

407 
	}
}

410 
	$sock›t_ªu£addr
 (
sock
)

412 
ªt
;

413 
⁄
 = 1;

415 
ªt
 = 
	`£tsock›t
 (
sock
, 
SOL_SOCKET
, 
SO_REUSEADDR
,

416 (*Ë&
⁄
,  (on));

417 i‡(
ªt
 < 0)

419 
	`zlog
 (
NULL
, 
LOG_WARNING
, "ˇn'à£àsock›àSO_REUSEADDRÅÿsockë %d", 
sock
);

423 
	}
}

425 #ifde‡
SO_REUSEPORT


427 
	$sock›t_ªu£p‹t
 (
sock
)

429 
ªt
;

430 
⁄
 = 1;

432 
ªt
 = 
	`£tsock›t
 (
sock
, 
SOL_SOCKET
, 
SO_REUSEPORT
,

433 (*Ë&
⁄
,  (on));

434 i‡(
ªt
 < 0)

436 
	`zlog
 (
NULL
, 
LOG_WARNING
, "ˇn'à£àsock›àSO_REUSEPORTÅÿsockë %d", 
sock
);

440 
	}
}

443 
	$sock›t_ªu£p‹t
 (
sock
)

446 
	}
}

450 
	$sock›t_âl
 (
Ámûy
, 
sock
, 
âl
)

452 
ªt
;

454 #ifde‡
IP_TTL


455 i‡(
Ámûy
 =
AF_INET
)

457 
ªt
 = 
	`£tsock›t
 (
sock
, 
IPPROTO_IP
, 
IP_TTL
,

458 (*Ë&
âl
,  ());

459 i‡(
ªt
 < 0)

461 
	`zlog
 (
NULL
, 
LOG_WARNING
, "ˇn'à£àsock›àIP_TTL %dÅÿsockë %d", 
âl
, 
sock
);

467 #ifde‡
HAVE_IPV6


468 i‡(
Ámûy
 =
AF_INET6
)

470 
ªt
 = 
	`£tsock›t
 (
sock
, 
IPPROTO_IPV6
, 
IPV6_UNICAST_HOPS
,

471 (*Ë&
âl
,  ());

472 i‡(
ªt
 < 0)

474 
	`zlog
 (
NULL
, 
LOG_WARNING
, "can't set sockopt IPV6_UNICAST_HOPS %dÅo socket %d",

475 
âl
, 
sock
);

482 
	}
}

485 
	$sock›t_c‹k
 (
sock
, 
⁄off
)

487 #ifde‡
TCP_CORK


488  
	`£tsock›t
 (
sock
, 
IPPROTO_TCP
, 
TCP_CORK
, &
⁄off
, (onoff));

492 
	}
}

495 
	$sock›t_möâl
 (
Ámûy
, 
sock
, 
möâl
)

497 #ifde‡
IP_MINTTL


498 i‡(
Ámûy
 =
AF_INET
)

500 
ªt
 = 
	`£tsock›t
 (
sock
, 
IPPROTO_IP
, 
IP_MINTTL
, &
möâl
, (minttl));

501 i‡(
ªt
 < 0)

502 
	`zlog
 (
NULL
, 
LOG_WARNING
,

504 
möâl
, 
sock
, 
	`ß„_°ªº‹
 (
î∫o
));

505  
ªt
;

508 #ifde‡
IPV6_MINHOPCNT


509 i‡(
Ámûy
 =
AF_INET6
)

511 
ªt
 = 
	`£tsock›t
 (
sock
, 
IPPROTO_IPV6
, 
IPV6_MINHOPCNT
, &
möâl
, (minttl));

512 i‡(
ªt
 < 0)

513 
	`zlog
 (
NULL
, 
LOG_WARNING
,

515 
möâl
, 
sock
, 
	`ß„_°ªº‹
 (
î∫o
));

516  
ªt
;

520 
î∫o
 = 
EOPNOTSUPP
;

522 
	}
}

525 
	$sock›t_v6⁄ly
 (
Ámûy
, 
sock
)

527 
ªt
, 
⁄
 = 1;

529 #ifde‡
HAVE_IPV6


530 #ifde‡
IPV6_V6ONLY


531 i‡(
Ámûy
 =
AF_INET6
)

533 
ªt
 = 
	`£tsock›t
 (
sock
, 
IPPROTO_IPV6
, 
IPV6_V6ONLY
,

534 (*Ë&
⁄
,  ());

535 i‡(
ªt
 < 0)

537 
	`zlog
 (
NULL
, 
LOG_WARNING
, "can't set sockopt IPV6_V6ONLY "

538 "tÿsockë %d", 
sock
);

546 
	}
}

550 
	$sockuni⁄_ßme
 (
sockuni⁄
 *
su1
, sockuni⁄ *
su2
)

552 
ªt
 = 0;

554 i‡(
su1
->
ß
.
ß_Ámûy
 !
su2
->sa.sa_family)

557 
su1
->
ß
.
ß_Ámûy
)

559 
AF_INET
:

560 
ªt
 = 
	`memcmp
 (&
su1
->
sö
.
sö_addr
, &
su2
->sin.sin_addr,

561  (
ö_addr
));

563 #ifde‡
HAVE_IPV6


564 
AF_INET6
:

565 
ªt
 = 
	`memcmp
 (&
su1
->
sö6
.
sö6_addr
, &
su2
->sin6.sin6_addr,

566  (
ö6_addr
));

570 i‡(
ªt
 == 0)

574 
	}
}

577 
sockuni⁄
 *

578 
	$sockuni⁄_gësock«me
 (
fd
)

580 
ªt
;

581 
sockÀn_t
 
Àn
;

584 
sockaddr
 
ß
;

585 
sockaddr_ö
 
sö
;

586 #ifde‡
HAVE_IPV6


587 
sockaddr_ö6
 
sö6
;

589 
tmp_buf„r
[128];

590 } 
«me
;

591 
sockuni⁄
 *
su
;

593 
	`mem£t
 (&
«me
, 0, Çame);

594 
Àn
 =  
«me
;

596 
ªt
 = 
	`gësock«me
 (
fd
, (
sockaddr
 *)&
«me
, &
Àn
);

597 i‡(
ªt
 < 0)

599 
	`zlog_w¨n
 ("Can't getÜocaláddressándÖort by getsockname: %s",

600 
	`ß„_°ªº‹
 (
î∫o
));

601  
NULL
;

604 i‡(
«me
.
ß
.
ß_Ámûy
 =
AF_INET
)

606 
su
 = 
	`XCALLOC
 (
MTYPE_SOCKUNION
,  (
sockuni⁄
));

607 
	`mem˝y
 (
su
, &
«me
,  (
sockaddr_ö
));

608  
su
;

610 #ifde‡
HAVE_IPV6


611 i‡(
«me
.
ß
.
ß_Ámûy
 =
AF_INET6
)

613 
su
 = 
	`XCALLOC
 (
MTYPE_SOCKUNION
,  (
sockuni⁄
));

614 
	`mem˝y
 (
su
, &
«me
,  (
sockaddr_ö6
));

615 
	`sockuni⁄_n‹mÆi£_m≠≥d
 (
su
);

616  
su
;

619  
NULL
;

620 
	}
}

623 
sockuni⁄
 *

624 
	$sockuni⁄_gë≥î«me
 (
fd
)

626 
ªt
;

627 
sockÀn_t
 
Àn
;

630 
sockaddr
 
ß
;

631 
sockaddr_ö
 
sö
;

632 #ifde‡
HAVE_IPV6


633 
sockaddr_ö6
 
sö6
;

635 
tmp_buf„r
[128];

636 } 
«me
;

637 
sockuni⁄
 *
su
;

639 
	`mem£t
 (&
«me
, 0, Çame);

640 
Àn
 =  
«me
;

641 
ªt
 = 
	`gë≥î«me
 (
fd
, (
sockaddr
 *)&
«me
, &
Àn
);

642 i‡(
ªt
 < 0)

644 
	`zlog
 (
NULL
, 
LOG_WARNING
, "Can't getÑemoteáddressándÖort: %s",

645 
	`ß„_°ªº‹
 (
î∫o
));

646  
NULL
;

649 i‡(
«me
.
ß
.
ß_Ámûy
 =
AF_INET
)

651 
su
 = 
	`XCALLOC
 (
MTYPE_SOCKUNION
,  (
sockuni⁄
));

652 
	`mem˝y
 (
su
, &
«me
,  (
sockaddr_ö
));

653  
su
;

655 #ifde‡
HAVE_IPV6


656 i‡(
«me
.
ß
.
ß_Ámûy
 =
AF_INET6
)

658 
su
 = 
	`XCALLOC
 (
MTYPE_SOCKUNION
,  (
sockuni⁄
));

659 
	`mem˝y
 (
su
, &
«me
,  (
sockaddr_ö6
));

660 
	`sockuni⁄_n‹mÆi£_m≠≥d
 (
su
);

661  
su
;

664  
NULL
;

665 
	}
}

668 
__©åibuã__
 ((
unu£d
))

669 
	$sockuni⁄_¥öt
 (
sockuni⁄
 *
su
)

671 i‡(
su
 =
NULL
)

674 
su
->
ß
.
ß_Ámûy
)

676 
AF_INET
:

677 
	`¥ötf
 ("%s\n", 
	`öë_¡ﬂ
 (
su
->
sö
.
sö_addr
));

679 #ifde‡
HAVE_IPV6


680 
AF_INET6
:

682 
buf
 [
SU_ADDRSTRLEN
];

684 
	`¥ötf
 ("%s\n", 
	`öë_¡›
 (
AF_INET6
, &(
su
->
sö6
.
sö6_addr
),

685 
buf
,  (buf)));

690 #ifde‡
AF_LINK


691 
AF_LINK
:

693 
sockaddr_dl
 *
sdl
;

695 
sdl
 = (
sockaddr_dl
 *)&(
su
->
ß
);

696 
	`¥ötf
 ("lök#%d\n", 
sdl
->
sdl_ödex
);

701 
	`¥ötf
 ("af_unknow¿%d\n", 
su
->
ß
.
ß_Ámûy
);

704 
	}
}

706 #ifde‡
HAVE_IPV6


708 
	$ö6addr_cmp
 (
ö6_addr
 *
addr1
, ö6_add∏*
addr2
)

710 
i
;

711 
u_ch¨
 *
p1
, *
p2
;

713 
p1
 = (
u_ch¨
 *)
addr1
;

714 
p2
 = (
u_ch¨
 *)
addr2
;

716 
i
 = 0; i <  (
ö6_addr
); i++)

718 i‡(
p1
[
i
] > 
p2
[i])

720 i‡(
p1
[
i
] < 
p2
[i])

724 
	}
}

728 
	$sockuni⁄_cmp
 (
sockuni⁄
 *
su1
, sockuni⁄ *
su2
)

730 i‡(
su1
->
ß
.
ß_Ámûy
 > 
su2
->sa.sa_family)

732 i‡(
su1
->
ß
.
ß_Ámûy
 < 
su2
->sa.sa_family)

735 i‡(
su1
->
ß
.
ß_Ámûy
 =
AF_INET
)

737 i‡(
	`¡ohl
 (
	`sockuni⁄2ù
 (
su1
)Ë=¡oh»(sockuni⁄2ù (
su2
)))

739 i‡(
	`¡ohl
 (
	`sockuni⁄2ù
 (
su1
)Ë>Çtoh»(sockuni⁄2ù (
su2
)))

744 #ifde‡
HAVE_IPV6


745 i‡(
su1
->
ß
.
ß_Ámûy
 =
AF_INET6
)

746  
	`ö6addr_cmp
 (&
su1
->
sö6
.
sö6_addr
, &
su2
->sin6.sin6_addr);

749 
	}
}

752 
sockuni⁄
 *

753 
	$sockuni⁄_dup
 (
sockuni⁄
 *
su
)

755 
sockuni⁄
 *
dup
 = 
	`XCALLOC
 (
MTYPE_SOCKUNION
,  (sockunion));

756 
	`mem˝y
 (
dup
, 
su
,  (
sockuni⁄
));

757  
dup
;

758 
	}
}

761 
	$sockuni⁄_‰ì
 (
sockuni⁄
 *
su
)

763 
	`XFREE
 (
MTYPE_SOCKUNION
, 
su
);

764 
	}
}

	@sockunion.h

23 #i‚de‡
_ZEBRA_SOCKUNION_H


24 
	#_ZEBRA_SOCKUNION_H


	)

27 
	usockuni⁄
 {

28 
	ssocköë
 {

29 
u_ch¨
 
	msi_Àn
;

30 
u_ch¨
 
	msi_Ámûy
;

31 
u_sh‹t
 
	msi_p‹t
;

32 } 
	msu_si
;

33 
sockaddr_ö
 
	msu_sö
;

34 
sockaddr_ö6
 
	msu_sö6
;

36 
	#su_Àn
 
su_si
.
si_Àn


	)

37 
	#su_Ámûy
 
su_si
.
si_Ámûy


	)

38 
	#su_p‹t
 
su_si
.
si_p‹t


	)

41 
	usockuni⁄


43 
sockaddr
 
	mß
;

44 
sockaddr_ö
 
	msö
;

45 #ifde‡
HAVE_IPV6


46 
sockaddr_ö6
 
	msö6
;

50 
	ec⁄√˘_ªsu…


52 
	mc⁄√˘_îr‹
,

53 
	mc⁄√˘_suc˚ss
,

54 
	mc⁄√˘_ö_¥ogªss


58 #ifde‡
HAVE_IPV6


59 
	#AF_INET_UNION
 
AF_INET6


	)

61 
	#AF_INET_UNION
 
AF_INET


	)

65 
	#SU_ADDRSTRLEN
 46

	)

69 #ifde‡
KAME


70 
	#IN6_LINKLOCAL_IFINDEX
(
a
Ë(◊).
s6_addr
[2] << 8 | (a).s6_addr[3])

	)

71 
	#SET_IN6_LINKLOCAL_IFINDEX
(
a
, 
i
) \

73 (
a
).
s6_addr
[2] = ((
i
) >> 8) & 0xff; \

74 (
a
).
s6_addr
[3] = (
i
) & 0xff; \

75 } 0)

	)

77 
	#IN6_LINKLOCAL_IFINDEX
(
a
)

	)

78 
	#SET_IN6_LINKLOCAL_IFINDEX
(
a
, 
i
)

	)

81 
	#sockuni⁄_Ámûy
(
X
Ë(X)->
ß
.
ß_Ámûy


	)

83 
	#sockuni⁄2ù
(
X
Ë(X)->
sö
.
sö_addr
.
s_addr


	)

86 
°r2sockuni⁄
 (c⁄° *, 
sockuni⁄
 *);

87 c⁄° *
sockuni⁄2°r
 (
sockuni⁄
 *, *, 
size_t
);

88 
sockuni⁄_cmp
 (
sockuni⁄
 *, sockunion *);

89 
sockuni⁄_ßme
 (
sockuni⁄
 *, sockunion *);

91 
sockuni⁄
 *
sockuni⁄_°r2su
 (c⁄° *
°r
);

92 
sockuni⁄_ac˚±
 (
sock
, 
sockuni⁄
 *);

93 
sockuni⁄_°ªam_sockë
 (
sockuni⁄
 *);

94 
sock›t_ªu£addr
 ();

95 
sock›t_ªu£p‹t
 ();

96 
sock›t_v6⁄ly
 (
Ámûy
, 
sock
);

97 
sockuni⁄_böd
 (
sock
, 
sockuni⁄
 *,

98 , 
sockuni⁄
 *);

99 
sock›t_âl
 (
Ámûy
, 
sock
, 
âl
);

100 
sock›t_möâl
 (
Ámûy
, 
sock
, 
möâl
);

101 
sock›t_c‹k
 (
sock
, 
⁄off
);

102 
sockuni⁄_sockë
 (
sockuni⁄
 *
su
);

103 c⁄° *
öë_sut›
 (
sockuni⁄
 *
su
, *
°r
);

104 
c⁄√˘_ªsu…
 
sockuni⁄_c⁄√˘
 (
fd
, 
sockuni⁄
 *
su
,

105 
p‹t
,

107 
sockuni⁄
 *
sockuni⁄_gësock«me
 ();

108 
sockuni⁄
 *
sockuni⁄_gë≥î«me
 ();

109 
sockuni⁄
 *
sockuni⁄_dup
 (sockunion *);

110 
sockuni⁄_‰ì
 (
sockuni⁄
 *);

112 #i‚de‡
HAVE_INET_NTOP


113 c⁄° * 
öë_¡›
 (
Ámûy
, c⁄° *
addΩå
,

114 *
°Ωå
, 
size_t
 
Àn
);

117 #i‚de‡
HAVE_INET_PTON


118 
öë_±⁄
 (
Ámûy
, c⁄° *
°Ωå
, *
addΩå
);

121 #i‚de‡
HAVE_INET_ATON


122 
öë_©⁄
 (c⁄° *
˝
, 
ö_addr
 *
öaddr
);

	@str.c

38 
	~<zebø.h
>

40 #i‚de‡
HAVE_SNPRINTF


46 
	$¢¥ötf
(*
°r
, 
size_t
 
size
, c⁄° *
f‹m©
, ...)

48 
va_li°
 
¨gs
;

50 
	`va_°¨t
 (
¨gs
, 
f‹m©
);

52  
	`v•rötf
 (
°r
, 
f‹m©
, 
¨gs
);

53 
	}
}

56 #i‚de‡
HAVE_STRLCPY


65 
size_t


66 
	$°æ˝y
(*
d
, c⁄° *
s
, 
size_t
 
bufsize
)

68 
size_t
 
Àn
 = 
	`°æí
(
s
);

69 
size_t
 
ªt
 = 
Àn
;

70 i‡(
bufsize
 > 0) {

71 i‡(
Àn
 >
bufsize
)

72 
Àn
 = 
bufsize
-1;

73 
	`mem˝y
(
d
, 
s
, 
Àn
);

74 
d
[
Àn
] = 0;

76  
ªt
;

77 
	}
}

80 #i‚de‡
HAVE_STRLCAT


88 
size_t


89 
	$°æˇt
(*
d
, c⁄° *
s
, 
size_t
 
bufsize
)

91 
size_t
 
Àn1
 = 
	`°æí
(
d
);

92 
size_t
 
Àn2
 = 
	`°æí
(
s
);

93 
size_t
 
ªt
 = 
Àn1
 + 
Àn2
;

95 i‡(
Àn1
 < 
bufsize
 - 1) {

96 i‡(
Àn2
 >
bufsize
 - 
Àn1
)

97 
Àn2
 = 
bufsize
 - 
Àn1
 - 1;

98 
	`mem˝y
(
d
+
Àn1
, 
s
, 
Àn2
);

99 
d
[
Àn1
+
Àn2
] = 0;

101  
ªt
;

102 
	}
}

105 #i‚de‡
HAVE_STRNLEN


106 
size_t


107 
	$°∫Àn
(c⁄° *
s
, 
size_t
 
maxÀn
)

109 c⁄° *
p
;

110  (
p
 = (c⁄° *)
	`memchr
(
s
, '\0', 
maxÀn
)Ë? (
size_t
)(p-s) : maxlen;

111 
	}
}

114 #i‚de‡
HAVE_STRNDUP


116 
	$°∫dup
 (c⁄° *
s
, 
size_t
 
maxÀn
)

118 
size_t
 
Àn
 = 
	`°∫Àn
 (
s
, 
maxÀn
);

119 *
√w
 = (*Ë
	`mÆloc
 (
Àn
 + 1);

121 i‡(
√w
 =
NULL
)

122  
NULL
;

124 
√w
[
Àn
] = '\0';

125  (*Ë
	`mem˝y
 (
√w
, 
s
, 
Àn
);

126 
	}
}

	@str.h

5 #i‚de‡
_ZEBRA_STR_H


6 
	#_ZEBRA_STR_H


	)

8 #i‚de‡
HAVE_SNPRINTF


9 
¢¥ötf
(*, 
size_t
, const *, ...);

12 #i‚de‡
HAVE_VSNPRINTF


13 
	#v¢¥ötf
(
buf
, 
size
, 
f‹m©
, 
¨gs
Ë
	`v•rötf
(buf, f‹m©,árgs)

	)

16 #i‚de‡
HAVE_STRLCPY


17 
size_t
 
°æ˝y
(*, const *, size_t);

20 #i‚de‡
HAVE_STRLCAT


21 
size_t
 
°æˇt
(*, const *, size_t);

24 #i‚de‡
HAVE_STRNLEN


25 
size_t
 
°∫Àn
(c⁄° *
s
, size_à
maxÀn
);

28 #i‚de‡
HAVE_STRNDUP


29 * 
°∫dup
 (c⁄° *, 
size_t
);

	@stream.c

23 
	~<°ddef.h
>

24 
	~<zebø.h
>

26 
	~"°ªam.h
"

27 
	~"mem‹y.h
"

28 
	~"√tw‹k.h
"

29 
	~"¥efix.h
"

30 
	~"log.h
"

33 
	#GETP_VALID
(
S
,
G
) \

34 ((
G
Ë<(
S
)->
ídp
)

	)

35 
	#PUT_AT_VALID
(
S
,
G
Ë
	`GETP_VALID
(S,G)

	)

36 
	#ENDP_VALID
(
S
,
E
) \

37 ((
E
Ë<(
S
)->
size
)

	)

54 
	#STREAM_WARN_OFFSETS
(
S
) \

55 
	`zlog_w¨n
 ("&(struct stream): %p, size: %lu, getp: %lu,Éndp: %lu\n", \

56 (
S
), \

57 (Ë(
S
)->
size
, \

58 (Ë(
S
)->
gëp
, \

59 (Ë(
S
)->
ídp
)\

60 

	)

61 
	#STREAM_VERIFY_SANE
(
S
) \

63 i‡–!(
	`GETP_VALID
(
S
, (S)->
gëp
)Ë&& 
	`ENDP_VALID
(S, (S)->
ídp
) ) \

64 
	`STREAM_WARN_OFFSETS
(
S
); \

65 
	`as£π
 ( 
	`GETP_VALID
(
S
, (S)->
gëp
) ); \

66 
	`as£π
 ( 
	`ENDP_VALID
(
S
, (S)->
ídp
) ); \

67 } 0)

	)

69 
	#STREAM_BOUND_WARN
(
S
, 
WHAT
) \

71 
	`zlog_w¨n
 ("%s: Aâem±Åÿ%†ouào‡bounds", 
__func__
, (
WHAT
)); \

72 
	`STREAM_WARN_OFFSETS
(
S
); \

73 
	`as£π
 (0); \

74 } 0)

	)

77 
	#CHECK_SIZE
(
S
, 
Z
) \

79 i‡(((
S
)->
ídp
 + (
Z
)Ë> (S)->
size
) \

81 
	`zlog_w¨n
 ("CHECK_SIZE:ÅruncatingÑequested size %lu\n", \

82 (Ë(
Z
)); \

83 
	`STREAM_WARN_OFFSETS
(
S
); \

84 (
Z
Ë(
S
)->
size
 - (S)->
ídp
; \

86 } 0);

	)

89 
°ªam
 *

90 
	$°ªam_√w
 (
size_t
 
size
)

92 
°ªam
 *
s
;

94 
	`as£π
 (
size
 > 0);

96 i‡(
size
 == 0)

98 
	`zlog_w¨n
 ("stream_new(): called with 0 size!");

99  
NULL
;

102 
s
 = 
	`XCALLOC
 (
MTYPE_STREAM
,  (
°ªam
));

104 i‡(
s
 =
NULL
)

105  
s
;

107 i‡–(
s
->
d©a
 = 
	`XMALLOC
 (
MTYPE_STREAM_DATA
, 
size
)Ë=
NULL
)

109 
	`XFREE
 (
MTYPE_STREAM
, 
s
);

110  
NULL
;

113 
s
->
size
 = size;

114  
s
;

115 
	}
}

119 
	$°ªam_‰ì
 (
°ªam
 *
s
)

121 i‡(!
s
)

124 
	`XFREE
 (
MTYPE_STREAM_DATA
, 
s
->
d©a
);

125 
	`XFREE
 (
MTYPE_STREAM
, 
s
);

126 
	}
}

128 
°ªam
 *

129 
	$°ªam_c›y
 (
°ªam
 *
√w
, °ªam *
§c
)

131 
	`STREAM_VERIFY_SANE
 (
§c
);

133 
	`as£π
 (
√w
 !
NULL
);

134 
	`as£π
 (
	`STREAM_SIZE
(
√w
Ë>
§c
->
ídp
);

136 
√w
->
ídp
 = 
§c
->endp;

137 
√w
->
gëp
 = 
§c
->getp;

139 
	`mem˝y
 (
√w
->
d©a
, 
§c
->d©a, src->
ídp
);

141  
√w
;

142 
	}
}

144 
°ªam
 *

145 
	$°ªam_dup
 (
°ªam
 *
s
)

147 
°ªam
 *
√w
;

149 
	`STREAM_VERIFY_SANE
 (
s
);

151 i‡–(
√w
 = 
	`°ªam_√w
 (
s
->
ídp
)Ë=
NULL
)

152  
NULL
;

154  (
	`°ªam_c›y
 (
√w
, 
s
));

155 
	}
}

157 
°ªam
 *

158 
	$°ªam_dupˇt
 (
°ªam
 *
s1
, °ªam *
s2
, 
size_t
 
off£t
)

160 
°ªam
 *
√w
;

162 
	`STREAM_VERIFY_SANE
 (
s1
);

163 
	`STREAM_VERIFY_SANE
 (
s2
);

165 i‡–(
√w
 = 
	`°ªam_√w
 (
s1
->
ídp
 + 
s2
->ídp)Ë=
NULL
)

166  
NULL
;

168 
	`mem˝y
 (
√w
->
d©a
, 
s1
->d©a, 
off£t
);

169 
	`mem˝y
 (
√w
->
d©a
 + 
off£t
, 
s2
->d©a, s2->
ídp
);

170 
	`mem˝y
 (
√w
->
d©a
 + 
off£t
 + 
s2
->
ídp
, 
s1
->data + offset,

171 (
s1
->
ídp
 - 
off£t
));

172 
√w
->
ídp
 = 
s1
->íd∞+ 
s2
->endp;

173  
√w
;

174 
	}
}

176 
size_t


177 
	$°ªam_ªsize
 (
°ªam
 *
s
, 
size_t
 
√wsize
)

179 
u_ch¨
 *
√wd©a
;

180 
	`STREAM_VERIFY_SANE
 (
s
);

182 
√wd©a
 = 
	`XREALLOC
 (
MTYPE_STREAM_DATA
, 
s
->
d©a
, 
√wsize
);

184 i‡(
√wd©a
 =
NULL
)

185  
s
->
size
;

187 
s
->
d©a
 = 
√wd©a
;

188 
s
->
size
 = 
√wsize
;

190 i‡(
s
->
ídp
 > s->
size
)

191 
s
->
ídp
 = s->
size
;

192 i‡(
s
->
gëp
 > s->
ídp
)

193 
s
->
gëp
 = s->
ídp
;

195 
	`STREAM_VERIFY_SANE
 (
s
);

197  
s
->
size
;

198 
	}
}

200 
size_t


201 
	$°ªam_gë_gëp
 (
°ªam
 *
s
)

203 
	`STREAM_VERIFY_SANE
(
s
);

204  
s
->
gëp
;

205 
	}
}

207 
size_t


208 
	$°ªam_gë_ídp
 (
°ªam
 *
s
)

210 
	`STREAM_VERIFY_SANE
(
s
);

211  
s
->
ídp
;

212 
	}
}

214 
size_t


215 
	$°ªam_gë_size
 (
°ªam
 *
s
)

217 
	`STREAM_VERIFY_SANE
(
s
);

218  
s
->
size
;

219 
	}
}

223 
	$°ªam_£t_gëp
 (
°ªam
 *
s
, 
size_t
 
pos
)

225 
	`STREAM_VERIFY_SANE
(
s
);

227 i‡(!
	`GETP_VALID
 (
s
, 
pos
))

229 
	`STREAM_BOUND_WARN
 (
s
, "set getp");

230 
pos
 = 
s
->
ídp
;

233 
s
->
gëp
 = 
pos
;

234 
	}
}

237 
	$°ªam_£t_ídp
 (
°ªam
 *
s
, 
size_t
 
pos
)

239 
	`STREAM_VERIFY_SANE
(
s
);

241 i‡(!
	`ENDP_VALID
(
s
, 
pos
))

243 
	`STREAM_BOUND_WARN
 (
s
, "setÉndp");

250 i‡(
s
->
gëp
 > 
pos
)

252 
	`STREAM_BOUND_WARN
(
s
, "setÉndp");

256 
s
->
ídp
 = 
pos
;

257 
	`STREAM_VERIFY_SANE
(
s
);

258 
	}
}

262 
	$°ªam_f‹w¨d_gëp
 (
°ªam
 *
s
, 
size_t
 
size
)

264 
	`STREAM_VERIFY_SANE
(
s
);

266 i‡(!
	`GETP_VALID
 (
s
, s->
gëp
 + 
size
))

268 
	`STREAM_BOUND_WARN
 (
s
, "seek getp");

272 
s
->
gëp
 +
size
;

273 
	}
}

276 
	$°ªam_f‹w¨d_ídp
 (
°ªam
 *
s
, 
size_t
 
size
)

278 
	`STREAM_VERIFY_SANE
(
s
);

280 i‡(!
	`ENDP_VALID
 (
s
, s->
ídp
 + 
size
))

282 
	`STREAM_BOUND_WARN
 (
s
, "seekÉndp");

286 
s
->
ídp
 +
size
;

287 
	}
}

291 
	$°ªam_gë
 (*
d°
, 
°ªam
 *
s
, 
size_t
 
size
)

293 
	`STREAM_VERIFY_SANE
(
s
);

295 i‡(
	`STREAM_READABLE
(
s
Ë< 
size
)

297 
	`STREAM_BOUND_WARN
 (
s
, "get");

301 
	`mem˝y
 (
d°
, 
s
->
d©a
 + s->
gëp
, 
size
);

302 
s
->
gëp
 +
size
;

303 
	}
}

306 
u_ch¨


307 
	$°ªam_gëc
 (
°ªam
 *
s
)

309 
u_ch¨
 
c
;

311 
	`STREAM_VERIFY_SANE
 (
s
);

313 i‡(
	`STREAM_READABLE
(
s
Ë<  (
u_ch¨
))

315 
	`STREAM_BOUND_WARN
 (
s
, "get char");

318 
c
 = 
s
->
d©a
[s->
gëp
++];

320  
c
;

321 
	}
}

324 
u_ch¨


325 
	$°ªam_gëc_‰om
 (
°ªam
 *
s
, 
size_t
 
‰om
)

327 
u_ch¨
 
c
;

329 
	`STREAM_VERIFY_SANE
(
s
);

331 i‡(!
	`GETP_VALID
 (
s
, 
‰om
 +  (
u_ch¨
)))

333 
	`STREAM_BOUND_WARN
 (
s
, "get char");

337 
c
 = 
s
->
d©a
[
‰om
];

339  
c
;

340 
	}
}

343 
u_öt16_t


344 
	$°ªam_gëw
 (
°ªam
 *
s
)

346 
u_öt16_t
 
w
;

348 
	`STREAM_VERIFY_SANE
 (
s
);

350 i‡(
	`STREAM_READABLE
 (
s
Ë<  (
u_öt16_t
))

352 
	`STREAM_BOUND_WARN
 (
s
, "get ");

356 
w
 = 
s
->
d©a
[s->
gëp
++] << 8;

357 
w
 |
s
->
d©a
[s->
gëp
++];

359  
w
;

360 
	}
}

363 
u_öt16_t


364 
	$°ªam_gëw_‰om
 (
°ªam
 *
s
, 
size_t
 
‰om
)

366 
u_öt16_t
 
w
;

368 
	`STREAM_VERIFY_SANE
(
s
);

370 i‡(!
	`GETP_VALID
 (
s
, 
‰om
 +  (
u_öt16_t
)))

372 
	`STREAM_BOUND_WARN
 (
s
, "get ");

376 
w
 = 
s
->
d©a
[
‰om
++] << 8;

377 
w
 |
s
->
d©a
[
‰om
];

379  
w
;

380 
	}
}

383 
u_öt32_t


384 
	$°ªam_gël_‰om
 (
°ªam
 *
s
, 
size_t
 
‰om
)

386 
u_öt32_t
 
l
;

388 
	`STREAM_VERIFY_SANE
(
s
);

390 i‡(!
	`GETP_VALID
 (
s
, 
‰om
 +  (
u_öt32_t
)))

392 
	`STREAM_BOUND_WARN
 (
s
, "getÜong");

396 
l
 = 
s
->
d©a
[
‰om
++] << 24;

397 
l
 |
s
->
d©a
[
‰om
++] << 16;

398 
l
 |
s
->
d©a
[
‰om
++] << 8;

399 
l
 |
s
->
d©a
[
‰om
];

401  
l
;

402 
	}
}

404 
u_öt32_t


405 
	$°ªam_gël
 (
°ªam
 *
s
)

407 
u_öt32_t
 
l
;

409 
	`STREAM_VERIFY_SANE
(
s
);

411 i‡(
	`STREAM_READABLE
 (
s
Ë<  (
u_öt32_t
))

413 
	`STREAM_BOUND_WARN
 (
s
, "getÜong");

417 
l
 = 
s
->
d©a
[s->
gëp
++] << 24;

418 
l
 |
s
->
d©a
[s->
gëp
++] << 16;

419 
l
 |
s
->
d©a
[s->
gëp
++] << 8;

420 
l
 |
s
->
d©a
[s->
gëp
++];

422  
l
;

423 
	}
}

426 
uöt64_t


427 
	$°ªam_gëq_‰om
 (
°ªam
 *
s
, 
size_t
 
‰om
)

429 
uöt64_t
 
q
;

431 
	`STREAM_VERIFY_SANE
(
s
);

433 i‡(!
	`GETP_VALID
 (
s
, 
‰om
 +  (
uöt64_t
)))

435 
	`STREAM_BOUND_WARN
 (
s
, "get quad");

439 
q
 = ((
uöt64_t
Ë
s
->
d©a
[
‰om
++]) << 56;

440 
q
 |((
uöt64_t
Ë
s
->
d©a
[
‰om
++]) << 48;

441 
q
 |((
uöt64_t
Ë
s
->
d©a
[
‰om
++]) << 40;

442 
q
 |((
uöt64_t
Ë
s
->
d©a
[
‰om
++]) << 32;

443 
q
 |((
uöt64_t
Ë
s
->
d©a
[
‰om
++]) << 24;

444 
q
 |((
uöt64_t
Ë
s
->
d©a
[
‰om
++]) << 16;

445 
q
 |((
uöt64_t
Ë
s
->
d©a
[
‰om
++]) << 8;

446 
q
 |((
uöt64_t
Ë
s
->
d©a
[
‰om
++]);

448  
q
;

449 
	}
}

451 
uöt64_t


452 
	$°ªam_gëq
 (
°ªam
 *
s
)

454 
uöt64_t
 
q
;

456 
	`STREAM_VERIFY_SANE
(
s
);

458 i‡(
	`STREAM_READABLE
 (
s
Ë<  (
uöt64_t
))

460 
	`STREAM_BOUND_WARN
 (
s
, "get quad");

464 
q
 = ((
uöt64_t
Ë
s
->
d©a
[s->
gëp
++]) << 56;

465 
q
 |((
uöt64_t
Ë
s
->
d©a
[s->
gëp
++]) << 48;

466 
q
 |((
uöt64_t
Ë
s
->
d©a
[s->
gëp
++]) << 40;

467 
q
 |((
uöt64_t
Ë
s
->
d©a
[s->
gëp
++]) << 32;

468 
q
 |((
uöt64_t
Ë
s
->
d©a
[s->
gëp
++]) << 24;

469 
q
 |((
uöt64_t
Ë
s
->
d©a
[s->
gëp
++]) << 16;

470 
q
 |((
uöt64_t
Ë
s
->
d©a
[s->
gëp
++]) << 8;

471 
q
 |((
uöt64_t
Ë
s
->
d©a
[s->
gëp
++]);

473  
q
;

474 
	}
}

477 
u_öt32_t


478 
	$°ªam_gë_ùv4
 (
°ªam
 *
s
)

480 
u_öt32_t
 
l
;

482 
	`STREAM_VERIFY_SANE
(
s
);

484 i‡(
	`STREAM_READABLE
 (
s
Ë< (
u_öt32_t
))

486 
	`STREAM_BOUND_WARN
 (
s
, "get ipv4");

490 
	`mem˝y
 (&
l
, 
s
->
d©a
 + s->
gëp
, (
u_öt32_t
));

491 
s
->
gëp
 +(
u_öt32_t
);

493  
l
;

494 
	}
}

504 
	$°ªam_put
 (
°ªam
 *
s
, c⁄° *
§c
, 
size_t
 
size
)

508 
	`CHECK_SIZE
(
s
, 
size
);

510 
	`STREAM_VERIFY_SANE
(
s
);

512 i‡(
	`STREAM_WRITEABLE
 (
s
Ë< 
size
)

514 
	`STREAM_BOUND_WARN
 (
s
, "put");

518 i‡(
§c
)

519 
	`mem˝y
 (
s
->
d©a
 + s->
ídp
, 
§c
, 
size
);

521 
	`mem£t
 (
s
->
d©a
 + s->
ídp
, 0, 
size
);

523 
s
->
ídp
 +
size
;

524 
	}
}

528 
	$°ªam_putc
 (
°ªam
 *
s
, 
u_ch¨
 
c
)

530 
	`STREAM_VERIFY_SANE
(
s
);

532 i‡(
	`STREAM_WRITEABLE
 (
s
Ë< (
u_ch¨
))

534 
	`STREAM_BOUND_WARN
 (
s
, "put");

538 
s
->
d©a
[s->
ídp
++] = 
c
;

539   (
u_ch¨
);

540 
	}
}

544 
	$°ªam_putw
 (
°ªam
 *
s
, 
u_öt16_t
 
w
)

546 
	`STREAM_VERIFY_SANE
 (
s
);

548 i‡(
	`STREAM_WRITEABLE
 (
s
Ë<  (
u_öt16_t
))

550 
	`STREAM_BOUND_WARN
 (
s
, "put");

554 
s
->
d©a
[s->
ídp
++] = (
u_ch¨
)(
w
 >> 8);

555 
s
->
d©a
[s->
ídp
++] = (
u_ch¨
Ë
w
;

558 
	}
}

562 
	$°ªam_pué
 (
°ªam
 *
s
, 
u_öt32_t
 
l
)

564 
	`STREAM_VERIFY_SANE
 (
s
);

566 i‡(
	`STREAM_WRITEABLE
 (
s
Ë<  (
u_öt32_t
))

568 
	`STREAM_BOUND_WARN
 (
s
, "put");

572 
s
->
d©a
[s->
ídp
++] = (
u_ch¨
)(
l
 >> 24);

573 
s
->
d©a
[s->
ídp
++] = (
u_ch¨
)(
l
 >> 16);

574 
s
->
d©a
[s->
ídp
++] = (
u_ch¨
)(
l
 >> 8);

575 
s
->
d©a
[s->
ídp
++] = (
u_ch¨
)
l
;

578 
	}
}

582 
	$°ªam_putq
 (
°ªam
 *
s
, 
uöt64_t
 
q
)

584 
	`STREAM_VERIFY_SANE
 (
s
);

586 i‡(
	`STREAM_WRITEABLE
 (
s
Ë<  (
uöt64_t
))

588 
	`STREAM_BOUND_WARN
 (
s
, "put quad");

592 
s
->
d©a
[s->
ídp
++] = (
u_ch¨
)(
q
 >> 56);

593 
s
->
d©a
[s->
ídp
++] = (
u_ch¨
)(
q
 >> 48);

594 
s
->
d©a
[s->
ídp
++] = (
u_ch¨
)(
q
 >> 40);

595 
s
->
d©a
[s->
ídp
++] = (
u_ch¨
)(
q
 >> 32);

596 
s
->
d©a
[s->
ídp
++] = (
u_ch¨
)(
q
 >> 24);

597 
s
->
d©a
[s->
ídp
++] = (
u_ch¨
)(
q
 >> 16);

598 
s
->
d©a
[s->
ídp
++] = (
u_ch¨
)(
q
 >> 8);

599 
s
->
d©a
[s->
ídp
++] = (
u_ch¨
)
q
;

602 
	}
}

605 
	$°ªam_putc_©
 (
°ªam
 *
s
, 
size_t
 
puç
, 
u_ch¨
 
c
)

607 
	`STREAM_VERIFY_SANE
(
s
);

609 i‡(!
	`PUT_AT_VALID
 (
s
, 
puç
 +  (
u_ch¨
)))

611 
	`STREAM_BOUND_WARN
 (
s
, "put");

615 
s
->
d©a
[
puç
] = 
c
;

618 
	}
}

621 
	$°ªam_putw_©
 (
°ªam
 *
s
, 
size_t
 
puç
, 
u_öt16_t
 
w
)

623 
	`STREAM_VERIFY_SANE
(
s
);

625 i‡(!
	`PUT_AT_VALID
 (
s
, 
puç
 +  (
u_öt16_t
)))

627 
	`STREAM_BOUND_WARN
 (
s
, "put");

631 
s
->
d©a
[
puç
] = (
u_ch¨
)(
w
 >> 8);

632 
s
->
d©a
[
puç
 + 1] = (
u_ch¨
Ë
w
;

635 
	}
}

638 
	$°ªam_pué_©
 (
°ªam
 *
s
, 
size_t
 
puç
, 
u_öt32_t
 
l
)

640 
	`STREAM_VERIFY_SANE
(
s
);

642 i‡(!
	`PUT_AT_VALID
 (
s
, 
puç
 +  (
u_öt32_t
)))

644 
	`STREAM_BOUND_WARN
 (
s
, "put");

647 
s
->
d©a
[
puç
] = (
u_ch¨
)(
l
 >> 24);

648 
s
->
d©a
[
puç
 + 1] = (
u_ch¨
)(
l
 >> 16);

649 
s
->
d©a
[
puç
 + 2] = (
u_ch¨
)(
l
 >> 8);

650 
s
->
d©a
[
puç
 + 3] = (
u_ch¨
)
l
;

653 
	}
}

656 
	$°ªam_putq_©
 (
°ªam
 *
s
, 
size_t
 
puç
, 
uöt64_t
 
q
)

658 
	`STREAM_VERIFY_SANE
(
s
);

660 i‡(!
	`PUT_AT_VALID
 (
s
, 
puç
 +  (
uöt64_t
)))

662 
	`STREAM_BOUND_WARN
 (
s
, "put");

665 
s
->
d©a
[
puç
] = (
u_ch¨
)(
q
 >> 56);

666 
s
->
d©a
[
puç
 + 1] = (
u_ch¨
)(
q
 >> 48);

667 
s
->
d©a
[
puç
 + 2] = (
u_ch¨
)(
q
 >> 40);

668 
s
->
d©a
[
puç
 + 3] = (
u_ch¨
)(
q
 >> 32);

669 
s
->
d©a
[
puç
 + 4] = (
u_ch¨
)(
q
 >> 24);

670 
s
->
d©a
[
puç
 + 5] = (
u_ch¨
)(
q
 >> 16);

671 
s
->
d©a
[
puç
 + 6] = (
u_ch¨
)(
q
 >> 8);

672 
s
->
d©a
[
puç
 + 7] = (
u_ch¨
)
q
;

675 
	}
}

679 
	$°ªam_put_ùv4
 (
°ªam
 *
s
, 
u_öt32_t
 
l
)

681 
	`STREAM_VERIFY_SANE
(
s
);

683 i‡(
	`STREAM_WRITEABLE
 (
s
Ë<  (
u_öt32_t
))

685 
	`STREAM_BOUND_WARN
 (
s
, "put");

688 
	`mem˝y
 (
s
->
d©a
 + s->
ídp
, &
l
,  (
u_öt32_t
));

689 
s
->
ídp
 + (
u_öt32_t
);

691   (
u_öt32_t
);

692 
	}
}

696 
	$°ªam_put_ö_addr
 (
°ªam
 *
s
, 
ö_addr
 *
addr
)

698 
	`STREAM_VERIFY_SANE
(
s
);

700 i‡(
	`STREAM_WRITEABLE
 (
s
Ë<  (
u_öt32_t
))

702 
	`STREAM_BOUND_WARN
 (
s
, "put");

706 
	`mem˝y
 (
s
->
d©a
 + s->
ídp
, 
addr
,  (
u_öt32_t
));

707 
s
->
ídp
 + (
u_öt32_t
);

709   (
u_öt32_t
);

710 
	}
}

714 
	$°ªam_put_¥efix
 (
°ªam
 *
s
, 
¥efix
 *
p
)

716 
size_t
 
psize
;

718 
	`STREAM_VERIFY_SANE
(
s
);

720 
psize
 = 
	`PSIZE
 (
p
->
¥efixÀn
);

722 i‡(
	`STREAM_WRITEABLE
 (
s
Ë< (
psize
 +  (
u_ch¨
)))

724 
	`STREAM_BOUND_WARN
 (
s
, "put");

728 
s
->
d©a
[s->
ídp
++] = 
p
->
¥efixÀn
;

729 
	`mem˝y
 (
s
->
d©a
 + s->
ídp
, &
p
->
u
.
¥efix
, 
psize
);

730 
s
->
ídp
 +
psize
;

732  
psize
;

733 
	}
}

737 
	$°ªam_ªad
 (
°ªam
 *
s
, 
fd
, 
size_t
 
size
)

739 
nbyãs
;

741 
	`STREAM_VERIFY_SANE
(
s
);

743 i‡(
	`STREAM_WRITEABLE
 (
s
Ë< 
size
)

745 
	`STREAM_BOUND_WARN
 (
s
, "put");

749 
nbyãs
 = 
	`ªadn
 (
fd
, 
s
->
d©a
 + s->
ídp
, 
size
);

751 i‡(
nbyãs
 > 0)

752 
s
->
ídp
 +
nbyãs
;

754  
nbyãs
;

755 
	}
}

757 
ssize_t


758 
	$°ªam_ªad_åy
(
°ªam
 *
s
, 
fd
, 
size_t
 
size
)

760 
ssize_t
 
nbyãs
;

762 
	`STREAM_VERIFY_SANE
(
s
);

764 i‡(
	`STREAM_WRITEABLE
(
s
Ë< 
size
)

766 
	`STREAM_BOUND_WARN
 (
s
, "put");

772 i‡((
nbyãs
 = 
	`ªad
(
fd
, 
s
->
d©a
 + s->
ídp
, 
size
)) >= 0)

774 
s
->
ídp
 +
nbyãs
;

775  
nbyãs
;

778 i‡(
	`ERRNO_IO_RETRY
(
î∫o
))

780 
	`zlog_w¨n
("%s:Ñód faûed o¿fd %d: %s", 
__func__
, 
fd
, 
	`ß„_°ªº‹
(
î∫o
));

782 
	}
}

787 
ssize_t


788 
	$°ªam_ªcv‰om
 (
°ªam
 *
s
, 
fd
, 
size_t
 
size
, 
Êags
,

789 
sockaddr
 *
‰om
, 
sockÀn_t
 *
‰omÀn
)

791 
ssize_t
 
nbyãs
;

793 
	`STREAM_VERIFY_SANE
(
s
);

795 i‡(
	`STREAM_WRITEABLE
(
s
Ë< 
size
)

797 
	`STREAM_BOUND_WARN
 (
s
, "put");

803 i‡((
nbyãs
 = 
	`ªcv‰om
 (
fd
, 
s
->
d©a
 + s->
ídp
, 
size
,

804 
Êags
, 
‰om
, 
‰omÀn
)) >= 0)

806 
s
->
ídp
 +
nbyãs
;

807  
nbyãs
;

810 i‡(
	`ERRNO_IO_RETRY
(
î∫o
))

812 
	`zlog_w¨n
("%s:Ñód faûed o¿fd %d: %s", 
__func__
, 
fd
, 
	`ß„_°ªº‹
(
î∫o
));

814 
	}
}

821 
ssize_t


822 
	$°ªam_ªcvmsg
 (
°ªam
 *
s
, 
fd
, 
msghdr
 *
msgh
, 
Êags
,

823 
size_t
 
size
)

825 
nbyãs
;

826 
iovec
 *
iov
;

828 
	`STREAM_VERIFY_SANE
(
s
);

829 
	`as£π
 (
msgh
->
msg_iovÀn
 > 0);

831 i‡(
	`STREAM_WRITEABLE
 (
s
Ë< 
size
)

833 
	`STREAM_BOUND_WARN
 (
s
, "put");

839 
iov
 = &(
msgh
->
msg_iov
[0]);

840 
iov
->
iov_ba£
 = (
s
->
d©a
 + s->
ídp
);

841 
iov
->
iov_Àn
 = 
size
;

843 
nbyãs
 = 
	`ªcvmsg
 (
fd
, 
msgh
, 
Êags
);

845 i‡(
nbyãs
 > 0)

846 
s
->
ídp
 +
nbyãs
;

848  
nbyãs
;

849 
	}
}

852 
size_t


853 
	$°ªam_wrôe
 (
°ªam
 *
s
, c⁄° *
±r
, 
size_t
 
size
)

856 
	`CHECK_SIZE
(
s
, 
size
);

858 
	`STREAM_VERIFY_SANE
(
s
);

860 i‡(
	`STREAM_WRITEABLE
 (
s
Ë< 
size
)

862 
	`STREAM_BOUND_WARN
 (
s
, "put");

866 
	`mem˝y
 (
s
->
d©a
 + s->
ídp
, 
±r
, 
size
);

867 
s
->
ídp
 +
size
;

869  
size
;

870 
	}
}

877 
u_ch¨
 *

878 
	$°ªam_≤t
 (
°ªam
 *
s
)

880 
	`STREAM_VERIFY_SANE
(
s
);

881  
s
->
d©a
 + s->
gëp
;

882 
	}
}

886 
	$°ªam_em±y
 (
°ªam
 *
s
)

888 
	`STREAM_VERIFY_SANE
(
s
);

890  (
s
->
ídp
 == 0);

891 
	}
}

895 
	$°ªam_ª£t
 (
°ªam
 *
s
)

897 
	`STREAM_VERIFY_SANE
 (
s
);

899 
s
->
gëp
 = s->
ídp
 = 0;

900 
	}
}

904 
	$°ªam_Êush
 (
°ªam
 *
s
, 
fd
)

906 
nbyãs
;

908 
	`STREAM_VERIFY_SANE
(
s
);

910 
nbyãs
 = 
	`wrôe
 (
fd
, 
s
->
d©a
 + s->
gëp
, s->
ídp
 - s->getp);

912  
nbyãs
;

913 
	}
}

917 
°ªam_fifo
 *

918 
	$°ªam_fifo_√w
 ()

920 
°ªam_fifo
 *
√w
;

922 
√w
 = 
	`XCALLOC
 (
MTYPE_STREAM_FIFO
,  (
°ªam_fifo
));

923  
√w
;

924 
	}
}

928 
	$°ªam_fifo_push
 (
°ªam_fifo
 *
fifo
, 
°ªam
 *
s
)

930 i‡(
fifo
->
èû
)

931 
fifo
->
èû
->
√xt
 = 
s
;

933 
fifo
->
hód
 = 
s
;

935 
fifo
->
èû
 = 
s
;

937 
fifo
->
cou¡
++;

938 
	}
}

941 
°ªam
 *

942 
	$°ªam_fifo_p›
 (
°ªam_fifo
 *
fifo
)

944 
°ªam
 *
s
;

946 
s
 = 
fifo
->
hód
;

948 i‡(
s
)

950 
fifo
->
hód
 = 
s
->
√xt
;

952 i‡(
fifo
->
hód
 =
NULL
)

953 
fifo
->
èû
 = 
NULL
;

955 
fifo
->
cou¡
--;

958  
s
;

959 
	}
}

962 
°ªam
 *

963 
	$°ªam_fifo_hód
 (
°ªam_fifo
 *
fifo
)

965  
fifo
->
hód
;

966 
	}
}

969 
	$°ªam_fifo_˛ón
 (
°ªam_fifo
 *
fifo
)

971 
°ªam
 *
s
;

972 
°ªam
 *
√xt
;

974 
s
 = 
fifo
->
hód
; s; s = 
√xt
)

976 
√xt
 = 
s
->next;

977 
	`°ªam_‰ì
 (
s
);

979 
fifo
->
hód
 = fifo->
èû
 = 
NULL
;

980 
fifo
->
cou¡
 = 0;

981 
	}
}

984 
	$°ªam_fifo_‰ì
 (
°ªam_fifo
 *
fifo
)

986 
	`°ªam_fifo_˛ón
 (
fifo
);

987 
	`XFREE
 (
MTYPE_STREAM_FIFO
, 
fifo
);

988 
	}
}

	@stream.h

23 #i‚de‡
_ZEBRA_STREAM_H


24 
	#_ZEBRA_STREAM_H


	)

26 
	~"¥efix.h
"

95 
	s°ªam


97 
°ªam
 *
	m√xt
;

103 
size_t
 
	mgëp
;

104 
size_t
 
	mídp
;

105 
size_t
 
	msize
;

106 *
	md©a
;

110 
	s°ªam_fifo


112 
size_t
 
	mcou¡
;

114 
°ªam
 *
	mhód
;

115 
°ªam
 *
	mèû
;

119 
	#STREAM_SIZE
(
S
Ë((S)->
size
)

	)

121 
	#STREAM_WRITEABLE
(
S
Ë((S)->
size
 - (S)->
ídp
)

	)

123 
	#STREAM_READABLE
(
S
Ë((S)->
ídp
 - (S)->
gëp
)

	)

125 
	#STREAM_CONCAT_REMAIN
(
S1
, 
S2
, 
size
) \

126 ((
size
Ë- (
S1
)->
ídp
 - (
S2
)->ídp)

	)

129 
	#STREAM_PNT
(
S
Ë
	`°ªam_≤t
((S))

	)

130 
	#STREAM_DATA
(
S
Ë((S)->
d©a
)

	)

131 
	#STREAM_REMAIN
(
S
Ë
	`STREAM_WRITEABLE
((S))

	)

141 
°ªam
 *
°ªam_√w
 (
size_t
);

142 
°ªam_‰ì
 (
°ªam
 *);

143 
°ªam
 * 
°ªam_c›y
 (°ªam *, °ªam *
§c
);

144 
°ªam
 *
°ªam_dup
 (stream *);

145 
size_t
 
°ªam_ªsize
 (
°ªam
 *, size_t);

146 
size_t
 
°ªam_gë_gëp
 (
°ªam
 *);

147 
size_t
 
°ªam_gë_ídp
 (
°ªam
 *);

148 
size_t
 
°ªam_gë_size
 (
°ªam
 *);

149 
u_ch¨
 *
°ªam_gë_d©a
 (
°ªam
 *);

156 
°ªam
 *
°ªam_dupˇt
(°ªam *
s1
, °ªam *
s2
,

157 
size_t
 
off£t
);

159 
°ªam_£t_gëp
 (
°ªam
 *, 
size_t
);

160 
°ªam_£t_ídp
 (
°ªam
 *, 
size_t
);

161 
°ªam_f‹w¨d_gëp
 (
°ªam
 *, 
size_t
);

162 
°ªam_f‹w¨d_ídp
 (
°ªam
 *, 
size_t
);

165 
°ªam_put
 (
°ªam
 *, c⁄° *, 
size_t
);

166 
°ªam_putc
 (
°ªam
 *, 
u_ch¨
);

167 
°ªam_putc_©
 (
°ªam
 *, 
size_t
, 
u_ch¨
);

168 
°ªam_putw
 (
°ªam
 *, 
u_öt16_t
);

169 
°ªam_putw_©
 (
°ªam
 *, 
size_t
, 
u_öt16_t
);

170 
°ªam_pué
 (
°ªam
 *, 
u_öt32_t
);

171 
°ªam_pué_©
 (
°ªam
 *, 
size_t
, 
u_öt32_t
);

172 
°ªam_putq
 (
°ªam
 *, 
uöt64_t
);

173 
°ªam_putq_©
 (
°ªam
 *, 
size_t
, 
uöt64_t
);

174 
°ªam_put_ùv4
 (
°ªam
 *, 
u_öt32_t
);

175 
°ªam_put_ö_addr
 (
°ªam
 *, 
ö_addr
 *);

176 
°ªam_put_¥efix
 (
°ªam
 *, 
¥efix
 *);

178 
°ªam_gë
 (*, 
°ªam
 *, 
size_t
);

179 
u_ch¨
 
°ªam_gëc
 (
°ªam
 *);

180 
u_ch¨
 
°ªam_gëc_‰om
 (
°ªam
 *, 
size_t
);

181 
u_öt16_t
 
°ªam_gëw
 (
°ªam
 *);

182 
u_öt16_t
 
°ªam_gëw_‰om
 (
°ªam
 *, 
size_t
);

183 
u_öt32_t
 
°ªam_gël
 (
°ªam
 *);

184 
u_öt32_t
 
°ªam_gël_‰om
 (
°ªam
 *, 
size_t
);

185 
uöt64_t
 
°ªam_gëq
 (
°ªam
 *);

186 
uöt64_t
 
°ªam_gëq_‰om
 (
°ªam
 *, 
size_t
);

187 
u_öt32_t
 
°ªam_gë_ùv4
 (
°ªam
 *);

189 #unde‡
°ªam_ªad


190 #unde‡
°ªam_wrôe


194 
°ªam_ªad
 (
°ªam
 *, , 
size_t
);

204 
ssize_t
 
°ªam_ªad_åy
(
°ªam
 *
s
, 
fd
, 
size_t
 
size
);

206 
ssize_t
 
°ªam_ªcvmsg
 (
°ªam
 *
s
, 
fd
, 
msghdr
 *,

207 
Êags
, 
size_t
 
size
);

208 
ssize_t
 
°ªam_ªcv‰om
 (
°ªam
 *
s
, 
fd
, 
size_t
 
Àn
,

209 
Êags
, 
sockaddr
 *
‰om
,

210 
sockÀn_t
 *
‰omÀn
);

211 
size_t
 
°ªam_wrôe
 (
°ªam
 *, const *, size_t);

214 
°ªam_ª£t
 (
°ªam
 *);

215 
°ªam_Êush
 (
°ªam
 *, );

216 
°ªam_em±y
 (
°ªam
 *);

219 
u_ch¨
 *
°ªam_≤t
 (
°ªam
 *);

222 
°ªam_fifo
 *
°ªam_fifo_√w
 ();

223 
°ªam_fifo_push
 (
°ªam_fifo
 *
fifo
, 
°ªam
 *
s
);

224 
°ªam
 *
°ªam_fifo_p›
 (
°ªam_fifo
 *
fifo
);

225 
°ªam
 *
°ªam_fifo_hód
 (
°ªam_fifo
 *
fifo
);

226 
°ªam_fifo_˛ón
 (
°ªam_fifo
 *
fifo
);

227 
°ªam_fifo_‰ì
 (
°ªam_fifo
 *
fifo
);

	@table.c

23 
	~<zebø.h
>

25 
	~"¥efix.h
"

26 
	~"èbÀ.h
"

27 
	~"mem‹y.h
"

28 
	~"sockuni⁄.h
"

30 
rouã_node_dñëe
 (
rouã_node
 *);

31 
rouã_èbÀ_‰ì
 (
rouã_èbÀ
 *);

37 
rouã_èbÀ
 *

38 
	$rouã_èbÀ_öô_wôh_dñeg©e
 (
rouã_èbÀ_dñeg©e_t
 *
dñeg©e
)

40 
rouã_èbÀ
 *
π
;

42 
π
 = 
	`XCALLOC
 (
MTYPE_ROUTE_TABLE
,  (
rouã_èbÀ
));

43 
π
->
dñeg©e
 = delegate;

44  
π
;

45 
	}
}

48 
	$rouã_èbÀ_föish
 (
rouã_èbÀ
 *
π
)

50 
	`rouã_èbÀ_‰ì
 (
π
);

51 
	}
}

54 
rouã_node
 *

55 
	$rouã_node_√w
 (
rouã_èbÀ
 *
èbÀ
)

57  
èbÀ
->
dñeg©e
->
	`¸óã_node
 (table->delegate,Åable);

58 
	}
}

61 
rouã_node
 *

62 
	$rouã_node_£t
 (
rouã_èbÀ
 *
èbÀ
, 
¥efix
 *prefix)

64 
rouã_node
 *
node
;

66 
node
 = 
	`rouã_node_√w
 (
èbÀ
);

68 
	`¥efix_c›y
 (&
node
->
p
, 
¥efix
);

69 
node
->
èbÀ
 =Åable;

71  
node
;

72 
	}
}

76 
	$rouã_node_‰ì
 (
rouã_èbÀ
 *
èbÀ
, 
rouã_node
 *
node
)

78 
èbÀ
->
dñeg©e
->
	`de°roy_node
 (èbÀ->dñeg©e,ÅabÀ, 
node
);

79 
	}
}

83 
	$rouã_èbÀ_‰ì
 (
rouã_èbÀ
 *
π
)

85 
rouã_node
 *
tmp_node
;

86 
rouã_node
 *
node
;

88 i‡(
π
 =
NULL
)

91 
node
 = 
π
->
t›
;

96 
node
)

98 i‡(
node
->
l_À·
)

100 
node
 =Çode->
l_À·
;

104 i‡(
node
->
l_right
)

106 
node
 =Çode->
l_right
;

110 
tmp_node
 = 
node
;

111 
node
 =Çode->
∑ª¡
;

113 
tmp_node
->
èbÀ
->
cou¡
--;

114 
tmp_node
->
lock
 = 0;

115 
	`rouã_node_‰ì
 (
π
, 
tmp_node
);

117 i‡(
node
 !
NULL
)

119 i‡(
node
->
l_À·
 =
tmp_node
)

120 
node
->
l_À·
 = 
NULL
;

122 
node
->
l_right
 = 
NULL
;

130 
	`as£π
 (
π
->
cou¡
 == 0);

132 
	`XFREE
 (
MTYPE_ROUTE_TABLE
, 
π
);

134 
	}
}

137 c⁄° 
u_ch¨
 
	gmaskbô
[] =

144 
	$rouã_comm⁄
 (
¥efix
 *
n
, ¥efix *
p
, ¥efix *
√w
)

146 
i
;

147 
u_ch¨
 
diff
;

148 
u_ch¨
 
mask
;

150 
u_ch¨
 *
≈
 = (u_ch¨ *)&
n
->
u
.
¥efix
;

151 
u_ch¨
 *
µ
 = (u_ch¨ *)&
p
->
u
.
¥efix
;

152 
u_ch¨
 *
√wp
 = (u_ch¨ *)&
√w
->
u
.
¥efix
;

154 
i
 = 0; i < 
p
->
¥efixÀn
 / 8; i++)

156 i‡(
≈
[
i
] =
µ
[i])

157 
√wp
[
i
] = 
≈
[i];

162 
√w
->
¥efixÀn
 = 
i
 * 8;

164 i‡(
√w
->
¥efixÀn
 !
p
->prefixlen)

166 
diff
 = 
≈
[
i
] ^ 
µ
[i];

167 
mask
 = 0x80;

168 
√w
->
¥efixÀn
 < 
p
->¥efixÀ¿&& !(
mask
 & 
diff
))

170 
mask
 >>= 1;

171 
√w
->
¥efixÀn
++;

173 
√wp
[
i
] = 
≈
[i] & 
maskbô
[
√w
->
¥efixÀn
 % 8];

175 
	}
}

178 
	$£t_lök
 (
rouã_node
 *
node
, rouã_nodê*
√w
)

180 
bô
 = 
	`¥efix_bô
 (&
√w
->
p
.
u
.
¥efix
, 
node
->p.
¥efixÀn
);

182 
node
->
lök
[
bô
] = 
√w
;

183 
√w
->
∑ª¡
 = 
node
;

184 
	}
}

187 
rouã_node
 *

188 
	$rouã_lock_node
 (
rouã_node
 *
node
)

190 
node
->
lock
++;

191  
node
;

192 
	}
}

196 
	$rouã_u∆ock_node
 (
rouã_node
 *
node
)

198 
	`as£π
 (
node
->
lock
 > 0);

199 
node
->
lock
--;

201 i‡(
node
->
lock
 == 0)

202 
	`rouã_node_dñëe
 (
node
);

203 
	}
}

206 
rouã_node
 *

207 
	$rouã_node_m©ch
 (c⁄° 
rouã_èbÀ
 *
èbÀ
, c⁄° 
¥efix
 *
p
)

209 
rouã_node
 *
node
;

210 
rouã_node
 *
m©ched
;

212 
m©ched
 = 
NULL
;

213 
node
 = 
èbÀ
->
t›
;

217 
node
 &&Çode->
p
.
¥efixÀn
 <=Ö->prefixlen &&

218 
	`¥efix_m©ch
 (&
node
->
p
,Ö))

220 i‡(
node
->
öfo
)

221 
m©ched
 = 
node
;

223 i‡(
node
->
p
.
¥efixÀn
 ==Ö->prefixlen)

226 
node
 =Çode->
lök
[
	`¥efix_bô
(&
p
->
u
.
¥efix
,Çode->p.
¥efixÀn
)];

230 i‡(
m©ched
)

231  
	`rouã_lock_node
 (
m©ched
);

233  
NULL
;

234 
	}
}

236 
rouã_node
 *

237 
	$rouã_node_m©ch_ùv4
 (c⁄° 
rouã_èbÀ
 *
èbÀ
,

238 c⁄° 
ö_addr
 *
addr
)

240 
¥efix_ùv4
 
p
;

242 
	`mem£t
 (&
p
, 0,  (
¥efix_ùv4
));

243 
p
.
Ámûy
 = 
AF_INET
;

244 
p
.
¥efixÀn
 = 
IPV4_MAX_PREFIXLEN
;

245 
p
.
¥efix
 = *
addr
;

247  
	`rouã_node_m©ch
 (
èbÀ
, (
¥efix
 *Ë&
p
);

248 
	}
}

250 #ifde‡
HAVE_IPV6


251 
rouã_node
 *

252 
	$rouã_node_m©ch_ùv6
 (c⁄° 
rouã_èbÀ
 *
èbÀ
,

253 c⁄° 
ö6_addr
 *
addr
)

255 
¥efix_ùv6
 
p
;

257 
	`mem£t
 (&
p
, 0,  (
¥efix_ùv6
));

258 
p
.
Ámûy
 = 
AF_INET6
;

259 
p
.
¥efixÀn
 = 
IPV6_MAX_PREFIXLEN
;

260 
p
.
¥efix
 = *
addr
;

262  
	`rouã_node_m©ch
 (
èbÀ
, (
¥efix
 *Ë&
p
);

263 
	}
}

267 
rouã_node
 *

268 
	$rouã_node_lookup
 (c⁄° 
rouã_èbÀ
 *
èbÀ
, 
¥efix
 *
p
)

270 
rouã_node
 *
node
;

271 
u_ch¨
 
¥efixÀn
 = 
p
->prefixlen;

272 c⁄° 
u_ch¨
 *
¥efix
 = &
p
->
u
.prefix;

274 
node
 = 
èbÀ
->
t›
;

276 
node
 &&Çode->
p
.
¥efixÀn
 <=Örefixlen &&

277 
	`¥efix_m©ch
 (&
node
->
p
,Ö))

279 i‡(
node
->
p
.
¥efixÀn
 ==Örefixlen)

280  
node
->
öfo
 ? 
	`rouã_lock_node
 (nodeË: 
NULL
;

282 
node
 =Çode->
lök
[
	`¥efix_bô
(
¥efix
,Çode->
p
.
¥efixÀn
)];

285  
NULL
;

286 
	}
}

289 
rouã_node
 *

290 
	$rouã_node_gë
 (
rouã_èbÀ
 *c⁄° 
èbÀ
, 
¥efix
 *
p
)

292 
rouã_node
 *
√w
;

293 
rouã_node
 *
node
;

294 
rouã_node
 *
m©ch
;

295 
u_ch¨
 
¥efixÀn
 = 
p
->prefixlen;

296 c⁄° 
u_ch¨
 *
¥efix
 = &
p
->
u
.prefix;

298 
m©ch
 = 
NULL
;

299 
node
 = 
èbÀ
->
t›
;

300 
node
 &&Çode->
p
.
¥efixÀn
 <=Örefixlen &&

301 
	`¥efix_m©ch
 (&
node
->
p
,Ö))

303 i‡(
node
->
p
.
¥efixÀn
 ==Örefixlen)

304  
	`rouã_lock_node
 (
node
);

306 
m©ch
 = 
node
;

307 
node
 =Çode->
lök
[
	`¥efix_bô
(
¥efix
,Çode->
p
.
¥efixÀn
)];

310 i‡(
node
 =
NULL
)

312 
√w
 = 
	`rouã_node_£t
 (
èbÀ
, 
p
);

313 i‡(
m©ch
)

314 
	`£t_lök
 (
m©ch
, 
√w
);

316 
èbÀ
->
t›
 = 
√w
;

320 
√w
 = 
	`rouã_node_√w
 (
èbÀ
);

321 
	`rouã_comm⁄
 (&
node
->
p
,Ö, &
√w
->p);

322 
√w
->
p
.
Ámûy
 =Ö->family;

323 
√w
->
èbÀ
 =Åable;

324 
	`£t_lök
 (
√w
, 
node
);

326 i‡(
m©ch
)

327 
	`£t_lök
 (
m©ch
, 
√w
);

329 
èbÀ
->
t›
 = 
√w
;

331 i‡(
√w
->
p
.
¥efixÀn
 !=Ö->prefixlen)

333 
m©ch
 = 
√w
;

334 
√w
 = 
	`rouã_node_£t
 (
èbÀ
, 
p
);

335 
	`£t_lök
 (
m©ch
, 
√w
);

336 
èbÀ
->
cou¡
++;

339 
èbÀ
->
cou¡
++;

340 
	`rouã_lock_node
 (
√w
);

342  
√w
;

343 
	}
}

347 
	$rouã_node_dñëe
 (
rouã_node
 *
node
)

349 
rouã_node
 *
chûd
;

350 
rouã_node
 *
∑ª¡
;

352 
	`as£π
 (
node
->
lock
 == 0);

353 
	`as£π
 (
node
->
öfo
 =
NULL
);

355 i‡(
node
->
l_À·
 &&Çode->
l_right
)

358 i‡(
node
->
l_À·
)

359 
chûd
 = 
node
->
l_À·
;

361 
chûd
 = 
node
->
l_right
;

363 
∑ª¡
 = 
node
->parent;

365 i‡(
chûd
)

366 
chûd
->
∑ª¡
 =Öarent;

368 i‡(
∑ª¡
)

370 i‡(
∑ª¡
->
l_À·
 =
node
)

371 
∑ª¡
->
l_À·
 = 
chûd
;

373 
∑ª¡
->
l_right
 = 
chûd
;

376 
node
->
èbÀ
->
t›
 = 
chûd
;

378 
node
->
èbÀ
->
cou¡
--;

380 
	`rouã_node_‰ì
 (
node
->
èbÀ
,Çode);

383 i‡(
∑ª¡
 &&Ö¨ít->
lock
 == 0)

384 
	`rouã_node_dñëe
 (
∑ª¡
);

385 
	}
}

389 
rouã_node
 *

390 
	$rouã_t›
 (
rouã_èbÀ
 *
èbÀ
)

393 i‡(
èbÀ
->
t›
 =
NULL
)

394  
NULL
;

397 
	`rouã_lock_node
 (
èbÀ
->
t›
);

398  
èbÀ
->
t›
;

399 
	}
}

402 
rouã_node
 *

403 
	$rouã_√xt
 (
rouã_node
 *
node
)

405 
rouã_node
 *
√xt
;

406 
rouã_node
 *
°¨t
;

411 i‡(
node
->
l_À·
)

413 
√xt
 = 
node
->
l_À·
;

414 
	`rouã_lock_node
 (
√xt
);

415 
	`rouã_u∆ock_node
 (
node
);

416  
√xt
;

418 i‡(
node
->
l_right
)

420 
√xt
 = 
node
->
l_right
;

421 
	`rouã_lock_node
 (
√xt
);

422 
	`rouã_u∆ock_node
 (
node
);

423  
√xt
;

426 
°¨t
 = 
node
;

427 
node
->
∑ª¡
)

429 i‡(
node
->
∑ª¡
->
l_À·
 =nodê&&Çode->∑ª¡->
l_right
)

431 
√xt
 = 
node
->
∑ª¡
->
l_right
;

432 
	`rouã_lock_node
 (
√xt
);

433 
	`rouã_u∆ock_node
 (
°¨t
);

434  
√xt
;

436 
node
 =Çode->
∑ª¡
;

438 
	`rouã_u∆ock_node
 (
°¨t
);

439  
NULL
;

440 
	}
}

443 
rouã_node
 *

444 
	$rouã_√xt_u¡û
 (
rouã_node
 *
node
, rouã_nodê*
limô
)

446 
rouã_node
 *
√xt
;

447 
rouã_node
 *
°¨t
;

452 i‡(
node
->
l_À·
)

454 
√xt
 = 
node
->
l_À·
;

455 
	`rouã_lock_node
 (
√xt
);

456 
	`rouã_u∆ock_node
 (
node
);

457  
√xt
;

459 i‡(
node
->
l_right
)

461 
√xt
 = 
node
->
l_right
;

462 
	`rouã_lock_node
 (
√xt
);

463 
	`rouã_u∆ock_node
 (
node
);

464  
√xt
;

467 
°¨t
 = 
node
;

468 
node
->
∑ª¡
 &&Çodê!
limô
)

470 i‡(
node
->
∑ª¡
->
l_À·
 =nodê&&Çode->∑ª¡->
l_right
)

472 
√xt
 = 
node
->
∑ª¡
->
l_right
;

473 
	`rouã_lock_node
 (
√xt
);

474 
	`rouã_u∆ock_node
 (
°¨t
);

475  
√xt
;

477 
node
 =Çode->
∑ª¡
;

479 
	`rouã_u∆ock_node
 (
°¨t
);

480  
NULL
;

481 
	}
}

484 
	$rouã_èbÀ_cou¡
 (c⁄° 
rouã_èbÀ
 *
èbÀ
)

486  
èbÀ
->
cou¡
;

487 
	}
}

494 
rouã_node
 *

495 
	$rouã_node_¸óã
 (
rouã_èbÀ_dñeg©e_t
 *
dñeg©e
,

496 
rouã_èbÀ
 *
èbÀ
)

498 
rouã_node
 *
node
;

499 
node
 = 
	`XCALLOC
 (
MTYPE_ROUTE_NODE
,  (
rouã_node
));

500  
node
;

501 
	}
}

509 
	$rouã_node_de°roy
 (
rouã_èbÀ_dñeg©e_t
 *
dñeg©e
,

510 
rouã_èbÀ
 *
èbÀ
, 
rouã_node
 *
node
)

512 
	`XFREE
 (
MTYPE_ROUTE_NODE
, 
node
);

513 
	}
}

518 
rouã_èbÀ_dñeg©e_t
 
	gdeÁu…_dñeg©e
 = {

519 .
¸óã_node
 = 
rouã_node_¸óã
,

520 .
	gde°roy_node
 = 
rouã_node_de°roy


526 
rouã_èbÀ
 *

527 
	$rouã_èbÀ_öô
 ()

529  
	`rouã_èbÀ_öô_wôh_dñeg©e
 (&
deÁu…_dñeg©e
);

530 
	}
}

543 
	$rouã_èbÀ_¥efix_ôî_cmp
 (
¥efix
 *
p1
, ¥efix *
p2
)

545 
¥efix
 
comm⁄_•a˚
;

546 
¥efix
 *
comm⁄
 = &
comm⁄_•a˚
;

548 i‡(
p1
->
¥efixÀn
 <
p2
->prefixlen)

550 i‡(
	`¥efix_m©ch
 (
p1
, 
p2
))

556  (
p1
->
¥efixÀn
 =
p2
->prefixlen) ? 0 : -1;

565 i‡(
	`¥efix_m©ch
 (
p2
, 
p1
))

569 
	`rouã_comm⁄
 (
p1
, 
p2
, 
comm⁄
);

570 
	`as£π
 (
comm⁄
->
¥efixÀn
 < 
p1
->prefixlen);

571 
	`as£π
 (
comm⁄
->
¥efixÀn
 < 
p2
->prefixlen);

579 i‡(
	`¥efix_bô
 (&
p1
->
u
.
¥efix
, 
comm⁄
->
¥efixÀn
))

585 
	`as£π
 (!
	`¥efix_bô
 (&
p2
->
u
.
¥efix
, 
comm⁄
->
¥efixÀn
));

592 
	`as£π
 (
	`¥efix_bô
 (&
p2
->
u
.
¥efix
, 
comm⁄
->
¥efixÀn
));

594 
	}
}

602 
rouã_node
 *

603 
	$rouã_gë_subåì_√xt
 (
rouã_node
 *
node
)

605 
node
->
∑ª¡
)

607 i‡(
node
->
∑ª¡
->
l_À·
 =nodê&&Çode->∑ª¡->
l_right
)

608  
node
->
∑ª¡
->
l_right
;

610 
node
 =Çode->
∑ª¡
;

613  
NULL
;

614 
	}
}

624 
rouã_node
 *

625 
	$rouã_èbÀ_gë_√xt_öã∫Æ
 (c⁄° 
rouã_èbÀ
 *
èbÀ
,

626 
¥efix
 *
p
)

628 
rouã_node
 *
node
, *
tmp_node
;

629 
cmp
;

631 
node
 = 
èbÀ
->
t›
;

633 
node
)

635 
m©ch
;

637 i‡(
node
->
p
.
¥efixÀn
 <Ö->prefixlen)

638 
m©ch
 = 
	`¥efix_m©ch
 (&
node
->
p
,Ö);

640 
m©ch
 = 
	`¥efix_m©ch
 (
p
, &
node
->p);

642 i‡(
m©ch
)

644 i‡(
node
->
p
.
¥efixÀn
 ==Ö->prefixlen)

651 
	`rouã_lock_node
 (
node
);

652 
node
 = 
	`rouã_√xt
 (node);

653 i‡(
node
)

654 
	`rouã_u∆ock_node
 (
node
);

656  (
node
);

659 i‡(
node
->
p
.
¥efixÀn
 >Ö->prefixlen)

665  
node
;

671 
tmp_node
 = 
node
->
lök
[
	`¥efix_bô
 (&
p
->
u
.
¥efix
,Çode->p.
¥efixÀn
)];

673 i‡(
tmp_node
)

675 
node
 = 
tmp_node
;

683 i‡(
node
->
l_right
)

684  
node
->
l_right
;

690  
	`rouã_gë_subåì_√xt
 (
node
);

696 
cmp
 = 
	`rouã_èbÀ_¥efix_ôî_cmp
 (&
node
->
p
,Ö);

697 i‡(
cmp
 > 0)

703  
node
;

706 
	`as£π
 (
cmp
 < 0);

714  
	`rouã_gë_subåì_√xt
 (
node
);

717  
NULL
;

718 
	}
}

726 
rouã_node
 *

727 
	$rouã_èbÀ_gë_√xt
 (c⁄° 
rouã_èbÀ
 *
èbÀ
, 
¥efix
 *
p
)

729 
rouã_node
 *
node
;

731 
node
 = 
	`rouã_èbÀ_gë_√xt_öã∫Æ
 (
èbÀ
, 
p
);

732 i‡(
node
)

734 
	`as£π
 (
	`rouã_èbÀ_¥efix_ôî_cmp
 (&
node
->
p
,Ö) > 0);

735 
	`rouã_lock_node
 (
node
);

737  
node
;

738 
	}
}

744 
	$rouã_èbÀ_ôî_öô
 (
rouã_èbÀ_ôî_t
 * 
ôî
, 
rouã_èbÀ
 *
èbÀ
)

746 
	`mem£t
 (
ôî
, 0,  (*iter));

747 
ôî
->
°©e
 = 
RT_ITER_STATE_INIT
;

748 
ôî
->
èbÀ
 =Åable;

749 
	}
}

760 
	$rouã_èbÀ_ôî_∑u£
 (
rouã_èbÀ_ôî_t
 * 
ôî
)

762 
ôî
->
°©e
)

765 
RT_ITER_STATE_INIT
:

766 
RT_ITER_STATE_PAUSED
:

767 
RT_ITER_STATE_DONE
:

770 
RT_ITER_STATE_ITERATING
:

777 
	`¥efix_c›y
 (&
ôî
->
∑u£_¥efix
, &ôî->
cuºít
->
p
);

778 
	`rouã_u∆ock_node
 (
ôî
->
cuºít
);

779 
ôî
->
cuºít
 = 
NULL
;

780 
ôî
->
°©e
 = 
RT_ITER_STATE_PAUSED
;

784 
	`as£π
 (0);

787 
	}
}

795 
	$rouã_èbÀ_ôî_˛ónup
 (
rouã_èbÀ_ôî_t
 * 
ôî
)

797 i‡(
ôî
->
°©e
 =
RT_ITER_STATE_ITERATING
)

799 
	`rouã_u∆ock_node
 (
ôî
->
cuºít
);

800 
ôî
->
cuºít
 = 
NULL
;

802 
	`as£π
 (!
ôî
->
cuºít
);

808 
ôî
->
°©e
 = 
RT_ITER_STATE_DONE
;

809 
	}
}

	@table.h

23 #i‚de‡
_ZEBRA_TABLE_H


24 
	#_ZEBRA_TABLE_H


	)

29 
	grouã_node
;

30 
	grouã_èbÀ
;

38 
rouã_èbÀ_dñeg©e_t_
 
	trouã_èbÀ_dñeg©e_t
;

40 
	grouã_node
 * (*
	trouã_èbÀ_¸óã_node_func_t
)

41 (
	trouã_èbÀ_dñeg©e_t
 *, 
	trouã_èbÀ
 *);

43 (*
	trouã_èbÀ_de°roy_node_func_t
)

44 (
	trouã_èbÀ_dñeg©e_t
 *, 
	trouã_èbÀ
 *, 
	trouã_node
 *);

46 
	srouã_èbÀ_dñeg©e_t_


48 
rouã_èbÀ_¸óã_node_func_t
 
¸óã_node
;

49 
rouã_èbÀ_de°roy_node_func_t
 
de°roy_node
;

53 
	srouã_èbÀ


55 
rouã_node
 *
t›
;

60 
rouã_èbÀ_dñeg©e_t
 *
dñeg©e
;

62 
cou¡
;

67 *
öfo
;

73 
	#ROUTE_NODE_FIELDS
 \

75 
¥efix
 
p
; \

78 
rouã_èbÀ
 *
èbÀ
; \

79 
rouã_node
 *
∑ª¡
; \

80 
rouã_node
 *
lök
[2]; \

83 
lock
; \

86 *
öfo
; \

89 *
aggªg©e
;

	)

93 
	srouã_node


95 
ROUTE_NODE_FIELDS
;

97 
	#l_À·
 
lök
[0]

	)

98 
	#l_right
 
lök
[1]

	)

101 
rouã_èbÀ_ôî_t_
 
	trouã_èbÀ_ôî_t
;

105 
RT_ITER_STATE_INIT
,

106 
RT_ITER_STATE_ITERATING
,

107 
RT_ITER_STATE_PAUSED
,

108 
RT_ITER_STATE_DONE


109 } 
	trouã_èbÀ_ôî_°©e_t
;

116 
	srouã_èbÀ_ôî_t_


119 
rouã_èbÀ_ôî_°©e_t
 
°©e
;

125 
rouã_èbÀ
 *
èbÀ
;

130 
rouã_node
 *
cuºít
;

135 
¥efix
 
∑u£_¥efix
;

139 
rouã_èbÀ
 *
	`rouã_èbÀ_öô
 ();

141 
rouã_èbÀ
 *

142 
	`rouã_èbÀ_öô_wôh_dñeg©e
 (
rouã_èbÀ_dñeg©e_t
 *);

144 
	`rouã_èbÀ_föish
 (
rouã_èbÀ
 *);

145 
	`rouã_u∆ock_node
 (
rouã_node
 *
node
);

146 
rouã_node
 *
	`rouã_t›
 (
rouã_èbÀ
 *);

147 
rouã_node
 *
	`rouã_√xt
 (route_node *);

148 
rouã_node
 *
	`rouã_√xt_u¡û
 (route_node *,

149 
rouã_node
 *);

150 
rouã_node
 *
	`rouã_node_gë
 (
rouã_èbÀ
 *const,

151 
¥efix
 *);

152 
rouã_node
 *
	`rouã_node_lookup
 (c⁄° 
rouã_èbÀ
 *,

153 
¥efix
 *);

154 
rouã_node
 *
	`rouã_lock_node
 (rouã_nodê*
node
);

155 
rouã_node
 *
	`rouã_node_m©ch
 (c⁄° 
rouã_èbÀ
 *,

156 c⁄° 
¥efix
 *);

157 
rouã_node
 *
	`rouã_node_m©ch_ùv4
 (c⁄° 
rouã_èbÀ
 *,

158 c⁄° 
ö_addr
 *);

159 #ifde‡
HAVE_IPV6


160 
rouã_node
 *
	`rouã_node_m©ch_ùv6
 (c⁄° 
rouã_èbÀ
 *,

161 c⁄° 
ö6_addr
 *);

164 
	`rouã_èbÀ_cou¡
 (c⁄° 
rouã_èbÀ
 *);

166 
rouã_node
 *

167 
	`rouã_èbÀ_gë_√xt
 (c⁄° 
rouã_èbÀ
 *
èbÀ
, 
¥efix
 *
p
);

169 
	`rouã_èbÀ_¥efix_ôî_cmp
 (
¥efix
 *
p1
, ¥efix *
p2
);

174 
	`rouã_èbÀ_ôî_öô
 (
rouã_èbÀ_ôî_t
 *
ôî
,

175 
rouã_èbÀ
 *
èbÀ
);

176 
	`rouã_èbÀ_ôî_∑u£
 (
rouã_èbÀ_ôî_t
 *
ôî
);

177 
	`rouã_èbÀ_ôî_˛ónup
 (
rouã_èbÀ_ôî_t
 *
ôî
);

188 
ölöe
 
rouã_node
 *

189 
	$rouã_èbÀ_ôî_√xt
 (
rouã_èbÀ_ôî_t
 * 
ôî
)

191 
rouã_node
 *
node
;

193 
ôî
->
°©e
)

196 
RT_ITER_STATE_INIT
:

201 
node
 = 
	`rouã_t›
 (
ôî
->
èbÀ
);

204 
RT_ITER_STATE_ITERATING
:

205 
node
 = 
	`rouã_√xt
 (
ôî
->
cuºít
);

208 
RT_ITER_STATE_PAUSED
:

213 
node
 = 
	`rouã_èbÀ_gë_√xt
 (
ôî
->
èbÀ
, &ôî->
∑u£_¥efix
);

216 
RT_ITER_STATE_DONE
:

217  
NULL
;

220 
	`as£π
 (0);

223 
ôî
->
cuºít
 = 
node
;

224 i‡(
node
)

225 
ôî
->
°©e
 = 
RT_ITER_STATE_ITERATING
;

227 
ôî
->
°©e
 = 
RT_ITER_STATE_DONE
;

229  
node
;

230 
	}
}

237 
ölöe
 

238 
	$rouã_èbÀ_ôî_is_d⁄e
 (
rouã_èbÀ_ôî_t
 *
ôî
)

240  
ôî
->
°©e
 =
RT_ITER_STATE_DONE
;

241 
	}
}

248 
ölöe
 

249 
	$rouã_èbÀ_ôî_°¨ãd
 (
rouã_èbÀ_ôî_t
 *
ôî
)

251  
ôî
->
°©e
 !
RT_ITER_STATE_INIT
;

252 
	}
}

	@thread.c

24 
	~<zebø.h
>

26 
	~"thªad.h
"

27 
	~"mem‹y.h
"

28 
	~"log.h
"

29 
	~"hash.h
"

30 
	~"pqueue.h
"

31 
	~"comm™d.h
"

32 
	~"sigevít.h
"

34 #i‡
deföed
 
HAVE_SNMP
 && deföed 
SNMP_AGENTX


35 
	~<√t-¢mp/√t-¢mp-c⁄fig.h
>

36 
	~<√t-¢mp/√t-¢mp-ö˛udes.h
>

37 
	~<√t-¢mp/agít/√t-¢mp-agít-ö˛udes.h
>

38 
	~<√t-¢mp/agít/¢mp_v¨s.h
>

40 
agítx_íabÀd
;

43 #i‡
deföed
(
__APPLE__
)

44 
	~<mach/mach.h
>

45 
	~<mach/mach_time.h
>

50 
timevÆ
 
	gª˚¡_time
;

51 
timevÆ
 
	gœ°_ª˚¡_time
;

53 
timevÆ
 
	gªœtive_time
;

54 
timevÆ
 
	gªœtive_time_ba£
;

56 
	gtimîs_öôed
;

58 
hash
 *
	g˝u_ªc‹d
 = 
NULL
;

61 
	#TIMER_SECOND_MICRO
 1000000L

	)

65 
timevÆ


66 
	$timevÆ_adju°
 (
timevÆ
 
a
)

68 
a
.
tv_u£c
 >
TIMER_SECOND_MICRO
)

70 
a
.
tv_u£c
 -
TIMER_SECOND_MICRO
;

71 
a
.
tv_£c
++;

74 
a
.
tv_u£c
 < 0)

76 
a
.
tv_u£c
 +
TIMER_SECOND_MICRO
;

77 
a
.
tv_£c
--;

80 i‡(
a
.
tv_£c
 < 0)

82 
a
.
tv_£c
 =á.
tv_u£c
 = 0;

84  
a
;

85 
	}
}

87 
timevÆ


88 
	$timevÆ_subåa˘
 (
timevÆ
 
a
, timevÆ 
b
)

90 
timevÆ
 
ªt
;

92 
ªt
.
tv_u£c
 = 
a
.tv_u£¯- 
b
.tv_usec;

93 
ªt
.
tv_£c
 = 
a
.tv_£¯- 
b
.tv_sec;

95  
	`timevÆ_adju°
 (
ªt
);

96 
	}
}

99 
	$timevÆ_cmp
 (
timevÆ
 
a
, timevÆ 
b
)

101  (
a
.
tv_£c
 =
b
.tv_sec

102 ? 
a
.
tv_u£c
 - 
b
.tv_u£¯:á.
tv_£c
 - b.tv_sec);

103 
	}
}

106 
	$timevÆ_ñ≠£d
 (
timevÆ
 
a
, timevÆ 
b
)

108  (((
a
.
tv_£c
 - 
b
.tv_£cË* 
TIMER_SECOND_MICRO
)

109 + (
a
.
tv_u£c
 - 
b
.tv_usec));

110 
	}
}

112 #i‡!
deföed
(
HAVE_CLOCK_MONOTONIC
Ë&& !deföed(
__APPLE__
)

114 
	$quagga_gëtimeofday_ªœtive_adju°
 ()

116 
timevÆ
 
diff
;

117 i‡(
	`timevÆ_cmp
 (
ª˚¡_time
, 
œ°_ª˚¡_time
) < 0)

119 
ªœtive_time
.
tv_£c
++;

120 
ªœtive_time
.
tv_u£c
 = 0;

124 
diff
 = 
	`timevÆ_subåa˘
 (
ª˚¡_time
, 
œ°_ª˚¡_time
);

125 
ªœtive_time
.
tv_£c
 +
diff
.tv_sec;

126 
ªœtive_time
.
tv_u£c
 +
diff
.tv_usec;

127 
ªœtive_time
 = 
	`timevÆ_adju°
 (relative_time);

129 
œ°_ª˚¡_time
 = 
ª˚¡_time
;

130 
	}
}

135 
	$quagga_gëtimeofday
 (
timevÆ
 *
tv
)

137 
ªt
;

139 
	`as£π
 (
tv
);

141 i‡(!(
ªt
 = 
	`gëtimeofday
 (&
ª˚¡_time
, 
NULL
)))

144 i‡(!
timîs_öôed
)

146 
ªœtive_time_ba£
 = 
œ°_ª˚¡_time
 = 
ª˚¡_time
;

147 
timîs_öôed
 = 1;

150 i‡(
tv
 !&
ª˚¡_time
)

151 *
tv
 = 
ª˚¡_time
;

154  
ªt
;

155 
	}
}

158 
	$quagga_gë_ªœtive
 (
timevÆ
 *
tv
)

160 
ªt
;

162 #ifde‡
HAVE_CLOCK_MONOTONIC


164 
time•ec
 
ç
;

165 i‡(!(
ªt
 = 
	`˛ock_gëtime
 (
CLOCK_MONOTONIC
, &
ç
)))

167 
ªœtive_time
.
tv_£c
 = 
ç
.tv_sec;

168 
ªœtive_time
.
tv_u£c
 = 
ç
.
tv_n£c
 / 1000;

171 #ñi‡
	`deföed
(
__APPLE__
)

173 
uöt64_t
 
ticks
;

174 
uöt64_t
 
u£c⁄ds
;

175 
mach_timeba£_öfo_d©a_t
 
timeba£_öfo
;

177 
ticks
 = 
	`mach_absﬁuã_time
();

178 i‡(
timeba£_öfo
.
díom
 == 0)

179 
	`mach_timeba£_öfo
(&
timeba£_öfo
);

181 
u£c⁄ds
 = 
ticks
 * 
timeba£_öfo
.
numî
 /Åimeba£_öfo.
díom
 / 1000;

182 
ªœtive_time
.
tv_£c
 = 
u£c⁄ds
 / 1000000;

183 
ªœtive_time
.
tv_u£c
 = 
u£c⁄ds
 % 1000000;

188 i‡(!(
ªt
 = 
	`quagga_gëtimeofday
 (&
ª˚¡_time
)))

189 
	`quagga_gëtimeofday_ªœtive_adju°
();

192 i‡(
tv
)

193 *
tv
 = 
ªœtive_time
;

195  
ªt
;

196 
	}
}

202 
	$quagga_ªÆ_°abûi£d
 (
timevÆ
 *
tv
)

204 *
tv
 = 
ªœtive_time_ba£
;

205 
tv
->
tv_£c
 +
ªœtive_time
.tv_sec;

206 
tv
->
tv_u£c
 +
ªœtive_time
.tv_usec;

207 *
tv
 = 
	`timevÆ_adju°
 (*tv);

208 
	}
}

214 
	$quagga_gëtime
 (
quagga_˛kid
 
˛kid
, 
timevÆ
 *
tv
)

216 
˛kid
)

218 
QUAGGA_CLK_REALTIME
:

219  
	`quagga_gëtimeofday
 (
tv
);

220 
QUAGGA_CLK_MONOTONIC
:

221  
	`quagga_gë_ªœtive
 (
tv
);

222 
QUAGGA_CLK_REALTIME_STABILISED
:

223 
	`quagga_ªÆ_°abûi£d
 (
tv
);

226 
î∫o
 = 
EINVAL
;

229 
	}
}

234 
time_t


235 
	$quagga_time
 (
time_t
 *
t
)

237 
timevÆ
 
tv
;

238 
	`quagga_ªÆ_°abûi£d
 (&
tv
);

239 i‡(
t
)

240 *
t
 = 
tv
.
tv_£c
;

241  
tv
.
tv_£c
;

242 
	}
}

245 
timevÆ


246 
	$ª˚¡_ªœtive_time
 ()

248  
ªœtive_time
;

249 
	}
}

252 
	$˝u_ªc‹d_hash_key
 (
˝u_thªad_hi°‹y
 *
a
)

254  (
uöçå_t
Ë
a
->
func
;

255 
	}
}

258 
	$˝u_ªc‹d_hash_cmp
 (c⁄° 
˝u_thªad_hi°‹y
 *
a
,

259 c⁄° 
˝u_thªad_hi°‹y
 *
b
)

261  
a
->
func
 =
b
->func;

262 
	}
}

265 
	$˝u_ªc‹d_hash_Æloc
 (
˝u_thªad_hi°‹y
 *
a
)

267 
˝u_thªad_hi°‹y
 *
√w
;

268 
√w
 = 
	`XCALLOC
 (
MTYPE_THREAD_STATS
,  (
˝u_thªad_hi°‹y
));

269 
√w
->
func
 = 
a
->func;

270 
√w
->
fun˙ame
 = 
a
->funcname;

271  
√w
;

272 
	}
}

275 
	$˝u_ªc‹d_hash_‰ì
 (*
a
)

277 
˝u_thªad_hi°‹y
 *
hi°
 = 
a
;

279 
	`XFREE
 (
MTYPE_THREAD_STATS
, 
hi°
);

280 
	}
}

283 
	$vty_out_˝u_thªad_hi°‹y
(
vty
* vty,

284 
˝u_thªad_hi°‹y
 *
a
)

286 #ifde‡
HAVE_RUSAGE


287 
	`vty_out
(
vty
, "%7ld.%03ld %9d %8ld %9ld %8ld %9ld",

288 
a
->
˝u
.
tŸÆ
/1000,á->˝u.tŸÆ%1000,á->
tŸÆ_ˇŒs
,

289 
a
->
˝u
.
tŸÆ
/a->
tŸÆ_ˇŒs
,á->˝u.
max
,

290 
a
->
ªÆ
.
tŸÆ
/a->
tŸÆ_ˇŒs
,á->ªÆ.
max
);

292 
	`vty_out
(
vty
, "%7ld.%03ld %9d %8ld %9ld",

293 
a
->
ªÆ
.
tŸÆ
/1000,á->ªÆ.tŸÆ%1000,á->
tŸÆ_ˇŒs
,

294 
a
->
ªÆ
.
tŸÆ
/a->
tŸÆ_ˇŒs
,á->ªÆ.
max
);

296 
	`vty_out
(
vty
, " %c%c%c%c%c%c %s%s",

297 
a
->
ty≥s
 & (1 << 
THREAD_READ
) ? 'R':' ',

298 
a
->
ty≥s
 & (1 << 
THREAD_WRITE
) ? 'W':' ',

299 
a
->
ty≥s
 & (1 << 
THREAD_TIMER
) ? 'T':' ',

300 
a
->
ty≥s
 & (1 << 
THREAD_EVENT
) ? 'E':' ',

301 
a
->
ty≥s
 & (1 << 
THREAD_EXECUTE
) ? 'X':' ',

302 
a
->
ty≥s
 & (1 << 
THREAD_BACKGROUND
) ? 'B' : ' ',

303 
a
->
fun˙ame
, 
VTY_NEWLINE
);

304 
	}
}

307 
	$˝u_ªc‹d_hash_¥öt
(
hash_backë
 *
buckë
,

308 *
¨gs
[])

310 
˝u_thªad_hi°‹y
 *
tŸÆs
 = 
¨gs
[0];

311 
vty
 *vty = 
¨gs
[1];

312 
thªad_ty≥
 *
fûãr
 = 
¨gs
[2];

313 
˝u_thªad_hi°‹y
 *
a
 = 
buckë
->
d©a
;

315 
a
 = 
buckë
->
d©a
;

316 i‡–!(
a
->
ty≥s
 & *
fûãr
) )

318 
	`vty_out_˝u_thªad_hi°‹y
(
vty
,
a
);

319 
tŸÆs
->
tŸÆ_ˇŒs
 +
a
->total_calls;

320 
tŸÆs
->
ªÆ
.
tŸÆ
 +
a
->real.total;

321 i‡(
tŸÆs
->
ªÆ
.
max
 < 
a
->real.max)

322 
tŸÆs
->
ªÆ
.
max
 = 
a
->real.max;

323 #ifde‡
HAVE_RUSAGE


324 
tŸÆs
->
˝u
.
tŸÆ
 +
a
->cpu.total;

325 i‡(
tŸÆs
->
˝u
.
max
 < 
a
->cpu.max)

326 
tŸÆs
->
˝u
.
max
 = 
a
->cpu.max;

328 
	}
}

331 
	$˝u_ªc‹d_¥öt
(
vty
 *vty, 
thªad_ty≥
 
fûãr
)

333 
˝u_thªad_hi°‹y
 
tmp
;

334 *
¨gs
[3] = {&
tmp
, 
vty
, &
fûãr
};

336 
	`mem£t
(&
tmp
, 0, Åmp);

337 
tmp
.
fun˙ame
 = "TOTAL";

338 
tmp
.
ty≥s
 = 
fûãr
;

340 #ifde‡
HAVE_RUSAGE


341 
	`vty_out
(
vty
, "%21s %18s %18s%s",

342 "", "CPU (u£r+sy°em):", "Ró»(wÆl-˛ock):", 
VTY_NEWLINE
);

344 
	`vty_out
(
vty
, "Runtime(ms) Invoked Avg uSec Max uSecs");

345 #ifde‡
HAVE_RUSAGE


346 
	`vty_out
(
vty
, " Avg uSec Max uSecs");

348 
	`vty_out
(
vty
, " Ty≥ Thªad%s", 
VTY_NEWLINE
);

349 
	`hash_ôî©e
(
˝u_ªc‹d
,

350 ((*)(
hash_backë
*,*))
˝u_ªc‹d_hash_¥öt
,

351 
¨gs
);

353 i‡(
tmp
.
tŸÆ_ˇŒs
 > 0)

354 
	`vty_out_˝u_thªad_hi°‹y
(
vty
, &
tmp
);

355 
	}
}

357 
DEFUN
(
show_thªad_˝u
,

358 
show_thªad_˝u_cmd
,

360 
SHOW_STR


365 
	gi
 = 0;

366 
thªad_ty≥
 
	gfûãr
 = (thread_type) -1U;

368 i‡(
	g¨gc
 > 0)

370 
	gfûãr
 = 0;

371 
	g¨gv
[0][
i
] != '\0')

373  
¨gv
[0][
i
] )

377 
fûãr
 |(1 << 
THREAD_READ
);

381 
fûãr
 |(1 << 
THREAD_WRITE
);

385 
fûãr
 |(1 << 
THREAD_TIMER
);

389 
fûãr
 |(1 << 
THREAD_EVENT
);

393 
fûãr
 |(1 << 
THREAD_EXECUTE
);

397 
fûãr
 |(1 << 
THREAD_BACKGROUND
);

402 ++
	gi
;

404 i‡(
	gfûãr
 == 0)

406 
vty_out
(
vty
, "Invalid filter \"%s\" specified,"

408 
¨gv
[0], 
VTY_NEWLINE
);

409  
	gCMD_WARNING
;

413 
˝u_ªc‹d_¥öt
(
vty
, 
fûãr
);

414  
	gCMD_SUCCESS
;

418 
	$˝u_ªc‹d_hash_˛ór
 (
hash_backë
 *
buckë
,

419 *
¨gs
)

421 
thªad_ty≥
 *
fûãr
 = 
¨gs
;

422 
˝u_thªad_hi°‹y
 *
a
 = 
buckë
->
d©a
;

424 
a
 = 
buckë
->
d©a
;

425 i‡–!(
a
->
ty≥s
 & *
fûãr
) )

428 
	`hash_ªÀa£
 (
˝u_ªc‹d
, 
buckë
->
d©a
);

429 
	}
}

432 
	$˝u_ªc‹d_˛ór
 (
thªad_ty≥
 
fûãr
)

434 
thªad_ty≥
 *
tmp
 = &
fûãr
;

435 
	`hash_ôî©e
 (
˝u_ªc‹d
,

436 ((*Ë(
hash_backë
*,*)Ë
˝u_ªc‹d_hash_˛ór
,

437 
tmp
);

438 
	}
}

440 
DEFUN
(
˛ór_thªad_˝u
,

441 
˛ór_thªad_˝u_cmd
,

448 
	gi
 = 0;

449 
thªad_ty≥
 
	gfûãr
 = (thread_type) -1U;

451 i‡(
	g¨gc
 > 0)

453 
	gfûãr
 = 0;

454 
	g¨gv
[0][
i
] != '\0')

456  
¨gv
[0][
i
] )

460 
fûãr
 |(1 << 
THREAD_READ
);

464 
fûãr
 |(1 << 
THREAD_WRITE
);

468 
fûãr
 |(1 << 
THREAD_TIMER
);

472 
fûãr
 |(1 << 
THREAD_EVENT
);

476 
fûãr
 |(1 << 
THREAD_EXECUTE
);

480 
fûãr
 |(1 << 
THREAD_BACKGROUND
);

485 ++
	gi
;

487 i‡(
	gfûãr
 == 0)

489 
vty_out
(
vty
, "Invalid filter \"%s\" specified,"

491 
¨gv
[0], 
VTY_NEWLINE
);

492  
	gCMD_WARNING
;

496 
˝u_ªc‹d_˛ór
 (
fûãr
);

497  
	gCMD_SUCCESS
;

501 
	$thªad_timî_cmp
(*
a
, *
b
)

503 
thªad
 *
thªad_a
 = 
a
;

504 
thªad
 *
thªad_b
 = 
b
;

506 
cmp
 = 
	`timevÆ_cmp
(
thªad_a
->
u
.
ßnds
, 
thªad_b
->u.sands);

508 i‡(
cmp
 < 0)

510 i‡(
cmp
 > 0)

513 
	}
}

516 
	$thªad_timî_upd©e
(*
node
, 
a˘uÆ_posôi⁄
)

518 
thªad
 *thªad = 
node
;

520 
thªad
->
ödex
 = 
a˘uÆ_posôi⁄
;

521 
	}
}

524 
thªad_ma°î
 *

525 
	$thªad_ma°î_¸óã
 ()

527 
thªad_ma°î
 *
rv
;

529 i‡(
˝u_ªc‹d
 =
NULL
)

530 
˝u_ªc‹d


531 
	`hash_¸óã
 (((*Ë(*))
˝u_ªc‹d_hash_key
,

532 ((*Ë(c⁄° *, c⁄° *))
˝u_ªc‹d_hash_cmp
);

534 
rv
 = 
	`XCALLOC
 (
MTYPE_THREAD_MASTER
,  (
thªad_ma°î
));

537 
rv
->
timî
 = 
	`pqueue_¸óã
();

538 
rv
->
background
 = 
	`pqueue_¸óã
();

539 
rv
->
timî
->
cmp
 =Ñv->
background
->cm∞
thªad_timî_cmp
;

540 
rv
->
timî
->
upd©e
 =Ñv->
background
->upd©ê
thªad_timî_upd©e
;

542  
rv
;

543 
	}
}

547 
	$thªad_li°_add
 (
thªad_li°
 *
li°
, 
thªad
 *thread)

549 
thªad
->
√xt
 = 
NULL
;

550 
thªad
->
¥ev
 = 
li°
->
èû
;

551 i‡(
li°
->
èû
)

552 
li°
->
èû
->
√xt
 = 
thªad
;

554 
li°
->
hód
 = 
thªad
;

555 
li°
->
èû
 = 
thªad
;

556 
li°
->
cou¡
++;

557 
	}
}

560 
thªad
 *

561 
	$thªad_li°_dñëe
 (
thªad_li°
 *
li°
, 
thªad
 *thread)

563 i‡(
thªad
->
√xt
)

564 
thªad
->
√xt
->
¥ev
 =Åhread->prev;

566 
li°
->
èû
 = 
thªad
->
¥ev
;

567 i‡(
thªad
->
¥ev
)

568 
thªad
->
¥ev
->
√xt
 =Åhread->next;

570 
li°
->
hód
 = 
thªad
->
√xt
;

571 
thªad
->
√xt
 =Åhªad->
¥ev
 = 
NULL
;

572 
li°
->
cou¡
--;

573  
thªad
;

574 
	}
}

578 
	$thªad_add_unu£
 (
thªad_ma°î
 *
m
, 
thªad
 *thread)

580 
	`as£π
 (
m
 !
NULL
 && 
thªad
 != NULL);

581 
	`as£π
 (
thªad
->
√xt
 =
NULL
);

582 
	`as£π
 (
thªad
->
¥ev
 =
NULL
);

583 
	`as£π
 (
thªad
->
ty≥
 =
THREAD_UNUSED
);

584 
	`thªad_li°_add
 (&
m
->
unu£
, 
thªad
);

585 
	}
}

589 
	$thªad_li°_‰ì
 (
thªad_ma°î
 *
m
, 
thªad_li°
 *
li°
)

591 
thªad
 *
t
;

592 
thªad
 *
√xt
;

594 
t
 = 
li°
->
hód
;Å;Å = 
√xt
)

596 
√xt
 = 
t
->next;

597 
	`XFREE
 (
MTYPE_THREAD
, 
t
);

598 
li°
->
cou¡
--;

599 
m
->
Æloc
--;

601 
	}
}

604 
	$thªad_queue_‰ì
 (
thªad_ma°î
 *
m
, 
pqueue
 *
queue
)

606 
i
;

608 
i
 = 0; i < 
queue
->
size
; i++)

609 
	`XFREE
(
MTYPE_THREAD
, 
queue
->
¨øy
[
i
]);

611 
m
->
Æloc
 -
queue
->
size
;

612 
	`pqueue_dñëe
(
queue
);

613 
	}
}

617 
	$thªad_ma°î_‰ì
 (
thªad_ma°î
 *
m
)

619 
	`thªad_li°_‰ì
 (
m
, &m->
ªad
);

620 
	`thªad_li°_‰ì
 (
m
, &m->
wrôe
);

621 
	`thªad_queue_‰ì
 (
m
, m->
timî
);

622 
	`thªad_li°_‰ì
 (
m
, &m->
evít
);

623 
	`thªad_li°_‰ì
 (
m
, &m->
ªady
);

624 
	`thªad_li°_‰ì
 (
m
, &m->
unu£
);

625 
	`thªad_queue_‰ì
 (
m
, m->
background
);

627 
	`XFREE
 (
MTYPE_THREAD_MASTER
, 
m
);

629 i‡(
˝u_ªc‹d
)

631 
	`hash_˛ón
 (
˝u_ªc‹d
, 
˝u_ªc‹d_hash_‰ì
);

632 
	`hash_‰ì
 (
˝u_ªc‹d
);

633 
˝u_ªc‹d
 = 
NULL
;

635 
	}
}

639 
	$thªad_em±y
 (
thªad_li°
 *
li°
)

641  
li°
->
hód
 ? 0 : 1;

642 
	}
}

645 
thªad
 *

646 
	$thªad_åim_hód
 (
thªad_li°
 *
li°
)

648 i‡(!
	`thªad_em±y
 (
li°
))

649  
	`thªad_li°_dñëe
 (
li°
,Üi°->
hód
);

650  
NULL
;

651 
	}
}

655 
	$thªad_timî_ªmaö_£c⁄d
 (
thªad
 *thread)

657 
	`quagga_gë_ªœtive
 (
NULL
);

659 i‡(
thªad
->
u
.
ßnds
.
tv_£c
 - 
ªœtive_time
.tv_sec > 0)

660  
thªad
->
u
.
ßnds
.
tv_£c
 - 
ªœtive_time
.tv_sec;

663 
	}
}

665 
	#debug¨gdef
 c⁄° *
fun˙ame
, c⁄° *
sched‰om
, 
‰om 


	)

666 
	#debug¨g∑ss
 
fun˙ame
, 
sched‰om
, 
‰om 


	)

669 
thªad
 *

670 
thªad_gë
 (
thªad_ma°î
 *
m
, 
u_ch¨
 
ty≥
,

671 (*
func
Ë(
thªad
 *), *
¨g
, 
debug¨gdef
)

673 
thªad
 *thªad = 
	`thªad_åim_hód
 (&
m
->
unu£
);

675 i‡(! 
thªad
)

677 
thªad
 = 
	`XCALLOC
 (
MTYPE_THREAD
,  (thread));

678 
m
->
Æloc
++;

680 
thªad
->
ty≥
 =Åype;

681 
thªad
->
add_ty≥
 = 
ty≥
;

682 
thªad
->
ma°î
 = 
m
;

683 
thªad
->
func
 = func;

684 
thªad
->
¨g
 =árg;

685 
thªad
->
ödex
 = -1;

687 
thªad
->
fun˙ame
 = funcname;

688 
thªad
->
sched‰om
 = schedfrom;

689 
thªad
->
sched‰om_löe
 = 
‰om 
;

691  
thªad
;

692 
	}
}

695 
thªad
 *

696 
fun˙ame_thªad_add_ªad
 (
thªad_ma°î
 *
m
,

697 (*
func
Ë(
thªad
 *), *
¨g
, 
fd
,

698 
debug¨gdef
)

700 
thªad
 *thread;

702 
	`as£π
 (
m
 !
NULL
);

704 i‡(
	`FD_ISSET
 (
fd
, &
m
->
ªadfd
))

706 
	`zlog
 (
NULL
, 
LOG_WARNING
, "Thîêi†ÆªadyÑód fd [%d]", 
fd
);

707  
NULL
;

710 
thªad
 = 
	`thªad_gë
 (
m
, 
THREAD_READ
, 
func
, 
¨g
, 
debug¨g∑ss
);

711 
	`FD_SET
 (
fd
, &
m
->
ªadfd
);

712 
thªad
->
u
.
fd
 = fd;

713 
	`thªad_li°_add
 (&
m
->
ªad
, 
thªad
);

715  
thªad
;

716 
	}
}

719 
thªad
 *

720 
fun˙ame_thªad_add_wrôe
 (
thªad_ma°î
 *
m
,

721 (*
func
Ë(
thªad
 *), *
¨g
, 
fd
,

722 
debug¨gdef
)

724 
thªad
 *thread;

726 
	`as£π
 (
m
 !
NULL
);

728 i‡(
	`FD_ISSET
 (
fd
, &
m
->
wrôefd
))

730 
	`zlog
 (
NULL
, 
LOG_WARNING
, "Thîêi†Æªady wrôêfd [%d]", 
fd
);

731  
NULL
;

734 
thªad
 = 
	`thªad_gë
 (
m
, 
THREAD_WRITE
, 
func
, 
¨g
, 
debug¨g∑ss
);

735 
	`FD_SET
 (
fd
, &
m
->
wrôefd
);

736 
thªad
->
u
.
fd
 = fd;

737 
	`thªad_li°_add
 (&
m
->
wrôe
, 
thªad
);

739  
thªad
;

740 
	}
}

742 
thªad
 *

743 
fun˙ame_thªad_add_timî_timevÆ
 (
thªad_ma°î
 *
m
,

744 (*
func
Ë(
thªad
 *),

745 
ty≥
,

746 *
¨g
,

747 
timevÆ
 *
time_ªœtive
,

748 
debug¨gdef
)

750 
thªad
 *thread;

751 
pqueue
 *
queue
;

752 
timevÆ
 
Æ¨m_time
;

754 
	`as£π
 (
m
 !
NULL
);

756 
	`as£π
 (
ty≥
 =
THREAD_TIMER
 ||Åy≥ =
THREAD_BACKGROUND
);

757 
	`as£π
 (
time_ªœtive
);

759 
queue
 = ((
ty≥
 =
THREAD_TIMER
Ë? 
m
->
timî
 : m->
background
);

760 
thªad
 = 
	`thªad_gë
 (
m
, 
ty≥
, 
func
, 
¨g
, 
debug¨g∑ss
);

763 
	`quagga_gë_ªœtive
 (
NULL
);

764 
Æ¨m_time
.
tv_£c
 = 
ªœtive_time
.tv_£¯+ 
time_ªœtive
->tv_sec;

765 
Æ¨m_time
.
tv_u£c
 = 
ªœtive_time
.tv_u£¯+ 
time_ªœtive
->tv_usec;

766 
thªad
->
u
.
ßnds
 = 
	`timevÆ_adju°
(
Æ¨m_time
);

768 
	`pqueue_íqueue
(
thªad
, 
queue
);

769  
thªad
;

770 
	}
}

774 
thªad
 *

775 
fun˙ame_thªad_add_timî
 (
thªad_ma°î
 *
m
,

776 (*
func
Ë(
thªad
 *),

777 *
¨g
, 
timî
,

778 
debug¨gdef
)

780 
timevÆ
 
åñ
;

782 
	`as£π
 (
m
 !
NULL
);

784 
åñ
.
tv_£c
 = 
timî
;

785 
åñ
.
tv_u£c
 = 0;

787  
	`fun˙ame_thªad_add_timî_timevÆ
 (
m
, 
func
, 
THREAD_TIMER
, 
¨g
,

788 &
åñ
, 
debug¨g∑ss
);

789 
	}
}

792 
thªad
 *

793 
fun˙ame_thªad_add_timî_m£c
 (
thªad_ma°î
 *
m
,

794 (*
func
Ë(
thªad
 *),

795 *
¨g
, 
timî
,

796 
debug¨gdef
)

798 
timevÆ
 
åñ
;

800 
	`as£π
 (
m
 !
NULL
);

802 
åñ
.
tv_£c
 = 
timî
 / 1000;

803 
åñ
.
tv_u£c
 = 1000*(
timî
 % 1000);

805  
	`fun˙ame_thªad_add_timî_timevÆ
 (
m
, 
func
, 
THREAD_TIMER
,

806 
¨g
, &
åñ
, 
debug¨g∑ss
);

807 
	}
}

810 
thªad
 *

811 
fun˙ame_thªad_add_background
 (
thªad_ma°î
 *
m
,

812 (*
func
Ë(
thªad
 *),

813 *
¨g
, 
dñay
,

814 
debug¨gdef
)

816 
timevÆ
 
åñ
;

818 
	`as£π
 (
m
 !
NULL
);

820 i‡(
dñay
)

822 
åñ
.
tv_£c
 = 
dñay
 / 1000;

823 
åñ
.
tv_u£c
 = 1000*(
dñay
 % 1000);

827 
åñ
.
tv_£c
 = 0;

828 
åñ
.
tv_u£c
 = 0;

831  
	`fun˙ame_thªad_add_timî_timevÆ
 (
m
, 
func
, 
THREAD_BACKGROUND
,

832 
¨g
, &
åñ
, 
debug¨g∑ss
);

833 
	}
}

836 
thªad
 *

837 
fun˙ame_thªad_add_evít
 (
thªad_ma°î
 *
m
,

838 (*
func
Ë(
thªad
 *), *
¨g
, 
vÆ
,

839 
debug¨gdef
)

841 
thªad
 *thread;

843 
	`as£π
 (
m
 !
NULL
);

845 
thªad
 = 
	`thªad_gë
 (
m
, 
THREAD_EVENT
, 
func
, 
¨g
, 
debug¨g∑ss
);

846 
thªad
->
u
.
vÆ
 = val;

847 
	`thªad_li°_add
 (&
m
->
evít
, 
thªad
);

849  
thªad
;

850 
	}
}

854 
	$thªad_ˇn˚l
 (
thªad
 *thread)

856 
thªad_li°
 *
li°
 = 
NULL
;

857 
pqueue
 *
queue
 = 
NULL
;

859 
thªad
->
ty≥
)

861 
THREAD_READ
:

862 
	`as£π
 (
	`FD_ISSET
 (
thªad
->
u
.
fd
, &thªad->
ma°î
->
ªadfd
));

863 
	`FD_CLR
 (
thªad
->
u
.
fd
, &thªad->
ma°î
->
ªadfd
);

864 
li°
 = &
thªad
->
ma°î
->
ªad
;

866 
THREAD_WRITE
:

867 
	`as£π
 (
	`FD_ISSET
 (
thªad
->
u
.
fd
, &thªad->
ma°î
->
wrôefd
));

868 
	`FD_CLR
 (
thªad
->
u
.
fd
, &thªad->
ma°î
->
wrôefd
);

869 
li°
 = &
thªad
->
ma°î
->
wrôe
;

871 
THREAD_TIMER
:

872 
queue
 = 
thªad
->
ma°î
->
timî
;

874 
THREAD_EVENT
:

875 
li°
 = &
thªad
->
ma°î
->
evít
;

877 
THREAD_READY
:

878 
li°
 = &
thªad
->
ma°î
->
ªady
;

880 
THREAD_BACKGROUND
:

881 
queue
 = 
thªad
->
ma°î
->
background
;

888 i‡(
queue
)

890 
	`as£π
(
thªad
->
ödex
 >= 0);

891 
	`as£π
(
thªad
 =
queue
->
¨øy
[thªad->
ödex
]);

892 
	`pqueue_ªmove_©
(
thªad
->
ödex
, 
queue
);

894 i‡(
li°
)

896 
	`thªad_li°_dñëe
 (
li°
, 
thªad
);

900 
	`as£π
(!"Thread should beÉither in queue orÜist!");

903 
thªad
->
ty≥
 = 
THREAD_UNUSED
;

904 
	`thªad_add_unu£
 (
thªad
->
ma°î
,Åhread);

905 
	}
}

909 
	$thªad_ˇn˚l_evít
 (
thªad_ma°î
 *
m
, *
¨g
)

911 
ªt
 = 0;

912 
thªad
 *thread;

914 
thªad
 = 
m
->
evít
.
hód
;

915 
thªad
)

917 
thªad
 *
t
;

919 
t
 = 
thªad
;

920 
thªad
 = 
t
->
√xt
;

922 i‡(
t
->
¨g
 ==árg)

924 
ªt
++;

925 
	`thªad_li°_dñëe
 (&
m
->
evít
, 
t
);

926 
t
->
ty≥
 = 
THREAD_UNUSED
;

927 
	`thªad_add_unu£
 (
m
, 
t
);

932 
thªad
 = 
m
->
ªady
.
hód
;

933 
thªad
)

935 
thªad
 *
t
;

937 
t
 = 
thªad
;

938 
thªad
 = 
t
->
√xt
;

940 i‡(
t
->
¨g
 ==árg)

942 
ªt
++;

943 
	`thªad_li°_dñëe
 (&
m
->
ªady
, 
t
);

944 
t
->
ty≥
 = 
THREAD_UNUSED
;

945 
	`thªad_add_unu£
 (
m
, 
t
);

948  
ªt
;

949 
	}
}

951 
timevÆ
 *

952 
	$thªad_timî_waô
 (
pqueue
 *
queue
, 
timevÆ
 *
timî_vÆ
)

954 i‡(
queue
->
size
)

956 
thªad
 *
√xt_timî
 = 
queue
->
¨øy
[0];

957 *
timî_vÆ
 = 
	`timevÆ_subåa˘
 (
√xt_timî
->
u
.
ßnds
, 
ªœtive_time
);

958  
timî_vÆ
;

960  
NULL
;

961 
	}
}

963 
thªad
 *

964 
	$thªad_run
 (
thªad_ma°î
 *
m
, 
thªad
 *thread,

965 
thªad
 *
„tch
)

967 *
„tch
 = *
thªad
;

968 
thªad
->
ty≥
 = 
THREAD_UNUSED
;

969 
	`thªad_add_unu£
 (
m
, 
thªad
);

970  
„tch
;

971 
	}
}

974 
	$thªad_¥o˚ss_fd
 (
thªad_li°
 *
li°
, 
fd_£t
 *
fd£t
, fd_£à*
mfd£t
)

976 
thªad
 *thread;

977 
thªad
 *
√xt
;

978 
ªady
 = 0;

980 
	`as£π
 (
li°
);

982 
thªad
 = 
li°
->
hód
;Åhªad;Åhªad = 
√xt
)

984 
√xt
 = 
thªad
->next;

986 i‡(
	`FD_ISSET
 (
	`THREAD_FD
 (
thªad
), 
fd£t
))

988 
	`as£π
 (
	`FD_ISSET
 (
	`THREAD_FD
 (
thªad
), 
mfd£t
));

989 
	`FD_CLR
(
	`THREAD_FD
 (
thªad
), 
mfd£t
);

990 
	`thªad_li°_dñëe
 (
li°
, 
thªad
);

991 
	`thªad_li°_add
 (&
thªad
->
ma°î
->
ªady
,Åhread);

992 
thªad
->
ty≥
 = 
THREAD_READY
;

993 
ªady
++;

996  
ªady
;

997 
	}
}

1001 
	$thªad_timî_¥o˚ss
 (
pqueue
 *
queue
, 
timevÆ
 *
timíow
)

1003 
thªad
 *thread;

1004 
ªady
 = 0;

1006 
queue
->
size
)

1008 
thªad
 = 
queue
->
¨øy
[0];

1009 i‡(
	`timevÆ_cmp
 (*
timíow
, 
thªad
->
u
.
ßnds
) < 0)

1010  
ªady
;

1011 
	`pqueue_dequeue
(
queue
);

1012 
thªad
->
ty≥
 = 
THREAD_READY
;

1013 
	`thªad_li°_add
 (&
thªad
->
ma°î
->
ªady
,Åhread);

1014 
ªady
++;

1016  
ªady
;

1017 
	}
}

1021 
	$thªad_¥o˚ss
 (
thªad_li°
 *
li°
)

1023 
thªad
 *thread;

1024 
thªad
 *
√xt
;

1025 
ªady
 = 0;

1027 
thªad
 = 
li°
->
hód
;Åhªad;Åhªad = 
√xt
)

1029 
√xt
 = 
thªad
->next;

1030 
	`thªad_li°_dñëe
 (
li°
, 
thªad
);

1031 
thªad
->
ty≥
 = 
THREAD_READY
;

1032 
	`thªad_li°_add
 (&
thªad
->
ma°î
->
ªady
,Åhread);

1033 
ªady
++;

1035  
ªady
;

1036 
	}
}

1040 
thªad
 *

1041 
	$thªad_„tch
 (
thªad_ma°î
 *
m
, 
thªad
 *
„tch
)

1043 
thªad
 *thread;

1044 
fd_£t
 
ªadfd
;

1045 
fd_£t
 
wrôefd
;

1046 
fd_£t
 
ex˚±fd
;

1047 
timevÆ
 
timî_vÆ
 = { .
tv_£c
 = 0, .
tv_u£c
 = 0 };

1048 
timevÆ
 
timî_vÆ_bg
;

1049 
timevÆ
 *
timî_waô
 = &
timî_vÆ
;

1050 
timevÆ
 *
timî_waô_bg
;

1054 
num
 = 0;

1055 #i‡
deföed
 
HAVE_SNMP
 && deföed 
SNMP_AGENTX


1056 
timevÆ
 
¢mp_timî_waô
;

1057 
¢mpblock
 = 0;

1058 
fd£tsize
;

1062 
	`quagga_sigevít_¥o˚ss
 ();

1067 i‡((
thªad
 = 
	`thªad_åim_hód
 (&
m
->
ªady
)Ë!
NULL
)

1068  
	`thªad_run
 (
m
, 
thªad
, 
„tch
);

1076 
	`thªad_¥o˚ss
 (&
m
->
evít
);

1079 
ªadfd
 = 
m
->readfd;

1080 
wrôefd
 = 
m
->writefd;

1081 
ex˚±fd
 = 
m
->exceptfd;

1084 i‡(
m
->
ªady
.
cou¡
 == 0)

1086 
	`quagga_gë_ªœtive
 (
NULL
);

1087 
timî_waô
 = 
	`thªad_timî_waô
 (
m
->
timî
, &
timî_vÆ
);

1088 
timî_waô_bg
 = 
	`thªad_timî_waô
 (
m
->
background
, &
timî_vÆ_bg
);

1090 i‡(
timî_waô_bg
 &&

1091 (!
timî_waô
 || (
	`timevÆ_cmp
 (*timî_waô, *
timî_waô_bg
) > 0)))

1092 
timî_waô
 = 
timî_waô_bg
;

1095 #i‡
deföed
 
HAVE_SNMP
 && deföed 
SNMP_AGENTX


1101 i‡(
agítx_íabÀd
)

1103 
fd£tsize
 = 
FD_SETSIZE
;

1104 
¢mpblock
 = 1;

1105 i‡(
timî_waô
)

1107 
¢mpblock
 = 0;

1108 
	`mem˝y
(&
¢mp_timî_waô
, 
timî_waô
, (
timevÆ
));

1110 
	`¢mp_£À˘_öfo
(&
fd£tsize
, &
ªadfd
, &
¢mp_timî_waô
, &
¢mpblock
);

1111 i‡(
¢mpblock
 == 0)

1112 
timî_waô
 = &
¢mp_timî_waô
;

1115 
num
 = 
	`£À˘
 (
FD_SETSIZE
, &
ªadfd
, &
wrôefd
, &
ex˚±fd
, 
timî_waô
);

1118 i‡(
num
 < 0)

1120 i‡(
î∫o
 =
EINTR
)

1122 
	`zlog_w¨n
 ("£À˘(Ëîr‹: %s", 
	`ß„_°ªº‹
 (
î∫o
));

1123  
NULL
;

1126 #i‡
deföed
 
HAVE_SNMP
 && deföed 
SNMP_AGENTX


1127 i‡(
agítx_íabÀd
)

1129 i‡(
num
 > 0)

1130 
	`¢mp_ªad
(&
ªadfd
);

1131 i‡(
num
 == 0)

1133 
	`¢mp_timeout
();

1134 
	`run_Æ¨ms
();

1136 
	`√t¢mp_check_out°™dög_agít_ªque°s
();

1143 
	`quagga_gë_ªœtive
 (
NULL
);

1144 
	`thªad_timî_¥o˚ss
 (
m
->
timî
, &
ªœtive_time
);

1147 i‡(
num
 > 0)

1150 
	`thªad_¥o˚ss_fd
 (&
m
->
ªad
, &
ªadfd
, &m->readfd);

1152 
	`thªad_¥o˚ss_fd
 (&
m
->
wrôe
, &
wrôefd
, &m->writefd);

1160 i‡((
thªad
 = 
	`thªad_åim_hód
 (&
m
->
ªady
)Ë!
NULL
)

1161  
	`thªad_run
 (
m
, 
thªad
, 
„tch
);

1165 
	`thªad_timî_¥o˚ss
 (
m
->
background
, &
ªœtive_time
);

1167 i‡((
thªad
 = 
	`thªad_åim_hód
 (&
m
->
ªady
)Ë!
NULL
)

1168  
	`thªad_run
 (
m
, 
thªad
, 
„tch
);

1170 
	}
}

1173 
	$thªad_c⁄sumed_time
 (
RUSAGE_T
 *
now
, RUSAGE_T *
°¨t
, *
˝utime
)

1175 #ifde‡
HAVE_RUSAGE


1177 *
˝utime
 = 
	`timevÆ_ñ≠£d
 (
now
->
˝u
.
ru_utime
, 
°¨t
->cpu.ru_utime) +

1178 
	`timevÆ_ñ≠£d
 (
now
->
˝u
.
ru_°ime
, 
°¨t
->cpu.ru_stime);

1180 *
˝utime
 = 0;

1182  
	`timevÆ_ñ≠£d
 (
now
->
ªÆ
, 
°¨t
->real);

1183 
	}
}

1195 
	$thªad_should_yõld
 (
thªad
 *thread)

1197 
	`quagga_gë_ªœtive
 (
NULL
);

1198  (
	`timevÆ_ñ≠£d
(
ªœtive_time
, 
thªad
->
ªÆ
) >

1199 
THREAD_YIELD_TIME_SLOT
);

1200 
	}
}

1203 
	$thªad_gërußge
 (
RUSAGE_T
 *
r
)

1205 
	`quagga_gë_ªœtive
 (
NULL
);

1206 #ifde‡
HAVE_RUSAGE


1207 
	`gërußge
(
RUSAGE_SELF
, &(
r
->
˝u
));

1209 
r
->
ªÆ
 = 
ªœtive_time
;

1211 #ifde‡
HAVE_CLOCK_MONOTONIC


1216 
	`quagga_gëtimeofday
(&
ª˚¡_time
);

1218 
	}
}

1220 
thªad
 *
	gthªad_cuºít
 = 
NULL
;

1226 
	$thªad_ˇŒ
 (
thªad
 *thread)

1228 
ªÆtime
, 
˝utime
;

1229 
RUSAGE_T
 
bef‹e
, 
a·î
;

1237 i‡(!
thªad
->
hi°
)

1239 
˝u_thªad_hi°‹y
 
tmp
;

1241 
tmp
.
func
 = 
thªad
->func;

1242 
tmp
.
fun˙ame
 = 
thªad
->funcname;

1244 
thªad
->
hi°
 = 
	`hash_gë
 (
˝u_ªc‹d
, &
tmp
,

1245 (* (*Ë(*))
˝u_ªc‹d_hash_Æloc
);

1248 
	`GETRUSAGE
 (&
bef‹e
);

1249 
thªad
->
ªÆ
 = 
bef‹e
.real;

1251 
thªad_cuºít
 = 
thªad
;

1252 (*
thªad
->
func
) (thread);

1253 
thªad_cuºít
 = 
NULL
;

1255 
	`GETRUSAGE
 (&
a·î
);

1257 
ªÆtime
 = 
	`thªad_c⁄sumed_time
 (&
a·î
, &
bef‹e
, &
˝utime
);

1258 
thªad
->
hi°
->
ªÆ
.
tŸÆ
 +
ªÆtime
;

1259 i‡(
thªad
->
hi°
->
ªÆ
.
max
 < 
ªÆtime
)

1260 
thªad
->
hi°
->
ªÆ
.
max
 = 
ªÆtime
;

1261 #ifde‡
HAVE_RUSAGE


1262 
thªad
->
hi°
->
˝u
.
tŸÆ
 +
˝utime
;

1263 i‡(
thªad
->
hi°
->
˝u
.
max
 < 
˝utime
)

1264 
thªad
->
hi°
->
˝u
.
max
 = 
˝utime
;

1267 ++(
thªad
->
hi°
->
tŸÆ_ˇŒs
);

1268 
thªad
->
hi°
->
ty≥s
 |(1 <<Åhªad->
add_ty≥
);

1270 #ifde‡
CONSUMED_TIME_CHECK


1271 i‡(
ªÆtime
 > 
CONSUMED_TIME_CHECK
)

1278 
	`zlog_w¨n
 ("SLOW THREAD:Åask %s (%lx)Ñan for %lums (cpuÅime %lums)",

1279 
thªad
->
fun˙ame
,

1280 (Ë
thªad
->
func
,

1281 
ªÆtime
/1000, 
˝utime
/1000);

1284 
	}
}

1287 
thªad
 *

1288 
fun˙ame_thªad_execuã
 (
thªad_ma°î
 *
m
,

1289 (*
func
)(
thªad
 *),

1290 *
¨g
,

1291 
vÆ
,

1292 
debug¨gdef
)

1294 
thªad
 
dummy
;

1296 
	`mem£t
 (&
dummy
, 0,  (
thªad
));

1298 
dummy
.
ty≥
 = 
THREAD_EVENT
;

1299 
dummy
.
add_ty≥
 = 
THREAD_EXECUTE
;

1300 
dummy
.
ma°î
 = 
NULL
;

1301 
dummy
.
func
 = func;

1302 
dummy
.
¨g
 =árg;

1303 
dummy
.
u
.
vÆ
 = val;

1305 
dummy
.
fun˙ame
 = funcname;

1306 
dummy
.
sched‰om
 = schedfrom;

1307 
dummy
.
sched‰om_löe
 = 
‰om 
;

1309 
	`thªad_ˇŒ
 (&
dummy
);

1311  
NULL
;

1312 
	}
}

	@thread.h

22 #i‚de‡
_ZEBRA_THREAD_H


23 
	#_ZEBRA_THREAD_H


	)

25 
	~<zebø.h
>

27 
	srußge_t


29 #ifde‡
HAVE_RUSAGE


30 
rußge
 
	m˝u
;

32 
timevÆ
 
	mªÆ
;

34 
	#RUSAGE_T
 
rußge_t


	)

36 
	#GETRUSAGE
(
X
Ë
	`thªad_gërußge
(X)

	)

39 
	sthªad_li°


41 
thªad
 *
	mhód
;

42 
thªad
 *
	mèû
;

43 
	mcou¡
;

46 
	gpqueue
;

49 
	sthªad_ma°î


51 
thªad_li°
 
	mªad
;

52 
thªad_li°
 
	mwrôe
;

53 
pqueue
 *
	mtimî
;

54 
thªad_li°
 
	mevít
;

55 
thªad_li°
 
	mªady
;

56 
thªad_li°
 
	munu£
;

57 
pqueue
 *
	mbackground
;

58 
fd_£t
 
	mªadfd
;

59 
fd_£t
 
	mwrôefd
;

60 
fd_£t
 
	mex˚±fd
;

61 
	mÆloc
;

64 
	tthªad_ty≥
;

67 
	sthªad


69 
thªad_ty≥
 
	mty≥
;

70 
thªad_ty≥
 
	madd_ty≥
;

71 
thªad
 *
	m√xt
;

72 
thªad
 *
	m¥ev
;

73 
thªad_ma°î
 *
	mma°î
;

74 (*
	mfunc
Ë(
	mthªad
 *);

75 *
	m¨g
;

77 
	mvÆ
;

78 
	mfd
;

79 
timevÆ
 
	mßnds
;

80 } 
	mu
;

81 
	mödex
;

82 
timevÆ
 
	mªÆ
;

83 
˝u_thªad_hi°‹y
 *
	mhi°
;

84 c⁄° *
	mfun˙ame
;

85 c⁄° *
	msched‰om
;

86 
	msched‰om_löe
;

89 
	s˝u_thªad_hi°‹y


91 (*
	mfunc
)(
	mthªad
 *);

92 
	mtŸÆ_ˇŒs
;

93 
	stime_°©s


95 
	mtŸÆ
, 
	mmax
;

96 } 
	mªÆ
;

97 #ifde‡
HAVE_RUSAGE


98 
time_°©s
 
	m˝u
;

100 
thªad_ty≥
 
	mty≥s
;

101 c⁄° *
	mfun˙ame
;

105 
	equagga_˛kid
 {

106 
	mQUAGGA_CLK_REALTIME
 = 0,

107 
	mQUAGGA_CLK_MONOTONIC
,

108 
	mQUAGGA_CLK_REALTIME_STABILISED
,

112 
	#THREAD_READ
 0

	)

113 
	#THREAD_WRITE
 1

	)

114 
	#THREAD_TIMER
 2

	)

115 
	#THREAD_EVENT
 3

	)

116 
	#THREAD_READY
 4

	)

117 
	#THREAD_BACKGROUND
 5

	)

118 
	#THREAD_UNUSED
 6

	)

119 
	#THREAD_EXECUTE
 7

	)

122 
	#THREAD_YIELD_TIME_SLOT
 10 * 1000L

	)

125 
	#THREAD_ARG
(
X
Ë((X)->
¨g
)

	)

126 
	#THREAD_FD
(
X
Ë((X)->
u
.
fd
)

	)

127 
	#THREAD_VAL
(
X
Ë((X)->
u
.
vÆ
)

	)

129 
	#THREAD_READ_ON
(
ma°î
,
thªad
,
func
,
¨g
,
sock
) \

131 i‡(! 
thªad
) \

132 
thªad
 = 
	`thªad_add_ªad
 (
ma°î
, 
func
, 
¨g
, 
sock
); \

133 } 0)

	)

135 
	#THREAD_WRITE_ON
(
ma°î
,
thªad
,
func
,
¨g
,
sock
) \

137 i‡(! 
thªad
) \

138 
thªad
 = 
	`thªad_add_wrôe
 (
ma°î
, 
func
, 
¨g
, 
sock
); \

139 } 0)

	)

141 
	#THREAD_TIMER_ON
(
ma°î
,
thªad
,
func
,
¨g
,
time
) \

143 i‡(! 
thªad
) \

144 
thªad
 = 
	`thªad_add_timî
 (
ma°î
, 
func
, 
¨g
, 
time
); \

145 } 0)

	)

147 
	#THREAD_TIMER_MSEC_ON
(
ma°î
,
thªad
,
func
,
¨g
,
time
) \

149 i‡(! 
thªad
) \

150 
thªad
 = 
	`thªad_add_timî_m£c
 (
ma°î
, 
func
, 
¨g
, 
time
); \

151 } 0)

	)

153 
	#THREAD_OFF
(
thªad
) \

155 i‡(
thªad
) \

157 
	`thªad_ˇn˚l
 (
thªad
); \

158 
thªad
 = 
NULL
; \

160 } 0)

	)

162 
	#THREAD_READ_OFF
(
thªad
Ë
	`THREAD_OFF
—hªad)

	)

163 
	#THREAD_WRITE_OFF
(
thªad
Ë
	`THREAD_OFF
—hªad)

	)

164 
	#THREAD_TIMER_OFF
(
thªad
Ë
	`THREAD_OFF
—hªad)

	)

166 
	#debug¨gdef
 c⁄° *
fun˙ame
, c⁄° *
sched‰om
, 
‰om 


	)

168 
	#thªad_add_ªad
(
m
,
f
,
a
,
v
Ë
	`fun˙ame_thªad_add_ªad
(m,f,a,v,#f,
__FILE__
,
__LINE__
)

	)

169 
	#thªad_add_wrôe
(
m
,
f
,
a
,
v
Ë
	`fun˙ame_thªad_add_wrôe
(m,f,a,v,#f,
__FILE__
,
__LINE__
)

	)

170 
	#thªad_add_timî
(
m
,
f
,
a
,
v
Ë
	`fun˙ame_thªad_add_timî
(m,f,a,v,#f,
__FILE__
,
__LINE__
)

	)

171 
	#thªad_add_timî_m£c
(
m
,
f
,
a
,
v
Ë
	`fun˙ame_thªad_add_timî_m£c
(m,f,a,v,#f,
__FILE__
,
__LINE__
)

	)

172 
	#thªad_add_evít
(
m
,
f
,
a
,
v
Ë
	`fun˙ame_thªad_add_evít
(m,f,a,v,#f,
__FILE__
,
__LINE__
)

	)

173 
	#thªad_execuã
(
m
,
f
,
a
,
v
Ë
	`fun˙ame_thªad_execuã
(m,f,a,v,#f,
__FILE__
,
__LINE__
)

	)

176 
	#thªad_add_background
(
m
,
f
,
a
,
v
Ë
	`fun˙ame_thªad_add_background
(m,f,a,v,#f,
__FILE__
,
__LINE__
)

	)

179 
thªad_ma°î
 *
thªad_ma°î_¸óã
 ();

180 
thªad_ma°î_‰ì
 (
thªad_ma°î
 *);

182 
thªad
 *
fun˙ame_thªad_add_ªad
 (
thªad_ma°î
 *,

183 (*)(
thªad
 *),

184 *, , 
debug¨gdef
);

185 
thªad
 *
	`fun˙ame_thªad_add_wrôe
 (
thªad_ma°î
 *,

186 (*)(
thªad
 *),

187 *, , 
debug¨gdef
);

188 
thªad
 *
	`fun˙ame_thªad_add_timî
 (
thªad_ma°î
 *,

189 (*)(
thªad
 *),

190 *, , 
debug¨gdef
);

191 
thªad
 *
	`fun˙ame_thªad_add_timî_m£c
 (
thªad_ma°î
 *,

192 (*)(
thªad
 *),

193 *, , 
debug¨gdef
);

194 
thªad
 *
	`fun˙ame_thªad_add_evít
 (
thªad_ma°î
 *,

195 (*)(
thªad
 *),

196 *, , 
debug¨gdef
);

197 
thªad
 *
	`fun˙ame_thªad_add_background
 (
thªad_ma°î
 *,

198 (*
func
)(
thªad
 *),

199 *
¨g
,

200 
mûli£c⁄ds_to_dñay
,

201 
debug¨gdef
);

202 
thªad
 *
	`fun˙ame_thªad_execuã
 (
thªad_ma°î
 *,

203 (*)(
thªad
 *),

204 *, , 
debug¨gdef
);

205 #unde‡
debug¨gdef


207 
	`thªad_ˇn˚l
 (
thªad
 *);

208 
	`thªad_ˇn˚l_evít
 (
thªad_ma°î
 *, *);

209 
thªad
 *
	`thªad_„tch
 (
thªad_ma°î
 *, thread *);

210 
	`thªad_ˇŒ
 (
thªad
 *);

211 
	`thªad_timî_ªmaö_£c⁄d
 (
thªad
 *);

212 
	`thªad_should_yõld
 (
thªad
 *);

213 
	`timevÆ_ñ≠£d
 (
timevÆ
 
a
, timevÆ 
b
);

216 
	`thªad_gërußge
 (
RUSAGE_T
 *);

217 
cmd_ñemít
 
show_thªad_˝u_cmd
;

218 
cmd_ñemít
 
˛ór_thªad_˝u_cmd
;

224 
	`quagga_gëtime
 (
quagga_˛kid
, 
timevÆ
 *);

225 
time_t
 
	`quagga_time
 (time_t *);

228 
	`thªad_c⁄sumed_time
(
RUSAGE_T
 *
a·î
, RUSAGE_T *
bef‹e
,

229 *
˝u_time_ñ≠£d
);

234 
timevÆ
 
ª˚¡_time
;

236 
timevÆ
 
	`ª˚¡_ªœtive_time
 ();

239 
thªad
 *
thªad_cuºít
;

	@vector.c

22 
	~<zebø.h
>

24 
	~"ve˘‹.h
"

25 
	~"mem‹y.h
"

28 
ve˘‹


29 
	$ve˘‹_öô
 (
size
)

31 
ve˘‹
 
v
 = 
	`XCALLOC
 (
MTYPE_VECTOR
,  (
_ve˘‹
));

34 i‡(
size
 == 0)

35 
size
 = 1;

37 
v
->
Ælo˚d
 = 
size
;

38 
v
->
a˘ive
 = 0;

39 
v
->
ödex
 = 
	`XCALLOC
 (
MTYPE_VECTOR_INDEX
,  (*Ë* 
size
);

40  
v
;

41 
	}
}

44 
	$ve˘‹_⁄ly_wøµî_‰ì
 (
ve˘‹
 
v
)

46 
	`XFREE
 (
MTYPE_VECTOR
, 
v
);

47 
	}
}

50 
	$ve˘‹_⁄ly_ödex_‰ì
 (*
ödex
)

52 
	`XFREE
 (
MTYPE_VECTOR_INDEX
, 
ödex
);

53 
	}
}

56 
	$ve˘‹_‰ì
 (
ve˘‹
 
v
)

58 
	`XFREE
 (
MTYPE_VECTOR_INDEX
, 
v
->
ödex
);

59 
	`XFREE
 (
MTYPE_VECTOR
, 
v
);

60 
	}
}

62 
ve˘‹


63 
	$ve˘‹_c›y
 (
ve˘‹
 
v
)

65 
size
;

66 
ve˘‹
 
√w
 = 
	`XCALLOC
 (
MTYPE_VECTOR
,  (
_ve˘‹
));

68 
√w
->
a˘ive
 = 
v
->active;

69 
√w
->
Ælo˚d
 = 
v
->alloced;

71 
size
 =  (*Ë* (
v
->
Ælo˚d
);

72 
√w
->
ödex
 = 
	`XCALLOC
 (
MTYPE_VECTOR_INDEX
, 
size
);

73 
	`mem˝y
 (
√w
->
ödex
, 
v
->ödex, 
size
);

75  
√w
;

76 
	}
}

80 
	$ve˘‹_ísuª
 (
ve˘‹
 
v
, 
num
)

82 i‡(
v
->
Ælo˚d
 > 
num
)

85 
v
->
ödex
 = 
	`XREALLOC
 (
MTYPE_VECTOR_INDEX
,

86 
v
->
ödex
,  (*Ë* (v->
Ælo˚d
 * 2));

87 
	`mem£t
 (&
v
->
ödex
[v->
Ælo˚d
], 0,  (*) * v->alloced);

88 
v
->
Ælo˚d
 *= 2;

90 i‡(
v
->
Ælo˚d
 <
num
)

91 
	`ve˘‹_ísuª
 (
v
, 
num
);

92 
	}
}

98 
	$ve˘‹_em±y_¶Ÿ
 (
ve˘‹
 
v
)

100 
i
;

102 i‡(
v
->
a˘ive
 == 0)

105 
i
 = 0; i < 
v
->
a˘ive
; i++)

106 i‡(
v
->
ödex
[
i
] == 0)

107  
i
;

109  
i
;

110 
	}
}

114 
	$ve˘‹_£t
 (
ve˘‹
 
v
, *
vÆ
)

116 
i
;

118 
i
 = 
	`ve˘‹_em±y_¶Ÿ
 (
v
);

119 
	`ve˘‹_ísuª
 (
v
, 
i
);

121 
v
->
ödex
[
i
] = 
vÆ
;

123 i‡(
v
->
a˘ive
 <
i
)

124 
v
->
a˘ive
 = 
i
 + 1;

126  
i
;

127 
	}
}

131 
	$ve˘‹_£t_ödex
 (
ve˘‹
 
v
, 
i
, *
vÆ
)

133 
	`ve˘‹_ísuª
 (
v
, 
i
);

135 
v
->
ödex
[
i
] = 
vÆ
;

137 i‡(
v
->
a˘ive
 <
i
)

138 
v
->
a˘ive
 = 
i
 + 1;

140  
i
;

141 
	}
}

145 
	$ve˘‹_lookup
 (
ve˘‹
 
v
, 
i
)

147 i‡(
i
 >
v
->
a˘ive
)

148  
NULL
;

149  
v
->
ödex
[
i
];

150 
	}
}

154 
	$ve˘‹_lookup_ísuª
 (
ve˘‹
 
v
, 
i
)

156 
	`ve˘‹_ísuª
 (
v
, 
i
);

157  
v
->
ödex
[
i
];

158 
	}
}

162 
	$ve˘‹_un£t
 (
ve˘‹
 
v
, 
i
)

164 i‡(
i
 >
v
->
Ælo˚d
)

167 
v
->
ödex
[
i
] = 
NULL
;

169 i‡(
i
 + 1 =
v
->
a˘ive
)

171 
v
->
a˘ive
--;

172 
i
 && 
v
->
ödex
[--i] =
NULL
 && v->
a˘ive
--)

175 
	}
}

179 
	$ve˘‹_cou¡
 (
ve˘‹
 
v
)

181 
i
;

182 
cou¡
 = 0;

184 
i
 = 0; i < 
v
->
a˘ive
; i++)

185 i‡(
v
->
ödex
[
i
] !
NULL
)

186 
cou¡
++;

188  
cou¡
;

189 
	}
}

	@vector.h

23 #i‚de‡
_ZEBRA_VECTOR_H


24 
	#_ZEBRA_VECTOR_H


	)

27 
	s_ve˘‹


29 
	ma˘ive
;

30 
	mÆlo˚d
;

31 **
	mödex
;

33 
_ve˘‹
 *
	tve˘‹
;

35 
	#VECTOR_MIN_SIZE
 1

	)

40 
	#ve˘‹_¶Ÿ
(
V
,
I
Ë((V)->
ödex
[(I)])

	)

45 
	#ve˘‹_a˘ive
(
V
Ë((V)->
a˘ive
)

	)

48 
ve˘‹
 
ve˘‹_öô
 (
size
);

49 
ve˘‹_ísuª
 (
ve˘‹
 
v
, 
num
);

50 
ve˘‹_em±y_¶Ÿ
 (
ve˘‹
 
v
);

51 
ve˘‹_£t
 (
ve˘‹
 
v
, *
vÆ
);

52 
ve˘‹_£t_ödex
 (
ve˘‹
 
v
, 
i
, *
vÆ
);

53 
ve˘‹_un£t
 (
ve˘‹
 
v
, 
i
);

54 
ve˘‹_cou¡
 (
ve˘‹
 
v
);

55 
ve˘‹_⁄ly_wøµî_‰ì
 (
ve˘‹
 
v
);

56 
ve˘‹_⁄ly_ödex_‰ì
 (*
ödex
);

57 
ve˘‹_‰ì
 (
ve˘‹
 
v
);

58 
ve˘‹
 
ve˘‹_c›y
 (ve˘‹ 
v
);

60 *
ve˘‹_lookup
 (
ve˘‹
, );

61 *
ve˘‹_lookup_ísuª
 (
ve˘‹
, );

	@version.h

24 #i‚de‡
_ZEBRA_VERSION_H


25 
	#_ZEBRA_VERSION_H


	)

27 #ifde‡
GIT_VERSION


28 
	~"gôvîsi⁄.h
"

31 #i‚de‡
GIT_SUFFIX


32 
	#GIT_SUFFIX
 ""

	)

34 #i‚de‡
GIT_INFO


35 
	#GIT_INFO
 ""

	)

38 
	#QUAGGA_PROGNAME
 "Quagga"

	)

40 
	#QUAGGA_VERSION
 "0.99.24" 
GIT_SUFFIX


	)

42 
	#ZEBRA_BUG_ADDRESS
 "hâps://bugzûœ.quagga.√t"

	)

44 
	#QUAGGA_URL
 "hâp://www.quagga.√t"

	)

46 
	#QUAGGA_COPYRIGHT
 "C›yrighà1996-2005 KunihúÿIshiguro,ÉàÆ."

	)

48 
	#QUAGGA_CONFIG_ARGS
 "--íabÀ-vtysh"

	)

50 
pid_t
 
pid_ouçut
 (const *);

52 #i‚de‡
HAVE_DAEMON


53 
d´m⁄
(, );

	@vty.c

23 
	~<zebø.h
>

25 
	~"lökli°.h
"

26 
	~"thªad.h
"

27 
	~"buf„r.h
"

28 
	~"vîsi⁄.h
"

29 
	~"comm™d.h
"

30 
	~"sockuni⁄.h
"

31 
	~"mem‹y.h
"

32 
	~"°r.h
"

33 
	~"log.h
"

34 
	~"¥efix.h
"

35 
	~"fûãr.h
"

36 
	~"vty.h
"

37 
	~"¥ivs.h
"

38 
	~"√tw‹k.h
"

40 
	~<¨∑/ã ë.h
>

43 
	eevít


45 
	mVTY_SERV
,

46 
	mVTY_READ
,

47 
	mVTY_WRITE
,

48 
	mVTY_TIMEOUT_RESET
,

49 #ifde‡
VTYSH


50 
	mVTYSH_SERV
,

51 
	mVTYSH_READ
,

52 
	mVTYSH_WRITE


56 
vty_evít
 (
evít
, , 
vty
 *);

59 
ho°
 host;

62 
ve˘‹
 
	gvtyvec
;

65 
	gvty_timeout_vÆ
 = 
VTY_TIMEOUT_DEFAULT
;

68 *
	gvty_ac˚s¶i°_«me
 = 
NULL
;

71 *
	gvty_ùv6_ac˚s¶i°_«me
 = 
NULL
;

74 
ve˘‹
 
	gVvty_£rv_thªad
;

77 *
	gvty_cwd
 = 
NULL
;

80 
	gvty_c⁄fig
;

83 
	gno_∑ssw‹d_check
 = 0;

86 c⁄° 
u_ch¨
 
	gª°ri˘ed_mode_deÁu…
 = 0;

87 
u_ch¨
 
	gª°ri˘ed_mode
 = 0;

90 
	göãgøã_deÁu…
[] = 
SYSCONFDIR
 
INTEGRATE_DEFAULT_CONFIG
;

95 
	$vty_out
 (
vty
 *vty, c⁄° *
f‹m©
, ...)

97 
va_li°
 
¨gs
;

98 
Àn
 = 0;

99 
size
 = 1024;

100 
buf
[1024];

101 *
p
 = 
NULL
;

103 i‡(
	`vty_shñl
 (
vty
))

105 
	`va_°¨t
 (
¨gs
, 
f‹m©
);

106 
	`v¥ötf
 (
f‹m©
, 
¨gs
);

107 
	`va_íd
 (
¨gs
);

112 
	`va_°¨t
 (
¨gs
, 
f‹m©
);

113 
Àn
 = 
	`v¢¥ötf
 (
buf
,  buf, 
f‹m©
, 
¨gs
);

114 
	`va_íd
 (
¨gs
);

117 i‡(
Àn
 < 0 ||Üí >
size
)

121 i‡(
Àn
 > -1)

122 
size
 = 
Àn
 + 1;

124 
size
 = size * 2;

126 
p
 = 
	`XREALLOC
 (
MTYPE_VTY_OUT_BUF
,Ö, 
size
);

127 i‡(! 
p
)

130 
	`va_°¨t
 (
¨gs
, 
f‹m©
);

131 
Àn
 = 
	`v¢¥ötf
 (
p
, 
size
, 
f‹m©
, 
¨gs
);

132 
	`va_íd
 (
¨gs
);

134 i‡(
Àn
 > -1 &&Üí < 
size
)

140 i‡(! 
p
)

141 
p
 = 
buf
;

144 
	`buf„r_put
 (
vty
->
obuf
, (
u_ch¨
 *Ë
p
, 
Àn
);

147 i‡(
p
 !
buf
)

148 
	`XFREE
 (
MTYPE_VTY_OUT_BUF
, 
p
);

151  
Àn
;

152 
	}
}

155 
	$vty_log_out
 (
vty
 *vty, c⁄° *
Àvñ
, c⁄° *
¥Ÿo_°r
,

156 c⁄° *
f‹m©
, 
time°amp_c⁄åﬁ
 *
˘l
, 
va_li°
 
va
)

158 
ªt
;

159 
Àn
;

160 
buf
[1024];

162 i‡(!
˘l
->
Æªady_ªndîed
)

164 
˘l
->
Àn
 = 
	`quagga_time°amp
(˘l->
¥ecisi⁄
, cé->
buf
, (ctl->buf));

165 
˘l
->
Æªady_ªndîed
 = 1;

167 i‡(
˘l
->
Àn
+1 >(
buf
))

169 
	`mem˝y
(
buf
, 
˘l
->buf, 
Àn
 = ctl->len);

170 
buf
[
Àn
++] = ' ';

171 
buf
[
Àn
] = '\0';

173 i‡(
Àvñ
)

174 
ªt
 = 
	`¢¥ötf
(
buf
+
Àn
, (buf)-Àn, "%s: %s: ", 
Àvñ
, 
¥Ÿo_°r
);

176 
ªt
 = 
	`¢¥ötf
(
buf
+
Àn
, (buf)-Àn, "%s: ", 
¥Ÿo_°r
);

177 i‡((
ªt
 < 0Ë|| ((
size_t
)(
Àn
 +ªtË>(
buf
)))

180 i‡(((
ªt
 = 
	`v¢¥ötf
(
buf
+
Àn
, (buf)-Àn, 
f‹m©
, 
va
)) < 0) ||

181 ((
size_t
)((
Àn
 +
ªt
)+2Ë> (
buf
)))

184 
buf
[
Àn
++] = '\r';

185 
buf
[
Àn
++] = '\n';

187 i‡(
	`wrôe
(
vty
->
fd
, 
buf
, 
Àn
) < 0)

189 i‡(
	`ERRNO_IO_RETRY
(
î∫o
))

194 
vty
->
m⁄ô‹
 = 0;

195 
	`zlog_w¨n
("%s: write failedÅo vty client fd %d, closing: %s",

196 
__func__
, 
vty
->
fd
, 
	`ß„_°ªº‹
(
î∫o
));

197 
	`buf„r_ª£t
(
vty
->
obuf
);

200 
vty
->
°©us
 = 
VTY_CLOSE
;

201 
	`shutdown
(
vty
->
fd
, 
SHUT_RDWR
);

205 
	}
}

209 
	$vty_time_¥öt
 (
vty
 *vty, 
¸
)

211 
buf
 [25];

213 i‡(
	`quagga_time°amp
(0, 
buf
, (buf)) == 0)

215 
	`zlog
 (
NULL
, 
LOG_INFO
, "quagga_timestampÉrror");

218 i‡(
¸
)

219 
	`vty_out
 (
vty
, "%s\n", 
buf
);

221 
	`vty_out
 (
vty
, "%†", 
buf
);

224 
	}
}

228 
	$vty_hñlo
 (
vty
 *vty)

230 i‡(
ho°
.
mŸdfûe
)

232 
FILE
 *
f
;

233 
buf
[4096];

235 
f
 = 
	`f›í
 (
ho°
.
mŸdfûe
, "r");

236 i‡(
f
)

238 
	`fgës
 (
buf
,  (buf), 
f
))

240 *
s
;

242 
s
 = 
buf
 + 
	`°æí
 (buf); (†> bufË&& 
	`is•a˚
 (()*(s - 1));

243 
s
--);

244 *
s
 = '\0';

245 
	`vty_out
 (
vty
, "%s%s", 
buf
, 
VTY_NEWLINE
);

247 
	`f˛o£
 (
f
);

250 
	`vty_out
 (
vty
, "MOTD fûênŸ found%s", 
VTY_NEWLINE
);

252 i‡(
ho°
.
mŸd
)

253 
	`vty_out
 (
vty
, "%s", 
ho°
.
mŸd
);

254 
	}
}

258 
	$vty_¥om±
 (
vty
 *vty)

260 
ut¢ame
 
«mes
;

261 c⁄° *
ho°«me
;

263 i‡(
vty
->
ty≥
 =
VTY_TERM
)

265 
ho°«me
 = 
ho°
.
«me
;

266 i‡(!
ho°«me
)

268 
	`u«me
 (&
«mes
);

269 
ho°«me
 = 
«mes
.
nodíame
;

271 
	`vty_out
 (
vty
, 
	`cmd_¥om±
 (vty->
node
), 
ho°«me
);

273 
	}
}

277 
	$vty_wûl_echo
 (
vty
 *vty)

279 
cmd
[] = { 
IAC
, 
WILL
, 
TELOPT_ECHO
, '\0' };

280 
	`vty_out
 (
vty
, "%s", 
cmd
);

281 
	}
}

285 
	$vty_wûl_suµªss_go_ahód
 (
vty
 *vty)

287 
cmd
[] = { 
IAC
, 
WILL
, 
TELOPT_SGA
, '\0' };

288 
	`vty_out
 (
vty
, "%s", 
cmd
);

289 
	}
}

293 
	$vty_d⁄t_löemode
 (
vty
 *vty)

295 
cmd
[] = { 
IAC
, 
DONT
, 
TELOPT_LINEMODE
, '\0' };

296 
	`vty_out
 (
vty
, "%s", 
cmd
);

297 
	}
}

301 
	$vty_do_wödow_size
 (
vty
 *vty)

303 
cmd
[] = { 
IAC
, 
DO
, 
TELOPT_NAWS
, '\0' };

304 
	`vty_out
 (
vty
, "%s", 
cmd
);

305 
	}
}

310 
	$vty_d⁄t_lÊow_ahód
 (
vty
 *vty)

312 
cmd
[] = { 
IAC
, 
DONT
, 
TELOPT_LFLOW
, '\0' };

313 
	`vty_out
 (
vty
, "%s", 
cmd
);

314 
	}
}

318 
vty
 *

319 
	$vty_√w
 ()

321 
vty
 *
√w
 = 
	`XCALLOC
 (
MTYPE_VTY
,  (vty));

323 
√w
->
obuf
 = 
	`buf„r_√w
(0);

324 
√w
->
buf
 = 
	`XCALLOC
 (
MTYPE_VTY
, 
VTY_BUFSIZ
);

325 
√w
->
max
 = 
VTY_BUFSIZ
;

327  
√w
;

328 
	}
}

332 
	$vty_auth
 (
vty
 *vty, *
buf
)

334 *
∑sswd
 = 
NULL
;

335 
node_ty≥
 
√xt_node
 = 0;

336 
Áû
;

337 *
	`¸y±
 (const *, const *);

339 
vty
->
node
)

341 
AUTH_NODE
:

342 i‡(
ho°
.
í¸y±
)

343 
∑sswd
 = 
ho°
.
∑ssw‹d_í¸y±
;

345 
∑sswd
 = 
ho°
.
∑ssw‹d
;

346 i‡(
ho°
.
adv™˚d
)

347 
√xt_node
 = 
ho°
.
íabÀ
 ? 
VIEW_NODE
 : 
ENABLE_NODE
;

349 
√xt_node
 = 
VIEW_NODE
;

351 
AUTH_ENABLE_NODE
:

352 i‡(
ho°
.
í¸y±
)

353 
∑sswd
 = 
ho°
.
íabÀ_í¸y±
;

355 
∑sswd
 = 
ho°
.
íabÀ
;

356 
√xt_node
 = 
ENABLE_NODE
;

360 i‡(
∑sswd
)

362 i‡(
ho°
.
í¸y±
)

363 
Áû
 = 
	`°rcmp
 (
	`¸y±
(
buf
, 
∑sswd
),Öasswd);

365 
Áû
 = 
	`°rcmp
 (
buf
, 
∑sswd
);

368 
Áû
 = 1;

370 i‡(! 
Áû
)

372 
vty
->
Áû
 = 0;

373 
vty
->
node
 = 
√xt_node
;

377 
vty
->
Áû
++;

378 i‡(
vty
->
Áû
 >= 3)

380 i‡(
vty
->
node
 =
AUTH_NODE
)

382 
	`vty_out
 (
vty
, "%% BadÖassw‹ds,Åoÿm™y faûuªs!%s", 
VTY_NEWLINE
);

383 
vty
->
°©us
 = 
VTY_CLOSE
;

388 
vty
->
Áû
 = 0;

389 
	`vty_out
 (
vty
, "%% BadÉ«bÀÖassw‹ds,Åoÿm™y faûuªs!%s", 
VTY_NEWLINE
);

390 
vty
->
node
 = 
ª°ri˘ed_mode
 ? 
RESTRICTED_NODE
 : 
VIEW_NODE
;

394 
	}
}

398 
	$vty_comm™d
 (
vty
 *vty, *
buf
)

400 
ªt
;

401 
ve˘‹
 
vlöe
;

402 c⁄° *
¥Ÿocﬁ«me
;

405 
vlöe
 = 
	`cmd_make_°rvec
 (
buf
);

407 i‡(
vlöe
 =
NULL
)

408  
CMD_SUCCESS
;

410 #ifde‡
CONSUMED_TIME_CHECK


412 
RUSAGE_T
 
bef‹e
;

413 
RUSAGE_T
 
a·î
;

414 
ªÆtime
, 
˝utime
;

416 
	`GETRUSAGE
(&
bef‹e
);

419 
ªt
 = 
	`cmd_execuã_comm™d
 (
vlöe
, 
vty
, 
NULL
, 0);

422 i‡(
zlog_deÁu…
)

423 
¥Ÿocﬁ«me
 = 
zlog_¥Ÿo_«mes
[
zlog_deÁu…
->
¥Ÿocﬁ
];

425 
¥Ÿocﬁ«me
 = 
zlog_¥Ÿo_«mes
[
ZLOG_NONE
];

427 #ifde‡
CONSUMED_TIME_CHECK


428 
	`GETRUSAGE
(&
a·î
);

429 i‡((
ªÆtime
 = 
	`thªad_c⁄sumed_time
(&
a·î
, &
bef‹e
, &
˝utime
)) >

430 
CONSUMED_TIME_CHECK
)

432 
	`zlog_w¨n
("SLOW COMMAND: commandÅook %lums (cpuÅime %lums): %s",

433 
ªÆtime
/1000, 
˝utime
/1000, 
buf
);

437 i‡(
ªt
 !
CMD_SUCCESS
)

438 
ªt
)

440 
CMD_WARNING
:

441 i‡(
vty
->
ty≥
 =
VTY_FILE
)

442 
	`vty_out
 (
vty
, "W¨nög...%s", 
VTY_NEWLINE
);

444 
CMD_ERR_AMBIGUOUS
:

445 
	`vty_out
 (
vty
, "%% Ambiguou†comm™d.%s", 
VTY_NEWLINE
);

447 
CMD_ERR_NO_MATCH
:

448 
	`vty_out
 (
vty
, "%% [%s] Unknow¿comm™d: %s%s", 
¥Ÿocﬁ«me
, 
buf
, 
VTY_NEWLINE
);

450 
CMD_ERR_INCOMPLETE
:

451 
	`vty_out
 (
vty
, "%% Comm™d incom∂ëe.%s", 
VTY_NEWLINE
);

454 
	`cmd_‰ì_°rvec
 (
vlöe
);

456  
ªt
;

457 
	}
}

459 c⁄° 
	gã ë_backw¨d_ch¨
 = 0x08;

460 c⁄° 
	gã ë_•a˚_ch¨
 = ' ';

464 
	$vty_wrôe
 (
vty
 *vty, c⁄° *
buf
, 
size_t
 
nbyãs
)

466 i‡((
vty
->
node
 =
AUTH_NODE
Ë|| (vty->nodê=
AUTH_ENABLE_NODE
))

470 
	`buf„r_put
 (
vty
->
obuf
, 
buf
, 
nbyãs
);

471 
	}
}

475 
	$vty_ísuª
 (
vty
 *vty, 
Àngth
)

477 i‡(
vty
->
max
 <
Àngth
)

479 
vty
->
max
 *= 2;

480 
vty
->
buf
 = 
	`XREALLOC
 (
MTYPE_VTY
, vty->buf, vty->
max
);

482 
	}
}

486 
	$vty_£lf_ö£π
 (
vty
 *vty, 
c
)

488 
i
;

489 
Àngth
;

491 
	`vty_ísuª
 (
vty
, vty->
Àngth
 + 1);

492 
Àngth
 = 
vty
->Àngth - vty->
˝
;

493 
	`memmove
 (&
vty
->
buf
[vty->
˝
 + 1], &vty->buf[vty->˝], 
Àngth
);

494 
vty
->
buf
[vty->
˝
] = 
c
;

496 
	`vty_wrôe
 (
vty
, &vty->
buf
[vty->
˝
], 
Àngth
 + 1);

497 
i
 = 0; i < 
Àngth
; i++)

498 
	`vty_wrôe
 (
vty
, &
ã ë_backw¨d_ch¨
, 1);

500 
vty
->
˝
++;

501 
vty
->
Àngth
++;

502 
	}
}

506 
	$vty_£lf_ö£π_ovîwrôe
 (
vty
 *vty, 
c
)

508 
	`vty_ísuª
 (
vty
, vty->
Àngth
 + 1);

509 
vty
->
buf
[vty->
˝
++] = 
c
;

511 i‡(
vty
->
˝
 > vty->
Àngth
)

512 
vty
->
Àngth
++;

514 i‡((
vty
->
node
 =
AUTH_NODE
Ë|| (vty->nodê=
AUTH_ENABLE_NODE
))

517 
	`vty_wrôe
 (
vty
, &
c
, 1);

518 
	}
}

522 
	$vty_ö£π_w‹d_ovîwrôe
 (
vty
 *vty, *
°r
)

524 
Àn
 = 
	`°æí
 (
°r
);

525 
	`vty_wrôe
 (
vty
, 
°r
, 
Àn
);

526 
	`°r˝y
 (&
vty
->
buf
[vty->
˝
], 
°r
);

527 
vty
->
˝
 +
Àn
;

528 
vty
->
Àngth
 = vty->
˝
;

529 
	}
}

533 
	$vty_f‹w¨d_ch¨
 (
vty
 *vty)

535 i‡(
vty
->
˝
 < vty->
Àngth
)

537 
	`vty_wrôe
 (
vty
, &vty->
buf
[vty->
˝
], 1);

538 
vty
->
˝
++;

540 
	}
}

544 
	$vty_backw¨d_ch¨
 (
vty
 *vty)

546 i‡(
vty
->
˝
 > 0)

548 
vty
->
˝
--;

549 
	`vty_wrôe
 (
vty
, &
ã ë_backw¨d_ch¨
, 1);

551 
	}
}

555 
	$vty_begönög_of_löe
 (
vty
 *vty)

557 
vty
->
˝
)

558 
	`vty_backw¨d_ch¨
 (
vty
);

559 
	}
}

563 
	$vty_íd_of_löe
 (
vty
 *vty)

565 
vty
->
˝
 < vty->
Àngth
)

566 
	`vty_f‹w¨d_ch¨
 (
vty
);

567 
	}
}

569 
vty_kûl_löe_‰om_begönög
 (
vty
 *);

570 
vty_ªdøw_löe
 (
vty
 *);

575 
	$vty_hi°‹y_¥öt
 (
vty
 *vty)

577 
Àngth
;

579 
	`vty_kûl_löe_‰om_begönög
 (
vty
);

582 
Àngth
 = 
	`°æí
 (
vty
->
hi°
[vty->
hp
]);

583 
	`mem˝y
 (
vty
->
buf
, vty->
hi°
[vty->
hp
], 
Àngth
);

584 
vty
->
˝
 = vty->
Àngth
 =Üength;

587 
	`vty_ªdøw_löe
 (
vty
);

588 
	}
}

592 
	$vty_√xt_löe
 (
vty
 *vty)

594 
åy_ödex
;

596 i‡(
vty
->
hp
 =vty->
hödex
)

600 
åy_ödex
 = 
vty
->
hp
;

601 i‡(
åy_ödex
 =(
VTY_MAXHIST
 - 1))

602 
åy_ödex
 = 0;

604 
åy_ödex
++;

607 i‡(
vty
->
hi°
[
åy_ödex
] =
NULL
)

610 
vty
->
hp
 = 
åy_ödex
;

612 
	`vty_hi°‹y_¥öt
 (
vty
);

613 
	}
}

617 
	$vty_¥evious_löe
 (
vty
 *vty)

619 
åy_ödex
;

621 
åy_ödex
 = 
vty
->
hp
;

622 i‡(
åy_ödex
 == 0)

623 
åy_ödex
 = 
VTY_MAXHIST
 - 1;

625 
åy_ödex
--;

627 i‡(
vty
->
hi°
[
åy_ödex
] =
NULL
)

630 
vty
->
hp
 = 
åy_ödex
;

632 
	`vty_hi°‹y_¥öt
 (
vty
);

633 
	}
}

637 
	$vty_ªdøw_löe
 (
vty
 *vty)

639 
	`vty_wrôe
 (
vty
, vty->
buf
, vty->
Àngth
);

640 
vty
->
˝
 = vty->
Àngth
;

641 
	}
}

645 
	$vty_f‹w¨d_w‹d
 (
vty
 *vty)

647 
vty
->
˝
 !vty->
Àngth
 && vty->
buf
[vty->cp] != ' ')

648 
	`vty_f‹w¨d_ch¨
 (
vty
);

650 
vty
->
˝
 !vty->
Àngth
 && vty->
buf
[vty->cp] == ' ')

651 
	`vty_f‹w¨d_ch¨
 (
vty
);

652 
	}
}

656 
	$vty_backw¨d_puª_w‹d
 (
vty
 *vty)

658 
vty
->
˝
 > 0 && vty->
buf
[vty->cp - 1] != ' ')

659 
	`vty_backw¨d_ch¨
 (
vty
);

660 
	}
}

664 
	$vty_backw¨d_w‹d
 (
vty
 *vty)

666 
vty
->
˝
 > 0 && vty->
buf
[vty->cp - 1] == ' ')

667 
	`vty_backw¨d_ch¨
 (
vty
);

669 
vty
->
˝
 > 0 && vty->
buf
[vty->cp - 1] != ' ')

670 
	`vty_backw¨d_ch¨
 (
vty
);

671 
	}
}

676 
	$vty_down_Àvñ
 (
vty
 *vty)

678 
	`vty_out
 (
vty
, "%s", 
VTY_NEWLINE
);

679 (*
c⁄fig_exô_cmd
.
func
)(
NULL
, 
vty
, 0, NULL);

680 
	`vty_¥om±
 (
vty
);

681 
vty
->
˝
 = 0;

682 
	}
}

686 
	$vty_íd_c⁄fig
 (
vty
 *vty)

688 
	`vty_out
 (
vty
, "%s", 
VTY_NEWLINE
);

690 
vty
->
node
)

692 
VIEW_NODE
:

693 
ENABLE_NODE
:

694 
RESTRICTED_NODE
:

697 
CONFIG_NODE
:

698 
INTERFACE_NODE
:

699 
ZEBRA_NODE
:

700 
RIP_NODE
:

701 
RIPNG_NODE
:

702 
BABEL_NODE
:

703 
BGP_NODE
:

704 
BGP_VPNV4_NODE
:

705 
BGP_IPV4_NODE
:

706 
BGP_IPV4M_NODE
:

707 
BGP_IPV6_NODE
:

708 
BGP_IPV6M_NODE
:

709 
RMAP_NODE
:

710 
OSPF_NODE
:

711 
OSPF6_NODE
:

712 
ISIS_NODE
:

713 
KEYCHAIN_NODE
:

714 
KEYCHAIN_KEY_NODE
:

715 
MASC_NODE
:

716 
PIM_NODE
:

717 
VTY_NODE
:

718 
	`vty_c⁄fig_u∆ock
 (
vty
);

719 
vty
->
node
 = 
ENABLE_NODE
;

726 
	`vty_¥om±
 (
vty
);

727 
vty
->
˝
 = 0;

728 
	}
}

732 
	$vty_dñëe_ch¨
 (
vty
 *vty)

734 
i
;

735 
size
;

737 i‡(
vty
->
Àngth
 == 0)

739 
	`vty_down_Àvñ
 (
vty
);

743 i‡(
vty
->
˝
 =vty->
Àngth
)

746 
size
 = 
vty
->
Àngth
 - vty->
˝
;

748 
vty
->
Àngth
--;

749 
	`memmove
 (&
vty
->
buf
[vty->
˝
], &vty->buf[vty->˝ + 1], 
size
 - 1);

750 
vty
->
buf
[vty->
Àngth
] = '\0';

752 i‡(
vty
->
node
 =
AUTH_NODE
 || vty->nodê=
AUTH_ENABLE_NODE
)

755 
	`vty_wrôe
 (
vty
, &vty->
buf
[vty->
˝
], 
size
 - 1);

756 
	`vty_wrôe
 (
vty
, &
ã ë_•a˚_ch¨
, 1);

758 
i
 = 0; i < 
size
; i++)

759 
	`vty_wrôe
 (
vty
, &
ã ë_backw¨d_ch¨
, 1);

760 
	}
}

764 
	$vty_dñëe_backw¨d_ch¨
 (
vty
 *vty)

766 i‡(
vty
->
˝
 == 0)

769 
	`vty_backw¨d_ch¨
 (
vty
);

770 
	`vty_dñëe_ch¨
 (
vty
);

771 
	}
}

775 
	$vty_kûl_löe
 (
vty
 *vty)

777 
i
;

778 
size
;

780 
size
 = 
vty
->
Àngth
 - vty->
˝
;

782 i‡(
size
 == 0)

785 
i
 = 0; i < 
size
; i++)

786 
	`vty_wrôe
 (
vty
, &
ã ë_•a˚_ch¨
, 1);

787 
i
 = 0; i < 
size
; i++)

788 
	`vty_wrôe
 (
vty
, &
ã ë_backw¨d_ch¨
, 1);

790 
	`mem£t
 (&
vty
->
buf
[vty->
˝
], 0, 
size
);

791 
vty
->
Àngth
 = vty->
˝
;

792 
	}
}

796 
	$vty_kûl_löe_‰om_begönög
 (
vty
 *vty)

798 
	`vty_begönög_of_löe
 (
vty
);

799 
	`vty_kûl_löe
 (
vty
);

800 
	}
}

804 
	$vty_f‹w¨d_kûl_w‹d
 (
vty
 *vty)

806 
vty
->
˝
 !vty->
Àngth
 && vty->
buf
[vty->cp] == ' ')

807 
	`vty_dñëe_ch¨
 (
vty
);

808 
vty
->
˝
 !vty->
Àngth
 && vty->
buf
[vty->cp] != ' ')

809 
	`vty_dñëe_ch¨
 (
vty
);

810 
	}
}

814 
	$vty_backw¨d_kûl_w‹d
 (
vty
 *vty)

816 
vty
->
˝
 > 0 && vty->
buf
[vty->cp - 1] == ' ')

817 
	`vty_dñëe_backw¨d_ch¨
 (
vty
);

818 
vty
->
˝
 > 0 && vty->
buf
[vty->cp - 1] != ' ')

819 
	`vty_dñëe_backw¨d_ch¨
 (
vty
);

820 
	}
}

824 
	$vty_å™•o£_ch¨s
 (
vty
 *vty)

826 
c1
, 
c2
;

830 i‡(
vty
->
Àngth
 < 2 || vty->
˝
 < 1)

834 i‡(
vty
->
˝
 =vty->
Àngth
)

836 
c1
 = 
vty
->
buf
[vty->
˝
 - 1];

837 
c2
 = 
vty
->
buf
[vty->
˝
 - 2];

839 
	`vty_backw¨d_ch¨
 (
vty
);

840 
	`vty_backw¨d_ch¨
 (
vty
);

841 
	`vty_£lf_ö£π_ovîwrôe
 (
vty
, 
c1
);

842 
	`vty_£lf_ö£π_ovîwrôe
 (
vty
, 
c2
);

846 
c1
 = 
vty
->
buf
[vty->
˝
];

847 
c2
 = 
vty
->
buf
[vty->
˝
 - 1];

849 
	`vty_backw¨d_ch¨
 (
vty
);

850 
	`vty_£lf_ö£π_ovîwrôe
 (
vty
, 
c1
);

851 
	`vty_£lf_ö£π_ovîwrôe
 (
vty
, 
c2
);

853 
	}
}

857 
	$vty_com∂ëe_comm™d
 (
vty
 *vty)

859 
i
;

860 
ªt
;

861 **
m©ched
 = 
NULL
;

862 
ve˘‹
 
vlöe
;

864 i‡(
vty
->
node
 =
AUTH_NODE
 || vty->nodê=
AUTH_ENABLE_NODE
)

867 
vlöe
 = 
	`cmd_make_°rvec
 (
vty
->
buf
);

868 i‡(
vlöe
 =
NULL
)

872 i‡(
	`is•a˚
 ((Ë
vty
->
buf
[vty->
Àngth
 - 1]))

873 
	`ve˘‹_£t
 (
vlöe
, '\0');

875 
m©ched
 = 
	`cmd_com∂ëe_comm™d
 (
vlöe
, 
vty
, &
ªt
);

877 
	`cmd_‰ì_°rvec
 (
vlöe
);

879 
	`vty_out
 (
vty
, "%s", 
VTY_NEWLINE
);

880 
ªt
)

882 
CMD_ERR_AMBIGUOUS
:

883 
	`vty_out
 (
vty
, "%% Ambiguou†comm™d.%s", 
VTY_NEWLINE
);

884 
	`vty_¥om±
 (
vty
);

885 
	`vty_ªdøw_löe
 (
vty
);

887 
CMD_ERR_NO_MATCH
:

889 
	`vty_¥om±
 (
vty
);

890 
	`vty_ªdøw_löe
 (
vty
);

892 
CMD_COMPLETE_FULL_MATCH
:

893 
	`vty_¥om±
 (
vty
);

894 
	`vty_ªdøw_löe
 (
vty
);

895 
	`vty_backw¨d_puª_w‹d
 (
vty
);

896 
	`vty_ö£π_w‹d_ovîwrôe
 (
vty
, 
m©ched
[0]);

897 
	`vty_£lf_ö£π
 (
vty
, ' ');

898 
	`XFREE
 (
MTYPE_TMP
, 
m©ched
[0]);

900 
CMD_COMPLETE_MATCH
:

901 
	`vty_¥om±
 (
vty
);

902 
	`vty_ªdøw_löe
 (
vty
);

903 
	`vty_backw¨d_puª_w‹d
 (
vty
);

904 
	`vty_ö£π_w‹d_ovîwrôe
 (
vty
, 
m©ched
[0]);

905 
	`XFREE
 (
MTYPE_TMP
, 
m©ched
[0]);

906 
	`ve˘‹_⁄ly_ödex_‰ì
 (
m©ched
);

909 
CMD_COMPLETE_LIST_MATCH
:

910 
i
 = 0; 
m©ched
[i] !
NULL
; i++)

912 i‡(
i
 != 0 && ((i % 6) == 0))

913 
	`vty_out
 (
vty
, "%s", 
VTY_NEWLINE
);

914 
	`vty_out
 (
vty
, "%-10†", 
m©ched
[
i
]);

915 
	`XFREE
 (
MTYPE_TMP
, 
m©ched
[
i
]);

917 
	`vty_out
 (
vty
, "%s", 
VTY_NEWLINE
);

919 
	`vty_¥om±
 (
vty
);

920 
	`vty_ªdøw_löe
 (
vty
);

922 
CMD_ERR_NOTHING_TODO
:

923 
	`vty_¥om±
 (
vty
);

924 
	`vty_ªdøw_löe
 (
vty
);

929 i‡(
m©ched
)

930 
	`ve˘‹_⁄ly_ödex_‰ì
 (
m©ched
);

931 
	}
}

934 
	$vty_des¸ibe_fﬁd
 (
vty
 *vty, 
cmd_width
,

935 
desc_width
, 
cmd_tokí
 *
tokí
)

937 *
buf
;

938 c⁄° *
cmd
, *
p
;

939 
pos
;

941 
cmd
 = 
tokí
->cmd[0] == '.' ?Åoken->cmd + 1 :Åoken->cmd;

943 i‡(
desc_width
 <= 0)

945 
	`vty_out
 (
vty
, " %-*† %s%s", 
cmd_width
, 
cmd
, 
tokí
->
desc
, 
VTY_NEWLINE
);

949 
buf
 = 
	`XCALLOC
 (
MTYPE_TMP
, 
	`°æí
 (
tokí
->
desc
) + 1);

951 
p
 = 
tokí
->
desc
; 
	`°æí
 (pË> 
desc_width
;Ö +
pos
 + 1)

953 
pos
 = 
desc_width
;Öos > 0;Öos--)

954 i‡(*(
p
 + 
pos
) == ' ')

957 i‡(
pos
 == 0)

960 
	`°∫˝y
 (
buf
, 
p
, 
pos
);

961 
buf
[
pos
] = '\0';

962 
	`vty_out
 (
vty
, " %-*† %s%s", 
cmd_width
, 
cmd
, 
buf
, 
VTY_NEWLINE
);

964 
cmd
 = "";

967 
	`vty_out
 (
vty
, " %-*† %s%s", 
cmd_width
, 
cmd
, 
p
, 
VTY_NEWLINE
);

969 
	`XFREE
 (
MTYPE_TMP
, 
buf
);

970 
	}
}

974 
	$vty_des¸ibe_comm™d
 (
vty
 *vty)

976 
ªt
;

977 
ve˘‹
 
vlöe
;

978 
ve˘‹
 
des¸ibe
;

979 
i
, 
width
, 
desc_width
;

980 
cmd_tokí
 *
tokí
, *
tokí_¸
 = 
NULL
;

982 
vlöe
 = 
	`cmd_make_°rvec
 (
vty
->
buf
);

985 i‡(
vlöe
 =
NULL
)

987 
vlöe
 = 
	`ve˘‹_öô
 (1);

988 
	`ve˘‹_£t
 (
vlöe
, '\0');

991 i‡(
	`is•a˚
 ((Ë
vty
->
buf
[vty->
Àngth
 - 1]))

992 
	`ve˘‹_£t
 (
vlöe
, '\0');

994 
des¸ibe
 = 
	`cmd_des¸ibe_comm™d
 (
vlöe
, 
vty
, &
ªt
);

996 
	`vty_out
 (
vty
, "%s", 
VTY_NEWLINE
);

999 
ªt
)

1001 
CMD_ERR_AMBIGUOUS
:

1002 
	`vty_out
 (
vty
, "%% Ambiguou†comm™d.%s", 
VTY_NEWLINE
);

1003 
out
;

1005 
CMD_ERR_NO_MATCH
:

1006 
	`vty_out
 (
vty
, "%% Thîêi†nÿm©ched comm™d.%s", 
VTY_NEWLINE
);

1007 
out
;

1012 
width
 = 0;

1013 
i
 = 0; i < 
	`ve˘‹_a˘ive
 (
des¸ibe
); i++)

1014 i‡((
tokí
 = 
	`ve˘‹_¶Ÿ
 (
des¸ibe
, 
i
)Ë!
NULL
)

1016 
Àn
;

1018 i‡(
tokí
->
cmd
[0] == '\0')

1021 
Àn
 = 
	`°æí
 (
tokí
->
cmd
);

1022 i‡(
tokí
->
cmd
[0] == '.')

1023 
Àn
--;

1025 i‡(
width
 < 
Àn
)

1026 
width
 = 
Àn
;

1030 
desc_width
 = 
vty
->
width
 - (width + 6);

1033 
i
 = 0; i < 
	`ve˘‹_a˘ive
 (
des¸ibe
); i++)

1034 i‡((
tokí
 = 
	`ve˘‹_¶Ÿ
 (
des¸ibe
, 
i
)Ë!
NULL
)

1036 i‡(
tokí
->
cmd
[0] == '\0')

1039 i‡(
	`°rcmp
 (
tokí
->
cmd
, 
comm™d_¸
) == 0)

1041 
tokí_¸
 = 
tokí
;

1045 i‡(!
tokí
->
desc
)

1046 
	`vty_out
 (
vty
, " %-s%s",

1047 
tokí
->
cmd
[0] == '.' ?Åoken->cmd + 1 :Åoken->cmd,

1048 
VTY_NEWLINE
);

1049 i‡(
desc_width
 >
	`°æí
 (
tokí
->
desc
))

1050 
	`vty_out
 (
vty
, " %-*† %s%s", 
width
,

1051 
tokí
->
cmd
[0] == '.' ?Åoken->cmd + 1 :Åoken->cmd,

1052 
tokí
->
desc
, 
VTY_NEWLINE
);

1054 
	`vty_des¸ibe_fﬁd
 (
vty
, 
width
, 
desc_width
, 
tokí
);

1057 
	`vty_out
 (
vty
, " %-*†%s%s", 
width


1058 
desc
->
cmd
[0] == '.' ? desc->cmd + 1 : desc->cmd,

1059 
desc
->
°r
 ? desc->°∏: "", 
VTY_NEWLINE
);

1063 i‡((
tokí
 = 
tokí_¸
))

1065 i‡(!
tokí
->
desc
)

1066 
	`vty_out
 (
vty
, " %-s%s",

1067 
tokí
->
cmd
[0] == '.' ?Åoken->cmd + 1 :Åoken->cmd,

1068 
VTY_NEWLINE
);

1069 i‡(
desc_width
 >
	`°æí
 (
tokí
->
desc
))

1070 
	`vty_out
 (
vty
, " %-*† %s%s", 
width
,

1071 
tokí
->
cmd
[0] == '.' ?Åoken->cmd + 1 :Åoken->cmd,

1072 
tokí
->
desc
, 
VTY_NEWLINE
);

1074 
	`vty_des¸ibe_fﬁd
 (
vty
, 
width
, 
desc_width
, 
tokí
);

1077 
out
:

1078 
	`cmd_‰ì_°rvec
 (
vlöe
);

1079 i‡(
des¸ibe
)

1080 
	`ve˘‹_‰ì
 (
des¸ibe
);

1082 
	`vty_¥om±
 (
vty
);

1083 
	`vty_ªdøw_löe
 (
vty
);

1084 
	}
}

1087 
	$vty_˛ór_buf
 (
vty
 *vty)

1089 
	`mem£t
 (
vty
->
buf
, 0, vty->
max
);

1090 
	}
}

1094 
	$vty_°›_öput
 (
vty
 *vty)

1096 
vty
->
˝
 = vty->
Àngth
 = 0;

1097 
	`vty_˛ór_buf
 (
vty
);

1098 
	`vty_out
 (
vty
, "%s", 
VTY_NEWLINE
);

1100 
vty
->
node
)

1102 
VIEW_NODE
:

1103 
ENABLE_NODE
:

1104 
RESTRICTED_NODE
:

1107 
CONFIG_NODE
:

1108 
INTERFACE_NODE
:

1109 
ZEBRA_NODE
:

1110 
RIP_NODE
:

1111 
RIPNG_NODE
:

1112 
BABEL_NODE
:

1113 
BGP_NODE
:

1114 
RMAP_NODE
:

1115 
OSPF_NODE
:

1116 
OSPF6_NODE
:

1117 
ISIS_NODE
:

1118 
KEYCHAIN_NODE
:

1119 
KEYCHAIN_KEY_NODE
:

1120 
MASC_NODE
:

1121 
PIM_NODE
:

1122 
VTY_NODE
:

1123 
	`vty_c⁄fig_u∆ock
 (
vty
);

1124 
vty
->
node
 = 
ENABLE_NODE
;

1130 
	`vty_¥om±
 (
vty
);

1133 
vty
->
hp
 = vty->
hödex
;

1134 
	}
}

1138 
	$vty_hi°_add
 (
vty
 *vty)

1140 
ödex
;

1142 i‡(
vty
->
Àngth
 == 0)

1145 
ödex
 = 
vty
->
hödex
 ? vty->hödex - 1 : 
VTY_MAXHIST
 - 1;

1148 i‡(
vty
->
hi°
[
ödex
])

1149 i‡(
	`°rcmp
 (
vty
->
buf
, vty->
hi°
[
ödex
]) == 0)

1151 
vty
->
hp
 = vty->
hödex
;

1156 i‡(
vty
->
hi°
[vty->
hödex
])

1157 
	`XFREE
 (
MTYPE_VTY_HIST
, 
vty
->
hi°
[vty->
hödex
]);

1158 
vty
->
hi°
[vty->
hödex
] = 
	`XSTRDUP
 (
MTYPE_VTY_HIST
, vty->
buf
);

1161 
vty
->
hödex
++;

1162 i‡(
vty
->
hödex
 =
VTY_MAXHIST
)

1163 
vty
->
hödex
 = 0;

1165 
vty
->
hp
 = vty->
hödex
;

1166 
	}
}

1172 
	$vty_ã ë_›ti⁄
 (
vty
 *vty, *
buf
, 
nbyãs
)

1174 #ifde‡
TELNET_OPTION_DEBUG


1175 
i
;

1177 
i
 = 0; i < 
nbyãs
; i++)

1179 
buf
[
i
])

1181 
IAC
:

1182 
	`vty_out
 (
vty
, "IAC ");

1184 
WILL
:

1185 
	`vty_out
 (
vty
, "WILL ");

1187 
WONT
:

1188 
	`vty_out
 (
vty
, "WONT ");

1190 
DO
:

1191 
	`vty_out
 (
vty
, "DO ");

1193 
DONT
:

1194 
	`vty_out
 (
vty
, "DONT ");

1196 
SB
:

1197 
	`vty_out
 (
vty
, "SB ");

1199 
SE
:

1200 
	`vty_out
 (
vty
, "SE ");

1202 
TELOPT_ECHO
:

1203 
	`vty_out
 (
vty
, "TELOPT_ECHO %s", 
VTY_NEWLINE
);

1205 
TELOPT_SGA
:

1206 
	`vty_out
 (
vty
, "TELOPT_SGA %s", 
VTY_NEWLINE
);

1208 
TELOPT_NAWS
:

1209 
	`vty_out
 (
vty
, "TELOPT_NAWS %s", 
VTY_NEWLINE
);

1212 
	`vty_out
 (
vty
, "%x ", 
buf
[
i
]);

1216 
	`vty_out
 (
vty
, "%s", 
VTY_NEWLINE
);

1220 
buf
[0])

1222 
SB
:

1223 
vty
->
sb_Àn
 = 0;

1224 
vty
->
üc_sb_ö_¥ogªss
 = 1;

1227 
SE
:

1229 i‡(!
vty
->
üc_sb_ö_¥ogªss
)

1232 i‡((
vty
->
sb_Àn
 =0Ë|| (vty->
sb_buf
[0] == '\0'))

1234 
vty
->
üc_sb_ö_¥ogªss
 = 0;

1237 
vty
->
sb_buf
[0])

1239 
TELOPT_NAWS
:

1240 i‡(
vty
->
sb_Àn
 !
TELNET_NAWS_SB_LEN
)

1241 
	`zlog_w¨n
("RFC 1073 violation detected:Åelnet NAWS option "

1243 
TELNET_NAWS_SB_LEN
, (
u_l⁄g
)
vty
->
sb_Àn
);

1244 i‡((
vty
->
sb_buf
Ë< 
TELNET_NAWS_SB_LEN
)

1245 
	`zlog_îr
("Bug detected: sizeof(vty->sb_buf) %lu < %d, "

1247 (
u_l⁄g
)(
vty
->
sb_buf
), 
TELNET_NAWS_SB_LEN
);

1250 
vty
->
width
 = ((vty->
sb_buf
[1] << 8)|vty->sb_buf[2]);

1251 
vty
->
height
 = ((vty->
sb_buf
[3] << 8)|vty->sb_buf[4]);

1252 #ifde‡
TELNET_OPTION_DEBUG


1253 
	`vty_out
(
vty
, "TELNET NAWS window sizeÇegotiation completed: "

1255 
vty
->
width
, vty->
height
, 
VTY_NEWLINE
);

1260 
vty
->
üc_sb_ö_¥ogªss
 = 0;

1268 
	}
}

1272 
	$vty_execuã
 (
vty
 *vty)

1274 
ªt
;

1276 
ªt
 = 
CMD_SUCCESS
;

1278 
vty
->
node
)

1280 
AUTH_NODE
:

1281 
AUTH_ENABLE_NODE
:

1282 
	`vty_auth
 (
vty
, vty->
buf
);

1285 
ªt
 = 
	`vty_comm™d
 (
vty
, vty->
buf
);

1286 i‡(
vty
->
ty≥
 =
VTY_TERM
)

1287 
	`vty_hi°_add
 (
vty
);

1292 
vty
->
˝
 = vty->
Àngth
 = 0;

1293 
	`vty_˛ór_buf
 (
vty
);

1295 i‡(
vty
->
°©us
 !
VTY_CLOSE
 )

1296 
	`vty_¥om±
 (
vty
);

1298  
ªt
;

1299 
	}
}

1301 
	#CONTROL
(
X
Ë((XË- '@')

	)

1302 
	#VTY_NORMAL
 0

	)

1303 
	#VTY_PRE_ESCAPE
 1

	)

1304 
	#VTY_ESCAPE
 2

	)

1308 
	$vty_esˇ≥_m≠
 (
c
, 
vty
 *vty)

1310 
c
)

1313 
	`vty_¥evious_löe
 (
vty
);

1316 
	`vty_√xt_löe
 (
vty
);

1319 
	`vty_f‹w¨d_ch¨
 (
vty
);

1322 
	`vty_backw¨d_ch¨
 (
vty
);

1329 
vty
->
esˇ≥
 = 
VTY_NORMAL
;

1330 
	}
}

1334 
	$vty_buf„r_ª£t
 (
vty
 *vty)

1336 
	`buf„r_ª£t
 (
vty
->
obuf
);

1337 
	`vty_¥om±
 (
vty
);

1338 
	`vty_ªdøw_löe
 (
vty
);

1339 
	}
}

1343 
	$vty_ªad
 (
thªad
 *thread)

1345 
i
;

1346 
nbyãs
;

1347 
buf
[
VTY_READ_BUFSIZ
];

1349 
vty_sock
 = 
	`THREAD_FD
 (
thªad
);

1350 
vty
 *vty = 
	`THREAD_ARG
 (
thªad
);

1351 
vty
->
t_ªad
 = 
NULL
;

1354 i‡((
nbyãs
 = 
	`ªad
 (
vty
->
fd
, 
buf
, 
VTY_READ_BUFSIZ
)) <= 0)

1356 i‡(
nbyãs
 < 0)

1358 i‡(
	`ERRNO_IO_RETRY
(
î∫o
))

1360 
	`vty_evít
 (
VTY_READ
, 
vty_sock
, 
vty
);

1363 
vty
->
m⁄ô‹
 = 0;

1364 
	`zlog_w¨n
("%s:ÑeadÉrror on vty client fd %d, closing: %s",

1365 
__func__
, 
vty
->
fd
, 
	`ß„_°ªº‹
(
î∫o
));

1367 
	`buf„r_ª£t
(
vty
->
obuf
);

1368 
vty
->
°©us
 = 
VTY_CLOSE
;

1371 
i
 = 0; i < 
nbyãs
; i++)

1373 i‡(
buf
[
i
] =
IAC
)

1375 i‡(!
vty
->
üc
)

1377 
vty
->
üc
 = 1;

1382 
vty
->
üc
 = 0;

1386 i‡(
vty
->
üc_sb_ö_¥ogªss
 && !vty->
üc
)

1388 i‡(
vty
->
sb_Àn
 < (vty->
sb_buf
))

1389 
vty
->
sb_buf
[vty->
sb_Àn
] = 
buf
[
i
];

1390 
vty
->
sb_Àn
++;

1394 i‡(
vty
->
üc
)

1397 
ªt
 = 0;

1398 
ªt
 = 
	`vty_ã ë_›ti⁄
 (
vty
, 
buf
 + 
i
, 
nbyãs
 - i);

1399 
vty
->
üc
 = 0;

1400 
i
 +
ªt
;

1405 i‡(
vty
->
°©us
 =
VTY_MORE
)

1407 
buf
[
i
])

1409 
	`CONTROL
('C'):

1412 
	`vty_buf„r_ª£t
 (
vty
);

1417 
vty
->
°©us
 = 
VTY_MORELINE
;

1427 i‡(
vty
->
esˇ≥
 =
VTY_ESCAPE
)

1429 
	`vty_esˇ≥_m≠
 (
buf
[
i
], 
vty
);

1434 i‡(
vty
->
esˇ≥
 =
VTY_PRE_ESCAPE
)

1436 
buf
[
i
])

1439 
vty
->
esˇ≥
 = 
VTY_ESCAPE
;

1442 
	`vty_backw¨d_w‹d
 (
vty
);

1443 
vty
->
esˇ≥
 = 
VTY_NORMAL
;

1446 
	`vty_f‹w¨d_w‹d
 (
vty
);

1447 
vty
->
esˇ≥
 = 
VTY_NORMAL
;

1450 
	`vty_f‹w¨d_kûl_w‹d
 (
vty
);

1451 
vty
->
esˇ≥
 = 
VTY_NORMAL
;

1453 
	`CONTROL
('H'):

1455 
	`vty_backw¨d_kûl_w‹d
 (
vty
);

1456 
vty
->
esˇ≥
 = 
VTY_NORMAL
;

1459 
vty
->
esˇ≥
 = 
VTY_NORMAL
;

1465 
buf
[
i
])

1467 
	`CONTROL
('A'):

1468 
	`vty_begönög_of_löe
 (
vty
);

1470 
	`CONTROL
('B'):

1471 
	`vty_backw¨d_ch¨
 (
vty
);

1473 
	`CONTROL
('C'):

1474 
	`vty_°›_öput
 (
vty
);

1476 
	`CONTROL
('D'):

1477 
	`vty_dñëe_ch¨
 (
vty
);

1479 
	`CONTROL
('E'):

1480 
	`vty_íd_of_löe
 (
vty
);

1482 
	`CONTROL
('F'):

1483 
	`vty_f‹w¨d_ch¨
 (
vty
);

1485 
	`CONTROL
('H'):

1487 
	`vty_dñëe_backw¨d_ch¨
 (
vty
);

1489 
	`CONTROL
('K'):

1490 
	`vty_kûl_löe
 (
vty
);

1492 
	`CONTROL
('N'):

1493 
	`vty_√xt_löe
 (
vty
);

1495 
	`CONTROL
('P'):

1496 
	`vty_¥evious_löe
 (
vty
);

1498 
	`CONTROL
('T'):

1499 
	`vty_å™•o£_ch¨s
 (
vty
);

1501 
	`CONTROL
('U'):

1502 
	`vty_kûl_löe_‰om_begönög
 (
vty
);

1504 
	`CONTROL
('W'):

1505 
	`vty_backw¨d_kûl_w‹d
 (
vty
);

1507 
	`CONTROL
('Z'):

1508 
	`vty_íd_c⁄fig
 (
vty
);

1512 
	`vty_out
 (
vty
, "%s", 
VTY_NEWLINE
);

1513 
	`vty_execuã
 (
vty
);

1516 
	`vty_com∂ëe_comm™d
 (
vty
);

1519 i‡(
vty
->
node
 =
AUTH_NODE
 || vty->nodê=
AUTH_ENABLE_NODE
)

1520 
	`vty_£lf_ö£π
 (
vty
, 
buf
[
i
]);

1522 
	`vty_des¸ibe_comm™d
 (
vty
);

1525 i‡(
i
 + 1 < 
nbyãs
 && 
buf
[i + 1] == '[')

1527 
vty
->
esˇ≥
 = 
VTY_ESCAPE
;

1528 
i
++;

1531 
vty
->
esˇ≥
 = 
VTY_PRE_ESCAPE
;

1534 i‡(
buf
[
i
] > 31 && buf[i] < 127)

1535 
	`vty_£lf_ö£π
 (
vty
, 
buf
[
i
]);

1541 i‡(
vty
->
°©us
 =
VTY_CLOSE
)

1542 
	`vty_˛o£
 (
vty
);

1545 
	`vty_evít
 (
VTY_WRITE
, 
vty_sock
, 
vty
);

1546 
	`vty_evít
 (
VTY_READ
, 
vty_sock
, 
vty
);

1549 
	}
}

1553 
	$vty_Êush
 (
thªad
 *thread)

1555 
îa£
;

1556 
buf„r_°©us_t
 
Êushrc
;

1557 
vty_sock
 = 
	`THREAD_FD
 (
thªad
);

1558 
vty
 *vty = 
	`THREAD_ARG
 (
thªad
);

1560 
vty
->
t_wrôe
 = 
NULL
;

1563 i‡((
vty
->
löes
 =0Ë&& vty->
t_ªad
)

1565 
	`thªad_ˇn˚l
 (
vty
->
t_ªad
);

1566 
vty
->
t_ªad
 = 
NULL
;

1570 
îa£
 = ((
vty
->
°©us
 =
VTY_MORE
 || vty->°©u†=
VTY_MORELINE
));

1573 i‡((
vty
->
löes
 =0Ë|| (vty->
width
 == 0))

1574 
Êushrc
 = 
	`buf„r_Êush_avaûabÀ
(
vty
->
obuf
, vty->
fd
);

1575 i‡(
vty
->
°©us
 =
VTY_MORELINE
)

1576 
Êushrc
 = 
	`buf„r_Êush_wödow
(
vty
->
obuf
, vty->
fd
, vty->
width
,

1577 1, 
îa£
, 0);

1579 
Êushrc
 = 
	`buf„r_Êush_wödow
(
vty
->
obuf
, vty->
fd
, vty->
width
,

1580 
vty
->
löes
 >= 0 ? vty->lines :

1581 
vty
->
height
,

1582 
îa£
, 0);

1583 
Êushrc
)

1585 
BUFFER_ERROR
:

1586 
vty
->
m⁄ô‹
 = 0;

1587 
	`zlog_w¨n
("buffer_flush failed on vty client fd %d, closing",

1588 
vty
->
fd
);

1589 
	`buf„r_ª£t
(
vty
->
obuf
);

1590 
	`vty_˛o£
(
vty
);

1592 
BUFFER_EMPTY
:

1593 i‡(
vty
->
°©us
 =
VTY_CLOSE
)

1594 
	`vty_˛o£
 (
vty
);

1597 
vty
->
°©us
 = 
VTY_NORMAL
;

1598 i‡(
vty
->
löes
 == 0)

1599 
	`vty_evít
 (
VTY_READ
, 
vty_sock
, 
vty
);

1602 
BUFFER_PENDING
:

1604 
vty
->
°©us
 = 
VTY_MORE
;

1605 i‡(
vty
->
löes
 == 0)

1606 
	`vty_evít
 (
VTY_WRITE
, 
vty_sock
, 
vty
);

1611 
	}
}

1614 
vty
 *

1615 
	$vty_¸óã
 (
vty_sock
, 
sockuni⁄
 *
su
)

1617 
buf
[
SU_ADDRSTRLEN
];

1618 
vty
 *vty;

1620 
	`sockuni⁄2°r
(
su
, 
buf
, 
SU_ADDRSTRLEN
);

1623 
vty
 = 
	`vty_√w
 ();

1624 
vty
->
fd
 = 
vty_sock
;

1625 
vty
->
ty≥
 = 
VTY_TERM
;

1626 
	`°r˝y
 (
vty
->
addªss
, 
buf
);

1627 i‡(
no_∑ssw‹d_check
)

1629 i‡(
ª°ri˘ed_mode
)

1630 
vty
->
node
 = 
RESTRICTED_NODE
;

1631 i‡(
ho°
.
adv™˚d
)

1632 
vty
->
node
 = 
ENABLE_NODE
;

1634 
vty
->
node
 = 
VIEW_NODE
;

1637 
vty
->
node
 = 
AUTH_NODE
;

1638 
vty
->
Áû
 = 0;

1639 
vty
->
˝
 = 0;

1640 
	`vty_˛ór_buf
 (
vty
);

1641 
vty
->
Àngth
 = 0;

1642 
	`mem£t
 (
vty
->
hi°
, 0,  (vty->hist));

1643 
vty
->
hp
 = 0;

1644 
vty
->
hödex
 = 0;

1645 
	`ve˘‹_£t_ödex
 (
vtyvec
, 
vty_sock
, 
vty
);

1646 
vty
->
°©us
 = 
VTY_NORMAL
;

1647 
vty
->
v_timeout
 = 
vty_timeout_vÆ
;

1648 i‡(
ho°
.
löes
 >= 0)

1649 
vty
->
löes
 = 
ho°
.lines;

1651 
vty
->
löes
 = -1;

1652 
vty
->
üc
 = 0;

1653 
vty
->
üc_sb_ö_¥ogªss
 = 0;

1654 
vty
->
sb_Àn
 = 0;

1656 i‡(! 
no_∑ssw‹d_check
)

1659 i‡(
ho°
.
∑ssw‹d
 =
NULL
 && ho°.
∑ssw‹d_í¸y±
 == NULL)

1661 
	`vty_out
 (
vty
, "VtyÖassw‹d i†nŸ së.%s", 
VTY_NEWLINE
);

1662 
vty
->
°©us
 = 
VTY_CLOSE
;

1663 
	`vty_˛o£
 (
vty
);

1664  
NULL
;

1669 
	`vty_hñlo
 (
vty
);

1670 i‡(! 
no_∑ssw‹d_check
)

1671 
	`vty_out
 (
vty
, "%sU£∏Ac˚s†Vîifiˇti⁄%s%s", 
VTY_NEWLINE
, VTY_NEWLINE, VTY_NEWLINE);

1674 
	`vty_wûl_echo
 (
vty
);

1675 
	`vty_wûl_suµªss_go_ahód
 (
vty
);

1677 
	`vty_d⁄t_löemode
 (
vty
);

1678 
	`vty_do_wödow_size
 (
vty
);

1681 
	`vty_¥om±
 (
vty
);

1684 
	`vty_evít
 (
VTY_WRITE
, 
vty_sock
, 
vty
);

1685 
	`vty_evít
 (
VTY_READ
, 
vty_sock
, 
vty
);

1687  
vty
;

1688 
	}
}

1692 
	$vty_ac˚±
 (
thªad
 *thread)

1694 
vty_sock
;

1695 
sockuni⁄
 
su
;

1696 
ªt
;

1697 
⁄
;

1698 
ac˚±_sock
;

1699 
¥efix
 *
p
 = 
NULL
;

1700 
ac˚ss_li°
 *
a˛
 = 
NULL
;

1701 
buf
[
SU_ADDRSTRLEN
];

1703 
ac˚±_sock
 = 
	`THREAD_FD
 (
thªad
);

1706 
	`vty_evít
 (
VTY_SERV
, 
ac˚±_sock
, 
NULL
);

1708 
	`mem£t
 (&
su
, 0,  (
sockuni⁄
));

1711 
vty_sock
 = 
	`sockuni⁄_ac˚±
 (
ac˚±_sock
, &
su
);

1712 i‡(
vty_sock
 < 0)

1714 
	`zlog_w¨n
 ("ˇn'àac˚± vty sockë : %s", 
	`ß„_°ªº‹
 (
î∫o
));

1717 
	`£t_n⁄blockög
(
vty_sock
);

1719 
p
 = 
	`sockuni⁄2ho°¥efix
 (&
su
);

1722 i‡(
p
->
Ámûy
 =
AF_INET
 && 
vty_ac˚s¶i°_«me
)

1724 i‡((
a˛
 = 
	`ac˚ss_li°_lookup
 (
AFI_IP
, 
vty_ac˚s¶i°_«me
)) &&

1725 (
	`ac˚ss_li°_≠∂y
 (
a˛
, 
p
Ë=
FILTER_DENY
))

1727 
	`zlog
 (
NULL
, 
LOG_INFO
, "Vty connectionÑefused from %s",

1728 
	`sockuni⁄2°r
 (&
su
, 
buf
, 
SU_ADDRSTRLEN
));

1729 
	`˛o£
 (
vty_sock
);

1732 
	`vty_evít
 (
VTY_SERV
, 
ac˚±_sock
, 
NULL
);

1734 
	`¥efix_‰ì
 (
p
);

1740 #ifde‡
HAVE_IPV6


1742 i‡(
p
->
Ámûy
 =
AF_INET6
 && 
vty_ùv6_ac˚s¶i°_«me
)

1744 i‡((
a˛
 = 
	`ac˚ss_li°_lookup
 (
AFI_IP6
, 
vty_ùv6_ac˚s¶i°_«me
)) &&

1745 (
	`ac˚ss_li°_≠∂y
 (
a˛
, 
p
Ë=
FILTER_DENY
))

1747 
	`zlog
 (
NULL
, 
LOG_INFO
, "Vty connectionÑefused from %s",

1748 
	`sockuni⁄2°r
 (&
su
, 
buf
, 
SU_ADDRSTRLEN
));

1749 
	`˛o£
 (
vty_sock
);

1752 
	`vty_evít
 (
VTY_SERV
, 
ac˚±_sock
, 
NULL
);

1754 
	`¥efix_‰ì
 (
p
);

1761 
	`¥efix_‰ì
 (
p
);

1763 
⁄
 = 1;

1764 
ªt
 = 
	`£tsock›t
 (
vty_sock
, 
IPPROTO_TCP
, 
TCP_NODELAY
,

1765 (*Ë&
⁄
,  (on));

1766 i‡(
ªt
 < 0)

1767 
	`zlog
 (
NULL
, 
LOG_INFO
, "can't set sockoptÅo vty_sock : %s",

1768 
	`ß„_°ªº‹
 (
î∫o
));

1770 
	`zlog
 (
NULL
, 
LOG_INFO
, "Vty connection from %s",

1771 
	`sockuni⁄2°r
 (&
su
, 
buf
, 
SU_ADDRSTRLEN
));

1773 
	`vty_¸óã
 (
vty_sock
, &
su
);

1776 
	}
}

1778 #ifde‡
HAVE_IPV6


1780 
	$vty_£rv_sock_addröfo
 (c⁄° *
ho°«me
, 
p‹t
)

1782 
ªt
;

1783 
addröfo
 
ªq
;

1784 
addröfo
 *
aöfo
;

1785 
addröfo
 *
aöfo_ßve
;

1786 
sock
;

1787 
p‹t_°r
[
BUFSIZ
];

1789 
	`mem£t
 (&
ªq
, 0,  (
addröfo
));

1790 
ªq
.
ai_Êags
 = 
AI_PASSIVE
;

1791 
ªq
.
ai_Ámûy
 = 
AF_UNSPEC
;

1792 
ªq
.
ai_sockty≥
 = 
SOCK_STREAM
;

1793 
	`•rötf
 (
p‹t_°r
, "%d", 
p‹t
);

1794 
p‹t_°r
[ (port_str) - 1] = '\0';

1796 
ªt
 = 
	`gëaddröfo
 (
ho°«me
, 
p‹t_°r
, &
ªq
, &
aöfo
);

1798 i‡(
ªt
 != 0)

1800 
	`Ârötf
 (
°dîr
, "gëaddröfÿÁûed: %s\n", 
	`gai_°ªº‹
 (
ªt
));

1801 
	`exô
 (1);

1804 
aöfo_ßve
 = 
aöfo
;

1808 i‡(
aöfo
->
ai_Ámûy
 !
AF_INET


1809 #ifde‡
HAVE_IPV6


1810 && 
aöfo
->
ai_Ámûy
 !
AF_INET6


1815 
sock
 = 
	`sockë
 (
aöfo
->
ai_Ámûy
,áöfo->
ai_sockty≥
,áöfo->
ai_¥Ÿocﬁ
);

1816 i‡(
sock
 < 0)

1819 
	`sock›t_v6⁄ly
 (
aöfo
->
ai_Ámûy
, 
sock
);

1820 
	`sock›t_ªu£addr
 (
sock
);

1821 
	`sock›t_ªu£p‹t
 (
sock
);

1823 
ªt
 = 
	`böd
 (
sock
, 
aöfo
->
ai_addr
,áöfo->
ai_addæí
);

1824 i‡(
ªt
 < 0)

1826 
	`˛o£
 (
sock
);

1830 
ªt
 = 
	`li°í
 (
sock
, 3);

1831 i‡(
ªt
 < 0)

1833 
	`˛o£
 (
sock
);

1837 
	`vty_evít
 (
VTY_SERV
, 
sock
, 
NULL
);

1839 (
aöfo
 =áöfo->
ai_√xt
Ë!
NULL
);

1841 
	`‰ìaddröfo
 (
aöfo_ßve
);

1842 
	}
}

1847 
	$vty_£rv_sock_Ámûy
 (c⁄° * 
addr
, 
p‹t
, 
Ámûy
)

1849 
ªt
;

1850 
sockuni⁄
 
su
;

1851 
ac˚±_sock
;

1852 * 
«ddr
=
NULL
;

1854 
	`mem£t
 (&
su
, 0,  (
sockuni⁄
));

1855 
su
.
ß
.
ß_Ámûy
 = 
Ámûy
;

1856 if(
addr
)

1857 
Ámûy
)

1859 
AF_INET
:

1860 
«ddr
=&
su
.
sö
.
sö_addr
;

1862 #ifde‡
HAVE_IPV6


1863 
AF_INET6
:

1864 
«ddr
=&
su
.
sö6
.
sö6_addr
;

1869 if(
«ddr
)

1870 
	`öë_±⁄
(
Ámûy
,
addr
,
«ddr
))

1873 
	`zlog_îr
("badáddªs†%s",
addr
);

1874 
«ddr
=
NULL
;

1877 
	`zlog_îr
("îr‹Åøn¶©ögáddªs†%s: %s",
addr
,
	`ß„_°ªº‹
(
î∫o
));

1878 
«ddr
=
NULL
;

1882 
ac˚±_sock
 = 
	`sockuni⁄_°ªam_sockë
 (&
su
);

1883 i‡(
ac˚±_sock
 < 0)

1887 
	`sock›t_ªu£addr
 (
ac˚±_sock
);

1888 
	`sock›t_ªu£p‹t
 (
ac˚±_sock
);

1891 
ªt
 = 
	`sockuni⁄_böd
 (
ac˚±_sock
, &
su
, 
p‹t
, 
«ddr
);

1892 i‡(
ªt
 < 0)

1894 
	`zlog_w¨n
("can't bind socket");

1895 
	`˛o£
 (
ac˚±_sock
);

1900 
ªt
 = 
	`li°í
 (
ac˚±_sock
, 3);

1901 i‡(
ªt
 < 0)

1903 
	`zlog
 (
NULL
, 
LOG_WARNING
, "can'tÜisten socket");

1904 
	`˛o£
 (
ac˚±_sock
);

1909 
	`vty_evít
 (
VTY_SERV
, 
ac˚±_sock
, 
NULL
);

1910 
	}
}

1913 #ifde‡
VTYSH


1915 
	~<sys/un.h
>

1919 
	$vty_£rv_un
 (c⁄° *
∑th
)

1921 
ªt
;

1922 
sock
, 
Àn
;

1923 
sockaddr_un
 
£rv
;

1924 
mode_t
 
ﬁd_mask
;

1925 
z¥ivs_ids_t
 
ids
;

1928 
	`u∆ök
 (
∑th
);

1931 
ﬁd_mask
 = 
	`umask
 (0007);

1934 
sock
 = 
	`sockë
 (
AF_UNIX
, 
SOCK_STREAM
, 0);

1935 i‡(
sock
 < 0)

1937 
	`zlog_îr
("C™nŸ cª©êunix såóm sockë: %s", 
	`ß„_°ªº‹
(
î∫o
));

1942 
	`mem£t
 (&
£rv
, 0,  (
sockaddr_un
));

1943 
£rv
.
sun_Ámûy
 = 
AF_UNIX
;

1944 
	`°∫˝y
 (
£rv
.
sun_∑th
, 
∑th
, 
	`°æí
 (path));

1945 #ifde‡
HAVE_STRUCT_SOCKADDR_UN_SUN_LEN


1946 
Àn
 = 
£rv
.
sun_Àn
 = 
	`SUN_LEN
(&serv);

1948 
Àn
 =  (
£rv
.
sun_Ámûy
Ë+ 
	`°æí
 (£rv.
sun_∑th
);

1951 
ªt
 = 
	`böd
 (
sock
, (
sockaddr
 *Ë&
£rv
, 
Àn
);

1952 i‡(
ªt
 < 0)

1954 
	`zlog_îr
("C™nŸ bödÖ©h %s: %s", 
∑th
, 
	`ß„_°ªº‹
(
î∫o
));

1955 
	`˛o£
 (
sock
);

1959 
ªt
 = 
	`li°í
 (
sock
, 5);

1960 i‡(
ªt
 < 0)

1962 
	`zlog_îr
("li°í(fd %dËÁûed: %s", 
sock
, 
	`ß„_°ªº‹
(
î∫o
));

1963 
	`˛o£
 (
sock
);

1967 
	`umask
 (
ﬁd_mask
);

1969 
	`z¥ivs_gë_ids
(&
ids
);

1971 i‡(
ids
.
gid_vty
 > 0)

1974 i‡–
	`chown
 (
∑th
, -1, 
ids
.
gid_vty
) )

1976 
	`zlog_îr
 ("vty_serv_un: could chown socket, %s",

1977 
	`ß„_°ªº‹
 (
î∫o
) );

1981 
	`vty_evít
 (
VTYSH_SERV
, 
sock
, 
NULL
);

1982 
	}
}

1987 
	$vtysh_ac˚±
 (
thªad
 *thread)

1989 
ac˚±_sock
;

1990 
sock
;

1991 
˛õ¡_Àn
;

1992 
sockaddr_un
 
˛õ¡
;

1993 
vty
 *vty;

1995 
ac˚±_sock
 = 
	`THREAD_FD
 (
thªad
);

1997 
	`vty_evít
 (
VTYSH_SERV
, 
ac˚±_sock
, 
NULL
);

1999 
	`mem£t
 (&
˛õ¡
, 0,  (
sockaddr_un
));

2000 
˛õ¡_Àn
 =  (
sockaddr_un
);

2002 
sock
 = 
	`ac˚±
 (
ac˚±_sock
, (
sockaddr
 *Ë&
˛õ¡
,

2003 (
sockÀn_t
 *Ë&
˛õ¡_Àn
);

2005 i‡(
sock
 < 0)

2007 
	`zlog_w¨n
 ("ˇn'àac˚± vty sockë : %s", 
	`ß„_°ªº‹
 (
î∫o
));

2011 i‡(
	`£t_n⁄blockög
(
sock
) < 0)

2013 
	`zlog_w¨n
 ("vtysh_accept: couldÇot set vty socket %dÅoÇon-blocking,"

2014 " %s, closög", 
sock
, 
	`ß„_°ªº‹
 (
î∫o
));

2015 
	`˛o£
 (
sock
);

2019 #ifde‡
VTYSH_DEBUG


2020 
	`¥ötf
 ("VTY shelláccept\n");

2023 
vty
 = 
	`vty_√w
 ();

2024 
vty
->
fd
 = 
sock
;

2025 
vty
->
ty≥
 = 
VTY_SHELL_SERV
;

2026 
vty
->
node
 = 
VIEW_NODE
;

2028 
	`vty_evít
 (
VTYSH_READ
, 
sock
, 
vty
);

2031 
	}
}

2034 
	$vtysh_Êush
(
vty
 *vty)

2036 
	`buf„r_Êush_avaûabÀ
(
vty
->
obuf
, vty->
fd
))

2038 
BUFFER_PENDING
:

2039 
	`vty_evít
(
VTYSH_WRITE
, 
vty
->
fd
, vty);

2041 
BUFFER_ERROR
:

2042 
vty
->
m⁄ô‹
 = 0;

2043 
	`zlog_w¨n
("%s: wrôêîr‹Åÿfd %d, closög", 
__func__
, 
vty
->
fd
);

2044 
	`buf„r_ª£t
(
vty
->
obuf
);

2045 
	`vty_˛o£
(
vty
);

2048 
BUFFER_EMPTY
:

2052 
	}
}

2055 
	$vtysh_ªad
 (
thªad
 *thread)

2057 
ªt
;

2058 
sock
;

2059 
nbyãs
;

2060 
vty
 *vty;

2061 
buf
[
VTY_READ_BUFSIZ
];

2062 *
p
;

2063 
u_ch¨
 
hódî
[4] = {0, 0, 0, 0};

2065 
sock
 = 
	`THREAD_FD
 (
thªad
);

2066 
vty
 = 
	`THREAD_ARG
 (
thªad
);

2067 
vty
->
t_ªad
 = 
NULL
;

2069 i‡((
nbyãs
 = 
	`ªad
 (
sock
, 
buf
, 
VTY_READ_BUFSIZ
)) <= 0)

2071 i‡(
nbyãs
 < 0)

2073 i‡(
	`ERRNO_IO_RETRY
(
î∫o
))

2075 
	`vty_evít
 (
VTYSH_READ
, 
sock
, 
vty
);

2078 
vty
->
m⁄ô‹
 = 0;

2079 
	`zlog_w¨n
("%s:Ñead failed on vtysh client fd %d, closing: %s",

2080 
__func__
, 
sock
, 
	`ß„_°ªº‹
(
î∫o
));

2082 
	`buf„r_ª£t
(
vty
->
obuf
);

2083 
	`vty_˛o£
 (
vty
);

2084 #ifde‡
VTYSH_DEBUG


2085 
	`¥ötf
 ("close vtysh\n");

2090 #ifde‡
VTYSH_DEBUG


2091 
	`¥ötf
 ("löe: %.*s\n", 
nbyãs
, 
buf
);

2094 
p
 = 
buf
;Ö < buf+
nbyãs
;Ö++)

2096 
	`vty_ísuª
(
vty
, vty->
Àngth
+1);

2097 
vty
->
buf
[vty->
Àngth
++] = *
p
;

2098 i‡(*
p
 == '\0')

2101 
ªt
 = 
	`vty_execuã
 (
vty
);

2106 #ifde‡
VTYSH_DEBUG


2107 
	`¥ötf
 ("ªsu…: %d\n", 
ªt
);

2108 
	`¥ötf
 ("vtyshÇode: %d\n", 
vty
->
node
);

2111 
hódî
[3] = 
ªt
;

2112 
	`buf„r_put
(
vty
->
obuf
, 
hódî
, 4);

2114 i‡(!
vty
->
t_wrôe
 && (
	`vtysh_Êush
(vty) < 0))

2120 
	`vty_evít
 (
VTYSH_READ
, 
sock
, 
vty
);

2123 
	}
}

2126 
	$vtysh_wrôe
 (
thªad
 *thread)

2128 
vty
 *vty = 
	`THREAD_ARG
 (
thªad
);

2130 
vty
->
t_wrôe
 = 
NULL
;

2131 
	`vtysh_Êush
(
vty
);

2133 
	}
}

2139 
	$vty_£rv_sock
 (c⁄° *
addr
, 
p‹t
, c⁄° *
∑th
)

2142 i‡(
p‹t
)

2145 #ifde‡
HAVE_IPV6


2146 
	`vty_£rv_sock_addröfo
 (
addr
, 
p‹t
);

2148 
	`vty_£rv_sock_Ámûy
 (
addr
,
p‹t
, 
AF_INET
);

2152 #ifde‡
VTYSH


2153 
	`vty_£rv_un
 (
∑th
);

2155 
	}
}

2162 
	$vty_˛o£
 (
vty
 *vty)

2164 
i
;

2167 i‡(
vty
->
t_ªad
)

2168 
	`thªad_ˇn˚l
 (
vty
->
t_ªad
);

2169 i‡(
vty
->
t_wrôe
)

2170 
	`thªad_ˇn˚l
 (
vty
->
t_wrôe
);

2171 i‡(
vty
->
t_timeout
)

2172 
	`thªad_ˇn˚l
 (
vty
->
t_timeout
);

2175 
	`buf„r_Êush_Æl
 (
vty
->
obuf
, vty->
fd
);

2178 
	`buf„r_‰ì
 (
vty
->
obuf
);

2181 
i
 = 0; i < 
VTY_MAXHIST
; i++)

2182 i‡(
vty
->
hi°
[
i
])

2183 
	`XFREE
 (
MTYPE_VTY_HIST
, 
vty
->
hi°
[
i
]);

2186 
	`ve˘‹_un£t
 (
vtyvec
, 
vty
->
fd
);

2189 i‡(
vty
->
fd
 > 0)

2190 
	`˛o£
 (
vty
->
fd
);

2192 i‡(
vty
->
buf
)

2193 
	`XFREE
 (
MTYPE_VTY
, 
vty
->
buf
);

2196 
	`vty_c⁄fig_u∆ock
 (
vty
);

2199 
	`XFREE
 (
MTYPE_VTY
, 
vty
);

2200 
	}
}

2204 
	$vty_timeout
 (
thªad
 *thread)

2206 
vty
 *vty;

2208 
vty
 = 
	`THREAD_ARG
 (
thªad
);

2209 
vty
->
t_timeout
 = 
NULL
;

2210 
vty
->
v_timeout
 = 0;

2213 
	`buf„r_ª£t
 (
vty
->
obuf
);

2214 
	`vty_out
 (
vty
, "%sVty c⁄√˘i⁄ i†timed out.%s", 
VTY_NEWLINE
, VTY_NEWLINE);

2217 
vty
->
°©us
 = 
VTY_CLOSE
;

2218 
	`vty_˛o£
 (
vty
);

2221 
	}
}

2225 
	$vty_ªad_fûe
 (
FILE
 *
c⁄Â
)

2227 
ªt
;

2228 
vty
 *vty;

2229 
löe_num
 = 0;

2231 
vty
 = 
	`vty_√w
 ();

2232 
vty
->
fd
 = 
	`dup
(
STDERR_FILENO
);

2233 i‡(
vty
->
fd
 < 0)

2236 
vty
->
fd
 = 
STDOUT_FILENO
;

2238 
vty
->
ty≥
 = 
VTY_FILE
;

2239 
vty
->
node
 = 
CONFIG_NODE
;

2242 
ªt
 = 
	`c⁄fig_‰om_fûe
 (
vty
, 
c⁄Â
, &
löe_num
);

2245 
	`buf„r_Êush_Æl
 (
vty
->
obuf
, vty->
fd
);

2247 i‡–!((
ªt
 =
CMD_SUCCESS
Ë|| (ªà=
CMD_ERR_NOTHING_TODO
)) )

2249 
ªt
)

2251 
CMD_ERR_AMBIGUOUS
:

2252 
	`Ârötf
 (
°dîr
, "*** ErrorÑeading config: Ambiguous command.\n");

2254 
CMD_ERR_NO_MATCH
:

2255 
	`Ârötf
 (
°dîr
, "*** ErrorÑeading config: There isÇo such command.\n");

2258 
	`Ârötf
 (
°dîr
, "*** Error occuredÖrocessingÜine %u, below:\n%s\n",

2259 
löe_num
, 
vty
->
buf
);

2260 
	`vty_˛o£
 (
vty
);

2261 
	`exô
 (1);

2264 
	`vty_˛o£
 (
vty
);

2265 
	}
}

2267 
FILE
 *

2268 
	$vty_u£_backup_c⁄fig
 (*
fuŒ∑th
)

2270 *
fuŒ∑th_ßv
, *
fuŒ∑th_tmp
;

2271 
FILE
 *
ªt
 = 
NULL
;

2272 
°©
 
buf
;

2273 
tmp
, 
ßv
;

2274 
c
;

2275 
buf„r
[512];

2277 
fuŒ∑th_ßv
 = 
	`mÆloc
 (
	`°æí
 (
fuŒ∑th
Ë+ såÀ¿(
CONF_BACKUP_EXT
) + 1);

2278 
	`°r˝y
 (
fuŒ∑th_ßv
, 
fuŒ∑th
);

2279 
	`°rˇt
 (
fuŒ∑th_ßv
, 
CONF_BACKUP_EXT
);

2280 i‡(
	`°©
 (
fuŒ∑th_ßv
, &
buf
) == -1)

2282 
	`‰ì
 (
fuŒ∑th_ßv
);

2283  
NULL
;

2286 
fuŒ∑th_tmp
 = 
	`mÆloc
 (
	`°æí
 (
fuŒ∑th
) + 8);

2287 
	`•rötf
 (
fuŒ∑th_tmp
, "%s.XXXXXX", 
fuŒ∑th
);

2290 
tmp
 = 
	`mk°emp
 (
fuŒ∑th_tmp
);

2291 i‡(
tmp
 < 0)

2293 
	`‰ì
 (
fuŒ∑th_ßv
);

2294 
	`‰ì
 (
fuŒ∑th_tmp
);

2295  
NULL
;

2298 
ßv
 = 
	`›í
 (
fuŒ∑th_ßv
, 
O_RDONLY
);

2299 i‡(
ßv
 < 0)

2301 
	`u∆ök
 (
fuŒ∑th_tmp
);

2302 
	`‰ì
 (
fuŒ∑th_ßv
);

2303 
	`‰ì
 (
fuŒ∑th_tmp
);

2304  
NULL
;

2307 (
c
 = 
	`ªad
 (
ßv
, 
buf„r
, 512)) > 0)

2308 
	`wrôe
 (
tmp
, 
buf„r
, 
c
);

2310 
	`˛o£
 (
ßv
);

2311 
	`˛o£
 (
tmp
);

2313 i‡(
	`chmod
(
fuŒ∑th_tmp
, 
CONFIGFILE_MASK
) != 0)

2315 
	`u∆ök
 (
fuŒ∑th_tmp
);

2316 
	`‰ì
 (
fuŒ∑th_ßv
);

2317 
	`‰ì
 (
fuŒ∑th_tmp
);

2318  
NULL
;

2321 i‡(
	`lök
 (
fuŒ∑th_tmp
, 
fuŒ∑th
) == 0)

2322 
ªt
 = 
	`f›í
 (
fuŒ∑th
, "r");

2324 
	`u∆ök
 (
fuŒ∑th_tmp
);

2326 
	`‰ì
 (
fuŒ∑th_ßv
);

2327 
	`‰ì
 (
fuŒ∑th_tmp
);

2328  
ªt
;

2329 
	}
}

2333 
	$vty_ªad_c⁄fig
 (*
c⁄fig_fûe
,

2334 *
c⁄fig_deÁu…_dú
)

2336 
cwd
[
MAXPATHLEN
];

2337 
FILE
 *
c⁄Â
 = 
NULL
;

2338 *
fuŒ∑th
;

2339 *
tmp
 = 
NULL
;

2342 i‡(
c⁄fig_fûe
 !
NULL
)

2344 i‡(! 
	`IS_DIRECTORY_SEP
 (
c⁄fig_fûe
[0]))

2346 
	`gëcwd
 (
cwd
, 
MAXPATHLEN
);

2347 
tmp
 = 
	`XMALLOC
 (
MTYPE_TMP
,

2348 
	`°æí
 (
cwd
Ë+ såÀ¿(
c⁄fig_fûe
) + 2);

2349 
	`•rötf
 (
tmp
, "%s/%s", 
cwd
, 
c⁄fig_fûe
);

2350 
fuŒ∑th
 = 
tmp
;

2353 
fuŒ∑th
 = 
c⁄fig_fûe
;

2355 
c⁄Â
 = 
	`f›í
 (
fuŒ∑th
, "r");

2357 i‡(
c⁄Â
 =
NULL
)

2359 
	`Ârötf
 (
°dîr
, "%s: failedÅo open configuration file %s: %s\n",

2360 
__func__
, 
fuŒ∑th
, 
	`ß„_°ªº‹
 (
î∫o
));

2362 
c⁄Â
 = 
	`vty_u£_backup_c⁄fig
 (
fuŒ∑th
);

2363 i‡(
c⁄Â
)

2364 
	`Ârötf
 (
°dîr
, "WARNING: using backup configuration file!\n");

2367 
	`Ârötf
 (
°dîr
, "can't open configuration file [%s]\n",

2368 
c⁄fig_fûe
);

2369 
	`exô
(1);

2375 #ifde‡
VTYSH


2376 
ªt
;

2377 
°©
 
c⁄f_°©
;

2393 i‡–
	`°r°r
(
c⁄fig_deÁu…_dú
, "vtysh"Ë=
NULL
)

2395 
ªt
 = 
	`°©
 (
öãgøã_deÁu…
, &
c⁄f_°©
);

2396 i‡(
ªt
 >= 0)

2401 
c⁄Â
 = 
	`f›í
 (
c⁄fig_deÁu…_dú
, "r");

2402 i‡(
c⁄Â
 =
NULL
)

2404 
	`Ârötf
 (
°dîr
, "%s: failedÅo open configuration file %s: %s\n",

2405 
__func__
, 
c⁄fig_deÁu…_dú
, 
	`ß„_°ªº‹
 (
î∫o
));

2407 
c⁄Â
 = 
	`vty_u£_backup_c⁄fig
 (
c⁄fig_deÁu…_dú
);

2408 i‡(
c⁄Â
)

2410 
	`Ârötf
 (
°dîr
, "WARNING: using backup configuration file!\n");

2411 
fuŒ∑th
 = 
c⁄fig_deÁu…_dú
;

2415 
	`Ârötf
 (
°dîr
, "can't open configuration file [%s]\n",

2416 
c⁄fig_deÁu…_dú
);

2417 
	`exô
 (1);

2421 
fuŒ∑th
 = 
c⁄fig_deÁu…_dú
;

2424 
	`vty_ªad_fûe
 (
c⁄Â
);

2426 
	`f˛o£
 (
c⁄Â
);

2428 
	`ho°_c⁄fig_£t
 (
fuŒ∑th
);

2430 i‡(
tmp
)

2431 
	`XFREE
 (
MTYPE_TMP
, 
fuŒ∑th
);

2432 
	}
}

2436 
	$vty_log
 (c⁄° *
Àvñ
, c⁄° *
¥Ÿo_°r
,

2437 c⁄° *
f‹m©
, 
time°amp_c⁄åﬁ
 *
˘l
, 
va_li°
 
va
)

2439 
i
;

2440 
vty
 *vty;

2442 i‡(!
vtyvec
)

2445 
i
 = 0; i < 
	`ve˘‹_a˘ive
 (
vtyvec
); i++)

2446 i‡((
vty
 = 
	`ve˘‹_¶Ÿ
 (
vtyvec
, 
i
)Ë!
NULL
)

2447 i‡(
vty
->
m⁄ô‹
)

2449 
va_li°
 
ac
;

2450 
	`va_c›y
(
ac
, 
va
);

2451 
	`vty_log_out
 (
vty
, 
Àvñ
, 
¥Ÿo_°r
, 
f‹m©
, 
˘l
, 
ac
);

2452 
	`va_íd
(
ac
);

2454 
	}
}

2458 
	$vty_log_fixed
 (*
buf
, 
size_t
 
Àn
)

2460 
i
;

2461 
iovec
 
iov
[2];

2464 i‡(!
vtyvec
)

2467 
iov
[0].
iov_ba£
 = 
buf
;

2468 
iov
[0].
iov_Àn
 = 
Àn
;

2469 
iov
[1].
iov_ba£
 = (*)"\r\n";

2470 
iov
[1].
iov_Àn
 = 2;

2472 
i
 = 0; i < 
	`ve˘‹_a˘ive
 (
vtyvec
); i++)

2474 
vty
 *vty;

2475 i‡(((
vty
 = 
	`ve˘‹_¶Ÿ
 (
vtyvec
, 
i
)Ë!
NULL
Ë&& vty->
m⁄ô‹
)

2478 
	`wrôev
(
vty
->
fd
, 
iov
, 2);

2480 
	}
}

2483 
	$vty_c⁄fig_lock
 (
vty
 *vty)

2485 i‡(
vty_c⁄fig
 == 0)

2487 
vty
->
c⁄fig
 = 1;

2488 
vty_c⁄fig
 = 1;

2490  
vty
->
c⁄fig
;

2491 
	}
}

2494 
	$vty_c⁄fig_u∆ock
 (
vty
 *vty)

2496 i‡(
vty_c⁄fig
 =1 && 
vty
->
c⁄fig
 == 1)

2498 
vty
->
c⁄fig
 = 0;

2499 
vty_c⁄fig
 = 0;

2501  
vty
->
c⁄fig
;

2502 
	}
}

2505 
thªad_ma°î
 *
	gma°î
;

2508 
	$vty_evít
 (
evít
Évít, 
sock
, 
vty
 *vty)

2510 
thªad
 *
vty_£rv_thªad
;

2512 
evít
)

2514 
VTY_SERV
:

2515 
vty_£rv_thªad
 = 
	`thªad_add_ªad
 (
ma°î
, 
vty_ac˚±
, 
vty
, 
sock
);

2516 
	`ve˘‹_£t_ödex
 (
Vvty_£rv_thªad
, 
sock
, 
vty_£rv_thªad
);

2518 #ifde‡
VTYSH


2519 
VTYSH_SERV
:

2520 
vty_£rv_thªad
 = 
	`thªad_add_ªad
 (
ma°î
, 
vtysh_ac˚±
, 
vty
, 
sock
);

2521 
	`ve˘‹_£t_ödex
 (
Vvty_£rv_thªad
, 
sock
, 
vty_£rv_thªad
);

2523 
VTYSH_READ
:

2524 
vty
->
t_ªad
 = 
	`thªad_add_ªad
 (
ma°î
, 
vtysh_ªad
, vty, 
sock
);

2526 
VTYSH_WRITE
:

2527 
vty
->
t_wrôe
 = 
	`thªad_add_wrôe
 (
ma°î
, 
vtysh_wrôe
, vty, 
sock
);

2530 
VTY_READ
:

2531 
vty
->
t_ªad
 = 
	`thªad_add_ªad
 (
ma°î
, 
vty_ªad
, vty, 
sock
);

2534 i‡(
vty
->
v_timeout
)

2536 i‡(
vty
->
t_timeout
)

2537 
	`thªad_ˇn˚l
 (
vty
->
t_timeout
);

2538 
vty
->
t_timeout
 =

2539 
	`thªad_add_timî
 (
ma°î
, 
vty_timeout
, 
vty
, vty->
v_timeout
);

2542 
VTY_WRITE
:

2543 i‡(! 
vty
->
t_wrôe
)

2544 
vty
->
t_wrôe
 = 
	`thªad_add_wrôe
 (
ma°î
, 
vty_Êush
, vty, 
sock
);

2546 
VTY_TIMEOUT_RESET
:

2547 i‡(
vty
->
t_timeout
)

2549 
	`thªad_ˇn˚l
 (
vty
->
t_timeout
);

2550 
vty
->
t_timeout
 = 
NULL
;

2552 i‡(
vty
->
v_timeout
)

2554 
vty
->
t_timeout
 =

2555 
	`thªad_add_timî
 (
ma°î
, 
vty_timeout
, 
vty
, vty->
v_timeout
);

2559 
	}
}

2561 
DEFUN
 (
c⁄fig_who
,

2562 
c⁄fig_who_cmd
,

2566 
	gi
;

2567 
vty
 *
	gv
;

2569 
	gi
 = 0; i < 
ve˘‹_a˘ive
 (
vtyvec
); i++)

2570 i‡((
	gv
 = 
ve˘‹_¶Ÿ
 (
vtyvec
, 
i
)Ë!
NULL
)

2571 
vty_out
 (
vty
, "%svty[%d] connected from %s.%s",

2572 
v
->
c⁄fig
 ? "*" : " ",

2573 
i
, 
v
->
addªss
, 
VTY_NEWLINE
);

2574  
	gCMD_SUCCESS
;

2578 
DEFUN
 (
löe_vty
,

2579 
löe_vty_cmd
,

2584 
	gvty
->
	gnode
 = 
VTY_NODE
;

2585  
	gCMD_SUCCESS
;

2590 
	$exec_timeout
 (
vty
 *vty, c⁄° *
mö_°r
, c⁄° *
£c_°r
)

2592 
timeout
 = 0;

2596 i‡(
mö_°r
)

2598 
timeout
 = 
	`°πﬁ
 (
mö_°r
, 
NULL
, 10);

2599 
timeout
 *= 60;

2601 i‡(
£c_°r
)

2602 
timeout
 +
	`°πﬁ
 (
£c_°r
, 
NULL
, 10);

2604 
vty_timeout_vÆ
 = 
timeout
;

2605 
vty
->
v_timeout
 = 
timeout
;

2606 
	`vty_evít
 (
VTY_TIMEOUT_RESET
, 0, 
vty
);

2609  
CMD_SUCCESS
;

2610 
	}
}

2612 
DEFUN
 (
exec_timeout_mö
,

2613 
exec_timeout_mö_cmd
,

2618  
exec_timeout
 (
vty
, 
¨gv
[0], 
NULL
);

2621 
DEFUN
 (
exec_timeout_£c
,

2622 
exec_timeout_£c_cmd
,

2628  
exec_timeout
 (
vty
, 
¨gv
[0],árgv[1]);

2631 
DEFUN
 (
no_exec_timeout
,

2632 
no_exec_timeout_cmd
,

2634 
NO_STR


2637  
exec_timeout
 (
vty
, 
NULL
, NULL);

2641 
DEFUN
 (
vty_ac˚ss_˛ass
,

2642 
vty_ac˚ss_˛ass_cmd
,

2647 i‡(
	gvty_ac˚s¶i°_«me
)

2648 
XFREE
(
MTYPE_VTY
, 
vty_ac˚s¶i°_«me
);

2650 
	gvty_ac˚s¶i°_«me
 = 
XSTRDUP
(
MTYPE_VTY
, 
¨gv
[0]);

2652  
	gCMD_SUCCESS
;

2656 
DEFUN
 (
no_vty_ac˚ss_˛ass
,

2657 
no_vty_ac˚ss_˛ass_cmd
,

2659 
NO_STR


2663 i‡(! 
	gvty_ac˚s¶i°_«me
 || (
	g¨gc
 && 
°rcmp
(
vty_ac˚s¶i°_«me
, 
¨gv
[0])))

2665 
vty_out
 (
vty
, "Access-class isÇot currentlyáppliedÅo vty%s",

2666 
VTY_NEWLINE
);

2667  
	gCMD_WARNING
;

2670 
XFREE
(
MTYPE_VTY
, 
vty_ac˚s¶i°_«me
);

2672 
	gvty_ac˚s¶i°_«me
 = 
NULL
;

2674  
	gCMD_SUCCESS
;

2677 #ifde‡
HAVE_IPV6


2679 
DEFUN
 (
vty_ùv6_ac˚ss_˛ass
,

2680 
vty_ùv6_ac˚ss_˛ass_cmd
,

2682 
IPV6_STR


2686 i‡(
	gvty_ùv6_ac˚s¶i°_«me
)

2687 
XFREE
(
MTYPE_VTY
, 
vty_ùv6_ac˚s¶i°_«me
);

2689 
	gvty_ùv6_ac˚s¶i°_«me
 = 
XSTRDUP
(
MTYPE_VTY
, 
¨gv
[0]);

2691  
	gCMD_SUCCESS
;

2695 
DEFUN
 (
no_vty_ùv6_ac˚ss_˛ass
,

2696 
no_vty_ùv6_ac˚ss_˛ass_cmd
,

2698 
NO_STR


2699 
IPV6_STR


2703 i‡(! 
	gvty_ùv6_ac˚s¶i°_«me
 ||

2704 (
	g¨gc
 && 
°rcmp
(
vty_ùv6_ac˚s¶i°_«me
, 
¨gv
[0])))

2706 
vty_out
 (
vty
, "IPv6áccess-class isÇot currentlyáppliedÅo vty%s",

2707 
VTY_NEWLINE
);

2708  
	gCMD_WARNING
;

2711 
XFREE
(
MTYPE_VTY
, 
vty_ùv6_ac˚s¶i°_«me
);

2713 
	gvty_ùv6_ac˚s¶i°_«me
 = 
NULL
;

2715  
	gCMD_SUCCESS
;

2720 
DEFUN
 (
vty_logö
,

2721 
vty_logö_cmd
,

2725 
	gno_∑ssw‹d_check
 = 0;

2726  
	gCMD_SUCCESS
;

2729 
DEFUN
 (
no_vty_logö
,

2730 
no_vty_logö_cmd
,

2732 
NO_STR


2735 
	gno_∑ssw‹d_check
 = 1;

2736  
	gCMD_SUCCESS
;

2740 
DEFUN
 (
vty_ª°ri˘ed_mode
,

2741 
vty_ª°ri˘ed_mode_cmd
,

2745 
	gª°ri˘ed_mode
 = 1;

2746  
	gCMD_SUCCESS
;

2749 
DEFUN
 (
vty_no_ª°ri˘ed_mode
,

2750 
vty_no_ª°ri˘ed_mode_cmd
,

2752 
NO_STR


2755 
	gª°ri˘ed_mode
 = 0;

2756  
	gCMD_SUCCESS
;

2759 
DEFUN
 (
£rvi˚_adv™˚d_vty
,

2760 
£rvi˚_adv™˚d_vty_cmd
,

2765 
	gho°
.
	gadv™˚d
 = 1;

2766  
	gCMD_SUCCESS
;

2769 
DEFUN
 (
no_£rvi˚_adv™˚d_vty
,

2770 
no_£rvi˚_adv™˚d_vty_cmd
,

2772 
NO_STR


2776 
	gho°
.
	gadv™˚d
 = 0;

2777  
	gCMD_SUCCESS
;

2780 
DEFUN
 (
ãrmöÆ_m⁄ô‹
,

2781 
ãrmöÆ_m⁄ô‹_cmd
,

2786 
	gvty
->
	gm⁄ô‹
 = 1;

2787  
	gCMD_SUCCESS
;

2790 
DEFUN
 (
ãrmöÆ_no_m⁄ô‹
,

2791 
ãrmöÆ_no_m⁄ô‹_cmd
,

2794 
NO_STR


2797 
	gvty
->
	gm⁄ô‹
 = 0;

2798  
	gCMD_SUCCESS
;

2801 
ALIAS
 (
ãrmöÆ_no_m⁄ô‹
,

2802 
no_ãrmöÆ_m⁄ô‹_cmd
,

2804 
NO_STR


2808 
DEFUN
 (
show_hi°‹y
,

2809 
show_hi°‹y_cmd
,

2811 
SHOW_STR


2814 
	gödex
;

2816 
	gödex
 = 
vty
->
hödex
 + 1; index != vty->hindex;)

2818 i‡(
	gödex
 =
VTY_MAXHIST
)

2820 
ödex
 = 0;

2824 i‡(
	gvty
->
	ghi°
[
ödex
] !
NULL
)

2825 
vty_out
 (
vty
, " %s%s", vty->
hi°
[
ödex
], 
VTY_NEWLINE
);

2827 
	gödex
++;

2830  
	gCMD_SUCCESS
;

2835 
	$vty_c⁄fig_wrôe
 (
vty
 *vty)

2837 
	`vty_out
 (
vty
, "löêvty%s", 
VTY_NEWLINE
);

2839 i‡(
vty_ac˚s¶i°_«me
)

2840 
	`vty_out
 (
vty
, "áccess-class %s%s",

2841 
vty_ac˚s¶i°_«me
, 
VTY_NEWLINE
);

2843 i‡(
vty_ùv6_ac˚s¶i°_«me
)

2844 
	`vty_out
 (
vty
, " ipv6áccess-class %s%s",

2845 
vty_ùv6_ac˚s¶i°_«me
, 
VTY_NEWLINE
);

2848 i‡(
vty_timeout_vÆ
 !
VTY_TIMEOUT_DEFAULT
)

2849 
	`vty_out
 (
vty
, "Éxec-timeout %ld %ld%s",

2850 
vty_timeout_vÆ
 / 60,

2851 
vty_timeout_vÆ
 % 60, 
VTY_NEWLINE
);

2854 i‡(
no_∑ssw‹d_check
)

2855 
	`vty_out
 (
vty
, "Çÿlogö%s", 
VTY_NEWLINE
);

2857 i‡(
ª°ri˘ed_mode
 !
ª°ri˘ed_mode_deÁu…
)

2859 i‡(
ª°ri˘ed_mode_deÁu…
)

2860 
	`vty_out
 (
vty
, "Çÿ™⁄ymou†ª°ri˘ed%s", 
VTY_NEWLINE
);

2862 
	`vty_out
 (
vty
, "án⁄ymou†ª°ri˘ed%s", 
VTY_NEWLINE
);

2865 
	`vty_out
 (
vty
, "!%s", 
VTY_NEWLINE
);

2867  
CMD_SUCCESS
;

2868 
	}
}

2870 
cmd_node
 
	gvty_node
 =

2872 
VTY_NODE
,

2879 
	$vty_ª£t
 ()

2881 
i
;

2882 
vty
 *vty;

2883 
thªad
 *
vty_£rv_thªad
;

2885 
i
 = 0; i < 
	`ve˘‹_a˘ive
 (
vtyvec
); i++)

2886 i‡((
vty
 = 
	`ve˘‹_¶Ÿ
 (
vtyvec
, 
i
)Ë!
NULL
)

2888 
	`buf„r_ª£t
 (
vty
->
obuf
);

2889 
vty
->
°©us
 = 
VTY_CLOSE
;

2890 
	`vty_˛o£
 (
vty
);

2893 
i
 = 0; i < 
	`ve˘‹_a˘ive
 (
Vvty_£rv_thªad
); i++)

2894 i‡((
vty_£rv_thªad
 = 
	`ve˘‹_¶Ÿ
 (
Vvty_£rv_thªad
, 
i
)Ë!
NULL
)

2896 
	`thªad_ˇn˚l
 (
vty_£rv_thªad
);

2897 
	`ve˘‹_¶Ÿ
 (
Vvty_£rv_thªad
, 
i
Ë
NULL
;

2898 
	`˛o£
 (
i
);

2901 
vty_timeout_vÆ
 = 
VTY_TIMEOUT_DEFAULT
;

2903 i‡(
vty_ac˚s¶i°_«me
)

2905 
	`XFREE
(
MTYPE_VTY
, 
vty_ac˚s¶i°_«me
);

2906 
vty_ac˚s¶i°_«me
 = 
NULL
;

2909 i‡(
vty_ùv6_ac˚s¶i°_«me
)

2911 
	`XFREE
(
MTYPE_VTY
, 
vty_ùv6_ac˚s¶i°_«me
);

2912 
vty_ùv6_ac˚s¶i°_«me
 = 
NULL
;

2914 
	}
}

2917 
	$vty_ßve_cwd
 ()

2919 
cwd
[
MAXPATHLEN
];

2920 *
c
;

2922 
c
 = 
	`gëcwd
 (
cwd
, 
MAXPATHLEN
);

2924 i‡(!
c
)

2926 
	`chdú
 (
SYSCONFDIR
);

2927 
	`gëcwd
 (
cwd
, 
MAXPATHLEN
);

2930 
vty_cwd
 = 
	`XMALLOC
 (
MTYPE_TMP
, 
	`°æí
 (
cwd
) + 1);

2931 
	`°r˝y
 (
vty_cwd
, 
cwd
);

2932 
	}
}

2935 
	$vty_gë_cwd
 ()

2937  
vty_cwd
;

2938 
	}
}

2941 
	$vty_shñl
 (
vty
 *vty)

2943  
vty
->
ty≥
 =
VTY_SHELL
 ? 1 : 0;

2944 
	}
}

2947 
	$vty_shñl_£rv
 (
vty
 *vty)

2949  
vty
->
ty≥
 =
VTY_SHELL_SERV
 ? 1 : 0;

2950 
	}
}

2953 
	$vty_öô_vtysh
 ()

2955 
vtyvec
 = 
	`ve˘‹_öô
 (
VECTOR_MIN_SIZE
);

2956 
	}
}

2960 
	$vty_öô
 (
thªad_ma°î
 *
ma°î_thªad
)

2963 
	`vty_ßve_cwd
 ();

2965 
vtyvec
 = 
	`ve˘‹_öô
 (
VECTOR_MIN_SIZE
);

2967 
ma°î
 = 
ma°î_thªad
;

2970 
Vvty_£rv_thªad
 = 
	`ve˘‹_öô
 (
VECTOR_MIN_SIZE
);

2973 
	`ö°Æl_node
 (&
vty_node
, 
vty_c⁄fig_wrôe
);

2975 
	`ö°Æl_ñemít
 (
RESTRICTED_NODE
, &
c⁄fig_who_cmd
);

2976 
	`ö°Æl_ñemít
 (
RESTRICTED_NODE
, &
show_hi°‹y_cmd
);

2977 
	`ö°Æl_ñemít
 (
VIEW_NODE
, &
c⁄fig_who_cmd
);

2978 
	`ö°Æl_ñemít
 (
VIEW_NODE
, &
show_hi°‹y_cmd
);

2979 
	`ö°Æl_ñemít
 (
ENABLE_NODE
, &
c⁄fig_who_cmd
);

2980 
	`ö°Æl_ñemít
 (
CONFIG_NODE
, &
löe_vty_cmd
);

2981 
	`ö°Æl_ñemít
 (
CONFIG_NODE
, &
£rvi˚_adv™˚d_vty_cmd
);

2982 
	`ö°Æl_ñemít
 (
CONFIG_NODE
, &
no_£rvi˚_adv™˚d_vty_cmd
);

2983 
	`ö°Æl_ñemít
 (
CONFIG_NODE
, &
show_hi°‹y_cmd
);

2984 
	`ö°Æl_ñemít
 (
ENABLE_NODE
, &
ãrmöÆ_m⁄ô‹_cmd
);

2985 
	`ö°Æl_ñemít
 (
ENABLE_NODE
, &
ãrmöÆ_no_m⁄ô‹_cmd
);

2986 
	`ö°Æl_ñemít
 (
ENABLE_NODE
, &
no_ãrmöÆ_m⁄ô‹_cmd
);

2987 
	`ö°Æl_ñemít
 (
ENABLE_NODE
, &
show_hi°‹y_cmd
);

2989 
	`ö°Æl_deÁu…
 (
VTY_NODE
);

2990 
	`ö°Æl_ñemít
 (
VTY_NODE
, &
exec_timeout_mö_cmd
);

2991 
	`ö°Æl_ñemít
 (
VTY_NODE
, &
exec_timeout_£c_cmd
);

2992 
	`ö°Æl_ñemít
 (
VTY_NODE
, &
no_exec_timeout_cmd
);

2993 
	`ö°Æl_ñemít
 (
VTY_NODE
, &
vty_ac˚ss_˛ass_cmd
);

2994 
	`ö°Æl_ñemít
 (
VTY_NODE
, &
no_vty_ac˚ss_˛ass_cmd
);

2995 
	`ö°Æl_ñemít
 (
VTY_NODE
, &
vty_logö_cmd
);

2996 
	`ö°Æl_ñemít
 (
VTY_NODE
, &
no_vty_logö_cmd
);

2997 
	`ö°Æl_ñemít
 (
VTY_NODE
, &
vty_ª°ri˘ed_mode_cmd
);

2998 
	`ö°Æl_ñemít
 (
VTY_NODE
, &
vty_no_ª°ri˘ed_mode_cmd
);

2999 #ifde‡
HAVE_IPV6


3000 
	`ö°Æl_ñemít
 (
VTY_NODE
, &
vty_ùv6_ac˚ss_˛ass_cmd
);

3001 
	`ö°Æl_ñemít
 (
VTY_NODE
, &
no_vty_ùv6_ac˚ss_˛ass_cmd
);

3003 
	}
}

3006 
	$vty_ãrmö©e
 ()

3008 i‡(
vty_cwd
)

3009 
	`XFREE
 (
MTYPE_TMP
, 
vty_cwd
);

3011 i‡(
vtyvec
 && 
Vvty_£rv_thªad
)

3013 
	`vty_ª£t
 ();

3014 
	`ve˘‹_‰ì
 (
vtyvec
);

3015 
	`ve˘‹_‰ì
 (
Vvty_£rv_thªad
);

3017 
	}
}

	@vty.h

21 #i‚de‡
_ZEBRA_VTY_H


22 
	#_ZEBRA_VTY_H


	)

24 
	~"thªad.h
"

25 
	~"log.h
"

26 
	~"sockuni⁄.h
"

28 
	#VTY_BUFSIZ
 512

	)

29 
	#VTY_MAXHIST
 20

	)

32 
	svty


35 
	mfd
;

38 íum {
	mVTY_TERM
, 
	mVTY_FILE
, 
	mVTY_SHELL
, 
	mVTY_SHELL_SERV
} 
	mty≥
;

41 
	mnode
;

44 
	mÁû
;

47 
buf„r
 *
	mobuf
;

50 *
	mbuf
;

53 
	m˝
;

56 
	mÀngth
;

59 
	mmax
;

62 *
	mhi°
[
VTY_MAXHIST
];

65 
	mhp
;

68 
	mhödex
;

72 *
	mödex
;

75 *
	mödex_sub
;

78 
	mesˇ≥
;

81 íum {
	mVTY_NORMAL
, 
	mVTY_CLOSE
, 
	mVTY_MORE
, 
	mVTY_MORELINE
} 
	m°©us
;

86 
	müc
;

89 
	müc_sb_ö_¥ogªss
;

93 
	#TELNET_NAWS_SB_LEN
 5

	)

94 
	msb_buf
[
TELNET_NAWS_SB_LEN
];

97 
size_t
 
	msb_Àn
;

100 
	mwidth
;

101 
	mheight
;

104 
	mlöes
;

107 
	mm⁄ô‹
;

110 
	mc⁄fig
;

113 
thªad
 *
	mt_ªad
;

114 
thªad
 *
	mt_wrôe
;

117 
	mv_timeout
;

118 
thªad
 *
	mt_timeout
;

121 
	maddªss
[
SU_ADDRSTRLEN
];

125 
	#INTEGRATE_DEFAULT_CONFIG
 "Quagga.c⁄f"

	)

128 
	#VTY_NEWLINE
 ((
vty
->
ty≥
 =
VTY_TERM
Ë? "\r\n" : "\n")

	)

131 
	#VTY_TIMEOUT_DEFAULT
 600

	)

134 
	#VTY_READ_BUFSIZ
 512

	)

137 #i‚de‡
DIRECTORY_SEP


138 
	#DIRECTORY_SEP
 '/'

	)

141 #i‚de‡
IS_DIRECTORY_SEP


142 
	#IS_DIRECTORY_SEP
(
c
Ë((cË=
DIRECTORY_SEP
)

	)

146 #ifde‡
__GNUC__


147 
	#PRINTF_ATTRIBUTE
(
a
,
b
Ë
	`__©åibuã__
 ((
	`__f‹m©__
 (
__¥ötf__
,á, b)))

	)

149 
	#PRINTF_ATTRIBUTE
(
a
,
b
)

	)

153 
	#VTY_GET_ULONG
(
NAME
,
V
,
STR
) \

155 *
íd±r
 = 
NULL
; \

156 
î∫o
 = 0; \

157 (
V
Ë
	`°πoul
 ((
STR
), &
íd±r
, 10); \

158 i‡(*(
STR
Ë='-' || *
íd±r
 !'\0' || 
î∫o
) \

160 
	`vty_out
 (
vty
, "%% InvÆid %†vÆue%s", 
NAME
, 
VTY_NEWLINE
); \

161  
CMD_WARNING
; \

163 } 0)

	)

172 
	#VTY_GET_INTEGER_RANGE_HEART
(
NAME
,
TMPL
,
STR
,
MIN
,
MAX
) \

174 
	`VTY_GET_ULONG
(
NAME
, (
TMPL
), 
STR
); \

175 i‡–((
TMPL
Ë<(
MIN
Ë&& (TMPLË!(MIN)Ë|| (TMPLË> (
MAX
) ) \

177 
	`vty_out
 (
vty
, "%% InvÆid %†vÆue%s", 
NAME
, 
VTY_NEWLINE
);\

178  
CMD_WARNING
; \

180 } 0)

	)

182 
	#VTY_GET_INTEGER_RANGE
(
NAME
,
V
,
STR
,
MIN
,
MAX
) \

184 
tm∂
; \

185 
	`VTY_GET_INTEGER_RANGE_HEART
(
NAME
,
tm∂
,
STR
,
MIN
,
MAX
); \

186 (
V
Ë
tm∂
; \

187 } 0)

	)

189 
	#VTY_CHECK_INTEGER_RANGE
(
NAME
,
STR
,
MIN
,
MAX
) \

191 
tm∂
; \

192 
	`VTY_GET_INTEGER_RANGE_HEART
(
NAME
,
tm∂
,
STR
,
MIN
,
MAX
); \

193 } 0)

	)

195 
	#VTY_GET_INTEGER
(
NAME
,
V
,
STR
) \

196 
	`VTY_GET_INTEGER_RANGE
(
NAME
,
V
,
STR
,0U,
UINT32_MAX
)

	)

198 
	#VTY_GET_IPV4_ADDRESS
(
NAME
,
V
,
STR
) \

200 
ªtv
; \

201 
ªtv
 = 
	`öë_©⁄
 ((
STR
), &(
V
)); \

202 i‡(!
ªtv
) \

204 
	`vty_out
 (
vty
, "%% InvÆid %†vÆue%s", 
NAME
, 
VTY_NEWLINE
); \

205  
CMD_WARNING
; \

207 } 0)

	)

209 
	#VTY_GET_IPV4_PREFIX
(
NAME
,
V
,
STR
) \

211 
ªtv
; \

212 
ªtv
 = 
	`°r2¥efix_ùv4
 ((
STR
), &(
V
)); \

213 i‡(
ªtv
 <= 0) \

215 
	`vty_out
 (
vty
, "%% InvÆid %†vÆue%s", 
NAME
, 
VTY_NEWLINE
); \

216  
CMD_WARNING
; \

218 } 0)

	)

220 
	#VTY_WARN_EXPERIMENTAL
() \

222 
	`vty_out
 (
vty
, "%% WARNING:Åhis command isÉxperimental. Both itsÇameánd" \

225 
VTY_NEWLINE
, VTY_NEWLINE); \

226 } 0)

	)

229 
öãgøã_deÁu…
[];

232 
vty_öô
 (
thªad_ma°î
 *);

233 
vty_öô_vtysh
 ();

234 
vty_ãrmö©e
 ();

235 
vty_ª£t
 ();

236 
vty
 *
vty_√w
 ();

237 
	$vty_out
 (
vty
 *, c⁄° *, ...Ë
	`PRINTF_ATTRIBUTE
(2, 3);

238 
	`vty_ªad_c⁄fig
 (*, *);

239 
	`vty_time_¥öt
 (
vty
 *, );

240 
	`vty_£rv_sock
 (const *, , const *);

241 
	`vty_˛o£
 (
vty
 *);

242 *
	`vty_gë_cwd
 ();

243 
	`vty_log
 (c⁄° *
Àvñ
, c⁄° *
¥Ÿo
,

244 c⁄° *
fmt
, 
time°amp_c⁄åﬁ
 *, 
va_li°
);

245 
	`vty_c⁄fig_lock
 (
vty
 *);

246 
	`vty_c⁄fig_u∆ock
 (
vty
 *);

247 
	`vty_shñl
 (
vty
 *);

248 
	`vty_shñl_£rv
 (
vty
 *);

249 
	`vty_hñlo
 (
vty
 *);

253 
	`vty_log_fixed
 (*
buf
, 
size_t
 
Àn
);

	@workqueue.c

24 
	~"zebø.h
"

25 
	~"thªad.h
"

26 
	~"mem‹y.h
"

27 
	~"w‹kqueue.h
"

28 
	~"lökli°.h
"

29 
	~"comm™d.h
"

30 
	~"log.h
"

33 
li°
 
	g_w‹k_queues
;

37 
li°
 *
	gw‹k_queues
 = &
_w‹k_queues
;

39 
	#WORK_QUEUE_MIN_GRANULARITY
 1

	)

41 
w‹k_queue_ôem
 *

42 
	$w‹k_queue_ôem_√w
 (
w‹k_queue
 *
wq
)

44 
w‹k_queue_ôem
 *
ôem
;

45 
	`as£π
 (
wq
);

47 
ôem
 = 
	`XCALLOC
 (
MTYPE_WORK_QUEUE_ITEM
,

48  (
w‹k_queue_ôem
));

50  
ôem
;

51 
	}
}

54 
	$w‹k_queue_ôem_‰ì
 (
w‹k_queue_ôem
 *
ôem
)

56 
	`XFREE
 (
MTYPE_WORK_QUEUE_ITEM
, 
ôem
);

58 
	}
}

61 
w‹k_queue
 *

62 
	$w‹k_queue_√w
 (
thªad_ma°î
 *
m
, c⁄° *
queue_«me
)

64 
w‹k_queue
 *
√w
;

66 
√w
 = 
	`XCALLOC
 (
MTYPE_WORK_QUEUE
,  (
w‹k_queue
));

68 i‡(
√w
 =
NULL
)

69  
√w
;

71 
√w
->
«me
 = 
	`XSTRDUP
 (
MTYPE_WORK_QUEUE_NAME
, 
queue_«me
);

72 
√w
->
ma°î
 = 
m
;

73 
	`SET_FLAG
 (
√w
->
Êags
, 
WQ_UNPLUGGED
);

75 i‡–(
√w
->
ôems
 = 
	`li°_√w
 ()Ë=
NULL
)

77 
	`XFREE
 (
MTYPE_WORK_QUEUE_NAME
, 
√w
->
«me
);

78 
	`XFREE
 (
MTYPE_WORK_QUEUE
, 
√w
);

80  
NULL
;

83 
√w
->
ôems
->
dñ
 = ((*)(*)Ë
w‹k_queue_ôem_‰ì
;

85 
	`li°node_add
 (
w‹k_queues
, 
√w
);

87 
√w
->
cy˛es
.
gønuœrôy
 = 
WORK_QUEUE_MIN_GRANULARITY
;

90 
√w
->
•ec
.
hﬁd
 = 
WORK_QUEUE_DEFAULT_HOLD
;

92  
√w
;

93 
	}
}

96 
	$w‹k_queue_‰ì
 (
w‹k_queue
 *
wq
)

98 i‡(
wq
->
thªad
 !
NULL
)

99 
	`thªad_ˇn˚l
(
wq
->
thªad
);

102 
	`li°_dñëe
 (
wq
->
ôems
);

103 
	`li°node_dñëe
 (
w‹k_queues
, 
wq
);

105 
	`XFREE
 (
MTYPE_WORK_QUEUE_NAME
, 
wq
->
«me
);

106 
	`XFREE
 (
MTYPE_WORK_QUEUE
, 
wq
);

108 
	}
}

111 
	$w‹k_queue_scheduÀ
 (
w‹k_queue
 *
wq
, 
dñay
)

114 i‡–
	`CHECK_FLAG
 (
wq
->
Êags
, 
WQ_UNPLUGGED
)

115 && (
wq
->
thªad
 =
NULL
)

116 && (
	`li°cou¡
 (
wq
->
ôems
) > 0) )

118 
wq
->
thªad
 = 
	`thªad_add_background
 (wq->
ma°î
, 
w‹k_queue_run
,

119 
wq
, 
dñay
);

124 
	}
}

127 
	$w‹k_queue_add
 (
w‹k_queue
 *
wq
, *
d©a
)

129 
w‹k_queue_ôem
 *
ôem
;

131 
	`as£π
 (
wq
);

133 i‡(!(
ôem
 = 
	`w‹k_queue_ôem_√w
 (
wq
)))

135 
	`zlog_îr
 ("%s: u«bÀÅÿgëÇew queuêôem", 
__func__
);

139 
ôem
->
d©a
 = data;

140 
	`li°node_add
 (
wq
->
ôems
, 
ôem
);

142 
	`w‹k_queue_scheduÀ
 (
wq
, wq->
•ec
.
hﬁd
);

145 
	}
}

148 
	$w‹k_queue_ôem_ªmove
 (
w‹k_queue
 *
wq
, 
li°node
 *
 
)

150 
w‹k_queue_ôem
 *
ôem
 = 
	`li°gëd©a
 (
 
);

152 
	`as£π
 (
ôem
 && iãm->
d©a
);

155 i‡(
wq
->
•ec
.
dñ_ôem_d©a
)

156 
wq
->
•ec
.
	`dñ_ôem_d©a
 (wq, 
ôem
->
d©a
);

158 
	`li°_dñëe_node
 (
wq
->
ôems
, 
 
);

159 
	`w‹k_queue_ôem_‰ì
 (
ôem
);

162 
	}
}

165 
	$w‹k_queue_ôem_ªqueue
 (
w‹k_queue
 *
wq
, 
li°node
 *
 
)

167 
	`LISTNODE_DETACH
 (
wq
->
ôems
, 
 
);

168 
	`LISTNODE_ATTACH
 (
wq
->
ôems
, 
 
);

169 
	}
}

171 
DEFUN
(
show_w‹k_queues
,

172 
show_w‹k_queues_cmd
,

174 
SHOW_STR


177 
li°node
 *
	gnode
;

178 
w‹k_queue
 *
	gwq
;

180 
vty_out
 (
vty
,

183 
VTY_NEWLINE
);

184 
vty_out
 (
vty
,

192 
VTY_NEWLINE
);

194 
ALL_LIST_ELEMENTS_RO
 (
w‹k_queues
, 
node
, 
wq
))

196 
vty_out
 (
vty
,"%c %8d %5d %8ld %7d %6d %6u %s%s",

197 (
CHECK_FLAG
 (
wq
->
Êags
, 
WQ_UNPLUGGED
) ? ' ' : 'P'),

198 
li°cou¡
 (
wq
->
ôems
),

199 
wq
->
•ec
.
hﬁd
,

200 
wq
->
runs
,

201 
wq
->
cy˛es
.
be°
, wq->cy˛es.
gønuœrôy
,

202 (
wq
->
runs
) ?

203 (Ë(
wq
->
cy˛es
.
tŸÆ
 / wq->
runs
) : 0,

204 
wq
->
«me
,

205 
VTY_NEWLINE
);

208  
	gCMD_SUCCESS
;

215 
	$w‹k_queue_∂ug
 (
w‹k_queue
 *
wq
)

217 i‡(
wq
->
thªad
)

218 
	`thªad_ˇn˚l
 (
wq
->
thªad
);

220 
wq
->
thªad
 = 
NULL
;

222 
	`UNSET_FLAG
 (
wq
->
Êags
, 
WQ_UNPLUGGED
);

223 
	}
}

229 
	$w‹k_queue_u≈lug
 (
w‹k_queue
 *
wq
)

231 
	`SET_FLAG
 (
wq
->
Êags
, 
WQ_UNPLUGGED
);

234 
	`w‹k_queue_scheduÀ
 (
wq
, wq->
•ec
.
hﬁd
);

235 
	}
}

242 
	$w‹k_queue_run
 (
thªad
 *thread)

244 
w‹k_queue
 *
wq
;

245 
w‹k_queue_ôem
 *
ôem
;

246 
wq_ôem_°©us
 
ªt
;

247 
cy˛es
 = 0;

248 
li°node
 *
node
, *
¬ode
;

249 
yõlded
 = 0;

251 
wq
 = 
	`THREAD_ARG
 (
thªad
);

252 
wq
->
thªad
 = 
NULL
;

254 
	`as£π
 (
wq
 && wq->
ôems
);

273 i‡(
wq
->
cy˛es
.
gønuœrôy
 == 0)

274 
wq
->
cy˛es
.
gønuœrôy
 = 
WORK_QUEUE_MIN_GRANULARITY
;

276 
	`ALL_LIST_ELEMENTS
 (
wq
->
ôems
, 
node
, 
¬ode
, 
ôem
))

278 
	`as£π
 (
ôem
 && iãm->
d©a
);

281 i‡(
ôem
->
øn
 > 
wq
->
•ec
.
max_ªåõs
)

284 i‡(
wq
->
•ec
.
îr‹func
)

285 
wq
->
•ec
.
	`îr‹func
 (wq, 
ôem
->
d©a
);

286 
	`w‹k_queue_ôem_ªmove
 (
wq
, 
node
);

293 
ªt
 = 
wq
->
•ec
.
	`w‹kfunc
 (wq, 
ôem
->
d©a
);

294 
ôem
->
øn
++;

296 (
ªt
 =
WQ_RETRY_NOW
)

297 && (
ôem
->
øn
 < 
wq
->
•ec
.
max_ªåõs
));

299 
ªt
)

301 
WQ_QUEUE_BLOCKED
:

306 
ôem
->
øn
--;

308 
WQ_RETRY_LATER
:

310 
°©s
;

312 
WQ_REQUEUE
:

314 
ôem
->
øn
--;

315 
	`w‹k_queue_ôem_ªqueue
 (
wq
, 
node
);

318 
WQ_RETRY_NOW
:

320 
WQ_ERROR
:

322 i‡(
wq
->
•ec
.
îr‹func
)

323 
wq
->
•ec
.
	`îr‹func
 (wq, 
ôem
);

326 
WQ_SUCCESS
:

329 
	`w‹k_queue_ôem_ªmove
 (
wq
, 
node
);

335 
cy˛es
++;

338 i‡–!(
cy˛es
 % 
wq
->cy˛es.
gønuœrôy
)

339 && 
	`thªad_should_yõld
 (
thªad
))

341 
yõlded
 = 1;

342 
°©s
;

346 
°©s
:

348 
	#WQ_HYSTERESIS_FACTOR
 4

	)

351 i‡(
yõlded
 && (
cy˛es
 < 
wq
->cy˛es.
gønuœrôy
))

353 
wq
->
cy˛es
.
gønuœrôy
 = ((cycles > 0) ? cycles

354 : 
WORK_QUEUE_MIN_GRANULARITY
);

357 i‡(
cy˛es
 >(
wq
->cy˛es.
gønuœrôy
))

359 i‡(
cy˛es
 > 
wq
->cy˛es.
be°
)

360 
wq
->
cy˛es
.
be°
 = cycles;

363 i‡(
cy˛es
 > (
wq
->cy˛es.
gønuœrôy
 * 
WQ_HYSTERESIS_FACTOR


364 * 
WQ_HYSTERESIS_FACTOR
))

365 
wq
->
cy˛es
.
gønuœrôy
 *
WQ_HYSTERESIS_FACTOR
;

366 i‡(
cy˛es
 > (
wq
->cy˛es.
gønuœrôy
 * 
WQ_HYSTERESIS_FACTOR
))

367 
wq
->
cy˛es
.
gønuœrôy
 +
WQ_HYSTERESIS_FACTOR
;

369 #unde‡
WQ_HYSTERIS_FACTOR


371 
wq
->
runs
++;

372 
wq
->
cy˛es
.
tŸÆ
 += cycles;

375 
	`¥ötf
 ("%s: cycles %d,Çew: best %d, worst %d\n",

376 
__func__
, 
cy˛es
, 
wq
->cy˛es.
be°
, wq->cy˛es.
gønuœrôy
);

380 i‡(
	`li°cou¡
 (
wq
->
ôems
) > 0)

381 
	`w‹k_queue_scheduÀ
 (
wq
, 0);

382 i‡(
wq
->
•ec
.
com∂ëi⁄_func
)

383 
wq
->
•ec
.
	`com∂ëi⁄_func
 (wq);

386 
	}
}

	@workqueue.h

24 #i‚de‡
_QUAGGA_WORK_QUEUE_H


25 
	#_QUAGGA_WORK_QUEUE_H


	)

28 
	#WORK_QUEUE_DEFAULT_HOLD
 50

	)

33 
	mWQ_SUCCESS
 = 0,

34 
	mWQ_ERROR
,

35 
	mWQ_RETRY_NOW
,

36 
	mWQ_RETRY_LATER
,

37 
	mWQ_REQUEUE
,

38 
	mWQ_QUEUE_BLOCKED
,

41 } 
	twq_ôem_°©us
;

44 
	sw‹k_queue_ôem


46 *
	md©a
;

47 
	møn
;

50 
	#WQ_UNPLUGGED
 (1 << 0Ë

	)

52 
	sw‹k_queue


57 
thªad_ma°î
 *
	mma°î
;

58 
thªad
 *
	mthªad
;

59 *
	m«me
;

66 *
	md©a
;

72 
wq_ôem_°©us
 (*
w‹kfunc
Ë(
	mw‹k_queue
 *, *);

75 (*
	mîr‹func
Ë(
	mw‹k_queue
 *, 
	mw‹k_queue_ôem
 *);

78 (*
	mdñ_ôem_d©a
Ë(
	mw‹k_queue
 *, *);

81 (*
	mcom∂ëi⁄_func
Ë(
	mw‹k_queue
 *);

84 
	mmax_ªåõs
;

86 
	mhﬁd
;

87 } 
	m•ec
;

90 
li°
 *
	môems
;

91 
	mruns
;

94 
	mbe°
;

95 
	mgønuœrôy
;

96 
	mtŸÆ
;

97 } 
	mcy˛es
;

100 
u_öt16_t
 
	mÊags
;

109 
w‹k_queue
 *
w‹k_queue_√w
 (
thªad_ma°î
 *,

112 
w‹k_queue_‰ì
 (
w‹k_queue
 *);

115 
w‹k_queue_add
 (
w‹k_queue
 *, *);

118 
w‹k_queue_∂ug
 (
w‹k_queue
 *
wq
);

120 
w‹k_queue_u≈lug
 (
w‹k_queue
 *
wq
);

123 
w‹k_queue_run
 (
thªad
 *);

124 
cmd_ñemít
 
show_w‹k_queues_cmd
;

	@zassert.h

22 #i‚de‡
_QUAGGA_ASSERT_H


23 
	#_QUAGGA_ASSERT_H


	)

25 
	$_zlog_as£π_Áûed
 (c⁄° *
as£πi⁄
, c⁄° *
fûe
,

26 
löe
, c⁄° *
fun˘i⁄
)

27 
	`__©åibuã__
 ((
n‹ëu∫
));

29 #i‡
	`deföed
(
__STDC_VERSION__
) && __STDC_VERSION__ >= 199901L

30 
	#__ASSERT_FUNCTION
 
__func__


	)

31 #ñi‡
	`deföed
(
__GNUC__
)

32 
	#__ASSERT_FUNCTION
 
__FUNCTION__


	)

34 
	#__ASSERT_FUNCTION
 
NULL


	)

37 
	#zas£π
(
EX
) (()((EX) ? 0 : \

38 (
	`_zlog_as£π_Áûed
(#EX, 
__FILE__
, 
__LINE__
, \

39 
__ASSERT_FUNCTION
), 0)))

	)

41 #unde‡
as£π


42 
	#as£π
(
EX
Ë
	`zas£π
(EX)

	)

	@zclient.c

23 
	~<zebø.h
>

25 
	~"¥efix.h
"

26 
	~"°ªam.h
"

27 
	~"buf„r.h
"

28 
	~"√tw‹k.h
"

29 
	~"if.h
"

30 
	~"log.h
"

31 
	~"thªad.h
"

32 
	~"z˛õ¡.h
"

33 
	~"mem‹y.h
"

34 
	~"èbÀ.h
"

37 
	eevít
 {
	mZCLIENT_SCHEDULE
, 
	mZCLIENT_READ
, 
	mZCLIENT_CONNECT
};

40 
z˛õ¡_evít
 (
evít
, 
z˛õ¡
 *);

42 
thªad_ma°î
 *
ma°î
;

44 *
	gz˛õ¡_£rv_∑th
 = 
NULL
;

47 
	gz˛õ¡_debug
 = 0;

50 
z˛õ¡
 *

51 
	$z˛õ¡_√w
 ()

53 
z˛õ¡
 *zclient;

54 
z˛õ¡
 = 
	`XCALLOC
 (
MTYPE_ZCLIENT
,  (zclient));

56 
z˛õ¡
->
ibuf
 = 
	`°ªam_√w
 (
ZEBRA_MAX_PACKET_SIZ
);

57 
z˛õ¡
->
obuf
 = 
	`°ªam_√w
 (
ZEBRA_MAX_PACKET_SIZ
);

58 
z˛õ¡
->
wb
 = 
	`buf„r_√w
(0);

60  
z˛õ¡
;

61 
	}
}

69 
	$z˛õ¡_‰ì
 (
z˛õ¡
 *zclient)

71 i‡(
z˛õ¡
->
ibuf
)

72 
	`°ªam_‰ì
(
z˛õ¡
->
ibuf
);

73 i‡(
z˛õ¡
->
obuf
)

74 
	`°ªam_‰ì
(
z˛õ¡
->
obuf
);

75 i‡(
z˛õ¡
->
wb
)

76 
	`buf„r_‰ì
(
z˛õ¡
->
wb
);

78 
	`XFREE
 (
MTYPE_ZCLIENT
, 
z˛õ¡
);

79 
	}
}

84 
	$z˛õ¡_öô
 (
z˛õ¡
 *z˛õ¡, 
ªdi°_deÁu…
)

86 
i
;

89 
z˛õ¡
->
íabÀ
 = 1;

92 
z˛õ¡
->
sock
 = -1;

95 
i
 = 0; i < 
ZEBRA_ROUTE_MAX
; i++)

96 
z˛õ¡
->
ªdi°
[
i
] = 0;

100 
z˛õ¡
->
ªdi°_deÁu…
 =Ñedist_default;

101 
z˛õ¡
->
ªdi°
[
ªdi°_deÁu…
] = 1;

104 
z˛õ¡
->
deÁu…_öf‹m©i⁄
 = 0;

107 i‡(
z˛õ¡_debug
)

108 
	`zlog_debug
 ("zclient start scheduled");

110 
	`z˛õ¡_evít
 (
ZCLIENT_SCHEDULE
, 
z˛õ¡
);

111 
	}
}

115 
	$z˛õ¡_°›
 (
z˛õ¡
 *zclient)

117 i‡(
z˛õ¡_debug
)

118 
	`zlog_debug
 ("zclient stopped");

121 
	`THREAD_OFF
(
z˛õ¡
->
t_ªad
);

122 
	`THREAD_OFF
(
z˛õ¡
->
t_c⁄√˘
);

123 
	`THREAD_OFF
(
z˛õ¡
->
t_wrôe
);

126 
	`°ªam_ª£t
(
z˛õ¡
->
ibuf
);

127 
	`°ªam_ª£t
(
z˛õ¡
->
obuf
);

130 
	`buf„r_ª£t
(
z˛õ¡
->
wb
);

133 i‡(
z˛õ¡
->
sock
 >= 0)

135 
	`˛o£
 (
z˛õ¡
->
sock
);

136 
z˛õ¡
->
sock
 = -1;

138 
z˛õ¡
->
Áû
 = 0;

139 
	}
}

142 
	$z˛õ¡_ª£t
 (
z˛õ¡
 *zclient)

144 
	`z˛õ¡_°›
 (
z˛õ¡
);

145 
	`z˛õ¡_öô
 (
z˛õ¡
, z˛õ¡->
ªdi°_deÁu…
);

146 
	}
}

148 #ifde‡
HAVE_TCP_ZEBRA


152 
	$z˛õ¡_sockë
()

154 
sock
;

155 
ªt
;

156 
sockaddr_ö
 
£rv
;

159 
sock
 = 
	`sockë
 (
AF_INET
, 
SOCK_STREAM
, 0);

160 i‡(
sock
 < 0)

164 
	`mem£t
 (&
£rv
, 0,  (
sockaddr_ö
));

165 
£rv
.
sö_Ámûy
 = 
AF_INET
;

166 
£rv
.
sö_p‹t
 = 
	`ht⁄s
 (
ZEBRA_PORT
);

167 #ifde‡
HAVE_STRUCT_SOCKADDR_IN_SIN_LEN


168 
£rv
.
sö_Àn
 =  (
sockaddr_ö
);

170 
£rv
.
sö_addr
.
s_addr
 = 
	`ht⁄l
 (
INADDR_LOOPBACK
);

173 
ªt
 = 
	`c⁄√˘
 (
sock
, (
sockaddr
 *Ë&
£rv
,  (serv));

174 i‡(
ªt
 < 0)

176 
	`˛o£
 (
sock
);

179  
sock
;

180 
	}
}

185 
	~<sys/un.h
>

188 
	$z˛õ¡_sockë_un
 (c⁄° *
∑th
)

190 
ªt
;

191 
sock
, 
Àn
;

192 
sockaddr_un
 
addr
;

194 
sock
 = 
	`sockë
 (
AF_UNIX
, 
SOCK_STREAM
, 0);

195 i‡(
sock
 < 0)

199 
	`mem£t
 (&
addr
, 0,  (
sockaddr_un
));

200 
addr
.
sun_Ámûy
 = 
AF_UNIX
;

201 
	`°∫˝y
 (
addr
.
sun_∑th
, 
∑th
, 
	`°æí
 (path));

202 #ifde‡
HAVE_STRUCT_SOCKADDR_UN_SUN_LEN


203 
Àn
 = 
addr
.
sun_Àn
 = 
	`SUN_LEN
(&addr);

205 
Àn
 =  (
addr
.
sun_Ámûy
Ë+ 
	`°æí
 (addr.
sun_∑th
);

208 
ªt
 = 
	`c⁄√˘
 (
sock
, (
sockaddr
 *Ë&
addr
, 
Àn
);

209 i‡(
ªt
 < 0)

211 
	`˛o£
 (
sock
);

214  
sock
;

215 
	}
}

227 
	$z˛õ¡_sockë_c⁄√˘
 (
z˛õ¡
 *zclient)

229 #ifde‡
HAVE_TCP_ZEBRA


230 
z˛õ¡
->
sock
 = 
	`z˛õ¡_sockë
 ();

232 
z˛õ¡
->
sock
 = 
	`z˛õ¡_sockë_un
 (
	`z˛õ¡_£rv_∑th_gë
());

234  
z˛õ¡
->
sock
;

235 
	}
}

238 
	$z˛õ¡_Áûed
(
z˛õ¡
 *zclient)

240 
z˛õ¡
->
Áû
++;

241 
	`z˛õ¡_°›
(
z˛õ¡
);

242 
	`z˛õ¡_evít
(
ZCLIENT_CONNECT
, 
z˛õ¡
);

244 
	}
}

247 
	$z˛õ¡_Êush_d©a
(
thªad
 *thread)

249 
z˛õ¡
 *z˛õ¡ = 
	`THREAD_ARG
(
thªad
);

251 
z˛õ¡
->
t_wrôe
 = 
NULL
;

252 i‡(
z˛õ¡
->
sock
 < 0)

254 
	`buf„r_Êush_avaûabÀ
(
z˛õ¡
->
wb
, z˛õ¡->
sock
))

256 
BUFFER_ERROR
:

257 
	`zlog_w¨n
("%s: buffer_flush_available failed on zclient fd %d, closing",

258 
__func__
, 
z˛õ¡
->
sock
);

259  
	`z˛õ¡_Áûed
(
z˛õ¡
);

261 
BUFFER_PENDING
:

262 
z˛õ¡
->
t_wrôe
 = 
	`thªad_add_wrôe
(
ma°î
, 
z˛õ¡_Êush_d©a
,

263 
z˛õ¡
, z˛õ¡->
sock
);

265 
BUFFER_EMPTY
:

269 
	}
}

272 
	$z˛õ¡_£nd_mesßge
(
z˛õ¡
 *zclient)

274 i‡(
z˛õ¡
->
sock
 < 0)

276 
	`buf„r_wrôe
(
z˛õ¡
->
wb
, z˛õ¡->
sock
, 
	`STREAM_DATA
(z˛õ¡->
obuf
),

277 
	`°ªam_gë_ídp
(
z˛õ¡
->
obuf
)))

279 
BUFFER_ERROR
:

280 
	`zlog_w¨n
("%s: buffer_write failedÅo zclient fd %d, closing",

281 
__func__
, 
z˛õ¡
->
sock
);

282  
	`z˛õ¡_Áûed
(
z˛õ¡
);

284 
BUFFER_EMPTY
:

285 
	`THREAD_OFF
(
z˛õ¡
->
t_wrôe
);

287 
BUFFER_PENDING
:

288 
	`THREAD_WRITE_ON
(
ma°î
, 
z˛õ¡
->
t_wrôe
,

289 
z˛õ¡_Êush_d©a
, 
z˛õ¡
, z˛õ¡->
sock
);

293 
	}
}

296 
	$z˛õ¡_¸óã_hódî
 (
°ªam
 *
s
, 
uöt16_t
 
comm™d
)

299 
	`°ªam_putw
 (
s
, 
ZEBRA_HEADER_SIZE
);

300 
	`°ªam_putc
 (
s
, 
ZEBRA_HEADER_MARKER
);

301 
	`°ªam_putc
 (
s
, 
ZSERV_VERSION
);

302 
	`°ªam_putw
 (
s
, 
comm™d
);

303 
	}
}

307 
	$zebø_mesßge_£nd
 (
z˛õ¡
 *z˛õ¡, 
comm™d
)

309 
°ªam
 *
s
;

312 
s
 = 
z˛õ¡
->
obuf
;

313 
	`°ªam_ª£t
 (
s
);

316 
	`z˛õ¡_¸óã_hódî
 (
s
, 
comm™d
);

318  
	`z˛õ¡_£nd_mesßge
(
z˛õ¡
);

319 
	}
}

322 
	$zebø_hñlo_£nd
 (
z˛õ¡
 *zclient)

324 
°ªam
 *
s
;

326 i‡(
z˛õ¡
->
ªdi°_deÁu…
)

328 
s
 = 
z˛õ¡
->
obuf
;

329 
	`°ªam_ª£t
 (
s
);

331 
	`z˛õ¡_¸óã_hódî
 (
s
, 
ZEBRA_HELLO
);

332 
	`°ªam_putc
 (
s
, 
z˛õ¡
->
ªdi°_deÁu…
);

333 
	`°ªam_putw_©
 (
s
, 0, 
	`°ªam_gë_ídp
 (s));

334  
	`z˛õ¡_£nd_mesßge
(
z˛õ¡
);

338 
	}
}

342 
	$z˛õ¡_°¨t
 (
z˛õ¡
 *zclient)

344 
i
;

346 i‡(
z˛õ¡_debug
)

347 
	`zlog_debug
 ("zclient_start is called");

350 i‡(! 
z˛õ¡
->
íabÀ
)

354 i‡(
z˛õ¡
->
sock
 >= 0)

358 i‡(
z˛õ¡
->
t_c⁄√˘
)

361 i‡(
	`z˛õ¡_sockë_c⁄√˘
(
z˛õ¡
) < 0)

363 i‡(
z˛õ¡_debug
)

364 
	`zlog_debug
 ("zclient connection fail");

365 
z˛õ¡
->
Áû
++;

366 
	`z˛õ¡_evít
 (
ZCLIENT_CONNECT
, 
z˛õ¡
);

370 i‡(
	`£t_n⁄blockög
(
z˛õ¡
->
sock
) < 0)

371 
	`zlog_w¨n
("%s: së_n⁄blockög(%dËÁûed", 
__func__
, 
z˛õ¡
->
sock
);

374 
z˛õ¡
->
Áû
 = 0;

375 i‡(
z˛õ¡_debug
)

376 
	`zlog_debug
 ("z˛õ¡ c⁄√˘ suc˚s†wôh sockë [%d]", 
z˛õ¡
->
sock
);

379 
	`z˛õ¡_evít
 (
ZCLIENT_READ
, 
z˛õ¡
);

381 
	`zebø_hñlo_£nd
 (
z˛õ¡
);

384 
	`zebø_mesßge_£nd
 (
z˛õ¡
, 
ZEBRA_ROUTER_ID_ADD
);

387 
	`zebø_mesßge_£nd
 (
z˛õ¡
, 
ZEBRA_INTERFACE_ADD
);

390 
i
 = 0; i < 
ZEBRA_ROUTE_MAX
; i++)

391 i‡(
i
 !
z˛õ¡
->
ªdi°_deÁu…
 && z˛õ¡->
ªdi°
[i])

392 
	`zebø_ªdi°ribuã_£nd
 (
ZEBRA_REDISTRIBUTE_ADD
, 
z˛õ¡
, 
i
);

395 i‡(
z˛õ¡
->
deÁu…_öf‹m©i⁄
)

396 
	`zebø_mesßge_£nd
 (
z˛õ¡
, 
ZEBRA_REDISTRIBUTE_DEFAULT_ADD
);

399 
	}
}

404 
	$z˛õ¡_c⁄√˘
 (
thªad
 *
t
)

406 
z˛õ¡
 *zclient;

408 
z˛õ¡
 = 
	`THREAD_ARG
 (
t
);

409 
z˛õ¡
->
t_c⁄√˘
 = 
NULL
;

411 i‡(
z˛õ¡_debug
)

412 
	`zlog_debug
 ("zclient_connect is called");

414  
	`z˛õ¡_°¨t
 (
z˛õ¡
);

415 
	}
}

462 
	$z≠i_ùv4_rouã
 (
u_ch¨
 
cmd
, 
z˛õ¡
 *z˛õ¡, 
¥efix_ùv4
 *
p
,

463 
z≠i_ùv4
 *
≠i
)

465 
i
;

466 
psize
;

467 
°ªam
 *
s
;

470 
s
 = 
z˛õ¡
->
obuf
;

471 
	`°ªam_ª£t
 (
s
);

473 
	`z˛õ¡_¸óã_hódî
 (
s
, 
cmd
);

476 
	`°ªam_putc
 (
s
, 
≠i
->
ty≥
);

477 
	`°ªam_putc
 (
s
, 
≠i
->
Êags
);

478 
	`°ªam_putc
 (
s
, 
≠i
->
mesßge
);

479 
	`°ªam_putw
 (
s
, 
≠i
->
ßfi
);

482 
psize
 = 
	`PSIZE
 (
p
->
¥efixÀn
);

483 
	`°ªam_putc
 (
s
, 
p
->
¥efixÀn
);

484 
	`°ªam_wrôe
 (
s
, (
u_ch¨
 *Ë& 
p
->
¥efix
, 
psize
);

487 i‡(
	`CHECK_FLAG
 (
≠i
->
mesßge
, 
ZAPI_MESSAGE_NEXTHOP
))

489 i‡(
	`CHECK_FLAG
 (
≠i
->
Êags
, 
ZEBRA_FLAG_BLACKHOLE
))

491 
	`°ªam_putc
 (
s
, 1);

492 
	`°ªam_putc
 (
s
, 
ZEBRA_NEXTHOP_BLACKHOLE
);

497 
	`°ªam_putc
 (
s
, 
≠i
->
√xth›_num
 +ápi->
ifödex_num
);

499 
i
 = 0; i < 
≠i
->
√xth›_num
; i++)

501 
	`°ªam_putc
 (
s
, 
ZEBRA_NEXTHOP_IPV4
);

502 
	`°ªam_put_ö_addr
 (
s
, 
≠i
->
√xth›
[
i
]);

504 
i
 = 0; i < 
≠i
->
ifödex_num
; i++)

506 
	`°ªam_putc
 (
s
, 
ZEBRA_NEXTHOP_IFINDEX
);

507 
	`°ªam_pué
 (
s
, 
≠i
->
ifödex
[
i
]);

511 i‡(
	`CHECK_FLAG
 (
≠i
->
mesßge
, 
ZAPI_MESSAGE_DISTANCE
))

512 
	`°ªam_putc
 (
s
, 
≠i
->
di°™˚
);

513 i‡(
	`CHECK_FLAG
 (
≠i
->
mesßge
, 
ZAPI_MESSAGE_METRIC
))

514 
	`°ªam_pué
 (
s
, 
≠i
->
mëric
);

517 
	`°ªam_putw_©
 (
s
, 0, 
	`°ªam_gë_ídp
 (s));

519  
	`z˛õ¡_£nd_mesßge
(
z˛õ¡
);

520 
	}
}

522 #ifde‡
HAVE_IPV6


524 
	$z≠i_ùv6_rouã
 (
u_ch¨
 
cmd
, 
z˛õ¡
 *z˛õ¡, 
¥efix_ùv6
 *
p
,

525 
z≠i_ùv6
 *
≠i
)

527 
i
;

528 
psize
;

529 
°ªam
 *
s
;

532 
s
 = 
z˛õ¡
->
obuf
;

533 
	`°ªam_ª£t
 (
s
);

535 
	`z˛õ¡_¸óã_hódî
 (
s
, 
cmd
);

538 
	`°ªam_putc
 (
s
, 
≠i
->
ty≥
);

539 
	`°ªam_putc
 (
s
, 
≠i
->
Êags
);

540 
	`°ªam_putc
 (
s
, 
≠i
->
mesßge
);

541 
	`°ªam_putw
 (
s
, 
≠i
->
ßfi
);

544 
psize
 = 
	`PSIZE
 (
p
->
¥efixÀn
);

545 
	`°ªam_putc
 (
s
, 
p
->
¥efixÀn
);

546 
	`°ªam_wrôe
 (
s
, (
u_ch¨
 *)&
p
->
¥efix
, 
psize
);

549 i‡(
	`CHECK_FLAG
 (
≠i
->
mesßge
, 
ZAPI_MESSAGE_NEXTHOP
))

551 
	`°ªam_putc
 (
s
, 
≠i
->
√xth›_num
 +ápi->
ifödex_num
);

553 
i
 = 0; i < 
≠i
->
√xth›_num
; i++)

555 
	`°ªam_putc
 (
s
, 
ZEBRA_NEXTHOP_IPV6
);

556 
	`°ªam_wrôe
 (
s
, (
u_ch¨
 *)
≠i
->
√xth›
[
i
], 16);

558 
i
 = 0; i < 
≠i
->
ifödex_num
; i++)

560 
	`°ªam_putc
 (
s
, 
ZEBRA_NEXTHOP_IFINDEX
);

561 
	`°ªam_pué
 (
s
, 
≠i
->
ifödex
[
i
]);

565 i‡(
	`CHECK_FLAG
 (
≠i
->
mesßge
, 
ZAPI_MESSAGE_DISTANCE
))

566 
	`°ªam_putc
 (
s
, 
≠i
->
di°™˚
);

567 i‡(
	`CHECK_FLAG
 (
≠i
->
mesßge
, 
ZAPI_MESSAGE_METRIC
))

568 
	`°ªam_pué
 (
s
, 
≠i
->
mëric
);

571 
	`°ªam_putw_©
 (
s
, 0, 
	`°ªam_gë_ídp
 (s));

573  
	`z˛õ¡_£nd_mesßge
(
z˛õ¡
);

574 
	}
}

584 
	$zebø_ªdi°ribuã_£nd
 (
comm™d
, 
z˛õ¡
 *z˛õ¡, 
ty≥
)

586 
°ªam
 *
s
;

588 
s
 = 
z˛õ¡
->
obuf
;

589 
	`°ªam_ª£t
(
s
);

591 
	`z˛õ¡_¸óã_hódî
 (
s
, 
comm™d
);

592 
	`°ªam_putc
 (
s
, 
ty≥
);

594 
	`°ªam_putw_©
 (
s
, 0, 
	`°ªam_gë_ídp
 (s));

596  
	`z˛õ¡_£nd_mesßge
(
z˛õ¡
);

597 
	}
}

601 
	$zebø_rouãr_id_upd©e_ªad
 (
°ªam
 *
s
, 
¥efix
 *
rid
)

603 
∂í
;

606 
rid
->
Ámûy
 = 
	`°ªam_gëc
 (
s
);

608 
∂í
 = 
	`¥efix_bÀn
 (
rid
);

609 
	`°ªam_gë
 (&
rid
->
u
.
¥efix
, 
s
, 
∂í
);

610 
rid
->
¥efixÀn
 = 
	`°ªam_gëc
 (
s
);

611 
	}
}

645 
öãrÁ˚
 *

646 
	$zebø_öãrÁ˚_add_ªad
 (
°ªam
 *
s
)

648 
öãrÁ˚
 *
iÂ
;

649 
i‚ame_tmp
[
INTERFACE_NAMSIZ
];

652 
	`°ªam_gë
 (
i‚ame_tmp
, 
s
, 
INTERFACE_NAMSIZ
);

655 
iÂ
 = 
	`if_gë_by_«me_Àn
 (
i‚ame_tmp
, 
	`°∫Àn
(i‚ame_tmp, 
INTERFACE_NAMSIZ
));

657 
	`zebø_öãrÁ˚_if_£t_vÆue
 (
s
, 
iÂ
);

659  
iÂ
;

660 
	}
}

669 
öãrÁ˚
 *

670 
	$zebø_öãrÁ˚_°©e_ªad
 (
°ªam
 *
s
)

672 
öãrÁ˚
 *
iÂ
;

673 
i‚ame_tmp
[
INTERFACE_NAMSIZ
];

676 
	`°ªam_gë
 (
i‚ame_tmp
, 
s
, 
INTERFACE_NAMSIZ
);

679 
iÂ
 = 
	`if_lookup_by_«me_Àn
 (
i‚ame_tmp
,

680 
	`°∫Àn
(
i‚ame_tmp
, 
INTERFACE_NAMSIZ
));

683 i‡(! 
iÂ
)

684  
NULL
;

686 
	`zebø_öãrÁ˚_if_£t_vÆue
 (
s
, 
iÂ
);

688  
iÂ
;

689 
	}
}

724 
	$zebø_öãrÁ˚_if_£t_vÆue
 (
°ªam
 *
s
, 
öãrÁ˚
 *
iÂ
)

727 
iÂ
->
ifödex
 = 
	`°ªam_gël
 (
s
);

728 
iÂ
->
°©us
 = 
	`°ªam_gëc
 (
s
);

731 
iÂ
->
Êags
 = 
	`°ªam_gëq
 (
s
);

732 
iÂ
->
mëric
 = 
	`°ªam_gël
 (
s
);

733 
iÂ
->
mtu
 = 
	`°ªam_gël
 (
s
);

734 
iÂ
->
mtu6
 = 
	`°ªam_gël
 (
s
);

735 
iÂ
->
b™dwidth
 = 
	`°ªam_gël
 (
s
);

736 #ifde‡
HAVE_STRUCT_SOCKADDR_DL


737 
	`°ªam_gë
 (&
iÂ
->
sdl
, 
s
,  (iÂ->
sdl_°‹age
));

739 
iÂ
->
hw_addr_Àn
 = 
	`°ªam_gël
 (
s
);

740 i‡(
iÂ
->
hw_addr_Àn
)

741 
	`°ªam_gë
 (
iÂ
->
hw_addr
, 
s
, iÂ->
hw_addr_Àn
);

743 
	}
}

746 
	$memc⁄°™t
(c⁄° *
s
, 
c
, 
size_t
 
n
)

748 c⁄° 
u_ch¨
 *
p
 = 
s
;

750 
n
-- > 0)

751 i‡(*
p
++ !
c
)

754 
	}
}

756 
c⁄√˘ed
 *

757 
	$zebø_öãrÁ˚_addªss_ªad
 (
ty≥
, 
°ªam
 *
s
)

759 
ifödex
;

760 
öãrÁ˚
 *
iÂ
;

761 
c⁄√˘ed
 *
ifc
;

762 
¥efix
 
p
, 
d
;

763 
Ámûy
;

764 
∂í
;

765 
u_ch¨
 
ifc_Êags
;

767 
	`mem£t
 (&
p
, 0, (p));

768 
	`mem£t
 (&
d
, 0, (d));

771 
ifödex
 = 
	`°ªam_gël
 (
s
);

774 
iÂ
 = 
	`if_lookup_by_ödex
 (
ifödex
);

775 i‡(
iÂ
 =
NULL
)

777 
	`zlog_w¨n
 ("zebra_interface_address_read(%s): "

779 (
ty≥
 =
ZEBRA_INTERFACE_ADDRESS_ADD
? "ADD" : "DELETE"),

780 
ifödex
);

781  
NULL
;

785 
ifc_Êags
 = 
	`°ªam_gëc
 (
s
);

788 
Ámûy
 = 
p
.Ámûy = 
	`°ªam_gëc
 (
s
);

790 
∂í
 = 
	`¥efix_bÀn
 (&
p
);

791 
	`°ªam_gë
 (&
p
.
u
.
¥efix
, 
s
, 
∂í
);

792 
p
.
¥efixÀn
 = 
	`°ªam_gëc
 (
s
);

795 
	`°ªam_gë
 (&
d
.
u
.
¥efix
, 
s
, 
∂í
);

796 
d
.
Ámûy
 = family;

798 i‡(
ty≥
 =
ZEBRA_INTERFACE_ADDRESS_ADD
)

801 
ifc
 = 
	`c⁄√˘ed_add_by_¥efix
(
iÂ
, &
p
,(
	`memc⁄°™t
(&
d
.
u
.
¥efix
,0,
∂í
) ?

802 
NULL
 : &
d
));

803 i‡(
ifc
 !
NULL
)

805 
ifc
->
Êags
 = 
ifc_Êags
;

806 i‡(
ifc
->
de°ö©i⁄
)

807 
ifc
->
de°ö©i⁄
->
¥efixÀn
 = ifc->
addªss
->prefixlen;

808 i‡(
	`CHECK_FLAG
(
ifc
->
Êags
, 
ZEBRA_IFA_PEER
))

811 
buf
[
BUFSIZ
];

812 
	`¥efix2°r
 (
ifc
->
addªss
, 
buf
, (buf));

813 
	`zlog_w¨n
("warning: interface %sáddress %s "

815 
iÂ
->
«me
, 
buf
);

816 
	`UNSET_FLAG
(
ifc
->
Êags
, 
ZEBRA_IFA_PEER
);

822 
	`as£π
 (
ty≥
 =
ZEBRA_INTERFACE_ADDRESS_DELETE
);

823 
ifc
 = 
	`c⁄√˘ed_dñëe_by_¥efix
(
iÂ
, &
p
);

826  
ifc
;

827 
	}
}

832 
	$z˛õ¡_ªad
 (
thªad
 *thread)

834 
size_t
 
Æªady
;

835 
uöt16_t
 
Àngth
, 
comm™d
;

836 
uöt8_t
 
m¨kî
, 
vîsi⁄
;

837 
z˛õ¡
 *zclient;

840 
z˛õ¡
 = 
	`THREAD_ARG
 (
thªad
);

841 
z˛õ¡
->
t_ªad
 = 
NULL
;

844 i‡((
Æªady
 = 
	`°ªam_gë_ídp
(
z˛õ¡
->
ibuf
)Ë< 
ZEBRA_HEADER_SIZE
)

846 
ssize_t
 
nbyã
;

847 i‡(((
nbyã
 = 
	`°ªam_ªad_åy
(
z˛õ¡
->
ibuf
, z˛õ¡->
sock
,

848 
ZEBRA_HEADER_SIZE
-
Æªady
)) == 0) ||

849 (
nbyã
 == -1))

851 i‡(
z˛õ¡_debug
)

852 
	`zlog_debug
 ("z˛õ¡ c⁄√˘i⁄ clo£d sockë [%d].", 
z˛õ¡
->
sock
);

853  
	`z˛õ¡_Áûed
(
z˛õ¡
);

855 i‡(
nbyã
 !(
ssize_t
)(
ZEBRA_HEADER_SIZE
-
Æªady
))

858 
	`z˛õ¡_evít
 (
ZCLIENT_READ
, 
z˛õ¡
);

861 
Æªady
 = 
ZEBRA_HEADER_SIZE
;

865 
	`°ªam_£t_gëp
(
z˛õ¡
->
ibuf
, 0);

868 
Àngth
 = 
	`°ªam_gëw
 (
z˛õ¡
->
ibuf
);

869 
m¨kî
 = 
	`°ªam_gëc
 (
z˛õ¡
->
ibuf
);

870 
vîsi⁄
 = 
	`°ªam_gëc
 (
z˛õ¡
->
ibuf
);

871 
comm™d
 = 
	`°ªam_gëw
 (
z˛õ¡
->
ibuf
);

873 i‡(
m¨kî
 !
ZEBRA_HEADER_MARKER
 || 
vîsi⁄
 !
ZSERV_VERSION
)

875 
	`zlog_îr
("%s: socket %d version mismatch, marker %d, version %d",

876 
__func__
, 
z˛õ¡
->
sock
, 
m¨kî
, 
vîsi⁄
);

877  
	`z˛õ¡_Áûed
(
z˛õ¡
);

880 i‡(
Àngth
 < 
ZEBRA_HEADER_SIZE
)

882 
	`zlog_îr
("%s: socket %d messageÜength %u isÜessÅhan %d ",

883 
__func__
, 
z˛õ¡
->
sock
, 
Àngth
, 
ZEBRA_HEADER_SIZE
);

884  
	`z˛õ¡_Áûed
(
z˛õ¡
);

888 i‡(
Àngth
 > 
	`STREAM_SIZE
(
z˛õ¡
->
ibuf
))

890 
°ªam
 *
ns
;

891 
	`zlog_w¨n
("%s: message size %uÉxceeds buffer size %lu,Éxpanding...",

892 
__func__
, 
Àngth
, (
u_l⁄g
)
	`STREAM_SIZE
(
z˛õ¡
->
ibuf
));

893 
ns
 = 
	`°ªam_√w
(
Àngth
);

894 
	`°ªam_c›y
(
ns
, 
z˛õ¡
->
ibuf
);

895 
	`°ªam_‰ì
 (
z˛õ¡
->
ibuf
);

896 
z˛õ¡
->
ibuf
 = 
ns
;

900 i‡(
Æªady
 < 
Àngth
)

902 
ssize_t
 
nbyã
;

903 i‡(((
nbyã
 = 
	`°ªam_ªad_åy
(
z˛õ¡
->
ibuf
, z˛õ¡->
sock
,

904 
Àngth
-
Æªady
)) == 0) ||

905 (
nbyã
 == -1))

907 i‡(
z˛õ¡_debug
)

908 
	`zlog_debug
("z˛õ¡ c⁄√˘i⁄ clo£d sockë [%d].", 
z˛õ¡
->
sock
);

909  
	`z˛õ¡_Áûed
(
z˛õ¡
);

911 i‡(
nbyã
 !(
ssize_t
)(
Àngth
-
Æªady
))

914 
	`z˛õ¡_evít
 (
ZCLIENT_READ
, 
z˛õ¡
);

919 
Àngth
 -
ZEBRA_HEADER_SIZE
;

921 i‡(
z˛õ¡_debug
)

922 
	`zlog_debug
("z˛õ¡ 0x%∞comm™d 0x%x \n", 
z˛õ¡
, 
comm™d
);

924 
comm™d
)

926 
ZEBRA_ROUTER_ID_UPDATE
:

927 i‡(
z˛õ¡
->
rouãr_id_upd©e
)

928 (*
z˛õ¡
->
rouãr_id_upd©e
Ë(
comm™d
, z˛õ¡, 
Àngth
);

930 
ZEBRA_INTERFACE_ADD
:

931 i‡(
z˛õ¡
->
öãrÁ˚_add
)

932 (*
z˛õ¡
->
öãrÁ˚_add
Ë(
comm™d
, z˛õ¡, 
Àngth
);

934 
ZEBRA_INTERFACE_DELETE
:

935 i‡(
z˛õ¡
->
öãrÁ˚_dñëe
)

936 (*
z˛õ¡
->
öãrÁ˚_dñëe
Ë(
comm™d
, z˛õ¡, 
Àngth
);

938 
ZEBRA_INTERFACE_ADDRESS_ADD
:

939 i‡(
z˛õ¡
->
öãrÁ˚_addªss_add
)

940 (*
z˛õ¡
->
öãrÁ˚_addªss_add
Ë(
comm™d
, z˛õ¡, 
Àngth
);

942 
ZEBRA_INTERFACE_ADDRESS_DELETE
:

943 i‡(
z˛õ¡
->
öãrÁ˚_addªss_dñëe
)

944 (*
z˛õ¡
->
öãrÁ˚_addªss_dñëe
Ë(
comm™d
, z˛õ¡, 
Àngth
);

946 
ZEBRA_INTERFACE_UP
:

947 i‡(
z˛õ¡
->
öãrÁ˚_up
)

948 (*
z˛õ¡
->
öãrÁ˚_up
Ë(
comm™d
, z˛õ¡, 
Àngth
);

950 
ZEBRA_INTERFACE_DOWN
:

951 i‡(
z˛õ¡
->
öãrÁ˚_down
)

952 (*
z˛õ¡
->
öãrÁ˚_down
Ë(
comm™d
, z˛õ¡, 
Àngth
);

954 
ZEBRA_IPV4_ROUTE_ADD
:

955 i‡(
z˛õ¡
->
ùv4_rouã_add
)

956 (*
z˛õ¡
->
ùv4_rouã_add
Ë(
comm™d
, z˛õ¡, 
Àngth
);

958 
ZEBRA_IPV4_ROUTE_DELETE
:

959 i‡(
z˛õ¡
->
ùv4_rouã_dñëe
)

960 (*
z˛õ¡
->
ùv4_rouã_dñëe
Ë(
comm™d
, z˛õ¡, 
Àngth
);

962 
ZEBRA_IPV6_ROUTE_ADD
:

963 i‡(
z˛õ¡
->
ùv6_rouã_add
)

964 (*
z˛õ¡
->
ùv6_rouã_add
Ë(
comm™d
, z˛õ¡, 
Àngth
);

966 
ZEBRA_IPV6_ROUTE_DELETE
:

967 i‡(
z˛õ¡
->
ùv6_rouã_dñëe
)

968 (*
z˛õ¡
->
ùv6_rouã_dñëe
Ë(
comm™d
, z˛õ¡, 
Àngth
);

974 i‡(
z˛õ¡
->
sock
 < 0)

979 
	`°ªam_ª£t
(
z˛õ¡
->
ibuf
);

980 
	`z˛õ¡_evít
 (
ZCLIENT_READ
, 
z˛õ¡
);

983 
	}
}

986 
	$z˛õ¡_ªdi°ribuã
 (
comm™d
, 
z˛õ¡
 *z˛õ¡, 
ty≥
)

989 i‡(
comm™d
 =
ZEBRA_REDISTRIBUTE_ADD
)

991 i‡(
z˛õ¡
->
ªdi°
[
ty≥
])

993 
z˛õ¡
->
ªdi°
[
ty≥
] = 1;

997 i‡(!
z˛õ¡
->
ªdi°
[
ty≥
])

999 
z˛õ¡
->
ªdi°
[
ty≥
] = 0;

1002 i‡(
z˛õ¡
->
sock
 > 0)

1003 
	`zebø_ªdi°ribuã_£nd
 (
comm™d
, 
z˛õ¡
, 
ty≥
);

1004 
	}
}

1008 
	$z˛õ¡_ªdi°ribuã_deÁu…
 (
comm™d
, 
z˛õ¡
 *zclient)

1011 i‡(
comm™d
 =
ZEBRA_REDISTRIBUTE_DEFAULT_ADD
)

1013 i‡(
z˛õ¡
->
deÁu…_öf‹m©i⁄
)

1015 
z˛õ¡
->
deÁu…_öf‹m©i⁄
 = 1;

1019 i‡(!
z˛õ¡
->
deÁu…_öf‹m©i⁄
)

1021 
z˛õ¡
->
deÁu…_öf‹m©i⁄
 = 0;

1024 i‡(
z˛õ¡
->
sock
 > 0)

1025 
	`zebø_mesßge_£nd
 (
z˛õ¡
, 
comm™d
);

1026 
	}
}

1029 
	$z˛õ¡_evít
 (
evít
Évít, 
z˛õ¡
 *zclient)

1031 
evít
)

1033 
ZCLIENT_SCHEDULE
:

1034 i‡(! 
z˛õ¡
->
t_c⁄√˘
)

1035 
z˛õ¡
->
t_c⁄√˘
 =

1036 
	`thªad_add_evít
 (
ma°î
, 
z˛õ¡_c⁄√˘
, 
z˛õ¡
, 0);

1038 
ZCLIENT_CONNECT
:

1039 i‡(
z˛õ¡
->
Áû
 >= 10)

1041 i‡(
z˛õ¡_debug
)

1042 
	`zlog_debug
 ("zclient connect schedule interval is %d",

1043 
z˛õ¡
->
Áû
 < 3 ? 10 : 60);

1044 i‡(! 
z˛õ¡
->
t_c⁄√˘
)

1045 
z˛õ¡
->
t_c⁄√˘
 =

1046 
	`thªad_add_timî
 (
ma°î
, 
z˛õ¡_c⁄√˘
, 
z˛õ¡
,

1047 
z˛õ¡
->
Áû
 < 3 ? 10 : 60);

1049 
ZCLIENT_READ
:

1050 
z˛õ¡
->
t_ªad
 =

1051 
	`thªad_add_ªad
 (
ma°î
, 
z˛õ¡_ªad
, 
z˛õ¡
, z˛õ¡->
sock
);

1054 
	}
}

1056 c⁄° *c⁄° 
	$z˛õ¡_£rv_∑th_gë
()

1058  
z˛õ¡_£rv_∑th
 ? z˛õ¡_£rv_∑th : 
ZEBRA_SERV_PATH
;

1059 
	}
}

1062 
	$z˛õ¡_£rv_∑th_£t
 (*
∑th
)

1064 
°©
 
sb
;

1067 
z˛õ¡_£rv_∑th
 = 
NULL
;

1070 i‡(
	`°©
(
∑th
, &
sb
) == -1)

1072 
	`zlog_w¨n
 ("%s: zebø sockë `%s' d€†nŸÉxi°", 
__func__
, 
∑th
);

1076 i‡((
sb
.
°_mode
 & 
S_IFMT
Ë!
S_IFSOCK
)

1078 
	`zlog_w¨n
 ("%s: `%s' i†nŸ unix sockë, sú", 
__func__
, 
∑th
);

1083 
z˛õ¡_£rv_∑th
 = 
∑th
;

1084 
	}
}

	@zclient.h

22 #i‚de‡
_ZEBRA_ZCLIENT_H


23 
	#_ZEBRA_ZCLIENT_H


	)

26 
	~"¥efix.h
"

29 
	~"if.h
"

32 
	#ZEBRA_MAX_PACKET_SIZ
 4096

	)

35 
	#ZEBRA_HEADER_SIZE
 6

	)

38 
	sz˛õ¡


41 
	msock
;

45 
	míabÀ
;

48 
	mÁû
;

51 
°ªam
 *
	mibuf
;

54 
°ªam
 *
	mobuf
;

57 
buf„r
 *
	mwb
;

60 
thªad
 *
	mt_ªad
;

61 
thªad
 *
	mt_c⁄√˘
;

64 
thªad
 *
	mt_wrôe
;

67 
u_ch¨
 
	mªdi°_deÁu…
;

68 
u_ch¨
 
	mªdi°
[
ZEBRA_ROUTE_MAX
];

71 
u_ch¨
 
	mdeÁu…_öf‹m©i⁄
;

74 (*
	mrouãr_id_upd©e
Ë(, 
	mz˛õ¡
 *, 
	muöt16_t
);

75 (*
	möãrÁ˚_add
Ë(, 
	mz˛õ¡
 *, 
	muöt16_t
);

76 (*
	möãrÁ˚_dñëe
Ë(, 
	mz˛õ¡
 *, 
	muöt16_t
);

77 (*
	möãrÁ˚_up
Ë(, 
	mz˛õ¡
 *, 
	muöt16_t
);

78 (*
	möãrÁ˚_down
Ë(, 
	mz˛õ¡
 *, 
	muöt16_t
);

79 (*
	möãrÁ˚_addªss_add
Ë(, 
	mz˛õ¡
 *, 
	muöt16_t
);

80 (*
	möãrÁ˚_addªss_dñëe
Ë(, 
	mz˛õ¡
 *, 
	muöt16_t
);

81 (*
	mùv4_rouã_add
Ë(, 
	mz˛õ¡
 *, 
	muöt16_t
);

82 (*
	mùv4_rouã_dñëe
Ë(, 
	mz˛õ¡
 *, 
	muöt16_t
);

83 (*
	mùv6_rouã_add
Ë(, 
	mz˛õ¡
 *, 
	muöt16_t
);

84 (*
	mùv6_rouã_dñëe
Ë(, 
	mz˛õ¡
 *, 
	muöt16_t
);

88 
	#ZAPI_MESSAGE_NEXTHOP
 0x01

	)

89 
	#ZAPI_MESSAGE_IFINDEX
 0x02

	)

90 
	#ZAPI_MESSAGE_DISTANCE
 0x04

	)

91 
	#ZAPI_MESSAGE_METRIC
 0x08

	)

94 
	sz£rv_hódî


96 
uöt16_t
 
	mÀngth
;

97 
uöt8_t
 
	mm¨kî
;

100 
uöt8_t
 
	mvîsi⁄
;

101 
	#ZSERV_VERSION
 2

	)

102 
uöt16_t
 
	mcomm™d
;

106 
	sz≠i_ùv4


108 
u_ch¨
 
	mty≥
;

110 
u_ch¨
 
	mÊags
;

112 
u_ch¨
 
	mmesßge
;

114 
ßfi_t
 
	mßfi
;

116 
u_ch¨
 
	m√xth›_num
;

117 
ö_addr
 **
	m√xth›
;

119 
u_ch¨
 
	mifödex_num
;

120 *
	mifödex
;

122 
u_ch¨
 
	mdi°™˚
;

124 
u_öt32_t
 
	mmëric
;

128 
z˛õ¡
 *
z˛õ¡_√w
 ();

129 
z˛õ¡_öô
 (
z˛õ¡
 *, );

130 
z˛õ¡_°¨t
 (
z˛õ¡
 *);

131 
z˛õ¡_°›
 (
z˛õ¡
 *);

132 
z˛õ¡_ª£t
 (
z˛õ¡
 *);

133 
z˛õ¡_‰ì
 (
z˛õ¡
 *);

135 
z˛õ¡_sockë_c⁄√˘
 (
z˛õ¡
 *);

136 
z˛õ¡_£rv_∑th_£t
 (*
∑th
);

137 c⁄° *c⁄° 
z˛õ¡_£rv_∑th_gë
 ();

140 
zebø_ªdi°ribuã_£nd
 (
comm™d
, 
z˛õ¡
 *, 
ty≥
);

143 
z˛õ¡_ªdi°ribuã
 (
comm™d
, 
z˛õ¡
 *, 
ty≥
);

146 
z˛õ¡_ªdi°ribuã_deÁu…
 (
comm™d
, 
z˛õ¡
 *);

150 
z˛õ¡_£nd_mesßge
(
z˛õ¡
 *);

153 
z˛õ¡_¸óã_hódî
 (
°ªam
 *, 
uöt16_t
);

155 
öãrÁ˚
 *
zebø_öãrÁ˚_add_ªad
 (
°ªam
 *);

156 
öãrÁ˚
 *
zebø_öãrÁ˚_°©e_ªad
 (
°ªam
 *
s
);

157 
c⁄√˘ed
 *
zebø_öãrÁ˚_addªss_ªad
 (, 
°ªam
 *);

158 
zebø_öãrÁ˚_if_£t_vÆue
 (
°ªam
 *, 
öãrÁ˚
 *);

159 
zebø_rouãr_id_upd©e_ªad
 (
°ªam
 *
s
, 
¥efix
 *
rid
);

160 
z≠i_ùv4_rouã
 (
u_ch¨
, 
z˛õ¡
 *, 
¥efix_ùv4
 *,

161 
z≠i_ùv4
 *);

163 #ifde‡
HAVE_IPV6


166 
	sz≠i_ùv6


168 
u_ch¨
 
	mty≥
;

170 
u_ch¨
 
	mÊags
;

172 
u_ch¨
 
	mmesßge
;

174 
ßfi_t
 
	mßfi
;

176 
u_ch¨
 
	m√xth›_num
;

177 
ö6_addr
 **
	m√xth›
;

179 
u_ch¨
 
	mifödex_num
;

180 *
	mifödex
;

182 
u_ch¨
 
	mdi°™˚
;

184 
u_öt32_t
 
	mmëric
;

187 
z≠i_ùv6_rouã
 (
u_ch¨
 
cmd
, 
z˛õ¡
 *zclient,

188 
¥efix_ùv6
 *
p
, 
z≠i_ùv6
 *
≠i
);

	@zebra.h

21 #i‚de‡
_ZEBRA_H


22 
	#_ZEBRA_H


	)

25 
	~"c⁄fig.h
"

28 #ifde‡
SUNOS_5


29 
	#_XPG4_2


	)

30 
	#__EXTENSIONS__


	)

31 
	tu_öt32_t
;

32 
	tu_öt16_t
;

33 
	tu_öt8_t
;

35 
	#SYSCONFDIR
 ""

	)

37 #i‚de‡
HAVE_SOCKLEN_T


38 
	tsockÀn_t
;

41 
	~<uni°d.h
>

42 
	~<°dio.h
>

43 
	~<°dlib.h
>

44 
	~<°ddef.h
>

45 
	~<˘y≥.h
>

46 
	~<î∫o.h
>

47 
	~<f˙é.h
>

48 
	~<sig«l.h
>

49 
	~<°rög.h
>

50 
	~<pwd.h
>

51 
	~<gΩ.h
>

52 #ifde‡
HAVE_STROPTS_H


53 
	~<°r›ts.h
>

55 #ifde‡
HAVE_SYS_SELECT_H


56 
	~<sys/£À˘.h
>

58 
	~<sys/°©.h
>

59 
	~<sys/ty≥s.h
>

60 
	~<sys/∑øm.h
>

61 #ifde‡
HAVE_SYS_SYSCTL_H


62 #ifde‡
GNU_LINUX


63 
	~<löux/ty≥s.h
>

65 
	~<sys/sys˘l.h
>

67 
	~<sys/io˘l.h
>

68 #ifde‡
HAVE_SYS_CONF_H


69 
	~<sys/c⁄f.h
>

71 #ifde‡
HAVE_SYS_KSYM_H


72 
	~<sys/ksym.h
>

74 
	~<sy¶og.h
>

75 #ifde‡
TIME_WITH_SYS_TIME


76 
	~<sys/time.h
>

77 
	~<time.h
>

79 #ifde‡
HAVE_SYS_TIME_H


80 
	~<sys/time.h
>

82 
	~<time.h
>

85 
	~<sys/uio.h
>

86 
	~<sys/ut¢ame.h
>

87 #ifde‡
HAVE_RUSAGE


88 
	~<sys/ªsour˚.h
>

90 #ifde‡
HAVE_LIMITS_H


91 
	~<limôs.h
>

93 #ifde‡
HAVE_INTTYPES_H


94 
	~<öây≥s.h
>

98 #ifde‡
SUNOS_5


99 
	~<°rögs.h
>

103 #ifde‡
HAVE_LINUX_VERSION_H


104 
	~<löux/vîsi⁄.h
>

107 #ifde‡
HAVE_ASM_TYPES_H


108 
	~<asm/ty≥s.h
>

112 
	~<°d¨g.h
>

113 #i‡!(
deföed
(
__STDC_VERSION__
) && __STDC_VERSION__ >= 199901L)

115 #i‚de‡
va_c›y


116 #ifde‡
__va_c›y


117 
	#va_c›y
(
DST
,
SRC
Ë
	`__va_c›y
(DST,SRC)

	)

122 
	#va_c›y
(
DST
,
SRC
Ë
	`mem˝y
(&(DST), &(SRC), (
va_li°
))

	)

129 #ifde‡
HAVE_LCAPS


130 
	~<sys/ˇ∑bûôy.h
>

131 
	~<sys/¥˘l.h
>

134 #ifde‡
HAVE_SOLARIS_CAPABILITIES


135 
	~<¥iv.h
>

140 
	~<sys/sockë.h
>

142 #ifde‡
HAVE_SYS_SOCKIO_H


143 
	~<sys/sockio.h
>

146 #ifde‡
__APPLE__


147 
	#__APPLE_USE_RFC_3542


	)

150 #ifde‡
HAVE_NETINET_IN_H


151 
	~<√töë/ö.h
>

153 
	~<√töë/ö_sy°m.h
>

154 
	~<√töë/ù.h
>

155 
	~<√töë/t˝.h
>

157 #ifde‡
HAVE_NET_NETOPT_H


158 
	~<√t/√t›t.h
>

161 
	~<√t/if.h
>

163 #ifde‡
HAVE_NET_IF_DL_H


164 
	~<√t/if_dl.h
>

167 #ifde‡
HAVE_NET_IF_VAR_H


168 
	~<√t/if_v¨.h
>

171 #ifde‡
HAVE_NET_ROUTE_H


172 
	~<√t/rouã.h
>

175 #ifde‡
HAVE_NETLINK


176 
	~<löux/√éök.h
>

177 
	~<löux/π√éök.h
>

178 
	~<löux/fûãr.h
>

180 
	#RT_TABLE_MAIN
 0

	)

183 #ifde‡
HAVE_NETDB_H


184 
	~<√tdb.h
>

187 
	~<¨∑/öë.h
>

189 #ifde‡
HAVE_INET_ND_H


190 
	~<öë/nd.h
>

193 #ifde‡
HAVE_NETINET_IN_VAR_H


194 
	~<√töë/ö_v¨.h
>

197 #ifde‡
HAVE_NETINET6_IN6_VAR_H


198 
	~<√töë6/ö6_v¨.h
>

201 #ifde‡
HAVE_NETINET_IN6_VAR_H


202 
	~<√töë/ö6_v¨.h
>

205 #ifde‡
HAVE_NETINET6_IN_H


206 
	~<√töë6/ö.h
>

210 #ifde‡
HAVE_NETINET6_IP6_H


211 
	~<√töë6/ù6.h
>

214 #ifde‡
HAVE_NETINET_ICMP6_H


215 
	~<√töë/icmp6.h
>

218 #ifde‡
HAVE_NETINET6_ND6_H


219 
	~<√töë6/nd6.h
>

225 #i‚de‡
INT8_MAX


226 
	#INT8_MAX
 (127)

	)

228 #i‚de‡
INT16_MAX


229 
	#INT16_MAX
 (32767)

	)

231 #i‚de‡
INT32_MAX


232 
	#INT32_MAX
 (2147483647)

	)

234 #i‚de‡
UINT8_MAX


235 
	#UINT8_MAX
 (255U)

	)

237 #i‚de‡
UINT16_MAX


238 
	#UINT16_MAX
 (65535U)

	)

240 #i‚de‡
UINT32_MAX


241 
	#UINT32_MAX
 (4294967295U)

	)

244 #ifde‡
HAVE_GLIBC_BACKTRACE


245 
	~<execöfo.h
>

249 #i‡!(
deföed
(
__GNUC__
Ë|| deföed(
VTYSH_EXTRACT_PL
))

250 
	#__©åibuã__
(
x
)

	)

253 
	~"zas£π.h
"

254 
	~"°r.h
"

257 #ifde‡
HAVE_BROKEN_CMSG_FIRSTHDR


262 
	#ZCMSG_FIRSTHDR
(
mhdr
) \

263 (((
size_t
)((
mhdr
)->
msg_c⁄åﬁÀn
Ë>(
cmsghdr
)) ? \

264 
	`CMSG_FIRSTHDR
(
mhdr
Ë: (
cmsghdr
 *)
NULL
)

	)

269 
	#ZCMSG_FIRSTHDR
(
M
Ë
	`CMSG_FIRSTHDR
(M)

	)

283 #i‚de‡
_CMSG_DATA_ALIGN


284 
	#_CMSG_DATA_ALIGN
(
n
Ë((“Ë+ 3Ë& ~3)

	)

287 #i‚de‡
_CMSG_HDR_ALIGN


288 
	#_CMSG_HDR_ALIGN
(
n
Ë((“Ë+ 3Ë& ~3)

	)

295 #i‚de‡
CMSG_SPACE


296 
	#CMSG_SPACE
(
l
Ë(
	`_CMSG_DATA_ALIGN
((
cmsghdr
)) + \

297 
	`_CMSG_HDR_ALIGN
(
l
))

	)

302 #i‚de‡
CMSG_LEN


303 
	#CMSG_LEN
(
l
Ë(
	`_CMSG_DATA_ALIGN
((
cmsghdr
)Ë+ (l))

	)

310 #i‡
deföed
 (
GNU_LINUX
Ë&& ! deföed (
HAVE_STRUCT_IN_PKTINFO
)

311 
	sö_pktöfo


313 
	mùi_ifödex
;

314 
ö_addr
 
	mùi_•ec_d°
;

315 
ö_addr
 
	mùi_addr
;

335 #ifde‡
GNU_LINUX


336 
	#WANT_OSPF_WRITE_FRAGMENT


	)

348 #i‡
deföed
(
__NëBSD__
) \

349 || (
deföed
(
__FªeBSD__
Ë&& (
	g__FªeBSD_vîsi⁄
 < 1100030)) \

350 || (
deföed
(
__O≥nBSD__
Ë&& (
	gO≥nBSD
 < 200311)) \

351 || (
deföed
(
__APPLE__
)) \

352 || (
deföed
(
SUNOS_5
Ë&& 
	$deföed
(
WORDS_BIGENDIAN
))

353 
	#HAVE_IP_HDRINCL_BSD_ORDER


	)

360 #i‚de‡
BYTE_ORDER


361 
	#BIG_ENDIAN
 4321

	)

362 
	#LITTLE_ENDIAN
 1234

	)

363 
	#PDP_ENDIAN
 3412

	)

365 #i‡
	`deföed
(
WORDS_BIGENDIAN
)

366 
	#BYTE_ORDER
 
BIG_ENDIAN


	)

368 
	#BYTE_ORDER
 
LITTLE_ENDIAN


	)

374 #i‚de‡
MAX


375 
	#MAX
(
a
, 
b
Ë(◊Ë> (bË? (aË: (b))

	)

377 #i‚de‡
MIN


378 
	#MIN
(
a
, 
b
Ë(◊Ë< (bË? (aË: (b))

	)

381 
	#ZEBRA_NUM_OF
(
x
Ë( (xË/  (x[0]))

	)

384 #i‚de‡
IN6_ARE_ADDR_EQUAL


385 
	#IN6_ARE_ADDR_EQUAL
 
IN6_IS_ADDR_EQUAL


	)

389 
	#ZEBRA_PORT
 2600

	)

392 
	#ZEBRA_INTERFACE_ADD
 1

	)

393 
	#ZEBRA_INTERFACE_DELETE
 2

	)

394 
	#ZEBRA_INTERFACE_ADDRESS_ADD
 3

	)

395 
	#ZEBRA_INTERFACE_ADDRESS_DELETE
 4

	)

396 
	#ZEBRA_INTERFACE_UP
 5

	)

397 
	#ZEBRA_INTERFACE_DOWN
 6

	)

398 
	#ZEBRA_IPV4_ROUTE_ADD
 7

	)

399 
	#ZEBRA_IPV4_ROUTE_DELETE
 8

	)

400 
	#ZEBRA_IPV6_ROUTE_ADD
 9

	)

401 
	#ZEBRA_IPV6_ROUTE_DELETE
 10

	)

402 
	#ZEBRA_REDISTRIBUTE_ADD
 11

	)

403 
	#ZEBRA_REDISTRIBUTE_DELETE
 12

	)

404 
	#ZEBRA_REDISTRIBUTE_DEFAULT_ADD
 13

	)

405 
	#ZEBRA_REDISTRIBUTE_DEFAULT_DELETE
 14

	)

406 
	#ZEBRA_IPV4_NEXTHOP_LOOKUP
 15

	)

407 
	#ZEBRA_IPV6_NEXTHOP_LOOKUP
 16

	)

408 
	#ZEBRA_IPV4_IMPORT_LOOKUP
 17

	)

409 
	#ZEBRA_IPV6_IMPORT_LOOKUP
 18

	)

410 
	#ZEBRA_INTERFACE_RENAME
 19

	)

411 
	#ZEBRA_ROUTER_ID_ADD
 20

	)

412 
	#ZEBRA_ROUTER_ID_DELETE
 21

	)

413 
	#ZEBRA_ROUTER_ID_UPDATE
 22

	)

414 
	#ZEBRA_HELLO
 23

	)

415 
	#ZEBRA_IPV4_NEXTHOP_LOOKUP_MRIB
 24

	)

416 
	#ZEBRA_MESSAGE_MAX
 25

	)

422 
	#ZEBRA_HEADER_MARKER
 255

	)

425 
	~"rouã_ty≥s.h
"

432 c⁄° *
	`zebø_rouã_°rög
(
rouã_ty≥
);

434 
	`zebø_rouã_ch¨
(
rouã_ty≥
);

438 
	`¥Ÿo_«me2num
(c⁄° *
s
);

442 
	`¥Ÿo_ªdi°num
(
afi
, c⁄° *
s
);

444 c⁄° *
	`z£rv_comm™d_°rög
 (
comm™d
);

447 
	#ZEBRA_FAMILY_IPV4
 1

	)

448 
	#ZEBRA_FAMILY_IPV6
 2

	)

449 
	#ZEBRA_FAMILY_MAX
 3

	)

452 
	#ZEBRA_ERR_NOERROR
 0

	)

453 
	#ZEBRA_ERR_RTEXIST
 -1

	)

454 
	#ZEBRA_ERR_RTUNREACH
 -2

	)

455 
	#ZEBRA_ERR_EPERM
 -3

	)

456 
	#ZEBRA_ERR_RTNOEXIST
 -4

	)

457 
	#ZEBRA_ERR_KERNEL
 -5

	)

460 
	#ZEBRA_FLAG_INTERNAL
 0x01

	)

461 
	#ZEBRA_FLAG_SELFROUTE
 0x02

	)

462 
	#ZEBRA_FLAG_BLACKHOLE
 0x04

	)

463 
	#ZEBRA_FLAG_IBGP
 0x08

	)

464 
	#ZEBRA_FLAG_SELECTED
 0x10

	)

465 
	#ZEBRA_FLAG_CHANGED
 0x20

	)

466 
	#ZEBRA_FLAG_STATIC
 0x40

	)

467 
	#ZEBRA_FLAG_REJECT
 0x80

	)

470 
	#ZEBRA_NEXTHOP_IFINDEX
 1

	)

471 
	#ZEBRA_NEXTHOP_IFNAME
 2

	)

472 
	#ZEBRA_NEXTHOP_IPV4
 3

	)

473 
	#ZEBRA_NEXTHOP_IPV4_IFINDEX
 4

	)

474 
	#ZEBRA_NEXTHOP_IPV4_IFNAME
 5

	)

475 
	#ZEBRA_NEXTHOP_IPV6
 6

	)

476 
	#ZEBRA_NEXTHOP_IPV6_IFINDEX
 7

	)

477 
	#ZEBRA_NEXTHOP_IPV6_IFNAME
 8

	)

478 
	#ZEBRA_NEXTHOP_BLACKHOLE
 9

	)

480 #i‚de‡
INADDR_LOOPBACK


481 
	#INADDR_LOOPBACK
 0x7f000001

	)

485 
	#AFI_IP
 1

	)

486 
	#AFI_IP6
 2

	)

487 
	#AFI_MAX
 3

	)

490 
	#SAFI_UNICAST
 1

	)

491 
	#SAFI_MULTICAST
 2

	)

492 
	#SAFI_RESERVED_3
 3

	)

493 
	#SAFI_MPLS_VPN
 4

	)

494 
	#SAFI_MAX
 5

	)

497 
	#FILTER_IN
 0

	)

498 
	#FILTER_OUT
 1

	)

499 
	#FILTER_MAX
 2

	)

502 
	#ZEBRA_KERNEL_DISTANCE_DEFAULT
 0

	)

503 
	#ZEBRA_CONNECT_DISTANCE_DEFAULT
 0

	)

504 
	#ZEBRA_STATIC_DISTANCE_DEFAULT
 1

	)

505 
	#ZEBRA_RIP_DISTANCE_DEFAULT
 120

	)

506 
	#ZEBRA_RIPNG_DISTANCE_DEFAULT
 120

	)

507 
	#ZEBRA_OSPF_DISTANCE_DEFAULT
 110

	)

508 
	#ZEBRA_OSPF6_DISTANCE_DEFAULT
 110

	)

509 
	#ZEBRA_ISIS_DISTANCE_DEFAULT
 115

	)

510 
	#ZEBRA_IBGP_DISTANCE_DEFAULT
 200

	)

511 
	#ZEBRA_EBGP_DISTANCE_DEFAULT
 20

	)

514 
	#CHECK_FLAG
(
V
,
F
Ë((VË& (F))

	)

515 
	#SET_FLAG
(
V
,
F
Ë(VË|(F)

	)

516 
	#UNSET_FLAG
(
V
,
F
Ë(VË&~(F)

	)

519 
u_öt16_t
 
	tafi_t
;

520 
u_öt8_t
 
	tßfi_t
;

523 
u_öt16_t
 
	tzebø_size_t
;

524 
u_öt16_t
 
	tzebø_comm™d_t
;

527 
	sfifo


529 
fifo
 *
√xt
;

530 
fifo
 *
¥ev
;

533 
	#FIFO_INIT
(
F
) \

535 
fifo
 *
Xfifo
 = (fifÿ*)(
F
); \

536 
Xfifo
->
√xt
 = Xfifo->
¥ev
 = Xfifo; \

537 
	}
} 0)

	)

539 
	#FIFO_ADD
(
F
,
N
) \

541 
fifo
 *
Xfifo
 = (fifÿ*)(
F
); \

542 
fifo
 *
Xnode
 = (fifÿ*)(
N
); \

543 
Xnode
->
√xt
 = 
Xfifo
; \

544 
Xnode
->
¥ev
 = 
Xfifo
->prev; \

545 
Xfifo
->
¥ev
 = Xfifo->¥ev->
√xt
 = 
Xnode
; \

546 } 0)

	)

548 
	#FIFO_DEL
(
N
) \

550 
fifo
 *
Xnode
 = (fifÿ*)(
N
); \

551 
Xnode
->
¥ev
->
√xt
 = Xnode->next; \

552 
Xnode
->
√xt
->
¥ev
 = Xnode->prev; \

553 } 0)

	)

555 
	#FIFO_HEAD
(
F
) \

556 ((((
fifo
 *)(
F
))->
√xt
 == (fifo *)(F)) \

557 ? 
NULL
 : (
F
)->
√xt
)

	)

559 
	#FIFO_EMPTY
(
F
) \

560 (((
fifo
 *)(
F
))->
√xt
 =(fifÿ*)(F))

	)

562 
	#FIFO_TOP
(
F
) \

563 (
	`FIFO_EMPTY
(
F
Ë? 
NULL
 : ((
fifo
 *)(F))->
√xt
)

	)

	@/usr/include/alloca.h

19 #i‚def 
_ALLOCA_H


20 
	#_ALLOCA_H
 1

	)

22 
	~<„©uªs.h
>

24 
	#__√ed_size_t


	)

25 
	~<°ddef.h
>

27 
	g__BEGIN_DECLS


30 #unde‡
Æloˇ


33 *
	$Æloˇ
 (
size_t
 
__size
Ë
__THROW
;

35 #ifdef 
__GNUC__


36 
	#Æloˇ
(
size
Ë
	`__buûtö_Æloˇ
 (size)

	)

39 
__END_DECLS


	@/usr/include/arpa/inet.h

19 #i‚de‡
_ARPA_INET_H


20 
	#_ARPA_INET_H
 1

	)

22 
	~<„©uªs.h
>

23 
	~<√töë/ö.h
>

26 #i‚de‡
__sockÀn_t_deföed


27 
__sockÀn_t
 
	tsockÀn_t
;

28 
	#__sockÀn_t_deföed


	)

31 
__BEGIN_DECLS


35 
ö_addr_t
 
	$öë_addr
 (
__c⁄°
 *
__˝
Ë
__THROW
;

38 
ö_addr_t
 
	$öë_ aof
 (
ö_addr
 
__ö
Ë
__THROW
;

42 
ö_addr
 
	$öë_makóddr
 (
ö_addr_t
 
__√t
, in_addr_à
__ho°
)

43 
__THROW
;

46 
ö_addr_t
 
	$öë_√tof
 (
ö_addr
 
__ö
Ë
__THROW
;

50 
ö_addr_t
 
	$öë_√tw‹k
 (
__c⁄°
 *
__˝
Ë
__THROW
;

54 *
	$öë_¡ﬂ
 (
ö_addr
 
__ö
Ë
__THROW
;

59 
	$öë_±⁄
 (
__af
, 
__c⁄°
 *
__ª°ri˘
 
__˝
,

60 *
__ª°ri˘
 
__buf
Ë
__THROW
;

65 
__c⁄°
 *
	$öë_¡›
 (
__af
, 
__c⁄°
 *
__ª°ri˘
 
__˝
,

66 *
__ª°ri˘
 
__buf
, 
sockÀn_t
 
__Àn
)

67 
__THROW
;

71 #ifde‡
__USE_MISC


74 
	$öë_©⁄
 (
__c⁄°
 *
__˝
, 
ö_addr
 *
__öp
Ë
__THROW
;

78 *
	$öë_√è
 (
ö_addr_t
 
__√t
, *
__buf
, 
size_t
 
__Àn
Ë
__THROW
;

83 *
	$öë_√t_¡›
 (
__af
, 
__c⁄°
 *
__˝
, 
__bôs
,

84 *
__buf
, 
size_t
 
__Àn
Ë
__THROW
;

89 
	$öë_√t_±⁄
 (
__af
, 
__c⁄°
 *
__˝
,

90 *
__buf
, 
size_t
 
__Àn
Ë
__THROW
;

95 
	$öë_nßp_addr
 (
__c⁄°
 *
__˝
,

96 *
__buf
, 
__Àn
Ë
__THROW
;

100 *
	$öë_nßp_¡ﬂ
 (
__Àn
, 
__c⁄°
 *
__˝
,

101 *
__buf
Ë
__THROW
;

104 
__END_DECLS


	@/usr/include/arpa/telnet.h

32 #i‚de‡
_ARPA_TELNET_H


33 
	#_ARPA_TELNET_H
 1

	)

38 
	#IAC
 255

	)

39 
	#DONT
 254

	)

40 
	#DO
 253

	)

41 
	#WONT
 252

	)

42 
	#WILL
 251

	)

43 
	#SB
 250

	)

44 
	#GA
 249

	)

45 
	#EL
 248

	)

46 
	#EC
 247

	)

47 
	#AYT
 246

	)

48 
	#AO
 245

	)

49 
	#IP
 244

	)

50 
	#BREAK
 243

	)

51 
	#DM
 242

	)

52 
	#NOP
 241

	)

53 
	#SE
 240

	)

54 
	#EOR
 239

	)

55 
	#ABORT
 238

	)

56 
	#SUSP
 237

	)

57 
	#xEOF
 236

	)

59 
	#SYNCH
 242

	)

61 #ifde‡
TELCMDS


62 *
	gãlcmds
[] = {

68 *
ãlcmds
[];

71 
	#TELCMD_FIRST
 
xEOF


	)

72 
	#TELCMD_LAST
 
IAC


	)

73 
	#TELCMD_OK
(
x
Ë(()(xË<
TELCMD_LAST
 && \

74 ()(
x
Ë>
TELCMD_FIRST
)

	)

75 
	#TELCMD
(
x
Ë
ãlcmds
[(x)-
TELCMD_FIRST
]

	)

78 
	#TELOPT_BINARY
 0

	)

79 
	#TELOPT_ECHO
 1

	)

80 
	#TELOPT_RCP
 2

	)

81 
	#TELOPT_SGA
 3

	)

82 
	#TELOPT_NAMS
 4

	)

83 
	#TELOPT_STATUS
 5

	)

84 
	#TELOPT_TM
 6

	)

85 
	#TELOPT_RCTE
 7

	)

86 
	#TELOPT_NAOL
 8

	)

87 
	#TELOPT_NAOP
 9

	)

88 
	#TELOPT_NAOCRD
 10

	)

89 
	#TELOPT_NAOHTS
 11

	)

90 
	#TELOPT_NAOHTD
 12

	)

91 
	#TELOPT_NAOFFD
 13

	)

92 
	#TELOPT_NAOVTS
 14

	)

93 
	#TELOPT_NAOVTD
 15

	)

94 
	#TELOPT_NAOLFD
 16

	)

95 
	#TELOPT_XASCII
 17

	)

96 
	#TELOPT_LOGOUT
 18

	)

97 
	#TELOPT_BM
 19

	)

98 
	#TELOPT_DET
 20

	)

99 
	#TELOPT_SUPDUP
 21

	)

100 
	#TELOPT_SUPDUPOUTPUT
 22

	)

101 
	#TELOPT_SNDLOC
 23

	)

102 
	#TELOPT_TTYPE
 24

	)

103 
	#TELOPT_EOR
 25

	)

104 
	#TELOPT_TUID
 26

	)

105 
	#TELOPT_OUTMRK
 27

	)

106 
	#TELOPT_TTYLOC
 28

	)

107 
	#TELOPT_3270REGIME
 29

	)

108 
	#TELOPT_X3PAD
 30

	)

109 
	#TELOPT_NAWS
 31

	)

110 
	#TELOPT_TSPEED
 32

	)

111 
	#TELOPT_LFLOW
 33

	)

112 
	#TELOPT_LINEMODE
 34

	)

113 
	#TELOPT_XDISPLOC
 35

	)

114 
	#TELOPT_OLD_ENVIRON
 36

	)

115 
	#TELOPT_AUTHENTICATION
 37

	)

116 
	#TELOPT_ENCRYPT
 38

	)

117 
	#TELOPT_NEW_ENVIRON
 39

	)

118 
	#TELOPT_EXOPL
 255

	)

121 
	#NTELOPTS
 (1+
TELOPT_NEW_ENVIRON
)

	)

122 #ifde‡
TELOPTS


123 *
	gãl›ts
[
NTELOPTS
+1] = {

136 
	#TELOPT_FIRST
 
TELOPT_BINARY


	)

137 
	#TELOPT_LAST
 
TELOPT_NEW_ENVIRON


	)

138 
	#TELOPT_OK
(
x
Ë(()(xË<
TELOPT_LAST
)

	)

139 
	#TELOPT
(
x
Ë
ãl›ts
[(x)-
TELOPT_FIRST
]

	)

143 
	#TELQUAL_IS
 0

	)

144 
	#TELQUAL_SEND
 1

	)

145 
	#TELQUAL_INFO
 2

	)

146 
	#TELQUAL_REPLY
 2

	)

147 
	#TELQUAL_NAME
 3

	)

149 
	#LFLOW_OFF
 0

	)

150 
	#LFLOW_ON
 1

	)

151 
	#LFLOW_RESTART_ANY
 2

	)

152 
	#LFLOW_RESTART_XON
 3

	)

158 
	#LM_MODE
 1

	)

159 
	#LM_FORWARDMASK
 2

	)

160 
	#LM_SLC
 3

	)

162 
	#MODE_EDIT
 0x01

	)

163 
	#MODE_TRAPSIG
 0x02

	)

164 
	#MODE_ACK
 0x04

	)

165 
	#MODE_SOFT_TAB
 0x08

	)

166 
	#MODE_LIT_ECHO
 0x10

	)

168 
	#MODE_MASK
 0x1f

	)

171 
	#MODE_FLOW
 0x0100

	)

172 
	#MODE_ECHO
 0x0200

	)

173 
	#MODE_INBIN
 0x0400

	)

174 
	#MODE_OUTBIN
 0x0800

	)

175 
	#MODE_FORCE
 0x1000

	)

177 
	#SLC_SYNCH
 1

	)

178 
	#SLC_BRK
 2

	)

179 
	#SLC_IP
 3

	)

180 
	#SLC_AO
 4

	)

181 
	#SLC_AYT
 5

	)

182 
	#SLC_EOR
 6

	)

183 
	#SLC_ABORT
 7

	)

184 
	#SLC_EOF
 8

	)

185 
	#SLC_SUSP
 9

	)

186 
	#SLC_EC
 10

	)

187 
	#SLC_EL
 11

	)

188 
	#SLC_EW
 12

	)

189 
	#SLC_RP
 13

	)

190 
	#SLC_LNEXT
 14

	)

191 
	#SLC_XON
 15

	)

192 
	#SLC_XOFF
 16

	)

193 
	#SLC_FORW1
 17

	)

194 
	#SLC_FORW2
 18

	)

196 
	#NSLC
 18

	)

202 
	#SLC_NAMELIST
 "0", "SYNCH", "BRK", "IP", "AO", "AYT", "EOR", \

204 "LNEXT", "XON", "XOFF", "FORW1", "FORW2", 0,

	)

205 #ifdef 
SLC_NAMES


206 *
	g¶c_«mes
[] = {

207 
SLC_NAMELIST


210 *
¶c_«mes
[];

211 
	#SLC_NAMES
 
SLC_NAMELIST


	)

214 
	#SLC_NAME_OK
(
x
Ë(()(xË<
NSLC
)

	)

215 
	#SLC_NAME
(
x
Ë
¶c_«mes
[x]

	)

217 
	#SLC_NOSUPPORT
 0

	)

218 
	#SLC_CANTCHANGE
 1

	)

219 
	#SLC_VARIABLE
 2

	)

220 
	#SLC_DEFAULT
 3

	)

221 
	#SLC_LEVELBITS
 0x03

	)

223 
	#SLC_FUNC
 0

	)

224 
	#SLC_FLAGS
 1

	)

225 
	#SLC_VALUE
 2

	)

227 
	#SLC_ACK
 0x80

	)

228 
	#SLC_FLUSHIN
 0x40

	)

229 
	#SLC_FLUSHOUT
 0x20

	)

231 
	#OLD_ENV_VAR
 1

	)

232 
	#OLD_ENV_VALUE
 0

	)

233 
	#NEW_ENV_VAR
 0

	)

234 
	#NEW_ENV_VALUE
 1

	)

235 
	#ENV_ESC
 2

	)

236 
	#ENV_USERVAR
 3

	)

245 
	#AUTH_WHO_CLIENT
 0

	)

246 
	#AUTH_WHO_SERVER
 1

	)

247 
	#AUTH_WHO_MASK
 1

	)

252 
	#AUTH_HOW_ONE_WAY
 0

	)

253 
	#AUTH_HOW_MUTUAL
 2

	)

254 
	#AUTH_HOW_MASK
 2

	)

256 
	#AUTHTYPE_NULL
 0

	)

257 
	#AUTHTYPE_KERBEROS_V4
 1

	)

258 
	#AUTHTYPE_KERBEROS_V5
 2

	)

259 
	#AUTHTYPE_SPX
 3

	)

260 
	#AUTHTYPE_MINK
 4

	)

261 
	#AUTHTYPE_CNT
 5

	)

263 
	#AUTHTYPE_TEST
 99

	)

265 #ifdef 
AUTH_NAMES


266 *
	gauthty≥_«mes
[] = {

270 *
authty≥_«mes
[];

273 
	#AUTHTYPE_NAME_OK
(
x
Ë(()(xË< 
AUTHTYPE_CNT
)

	)

274 
	#AUTHTYPE_NAME
(
x
Ë
authty≥_«mes
[x]

	)

279 
	#ENCRYPT_IS
 0

	)

280 
	#ENCRYPT_SUPPORT
 1

	)

281 
	#ENCRYPT_REPLY
 2

	)

282 
	#ENCRYPT_START
 3

	)

283 
	#ENCRYPT_END
 4

	)

284 
	#ENCRYPT_REQSTART
 5

	)

285 
	#ENCRYPT_REQEND
 6

	)

286 
	#ENCRYPT_ENC_KEYID
 7

	)

287 
	#ENCRYPT_DEC_KEYID
 8

	)

288 
	#ENCRYPT_CNT
 9

	)

290 
	#ENCTYPE_ANY
 0

	)

291 
	#ENCTYPE_DES_CFB64
 1

	)

292 
	#ENCTYPE_DES_OFB64
 2

	)

293 
	#ENCTYPE_CNT
 3

	)

295 #ifdef 
ENCRYPT_NAMES


296 *
	gí¸y±_«mes
[] = {

301 *
	gí˘y≥_«mes
[] = {

305 *
í¸y±_«mes
[];

306 *
í˘y≥_«mes
[];

310 
	#ENCRYPT_NAME_OK
(
x
Ë(()(xË< 
ENCRYPT_CNT
)

	)

311 
	#ENCRYPT_NAME
(
x
Ë
í¸y±_«mes
[x]

	)

313 
	#ENCTYPE_NAME_OK
(
x
Ë(()(xË< 
ENCTYPE_CNT
)

	)

314 
	#ENCTYPE_NAME
(
x
Ë
í˘y≥_«mes
[x]

	)

	@/usr/include/ctype.h

24 #i‚def 
_CTYPE_H


25 
	#_CTYPE_H
 1

	)

27 
	~<„©uªs.h
>

28 
	~<bôs/ty≥s.h
>

30 
	g__BEGIN_DECLS


32 #i‚de‡
_ISbô


41 
	~<ídün.h
>

42 #i‡
__BYTE_ORDER
 =
__BIG_ENDIAN


43 
	#_ISbô
(
bô
Ë(1 << (bô))

	)

45 
	#_ISbô
(
bô
Ë((bôË< 8 ? ((1 << (bô)Ë<< 8Ë: ((1 << (bô)Ë>> 8))

	)

50 
	m_ISuµî
 = 
_ISbô
 (0),

51 
	m_ISlowî
 = 
_ISbô
 (1),

52 
	m_ISÆpha
 = 
_ISbô
 (2),

53 
	m_ISdigô
 = 
_ISbô
 (3),

54 
	m_ISxdigô
 = 
_ISbô
 (4),

55 
	m_IS•a˚
 = 
_ISbô
 (5),

56 
	m_IS¥öt
 = 
_ISbô
 (6),

57 
	m_ISgøph
 = 
_ISbô
 (7),

58 
	m_ISbœnk
 = 
_ISbô
 (8),

59 
	m_IS˙ål
 = 
_ISbô
 (9),

60 
	m_ISpun˘
 = 
_ISbô
 (10),

61 
	m_ISÆnum
 = 
_ISbô
 (11)

81 
__c⁄°
 **
	$__˘y≥_b_loc
 ()

82 
__THROW
 
	`__©åibuã__
 ((
__c⁄°
));

83 
__c⁄°
 
__öt32_t
 **
	$__˘y≥_tﬁowî_loc
 ()

84 
__THROW
 
	`__©åibuã__
 ((
__c⁄°
));

85 
__c⁄°
 
__öt32_t
 **
	$__˘y≥_touµî_loc
 ()

86 
__THROW
 
	`__©åibuã__
 ((
__c⁄°
));

89 #i‚de‡
__˝lu•lus


90 
	#__is˘y≥
(
c
, 
ty≥
) \

91 ((*
	`__˘y≥_b_loc
 ())[(Ë(
c
)] & (Ë
ty≥
)

	)

92 #ñi‡
deföed
 
__USE_EXTERN_INLINES


93 
	#__is˘y≥_f
(
ty≥
) \

94 
__exã∫_ölöe
 \

95 
is
##
	`ty≥
 (
__c
Ë
__THROW
 \

97  (*
	`__˘y≥_b_loc
 ())[(Ë(
__c
)] & (Ë
_IS
##
ty≥
; \

98 
	}

	)
}

101 
	#__ißscii
(
c
Ë(((cË& ~0x7fË=0Ë

	)

102 
	#__tﬂscii
(
c
Ë((cË& 0x7fË

	)

104 
	#__ex˘y≥
(
«me
Ë
	`«me
 (Ë
__THROW


	)

106 
__BEGIN_NAMESPACE_STD


112 
__ex˘y≥
 (
iß um
);

113 
__ex˘y≥
 (
ißÕha
);

114 
__ex˘y≥
 (
is˙ål
);

115 
__ex˘y≥
 (
isdigô
);

116 
__ex˘y≥
 (
i¶owî
);

117 
__ex˘y≥
 (
isgøph
);

118 
__ex˘y≥
 (
i•röt
);

119 
__ex˘y≥
 (
i•un˘
);

120 
__ex˘y≥
 (
is•a˚
);

121 
__ex˘y≥
 (
isuµî
);

122 
__ex˘y≥
 (
isxdigô
);

126 
	$tﬁowî
 (
__c
Ë
__THROW
;

129 
	$touµî
 (
__c
Ë
__THROW
;

131 
__END_NAMESPACE_STD


135 #ifdef 
__USE_ISOC99


136 
__BEGIN_NAMESPACE_C99


138 
	`__ex˘y≥
 (
isbœnk
);

140 
__END_NAMESPACE_C99


143 #ifde‡
__USE_GNU


145 
	$is˘y≥
 (
__c
, 
__mask
Ë
__THROW
;

148 #i‡
deföed
 
__USE_SVID
 || deföed 
__USE_MISC
 || deföed 
__USE_XOPEN


152 
	$ißscii
 (
__c
Ë
__THROW
;

156 
	$tﬂscii
 (
__c
Ë
__THROW
;

160 
	`__ex˘y≥
 (
_touµî
);

161 
	`__ex˘y≥
 (
_tﬁowî
);

165 
	#__tobody
(
c
, 
f
, 
a
, 
¨gs
) \

166 (
__exãnsi⁄__
 \

167 ({ 
__ªs
; \

168 i‡( (
c
) > 1) \

170 i‡(
	`__buûtö_c⁄°™t_p
 (
c
)) \

172 
__c
 = (
c
); \

173 
__ªs
 = 
__c
 < -128 || __¯> 255 ? __¯: (
a
)[__c]; \

176 
__ªs
 = 
f
 
¨gs
; \

179 
__ªs
 = (
a
)[(Ë(
c
)]; \

180 
__ªs
; 
	}
}))

	)

182 #i‡!
deföed
 
__NO_CTYPE


183 #ifde‡
__is˘y≥_f


184 
	$__is˘y≥_f
 (
Ænum
)

185 
	$__is˘y≥_f
 (
Æpha
)

186 
	$__is˘y≥_f
 (
˙ål
)

187 
	$__is˘y≥_f
 (
digô
)

188 
	$__is˘y≥_f
 (
lowî
)

189 
	$__is˘y≥_f
 (
gøph
)

190 
	$__is˘y≥_f
 (
¥öt
)

191 
	$__is˘y≥_f
 (
pun˘
)

192 
	$__is˘y≥_f
 (
•a˚
)

193 
	$__is˘y≥_f
 (
uµî
)

194 
	$__is˘y≥_f
 (
xdigô
)

195 #ifde‡
__USE_ISOC99


196 
	$__is˘y≥_f
 (
bœnk
)

198 #ñi‡
deföed
 
__is˘y≥


199 
	#iß um
(
c
Ë
	`__is˘y≥
((c), 
_ISÆnum
)

	)

200 
	#ißÕha
(
c
Ë
	`__is˘y≥
((c), 
_ISÆpha
)

	)

201 
	#is˙ål
(
c
Ë
	`__is˘y≥
((c), 
_IS˙ål
)

	)

202 
	#isdigô
(
c
Ë
	`__is˘y≥
((c), 
_ISdigô
)

	)

203 
	#i¶owî
(
c
Ë
	`__is˘y≥
((c), 
_ISlowî
)

	)

204 
	#isgøph
(
c
Ë
	`__is˘y≥
((c), 
_ISgøph
)

	)

205 
	#i•röt
(
c
Ë
	`__is˘y≥
((c), 
_IS¥öt
)

	)

206 
	#i•un˘
(
c
Ë
	`__is˘y≥
((c), 
_ISpun˘
)

	)

207 
	#is•a˚
(
c
Ë
	`__is˘y≥
((c), 
_IS•a˚
)

	)

208 
	#isuµî
(
c
Ë
	`__is˘y≥
((c), 
_ISuµî
)

	)

209 
	#isxdigô
(
c
Ë
	`__is˘y≥
((c), 
_ISxdigô
)

	)

210 #ifde‡
__USE_ISOC99


211 
	#isbœnk
(
c
Ë
	`__is˘y≥
((c), 
_ISbœnk
)

	)

215 #ifde‡
__USE_EXTERN_INLINES


216 
__exã∫_ölöe
 

217 
	`__NTH
 (
	$tﬁowî
 (
__c
))

219  
__c
 >-128 && __¯< 256 ? (*
	`__˘y≥_tﬁowî_loc
 ())[__c] : __c;

220 
	}
}

222 
__exã∫_ölöe
 

223 
__NTH
 (
	$touµî
 (
__c
))

225  
__c
 >-128 && __¯< 256 ? (*
	`__˘y≥_touµî_loc
 ())[__c] : __c;

226 
	}
}

229 #i‡
__GNUC__
 >2 && 
deföed
 
__OPTIMIZE__
 && !deföed 
__˝lu•lus


230 
	#tﬁowî
(
c
Ë
	`__tobody
 (c, 
tﬁowî
, *
	`__˘y≥_tﬁowî_loc
 (), (c))

	)

231 
	#touµî
(
c
Ë
	`__tobody
 (c, 
touµî
, *
	`__˘y≥_touµî_loc
 (), (c))

	)

234 #i‡
deföed
 
__USE_SVID
 || deföed 
__USE_MISC
 || deföed 
__USE_XOPEN


235 
	#ißscii
(
c
Ë
	`__ißscii
 (c)

	)

236 
	#tﬂscii
(
c
Ë
	`__tﬂscii
 (c)

	)

238 
	#_tﬁowî
(
c
Ë((Ë(*
	`__˘y≥_tﬁowî_loc
 ())[(Ë(c)])

	)

239 
	#_touµî
(
c
Ë((Ë(*
	`__˘y≥_touµî_loc
 ())[(Ë(c)])

	)

245 #ifde‡
__USE_XOPEN2K8


259 
	~<xloˇÀ.h
>

263 
	#__is˘y≥_l
(
c
, 
ty≥
, 
loˇÀ
) \

264 ((
loˇÀ
)->
__˘y≥_b
[(Ë(
c
)] & (Ë
ty≥
)

	)

266 
	#__ex˘y≥_l
(
«me
) \

267 
	`«me
 (, 
__loˇÀ_t
Ë
__THROW


	)

273 
__ex˘y≥_l
 (
iß um_l
);

274 
__ex˘y≥_l
 (
ißÕha_l
);

275 
__ex˘y≥_l
 (
is˙ål_l
);

276 
__ex˘y≥_l
 (
isdigô_l
);

277 
__ex˘y≥_l
 (
i¶owî_l
);

278 
__ex˘y≥_l
 (
isgøph_l
);

279 
__ex˘y≥_l
 (
i•röt_l
);

280 
__ex˘y≥_l
 (
i•un˘_l
);

281 
__ex˘y≥_l
 (
is•a˚_l
);

282 
__ex˘y≥_l
 (
isuµî_l
);

283 
__ex˘y≥_l
 (
isxdigô_l
);

285 
__ex˘y≥_l
 (
isbœnk_l
);

289 
	$__tﬁowî_l
 (
__c
, 
__loˇÀ_t
 
__l
Ë
__THROW
;

290 
	$tﬁowî_l
 (
__c
, 
__loˇÀ_t
 
__l
Ë
__THROW
;

293 
	$__touµî_l
 (
__c
, 
__loˇÀ_t
 
__l
Ë
__THROW
;

294 
	$touµî_l
 (
__c
, 
__loˇÀ_t
 
__l
Ë
__THROW
;

296 #i‡
__GNUC__
 >2 && 
deföed
 
__OPTIMIZE__
 && !deföed 
__˝lu•lus


297 
	#__tﬁowî_l
(
c
, 
loˇÀ
) \

298 
	`__tobody
 (
c
, 
__tﬁowî_l
, (
loˇÀ
)->
__˘y≥_tﬁowî
, (c,ÜoˇÀ))

	)

299 
	#__touµî_l
(
c
, 
loˇÀ
) \

300 
	`__tobody
 (
c
, 
__touµî_l
, (
loˇÀ
)->
__˘y≥_touµî
, (c,ÜoˇÀ))

	)

301 
	#tﬁowî_l
(
c
, 
loˇÀ
Ë
	`__tﬁowî_l
 ((c), (loˇÀ))

	)

302 
	#touµî_l
(
c
, 
loˇÀ
Ë
	`__touµî_l
 ((c), (loˇÀ))

	)

306 #i‚de‡
__NO_CTYPE


307 
	#__iß um_l
(
c
,
l
Ë
	`__is˘y≥_l
((c), 
_ISÆnum
, (l))

	)

308 
	#__ißÕha_l
(
c
,
l
Ë
	`__is˘y≥_l
((c), 
_ISÆpha
, (l))

	)

309 
	#__is˙ål_l
(
c
,
l
Ë
	`__is˘y≥_l
((c), 
_IS˙ål
, (l))

	)

310 
	#__isdigô_l
(
c
,
l
Ë
	`__is˘y≥_l
((c), 
_ISdigô
, (l))

	)

311 
	#__i¶owî_l
(
c
,
l
Ë
	`__is˘y≥_l
((c), 
_ISlowî
, (l))

	)

312 
	#__isgøph_l
(
c
,
l
Ë
	`__is˘y≥_l
((c), 
_ISgøph
, (l))

	)

313 
	#__i•röt_l
(
c
,
l
Ë
	`__is˘y≥_l
((c), 
_IS¥öt
, (l))

	)

314 
	#__i•un˘_l
(
c
,
l
Ë
	`__is˘y≥_l
((c), 
_ISpun˘
, (l))

	)

315 
	#__is•a˚_l
(
c
,
l
Ë
	`__is˘y≥_l
((c), 
_IS•a˚
, (l))

	)

316 
	#__isuµî_l
(
c
,
l
Ë
	`__is˘y≥_l
((c), 
_ISuµî
, (l))

	)

317 
	#__isxdigô_l
(
c
,
l
Ë
	`__is˘y≥_l
((c), 
_ISxdigô
, (l))

	)

319 
	#__isbœnk_l
(
c
,
l
Ë
	`__is˘y≥_l
((c), 
_ISbœnk
, (l))

	)

321 #i‡
deföed
 
__USE_SVID
 || deföed 
__USE_MISC


322 
	#__ißscii_l
(
c
,
l
Ë(÷), 
	`__ißscii
 (c))

	)

323 
	#__tﬂscii_l
(
c
,
l
Ë(÷), 
	`__tﬂscii
 (c))

	)

326 
	#iß um_l
(
c
,
l
Ë
	`__iß um_l
 ((c), (l))

	)

327 
	#ißÕha_l
(
c
,
l
Ë
	`__ißÕha_l
 ((c), (l))

	)

328 
	#is˙ål_l
(
c
,
l
Ë
	`__is˙ål_l
 ((c), (l))

	)

329 
	#isdigô_l
(
c
,
l
Ë
	`__isdigô_l
 ((c), (l))

	)

330 
	#i¶owî_l
(
c
,
l
Ë
	`__i¶owî_l
 ((c), (l))

	)

331 
	#isgøph_l
(
c
,
l
Ë
	`__isgøph_l
 ((c), (l))

	)

332 
	#i•röt_l
(
c
,
l
Ë
	`__i•röt_l
 ((c), (l))

	)

333 
	#i•un˘_l
(
c
,
l
Ë
	`__i•un˘_l
 ((c), (l))

	)

334 
	#is•a˚_l
(
c
,
l
Ë
	`__is•a˚_l
 ((c), (l))

	)

335 
	#isuµî_l
(
c
,
l
Ë
	`__isuµî_l
 ((c), (l))

	)

336 
	#isxdigô_l
(
c
,
l
Ë
	`__isxdigô_l
 ((c), (l))

	)

338 
	#isbœnk_l
(
c
,
l
Ë
	`__isbœnk_l
 ((c), (l))

	)

340 #i‡
deföed
 
__USE_SVID
 || deföed 
__USE_MISC


341 
	#ißscii_l
(
c
,
l
Ë
	`__ißscii_l
 ((c), (l))

	)

342 
	#tﬂscii_l
(
c
,
l
Ë
	`__tﬂscii_l
 ((c), (l))

	)

349 
__END_DECLS


	@/usr/include/errno.h

23 #i‚def 
_ERRNO_H


27 #i‚def 
__√ed_Em©h


28 
	#_ERRNO_H
 1

	)

29 
	~<„©uªs.h
>

32 
	g__BEGIN_DECLS


36 
	~<bôs/î∫o.h
>

37 #unde‡
__√ed_Em©h


39 #ifdef 
_ERRNO_H


46 #i‚def 
î∫o


47 
î∫o
;

50 #ifde‡
__USE_GNU


55 *
¥ogøm_övoˇti⁄_«me
, *
¥ogøm_övoˇti⁄_sh‹t_«me
;

59 
	g__END_DECLS


67 #i‡
deföed
 
__USE_GNU
 || deföed 
__√ed_îr‹_t


68 #i‚de‡
__îr‹_t_deföed


69 
	tîr‹_t
;

70 
	#__îr‹_t_deföed
 1

	)

72 #unde‡
__√ed_îr‹_t


	@/usr/include/execinfo.h

19 #i‚de‡
_EXECINFO_H


20 
	#_EXECINFO_H
 1

	)

22 
	~<„©uªs.h
>

24 
__BEGIN_DECLS


28 
	$backåa˚
 (**
__¨øy
, 
__size
Ë
	`__n⁄nuŒ
 ((1));

33 **
	$backåa˚_symbﬁs
 (*
__c⁄°
 *
__¨øy
, 
__size
)

34 
__THROW
 
	`__n⁄nuŒ
 ((1));

39 
	$backåa˚_symbﬁs_fd
 (*
__c⁄°
 *
__¨øy
, 
__size
, 
__fd
)

40 
__THROW
 
	`__n⁄nuŒ
 ((1));

42 
__END_DECLS


	@/usr/include/fcntl.h

24 #i‚def 
_FCNTL_H


25 
	#_FCNTL_H
 1

	)

27 
	~<„©uªs.h
>

30 
	g__BEGIN_DECLS


34 
	~<bôs/f˙é.h
>

37 #i‡
deföed
 
__USE_XOPEN
 || deföed 
__USE_XOPEN2K8


38 
	~<bôs/ty≥s.h
>

39 
	#__√ed_time•ec


	)

40 
	~<time.h
>

41 
	~<bôs/°©.h
>

43 
	#S_IFMT
 
__S_IFMT


	)

44 
	#S_IFDIR
 
__S_IFDIR


	)

45 
	#S_IFCHR
 
__S_IFCHR


	)

46 
	#S_IFBLK
 
__S_IFBLK


	)

47 
	#S_IFREG
 
__S_IFREG


	)

48 #ifde‡
__S_IFIFO


49 
	#S_IFIFO
 
__S_IFIFO


	)

51 #ifde‡
__S_IFLNK


52 
	#S_IFLNK
 
__S_IFLNK


	)

54 #i‡(
deföed
 
__USE_UNIX98
 || deföed 
__USE_XOPEN2K8
Ë&& deföed 
__S_IFSOCK


55 
	#S_IFSOCK
 
__S_IFSOCK


	)

60 
	#S_ISUID
 
__S_ISUID


	)

61 
	#S_ISGID
 
__S_ISGID


	)

63 #i‡
deföed
 
__USE_BSD
 || deföed 
__USE_MISC
 || deföed 
__USE_XOPEN


65 
	#S_ISVTX
 
__S_ISVTX


	)

68 
	#S_IRUSR
 
__S_IREAD


	)

69 
	#S_IWUSR
 
__S_IWRITE


	)

70 
	#S_IXUSR
 
__S_IEXEC


	)

72 
	#S_IRWXU
 (
__S_IREAD
|
__S_IWRITE
|
__S_IEXEC
)

	)

74 
	#S_IRGRP
 (
S_IRUSR
 >> 3Ë

	)

75 
	#S_IWGRP
 (
S_IWUSR
 >> 3Ë

	)

76 
	#S_IXGRP
 (
S_IXUSR
 >> 3Ë

	)

78 
	#S_IRWXG
 (
S_IRWXU
 >> 3)

	)

80 
	#S_IROTH
 (
S_IRGRP
 >> 3Ë

	)

81 
	#S_IWOTH
 (
S_IWGRP
 >> 3Ë

	)

82 
	#S_IXOTH
 (
S_IXGRP
 >> 3Ë

	)

84 
	#S_IRWXO
 (
S_IRWXG
 >> 3)

	)

87 #ifdef 
__USE_MISC


88 #i‚de‡
R_OK


91 
	#R_OK
 4

	)

92 
	#W_OK
 2

	)

93 
	#X_OK
 1

	)

94 
	#F_OK
 0

	)

99 #i‡
deföed
 
__USE_XOPEN
 || deföed 
__USE_XOPEN2K8


100 
	#SEEK_SET
 0

	)

101 
	#SEEK_CUR
 1

	)

102 
	#SEEK_END
 2

	)

110 
f˙é
 (
__fd
, 
__cmd
, ...);

118 #i‚de‡
__USE_FILE_OFFSET64


119 
	$›í
 (
__c⁄°
 *
__fûe
, 
__oÊag
, ...Ë
	`__n⁄nuŒ
 ((1));

121 #ifde‡
__REDIRECT


122 
	`__REDIRECT
 (
›í
, (
__c⁄°
 *
__fûe
, 
__oÊag
, ...), 
›í64
)

123 
	`__n⁄nuŒ
 ((1));

125 
	#›í
 
›í64


	)

128 #ifde‡
__USE_LARGEFILE64


129 
	$›í64
 (
__c⁄°
 *
__fûe
, 
__oÊag
, ...Ë
	`__n⁄nuŒ
 ((1));

132 #ifde‡
__USE_ATFILE


142 #i‚de‡
__USE_FILE_OFFSET64


143 
	$›í©
 (
__fd
, 
__c⁄°
 *
__fûe
, 
__oÊag
, ...)

144 
	`__n⁄nuŒ
 ((2));

146 #ifde‡
__REDIRECT


147 
	`__REDIRECT
 (
›í©
, (
__fd
, 
__c⁄°
 *
__fûe
, 
__oÊag
,

148 ...), 
›í©64
Ë
	`__n⁄nuŒ
 ((2));

150 
	#›í©
 
›í©64


	)

153 #ifde‡
__USE_LARGEFILE64


154 
	$›í©64
 (
__fd
, 
__c⁄°
 *
__fûe
, 
__oÊag
, ...)

155 
	`__n⁄nuŒ
 ((2));

164 #i‚de‡
__USE_FILE_OFFSET64


165 
	$¸ót
 (
__c⁄°
 *
__fûe
, 
__mode_t
 
__mode
Ë
	`__n⁄nuŒ
 ((1));

167 #ifde‡
__REDIRECT


168 
	`__REDIRECT
 (
¸ót
, (
__c⁄°
 *
__fûe
, 
__mode_t
 
__mode
),

169 
¸ót64
Ë
	`__n⁄nuŒ
 ((1));

171 
	#¸ót
 
¸ót64


	)

174 #ifde‡
__USE_LARGEFILE64


175 
	$¸ót64
 (
__c⁄°
 *
__fûe
, 
__mode_t
 
__mode
Ë
	`__n⁄nuŒ
 ((1));

178 #i‡!
deföed
 
F_LOCK
 && (deföed 
__USE_MISC
 || (deföed 
__USE_XOPEN_EXTENDED
 \

179 && !
deföed
 
__USE_POSIX
))

188 
	#F_ULOCK
 0

	)

189 
	#F_LOCK
 1

	)

190 
	#F_TLOCK
 2

	)

191 
	#F_TEST
 3

	)

193 #i‚de‡
__USE_FILE_OFFSET64


194 
	`lockf
 (
__fd
, 
__cmd
, 
__off_t
 
__Àn
);

196 #ifde‡
__REDIRECT


197 
	`__REDIRECT
 (
lockf
, (
__fd
, 
__cmd
, 
__off64_t
 
__Àn
), 
lockf64
);

199 
	#lockf
 
lockf64


	)

202 #ifde‡
__USE_LARGEFILE64


203 
	`lockf64
 (
__fd
, 
__cmd
, 
__off64_t
 
__Àn
);

207 #ifde‡
__USE_XOPEN2K


210 #i‚de‡
__USE_FILE_OFFSET64


211 
	$posix_Ádvi£
 (
__fd
, 
__off_t
 
__off£t
, __off_à
__Àn
,

212 
__advi£
Ë
__THROW
;

214 #ifde‡
__REDIRECT_NTH


215 
	`__REDIRECT_NTH
 (
posix_Ádvi£
, (
__fd
, 
__off64_t
 
__off£t
,

216 
__off64_t
 
__Àn
, 
__advi£
),

217 
posix_Ádvi£64
);

219 
	#posix_Ádvi£
 
posix_Ádvi£64


	)

222 #ifde‡
__USE_LARGEFILE64


223 
	$posix_Ádvi£64
 (
__fd
, 
__off64_t
 
__off£t
, __off64_à
__Àn
,

224 
__advi£
Ë
__THROW
;

232 #i‚de‡
__USE_FILE_OFFSET64


233 
	`posix_ÁŒoˇã
 (
__fd
, 
__off_t
 
__off£t
, __off_à
__Àn
);

235 #ifde‡
__REDIRECT


236 
	`__REDIRECT
 (
posix_ÁŒoˇã
, (
__fd
, 
__off64_t
 
__off£t
,

237 
__off64_t
 
__Àn
),

238 
posix_ÁŒoˇã64
);

240 
	#posix_ÁŒoˇã
 
posix_ÁŒoˇã64


	)

243 #ifde‡
__USE_LARGEFILE64


244 
	`posix_ÁŒoˇã64
 (
__fd
, 
__off64_t
 
__off£t
, __off64_à
__Àn
);

250 #i‡
__USE_FORTIFY_LEVEL
 > 0 && 
deföed
 
__exã∫_Æways_ölöe
 \

251 && 
deföed
 
__va_¨g_∑ck_Àn


252 
	~<bôs/f˙é2.h
>

255 
__END_DECLS


	@/usr/include/gnu-versions.h

20 #i‚de‡
_GNU_VERSIONS_H


21 
	#_GNU_VERSIONS_H
 1

	)

47 
	#_GNU_OBSTACK_INTERFACE_VERSION
 1

	)

48 
	#_GNU_REGEX_INTERFACE_VERSION
 1

	)

49 
	#_GNU_GLOB_INTERFACE_VERSION
 1

	)

50 
	#_GNU_GETOPT_INTERFACE_VERSION
 2

	)

	@/usr/include/grp.h

24 #i‚def 
_GRP_H


25 
	#_GRP_H
 1

	)

27 
	~<„©uªs.h
>

29 
	g__BEGIN_DECLS


31 
	~<bôs/ty≥s.h
>

33 
	#__√ed_size_t


	)

34 
	~<°ddef.h
>

38 #i‡(
deföed
 
__USE_XOPEN
 || deföed 
__USE_XOPEN2K
Ë&& !deföed 
__gid_t_deföed


39 
__gid_t
 
	tgid_t
;

40 
	#__gid_t_deföed


	)

44 
	sgroup


46 *
	mgr_«me
;

47 *
	mgr_∑sswd
;

48 
__gid_t
 
	mgr_gid
;

49 **
	mgr_mem
;

53 #i‡
deföed
 
__USE_SVID
 || deföed 
__USE_GNU


54 
	#__√ed_FILE


	)

55 
	~<°dio.h
>

59 #i‡
deföed
 
__USE_SVID
 || deföed 
__USE_BSD
 || deföed 
__USE_XOPEN_EXTENDED


64 
£tgª¡
 ();

67 #i‡
deföed
 
__USE_SVID
 || deföed 
__USE_BSD
 || deföed 
__USE_XOPEN_EXTENDED
 \

68 || 
deföed
 
__USE_XOPEN2K8


73 
ídgª¡
 ();

79 
group
 *
gëgª¡
 ();

82 #ifdef 
__USE_SVID


89 
group
 *
fgëgª¡
 (
FILE
 *
__°ªam
);

92 #ifde‡
__USE_GNU


99 
putgª¡
 (
__c⁄°
 
group
 *
__ª°ri˘
 
__p
,

100 
FILE
 *
__ª°ri˘
 
__f
);

107 
group
 *
gëgrgid
 (
__gid_t
 
__gid
);

113 
group
 *
gëg∫am
 (
__c⁄°
 *
__«me
);

115 #i‡
deföed
 
__USE_POSIX
 || deföed 
__USE_MISC


117 #ifde‡
__USE_MISC


120 
	#NSS_BUFLEN_GROUP
 1024

	)

136 #ifde‡
__USE_GNU


137 
gëgª¡_r
 (
group
 *
__ª°ri˘
 
__ªsu…buf
,

138 *
__ª°ri˘
 
__buf„r
, 
size_t
 
__buÊí
,

139 
group
 **
__ª°ri˘
 
__ªsu…
);

146 
gëgrgid_r
 (
__gid_t
 
__gid
, 
group
 *
__ª°ri˘
 
__ªsu…buf
,

147 *
__ª°ri˘
 
__buf„r
, 
size_t
 
__buÊí
,

148 
group
 **
__ª°ri˘
 
__ªsu…
);

154 
gëg∫am_r
 (
__c⁄°
 *
__ª°ri˘
 
__«me
,

155 
group
 *
__ª°ri˘
 
__ªsu…buf
,

156 *
__ª°ri˘
 
__buf„r
, 
size_t
 
__buÊí
,

157 
group
 **
__ª°ri˘
 
__ªsu…
);

159 #ifdef 
__USE_SVID


167 
fgëgª¡_r
 (
FILE
 *
__ª°ri˘
 
__°ªam
,

168 
group
 *
__ª°ri˘
 
__ªsu…buf
,

169 *
__ª°ri˘
 
__buf„r
, 
size_t
 
__buÊí
,

170 
group
 **
__ª°ri˘
 
__ªsu…
);

176 #ifdef 
__USE_BSD


178 
	#__√ed_size_t


	)

179 
	~<°ddef.h
>

182 
	$£tgroups
 (
size_t
 
__n
, 
__c⁄°
 
__gid_t
 *
__groups
Ë
__THROW
;

192 
	`gëgrou∂i°
 (
__c⁄°
 *
__u£r
, 
__gid_t
 
__group
,

193 
__gid_t
 *
__groups
, *
__ngroups
);

203 
	`öôgroups
 (
__c⁄°
 *
__u£r
, 
__gid_t
 
__group
);

207 
__END_DECLS


	@/usr/include/inttypes.h

23 #i‚de‡
_INTTYPES_H


24 
	#_INTTYPES_H
 1

	)

26 
	~<„©uªs.h
>

28 
	~<°döt.h
>

31 #i‚de‡
____gwch¨_t_deföed


32 #ifde‡
__˝lu•lus


33 
	#__gwch¨_t
 
wch¨_t


	)

34 #ñi‡
deföed
 
__WCHAR_TYPE__


35 
__WCHAR_TYPE__
 
	t__gwch¨_t
;

37 
	#__√ed_wch¨_t


	)

38 
	~<°ddef.h
>

39 
wch¨_t
 
	t__gwch¨_t
;

41 
	#____gwch¨_t_deföed
 1

	)

47 #i‡!
deföed
 
__˝lu•lus
 || deföed 
__STDC_FORMAT_MACROS


49 #i‡
__WORDSIZE
 == 64

50 
	#__PRI64_PREFIX
 "l"

	)

51 
	#__PRIPTR_PREFIX
 "l"

	)

53 
	#__PRI64_PREFIX
 "Œ"

	)

54 
	#__PRIPTR_PREFIX


	)

60 
	#PRId8
 "d"

	)

61 
	#PRId16
 "d"

	)

62 
	#PRId32
 "d"

	)

63 
	#PRId64
 
__PRI64_PREFIX
 "d"

	)

65 
	#PRIdLEAST8
 "d"

	)

66 
	#PRIdLEAST16
 "d"

	)

67 
	#PRIdLEAST32
 "d"

	)

68 
	#PRIdLEAST64
 
__PRI64_PREFIX
 "d"

	)

70 
	#PRIdFAST8
 "d"

	)

71 
	#PRIdFAST16
 
__PRIPTR_PREFIX
 "d"

	)

72 
	#PRIdFAST32
 
__PRIPTR_PREFIX
 "d"

	)

73 
	#PRIdFAST64
 
__PRI64_PREFIX
 "d"

	)

76 
	#PRIi8
 "i"

	)

77 
	#PRIi16
 "i"

	)

78 
	#PRIi32
 "i"

	)

79 
	#PRIi64
 
__PRI64_PREFIX
 "i"

	)

81 
	#PRIiLEAST8
 "i"

	)

82 
	#PRIiLEAST16
 "i"

	)

83 
	#PRIiLEAST32
 "i"

	)

84 
	#PRIiLEAST64
 
__PRI64_PREFIX
 "i"

	)

86 
	#PRIiFAST8
 "i"

	)

87 
	#PRIiFAST16
 
__PRIPTR_PREFIX
 "i"

	)

88 
	#PRIiFAST32
 
__PRIPTR_PREFIX
 "i"

	)

89 
	#PRIiFAST64
 
__PRI64_PREFIX
 "i"

	)

92 
	#PRIo8
 "o"

	)

93 
	#PRIo16
 "o"

	)

94 
	#PRIo32
 "o"

	)

95 
	#PRIo64
 
__PRI64_PREFIX
 "o"

	)

97 
	#PRIoLEAST8
 "o"

	)

98 
	#PRIoLEAST16
 "o"

	)

99 
	#PRIoLEAST32
 "o"

	)

100 
	#PRIoLEAST64
 
__PRI64_PREFIX
 "o"

	)

102 
	#PRIoFAST8
 "o"

	)

103 
	#PRIoFAST16
 
__PRIPTR_PREFIX
 "o"

	)

104 
	#PRIoFAST32
 
__PRIPTR_PREFIX
 "o"

	)

105 
	#PRIoFAST64
 
__PRI64_PREFIX
 "o"

	)

108 
	#PRIu8
 "u"

	)

109 
	#PRIu16
 "u"

	)

110 
	#PRIu32
 "u"

	)

111 
	#PRIu64
 
__PRI64_PREFIX
 "u"

	)

113 
	#PRIuLEAST8
 "u"

	)

114 
	#PRIuLEAST16
 "u"

	)

115 
	#PRIuLEAST32
 "u"

	)

116 
	#PRIuLEAST64
 
__PRI64_PREFIX
 "u"

	)

118 
	#PRIuFAST8
 "u"

	)

119 
	#PRIuFAST16
 
__PRIPTR_PREFIX
 "u"

	)

120 
	#PRIuFAST32
 
__PRIPTR_PREFIX
 "u"

	)

121 
	#PRIuFAST64
 
__PRI64_PREFIX
 "u"

	)

124 
	#PRIx8
 "x"

	)

125 
	#PRIx16
 "x"

	)

126 
	#PRIx32
 "x"

	)

127 
	#PRIx64
 
__PRI64_PREFIX
 "x"

	)

129 
	#PRIxLEAST8
 "x"

	)

130 
	#PRIxLEAST16
 "x"

	)

131 
	#PRIxLEAST32
 "x"

	)

132 
	#PRIxLEAST64
 
__PRI64_PREFIX
 "x"

	)

134 
	#PRIxFAST8
 "x"

	)

135 
	#PRIxFAST16
 
__PRIPTR_PREFIX
 "x"

	)

136 
	#PRIxFAST32
 
__PRIPTR_PREFIX
 "x"

	)

137 
	#PRIxFAST64
 
__PRI64_PREFIX
 "x"

	)

140 
	#PRIX8
 "X"

	)

141 
	#PRIX16
 "X"

	)

142 
	#PRIX32
 "X"

	)

143 
	#PRIX64
 
__PRI64_PREFIX
 "X"

	)

145 
	#PRIXLEAST8
 "X"

	)

146 
	#PRIXLEAST16
 "X"

	)

147 
	#PRIXLEAST32
 "X"

	)

148 
	#PRIXLEAST64
 
__PRI64_PREFIX
 "X"

	)

150 
	#PRIXFAST8
 "X"

	)

151 
	#PRIXFAST16
 
__PRIPTR_PREFIX
 "X"

	)

152 
	#PRIXFAST32
 
__PRIPTR_PREFIX
 "X"

	)

153 
	#PRIXFAST64
 
__PRI64_PREFIX
 "X"

	)

157 
	#PRIdMAX
 
__PRI64_PREFIX
 "d"

	)

158 
	#PRIiMAX
 
__PRI64_PREFIX
 "i"

	)

159 
	#PRIoMAX
 
__PRI64_PREFIX
 "o"

	)

160 
	#PRIuMAX
 
__PRI64_PREFIX
 "u"

	)

161 
	#PRIxMAX
 
__PRI64_PREFIX
 "x"

	)

162 
	#PRIXMAX
 
__PRI64_PREFIX
 "X"

	)

166 
	#PRIdPTR
 
__PRIPTR_PREFIX
 "d"

	)

167 
	#PRIiPTR
 
__PRIPTR_PREFIX
 "i"

	)

168 
	#PRIoPTR
 
__PRIPTR_PREFIX
 "o"

	)

169 
	#PRIuPTR
 
__PRIPTR_PREFIX
 "u"

	)

170 
	#PRIxPTR
 
__PRIPTR_PREFIX
 "x"

	)

171 
	#PRIXPTR
 
__PRIPTR_PREFIX
 "X"

	)

177 
	#SCNd8
 "hhd"

	)

178 
	#SCNd16
 "hd"

	)

179 
	#SCNd32
 "d"

	)

180 
	#SCNd64
 
__PRI64_PREFIX
 "d"

	)

182 
	#SCNdLEAST8
 "hhd"

	)

183 
	#SCNdLEAST16
 "hd"

	)

184 
	#SCNdLEAST32
 "d"

	)

185 
	#SCNdLEAST64
 
__PRI64_PREFIX
 "d"

	)

187 
	#SCNdFAST8
 "hhd"

	)

188 
	#SCNdFAST16
 
__PRIPTR_PREFIX
 "d"

	)

189 
	#SCNdFAST32
 
__PRIPTR_PREFIX
 "d"

	)

190 
	#SCNdFAST64
 
__PRI64_PREFIX
 "d"

	)

193 
	#SCNi8
 "hhi"

	)

194 
	#SCNi16
 "hi"

	)

195 
	#SCNi32
 "i"

	)

196 
	#SCNi64
 
__PRI64_PREFIX
 "i"

	)

198 
	#SCNiLEAST8
 "hhi"

	)

199 
	#SCNiLEAST16
 "hi"

	)

200 
	#SCNiLEAST32
 "i"

	)

201 
	#SCNiLEAST64
 
__PRI64_PREFIX
 "i"

	)

203 
	#SCNiFAST8
 "hhi"

	)

204 
	#SCNiFAST16
 
__PRIPTR_PREFIX
 "i"

	)

205 
	#SCNiFAST32
 
__PRIPTR_PREFIX
 "i"

	)

206 
	#SCNiFAST64
 
__PRI64_PREFIX
 "i"

	)

209 
	#SCNu8
 "hhu"

	)

210 
	#SCNu16
 "hu"

	)

211 
	#SCNu32
 "u"

	)

212 
	#SCNu64
 
__PRI64_PREFIX
 "u"

	)

214 
	#SCNuLEAST8
 "hhu"

	)

215 
	#SCNuLEAST16
 "hu"

	)

216 
	#SCNuLEAST32
 "u"

	)

217 
	#SCNuLEAST64
 
__PRI64_PREFIX
 "u"

	)

219 
	#SCNuFAST8
 "hhu"

	)

220 
	#SCNuFAST16
 
__PRIPTR_PREFIX
 "u"

	)

221 
	#SCNuFAST32
 
__PRIPTR_PREFIX
 "u"

	)

222 
	#SCNuFAST64
 
__PRI64_PREFIX
 "u"

	)

225 
	#SCNo8
 "hho"

	)

226 
	#SCNo16
 "ho"

	)

227 
	#SCNo32
 "o"

	)

228 
	#SCNo64
 
__PRI64_PREFIX
 "o"

	)

230 
	#SCNoLEAST8
 "hho"

	)

231 
	#SCNoLEAST16
 "ho"

	)

232 
	#SCNoLEAST32
 "o"

	)

233 
	#SCNoLEAST64
 
__PRI64_PREFIX
 "o"

	)

235 
	#SCNoFAST8
 "hho"

	)

236 
	#SCNoFAST16
 
__PRIPTR_PREFIX
 "o"

	)

237 
	#SCNoFAST32
 
__PRIPTR_PREFIX
 "o"

	)

238 
	#SCNoFAST64
 
__PRI64_PREFIX
 "o"

	)

241 
	#SCNx8
 "hhx"

	)

242 
	#SCNx16
 "hx"

	)

243 
	#SCNx32
 "x"

	)

244 
	#SCNx64
 
__PRI64_PREFIX
 "x"

	)

246 
	#SCNxLEAST8
 "hhx"

	)

247 
	#SCNxLEAST16
 "hx"

	)

248 
	#SCNxLEAST32
 "x"

	)

249 
	#SCNxLEAST64
 
__PRI64_PREFIX
 "x"

	)

251 
	#SCNxFAST8
 "hhx"

	)

252 
	#SCNxFAST16
 
__PRIPTR_PREFIX
 "x"

	)

253 
	#SCNxFAST32
 
__PRIPTR_PREFIX
 "x"

	)

254 
	#SCNxFAST64
 
__PRI64_PREFIX
 "x"

	)

258 
	#SCNdMAX
 
__PRI64_PREFIX
 "d"

	)

259 
	#SCNiMAX
 
__PRI64_PREFIX
 "i"

	)

260 
	#SCNoMAX
 
__PRI64_PREFIX
 "o"

	)

261 
	#SCNuMAX
 
__PRI64_PREFIX
 "u"

	)

262 
	#SCNxMAX
 
__PRI64_PREFIX
 "x"

	)

265 
	#SCNdPTR
 
__PRIPTR_PREFIX
 "d"

	)

266 
	#SCNiPTR
 
__PRIPTR_PREFIX
 "i"

	)

267 
	#SCNoPTR
 
__PRIPTR_PREFIX
 "o"

	)

268 
	#SCNuPTR
 
__PRIPTR_PREFIX
 "u"

	)

269 
	#SCNxPTR
 
__PRIPTR_PREFIX
 "x"

	)

274 
	g__BEGIN_DECLS


276 #i‡
__WORDSIZE
 == 64

281 
	mquŸ
;

282 
	mªm
;

283 } 
	timaxdiv_t
;

290 
	mquŸ
;

291 
	mªm
;

292 } 
	timaxdiv_t
;

298 
ötmax_t
 
	$imaxabs
 (
ötmax_t
 
__n
Ë
__THROW
 
	`__©åibuã__
 ((
__c⁄°__
));

301 
imaxdiv_t
 
	$imaxdiv
 (
ötmax_t
 
__numî
, i¡max_à
__díom
)

302 
__THROW
 
	`__©åibuã__
 ((
__c⁄°__
));

305 
ötmax_t
 
	$°πoimax
 (
__c⁄°
 *
__ª°ri˘
 
__≈å
,

306 **
__ª°ri˘
 
__íd±r
, 
__ba£
Ë
__THROW
;

309 
uötmax_t
 
	$°πoumax
 (
__c⁄°
 *
__ª°ri˘
 
__≈å
,

310 ** 
__ª°ri˘
 
__íd±r
, 
__ba£
Ë
__THROW
;

313 
ötmax_t
 
	$wc°oimax
 (
__c⁄°
 
__gwch¨_t
 *
__ª°ri˘
 
__≈å
,

314 
__gwch¨_t
 **
__ª°ri˘
 
__íd±r
, 
__ba£
)

315 
__THROW
;

318 
uötmax_t
 
	$wc°oumax
 (
__c⁄°
 
__gwch¨_t
 *
__ª°ri˘
 
__≈å
,

319 
__gwch¨_t
 ** 
__ª°ri˘
 
__íd±r
, 
__ba£
)

320 
__THROW
;

322 #ifde‡
__USE_EXTERN_INLINES


324 #i‡
__WORDSIZE
 == 64

326 
	$__°πﬁ_öã∫Æ
 (
__c⁄°
 *
__ª°ri˘
 
__≈å
,

327 **
__ª°ri˘
 
__íd±r
,

328 
__ba£
, 
__group
)

329 
__THROW
 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

331 
__exã∫_ölöe
 
ötmax_t


332 
	`__NTH
 (
	$°πoimax
 (
__c⁄°
 *
__ª°ri˘
 
≈å
, **__ª°ri˘ 
íd±r
,

333 
ba£
))

335  
	`__°πﬁ_öã∫Æ
 (
≈å
, 
íd±r
, 
ba£
, 0);

336 
	}
}

338 
	$__°πoul_öã∫Æ
 (
__c⁄°
 *

339 
__ª°ri˘
 
__≈å
,

340 ** 
__ª°ri˘
 
__íd±r
,

341 
__ba£
, 
__group
)

342 
__THROW
 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

344 
__exã∫_ölöe
 
uötmax_t


345 
	`__NTH
 (
	$°πoumax
 (
__c⁄°
 *
__ª°ri˘
 
≈å
, **__ª°ri˘ 
íd±r
,

346 
ba£
))

348  
	`__°πoul_öã∫Æ
 (
≈å
, 
íd±r
, 
ba£
, 0);

349 
	}
}

351 
	$__wc°ﬁ_öã∫Æ
 (
__c⁄°
 
__gwch¨_t
 * 
__ª°ri˘
 
__≈å
,

352 
__gwch¨_t
 **
__ª°ri˘
 
__íd±r
,

353 
__ba£
, 
__group
)

354 
__THROW
 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

356 
__exã∫_ölöe
 
ötmax_t


357 
	`__NTH
 (
	$wc°oimax
 (
__c⁄°
 
__gwch¨_t
 *
__ª°ri˘
 
≈å
,

358 
__gwch¨_t
 **
__ª°ri˘
 
íd±r
, 
ba£
))

360  
	`__wc°ﬁ_öã∫Æ
 (
≈å
, 
íd±r
, 
ba£
, 0);

361 
	}
}

363 
	$__wc°oul_öã∫Æ
 (
__c⁄°
 
__gwch¨_t
 *

364 
__ª°ri˘
 
__≈å
,

365 
__gwch¨_t
 **

366 
__ª°ri˘
 
__íd±r
,

367 
__ba£
, 
__group
)

368 
__THROW
 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

370 
__exã∫_ölöe
 
uötmax_t


371 
	`__NTH
 (
	$wc°oumax
 (
__c⁄°
 
__gwch¨_t
 *
__ª°ri˘
 
≈å
,

372 
__gwch¨_t
 **
__ª°ri˘
 
íd±r
, 
ba£
))

374  
	`__wc°oul_öã∫Æ
 (
≈å
, 
íd±r
, 
ba£
, 0);

375 
	}
}

379 
__exãnsi⁄__


380 
	$__°πﬁl_öã∫Æ
 (
__c⁄°
 *
__ª°ri˘
 
__≈å
,

381 **
__ª°ri˘
 
__íd±r
,

382 
__ba£
, 
__group
)

383 
__THROW
 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

385 
__exã∫_ölöe
 
ötmax_t


386 
	`__NTH
 (
	$°πoimax
 (
__c⁄°
 *
__ª°ri˘
 
≈å
, **__ª°ri˘ 
íd±r
,

387 
ba£
))

389  
	`__°πﬁl_öã∫Æ
 (
≈å
, 
íd±r
, 
ba£
, 0);

390 
	}
}

392 
__exãnsi⁄__


393 
	$__°πouŒ_öã∫Æ
 (
__c⁄°
 *

394 
__ª°ri˘
 
__≈å
,

396 
__ª°ri˘
 
__íd±r
,

397 
__ba£
,

398 
__group
)

399 
__THROW
 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

401 
__exã∫_ölöe
 
uötmax_t


402 
	`__NTH
 (
	$°πoumax
 (
__c⁄°
 *
__ª°ri˘
 
≈å
, **__ª°ri˘ 
íd±r
,

403 
ba£
))

405  
	`__°πouŒ_öã∫Æ
 (
≈å
, 
íd±r
, 
ba£
, 0);

406 
	}
}

408 
__exãnsi⁄__


409 
	$__wc°ﬁl_öã∫Æ
 (
__c⁄°
 
__gwch¨_t
 *

410 
__ª°ri˘
 
__≈å
,

411 
__gwch¨_t
 **
__ª°ri˘
 
__íd±r
,

412 
__ba£
, 
__group
)

413 
__THROW
 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

415 
__exã∫_ölöe
 
ötmax_t


416 
	`__NTH
 (
	$wc°oimax
 (
__c⁄°
 
__gwch¨_t
 *
__ª°ri˘
 
≈å
,

417 
__gwch¨_t
 **
__ª°ri˘
 
íd±r
, 
ba£
))

419  
	`__wc°ﬁl_öã∫Æ
 (
≈å
, 
íd±r
, 
ba£
, 0);

420 
	}
}

423 
__exãnsi⁄__


424 
	$__wc°ouŒ_öã∫Æ
 (
__c⁄°
 
__gwch¨_t
 *

425 
__ª°ri˘
 
__≈å
,

426 
__gwch¨_t
 **

427 
__ª°ri˘
 
__íd±r
,

428 
__ba£
,

429 
__group
)

430 
__THROW
 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

432 
__exã∫_ölöe
 
uötmax_t


433 
	`__NTH
 (
	$wc°oumax
 (
__c⁄°
 
__gwch¨_t
 *
__ª°ri˘
 
≈å
,

434 
__gwch¨_t
 **
__ª°ri˘
 
íd±r
, 
ba£
))

436  
	`__wc°ouŒ_öã∫Æ
 (
≈å
, 
íd±r
, 
ba£
, 0);

437 
	}
}

442 
	g__END_DECLS


	@/usr/include/libintl.h

21 #i‚de‡
_LIBINTL_H


22 
	#_LIBINTL_H
 1

	)

24 
	~<„©uªs.h
>

28 
	#__USE_GNU_GETTEXT
 1

	)

32 
	#__GNU_GETTEXT_SUPPORTED_REVISION
(
maj‹
) \

33 ((
maj‹
Ë=0 ? 1 : -1)

	)

35 
__BEGIN_DECLS


40 *
	$gëãxt
 (
__c⁄°
 *
__msgid
)

41 
__THROW
 
	`__©åibuã_f‹m©_¨g__
 (1);

45 *
	$dgëãxt
 (
__c⁄°
 *
__domaö«me
, __c⁄° *
__msgid
)

46 
__THROW
 
	`__©åibuã_f‹m©_¨g__
 (2);

47 *
	$__dgëãxt
 (
__c⁄°
 *
__domaö«me
, __c⁄° *
__msgid
)

48 
__THROW
 
	`__©åibuã_f‹m©_¨g__
 (2);

52 *
	$dcgëãxt
 (
__c⁄°
 *
__domaö«me
,

53 
__c⁄°
 *
__msgid
, 
__ˇãg‹y
)

54 
__THROW
 
	`__©åibuã_f‹m©_¨g__
 (2);

55 *
	$__dcgëãxt
 (
__c⁄°
 *
__domaö«me
,

56 
__c⁄°
 *
__msgid
, 
__ˇãg‹y
)

57 
__THROW
 
	`__©åibuã_f‹m©_¨g__
 (2);

62 *
	$ngëãxt
 (
__c⁄°
 *
__msgid1
, __c⁄° *
__msgid2
,

63 
__n
)

64 
__THROW
 
	$__©åibuã_f‹m©_¨g__
 (1Ë
	`__©åibuã_f‹m©_¨g__
 (2);

68 *
	$dngëãxt
 (
__c⁄°
 *
__domaö«me
, __c⁄° *
__msgid1
,

69 
__c⁄°
 *
__msgid2
, 
__n
)

70 
__THROW
 
	$__©åibuã_f‹m©_¨g__
 (2Ë
	`__©åibuã_f‹m©_¨g__
 (3);

74 *
	$d˙gëãxt
 (
__c⁄°
 *
__domaö«me
, __c⁄° *
__msgid1
,

75 
__c⁄°
 *
__msgid2
, 
__n
,

76 
__ˇãg‹y
)

77 
__THROW
 
	$__©åibuã_f‹m©_¨g__
 (2Ë
	`__©åibuã_f‹m©_¨g__
 (3);

83 *
	$ãxtdomaö
 (
__c⁄°
 *
__domaö«me
Ë
__THROW
;

87 *
	$bödãxtdomaö
 (
__c⁄°
 *
__domaö«me
,

88 
__c⁄°
 *
__dú«me
Ë
__THROW
;

92 *
	$böd_ãxtdomaö_code£t
 (
__c⁄°
 *
__domaö«me
,

93 
__c⁄°
 *
__code£t
Ë
__THROW
;

97 #i‡
deföed
 
__OPTIMIZE__
 && !deföed 
__˝lu•lus


100 
	#__√ed_NULL


	)

101 
	~<°ddef.h
>

104 
	~<loˇÀ.h
>

110 
	#gëãxt
(
msgid
Ë
	`dgëãxt
 (
NULL
, msgid)

	)

112 
	#dgëãxt
(
domaö«me
, 
msgid
) \

113 
	`dcgëãxt
 (
domaö«me
, 
msgid
, 
LC_MESSAGES
)

	)

115 
	#ngëãxt
(
msgid1
, 
msgid2
, 
n
Ë
	`dngëãxt
 (
NULL
, msgid1, msgid2,Ç)

	)

117 
	#dngëãxt
(
domaö«me
, 
msgid1
, 
msgid2
, 
n
) \

118 
	`d˙gëãxt
 (
domaö«me
, 
msgid1
, 
msgid2
, 
n
, 
LC_MESSAGES
)

	)

122 
__END_DECLS


	@/usr/include/limits.h

24 #i‚de‡
_LIBC_LIMITS_H_


25 
	#_LIBC_LIMITS_H_
 1

	)

27 
	~<„©uªs.h
>

33 
	#MB_LEN_MAX
 16

	)

38 #i‡!
deföed
 
__GNUC__
 || __GNUC__ < 2

43 #i‚de‡
_LIMITS_H


44 
	#_LIMITS_H
 1

	)

46 
	~<bôs/w‹dsize.h
>

55 
	#CHAR_BIT
 8

	)

58 
	#SCHAR_MIN
 (-128)

	)

59 
	#SCHAR_MAX
 127

	)

62 
	#UCHAR_MAX
 255

	)

65 #ifde‡
__CHAR_UNSIGNED__


66 
	#CHAR_MIN
 0

	)

67 
	#CHAR_MAX
 
UCHAR_MAX


	)

69 
	#CHAR_MIN
 
SCHAR_MIN


	)

70 
	#CHAR_MAX
 
SCHAR_MAX


	)

74 
	#SHRT_MIN
 (-32768)

	)

75 
	#SHRT_MAX
 32767

	)

78 
	#USHRT_MAX
 65535

	)

81 
	#INT_MIN
 (-
INT_MAX
 - 1)

	)

82 
	#INT_MAX
 2147483647

	)

85 
	#UINT_MAX
 4294967295U

	)

88 #i‡
__WORDSIZE
 == 64

89 
	#LONG_MAX
 9223372036854775807L

	)

91 
	#LONG_MAX
 2147483647L

	)

93 
	#LONG_MIN
 (-
LONG_MAX
 - 1L)

	)

96 #i‡
__WORDSIZE
 == 64

97 
	#ULONG_MAX
 18446744073709551615UL

	)

99 
	#ULONG_MAX
 4294967295UL

	)

102 #ifde‡
__USE_ISOC99


105 
	#LLONG_MAX
 9223372036854775807LL

	)

106 
	#LLONG_MIN
 (-
LLONG_MAX
 - 1LL)

	)

109 
	#ULLONG_MAX
 18446744073709551615ULL

	)

123 #i‡
deföed
 
__GNUC__
 && !deföed 
_GCC_LIMITS_H_


125 #ö˛ude_√xà<
limôs
.
h
>

131 #i‡
deföed
 
__USE_ISOC99
 && deföed 
__GNUC__


132 #i‚de‡
LLONG_MIN


133 
	#LLONG_MIN
 (-
LLONG_MAX
-1)

	)

135 #i‚de‡
LLONG_MAX


136 
	#LLONG_MAX
 
__LONG_LONG_MAX__


	)

138 #i‚de‡
ULLONG_MAX


139 
	#ULLONG_MAX
 (
LLONG_MAX
 * 2ULL + 1)

	)

143 #ifdef 
__USE_POSIX


145 
	~<bôs/posix1_lim.h
>

148 #ifdef 
__USE_POSIX2


149 
	~<bôs/posix2_lim.h
>

152 #ifdef 
__USE_XOPEN


153 
	~<bôs/x›í_lim.h
>

	@/usr/include/linux/filter.h

5 #i‚de‡
__LINUX_FILTER_H__


6 
	#__LINUX_FILTER_H__


	)

9 
	~<löux/ty≥s.h
>

15 
	#BPF_MAJOR_VERSION
 1

	)

16 
	#BPF_MINOR_VERSION
 1

	)

23 
	ssock_fûãr
 {

24 
__u16
 
	mcode
;

25 
__u8
 
	mjt
;

26 
__u8
 
	mjf
;

27 
__u32
 
	mk
;

30 
	ssock_Ârog
 {

31 
	mÀn
;

32 
sock_fûãr
 *
	mfûãr
;

39 
	#BPF_CLASS
(
code
Ë((codeË& 0x07)

	)

40 
	#BPF_LD
 0x00

	)

41 
	#BPF_LDX
 0x01

	)

42 
	#BPF_ST
 0x02

	)

43 
	#BPF_STX
 0x03

	)

44 
	#BPF_ALU
 0x04

	)

45 
	#BPF_JMP
 0x05

	)

46 
	#BPF_RET
 0x06

	)

47 
	#BPF_MISC
 0x07

	)

50 
	#BPF_SIZE
(
code
Ë((codeË& 0x18)

	)

51 
	#BPF_W
 0x00

	)

52 
	#BPF_H
 0x08

	)

53 
	#BPF_B
 0x10

	)

54 
	#BPF_MODE
(
code
Ë((codeË& 0xe0)

	)

55 
	#BPF_IMM
 0x00

	)

56 
	#BPF_ABS
 0x20

	)

57 
	#BPF_IND
 0x40

	)

58 
	#BPF_MEM
 0x60

	)

59 
	#BPF_LEN
 0x80

	)

60 
	#BPF_MSH
 0xa0

	)

63 
	#BPF_OP
(
code
Ë((codeË& 0xf0)

	)

64 
	#BPF_ADD
 0x00

	)

65 
	#BPF_SUB
 0x10

	)

66 
	#BPF_MUL
 0x20

	)

67 
	#BPF_DIV
 0x30

	)

68 
	#BPF_OR
 0x40

	)

69 
	#BPF_AND
 0x50

	)

70 
	#BPF_LSH
 0x60

	)

71 
	#BPF_RSH
 0x70

	)

72 
	#BPF_NEG
 0x80

	)

73 
	#BPF_JA
 0x00

	)

74 
	#BPF_JEQ
 0x10

	)

75 
	#BPF_JGT
 0x20

	)

76 
	#BPF_JGE
 0x30

	)

77 
	#BPF_JSET
 0x40

	)

78 
	#BPF_SRC
(
code
Ë((codeË& 0x08)

	)

79 
	#BPF_K
 0x00

	)

80 
	#BPF_X
 0x08

	)

83 
	#BPF_RVAL
(
code
Ë((codeË& 0x18)

	)

84 
	#BPF_A
 0x10

	)

87 
	#BPF_MISCOP
(
code
Ë((codeË& 0xf8)

	)

88 
	#BPF_TAX
 0x00

	)

89 
	#BPF_TXA
 0x80

	)

91 #i‚de‡
BPF_MAXINSNS


92 
	#BPF_MAXINSNS
 4096

	)

98 #i‚de‡
BPF_STMT


99 
	#BPF_STMT
(
code
, 
k
Ë{ ()(code), 0, 0, k }

	)

101 #i‚de‡
BPF_JUMP


102 
	#BPF_JUMP
(
code
, 
k
, 
jt
, 
jf
Ë{ ()(code), jt, jf, k }

	)

108 
	#BPF_MEMWORDS
 16

	)

115 
	#SKF_AD_OFF
 (-0x1000)

	)

116 
	#SKF_AD_PROTOCOL
 0

	)

117 
	#SKF_AD_PKTTYPE
 4

	)

118 
	#SKF_AD_IFINDEX
 8

	)

119 
	#SKF_AD_NLATTR
 12

	)

120 
	#SKF_AD_NLATTR_NEST
 16

	)

121 
	#SKF_AD_MARK
 20

	)

122 
	#SKF_AD_QUEUE
 24

	)

123 
	#SKF_AD_HATYPE
 28

	)

124 
	#SKF_AD_RXHASH
 32

	)

125 
	#SKF_AD_CPU
 36

	)

126 
	#SKF_AD_MAX
 40

	)

127 
	#SKF_NET_OFF
 (-0x100000)

	)

128 
	#SKF_LL_OFF
 (-0x200000)

	)

	@/usr/include/linux/netlink.h

1 #i‚de‡
__LINUX_NETLINK_H


2 
	#__LINUX_NETLINK_H


	)

4 
	~<löux/sockë.h
>

5 
	~<löux/ty≥s.h
>

7 
	#NETLINK_ROUTE
 0

	)

8 
	#NETLINK_UNUSED
 1

	)

9 
	#NETLINK_USERSOCK
 2

	)

10 
	#NETLINK_FIREWALL
 3

	)

11 
	#NETLINK_INET_DIAG
 4

	)

12 
	#NETLINK_NFLOG
 5

	)

13 
	#NETLINK_XFRM
 6

	)

14 
	#NETLINK_SELINUX
 7

	)

15 
	#NETLINK_ISCSI
 8

	)

16 
	#NETLINK_AUDIT
 9

	)

17 
	#NETLINK_FIB_LOOKUP
 10

	)

18 
	#NETLINK_CONNECTOR
 11

	)

19 
	#NETLINK_NETFILTER
 12

	)

20 
	#NETLINK_IP6_FW
 13

	)

21 
	#NETLINK_DNRTMSG
 14

	)

22 
	#NETLINK_KOBJECT_UEVENT
 15

	)

23 
	#NETLINK_GENERIC
 16

	)

25 
	#NETLINK_SCSITRANSPORT
 18

	)

26 
	#NETLINK_ECRYPTFS
 19

	)

27 
	#NETLINK_RDMA
 20

	)

28 
	#NETLINK_CRYPTO
 21

	)

30 
	#MAX_LINKS
 32

	)

32 
	ssockaddr_∆
 {

33 
__kî√l_ß_Ámûy_t
 
	m∆_Ámûy
;

34 
	m∆_∑d
;

35 
__u32
 
	m∆_pid
;

36 
__u32
 
	m∆_groups
;

39 
	s∆msghdr
 {

40 
__u32
 
	m∆msg_Àn
;

41 
__u16
 
	m∆msg_ty≥
;

42 
__u16
 
	m∆msg_Êags
;

43 
__u32
 
	m∆msg_£q
;

44 
__u32
 
	m∆msg_pid
;

49 
	#NLM_F_REQUEST
 1

	)

50 
	#NLM_F_MULTI
 2

	)

51 
	#NLM_F_ACK
 4

	)

52 
	#NLM_F_ECHO
 8

	)

53 
	#NLM_F_DUMP_INTR
 16

	)

56 
	#NLM_F_ROOT
 0x100

	)

57 
	#NLM_F_MATCH
 0x200

	)

58 
	#NLM_F_ATOMIC
 0x400

	)

59 
	#NLM_F_DUMP
 (
NLM_F_ROOT
|
NLM_F_MATCH
)

	)

62 
	#NLM_F_REPLACE
 0x100

	)

63 
	#NLM_F_EXCL
 0x200

	)

64 
	#NLM_F_CREATE
 0x400

	)

65 
	#NLM_F_APPEND
 0x800

	)

76 
	#NLMSG_ALIGNTO
 4U

	)

77 
	#NLMSG_ALIGN
(
Àn
Ë–(÷í)+
NLMSG_ALIGNTO
-1Ë& ~(NLMSG_ALIGNTO-1Ë)

	)

78 
	#NLMSG_HDRLEN
 ((Ë
	`NLMSG_ALIGN
((
∆msghdr
)))

	)

79 
	#NLMSG_LENGTH
(
Àn
Ë(÷í)+
	`NLMSG_ALIGN
(
NLMSG_HDRLEN
))

	)

80 
	#NLMSG_SPACE
(
Àn
Ë
	`NLMSG_ALIGN
(
	`NLMSG_LENGTH
÷í))

	)

81 
	#NLMSG_DATA
(
∆h
Ë((*)(((*ÍlhË+ 
	`NLMSG_LENGTH
(0)))

	)

82 
	#NLMSG_NEXT
(
∆h
,
Àn
Ë(÷íË-
	`NLMSG_ALIGN
(“lh)->
∆msg_Àn
), \

83 (
∆msghdr
*)(((*)(
∆h
)Ë+ 
	`NLMSG_ALIGN
(“lh)->
∆msg_Àn
)))

	)

84 
	#NLMSG_OK
(
∆h
,
Àn
Ë(÷íË>()(
∆msghdr
) && \

85 (
∆h
)->
∆msg_Àn
 >(
∆msghdr
) && \

86 (
∆h
)->
∆msg_Àn
 <(
Àn
))

	)

87 
	#NLMSG_PAYLOAD
(
∆h
,
Àn
Ë(“lh)->
∆msg_Àn
 - 
	`NLMSG_SPACE
(÷í)))

	)

89 
	#NLMSG_NOOP
 0x1

	)

90 
	#NLMSG_ERROR
 0x2

	)

91 
	#NLMSG_DONE
 0x3

	)

92 
	#NLMSG_OVERRUN
 0x4

	)

94 
	#NLMSG_MIN_TYPE
 0x10

	)

96 
	s∆msgîr
 {

97 
	mîr‹
;

98 
∆msghdr
 
	mmsg
;

101 
	#NETLINK_ADD_MEMBERSHIP
 1

	)

102 
	#NETLINK_DROP_MEMBERSHIP
 2

	)

103 
	#NETLINK_PKTINFO
 3

	)

104 
	#NETLINK_BROADCAST_ERROR
 4

	)

105 
	#NETLINK_NO_ENOBUFS
 5

	)

107 
	s∆_pktöfo
 {

108 
__u32
 
	mgroup
;

111 
	#NET_MAJOR
 36

	)

114 
	mNETLINK_UNCONNECTED
 = 0,

115 
	mNETLINK_CONNECTED
,

127 
	s∆©å
 {

128 
__u16
 
	m∆a_Àn
;

129 
__u16
 
	m∆a_ty≥
;

142 
	#NLA_F_NESTED
 (1 << 15)

	)

143 
	#NLA_F_NET_BYTEORDER
 (1 << 14)

	)

144 
	#NLA_TYPE_MASK
 ~(
NLA_F_NESTED
 | 
NLA_F_NET_BYTEORDER
)

	)

146 
	#NLA_ALIGNTO
 4

	)

147 
	#NLA_ALIGN
(
Àn
Ë((÷íË+ 
NLA_ALIGNTO
 - 1Ë& ~(NLA_ALIGNTO - 1))

	)

148 
	#NLA_HDRLEN
 ((Ë
	`NLA_ALIGN
((
∆©å
)))

	)

	@/usr/include/linux/rtnetlink.h

1 #i‚de‡
__LINUX_RTNETLINK_H


2 
	#__LINUX_RTNETLINK_H


	)

4 
	~<löux/ty≥s.h
>

5 
	~<löux/√éök.h
>

6 
	~<löux/if_lök.h
>

7 
	~<löux/if_addr.h
>

8 
	~<löux/√ighbour.h
>

13 
	#RTNL_FAMILY_IPMR
 128

	)

14 
	#RTNL_FAMILY_IP6MR
 129

	)

15 
	#RTNL_FAMILY_MAX
 129

	)

24 
	mRTM_BASE
 = 16,

25 
	#RTM_BASE
 
RTM_BASE


	)

27 
	mRTM_NEWLINK
 = 16,

28 
	#RTM_NEWLINK
 
RTM_NEWLINK


	)

29 
	mRTM_DELLINK
,

30 
	#RTM_DELLINK
 
RTM_DELLINK


	)

31 
	mRTM_GETLINK
,

32 
	#RTM_GETLINK
 
RTM_GETLINK


	)

33 
	mRTM_SETLINK
,

34 
	#RTM_SETLINK
 
RTM_SETLINK


	)

36 
	mRTM_NEWADDR
 = 20,

37 
	#RTM_NEWADDR
 
RTM_NEWADDR


	)

38 
	mRTM_DELADDR
,

39 
	#RTM_DELADDR
 
RTM_DELADDR


	)

40 
	mRTM_GETADDR
,

41 
	#RTM_GETADDR
 
RTM_GETADDR


	)

43 
	mRTM_NEWROUTE
 = 24,

44 
	#RTM_NEWROUTE
 
RTM_NEWROUTE


	)

45 
	mRTM_DELROUTE
,

46 
	#RTM_DELROUTE
 
RTM_DELROUTE


	)

47 
	mRTM_GETROUTE
,

48 
	#RTM_GETROUTE
 
RTM_GETROUTE


	)

50 
	mRTM_NEWNEIGH
 = 28,

51 
	#RTM_NEWNEIGH
 
RTM_NEWNEIGH


	)

52 
	mRTM_DELNEIGH
,

53 
	#RTM_DELNEIGH
 
RTM_DELNEIGH


	)

54 
	mRTM_GETNEIGH
,

55 
	#RTM_GETNEIGH
 
RTM_GETNEIGH


	)

57 
	mRTM_NEWRULE
 = 32,

58 
	#RTM_NEWRULE
 
RTM_NEWRULE


	)

59 
	mRTM_DELRULE
,

60 
	#RTM_DELRULE
 
RTM_DELRULE


	)

61 
	mRTM_GETRULE
,

62 
	#RTM_GETRULE
 
RTM_GETRULE


	)

64 
	mRTM_NEWQDISC
 = 36,

65 
	#RTM_NEWQDISC
 
RTM_NEWQDISC


	)

66 
	mRTM_DELQDISC
,

67 
	#RTM_DELQDISC
 
RTM_DELQDISC


	)

68 
	mRTM_GETQDISC
,

69 
	#RTM_GETQDISC
 
RTM_GETQDISC


	)

71 
	mRTM_NEWTCLASS
 = 40,

72 
	#RTM_NEWTCLASS
 
RTM_NEWTCLASS


	)

73 
	mRTM_DELTCLASS
,

74 
	#RTM_DELTCLASS
 
RTM_DELTCLASS


	)

75 
	mRTM_GETTCLASS
,

76 
	#RTM_GETTCLASS
 
RTM_GETTCLASS


	)

78 
	mRTM_NEWTFILTER
 = 44,

79 
	#RTM_NEWTFILTER
 
RTM_NEWTFILTER


	)

80 
	mRTM_DELTFILTER
,

81 
	#RTM_DELTFILTER
 
RTM_DELTFILTER


	)

82 
	mRTM_GETTFILTER
,

83 
	#RTM_GETTFILTER
 
RTM_GETTFILTER


	)

85 
	mRTM_NEWACTION
 = 48,

86 
	#RTM_NEWACTION
 
RTM_NEWACTION


	)

87 
	mRTM_DELACTION
,

88 
	#RTM_DELACTION
 
RTM_DELACTION


	)

89 
	mRTM_GETACTION
,

90 
	#RTM_GETACTION
 
RTM_GETACTION


	)

92 
	mRTM_NEWPREFIX
 = 52,

93 
	#RTM_NEWPREFIX
 
RTM_NEWPREFIX


	)

95 
	mRTM_GETMULTICAST
 = 58,

96 
	#RTM_GETMULTICAST
 
RTM_GETMULTICAST


	)

98 
	mRTM_GETANYCAST
 = 62,

99 
	#RTM_GETANYCAST
 
RTM_GETANYCAST


	)

101 
	mRTM_NEWNEIGHTBL
 = 64,

102 
	#RTM_NEWNEIGHTBL
 
RTM_NEWNEIGHTBL


	)

103 
	mRTM_GETNEIGHTBL
 = 66,

104 
	#RTM_GETNEIGHTBL
 
RTM_GETNEIGHTBL


	)

105 
	mRTM_SETNEIGHTBL
,

106 
	#RTM_SETNEIGHTBL
 
RTM_SETNEIGHTBL


	)

108 
	mRTM_NEWNDUSEROPT
 = 68,

109 
	#RTM_NEWNDUSEROPT
 
RTM_NEWNDUSEROPT


	)

111 
	mRTM_NEWADDRLABEL
 = 72,

112 
	#RTM_NEWADDRLABEL
 
RTM_NEWADDRLABEL


	)

113 
	mRTM_DELADDRLABEL
,

114 
	#RTM_DELADDRLABEL
 
RTM_DELADDRLABEL


	)

115 
	mRTM_GETADDRLABEL
,

116 
	#RTM_GETADDRLABEL
 
RTM_GETADDRLABEL


	)

118 
	mRTM_GETDCB
 = 78,

119 
	#RTM_GETDCB
 
RTM_GETDCB


	)

120 
	mRTM_SETDCB
,

121 
	#RTM_SETDCB
 
RTM_SETDCB


	)

123 
	m__RTM_MAX
,

124 
	#RTM_MAX
 (((
__RTM_MAX
 + 3Ë& ~3Ë- 1)

	)

127 
	#RTM_NR_MSGTYPES
 (
RTM_MAX
 + 1 - 
RTM_BASE
)

	)

128 
	#RTM_NR_FAMILIES
 (
RTM_NR_MSGTYPES
 >> 2)

	)

129 
	#RTM_FAM
(
cmd
Ë(((cmdË- 
RTM_BASE
Ë>> 2)

	)

137 
	sπ©å
 {

138 
	mπa_Àn
;

139 
	mπa_ty≥
;

144 
	#RTA_ALIGNTO
 4

	)

145 
	#RTA_ALIGN
(
Àn
Ë–(÷í)+
RTA_ALIGNTO
-1Ë& ~(RTA_ALIGNTO-1Ë)

	)

146 
	#RTA_OK
(
πa
,
Àn
Ë(÷íË>()(
π©å
) && \

147 (
πa
)->
πa_Àn
 >(
π©å
) && \

148 (
πa
)->
πa_Àn
 <(
Àn
))

	)

149 
	#RTA_NEXT
(
πa
,
©åÀn
Ë(◊âæíË-
	`RTA_ALIGN
(‘è)->
πa_Àn
), \

150 (
π©å
*)(((*)(
πa
)Ë+ 
	`RTA_ALIGN
(‘è)->
πa_Àn
)))

	)

151 
	#RTA_LENGTH
(
Àn
Ë(
	`RTA_ALIGN
((
π©å
)Ë+ (Àn))

	)

152 
	#RTA_SPACE
(
Àn
Ë
	`RTA_ALIGN
(
	`RTA_LENGTH
÷í))

	)

153 
	#RTA_DATA
(
πa
Ë((*)(((*)‘è)Ë+ 
	`RTA_LENGTH
(0)))

	)

154 
	#RTA_PAYLOAD
(
πa
Ë(()(‘è)->
πa_Àn
Ë- 
	`RTA_LENGTH
(0))

	)

163 
	sπmsg
 {

164 
	mπm_Ámûy
;

165 
	mπm_d°_Àn
;

166 
	mπm_§c_Àn
;

167 
	mπm_tos
;

169 
	mπm_èbÀ
;

170 
	mπm_¥Ÿocﬁ
;

171 
	mπm_sc›e
;

172 
	mπm_ty≥
;

174 
	mπm_Êags
;

180 
	mRTN_UNSPEC
,

181 
	mRTN_UNICAST
,

182 
	mRTN_LOCAL
,

183 
	mRTN_BROADCAST
,

185 
	mRTN_ANYCAST
,

187 
	mRTN_MULTICAST
,

188 
	mRTN_BLACKHOLE
,

189 
	mRTN_UNREACHABLE
,

190 
	mRTN_PROHIBIT
,

191 
	mRTN_THROW
,

192 
	mRTN_NAT
,

193 
	mRTN_XRESOLVE
,

194 
	m__RTN_MAX


197 
	#RTN_MAX
 (
__RTN_MAX
 - 1)

	)

202 
	#RTPROT_UNSPEC
 0

	)

203 
	#RTPROT_REDIRECT
 1

	)

205 
	#RTPROT_KERNEL
 2

	)

206 
	#RTPROT_BOOT
 3

	)

207 
	#RTPROT_STATIC
 4

	)

216 
	#RTPROT_GATED
 8

	)

217 
	#RTPROT_RA
 9

	)

218 
	#RTPROT_MRT
 10

	)

219 
	#RTPROT_ZEBRA
 11

	)

220 
	#RTPROT_BIRD
 12

	)

221 
	#RTPROT_DNROUTED
 13

	)

222 
	#RTPROT_XORP
 14

	)

223 
	#RTPROT_NTK
 15

	)

224 
	#RTPROT_DHCP
 16

	)

237 
	eπ_sc›e_t
 {

238 
	mRT_SCOPE_UNIVERSE
=0,

240 
	mRT_SCOPE_SITE
=200,

241 
	mRT_SCOPE_LINK
=253,

242 
	mRT_SCOPE_HOST
=254,

243 
	mRT_SCOPE_NOWHERE
=255

248 
	#RTM_F_NOTIFY
 0x100

	)

249 
	#RTM_F_CLONED
 0x200

	)

250 
	#RTM_F_EQUALIZE
 0x400

	)

251 
	#RTM_F_PREFIX
 0x800

	)

255 
	eπ_˛ass_t
 {

256 
	mRT_TABLE_UNSPEC
=0,

258 
	mRT_TABLE_COMPAT
=252,

259 
	mRT_TABLE_DEFAULT
=253,

260 
	mRT_TABLE_MAIN
=254,

261 
	mRT_TABLE_LOCAL
=255,

262 
	mRT_TABLE_MAX
=0xFFFFFFFF

268 
	eπ©å_ty≥_t
 {

269 
	mRTA_UNSPEC
,

270 
	mRTA_DST
,

271 
	mRTA_SRC
,

272 
	mRTA_IIF
,

273 
	mRTA_OIF
,

274 
	mRTA_GATEWAY
,

275 
	mRTA_PRIORITY
,

276 
	mRTA_PREFSRC
,

277 
	mRTA_METRICS
,

278 
	mRTA_MULTIPATH
,

279 
	mRTA_PROTOINFO
,

280 
	mRTA_FLOW
,

281 
	mRTA_CACHEINFO
,

282 
	mRTA_SESSION
,

283 
	mRTA_MP_ALGO
,

284 
	mRTA_TABLE
,

285 
	mRTA_MARK
,

286 
	m__RTA_MAX


289 
	#RTA_MAX
 (
__RTA_MAX
 - 1)

	)

291 
	#RTM_RTA
(
r
Ë((
π©å
*)(((*)‘)Ë+ 
	`NLMSG_ALIGN
((
πmsg
))))

	)

292 
	#RTM_PAYLOAD
(
n
Ë
	`NLMSG_PAYLOAD
“,(
πmsg
))

	)

303 
	sπ√xth›
 {

304 
	mπnh_Àn
;

305 
	mπnh_Êags
;

306 
	mπnh_h›s
;

307 
	mπnh_ifödex
;

312 
	#RTNH_F_DEAD
 1

	)

313 
	#RTNH_F_PERVASIVE
 2

	)

314 
	#RTNH_F_ONLINK
 4

	)

318 
	#RTNH_ALIGNTO
 4

	)

319 
	#RTNH_ALIGN
(
Àn
Ë–(÷í)+
RTNH_ALIGNTO
-1Ë& ~(RTNH_ALIGNTO-1Ë)

	)

320 
	#RTNH_OK
(
πnh
,
Àn
Ë(‘äh)->
πnh_Àn
 >(
π√xth›
) && \

321 (()(
πnh
)->
πnh_Àn
Ë<(
Àn
))

	)

322 
	#RTNH_NEXT
(
πnh
Ë((
π√xth›
*)(((*)‘äh)Ë+ 
	`RTNH_ALIGN
(‘äh)->
πnh_Àn
)))

	)

323 
	#RTNH_LENGTH
(
Àn
Ë(
	`RTNH_ALIGN
((
π√xth›
)Ë+ (Àn))

	)

324 
	#RTNH_SPACE
(
Àn
Ë
	`RTNH_ALIGN
(
	`RTNH_LENGTH
÷í))

	)

325 
	#RTNH_DATA
(
πnh
Ë((
π©å
*)(((*)‘äh)Ë+ 
	`RTNH_LENGTH
(0)))

	)

329 
	sπa_ˇcheöfo
 {

330 
__u32
 
	mπa_˛¡ªf
;

331 
__u32
 
	mπa_œ°u£
;

332 
__s32
 
	mπa_expúes
;

333 
__u32
 
	mπa_îr‹
;

334 
__u32
 
	mπa_u£d
;

336 
	#RTNETLINK_HAVE_PEERINFO
 1

	)

337 
__u32
 
	mπa_id
;

338 
__u32
 
	mπa_ts
;

339 
__u32
 
	mπa_tßge
;

345 
	mRTAX_UNSPEC
,

346 
	#RTAX_UNSPEC
 
RTAX_UNSPEC


	)

347 
	mRTAX_LOCK
,

348 
	#RTAX_LOCK
 
RTAX_LOCK


	)

349 
	mRTAX_MTU
,

350 
	#RTAX_MTU
 
RTAX_MTU


	)

351 
	mRTAX_WINDOW
,

352 
	#RTAX_WINDOW
 
RTAX_WINDOW


	)

353 
	mRTAX_RTT
,

354 
	#RTAX_RTT
 
RTAX_RTT


	)

355 
	mRTAX_RTTVAR
,

356 
	#RTAX_RTTVAR
 
RTAX_RTTVAR


	)

357 
	mRTAX_SSTHRESH
,

358 
	#RTAX_SSTHRESH
 
RTAX_SSTHRESH


	)

359 
	mRTAX_CWND
,

360 
	#RTAX_CWND
 
RTAX_CWND


	)

361 
	mRTAX_ADVMSS
,

362 
	#RTAX_ADVMSS
 
RTAX_ADVMSS


	)

363 
	mRTAX_REORDERING
,

364 
	#RTAX_REORDERING
 
RTAX_REORDERING


	)

365 
	mRTAX_HOPLIMIT
,

366 
	#RTAX_HOPLIMIT
 
RTAX_HOPLIMIT


	)

367 
	mRTAX_INITCWND
,

368 
	#RTAX_INITCWND
 
RTAX_INITCWND


	)

369 
	mRTAX_FEATURES
,

370 
	#RTAX_FEATURES
 
RTAX_FEATURES


	)

371 
	mRTAX_RTO_MIN
,

372 
	#RTAX_RTO_MIN
 
RTAX_RTO_MIN


	)

373 
	mRTAX_INITRWND
,

374 
	#RTAX_INITRWND
 
RTAX_INITRWND


	)

375 
	m__RTAX_MAX


378 
	#RTAX_MAX
 (
__RTAX_MAX
 - 1)

	)

380 
	#RTAX_FEATURE_ECN
 0x00000001

	)

381 
	#RTAX_FEATURE_SACK
 0x00000002

	)

382 
	#RTAX_FEATURE_TIMESTAMP
 0x00000004

	)

383 
	#RTAX_FEATURE_ALLFRAG
 0x00000008

	)

385 
	sπa_£ssi⁄
 {

386 
__u8
 
	m¥Ÿo
;

387 
__u8
 
	m∑d1
;

388 
__u16
 
	m∑d2
;

392 
__u16
 
	m•‹t
;

393 
__u16
 
	mdp‹t
;

394 } 
	mp‹ts
;

397 
__u8
 
	mty≥
;

398 
__u8
 
	mcode
;

399 
__u16
 
	midít
;

400 } 
	micm±
;

402 
__u32
 
	m•i
;

403 } 
	mu
;

410 
	sπgímsg
 {

411 
	mπgí_Ámûy
;

423 
	siföfomsg
 {

424 
	mifi_Ámûy
;

425 
	m__ifi_∑d
;

426 
	mifi_ty≥
;

427 
	mifi_ödex
;

428 
	mifi_Êags
;

429 
	mifi_ch™ge
;

436 
	s¥efixmsg
 {

437 
	m¥efix_Ámûy
;

438 
	m¥efix_∑d1
;

439 
	m¥efix_∑d2
;

440 
	m¥efix_ifödex
;

441 
	m¥efix_ty≥
;

442 
	m¥efix_Àn
;

443 
	m¥efix_Êags
;

444 
	m¥efix_∑d3
;

449 
	mPREFIX_UNSPEC
,

450 
	mPREFIX_ADDRESS
,

451 
	mPREFIX_CACHEINFO
,

452 
	m__PREFIX_MAX


455 
	#PREFIX_MAX
 (
__PREFIX_MAX
 - 1)

	)

457 
	s¥efix_ˇcheöfo
 {

458 
__u32
 
	m¥e„ºed_time
;

459 
__u32
 
	mvÆid_time
;

467 
	stcmsg
 {

468 
	mtcm_Ámûy
;

469 
	mtcm__∑d1
;

470 
	mtcm__∑d2
;

471 
	mtcm_ifödex
;

472 
__u32
 
	mtcm_h™dÀ
;

473 
__u32
 
	mtcm_∑ª¡
;

474 
__u32
 
	mtcm_öfo
;

478 
	mTCA_UNSPEC
,

479 
	mTCA_KIND
,

480 
	mTCA_OPTIONS
,

481 
	mTCA_STATS
,

482 
	mTCA_XSTATS
,

483 
	mTCA_RATE
,

484 
	mTCA_FCNT
,

485 
	mTCA_STATS2
,

486 
	mTCA_STAB
,

487 
	m__TCA_MAX


490 
	#TCA_MAX
 (
__TCA_MAX
 - 1)

	)

492 
	#TCA_RTA
(
r
Ë((
π©å
*)(((*)‘)Ë+ 
	`NLMSG_ALIGN
((
tcmsg
))))

	)

493 
	#TCA_PAYLOAD
(
n
Ë
	`NLMSG_PAYLOAD
“,(
tcmsg
))

	)

499 
	sndu£r›tmsg
 {

500 
	mndu£r›t_Ámûy
;

501 
	mndu£r›t_∑d1
;

502 
	mndu£r›t_›ts_Àn
;

503 
	mndu£r›t_ifödex
;

504 
__u8
 
	mndu£r›t_icmp_ty≥
;

505 
__u8
 
	mndu£r›t_icmp_code
;

506 
	mndu£r›t_∑d2
;

507 
	mndu£r›t_∑d3
;

512 
	mNDUSEROPT_UNSPEC
,

513 
	mNDUSEROPT_SRCADDR
,

514 
	m__NDUSEROPT_MAX


517 
	#NDUSEROPT_MAX
 (
__NDUSEROPT_MAX
 - 1)

	)

520 
	#RTMGRP_LINK
 1

	)

521 
	#RTMGRP_NOTIFY
 2

	)

522 
	#RTMGRP_NEIGH
 4

	)

523 
	#RTMGRP_TC
 8

	)

525 
	#RTMGRP_IPV4_IFADDR
 0x10

	)

526 
	#RTMGRP_IPV4_MROUTE
 0x20

	)

527 
	#RTMGRP_IPV4_ROUTE
 0x40

	)

528 
	#RTMGRP_IPV4_RULE
 0x80

	)

530 
	#RTMGRP_IPV6_IFADDR
 0x100

	)

531 
	#RTMGRP_IPV6_MROUTE
 0x200

	)

532 
	#RTMGRP_IPV6_ROUTE
 0x400

	)

533 
	#RTMGRP_IPV6_IFINFO
 0x800

	)

535 
	#RTMGRP_DEC√t_IFADDR
 0x1000

	)

536 
	#RTMGRP_DEC√t_ROUTE
 0x4000

	)

538 
	#RTMGRP_IPV6_PREFIX
 0x20000

	)

541 
	eπ√éök_groups
 {

542 
	mRTNLGRP_NONE
,

543 
	#RTNLGRP_NONE
 
RTNLGRP_NONE


	)

544 
	mRTNLGRP_LINK
,

545 
	#RTNLGRP_LINK
 
RTNLGRP_LINK


	)

546 
	mRTNLGRP_NOTIFY
,

547 
	#RTNLGRP_NOTIFY
 
RTNLGRP_NOTIFY


	)

548 
	mRTNLGRP_NEIGH
,

549 
	#RTNLGRP_NEIGH
 
RTNLGRP_NEIGH


	)

550 
	mRTNLGRP_TC
,

551 
	#RTNLGRP_TC
 
RTNLGRP_TC


	)

552 
	mRTNLGRP_IPV4_IFADDR
,

553 
	#RTNLGRP_IPV4_IFADDR
 
RTNLGRP_IPV4_IFADDR


	)

554 
	mRTNLGRP_IPV4_MROUTE
,

555 
	#RTNLGRP_IPV4_MROUTE
 
RTNLGRP_IPV4_MROUTE


	)

556 
	mRTNLGRP_IPV4_ROUTE
,

557 
	#RTNLGRP_IPV4_ROUTE
 
RTNLGRP_IPV4_ROUTE


	)

558 
	mRTNLGRP_IPV4_RULE
,

559 
	#RTNLGRP_IPV4_RULE
 
RTNLGRP_IPV4_RULE


	)

560 
	mRTNLGRP_IPV6_IFADDR
,

561 
	#RTNLGRP_IPV6_IFADDR
 
RTNLGRP_IPV6_IFADDR


	)

562 
	mRTNLGRP_IPV6_MROUTE
,

563 
	#RTNLGRP_IPV6_MROUTE
 
RTNLGRP_IPV6_MROUTE


	)

564 
	mRTNLGRP_IPV6_ROUTE
,

565 
	#RTNLGRP_IPV6_ROUTE
 
RTNLGRP_IPV6_ROUTE


	)

566 
	mRTNLGRP_IPV6_IFINFO
,

567 
	#RTNLGRP_IPV6_IFINFO
 
RTNLGRP_IPV6_IFINFO


	)

568 
	mRTNLGRP_DEC√t_IFADDR
,

569 
	#RTNLGRP_DEC√t_IFADDR
 
RTNLGRP_DEC√t_IFADDR


	)

570 
	mRTNLGRP_NOP2
,

571 
	mRTNLGRP_DEC√t_ROUTE
,

572 
	#RTNLGRP_DEC√t_ROUTE
 
RTNLGRP_DEC√t_ROUTE


	)

573 
	mRTNLGRP_DEC√t_RULE
,

574 
	#RTNLGRP_DEC√t_RULE
 
RTNLGRP_DEC√t_RULE


	)

575 
	mRTNLGRP_NOP4
,

576 
	mRTNLGRP_IPV6_PREFIX
,

577 
	#RTNLGRP_IPV6_PREFIX
 
RTNLGRP_IPV6_PREFIX


	)

578 
	mRTNLGRP_IPV6_RULE
,

579 
	#RTNLGRP_IPV6_RULE
 
RTNLGRP_IPV6_RULE


	)

580 
	mRTNLGRP_ND_USEROPT
,

581 
	#RTNLGRP_ND_USEROPT
 
RTNLGRP_ND_USEROPT


	)

582 
	mRTNLGRP_PHONET_IFADDR
,

583 
	#RTNLGRP_PHONET_IFADDR
 
RTNLGRP_PHONET_IFADDR


	)

584 
	mRTNLGRP_PHONET_ROUTE
,

585 
	#RTNLGRP_PHONET_ROUTE
 
RTNLGRP_PHONET_ROUTE


	)

586 
	mRTNLGRP_DCB
,

587 
	#RTNLGRP_DCB
 
RTNLGRP_DCB


	)

588 
	m__RTNLGRP_MAX


590 
	#RTNLGRP_MAX
 (
__RTNLGRP_MAX
 - 1)

	)

593 
	stˇmsg
 {

594 
	mtˇ_Ámûy
;

595 
	mtˇ__∑d1
;

596 
	mtˇ__∑d2
;

598 
	#TA_RTA
(
r
Ë((
π©å
*)(((*)‘)Ë+ 
	`NLMSG_ALIGN
((
tˇmsg
))))

	)

599 
	#TA_PAYLOAD
(
n
Ë
	`NLMSG_PAYLOAD
“,(
tˇmsg
))

	)

600 
	#TCA_ACT_TAB
 1

	)

601 
	#TCAA_MAX
 1

	)

604 
	#RTEXT_FILTER_VF
 (1 << 0)

	)

	@/usr/include/linux/types.h

1 #i‚de‡
_LINUX_TYPES_H


2 
	#_LINUX_TYPES_H


	)

4 
	~<asm/ty≥s.h
>

6 #i‚de‡
__ASSEMBLY__


8 
	~<löux/posix_ty≥s.h
>

16 #ifde‡
__CHECKER__


17 
	#__bôwi£__
 
	`__©åibuã__
((
bôwi£
))

	)

19 
	#__bôwi£__


	)

21 #ifde‡
__CHECK_ENDIAN__


22 
	#__bôwi£
 
__bôwi£__


	)

24 
	#__bôwi£


	)

27 
__u16
 
	t__bôwi£
 
	t__À16
;

28 
__u16
 
	t__bôwi£
 
	t__be16
;

29 
__u32
 
	t__bôwi£
 
	t__À32
;

30 
__u32
 
	t__bôwi£
 
	t__be32
;

31 
__u64
 
	t__bôwi£
 
	t__À64
;

32 
__u64
 
	t__bôwi£
 
	t__be64
;

34 
__u16
 
	t__bôwi£
 
	t__sum16
;

35 
__u32
 
	t__bôwi£
 
	t__wsum
;

46 
	#__Æig√d_u64
 
__u64
 
	`__©åibuã__
((
	`Æig√d
(8)))

	)

47 
	#__Æig√d_be64
 
__be64
 
	`__©åibuã__
((
	`Æig√d
(8)))

	)

48 
	#__Æig√d_À64
 
__À64
 
	`__©åibuã__
((
	`Æig√d
(8)))

	)

	@/usr/include/linux/version.h

1 
	#LINUX_VERSION_CODE
 197183

	)

2 
	#KERNEL_VERSION
(
a
,
b
,
c
Ë((◊Ë<< 16Ë+ ((bË<< 8Ë+ (c))

	)

	@/usr/include/malloc.h

21 #i‚de‡
_MALLOC_H


22 
	#_MALLOC_H
 1

	)

24 
	~<„©uªs.h
>

25 
	~<°ddef.h
>

26 
	~<°dio.h
>

27 
	#__mÆloc_±r_t
 *

	)

30 
	#__mÆloc_size_t
 
size_t


	)

31 
	#__mÆloc_±rdiff_t
 
±rdiff_t


	)

33 #ifde‡
__GNUC__


35 
	#__MALLOC_P
(
¨gs
Ë¨g†
__THROW


	)

38 
	#__MALLOC_PMT
(
¨gs
Ë
	)
args

40 #ifde‡
_LIBC


41 
	#__MALLOC_HOOK_VOLATILE


	)

42 
	#__MALLOC_DEPRECATED


	)

44 
	#__MALLOC_HOOK_VOLATILE
 
__vﬁ©ûe


	)

45 
	#__MALLOC_DEPRECATED
 
__©åibuã_dïªˇãd__


	)

50 
	#__MALLOC_P
(
¨gs
Ë
	)
args

51 
	#__MALLOC_PMT
(
¨gs
Ë
	)
args

52 
	#__MALLOC_HOOK_VOLATILE


	)

53 
	#__MALLOC_DEPRECATED
 
__©åibuã_dïªˇãd__


	)

58 
__BEGIN_DECLS


61 *
	$mÆloc
 (
size_t
 
__size
Ë
__THROW
 
__©åibuã_mÆloc__
 
__wur
;

64 *
	$ˇŒoc
 (
size_t
 
__nmemb
, size_à
__size
)

65 
__THROW
 
__©åibuã_mÆloc__
 
__wur
;

72 *
	$ªÆloc
 (*
__±r
, 
size_t
 
__size
)

73 
__THROW
 
__©åibuã_w¨n_unu£d_ªsu…__
;

76 
	$‰ì
 (*
__±r
Ë
__THROW
;

79 
	$c‰ì
 (*
__±r
Ë
__THROW
;

82 *
	$memÆign
 (
size_t
 
__Æignmít
, size_à
__size
)

83 
__THROW
 
__©åibuã_mÆloc__
 
__wur
;

86 *
	$vÆloc
 (
size_t
 
__size
Ë
__THROW
 
__©åibuã_mÆloc__
 
__wur
;

90 * 
	$pvÆloc
 (
size_t
 
__size
Ë
__THROW
 
__©åibuã_mÆloc__
 
__wur
;

94 *(*
__m‹ec‹e
Ë(
±rdiff_t
 
__size
);

97 *
	$__deÁu…_m‹ec‹e
 (
±rdiff_t
 
__size
)

98 
__THROW
 
__©åibuã_mÆloc__
;

102 
	smÆlöfo


104 
¨ía
;

105 
‹dblks
;

106 
smblks
;

107 
hblks
;

108 
hblkhd
;

109 
usmblks
;

110 
fsmblks
;

111 
u‹dblks
;

112 
f‹dblks
;

113 
kìpco°
;

117 
mÆlöfo
 
	$mÆlöfo
 (Ë
__THROW
;

120 #i‚de‡
M_MXFAST


121 
	#M_MXFAST
 1

	)

123 #i‚de‡
M_NLBLKS


124 
	#M_NLBLKS
 2

	)

126 #i‚de‡
M_GRAIN


127 
	#M_GRAIN
 3

	)

129 #i‚de‡
M_KEEP


130 
	#M_KEEP
 4

	)

134 
	#M_TRIM_THRESHOLD
 -1

	)

135 
	#M_TOP_PAD
 -2

	)

136 
	#M_MMAP_THRESHOLD
 -3

	)

137 
	#M_MMAP_MAX
 -4

	)

138 
	#M_CHECK_ACTION
 -5

	)

139 
	#M_PERTURB
 -6

	)

140 
	#M_ARENA_TEST
 -7

	)

141 
	#M_ARENA_MAX
 -8

	)

144 
	$mÆl›t
 (
__∑øm
, 
__vÆ
Ë
__THROW
;

148 
	$mÆloc_åim
 (
size_t
 
__∑d
Ë
__THROW
;

152 
size_t
 
	$mÆloc_ußbÀ_size
 (*
__±r
Ë
__THROW
;

155 
	$mÆloc_°©s
 (Ë
__THROW
;

158 
	$mÆloc_öfo
 (
__›ti⁄s
, 
FILE
 *
__Â
Ë
__THROW
;

161 *
	$mÆloc_gë_°©e
 (Ë
__THROW
;

165 
	$mÆloc_£t_°©e
 (*
__±r
Ë
__THROW
;

170 (*
__MALLOC_HOOK_VOLATILE
 
__mÆloc_öôülize_hook
) ()

171 
__MALLOC_DEPRECATED
;

173 (*
__MALLOC_HOOK_VOLATILE
 
__‰ì_hook
Ë(*
__±r
,

174 
__c⁄°
 
__mÆloc_±r_t
)

175 
__MALLOC_DEPRECATED
;

176 *(*
__MALLOC_HOOK_VOLATILE
 
__mÆloc_hook
Ë(
size_t
 
__size
,

177 
__c⁄°
 
__mÆloc_±r_t
)

178 
__MALLOC_DEPRECATED
;

179 *(*
__MALLOC_HOOK_VOLATILE
 
__ªÆloc_hook
Ë(*
__±r
,

180 
size_t
 
__size
,

181 
__c⁄°
 
__mÆloc_±r_t
)

182 
__MALLOC_DEPRECATED
;

183 *(*
__MALLOC_HOOK_VOLATILE
 
__memÆign_hook
Ë(
size_t
 
__Æignmít
,

184 
size_t
 
__size
,

185 
__c⁄°
 
__mÆloc_±r_t
)

186 
__MALLOC_DEPRECATED
;

187 (*
__MALLOC_HOOK_VOLATILE
 
__a·î_m‹ec‹e_hook
) ();

190 
	$__mÆloc_check_öô
 (Ë
__THROW
 
__MALLOC_DEPRECATED
;

193 
__END_DECLS


	@/usr/include/net/if.h

20 #i‚de‡
_NET_IF_H


21 
	#_NET_IF_H
 1

	)

23 
	~<„©uªs.h
>

25 #ifde‡
__USE_MISC


26 
	~<sys/ty≥s.h
>

27 
	~<sys/sockë.h
>

32 
	#IF_NAMESIZE
 16

	)

34 
	sif_«meödex


36 
	mif_ödex
;

37 *
	mif_«me
;

41 #ifde‡
__USE_MISC


45 
	mIFF_UP
 = 0x1,

46 
	#IFF_UP
 
IFF_UP


	)

47 
	mIFF_BROADCAST
 = 0x2,

48 
	#IFF_BROADCAST
 
IFF_BROADCAST


	)

49 
	mIFF_DEBUG
 = 0x4,

50 
	#IFF_DEBUG
 
IFF_DEBUG


	)

51 
	mIFF_LOOPBACK
 = 0x8,

52 
	#IFF_LOOPBACK
 
IFF_LOOPBACK


	)

53 
	mIFF_POINTOPOINT
 = 0x10,

54 
	#IFF_POINTOPOINT
 
IFF_POINTOPOINT


	)

55 
	mIFF_NOTRAILERS
 = 0x20,

56 
	#IFF_NOTRAILERS
 
IFF_NOTRAILERS


	)

57 
	mIFF_RUNNING
 = 0x40,

58 
	#IFF_RUNNING
 
IFF_RUNNING


	)

59 
	mIFF_NOARP
 = 0x80,

60 
	#IFF_NOARP
 
IFF_NOARP


	)

61 
	mIFF_PROMISC
 = 0x100,

62 
	#IFF_PROMISC
 
IFF_PROMISC


	)

65 
	mIFF_ALLMULTI
 = 0x200,

66 
	#IFF_ALLMULTI
 
IFF_ALLMULTI


	)

68 
	mIFF_MASTER
 = 0x400,

69 
	#IFF_MASTER
 
IFF_MASTER


	)

70 
	mIFF_SLAVE
 = 0x800,

71 
	#IFF_SLAVE
 
IFF_SLAVE


	)

73 
	mIFF_MULTICAST
 = 0x1000,

74 
	#IFF_MULTICAST
 
IFF_MULTICAST


	)

76 
	mIFF_PORTSEL
 = 0x2000,

77 
	#IFF_PORTSEL
 
IFF_PORTSEL


	)

78 
	mIFF_AUTOMEDIA
 = 0x4000,

79 
	#IFF_AUTOMEDIA
 
IFF_AUTOMEDIA


	)

80 
	mIFF_DYNAMIC
 = 0x8000

81 
	#IFF_DYNAMIC
 
IFF_DYNAMIC


	)

89 
	siÁddr


91 
sockaddr
 
	miÁ_addr
;

94 
sockaddr
 
	mifu_brﬂdaddr
;

95 
sockaddr
 
	mifu_d°addr
;

96 } 
	miÁ_ifu
;

97 
iÁ˚
 *
	miÁ_iÂ
;

98 
iÁddr
 *
	miÁ_√xt
;

101 
	#iÁ_brﬂdaddr
 
iÁ_ifu
.
ifu_brﬂdaddr


	)

102 
	#iÁ_d°addr
 
iÁ_ifu
.
ifu_d°addr


	)

112 
	sifm≠


114 
	mmem_°¨t
;

115 
	mmem_íd
;

116 
	mba£_addr
;

117 
	múq
;

118 
	mdma
;

119 
	mp‹t
;

127 
	si‰eq


129 
	#IFHWADDRLEN
 6

	)

130 
	#IFNAMSIZ
 
IF_NAMESIZE


	)

133 
	mi‰n_«me
[
IFNAMSIZ
];

134 } 
	mi‰_i‰n
;

138 
sockaddr
 
	mi‰u_addr
;

139 
sockaddr
 
	mi‰u_d°addr
;

140 
sockaddr
 
	mi‰u_brﬂdaddr
;

141 
sockaddr
 
	mi‰u_√tmask
;

142 
sockaddr
 
	mi‰u_hwaddr
;

143 
	mi‰u_Êags
;

144 
	mi‰u_ivÆue
;

145 
	mi‰u_mtu
;

146 
ifm≠
 
	mi‰u_m≠
;

147 
	mi‰u_¶ave
[
IFNAMSIZ
];

148 
	mi‰u_√w«me
[
IFNAMSIZ
];

149 
__ˇddr_t
 
	mi‰u_d©a
;

150 } 
	mi‰_i‰u
;

152 
	#i‰_«me
 
i‰_i‰n
.
i‰n_«me


	)

153 
	#i‰_hwaddr
 
i‰_i‰u
.
i‰u_hwaddr


	)

154 
	#i‰_addr
 
i‰_i‰u
.
i‰u_addr


	)

155 
	#i‰_d°addr
 
i‰_i‰u
.
i‰u_d°addr


	)

156 
	#i‰_brﬂdaddr
 
i‰_i‰u
.
i‰u_brﬂdaddr


	)

157 
	#i‰_√tmask
 
i‰_i‰u
.
i‰u_√tmask


	)

158 
	#i‰_Êags
 
i‰_i‰u
.
i‰u_Êags


	)

159 
	#i‰_mëric
 
i‰_i‰u
.
i‰u_ivÆue


	)

160 
	#i‰_mtu
 
i‰_i‰u
.
i‰u_mtu


	)

161 
	#i‰_m≠
 
i‰_i‰u
.
i‰u_m≠


	)

162 
	#i‰_¶ave
 
i‰_i‰u
.
i‰u_¶ave


	)

163 
	#i‰_d©a
 
i‰_i‰u
.
i‰u_d©a


	)

164 
	#i‰_ifödex
 
i‰_i‰u
.
i‰u_ivÆue


	)

165 
	#i‰_b™dwidth
 
i‰_i‰u
.
i‰u_ivÆue


	)

166 
	#i‰_qÀn
 
i‰_i‰u
.
i‰u_ivÆue


	)

167 
	#i‰_√w«me
 
i‰_i‰u
.
i‰u_√w«me


	)

168 
	#_IOT_i‰eq
 
	`_IOT
(
	`_IOTS
(),
IFNAMSIZ
,_IOTS(),16,0,0)

	)

169 
	#_IOT_i‰eq_sh‹t
 
	`_IOT
(
	`_IOTS
(),
IFNAMSIZ
,_IOTS(),1,0,0)

	)

170 
	#_IOT_i‰eq_öt
 
	`_IOT
(
	`_IOTS
(),
IFNAMSIZ
,_IOTS(),1,0,0)

	)

177 
	sifc⁄f


179 
	mifc_Àn
;

182 
__ˇddr_t
 
	mifcu_buf
;

183 
i‰eq
 *
	mifcu_ªq
;

184 } 
	mifc_ifcu
;

186 
	#ifc_buf
 
ifc_ifcu
.
ifcu_buf


	)

187 
	#ifc_ªq
 
ifc_ifcu
.
ifcu_ªq


	)

188 
	#_IOT_ifc⁄f
 
	`_IOT
(
	`_IOTS
(
ifc⁄f
),1,0,0,0,0Ë

	)

191 
__BEGIN_DECLS


194 
	$if_«mëoödex
 (
__c⁄°
 *
__i‚ame
Ë
__THROW
;

195 *
	$if_ödext⁄ame
 (
__ifödex
, *
__i‚ame
Ë
__THROW
;

198 
if_«meödex
 *
	$if_«meödex
 (Ë
__THROW
;

201 
	$if_‰ì«meödex
 (
if_«meödex
 *
__±r
Ë
__THROW
;

203 
__END_DECLS


	@/usr/include/net/route.h

21 #i‚de‡
_NET_ROUTE_H


22 
	#_NET_ROUTE_H
 1

	)

24 
	~<„©uªs.h
>

25 
	~<sys/sockë.h
>

26 
	~<sys/ty≥s.h
>

27 
	~<√töë/ö.h
>

28 
	~<bôs/w‹dsize.h
>

32 
	sπíåy


34 
	mπ_∑d1
;

35 
sockaddr
 
	mπ_d°
;

36 
sockaddr
 
	mπ_g©eway
;

37 
sockaddr
 
	mπ_gímask
;

38 
	mπ_Êags
;

39 
	mπ_∑d2
;

40 
	mπ_∑d3
;

41 
	mπ_tos
;

42 
	mπ_˛ass
;

43 #i‡
__WORDSIZE
 == 64

44 
	mπ_∑d4
[3];

46 
	mπ_∑d4
;

48 
	mπ_mëric
;

49 *
	mπ_dev
;

50 
	mπ_mtu
;

51 
	mπ_wödow
;

52 
	mπ_úâ
;

55 
	#π_mss
 
π_mtu


	)

58 
	sö6_πmsg


60 
ö6_addr
 
	mπmsg_d°
;

61 
ö6_addr
 
	mπmsg_§c
;

62 
ö6_addr
 
	mπmsg_g©eway
;

63 
u_öt32_t
 
	mπmsg_ty≥
;

64 
u_öt16_t
 
	mπmsg_d°_Àn
;

65 
u_öt16_t
 
	mπmsg_§c_Àn
;

66 
u_öt32_t
 
	mπmsg_mëric
;

67 
	mπmsg_öfo
;

68 
u_öt32_t
 
	mπmsg_Êags
;

69 
	mπmsg_ifödex
;

73 
	#RTF_UP
 0x0001

	)

74 
	#RTF_GATEWAY
 0x0002

	)

76 
	#RTF_HOST
 0x0004

	)

77 
	#RTF_REINSTATE
 0x0008

	)

78 
	#RTF_DYNAMIC
 0x0010

	)

79 
	#RTF_MODIFIED
 0x0020

	)

80 
	#RTF_MTU
 0x0040

	)

81 
	#RTF_MSS
 
RTF_MTU


	)

82 
	#RTF_WINDOW
 0x0080

	)

83 
	#RTF_IRTT
 0x0100

	)

84 
	#RTF_REJECT
 0x0200

	)

85 
	#RTF_STATIC
 0x0400

	)

86 
	#RTF_XRESOLVE
 0x0800

	)

87 
	#RTF_NOFORWARD
 0x1000

	)

88 
	#RTF_THROW
 0x2000

	)

89 
	#RTF_NOPMTUDISC
 0x4000

	)

92 
	#RTF_DEFAULT
 0x00010000

	)

93 
	#RTF_ALLONLINK
 0x00020000

	)

94 
	#RTF_ADDRCONF
 0x00040000

	)

96 
	#RTF_LINKRT
 0x00100000

	)

97 
	#RTF_NONEXTHOP
 0x00200000

	)

99 
	#RTF_CACHE
 0x01000000

	)

100 
	#RTF_FLOW
 0x02000000

	)

101 
	#RTF_POLICY
 0x04000000

	)

103 
	#RTCF_VALVE
 0x00200000

	)

104 
	#RTCF_MASQ
 0x00400000

	)

105 
	#RTCF_NAT
 0x00800000

	)

106 
	#RTCF_DOREDIRECT
 0x01000000

	)

107 
	#RTCF_LOG
 0x02000000

	)

108 
	#RTCF_DIRECTSRC
 0x04000000

	)

110 
	#RTF_LOCAL
 0x80000000

	)

111 
	#RTF_INTERFACE
 0x40000000

	)

112 
	#RTF_MULTICAST
 0x20000000

	)

113 
	#RTF_BROADCAST
 0x10000000

	)

114 
	#RTF_NAT
 0x08000000

	)

116 
	#RTF_ADDRCLASSMASK
 0xF8000000

	)

117 
	#RT_ADDRCLASS
(
Êags
Ë((
__u_öt32_t
ËÊag†>> 23)

	)

119 
	#RT_TOS
(
tos
Ë(—osË& 
IPTOS_TOS_MASK
)

	)

121 
	#RT_LOCALADDR
(
Êags
Ë((Êag†& 
RTF_ADDRCLASSMASK
) \

122 =(
RTF_LOCAL
|
RTF_INTERFACE
))

	)

124 
	#RT_CLASS_UNSPEC
 0

	)

125 
	#RT_CLASS_DEFAULT
 253

	)

127 
	#RT_CLASS_MAIN
 254

	)

128 
	#RT_CLASS_LOCAL
 255

	)

129 
	#RT_CLASS_MAX
 255

	)

132 
	#RTMSG_ACK
 
NLMSG_ACK


	)

133 
	#RTMSG_OVERRUN
 
NLMSG_OVERRUN


	)

135 
	#RTMSG_NEWDEVICE
 0x11

	)

136 
	#RTMSG_DELDEVICE
 0x12

	)

137 
	#RTMSG_NEWROUTE
 0x21

	)

138 
	#RTMSG_DELROUTE
 0x22

	)

139 
	#RTMSG_NEWRULE
 0x31

	)

140 
	#RTMSG_DELRULE
 0x32

	)

141 
	#RTMSG_CONTROL
 0x40

	)

143 
	#RTMSG_AR_FAILED
 0x51

	)

	@/usr/include/netdb.h

23 #i‚def 
_NETDB_H


24 
	#_NETDB_H
 1

	)

26 
	~<„©uªs.h
>

28 
	~<√töë/ö.h
>

29 
	~<°döt.h
>

30 #ifde‡
__USE_MISC


33 
	~<Ωc/√tdb.h
>

36 #ifde‡
__USE_GNU


37 
	#__√ed_sigevít_t


	)

38 
	~<bôs/sigöfo.h
>

39 
	#__√ed_time•ec


	)

40 
	~<time.h
>

43 
	~<bôs/√tdb.h
>

46 
	#_PATH_HEQUIV
 "/ëc/ho°s.equiv"

	)

47 
	#_PATH_HOSTS
 "/ëc/ho°s"

	)

48 
	#_PATH_NETWORKS
 "/ëc/√tw‹ks"

	)

49 
	#_PATH_NSSWITCH_CONF
 "/ëc/nsswôch.c⁄f"

	)

50 
	#_PATH_PROTOCOLS
 "/ëc/¥Ÿocﬁs"

	)

51 
	#_PATH_SERVICES
 "/ëc/£rvi˚s"

	)

54 
	g__BEGIN_DECLS


56 #i‡
deföed
 
__USE_MISC
 || !deföed 
__USE_XOPEN2K8


59 
	#h_î∫o
 (*
	`__h_î∫o_loˇti⁄
 ())

	)

62 *
	$__h_î∫o_loˇti⁄
 (Ë
__THROW
 
	`__©åibuã__
 ((
__c⁄°__
));

66 
	#HOST_NOT_FOUND
 1

	)

67 
	#TRY_AGAIN
 2

	)

69 
	#NO_RECOVERY
 3

	)

71 
	#NO_DATA
 4

	)

74 #i‡
deföed
 
__USE_MISC
 || deföed 
__USE_GNU


75 
	#NETDB_INTERNAL
 -1

	)

76 
	#NETDB_SUCCESS
 0

	)

77 
	#NO_ADDRESS
 
NO_DATA


	)

80 #ifde‡
__USE_XOPEN2K


82 
	#IPPORT_RESERVED
 1024

	)

85 #ifde‡
__USE_GNU


87 
	#SCOPE_DELIMITER
 '%'

	)

90 #ifde‡
__USE_MISC


93 
	$hîr‹
 (
__c⁄°
 *
__°r
Ë
__THROW
;

96 
__c⁄°
 *
	$h°ªº‹
 (
__îr_num
Ë
__THROW
;

101 
	sho°ít


103 *
h_«me
;

104 **
h_Æü£s
;

105 
h_addπy≥
;

106 
h_Àngth
;

107 **
h_addr_li°
;

108 #i‡
deföed
 
__USE_MISC
 || deföed 
__USE_GNU


109 
	#h_addr
 
h_addr_li°
[0]

	)

118 
	`£tho°ít
 (
__°ay_›í
);

124 
	`ídho°ít
 ();

131 
ho°ít
 *
	`gëho°ít
 ();

138 
ho°ít
 *
	`gëho°byaddr
 (
__c⁄°
 *
__addr
, 
__sockÀn_t
 
__Àn
,

139 
__ty≥
);

145 
ho°ít
 *
	`gëho°by«me
 (
__c⁄°
 *
__«me
);

147 #ifde‡
__USE_MISC


156 
ho°ít
 *
	`gëho°by«me2
 (
__c⁄°
 *
__«me
, 
__af
);

168 
	`gëho°ít_r
 (
ho°ít
 *
__ª°ri˘
 
__ªsu…_buf
,

169 *
__ª°ri˘
 
__buf
, 
size_t
 
__buÊí
,

170 
ho°ít
 **
__ª°ri˘
 
__ªsu…
,

171 *
__ª°ri˘
 
__h_î∫›
);

173 
	`gëho°byaddr_r
 (
__c⁄°
 *
__ª°ri˘
 
__addr
, 
__sockÀn_t
 
__Àn
,

174 
__ty≥
,

175 
ho°ít
 *
__ª°ri˘
 
__ªsu…_buf
,

176 *
__ª°ri˘
 
__buf
, 
size_t
 
__buÊí
,

177 
ho°ít
 **
__ª°ri˘
 
__ªsu…
,

178 *
__ª°ri˘
 
__h_î∫›
);

180 
	`gëho°by«me_r
 (
__c⁄°
 *
__ª°ri˘
 
__«me
,

181 
ho°ít
 *
__ª°ri˘
 
__ªsu…_buf
,

182 *
__ª°ri˘
 
__buf
, 
size_t
 
__buÊí
,

183 
ho°ít
 **
__ª°ri˘
 
__ªsu…
,

184 *
__ª°ri˘
 
__h_î∫›
);

186 
	`gëho°by«me2_r
 (
__c⁄°
 *
__ª°ri˘
 
__«me
, 
__af
,

187 
ho°ít
 *
__ª°ri˘
 
__ªsu…_buf
,

188 *
__ª°ri˘
 
__buf
, 
size_t
 
__buÊí
,

189 
ho°ít
 **
__ª°ri˘
 
__ªsu…
,

190 *
__ª°ri˘
 
__h_î∫›
);

199 
	`£äëít
 (
__°ay_›í
);

205 
	`íd√ã¡
 ();

212 
√ã¡
 *
	`gë√ã¡
 ();

219 
√ã¡
 *
	`gë√tbyaddr
 (
uöt32_t
 
__√t
, 
__ty≥
);

225 
√ã¡
 *
	`gë√tby«me
 (
__c⁄°
 *
__«me
);

227 #ifdef 
__USE_MISC


238 
	`gë√ã¡_r
 (
√ã¡
 *
__ª°ri˘
 
__ªsu…_buf
,

239 *
__ª°ri˘
 
__buf
, 
size_t
 
__buÊí
,

240 
√ã¡
 **
__ª°ri˘
 
__ªsu…
,

241 *
__ª°ri˘
 
__h_î∫›
);

243 
	`gë√tbyaddr_r
 (
uöt32_t
 
__√t
, 
__ty≥
,

244 
√ã¡
 *
__ª°ri˘
 
__ªsu…_buf
,

245 *
__ª°ri˘
 
__buf
, 
size_t
 
__buÊí
,

246 
√ã¡
 **
__ª°ri˘
 
__ªsu…
,

247 *
__ª°ri˘
 
__h_î∫›
);

249 
	`gë√tby«me_r
 (
__c⁄°
 *
__ª°ri˘
 
__«me
,

250 
√ã¡
 *
__ª°ri˘
 
__ªsu…_buf
,

251 *
__ª°ri˘
 
__buf
, 
size_t
 
__buÊí
,

252 
√ã¡
 **
__ª°ri˘
 
__ªsu…
,

253 *
__ª°ri˘
 
__h_î∫›
);

258 
	s£rvít


260 *
s_«me
;

261 **
s_Æü£s
;

262 
s_p‹t
;

263 *
s_¥Ÿo
;

271 
	`£t£rvít
 (
__°ay_›í
);

277 
	`íd£rvít
 ();

284 
£rvít
 *
	`gë£rvít
 ();

291 
£rvít
 *
	`gë£rvby«me
 (
__c⁄°
 *
__«me
,

292 
__c⁄°
 *
__¥Ÿo
);

299 
£rvít
 *
	`gë£rvbyp‹t
 (
__p‹t
, 
__c⁄°
 *
__¥Ÿo
);

302 #ifdef 
__USE_MISC


310 
	`gë£rvít_r
 (
£rvít
 *
__ª°ri˘
 
__ªsu…_buf
,

311 *
__ª°ri˘
 
__buf
, 
size_t
 
__buÊí
,

312 
£rvít
 **
__ª°ri˘
 
__ªsu…
);

314 
	`gë£rvby«me_r
 (
__c⁄°
 *
__ª°ri˘
 
__«me
,

315 
__c⁄°
 *
__ª°ri˘
 
__¥Ÿo
,

316 
£rvít
 *
__ª°ri˘
 
__ªsu…_buf
,

317 *
__ª°ri˘
 
__buf
, 
size_t
 
__buÊí
,

318 
£rvít
 **
__ª°ri˘
 
__ªsu…
);

320 
	`gë£rvbyp‹t_r
 (
__p‹t
, 
__c⁄°
 *
__ª°ri˘
 
__¥Ÿo
,

321 
£rvít
 *
__ª°ri˘
 
__ªsu…_buf
,

322 *
__ª°ri˘
 
__buf
, 
size_t
 
__buÊí
,

323 
£rvít
 **
__ª°ri˘
 
__ªsu…
);

328 
	s¥Ÿ€¡


330 *
p_«me
;

331 **
p_Æü£s
;

332 
p_¥Ÿo
;

340 
	`£çrŸ€¡
 (
__°ay_›í
);

346 
	`íd¥Ÿ€¡
 ();

353 
¥Ÿ€¡
 *
	`gë¥Ÿ€¡
 ();

359 
¥Ÿ€¡
 *
	`gë¥Ÿoby«me
 (
__c⁄°
 *
__«me
);

365 
¥Ÿ€¡
 *
	`gë¥Ÿobynumbî
 (
__¥Ÿo
);

368 #ifdef 
__USE_MISC


376 
	`gë¥Ÿ€¡_r
 (
¥Ÿ€¡
 *
__ª°ri˘
 
__ªsu…_buf
,

377 *
__ª°ri˘
 
__buf
, 
size_t
 
__buÊí
,

378 
¥Ÿ€¡
 **
__ª°ri˘
 
__ªsu…
);

380 
	`gë¥Ÿoby«me_r
 (
__c⁄°
 *
__ª°ri˘
 
__«me
,

381 
¥Ÿ€¡
 *
__ª°ri˘
 
__ªsu…_buf
,

382 *
__ª°ri˘
 
__buf
, 
size_t
 
__buÊí
,

383 
¥Ÿ€¡
 **
__ª°ri˘
 
__ªsu…
);

385 
	`gë¥Ÿobynumbî_r
 (
__¥Ÿo
,

386 
¥Ÿ€¡
 *
__ª°ri˘
 
__ªsu…_buf
,

387 *
__ª°ri˘
 
__buf
, 
size_t
 
__buÊí
,

388 
¥Ÿ€¡
 **
__ª°ri˘
 
__ªsu…
);

397 
	`£äëgª¡
 (
__c⁄°
 *
__√tgroup
);

405 
	`íd√tgª¡
 ();

414 
	`gë√tgª¡
 (**
__ª°ri˘
 
__ho°p
,

415 **
__ª°ri˘
 
__u£Ω
,

416 **
__ª°ri˘
 
__domaöp
);

425 
	`ö√tgr
 (
__c⁄°
 *
__√tgroup
, __c⁄° *
__ho°
,

426 
__c⁄°
 *
__u£r
, __c⁄° *
__domaö
);

434 
	`gë√tgª¡_r
 (**
__ª°ri˘
 
__ho°p
,

435 **
__ª°ri˘
 
__u£Ω
,

436 **
__ª°ri˘
 
__domaöp
,

437 *
__ª°ri˘
 
__buf„r
, 
size_t
 
__buÊí
);

441 #ifde‡
__USE_BSD


453 
	`rcmd
 (**
__ª°ri˘
 
__aho°
, 
__Ω‹t
,

454 
__c⁄°
 *
__ª°ri˘
 
__locu£r
,

455 
__c⁄°
 *
__ª°ri˘
 
__ªmu£r
,

456 
__c⁄°
 *
__ª°ri˘
 
__cmd
, *__ª°ri˘ 
__fd2p
);

465 
	`rcmd_af
 (**
__ª°ri˘
 
__aho°
, 
__Ω‹t
,

466 
__c⁄°
 *
__ª°ri˘
 
__locu£r
,

467 
__c⁄°
 *
__ª°ri˘
 
__ªmu£r
,

468 
__c⁄°
 *
__ª°ri˘
 
__cmd
, *__ª°ri˘ 
__fd2p
,

469 
ß_Ámûy_t
 
__af
);

481 
	`ªxec
 (**
__ª°ri˘
 
__aho°
, 
__Ω‹t
,

482 
__c⁄°
 *
__ª°ri˘
 
__«me
,

483 
__c⁄°
 *
__ª°ri˘
 
__∑ss
,

484 
__c⁄°
 *
__ª°ri˘
 
__cmd
, *__ª°ri˘ 
__fd2p
);

493 
	`ªxec_af
 (**
__ª°ri˘
 
__aho°
, 
__Ω‹t
,

494 
__c⁄°
 *
__ª°ri˘
 
__«me
,

495 
__c⁄°
 *
__ª°ri˘
 
__∑ss
,

496 
__c⁄°
 *
__ª°ri˘
 
__cmd
, *__ª°ri˘ 
__fd2p
,

497 
ß_Ámûy_t
 
__af
);

507 
	`ru£rok
 (
__c⁄°
 *
__rho°
, 
__su£r
,

508 
__c⁄°
 *
__ªmu£r
, __c⁄° *
__locu£r
);

517 
	`ru£rok_af
 (
__c⁄°
 *
__rho°
, 
__su£r
,

518 
__c⁄°
 *
__ªmu£r
, __c⁄° *
__locu£r
,

519 
ß_Ámûy_t
 
__af
);

530 
	`úu£rok
 (
uöt32_t
 
__øddr
, 
__su£r
,

531 
__c⁄°
 *
__ªmu£r
, __c⁄° *
__locu£r
);

541 
	`úu£rok_af
 (
__c⁄°
 *
__øddr
, 
__su£r
,

542 
__c⁄°
 *
__ªmu£r
, __c⁄° *
__locu£r
,

543 
ß_Ámûy_t
 
__af
);

553 
	`ºesvp‹t
 (*
__Æp‹t
);

562 
	`ºesvp‹t_af
 (*
__Æp‹t
, 
ß_Ámûy_t
 
__af
);

567 #ifdef 
__USE_POSIX


569 
	saddröfo


571 
ai_Êags
;

572 
ai_Ámûy
;

573 
ai_sockty≥
;

574 
ai_¥Ÿocﬁ
;

575 
sockÀn_t
 
ai_addæí
;

576 
sockaddr
 *
ai_addr
;

577 *
ai_ˇn⁄«me
;

578 
addröfo
 *
ai_√xt
;

581 #ifde‡
__USE_GNU


583 
	sgaicb


585 c⁄° *
¨_«me
;

586 c⁄° *
¨_£rvi˚
;

587 c⁄° 
addröfo
 *
¨_ªque°
;

588 
addröfo
 *
¨_ªsu…
;

590 
__ªtu∫
;

591 
__unu£d
[5];

595 
	#GAI_WAIT
 0

	)

596 
	#GAI_NOWAIT
 1

	)

600 
	#AI_PASSIVE
 0x0001

	)

601 
	#AI_CANONNAME
 0x0002

	)

602 
	#AI_NUMERICHOST
 0x0004

	)

603 
	#AI_V4MAPPED
 0x0008

	)

604 
	#AI_ALL
 0x0010

	)

605 
	#AI_ADDRCONFIG
 0x0020

	)

607 #ifde‡
__USE_GNU


608 
	#AI_IDN
 0x0040

	)

611 
	#AI_CANONIDN
 0x0080

	)

612 
	#AI_IDN_ALLOW_UNASSIGNED
 0x0100

	)

614 
	#AI_IDN_USE_STD3_ASCII_RULES
 0x0200

	)

617 
	#AI_NUMERICSERV
 0x0400

	)

620 
	#EAI_BADFLAGS
 -1

	)

621 
	#EAI_NONAME
 -2

	)

622 
	#EAI_AGAIN
 -3

	)

623 
	#EAI_FAIL
 -4

	)

624 
	#EAI_FAMILY
 -6

	)

625 
	#EAI_SOCKTYPE
 -7

	)

626 
	#EAI_SERVICE
 -8

	)

627 
	#EAI_MEMORY
 -10

	)

628 
	#EAI_SYSTEM
 -11

	)

629 
	#EAI_OVERFLOW
 -12

	)

630 #ifde‡
__USE_GNU


631 
	#EAI_NODATA
 -5

	)

632 
	#EAI_ADDRFAMILY
 -9

	)

633 
	#EAI_INPROGRESS
 -100

	)

634 
	#EAI_CANCELED
 -101

	)

635 
	#EAI_NOTCANCELED
 -102

	)

636 
	#EAI_ALLDONE
 -103

	)

637 
	#EAI_INTR
 -104

	)

638 
	#EAI_IDN_ENCODE
 -105

	)

641 #ifde‡
__USE_MISC


642 
	#NI_MAXHOST
 1025

	)

643 
	#NI_MAXSERV
 32

	)

646 
	#NI_NUMERICHOST
 1

	)

647 
	#NI_NUMERICSERV
 2

	)

648 
	#NI_NOFQDN
 4

	)

649 
	#NI_NAMEREQD
 8

	)

650 
	#NI_DGRAM
 16

	)

651 #ifde‡
__USE_GNU


652 
	#NI_IDN
 32

	)

653 
	#NI_IDN_ALLOW_UNASSIGNED
 64

	)

655 
	#NI_IDN_USE_STD3_ASCII_RULES
 128

	)

664 
	`gëaddröfo
 (
__c⁄°
 *
__ª°ri˘
 
__«me
,

665 
__c⁄°
 *
__ª°ri˘
 
__£rvi˚
,

666 
__c⁄°
 
addröfo
 *
__ª°ri˘
 
__ªq
,

667 
addröfo
 **
__ª°ri˘
 
__∑i
);

670 
	$‰ìaddröfo
 (
addröfo
 *
__ai
Ë
__THROW
;

673 
__c⁄°
 *
	$gai_°ªº‹
 (
__ecode
Ë
__THROW
;

679 
	`gë«meöfo
 (
__c⁄°
 
sockaddr
 *
__ª°ri˘
 
__ß
,

680 
sockÀn_t
 
__ßÀn
, *
__ª°ri˘
 
__ho°
,

681 
sockÀn_t
 
__ho°Àn
, *
__ª°ri˘
 
__£rv
,

682 
sockÀn_t
 
__£rvÀn
, 
__Êags
);

685 #ifde‡
__USE_GNU


694 
	`gëaddröfo_a
 (
__mode
, 
gaicb
 *
__li°
[
__ª°ri˘_¨r
],

695 
__ít
, 
sigevít
 *
__ª°ri˘
 
__sig
);

705 
	`gai_su•íd
 (
__c⁄°
 
gaicb
 *__c⁄° 
__li°
[], 
__ít
,

706 
__c⁄°
 
time•ec
 *
__timeout
);

709 
	$gai_îr‹
 (
gaicb
 *
__ªq
Ë
__THROW
;

712 
	$gai_ˇn˚l
 (
gaicb
 *
__gaicbp
Ë
__THROW
;

715 
__END_DECLS


	@/usr/include/netinet/icmp6.h

19 #i‚de‡
_NETINET_ICMP6_H


20 
	#_NETINET_ICMP6_H
 1

	)

22 
	~<öây≥s.h
>

23 
	~<°rög.h
>

24 
	~<sys/ty≥s.h
>

25 
	~<√töë/ö.h
>

27 
	#ICMP6_FILTER
 1

	)

29 
	#ICMP6_FILTER_BLOCK
 1

	)

30 
	#ICMP6_FILTER_PASS
 2

	)

31 
	#ICMP6_FILTER_BLOCKOTHERS
 3

	)

32 
	#ICMP6_FILTER_PASSONLY
 4

	)

34 
	sicmp6_fûãr


36 
uöt32_t
 
	micmp6_fût
[8];

39 
	sicmp6_hdr


41 
uöt8_t
 
	micmp6_ty≥
;

42 
uöt8_t
 
	micmp6_code
;

43 
uöt16_t
 
	micmp6_cksum
;

46 
uöt32_t
 
	micmp6_un_d©a32
[1];

47 
uöt16_t
 
	micmp6_un_d©a16
[2];

48 
uöt8_t
 
	micmp6_un_d©a8
[4];

49 } 
	micmp6_d©aun
;

52 
	#icmp6_d©a32
 
icmp6_d©aun
.
icmp6_un_d©a32


	)

53 
	#icmp6_d©a16
 
icmp6_d©aun
.
icmp6_un_d©a16


	)

54 
	#icmp6_d©a8
 
icmp6_d©aun
.
icmp6_un_d©a8


	)

55 
	#icmp6_µå
 
icmp6_d©a32
[0]

	)

56 
	#icmp6_mtu
 
icmp6_d©a32
[0]

	)

57 
	#icmp6_id
 
icmp6_d©a16
[0]

	)

58 
	#icmp6_£q
 
icmp6_d©a16
[1]

	)

59 
	#icmp6_maxdñay
 
icmp6_d©a16
[0]

	)

61 
	#ICMP6_DST_UNREACH
 1

	)

62 
	#ICMP6_PACKET_TOO_BIG
 2

	)

63 
	#ICMP6_TIME_EXCEEDED
 3

	)

64 
	#ICMP6_PARAM_PROB
 4

	)

66 
	#ICMP6_INFOMSG_MASK
 0x80

	)

68 
	#ICMP6_ECHO_REQUEST
 128

	)

69 
	#ICMP6_ECHO_REPLY
 129

	)

70 
	#MLD_LISTENER_QUERY
 130

	)

71 
	#MLD_LISTENER_REPORT
 131

	)

72 
	#MLD_LISTENER_REDUCTION
 132

	)

74 
	#ICMP6_DST_UNREACH_NOROUTE
 0

	)

75 
	#ICMP6_DST_UNREACH_ADMIN
 1

	)

77 
	#ICMP6_DST_UNREACH_BEYONDSCOPE
 2

	)

78 
	#ICMP6_DST_UNREACH_ADDR
 3

	)

79 
	#ICMP6_DST_UNREACH_NOPORT
 4

	)

81 
	#ICMP6_TIME_EXCEED_TRANSIT
 0

	)

82 
	#ICMP6_TIME_EXCEED_REASSEMBLY
 1

	)

84 
	#ICMP6_PARAMPROB_HEADER
 0

	)

85 
	#ICMP6_PARAMPROB_NEXTHEADER
 1

	)

86 
	#ICMP6_PARAMPROB_OPTION
 2

	)

88 
	#ICMP6_FILTER_WILLPASS
(
ty≥
, 
fûãΩ
) \

89 ((((
fûãΩ
)->
icmp6_fût
[(
ty≥
Ë>> 5]Ë& (1 << (—y≥Ë& 31))Ë=0)

	)

91 
	#ICMP6_FILTER_WILLBLOCK
(
ty≥
, 
fûãΩ
) \

92 ((((
fûãΩ
)->
icmp6_fût
[(
ty≥
Ë>> 5]Ë& (1 << (—y≥Ë& 31))Ë!0)

	)

94 
	#ICMP6_FILTER_SETPASS
(
ty≥
, 
fûãΩ
) \

95 ((((
fûãΩ
)->
icmp6_fût
[(
ty≥
Ë>> 5]Ë&~(1 << (—y≥Ë& 31))))

	)

97 
	#ICMP6_FILTER_SETBLOCK
(
ty≥
, 
fûãΩ
) \

98 ((((
fûãΩ
)->
icmp6_fût
[(
ty≥
Ë>> 5]Ë|(1 << (—y≥Ë& 31))))

	)

100 
	#ICMP6_FILTER_SETPASSALL
(
fûãΩ
) \

101 
	`mem£t
 (
fûãΩ
, 0,  (
icmp6_fûãr
));

	)

103 
	#ICMP6_FILTER_SETBLOCKALL
(
fûãΩ
) \

104 
	`mem£t
 (
fûãΩ
, 0xFF,  (
icmp6_fûãr
));

	)

106 
	#ND_ROUTER_SOLICIT
 133

	)

107 
	#ND_ROUTER_ADVERT
 134

	)

108 
	#ND_NEIGHBOR_SOLICIT
 135

	)

109 
	#ND_NEIGHBOR_ADVERT
 136

	)

110 
	#ND_REDIRECT
 137

	)

112 
	snd_rouãr_sﬁicô


114 
icmp6_hdr
 
	mnd_rs_hdr
;

118 
	#nd_rs_ty≥
 
nd_rs_hdr
.
icmp6_ty≥


	)

119 
	#nd_rs_code
 
nd_rs_hdr
.
icmp6_code


	)

120 
	#nd_rs_cksum
 
nd_rs_hdr
.
icmp6_cksum


	)

121 
	#nd_rs_ª£rved
 
nd_rs_hdr
.
icmp6_d©a32
[0]

	)

123 
	snd_rouãr_advît


125 
icmp6_hdr
 
	mnd_ø_hdr
;

126 
uöt32_t
 
	mnd_ø_ªachabÀ
;

127 
uöt32_t
 
	mnd_ø_ªå™smô
;

131 
	#nd_ø_ty≥
 
nd_ø_hdr
.
icmp6_ty≥


	)

132 
	#nd_ø_code
 
nd_ø_hdr
.
icmp6_code


	)

133 
	#nd_ø_cksum
 
nd_ø_hdr
.
icmp6_cksum


	)

134 
	#nd_ø_curh›limô
 
nd_ø_hdr
.
icmp6_d©a8
[0]

	)

135 
	#nd_ø_Êags_ª£rved
 
nd_ø_hdr
.
icmp6_d©a8
[1]

	)

136 
	#ND_RA_FLAG_MANAGED
 0x80

	)

137 
	#ND_RA_FLAG_OTHER
 0x40

	)

138 
	#ND_RA_FLAG_HOME_AGENT
 0x20

	)

139 
	#nd_ø_rouãr_li„time
 
nd_ø_hdr
.
icmp6_d©a16
[1]

	)

141 
	snd_√ighb‹_sﬁicô


143 
icmp6_hdr
 
	mnd_ns_hdr
;

144 
ö6_addr
 
	mnd_ns_èrgë
;

148 
	#nd_ns_ty≥
 
nd_ns_hdr
.
icmp6_ty≥


	)

149 
	#nd_ns_code
 
nd_ns_hdr
.
icmp6_code


	)

150 
	#nd_ns_cksum
 
nd_ns_hdr
.
icmp6_cksum


	)

151 
	#nd_ns_ª£rved
 
nd_ns_hdr
.
icmp6_d©a32
[0]

	)

153 
	snd_√ighb‹_advît


155 
icmp6_hdr
 
	mnd_«_hdr
;

156 
ö6_addr
 
	mnd_«_èrgë
;

160 
	#nd_«_ty≥
 
nd_«_hdr
.
icmp6_ty≥


	)

161 
	#nd_«_code
 
nd_«_hdr
.
icmp6_code


	)

162 
	#nd_«_cksum
 
nd_«_hdr
.
icmp6_cksum


	)

163 
	#nd_«_Êags_ª£rved
 
nd_«_hdr
.
icmp6_d©a32
[0]

	)

164 #i‡ 
BYTE_ORDER
 =
BIG_ENDIAN


165 
	#ND_NA_FLAG_ROUTER
 0x80000000

	)

166 
	#ND_NA_FLAG_SOLICITED
 0x40000000

	)

167 
	#ND_NA_FLAG_OVERRIDE
 0x20000000

	)

169 
	#ND_NA_FLAG_ROUTER
 0x00000080

	)

170 
	#ND_NA_FLAG_SOLICITED
 0x00000040

	)

171 
	#ND_NA_FLAG_OVERRIDE
 0x00000020

	)

174 
	snd_ªdúe˘


176 
icmp6_hdr
 
	mnd_rd_hdr
;

177 
ö6_addr
 
	mnd_rd_èrgë
;

178 
ö6_addr
 
	mnd_rd_d°
;

182 
	#nd_rd_ty≥
 
nd_rd_hdr
.
icmp6_ty≥


	)

183 
	#nd_rd_code
 
nd_rd_hdr
.
icmp6_code


	)

184 
	#nd_rd_cksum
 
nd_rd_hdr
.
icmp6_cksum


	)

185 
	#nd_rd_ª£rved
 
nd_rd_hdr
.
icmp6_d©a32
[0]

	)

187 
	snd_›t_hdr


189 
uöt8_t
 
	mnd_›t_ty≥
;

190 
uöt8_t
 
	mnd_›t_Àn
;

194 
	#ND_OPT_SOURCE_LINKADDR
 1

	)

195 
	#ND_OPT_TARGET_LINKADDR
 2

	)

196 
	#ND_OPT_PREFIX_INFORMATION
 3

	)

197 
	#ND_OPT_REDIRECTED_HEADER
 4

	)

198 
	#ND_OPT_MTU
 5

	)

199 
	#ND_OPT_RTR_ADV_INTERVAL
 7

	)

200 
	#ND_OPT_HOME_AGENT_INFO
 8

	)

202 
	snd_›t_¥efix_öfo


204 
uöt8_t
 
	mnd_›t_pi_ty≥
;

205 
uöt8_t
 
	mnd_›t_pi_Àn
;

206 
uöt8_t
 
	mnd_›t_pi_¥efix_Àn
;

207 
uöt8_t
 
	mnd_›t_pi_Êags_ª£rved
;

208 
uöt32_t
 
	mnd_›t_pi_vÆid_time
;

209 
uöt32_t
 
	mnd_›t_pi_¥e„ºed_time
;

210 
uöt32_t
 
	mnd_›t_pi_ª£rved2
;

211 
ö6_addr
 
	mnd_›t_pi_¥efix
;

214 
	#ND_OPT_PI_FLAG_ONLINK
 0x80

	)

215 
	#ND_OPT_PI_FLAG_AUTO
 0x40

	)

216 
	#ND_OPT_PI_FLAG_RADDR
 0x20

	)

218 
	snd_›t_rd_hdr


220 
uöt8_t
 
	mnd_›t_rh_ty≥
;

221 
uöt8_t
 
	mnd_›t_rh_Àn
;

222 
uöt16_t
 
	mnd_›t_rh_ª£rved1
;

223 
uöt32_t
 
	mnd_›t_rh_ª£rved2
;

227 
	snd_›t_mtu


229 
uöt8_t
 
	mnd_›t_mtu_ty≥
;

230 
uöt8_t
 
	mnd_›t_mtu_Àn
;

231 
uöt16_t
 
	mnd_›t_mtu_ª£rved
;

232 
uöt32_t
 
	mnd_›t_mtu_mtu
;

235 
	smld_hdr


237 
icmp6_hdr
 
	mmld_icmp6_hdr
;

238 
ö6_addr
 
	mmld_addr
;

241 
	#mld_ty≥
 
mld_icmp6_hdr
.
icmp6_ty≥


	)

242 
	#mld_code
 
mld_icmp6_hdr
.
icmp6_code


	)

243 
	#mld_cksum
 
mld_icmp6_hdr
.
icmp6_cksum


	)

244 
	#mld_maxdñay
 
mld_icmp6_hdr
.
icmp6_d©a16
[0]

	)

245 
	#mld_ª£rved
 
mld_icmp6_hdr
.
icmp6_d©a16
[1]

	)

247 
	#ICMP6_ROUTER_RENUMBERING
 138

	)

249 
	sicmp6_rouãr_ªnum


251 
icmp6_hdr
 
	mº_hdr
;

252 
uöt8_t
 
	mº_£gnum
;

253 
uöt8_t
 
	mº_Êags
;

254 
uöt16_t
 
	mº_maxdñay
;

255 
uöt32_t
 
	mº_ª£rved
;

258 
	#º_ty≥
 
º_hdr
.
icmp6_ty≥


	)

259 
	#º_code
 
º_hdr
.
icmp6_code


	)

260 
	#º_cksum
 
º_hdr
.
icmp6_cksum


	)

261 
	#º_£qnum
 
º_hdr
.
icmp6_d©a32
[0]

	)

264 
	#ICMP6_RR_FLAGS_TEST
 0x80

	)

265 
	#ICMP6_RR_FLAGS_REQRESULT
 0x40

	)

266 
	#ICMP6_RR_FLAGS_FORCEAPPLY
 0x20

	)

267 
	#ICMP6_RR_FLAGS_SPECSITE
 0x10

	)

268 
	#ICMP6_RR_FLAGS_PREVDONE
 0x08

	)

270 
	sº_pco_m©ch


272 
uöt8_t
 
	mΩm_code
;

273 
uöt8_t
 
	mΩm_Àn
;

274 
uöt8_t
 
	mΩm_‹döÆ
;

275 
uöt8_t
 
	mΩm_m©chÀn
;

276 
uöt8_t
 
	mΩm_möÀn
;

277 
uöt8_t
 
	mΩm_maxÀn
;

278 
uöt16_t
 
	mΩm_ª£rved
;

279 
ö6_addr
 
	mΩm_¥efix
;

283 
	#RPM_PCO_ADD
 1

	)

284 
	#RPM_PCO_CHANGE
 2

	)

285 
	#RPM_PCO_SETGLOBAL
 3

	)

287 
	sº_pco_u£


289 
uöt8_t
 
	mΩu_u£Àn
;

290 
uöt8_t
 
	mΩu_kì∂í
;

291 
uöt8_t
 
	mΩu_ømask
;

292 
uöt8_t
 
	mΩu_øÊags
;

293 
uöt32_t
 
	mΩu_v…ime
;

294 
uöt32_t
 
	mΩu_∂time
;

295 
uöt32_t
 
	mΩu_Êags
;

296 
ö6_addr
 
	mΩu_¥efix
;

299 
	#ICMP6_RR_PCOUSE_RAFLAGS_ONLINK
 0x20

	)

300 
	#ICMP6_RR_PCOUSE_RAFLAGS_AUTO
 0x10

	)

302 #i‡
BYTE_ORDER
 =
BIG_ENDIAN


303 
	#ICMP6_RR_PCOUSE_FLAGS_DECRVLTIME
 0x80000000

	)

304 
	#ICMP6_RR_PCOUSE_FLAGS_DECRPLTIME
 0x40000000

	)

305 #ñi‡
BYTE_ORDER
 =
LITTLE_ENDIAN


306 
	#ICMP6_RR_PCOUSE_FLAGS_DECRVLTIME
 0x80

	)

307 
	#ICMP6_RR_PCOUSE_FLAGS_DECRPLTIME
 0x40

	)

310 
	sº_ªsu…


312 
uöt16_t
 
	mºr_Êags
;

313 
uöt8_t
 
	mºr_‹döÆ
;

314 
uöt8_t
 
	mºr_m©chedÀn
;

315 
uöt32_t
 
	mºr_ifid
;

316 
ö6_addr
 
	mºr_¥efix
;

319 #i‡
BYTE_ORDER
 =
BIG_ENDIAN


320 
	#ICMP6_RR_RESULT_FLAGS_OOB
 0x0002

	)

321 
	#ICMP6_RR_RESULT_FLAGS_FORBIDDEN
 0x0001

	)

322 #ñi‡
BYTE_ORDER
 =
LITTLE_ENDIAN


323 
	#ICMP6_RR_RESULT_FLAGS_OOB
 0x0200

	)

324 
	#ICMP6_RR_RESULT_FLAGS_FORBIDDEN
 0x0100

	)

328 
	snd_›t_adv_öãrvÆ


330 
uöt8_t
 
	mnd_›t_adv_öãrvÆ_ty≥
;

331 
uöt8_t
 
	mnd_›t_adv_öãrvÆ_Àn
;

332 
uöt16_t
 
	mnd_›t_adv_öãrvÆ_ª£rved
;

333 
uöt32_t
 
	mnd_›t_adv_öãrvÆ_ivÆ
;

337 
	snd_›t_home_agít_öfo


339 
uöt8_t
 
	mnd_›t_home_agít_öfo_ty≥
;

340 
uöt8_t
 
	mnd_›t_home_agít_öfo_Àn
;

341 
uöt16_t
 
	mnd_›t_home_agít_öfo_ª£rved
;

342 
uöt16_t
 
	mnd_›t_home_agít_öfo_¥e„ªn˚
;

343 
uöt16_t
 
	mnd_›t_home_agít_öfo_li„time
;

	@/usr/include/netinet/in.h

20 #i‚def 
_NETINET_IN_H


21 
	#_NETINET_IN_H
 1

	)

23 
	~<„©uªs.h
>

24 
	~<°döt.h
>

25 
	~<sys/sockë.h
>

26 
	~<bôs/ty≥s.h
>

29 
__BEGIN_DECLS


34 
	mIPPROTO_IP
 = 0,

35 
	#IPPROTO_IP
 
IPPROTO_IP


	)

36 
	mIPPROTO_HOPOPTS
 = 0,

37 
	#IPPROTO_HOPOPTS
 
IPPROTO_HOPOPTS


	)

38 
	mIPPROTO_ICMP
 = 1,

39 
	#IPPROTO_ICMP
 
IPPROTO_ICMP


	)

40 
	mIPPROTO_IGMP
 = 2,

41 
	#IPPROTO_IGMP
 
IPPROTO_IGMP


	)

42 
	mIPPROTO_IPIP
 = 4,

43 
	#IPPROTO_IPIP
 
IPPROTO_IPIP


	)

44 
	mIPPROTO_TCP
 = 6,

45 
	#IPPROTO_TCP
 
IPPROTO_TCP


	)

46 
	mIPPROTO_EGP
 = 8,

47 
	#IPPROTO_EGP
 
IPPROTO_EGP


	)

48 
	mIPPROTO_PUP
 = 12,

49 
	#IPPROTO_PUP
 
IPPROTO_PUP


	)

50 
	mIPPROTO_UDP
 = 17,

51 
	#IPPROTO_UDP
 
IPPROTO_UDP


	)

52 
	mIPPROTO_IDP
 = 22,

53 
	#IPPROTO_IDP
 
IPPROTO_IDP


	)

54 
	mIPPROTO_TP
 = 29,

55 
	#IPPROTO_TP
 
IPPROTO_TP


	)

56 
	mIPPROTO_DCCP
 = 33,

57 
	#IPPROTO_DCCP
 
IPPROTO_DCCP


	)

58 
	mIPPROTO_IPV6
 = 41,

59 
	#IPPROTO_IPV6
 
IPPROTO_IPV6


	)

60 
	mIPPROTO_ROUTING
 = 43,

61 
	#IPPROTO_ROUTING
 
IPPROTO_ROUTING


	)

62 
	mIPPROTO_FRAGMENT
 = 44,

63 
	#IPPROTO_FRAGMENT
 
IPPROTO_FRAGMENT


	)

64 
	mIPPROTO_RSVP
 = 46,

65 
	#IPPROTO_RSVP
 
IPPROTO_RSVP


	)

66 
	mIPPROTO_GRE
 = 47,

67 
	#IPPROTO_GRE
 
IPPROTO_GRE


	)

68 
	mIPPROTO_ESP
 = 50,

69 
	#IPPROTO_ESP
 
IPPROTO_ESP


	)

70 
	mIPPROTO_AH
 = 51,

71 
	#IPPROTO_AH
 
IPPROTO_AH


	)

72 
	mIPPROTO_ICMPV6
 = 58,

73 
	#IPPROTO_ICMPV6
 
IPPROTO_ICMPV6


	)

74 
	mIPPROTO_NONE
 = 59,

75 
	#IPPROTO_NONE
 
IPPROTO_NONE


	)

76 
	mIPPROTO_DSTOPTS
 = 60,

77 
	#IPPROTO_DSTOPTS
 
IPPROTO_DSTOPTS


	)

78 
	mIPPROTO_MTP
 = 92,

79 
	#IPPROTO_MTP
 
IPPROTO_MTP


	)

80 
	mIPPROTO_ENCAP
 = 98,

81 
	#IPPROTO_ENCAP
 
IPPROTO_ENCAP


	)

82 
	mIPPROTO_PIM
 = 103,

83 
	#IPPROTO_PIM
 
IPPROTO_PIM


	)

84 
	mIPPROTO_COMP
 = 108,

85 
	#IPPROTO_COMP
 
IPPROTO_COMP


	)

86 
	mIPPROTO_SCTP
 = 132,

87 
	#IPPROTO_SCTP
 
IPPROTO_SCTP


	)

88 
	mIPPROTO_UDPLITE
 = 136,

89 
	#IPPROTO_UDPLITE
 
IPPROTO_UDPLITE


	)

90 
	mIPPROTO_RAW
 = 255,

91 
	#IPPROTO_RAW
 
IPPROTO_RAW


	)

92 
	mIPPROTO_MAX


97 
uöt16_t
 
	tö_p‹t_t
;

102 
	mIPPORT_ECHO
 = 7,

103 
	mIPPORT_DISCARD
 = 9,

104 
	mIPPORT_SYSTAT
 = 11,

105 
	mIPPORT_DAYTIME
 = 13,

106 
	mIPPORT_NETSTAT
 = 15,

107 
	mIPPORT_FTP
 = 21,

108 
	mIPPORT_TELNET
 = 23,

109 
	mIPPORT_SMTP
 = 25,

110 
	mIPPORT_TIMESERVER
 = 37,

111 
	mIPPORT_NAMESERVER
 = 42,

112 
	mIPPORT_WHOIS
 = 43,

113 
	mIPPORT_MTP
 = 57,

115 
	mIPPORT_TFTP
 = 69,

116 
	mIPPORT_RJE
 = 77,

117 
	mIPPORT_FINGER
 = 79,

118 
	mIPPORT_TTYLINK
 = 87,

119 
	mIPPORT_SUPDUP
 = 95,

122 
	mIPPORT_EXECSERVER
 = 512,

123 
	mIPPORT_LOGINSERVER
 = 513,

124 
	mIPPORT_CMDSERVER
 = 514,

125 
	mIPPORT_EFSSERVER
 = 520,

128 
	mIPPORT_BIFFUDP
 = 512,

129 
	mIPPORT_WHOSERVER
 = 513,

130 
	mIPPORT_ROUTESERVER
 = 520,

133 
	mIPPORT_RESERVED
 = 1024,

136 
	mIPPORT_USERRESERVED
 = 5000

141 
uöt32_t
 
	tö_addr_t
;

142 
	sö_addr


144 
ö_addr_t
 
	ms_addr
;

153 
	#IN_CLASSA
(
a
Ë((((
ö_addr_t
)◊)Ë& 0x80000000Ë=0)

	)

154 
	#IN_CLASSA_NET
 0xff000000

	)

155 
	#IN_CLASSA_NSHIFT
 24

	)

156 
	#IN_CLASSA_HOST
 (0xfffffff‡& ~
IN_CLASSA_NET
)

	)

157 
	#IN_CLASSA_MAX
 128

	)

159 
	#IN_CLASSB
(
a
Ë((((
ö_addr_t
)◊)Ë& 0xc0000000Ë=0x80000000)

	)

160 
	#IN_CLASSB_NET
 0xffff0000

	)

161 
	#IN_CLASSB_NSHIFT
 16

	)

162 
	#IN_CLASSB_HOST
 (0xfffffff‡& ~
IN_CLASSB_NET
)

	)

163 
	#IN_CLASSB_MAX
 65536

	)

165 
	#IN_CLASSC
(
a
Ë((((
ö_addr_t
)◊)Ë& 0xe0000000Ë=0xc0000000)

	)

166 
	#IN_CLASSC_NET
 0xffffff00

	)

167 
	#IN_CLASSC_NSHIFT
 8

	)

168 
	#IN_CLASSC_HOST
 (0xfffffff‡& ~
IN_CLASSC_NET
)

	)

170 
	#IN_CLASSD
(
a
Ë((((
ö_addr_t
)◊)Ë& 0xf0000000Ë=0xe0000000)

	)

171 
	#IN_MULTICAST
(
a
Ë
	`IN_CLASSD
◊)

	)

173 
	#IN_EXPERIMENTAL
(
a
Ë((((
ö_addr_t
)◊)Ë& 0xe0000000Ë=0xe0000000)

	)

174 
	#IN_BADCLASS
(
a
Ë((((
ö_addr_t
)◊)Ë& 0xf0000000Ë=0xf0000000)

	)

177 
	#INADDR_ANY
 ((
ö_addr_t
Ë0x00000000)

	)

179 
	#INADDR_BROADCAST
 ((
ö_addr_t
Ë0xffffffff)

	)

181 
	#INADDR_NONE
 ((
ö_addr_t
Ë0xffffffff)

	)

184 
	#IN_LOOPBACKNET
 127

	)

186 #i‚de‡
INADDR_LOOPBACK


187 
	#INADDR_LOOPBACK
 ((
ö_addr_t
Ë0x7f000001Ë

	)

191 
	#INADDR_UNSPEC_GROUP
 ((
ö_addr_t
Ë0xe0000000Ë

	)

192 
	#INADDR_ALLHOSTS_GROUP
 ((
ö_addr_t
Ë0xe0000001Ë

	)

193 
	#INADDR_ALLRTRS_GROUP
 ((
ö_addr_t
Ë0xe0000002Ë

	)

194 
	#INADDR_MAX_LOCAL_GROUP
 ((
ö_addr_t
Ë0xe00000ffË

	)

198 
	sö6_addr


202 
uöt8_t
 
	m__u6_addr8
[16];

203 #i‡
deföed
 
__USE_MISC
 || deföed 
__USE_GNU


204 
uöt16_t
 
	m__u6_addr16
[8];

205 
uöt32_t
 
	m__u6_addr32
[4];

207 } 
	m__ö6_u
;

208 
	#s6_addr
 
__ö6_u
.
__u6_addr8


	)

209 #i‡
deföed
 
__USE_MISC
 || deföed 
__USE_GNU


210 
	#s6_addr16
 
__ö6_u
.
__u6_addr16


	)

211 
	#s6_addr32
 
__ö6_u
.
__u6_addr32


	)

215 c⁄° 
ö6_addr
 
ö6addr_™y
;

216 c⁄° 
ö6_addr
 
ö6addr_lo›back
;

217 
	#IN6ADDR_ANY_INIT
 { { { 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0 } } }

	)

218 
	#IN6ADDR_LOOPBACK_INIT
 { { { 0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1 } } }

	)

220 
	#INET_ADDRSTRLEN
 16

	)

221 
	#INET6_ADDRSTRLEN
 46

	)

225 
	ssockaddr_ö


227 
__SOCKADDR_COMMON
 (
sö_
);

228 
ö_p‹t_t
 
	msö_p‹t
;

229 
ö_addr
 
	msö_addr
;

232 
	msö_zîo
[ (
sockaddr
) -

233 
__SOCKADDR_COMMON_SIZE
 -

234  (
ö_p‹t_t
) -

235  (
ö_addr
)];

239 
	ssockaddr_ö6


241 
__SOCKADDR_COMMON
 (
sö6_
);

242 
ö_p‹t_t
 
	msö6_p‹t
;

243 
uöt32_t
 
	msö6_Êowöfo
;

244 
ö6_addr
 
	msö6_addr
;

245 
uöt32_t
 
	msö6_sc›e_id
;

249 #i‡
deföed
 
__USE_MISC
 || deföed 
__USE_GNU


251 
	sù_mªq


254 
ö_addr
 
	mimr_mu…üddr
;

257 
ö_addr
 
	mimr_öãrÁ˚
;

260 
	sù_mªq_sour˚


263 
ö_addr
 
	mimr_mu…üddr
;

266 
ö_addr
 
	mimr_öãrÁ˚
;

269 
ö_addr
 
	mimr_sour˚addr
;

275 
	sùv6_mªq


278 
ö6_addr
 
	mùv6mr_mu…üddr
;

281 
	mùv6mr_öãrÁ˚
;

285 #i‡
deföed
 
__USE_MISC
 || deföed 
__USE_GNU


287 
	sgroup_ªq


290 
uöt32_t
 
	mgr_öãrÁ˚
;

293 
sockaddr_°‹age
 
	mgr_group
;

296 
	sgroup_sour˚_ªq


299 
uöt32_t
 
	mg§_öãrÁ˚
;

302 
sockaddr_°‹age
 
	mg§_group
;

305 
sockaddr_°‹age
 
	mg§_sour˚
;

310 
	sù_msfûãr


313 
ö_addr
 
	mimsf_mu…üddr
;

316 
ö_addr
 
	mimsf_öãrÁ˚
;

319 
uöt32_t
 
	mimsf_fmode
;

322 
uöt32_t
 
	mimsf_num§c
;

324 
ö_addr
 
	mimsf_¶i°
[1];

327 
	#IP_MSFILTER_SIZE
(
num§c
Ë( (
ù_msfûãr
) \

328 -  (
ö_addr
) \

329 + (
num§c
Ë*  (
ö_addr
))

	)

331 
	sgroup_fûãr


334 
uöt32_t
 
	mgf_öãrÁ˚
;

337 
sockaddr_°‹age
 
	mgf_group
;

340 
uöt32_t
 
	mgf_fmode
;

343 
uöt32_t
 
	mgf_num§c
;

345 
sockaddr_°‹age
 
	mgf_¶i°
[1];

348 
	#GROUP_FILTER_SIZE
(
num§c
Ë( (
group_fûãr
) \

349 -  (
sockaddr_°‹age
) \

350 + ((
num§c
) \

351 *  (
sockaddr_°‹age
)))

	)

356 
	~<bôs/ö.h
>

365 
uöt32_t
 
	$¡ohl
 (
uöt32_t
 
__√é⁄g
Ë
__THROW
 
	`__©åibuã__
 ((
__c⁄°__
));

366 
uöt16_t
 
	$¡ohs
 (
uöt16_t
 
__√tsh‹t
)

367 
__THROW
 
	`__©åibuã__
 ((
__c⁄°__
));

368 
uöt32_t
 
	$ht⁄l
 (
uöt32_t
 
__ho°l⁄g
)

369 
__THROW
 
	`__©åibuã__
 ((
__c⁄°__
));

370 
uöt16_t
 
	$ht⁄s
 (
uöt16_t
 
__ho°sh‹t
)

371 
__THROW
 
	`__©åibuã__
 ((
__c⁄°__
));

373 
	~<ídün.h
>

376 
	~<bôs/byãsw≠.h
>

378 #ifde‡
__OPTIMIZE__


382 #i‡
__BYTE_ORDER
 =
__BIG_ENDIAN


385 
	#¡ohl
(
x
Ë(x)

	)

386 
	#¡ohs
(
x
Ë(x)

	)

387 
	#ht⁄l
(
x
Ë(x)

	)

388 
	#ht⁄s
(
x
Ë(x)

	)

390 #i‡
__BYTE_ORDER
 =
__LITTLE_ENDIAN


391 
	#¡ohl
(
x
Ë
	`__bsw≠_32
 (x)

	)

392 
	#¡ohs
(
x
Ë
	`__bsw≠_16
 (x)

	)

393 
	#ht⁄l
(
x
Ë
	`__bsw≠_32
 (x)

	)

394 
	#ht⁄s
(
x
Ë
	`__bsw≠_16
 (x)

	)

399 #ifde‡
__GNUC__


400 
	#IN6_IS_ADDR_UNSPECIFIED
(
a
) \

401 (
__exãnsi⁄__
 \

402 ({ 
__c⁄°
 
ö6_addr
 *
__a
 = (__c⁄° ö6_add∏*Ë(
a
); \

403 
__a
->
s6_addr32
[0] == 0 \

404 && 
__a
->
s6_addr32
[1] == 0 \

405 && 
__a
->
s6_addr32
[2] == 0 \

406 && 
__a
->
s6_addr32
[3] =0; 
	}
}))

	)

408 
	#IN6_IS_ADDR_LOOPBACK
(
a
) \

409 (
__exãnsi⁄__
 \

410 ({ 
__c⁄°
 
ö6_addr
 *
__a
 = (__c⁄° ö6_add∏*Ë(
a
); \

411 
__a
->
s6_addr32
[0] == 0 \

412 && 
__a
->
s6_addr32
[1] == 0 \

413 && 
__a
->
s6_addr32
[2] == 0 \

414 && 
__a
->
s6_addr32
[3] =
	`ht⁄l
 (1); }))

	)

416 
	#IN6_IS_ADDR_LINKLOCAL
(
a
) \

417 (
__exãnsi⁄__
 \

418 ({ 
__c⁄°
 
ö6_addr
 *
__a
 = (__c⁄° ö6_add∏*Ë(
a
); \

419 (
__a
->
s6_addr32
[0] & 
	`ht⁄l
 (0xffc00000)Ë=ht⁄»(0x„800000); }))

	)

421 
	#IN6_IS_ADDR_SITELOCAL
(
a
) \

422 (
__exãnsi⁄__
 \

423 ({ 
__c⁄°
 
ö6_addr
 *
__a
 = (__c⁄° ö6_add∏*Ë(
a
); \

424 (
__a
->
s6_addr32
[0] & 
	`ht⁄l
 (0xffc00000)Ë=ht⁄»(0x„c00000); }))

	)

426 
	#IN6_IS_ADDR_V4MAPPED
(
a
) \

427 (
__exãnsi⁄__
 \

428 ({ 
__c⁄°
 
ö6_addr
 *
__a
 = (__c⁄° ö6_add∏*Ë(
a
); \

429 
__a
->
s6_addr32
[0] == 0 \

430 && 
__a
->
s6_addr32
[1] == 0 \

431 && 
__a
->
s6_addr32
[2] =
	`ht⁄l
 (0xffff); }))

	)

433 
	#IN6_IS_ADDR_V4COMPAT
(
a
) \

434 (
__exãnsi⁄__
 \

435 ({ 
__c⁄°
 
ö6_addr
 *
__a
 = (__c⁄° ö6_add∏*Ë(
a
); \

436 
__a
->
s6_addr32
[0] == 0 \

437 && 
__a
->
s6_addr32
[1] == 0 \

438 && 
__a
->
s6_addr32
[2] == 0 \

439 && 
	`¡ohl
 (
__a
->
s6_addr32
[3]Ë> 1; }))

	)

441 
	#IN6_ARE_ADDR_EQUAL
(
a
,
b
) \

442 (
__exãnsi⁄__
 \

443 ({ 
__c⁄°
 
ö6_addr
 *
__a
 = (__c⁄° ö6_add∏*Ë(
a
); \

444 
__c⁄°
 
ö6_addr
 *
__b
 = (__c⁄° ö6_add∏*Ë(
b
); \

445 
__a
->
s6_addr32
[0] =
__b
->s6_addr32[0] \

446 && 
__a
->
s6_addr32
[1] =
__b
->s6_addr32[1] \

447 && 
__a
->
s6_addr32
[2] =
__b
->s6_addr32[2] \

448 && 
__a
->
s6_addr32
[3] =
__b
->s6_addr32[3]; }))

	)

450 
	#IN6_IS_ADDR_UNSPECIFIED
(
a
) \

451 (((
__c⁄°
 
uöt32_t
 *Ë(
a
))[0] == 0 \

452 && ((
__c⁄°
 
uöt32_t
 *Ë(
a
))[1] == 0 \

453 && ((
__c⁄°
 
uöt32_t
 *Ë(
a
))[2] == 0 \

454 && ((
__c⁄°
 
uöt32_t
 *Ë(
a
))[3] =0)

	)

456 
	#IN6_IS_ADDR_LOOPBACK
(
a
) \

457 (((
__c⁄°
 
uöt32_t
 *Ë(
a
))[0] == 0 \

458 && ((
__c⁄°
 
uöt32_t
 *Ë(
a
))[1] == 0 \

459 && ((
__c⁄°
 
uöt32_t
 *Ë(
a
))[2] == 0 \

460 && ((
__c⁄°
 
uöt32_t
 *Ë(
a
))[3] =
	`ht⁄l
 (1))

	)

462 
	#IN6_IS_ADDR_LINKLOCAL
(
a
) \

463 ((((
__c⁄°
 
uöt32_t
 *Ë(
a
))[0] & 
	`ht⁄l
 (0xffc00000)) \

464 =
	`ht⁄l
 (0x„800000))

	)

466 
	#IN6_IS_ADDR_SITELOCAL
(
a
) \

467 ((((
__c⁄°
 
uöt32_t
 *Ë(
a
))[0] & 
	`ht⁄l
 (0xffc00000)) \

468 =
	`ht⁄l
 (0x„c00000))

	)

470 
	#IN6_IS_ADDR_V4MAPPED
(
a
) \

471 ((((
__c⁄°
 
uöt32_t
 *Ë(
a
))[0] == 0) \

472 && (((
__c⁄°
 
uöt32_t
 *Ë(
a
))[1] == 0) \

473 && (((
__c⁄°
 
uöt32_t
 *Ë(
a
))[2] =
	`ht⁄l
 (0xffff)))

	)

475 
	#IN6_IS_ADDR_V4COMPAT
(
a
) \

476 ((((
__c⁄°
 
uöt32_t
 *Ë(
a
))[0] == 0) \

477 && (((
__c⁄°
 
uöt32_t
 *Ë(
a
))[1] == 0) \

478 && (((
__c⁄°
 
uöt32_t
 *Ë(
a
))[2] == 0) \

479 && (
	`¡ohl
 (((
__c⁄°
 
uöt32_t
 *Ë(
a
))[3]Ë> 1))

	)

481 
	#IN6_ARE_ADDR_EQUAL
(
a
,
b
) \

482 ((((
__c⁄°
 
uöt32_t
 *Ë(
a
))[0] =((__c⁄° uöt32_à*Ë(
b
))[0]) \

483 && (((
__c⁄°
 
uöt32_t
 *Ë(
a
))[1] =((__c⁄° uöt32_à*Ë(
b
))[1]) \

484 && (((
__c⁄°
 
uöt32_t
 *Ë(
a
))[2] =((__c⁄° uöt32_à*Ë(
b
))[2]) \

485 && (((
__c⁄°
 
uöt32_t
 *Ë(
a
))[3] =((__c⁄° uöt32_à*Ë(
b
))[3]))

	)

488 
	#IN6_IS_ADDR_MULTICAST
(
a
Ë(((
__c⁄°
 
uöt8_t
 *Ë◊))[0] =0xff)

	)

490 #i‡
deföed
 
__USE_MISC
 || deföed 
__USE_GNU


492 
	$bödªsvp‹t
 (
__sockfd
, 
sockaddr_ö
 *
__sock_ö
Ë
__THROW
;

495 
	$bödªsvp‹t6
 (
__sockfd
, 
sockaddr_ö6
 *
__sock_ö
)

496 
__THROW
;

500 
	#IN6_IS_ADDR_MC_NODELOCAL
(
a
) \

501 (
	`IN6_IS_ADDR_MULTICAST
(
a
) \

502 && ((((
__c⁄°
 
uöt8_t
 *Ë(
a
))[1] & 0xfË=0x1))

	)

504 
	#IN6_IS_ADDR_MC_LINKLOCAL
(
a
) \

505 (
	`IN6_IS_ADDR_MULTICAST
(
a
) \

506 && ((((
__c⁄°
 
uöt8_t
 *Ë(
a
))[1] & 0xfË=0x2))

	)

508 
	#IN6_IS_ADDR_MC_SITELOCAL
(
a
) \

509 (
	`IN6_IS_ADDR_MULTICAST
(
a
) \

510 && ((((
__c⁄°
 
uöt8_t
 *Ë(
a
))[1] & 0xfË=0x5))

	)

512 
	#IN6_IS_ADDR_MC_ORGLOCAL
(
a
) \

513 (
	`IN6_IS_ADDR_MULTICAST
(
a
) \

514 && ((((
__c⁄°
 
uöt8_t
 *Ë(
a
))[1] & 0xfË=0x8))

	)

516 
	#IN6_IS_ADDR_MC_GLOBAL
(
a
) \

517 (
	`IN6_IS_ADDR_MULTICAST
(
a
) \

518 && ((((
__c⁄°
 
uöt8_t
 *Ë(
a
))[1] & 0xfË=0xe))

	)

521 #ifde‡
__USE_GNU


523 
	sö6_pktöfo


525 
ö6_addr
 
ùi6_addr
;

526 
ùi6_ifödex
;

530 
	sù6_mtuöfo


532 
sockaddr_ö6
 
ù6m_addr
;

533 
uöt32_t
 
ù6m_mtu
;

538 
	$öë6_›ti⁄_•a˚
 (
__nbyãs
)

539 
__THROW
 
__©åibuã_dïªˇãd__
;

540 
	$öë6_›ti⁄_öô
 (*
__bp
, 
cmsghdr
 **
__cmsgp
,

541 
__ty≥
Ë
__THROW
 
__©åibuã_dïªˇãd__
;

542 
	$öë6_›ti⁄_≠≥nd
 (
cmsghdr
 *
__cmsg
,

543 
__c⁄°
 
uöt8_t
 *
__ty≥p
, 
__mu…x
,

544 
__∂usy
Ë
__THROW
 
__©åibuã_dïªˇãd__
;

545 
uöt8_t
 *
	$öë6_›ti⁄_Æloc
 (
cmsghdr
 *
__cmsg
, 
__d©Æí
,

546 
__mu…x
, 
__∂usy
)

547 
__THROW
 
__©åibuã_dïªˇãd__
;

548 
	$öë6_›ti⁄_√xt
 (
__c⁄°
 
cmsghdr
 *
__cmsg
,

549 
uöt8_t
 **
__çåp
)

550 
__THROW
 
__©åibuã_dïªˇãd__
;

551 
	$öë6_›ti⁄_föd
 (
__c⁄°
 
cmsghdr
 *
__cmsg
,

552 
uöt8_t
 **
__çåp
, 
__ty≥
)

553 
__THROW
 
__©åibuã_dïªˇãd__
;

557 
	$öë6_›t_öô
 (*
__extbuf
, 
sockÀn_t
 
__exéí
Ë
__THROW
;

558 
	$öë6_›t_≠≥nd
 (*
__extbuf
, 
sockÀn_t
 
__exéí
, 
__off£t
,

559 
uöt8_t
 
__ty≥
, 
sockÀn_t
 
__Àn
, uöt8_à
__Æign
,

560 **
__d©abuÂ
Ë
__THROW
;

561 
	$öë6_›t_föish
 (*
__extbuf
, 
sockÀn_t
 
__exéí
, 
__off£t
)

562 
__THROW
;

563 
	$öë6_›t_£t_vÆ
 (*
__d©abuf
, 
__off£t
, *
__vÆ
,

564 
sockÀn_t
 
__vÆÀn
Ë
__THROW
;

565 
	$öë6_›t_√xt
 (*
__extbuf
, 
sockÀn_t
 
__exéí
, 
__off£t
,

566 
uöt8_t
 *
__ty≥p
, 
sockÀn_t
 *
__À≈
,

567 **
__d©abuÂ
Ë
__THROW
;

568 
	$öë6_›t_föd
 (*
__extbuf
, 
sockÀn_t
 
__exéí
, 
__off£t
,

569 
uöt8_t
 
__ty≥
, 
sockÀn_t
 *
__À≈
,

570 **
__d©abuÂ
Ë
__THROW
;

571 
	$öë6_›t_gë_vÆ
 (*
__d©abuf
, 
__off£t
, *
__vÆ
,

572 
sockÀn_t
 
__vÆÀn
Ë
__THROW
;

576 
sockÀn_t
 
	$öë6_πh_•a˚
 (
__ty≥
, 
__£gmíts
Ë
__THROW
;

577 *
	$öë6_πh_öô
 (*
__bp
, 
sockÀn_t
 
__bp_Àn
, 
__ty≥
,

578 
__£gmíts
Ë
__THROW
;

579 
	$öë6_πh_add
 (*
__bp
, 
__c⁄°
 
ö6_addr
 *
__addr
Ë
__THROW
;

580 
	$öë6_πh_ªvî£
 (
__c⁄°
 *
__ö
, *
__out
Ë
__THROW
;

581 
	$öë6_πh_£gmíts
 (
__c⁄°
 *
__bp
Ë
__THROW
;

582 
ö6_addr
 *
	$öë6_πh_gëaddr
 (
__c⁄°
 *
__bp
, 
__ödex
)

583 
__THROW
;

589 
	$gëùv4sour˚fûãr
 (
__s
, 
ö_addr
 
__öãrÁ˚_addr
,

590 
ö_addr
 
__group
, 
uöt32_t
 *
__fmode
,

591 
uöt32_t
 *
__num§c
, 
ö_addr
 *
__¶i°
)

592 
__THROW
;

595 
	$£tùv4sour˚fûãr
 (
__s
, 
ö_addr
 
__öãrÁ˚_addr
,

596 
ö_addr
 
__group
, 
uöt32_t
 
__fmode
,

597 
uöt32_t
 
__num§c
,

598 
__c⁄°
 
ö_addr
 *
__¶i°
)

599 
__THROW
;

603 
	$gësour˚fûãr
 (
__s
, 
uöt32_t
 
__öãrÁ˚_addr
,

604 
__c⁄°
 
sockaddr
 *
__group
,

605 
sockÀn_t
 
__grou∂í
, 
uöt32_t
 *
__fmode
,

606 
uöt32_t
 *
__num§c
,

607 
sockaddr_°‹age
 *
__¶i°
Ë
__THROW
;

610 
	$£tsour˚fûãr
 (
__s
, 
uöt32_t
 
__öãrÁ˚_addr
,

611 
__c⁄°
 
sockaddr
 *
__group
,

612 
sockÀn_t
 
__grou∂í
, 
uöt32_t
 
__fmode
,

613 
uöt32_t
 
__num§c
,

614 
__c⁄°
 
sockaddr_°‹age
 *
__¶i°
Ë
__THROW
;

617 
__END_DECLS


	@/usr/include/netinet/in_systm.h

20 #i‚de‡
_NETINET_IN_SYSTM_H


21 
	#_NETINET_IN_SYSTM_H
 1

	)

23 
	~<sys/cdefs.h
>

24 
	~<sys/ty≥s.h
>

26 
__BEGIN_DECLS


35 
u_öt16_t
 
	tn_sh‹t
;

36 
u_öt32_t
 
	tn_l⁄g
;

37 
u_öt32_t
 
	tn_time
;

39 
	g__END_DECLS


	@/usr/include/netinet/ip.h

19 #i‚de‡
__NETINET_IP_H


20 
	#__NETINET_IP_H
 1

	)

22 
	~<„©uªs.h
>

23 
	~<sys/ty≥s.h
>

25 
	~<√töë/ö.h
>

27 
__BEGIN_DECLS


29 
	stime°amp


31 
u_öt8_t
 
	mÀn
;

32 
u_öt8_t
 
	m±r
;

33 #i‡
__BYTE_ORDER
 =
__LITTLE_ENDIAN


34 
	mÊags
:4;

35 
	movîÊow
:4;

36 #ñi‡
__BYTE_ORDER
 =
__BIG_ENDIAN


37 
	movîÊow
:4;

38 
	mÊags
:4;

42 
u_öt32_t
 
	md©a
[9];

45 
	sùhdr


47 #i‡
__BYTE_ORDER
 =
__LITTLE_ENDIAN


48 
	mihl
:4;

49 
	mvîsi⁄
:4;

50 #ñi‡
__BYTE_ORDER
 =
__BIG_ENDIAN


51 
	mvîsi⁄
:4;

52 
	mihl
:4;

56 
u_öt8_t
 
	mtos
;

57 
u_öt16_t
 
	mtŸ_Àn
;

58 
u_öt16_t
 
	mid
;

59 
u_öt16_t
 
	m‰ag_off
;

60 
u_öt8_t
 
	mâl
;

61 
u_öt8_t
 
	m¥Ÿocﬁ
;

62 
u_öt16_t
 
	mcheck
;

63 
u_öt32_t
 
	mßddr
;

64 
u_öt32_t
 
	mdaddr
;

68 #ifde‡
__USE_BSD


108 
	sù


110 #i‡
__BYTE_ORDER
 =
__LITTLE_ENDIAN


111 
	mù_hl
:4;

112 
	mù_v
:4;

114 #i‡
__BYTE_ORDER
 =
__BIG_ENDIAN


115 
	mù_v
:4;

116 
	mù_hl
:4;

118 
u_öt8_t
 
	mù_tos
;

119 
u_sh‹t
 
	mù_Àn
;

120 
u_sh‹t
 
	mù_id
;

121 
u_sh‹t
 
	mù_off
;

122 
	#IP_RF
 0x8000

	)

123 
	#IP_DF
 0x4000

	)

124 
	#IP_MF
 0x2000

	)

125 
	#IP_OFFMASK
 0x1ff‡

	)

126 
u_öt8_t
 
	mù_âl
;

127 
u_öt8_t
 
	mù_p
;

128 
u_sh‹t
 
	mù_sum
;

129 
ö_addr
 
	mù_§c
, 
	mù_d°
;

135 
	sù_time°amp


137 
u_öt8_t
 
	mùt_code
;

138 
u_öt8_t
 
	mùt_Àn
;

139 
u_öt8_t
 
	mùt_±r
;

140 #i‡
__BYTE_ORDER
 =
__LITTLE_ENDIAN


141 
	mùt_Êg
:4;

142 
	mùt_oÊw
:4;

144 #i‡
__BYTE_ORDER
 =
__BIG_ENDIAN


145 
	mùt_oÊw
:4;

146 
	mùt_Êg
:4;

148 
u_öt32_t
 
	md©a
[9];

152 
	#IPVERSION
 4

	)

153 
	#IP_MAXPACKET
 65535

	)

161 
	#IPTOS_ECN_MASK
 0x03

	)

162 
	#IPTOS_ECN
(
x
Ë((xË& 
IPTOS_ECN_MASK
)

	)

163 
	#IPTOS_ECN_NOT_ECT
 0x00

	)

164 
	#IPTOS_ECN_ECT1
 0x01

	)

165 
	#IPTOS_ECN_ECT0
 0x02

	)

166 
	#IPTOS_ECN_CE
 0x03

	)

174 
	#IPTOS_DSCP_MASK
 0xfc

	)

175 
	#IPTOS_DSCP
(
x
Ë((xË& 
IPTOS_DSCP_MASK
)

	)

176 
	#IPTOS_DSCP_AF11
 0x28

	)

177 
	#IPTOS_DSCP_AF12
 0x30

	)

178 
	#IPTOS_DSCP_AF13
 0x38

	)

179 
	#IPTOS_DSCP_AF21
 0x48

	)

180 
	#IPTOS_DSCP_AF22
 0x50

	)

181 
	#IPTOS_DSCP_AF23
 0x58

	)

182 
	#IPTOS_DSCP_AF31
 0x68

	)

183 
	#IPTOS_DSCP_AF32
 0x70

	)

184 
	#IPTOS_DSCP_AF33
 0x78

	)

185 
	#IPTOS_DSCP_AF41
 0x88

	)

186 
	#IPTOS_DSCP_AF42
 0x90

	)

187 
	#IPTOS_DSCP_AF43
 0x98

	)

188 
	#IPTOS_DSCP_EF
 0xb8

	)

195 
	#IPTOS_CLASS_MASK
 0xe0

	)

196 
	#IPTOS_CLASS
(
˛ass
Ë((˛assË& 
IPTOS_CLASS_MASK
)

	)

197 
	#IPTOS_CLASS_CS0
 0x00

	)

198 
	#IPTOS_CLASS_CS1
 0x20

	)

199 
	#IPTOS_CLASS_CS2
 0x40

	)

200 
	#IPTOS_CLASS_CS3
 0x60

	)

201 
	#IPTOS_CLASS_CS4
 0x80

	)

202 
	#IPTOS_CLASS_CS5
 0xa0

	)

203 
	#IPTOS_CLASS_CS6
 0xc0

	)

204 
	#IPTOS_CLASS_CS7
 0xe0

	)

206 
	#IPTOS_CLASS_DEFAULT
 
IPTOS_CLASS_CS0


	)

212 
	#IPTOS_TOS_MASK
 0x1E

	)

213 
	#IPTOS_TOS
(
tos
Ë(—osË& 
IPTOS_TOS_MASK
)

	)

214 
	#IPTOS_LOWDELAY
 0x10

	)

215 
	#IPTOS_THROUGHPUT
 0x08

	)

216 
	#IPTOS_RELIABILITY
 0x04

	)

217 
	#IPTOS_LOWCOST
 0x02

	)

218 
	#IPTOS_MINCOST
 
IPTOS_LOWCOST


	)

223 
	#IPTOS_PREC_MASK
 
IPTOS_CLASS_MASK


	)

224 
	#IPTOS_PREC
(
tos
Ë
	`IPTOS_CLASS
—os)

	)

225 
	#IPTOS_PREC_NETCONTROL
 
IPTOS_CLASS_CS7


	)

226 
	#IPTOS_PREC_INTERNETCONTROL
 
IPTOS_CLASS_CS6


	)

227 
	#IPTOS_PREC_CRITIC_ECP
 
IPTOS_CLASS_CS5


	)

228 
	#IPTOS_PREC_FLASHOVERRIDE
 
IPTOS_CLASS_CS4


	)

229 
	#IPTOS_PREC_FLASH
 
IPTOS_CLASS_CS3


	)

230 
	#IPTOS_PREC_IMMEDIATE
 
IPTOS_CLASS_CS2


	)

231 
	#IPTOS_PREC_PRIORITY
 
IPTOS_CLASS_CS1


	)

232 
	#IPTOS_PREC_ROUTINE
 
IPTOS_CLASS_CS0


	)

237 
	#IPOPT_COPY
 0x80

	)

238 
	#IPOPT_CLASS_MASK
 0x60

	)

239 
	#IPOPT_NUMBER_MASK
 0x1f

	)

241 
	#IPOPT_COPIED
(
o
Ë((oË& 
IPOPT_COPY
)

	)

242 
	#IPOPT_CLASS
(
o
Ë((oË& 
IPOPT_CLASS_MASK
)

	)

243 
	#IPOPT_NUMBER
(
o
Ë((oË& 
IPOPT_NUMBER_MASK
)

	)

245 
	#IPOPT_CONTROL
 0x00

	)

246 
	#IPOPT_RESERVED1
 0x20

	)

247 
	#IPOPT_DEBMEAS
 0x40

	)

248 
	#IPOPT_MEASUREMENT
 
IPOPT_DEBMEAS


	)

249 
	#IPOPT_RESERVED2
 0x60

	)

251 
	#IPOPT_EOL
 0

	)

252 
	#IPOPT_END
 
IPOPT_EOL


	)

253 
	#IPOPT_NOP
 1

	)

254 
	#IPOPT_NOOP
 
IPOPT_NOP


	)

256 
	#IPOPT_RR
 7

	)

257 
	#IPOPT_TS
 68

	)

258 
	#IPOPT_TIMESTAMP
 
IPOPT_TS


	)

259 
	#IPOPT_SECURITY
 130

	)

260 
	#IPOPT_SEC
 
IPOPT_SECURITY


	)

261 
	#IPOPT_LSRR
 131

	)

262 
	#IPOPT_SATID
 136

	)

263 
	#IPOPT_SID
 
IPOPT_SATID


	)

264 
	#IPOPT_SSRR
 137

	)

265 
	#IPOPT_RA
 148

	)

270 
	#IPOPT_OPTVAL
 0

	)

271 
	#IPOPT_OLEN
 1

	)

272 
	#IPOPT_OFFSET
 2

	)

273 
	#IPOPT_MINOFF
 4

	)

275 
	#MAX_IPOPTLEN
 40

	)

278 
	#IPOPT_TS_TSONLY
 0

	)

279 
	#IPOPT_TS_TSANDADDR
 1

	)

280 
	#IPOPT_TS_PRESPEC
 3

	)

283 
	#IPOPT_SECUR_UNCLASS
 0x0000

	)

284 
	#IPOPT_SECUR_CONFID
 0xf135

	)

285 
	#IPOPT_SECUR_EFTO
 0x789a

	)

286 
	#IPOPT_SECUR_MMMM
 0xbc4d

	)

287 
	#IPOPT_SECUR_RESTR
 0xaf13

	)

288 
	#IPOPT_SECUR_SECRET
 0xd788

	)

289 
	#IPOPT_SECUR_TOPSECRET
 0x6bc5

	)

294 
	#MAXTTL
 255

	)

295 
	#IPDEFTTL
 64

	)

296 
	#IPFRAGTTL
 60

	)

297 
	#IPTTLDEC
 1

	)

299 
	#IP_MSS
 576

	)

301 
	g__END_DECLS


	@/usr/include/netinet/tcp.h

32 #i‚de‡
_NETINET_TCP_H


33 
	#_NETINET_TCP_H
 1

	)

35 
	~<„©uªs.h
>

40 
	#TCP_NODELAY
 1

	)

41 
	#TCP_MAXSEG
 2

	)

42 
	#TCP_CORK
 3

	)

43 
	#TCP_KEEPIDLE
 4

	)

44 
	#TCP_KEEPINTVL
 5

	)

45 
	#TCP_KEEPCNT
 6

	)

46 
	#TCP_SYNCNT
 7

	)

47 
	#TCP_LINGER2
 8

	)

48 
	#TCP_DEFER_ACCEPT
 9

	)

49 
	#TCP_WINDOW_CLAMP
 10

	)

50 
	#TCP_INFO
 11

	)

51 
	#TCP_QUICKACK
 12

	)

52 
	#TCP_CONGESTION
 13

	)

53 
	#TCP_MD5SIG
 14

	)

55 #ifde‡
__USE_MISC


56 
	~<sys/ty≥s.h
>

57 
	~<sys/sockë.h
>

59 #ifde‡
__FAVOR_BSD


60 
u_öt32_t
 
	tt˝_£q
;

65 
	st˝hdr


67 
u_öt16_t
 
	mth_•‹t
;

68 
u_öt16_t
 
	mth_dp‹t
;

69 
t˝_£q
 
	mth_£q
;

70 
t˝_£q
 
	mth_ack
;

71 #i‡
__BYTE_ORDER
 =
__LITTLE_ENDIAN


72 
u_öt8_t
 
	mth_x2
:4;

73 
u_öt8_t
 
	mth_off
:4;

75 #i‡
__BYTE_ORDER
 =
__BIG_ENDIAN


76 
u_öt8_t
 
	mth_off
:4;

77 
u_öt8_t
 
	mth_x2
:4;

79 
u_öt8_t
 
	mth_Êags
;

80 
	#TH_FIN
 0x01

	)

81 
	#TH_SYN
 0x02

	)

82 
	#TH_RST
 0x04

	)

83 
	#TH_PUSH
 0x08

	)

84 
	#TH_ACK
 0x10

	)

85 
	#TH_URG
 0x20

	)

86 
u_öt16_t
 
	mth_wö
;

87 
u_öt16_t
 
	mth_sum
;

88 
u_öt16_t
 
	mth_uΩ
;

92 
	st˝hdr


94 
u_öt16_t
 
	msour˚
;

95 
u_öt16_t
 
	mde°
;

96 
u_öt32_t
 
	m£q
;

97 
u_öt32_t
 
	mack_£q
;

98 #i‡
__BYTE_ORDER
 =
__LITTLE_ENDIAN


99 
u_öt16_t
 
	mªs1
:4;

100 
u_öt16_t
 
	mdoff
:4;

101 
u_öt16_t
 
	mfö
:1;

102 
u_öt16_t
 
	msyn
:1;

103 
u_öt16_t
 
	mr°
:1;

104 
u_öt16_t
 
	mpsh
:1;

105 
u_öt16_t
 
	mack
:1;

106 
u_öt16_t
 
	murg
:1;

107 
u_öt16_t
 
	mªs2
:2;

108 #ñi‡
__BYTE_ORDER
 =
__BIG_ENDIAN


109 
u_öt16_t
 
	mdoff
:4;

110 
u_öt16_t
 
	mªs1
:4;

111 
u_öt16_t
 
	mªs2
:2;

112 
u_öt16_t
 
	murg
:1;

113 
u_öt16_t
 
	mack
:1;

114 
u_öt16_t
 
	mpsh
:1;

115 
u_öt16_t
 
	mr°
:1;

116 
u_öt16_t
 
	msyn
:1;

117 
u_öt16_t
 
	mfö
:1;

121 
u_öt16_t
 
	mwödow
;

122 
u_öt16_t
 
	mcheck
;

123 
u_öt16_t
 
	murg_±r
;

129 
	mTCP_ESTABLISHED
 = 1,

130 
	mTCP_SYN_SENT
,

131 
	mTCP_SYN_RECV
,

132 
	mTCP_FIN_WAIT1
,

133 
	mTCP_FIN_WAIT2
,

134 
	mTCP_TIME_WAIT
,

135 
	mTCP_CLOSE
,

136 
	mTCP_CLOSE_WAIT
,

137 
	mTCP_LAST_ACK
,

138 
	mTCP_LISTEN
,

139 
	mTCP_CLOSING


142 
	#TCPOPT_EOL
 0

	)

143 
	#TCPOPT_NOP
 1

	)

144 
	#TCPOPT_MAXSEG
 2

	)

145 
	#TCPOLEN_MAXSEG
 4

	)

146 
	#TCPOPT_WINDOW
 3

	)

147 
	#TCPOLEN_WINDOW
 3

	)

148 
	#TCPOPT_SACK_PERMITTED
 4

	)

149 
	#TCPOLEN_SACK_PERMITTED
 2

	)

150 
	#TCPOPT_SACK
 5

	)

151 
	#TCPOPT_TIMESTAMP
 8

	)

152 
	#TCPOLEN_TIMESTAMP
 10

	)

153 
	#TCPOLEN_TSTAMP_APPA
 (
TCPOLEN_TIMESTAMP
+2Ë

	)

155 
	#TCPOPT_TSTAMP_HDR
 \

156 (
TCPOPT_NOP
<<24|TCPOPT_NOP<<16|
TCPOPT_TIMESTAMP
<<8|
TCPOLEN_TIMESTAMP
)

	)

164 
	#TCP_MSS
 512

	)

166 
	#TCP_MAXWIN
 65535

	)

168 
	#TCP_MAX_WINSHIFT
 14

	)

170 
	#SOL_TCP
 6

	)

173 
	#TCPI_OPT_TIMESTAMPS
 1

	)

174 
	#TCPI_OPT_SACK
 2

	)

175 
	#TCPI_OPT_WSCALE
 4

	)

176 
	#TCPI_OPT_ECN
 8

	)

179 
	et˝_ˇ_°©e


181 
	mTCP_CA_O≥n
 = 0,

182 
	mTCP_CA_Dis‹dî
 = 1,

183 
	mTCP_CA_CWR
 = 2,

184 
	mTCP_CA_Recovîy
 = 3,

185 
	mTCP_CA_Loss
 = 4

188 
	st˝_öfo


190 
u_öt8_t
 
	mt˝i_°©e
;

191 
u_öt8_t
 
	mt˝i_ˇ_°©e
;

192 
u_öt8_t
 
	mt˝i_ªå™smôs
;

193 
u_öt8_t
 
	mt˝i_¥obes
;

194 
u_öt8_t
 
	mt˝i_backoff
;

195 
u_öt8_t
 
	mt˝i_›ti⁄s
;

196 
u_öt8_t
 
	mt˝i_¢d_wsˇÀ
 : 4, 
	mt˝i_rcv_wsˇÀ
 : 4;

198 
u_öt32_t
 
	mt˝i_πo
;

199 
u_öt32_t
 
	mt˝i_©o
;

200 
u_öt32_t
 
	mt˝i_¢d_mss
;

201 
u_öt32_t
 
	mt˝i_rcv_mss
;

203 
u_öt32_t
 
	mt˝i_u«cked
;

204 
u_öt32_t
 
	mt˝i_ßcked
;

205 
u_öt32_t
 
	mt˝i_lo°
;

206 
u_öt32_t
 
	mt˝i_ªå™s
;

207 
u_öt32_t
 
	mt˝i_Áckës
;

210 
u_öt32_t
 
	mt˝i_œ°_d©a_£¡
;

211 
u_öt32_t
 
	mt˝i_œ°_ack_£¡
;

212 
u_öt32_t
 
	mt˝i_œ°_d©a_ªcv
;

213 
u_öt32_t
 
	mt˝i_œ°_ack_ªcv
;

216 
u_öt32_t
 
	mt˝i_pmtu
;

217 
u_öt32_t
 
	mt˝i_rcv_s°hªsh
;

218 
u_öt32_t
 
	mt˝i_πt
;

219 
u_öt32_t
 
	mt˝i_πtv¨
;

220 
u_öt32_t
 
	mt˝i_¢d_s°hªsh
;

221 
u_öt32_t
 
	mt˝i_¢d_cwnd
;

222 
u_öt32_t
 
	mt˝i_advmss
;

223 
u_öt32_t
 
	mt˝i_ª‹dîög
;

225 
u_öt32_t
 
	mt˝i_rcv_πt
;

226 
u_öt32_t
 
	mt˝i_rcv_•a˚
;

228 
u_öt32_t
 
	mt˝i_tŸÆ_ªå™s
;

233 
	#TCP_MD5SIG_MAXKEYLEN
 80

	)

235 
	st˝_md5sig


237 
sockaddr_°‹age
 
	mt˝m_addr
;

238 
u_öt16_t
 
	m__t˝m_∑d1
;

239 
u_öt16_t
 
	mt˝m_keyÀn
;

240 
u_öt32_t
 
	m__t˝m_∑d2
;

241 
u_öt8_t
 
	mt˝m_key
[
TCP_MD5SIG_MAXKEYLEN
];

	@/usr/include/pwd.h

23 #i‚def 
_PWD_H


24 
	#_PWD_H
 1

	)

26 
	~<„©uªs.h
>

28 
	g__BEGIN_DECLS


30 
	~<bôs/ty≥s.h
>

32 
	#__√ed_size_t


	)

33 
	~<°ddef.h
>

35 #i‡
deföed
 
__USE_XOPEN
 || deföed 
__USE_XOPEN2K


38 #i‚de‡
__gid_t_deföed


39 
__gid_t
 
	tgid_t
;

40 
	#__gid_t_deföed


	)

43 #i‚de‡
__uid_t_deföed


44 
__uid_t
 
	tuid_t
;

45 
	#__uid_t_deföed


	)

50 
	s∑sswd


52 *
	mpw_«me
;

53 *
	mpw_∑sswd
;

54 
__uid_t
 
	mpw_uid
;

55 
__gid_t
 
	mpw_gid
;

56 *
	mpw_gecos
;

57 *
	mpw_dú
;

58 *
	mpw_shñl
;

62 #i‡
deföed
 
__USE_SVID
 || deföed 
__USE_GNU


63 
	#__√ed_FILE


	)

64 
	~<°dio.h
>

68 #i‡
deföed
 
__USE_SVID
 || deföed 
__USE_MISC
 || deföed 
__USE_XOPEN_EXTENDED


73 
£çwít
 ();

79 
ídpwít
 ();

85 
∑sswd
 *
gëpwít
 ();

88 #ifdef 
__USE_SVID


95 
∑sswd
 *
fgëpwít
 (
FILE
 *
__°ªam
);

103 
puçwít
 (
__c⁄°
 
∑sswd
 *
__ª°ri˘
 
__p
,

104 
FILE
 *
__ª°ri˘
 
__f
);

111 
∑sswd
 *
gëpwuid
 (
__uid_t
 
__uid
);

117 
∑sswd
 *
gëpw«m
 (
__c⁄°
 *
__«me
);

119 #i‡
deföed
 
__USE_POSIX
 || deföed 
__USE_MISC


121 #ifde‡
__USE_MISC


124 
	#NSS_BUFLEN_PASSWD
 1024

	)

135 #i‡
deföed
 
__USE_SVID
 || deföed 
__USE_MISC


140 
gëpwít_r
 (
∑sswd
 *
__ª°ri˘
 
__ªsu…buf
,

141 *
__ª°ri˘
 
__buf„r
, 
size_t
 
__buÊí
,

142 
∑sswd
 **
__ª°ri˘
 
__ªsu…
);

145 
gëpwuid_r
 (
__uid_t
 
__uid
,

146 
∑sswd
 *
__ª°ri˘
 
__ªsu…buf
,

147 *
__ª°ri˘
 
__buf„r
, 
size_t
 
__buÊí
,

148 
∑sswd
 **
__ª°ri˘
 
__ªsu…
);

150 
gëpw«m_r
 (
__c⁄°
 *
__ª°ri˘
 
__«me
,

151 
∑sswd
 *
__ª°ri˘
 
__ªsu…buf
,

152 *
__ª°ri˘
 
__buf„r
, 
size_t
 
__buÊí
,

153 
∑sswd
 **
__ª°ri˘
 
__ªsu…
);

156 #ifdef 
__USE_SVID


164 
fgëpwít_r
 (
FILE
 *
__ª°ri˘
 
__°ªam
,

165 
∑sswd
 *
__ª°ri˘
 
__ªsu…buf
,

166 *
__ª°ri˘
 
__buf„r
, 
size_t
 
__buÊí
,

167 
∑sswd
 **
__ª°ri˘
 
__ªsu…
);

172 #ifde‡
__USE_GNU


181 
gëpw
 (
__uid_t
 
__uid
, *
__buf„r
);

184 
	g__END_DECLS


	@/usr/include/signal.h

23 #i‚def 
_SIGNAL_H


25 #i‡!
deföed
 
__√ed_sig_©omic_t
 && !deföed 
__√ed_sig£t_t


26 
	#_SIGNAL_H


	)

29 
	~<„©uªs.h
>

31 
	g__BEGIN_DECLS


33 
	~<bôs/sig£t.h
>

37 #i‡
deföed
 
__√ed_sig_©omic_t
 || deföed 
_SIGNAL_H


38 #i‚de‡
__sig_©omic_t_deföed


39 
	#__sig_©omic_t_deföed


	)

40 
__BEGIN_NAMESPACE_STD


41 
__sig_©omic_t
 
	tsig_©omic_t
;

42 
	g__END_NAMESPACE_STD


44 #unde‡
__√ed_sig_©omic_t


47 #i‡
deföed
 
__√ed_sig£t_t
 || (deföed 
_SIGNAL_H
 && deföed 
__USE_POSIX
)

48 #i‚de‡
__sig£t_t_deföed


49 
	#__sig£t_t_deföed


	)

50 
__sig£t_t
 
	tsig£t_t
;

52 #unde‡
__√ed_sig£t_t


55 #ifde‡
_SIGNAL_H


57 
	~<bôs/ty≥s.h
>

58 
	~<bôs/signum.h
>

60 #i‡
deföed
 
__USE_XOPEN
 || deföed 
__USE_XOPEN2K


61 #i‚de‡
__pid_t_deföed


62 
__pid_t
 
	tpid_t
;

63 
	#__pid_t_deföed


	)

65 #ifde‡
__USE_XOPEN


67 #i‚de‡
__uid_t_deföed


68 
__uid_t
 
	tuid_t
;

69 
	#__uid_t_deföed


	)

73 #ifde‡
__USE_POSIX199309


75 
	#__√ed_time•ec


	)

76 
	~<time.h
>

79 
	~<bôs/sigöfo.h
>

84 (*
	t__sigh™dÀr_t
) ();

89 
__sigh™dÀr_t
 
	$__sysv_sig«l
 (
__sig
, 
__sigh™dÀr_t
 
__h™dÀr
)

90 
__THROW
;

91 #ifde‡
__USE_GNU


92 
__sigh™dÀr_t
 
	$sysv_sig«l
 (
__sig
, 
__sigh™dÀr_t
 
__h™dÀr
)

93 
__THROW
;

99 
__BEGIN_NAMESPACE_STD


100 #ifde‡
__USE_BSD


101 
__sigh™dÀr_t
 
	$sig«l
 (
__sig
, 
__sigh™dÀr_t
 
__h™dÀr
)

102 
__THROW
;

105 #ifde‡
__REDIRECT_NTH


106 
__sigh™dÀr_t
 
	`__REDIRECT_NTH
 (
sig«l
,

107 (
__sig
, 
__sigh™dÀr_t
 
__h™dÀr
),

108 
__sysv_sig«l
);

110 
	#sig«l
 
__sysv_sig«l


	)

113 
__END_NAMESPACE_STD


115 #ifde‡
__USE_XOPEN


118 
__sigh™dÀr_t
 
	$bsd_sig«l
 (
__sig
, 
__sigh™dÀr_t
 
__h™dÀr
)

119 
__THROW
;

125 #ifde‡
__USE_POSIX


126 
	$kûl
 (
__pid_t
 
__pid
, 
__sig
Ë
__THROW
;

129 #i‡
deföed
 
__USE_BSD
 || deföed 
__USE_XOPEN_EXTENDED


133 
	$kûÕg
 (
__pid_t
 
__pgΩ
, 
__sig
Ë
__THROW
;

136 
__BEGIN_NAMESPACE_STD


138 
	$øi£
 (
__sig
Ë
__THROW
;

139 
__END_NAMESPACE_STD


141 #ifde‡
__USE_SVID


143 
__sigh™dÀr_t
 
	$ssig«l
 (
__sig
, 
__sigh™dÀr_t
 
__h™dÀr
)

144 
__THROW
;

145 
	$gsig«l
 (
__sig
Ë
__THROW
;

148 #i‡
deföed
 
__USE_MISC
 || deföed 
__USE_XOPEN2K


150 
	`psig«l
 (
__sig
, 
__c⁄°
 *
__s
);

153 #ifde‡
__USE_XOPEN2K


155 
	`psigöfo
 (
__c⁄°
 
sigöfo_t
 *
__pöfo
, __c⁄° *
__s
);

168 
	`__sig∑u£
 (
__sig_‹_mask
, 
__is_sig
);

170 #ifde‡
__FAVOR_BSD


173 
	$sig∑u£
 (
__mask
Ë
__THROW
 
__©åibuã_dïªˇãd__
;

175 #ifde‡
__USE_XOPEN


176 #ifde‡
__GNUC__


177 
	$sig∑u£
 (
__sig
Ë
	`__asm__
 ("__xpg_sigpause");

180 
	#sig∑u£
(
sig
Ë
	`__sig∑u£
 ((sig), 1)

	)

186 #ifde‡
__USE_BSD


193 
	#sigmask
(
sig
Ë
	`__sigmask
(sig)

	)

196 
	$sigblock
 (
__mask
Ë
__THROW
 
__©åibuã_dïªˇãd__
;

199 
	$sig£tmask
 (
__mask
Ë
__THROW
 
__©åibuã_dïªˇãd__
;

202 
	$siggëmask
 (Ë
__THROW
 
__©åibuã_dïªˇãd__
;

206 #ifde‡
__USE_MISC


207 
	#NSIG
 
_NSIG


	)

210 #ifde‡
__USE_GNU


211 
__sigh™dÀr_t
 
	tsigh™dÀr_t
;

215 #ifde‡
__USE_BSD


216 
__sigh™dÀr_t
 
	tsig_t
;

219 #ifde‡
__USE_POSIX


222 
	$sigem±y£t
 (
sig£t_t
 *
__£t
Ë
__THROW
 
	`__n⁄nuŒ
 ((1));

225 
	$sigfûl£t
 (
sig£t_t
 *
__£t
Ë
__THROW
 
	`__n⁄nuŒ
 ((1));

228 
	$sigadd£t
 (
sig£t_t
 *
__£t
, 
__signo
Ë
__THROW
 
	`__n⁄nuŒ
 ((1));

231 
	$sigdñ£t
 (
sig£t_t
 *
__£t
, 
__signo
Ë
__THROW
 
	`__n⁄nuŒ
 ((1));

234 
	$sigismembî
 (
__c⁄°
 
sig£t_t
 *
__£t
, 
__signo
)

235 
__THROW
 
	`__n⁄nuŒ
 ((1));

237 #ifde‡
__USE_GNU


239 
	$sigi£m±y£t
 (
__c⁄°
 
sig£t_t
 *
__£t
Ë
__THROW
 
	`__n⁄nuŒ
 ((1));

242 
	$sig™d£t
 (
sig£t_t
 *
__£t
, 
__c⁄°
 sig£t_à*
__À·
,

243 
__c⁄°
 
sig£t_t
 *
__right
Ë
__THROW
 
	`__n⁄nuŒ
 ((1, 2, 3));

246 
	$sig‹£t
 (
sig£t_t
 *
__£t
, 
__c⁄°
 sig£t_à*
__À·
,

247 
__c⁄°
 
sig£t_t
 *
__right
Ë
__THROW
 
	`__n⁄nuŒ
 ((1, 2, 3));

252 
	~<bôs/siga˘i⁄.h
>

255 
	$sig¥ocmask
 (
__how
, 
__c⁄°
 
sig£t_t
 *
__ª°ri˘
 
__£t
,

256 
sig£t_t
 *
__ª°ri˘
 
__o£t
Ë
__THROW
;

263 
	$sigsu•íd
 (
__c⁄°
 
sig£t_t
 *
__£t
Ë
	`__n⁄nuŒ
 ((1));

266 
	$siga˘i⁄
 (
__sig
, 
__c⁄°
 
siga˘i⁄
 *
__ª°ri˘
 
__a˘
,

267 
siga˘i⁄
 *
__ª°ri˘
 
__ﬂ˘
Ë
__THROW
;

270 
	$sig≥ndög
 (
sig£t_t
 *
__£t
Ë
__THROW
 
	`__n⁄nuŒ
 ((1));

277 
	$sigwaô
 (
__c⁄°
 
sig£t_t
 *
__ª°ri˘
 
__£t
, *__ª°ri˘ 
__sig
)

278 
	`__n⁄nuŒ
 ((1, 2));

280 #ifde‡
__USE_POSIX199309


285 
	$sigwaôöfo
 (
__c⁄°
 
sig£t_t
 *
__ª°ri˘
 
__£t
,

286 
sigöfo_t
 *
__ª°ri˘
 
__öfo
Ë
	`__n⁄nuŒ
 ((1));

293 
	$sigtimedwaô
 (
__c⁄°
 
sig£t_t
 *
__ª°ri˘
 
__£t
,

294 
sigöfo_t
 *
__ª°ri˘
 
__öfo
,

295 
__c⁄°
 
time•ec
 *
__ª°ri˘
 
__timeout
)

296 
	`__n⁄nuŒ
 ((1));

300 
	$sigqueue
 (
__pid_t
 
__pid
, 
__sig
, 
__c⁄°
 
sigvÆ
 
__vÆ
)

301 
__THROW
;

306 #ifde‡
__USE_BSD


310 
__c⁄°
 *__c⁄° 
_sys_sigli°
[
_NSIG
];

311 
__c⁄°
 *__c⁄° 
sys_sigli°
[
_NSIG
];

314 
	ssigvec


316 
__sigh™dÀr_t
 
sv_h™dÀr
;

317 
sv_mask
;

319 
sv_Êags
;

320 
	#sv_⁄°ack
 
sv_Êags


	)

324 
	#SV_ONSTACK
 (1 << 0)

	)

325 
	#SV_INTERRUPT
 (1 << 1)

	)

326 
	#SV_RESETHAND
 (1 << 2)

	)

334 
	$sigvec
 (
__sig
, 
__c⁄°
 
sigvec
 *
__vec
,

335 
sigvec
 *
__ovec
Ë
__THROW
;

339 
	~<bôs/sigc⁄ãxt.h
>

342 
	$sigªtu∫
 (
sigc⁄ãxt
 *
__s˝
Ë
__THROW
;

347 #i‡
deföed
 
__USE_BSD
 || deföed 
__USE_XOPEN_EXTENDED
 || deföed 
__USE_XOPEN2K8


348 
	#__√ed_size_t


	)

349 
	~<°ddef.h
>

354 
	$sigöãºu±
 (
__sig
, 
__öãºu±
Ë
__THROW
;

356 
	~<bôs/sig°ack.h
>

357 #i‡
deföed
 
__USE_XOPEN
 || deföed 
__USE_XOPEN2K8


359 
	~<sys/uc⁄ãxt.h
>

365 
	$sig°ack
 (
sig°ack
 *
__ss
, sig°ack *
__oss
)

366 
__THROW
 
__©åibuã_dïªˇãd__
;

370 
	$sigÆt°ack
 (
__c⁄°
 
sigÆt°ack
 *
__ª°ri˘
 
__ss
,

371 
sigÆt°ack
 *
__ª°ri˘
 
__oss
Ë
__THROW
;

375 #ifde‡
__USE_XOPEN_EXTENDED


379 
	$sighﬁd
 (
__sig
Ë
__THROW
;

382 
	$sigªl£
 (
__sig
Ë
__THROW
;

385 
	$sigign‹e
 (
__sig
Ë
__THROW
;

388 
__sigh™dÀr_t
 
	$sig£t
 (
__sig
, 
__sigh™dÀr_t
 
__di•
Ë
__THROW
;

391 #i‡
deföed
 
__USE_POSIX199506
 || deföed 
__USE_UNIX98


394 
	~<bôs/±hªadty≥s.h
>

395 
	~<bôs/sigthªad.h
>

402 
	$__libc_cuºít_sigπmö
 (Ë
__THROW
;

404 
	$__libc_cuºít_sigπmax
 (Ë
__THROW
;

408 
__END_DECLS


	@/usr/include/stdio.h

24 #i‚de‡
_STDIO_H


26 #i‡!
deföed
 
__√ed_FILE
 && !deföed 
__√ed___FILE


27 
	#_STDIO_H
 1

	)

28 
	~<„©uªs.h
>

30 
	g__BEGIN_DECLS


32 
	#__√ed_size_t


	)

33 
	#__√ed_NULL


	)

34 
	~<°ddef.h
>

36 
	~<bôs/ty≥s.h
>

37 
	#__√ed_FILE


	)

38 
	#__√ed___FILE


	)

42 #i‡!
deföed
 
__FILE_deföed
 && deföed 
__√ed_FILE


45 
	g_IO_FILE
;

47 
__BEGIN_NAMESPACE_STD


49 
_IO_FILE
 
	tFILE
;

50 
	g__END_NAMESPACE_STD


51 #i‡
deföed
 
__USE_LARGEFILE64
 || deföed 
__USE_SVID
 || deföed 
__USE_POSIX
 \

52 || 
deföed
 
	g__USE_BSD
 || deföed 
	g__USE_ISOC99
 || deföed 
	g__USE_XOPEN
 \

53 || 
deföed
 
__USE_POSIX2


54 
	$__USING_NAMESPACE_STD
(
FILE
)

57 
	#__FILE_deföed
 1

	)

59 #unde‡
__√ed_FILE


62 #i‡!
deföed
 
____FILE_deföed
 && deföed 
__√ed___FILE


65 
_IO_FILE
 
	t__FILE
;

67 
	#____FILE_deföed
 1

	)

69 #unde‡
__√ed___FILE


72 #ifdef 
_STDIO_H


73 
	#_STDIO_USES_IOSTREAM


	)

75 
	~<libio.h
>

77 #i‡
deföed
 
__USE_XOPEN
 || deföed 
__USE_XOPEN2K8


78 #ifde‡
__GNUC__


79 #i‚de‡
_VA_LIST_DEFINED


80 
_G_va_li°
 
	tva_li°
;

81 
	#_VA_LIST_DEFINED


	)

84 
	~<°d¨g.h
>

88 #ifde‡
__USE_XOPEN2K8


89 #i‚de‡
__off_t_deföed


90 #i‚de‡
__USE_FILE_OFFSET64


91 
__off_t
 
	toff_t
;

93 
__off64_t
 
	toff_t
;

95 
	#__off_t_deföed


	)

97 #i‡
deföed
 
__USE_LARGEFILE64
 && !deföed 
__off64_t_deföed


98 
__off64_t
 
	toff64_t
;

99 
	#__off64_t_deföed


	)

102 #i‚de‡
__ssize_t_deföed


103 
__ssize_t
 
	tssize_t
;

104 
	#__ssize_t_deföed


	)

109 
__BEGIN_NAMESPACE_STD


110 #i‚de‡
__USE_FILE_OFFSET64


111 
_G_Âos_t
 
	tÂos_t
;

113 
_G_Âos64_t
 
	tÂos_t
;

115 
__END_NAMESPACE_STD


116 #ifde‡
__USE_LARGEFILE64


117 
_G_Âos64_t
 
	tÂos64_t
;

121 
	#_IOFBF
 0

	)

122 
	#_IOLBF
 1

	)

123 
	#_IONBF
 2

	)

127 #i‚de‡
BUFSIZ


128 
	#BUFSIZ
 
_IO_BUFSIZ


	)

134 #i‚de‡
EOF


135 
	#EOF
 (-1)

	)

141 
	#SEEK_SET
 0

	)

142 
	#SEEK_CUR
 1

	)

143 
	#SEEK_END
 2

	)

144 #ifde‡
__USE_GNU


145 
	#SEEK_DATA
 3

	)

146 
	#SEEK_HOLE
 4

	)

150 #i‡
deföed
 
__USE_SVID
 || deföed 
__USE_XOPEN


152 
	#P_tmpdú
 "/tmp"

	)

165 
	~<bôs/°dio_lim.h
>

169 
_IO_FILE
 *
°dö
;

170 
_IO_FILE
 *
°dout
;

171 
_IO_FILE
 *
°dîr
;

173 
	#°dö
 
°dö


	)

174 
	#°dout
 
°dout


	)

175 
	#°dîr
 
°dîr


	)

177 
__BEGIN_NAMESPACE_STD


179 
	$ªmove
 (
__c⁄°
 *
__fûíame
Ë
__THROW
;

181 
	$ª«me
 (
__c⁄°
 *
__ﬁd
, __c⁄° *
__√w
Ë
__THROW
;

182 
__END_NAMESPACE_STD


184 #ifde‡
__USE_ATFILE


186 
	$ª«mót
 (
__ﬁdfd
, 
__c⁄°
 *
__ﬁd
, 
__√wfd
,

187 
__c⁄°
 *
__√w
Ë
__THROW
;

190 
__BEGIN_NAMESPACE_STD


195 #i‚de‡
__USE_FILE_OFFSET64


196 
FILE
 *
	$tmpfûe
 (Ë
__wur
;

198 #ifde‡
__REDIRECT


199 
FILE
 *
	`__REDIRECT
 (
tmpfûe
, (), 
tmpfûe64
Ë
__wur
;

201 
	#tmpfûe
 
tmpfûe64


	)

205 #ifde‡
__USE_LARGEFILE64


206 
FILE
 *
	$tmpfûe64
 (Ë
__wur
;

210 *
	$tm≤am
 (*
__s
Ë
__THROW
 
__wur
;

211 
__END_NAMESPACE_STD


213 #ifde‡
__USE_MISC


216 *
	$tm≤am_r
 (*
__s
Ë
__THROW
 
__wur
;

220 #i‡
deföed
 
__USE_SVID
 || deföed 
__USE_XOPEN


228 *
	$ãm≤am
 (
__c⁄°
 *
__dú
, __c⁄° *
__pfx
)

229 
__THROW
 
__©åibuã_mÆloc__
 
__wur
;

233 
__BEGIN_NAMESPACE_STD


238 
	`f˛o£
 (
FILE
 *
__°ªam
);

243 
	`fÊush
 (
FILE
 *
__°ªam
);

244 
__END_NAMESPACE_STD


246 #ifde‡
__USE_MISC


253 
	`fÊush_u∆ocked
 (
FILE
 *
__°ªam
);

256 #ifde‡
__USE_GNU


263 
	`f˛o£Æl
 ();

267 
__BEGIN_NAMESPACE_STD


268 #i‚de‡
__USE_FILE_OFFSET64


273 
FILE
 *
	$f›í
 (
__c⁄°
 *
__ª°ri˘
 
__fûíame
,

274 
__c⁄°
 *
__ª°ri˘
 
__modes
Ë
__wur
;

279 
FILE
 *
	$‰e›í
 (
__c⁄°
 *
__ª°ri˘
 
__fûíame
,

280 
__c⁄°
 *
__ª°ri˘
 
__modes
,

281 
FILE
 *
__ª°ri˘
 
__°ªam
Ë
__wur
;

283 #ifde‡
__REDIRECT


284 
FILE
 *
	`__REDIRECT
 (
f›í
, (
__c⁄°
 *
__ª°ri˘
 
__fûíame
,

285 
__c⁄°
 *
__ª°ri˘
 
__modes
), 
f›í64
)

286 
__wur
;

287 
FILE
 *
	`__REDIRECT
 (
‰e›í
, (
__c⁄°
 *
__ª°ri˘
 
__fûíame
,

288 
__c⁄°
 *
__ª°ri˘
 
__modes
,

289 
FILE
 *
__ª°ri˘
 
__°ªam
), 
‰e›í64
)

290 
__wur
;

292 
	#f›í
 
f›í64


	)

293 
	#‰e›í
 
‰e›í64


	)

296 
__END_NAMESPACE_STD


297 #ifde‡
__USE_LARGEFILE64


298 
FILE
 *
	$f›í64
 (
__c⁄°
 *
__ª°ri˘
 
__fûíame
,

299 
__c⁄°
 *
__ª°ri˘
 
__modes
Ë
__wur
;

300 
FILE
 *
	$‰e›í64
 (
__c⁄°
 *
__ª°ri˘
 
__fûíame
,

301 
__c⁄°
 *
__ª°ri˘
 
__modes
,

302 
FILE
 *
__ª°ri˘
 
__°ªam
Ë
__wur
;

305 #ifdef 
__USE_POSIX


307 
FILE
 *
	$fd›í
 (
__fd
, 
__c⁄°
 *
__modes
Ë
__THROW
 
__wur
;

310 #ifdef 
__USE_GNU


313 
FILE
 *
	$f›ícookõ
 (*
__ª°ri˘
 
__magic_cookõ
,

314 
__c⁄°
 *
__ª°ri˘
 
__modes
,

315 
_IO_cookõ_io_fun˘i⁄s_t
 
__io_funcs
Ë
__THROW
 
__wur
;

318 #ifde‡
__USE_XOPEN2K8


320 
FILE
 *
	$fmem›í
 (*
__s
, 
size_t
 
__Àn
, 
__c⁄°
 *
__modes
)

321 
__THROW
 
__wur
;

326 
FILE
 *
	$›í_mem°ªam
 (**
__buÊoc
, 
size_t
 *
__sizñoc
Ë
__THROW
 
__wur
;

330 
__BEGIN_NAMESPACE_STD


333 
	$£tbuf
 (
FILE
 *
__ª°ri˘
 
__°ªam
, *__ª°ri˘ 
__buf
Ë
__THROW
;

337 
	$£tvbuf
 (
FILE
 *
__ª°ri˘
 
__°ªam
, *__ª°ri˘ 
__buf
,

338 
__modes
, 
size_t
 
__n
Ë
__THROW
;

339 
__END_NAMESPACE_STD


341 #ifdef 
__USE_BSD


344 
	$£tbuf„r
 (
FILE
 *
__ª°ri˘
 
__°ªam
, *__ª°ri˘ 
__buf
,

345 
size_t
 
__size
Ë
__THROW
;

348 
	$£éöebuf
 (
FILE
 *
__°ªam
Ë
__THROW
;

352 
__BEGIN_NAMESPACE_STD


357 
	`Ârötf
 (
FILE
 *
__ª°ri˘
 
__°ªam
,

358 
__c⁄°
 *
__ª°ri˘
 
__f‹m©
, ...);

363 
	`¥ötf
 (
__c⁄°
 *
__ª°ri˘
 
__f‹m©
, ...);

365 
	$•rötf
 (*
__ª°ri˘
 
__s
,

366 
__c⁄°
 *
__ª°ri˘
 
__f‹m©
, ...Ë
__THROWNL
;

372 
	`vÂrötf
 (
FILE
 *
__ª°ri˘
 
__s
, 
__c⁄°
 *__ª°ri˘ 
__f‹m©
,

373 
_G_va_li°
 
__¨g
);

378 
	`v¥ötf
 (
__c⁄°
 *
__ª°ri˘
 
__f‹m©
, 
_G_va_li°
 
__¨g
);

380 
	$v•rötf
 (*
__ª°ri˘
 
__s
, 
__c⁄°
 *__ª°ri˘ 
__f‹m©
,

381 
_G_va_li°
 
__¨g
Ë
__THROWNL
;

382 
__END_NAMESPACE_STD


384 #i‡
deföed
 
__USE_BSD
 || deföed 
__USE_ISOC99
 || deföed 
__USE_UNIX98


385 
__BEGIN_NAMESPACE_C99


387 
	$¢¥ötf
 (*
__ª°ri˘
 
__s
, 
size_t
 
__maxÀn
,

388 
__c⁄°
 *
__ª°ri˘
 
__f‹m©
, ...)

389 
__THROWNL
 
	`__©åibuã__
 ((
	`__f‹m©__
 (
__¥ötf__
, 3, 4)));

391 
	$v¢¥ötf
 (*
__ª°ri˘
 
__s
, 
size_t
 
__maxÀn
,

392 
__c⁄°
 *
__ª°ri˘
 
__f‹m©
, 
_G_va_li°
 
__¨g
)

393 
__THROWNL
 
	`__©åibuã__
 ((
	`__f‹m©__
 (
__¥ötf__
, 3, 0)));

394 
__END_NAMESPACE_C99


397 #ifde‡
__USE_GNU


400 
	$va•rötf
 (**
__ª°ri˘
 
__±r
, 
__c⁄°
 *__ª°ri˘ 
__f
,

401 
_G_va_li°
 
__¨g
)

402 
__THROWNL
 
	`__©åibuã__
 ((
	$__f‹m©__
 (
__¥ötf__
, 2, 0))Ë
__wur
;

403 
	$__a•rötf
 (**
__ª°ri˘
 
__±r
,

404 
__c⁄°
 *
__ª°ri˘
 
__fmt
, ...)

405 
__THROWNL
 
	`__©åibuã__
 ((
	$__f‹m©__
 (
__¥ötf__
, 2, 3))Ë
__wur
;

406 
	$a•rötf
 (**
__ª°ri˘
 
__±r
,

407 
__c⁄°
 *
__ª°ri˘
 
__fmt
, ...)

408 
__THROWNL
 
	`__©åibuã__
 ((
	$__f‹m©__
 (
__¥ötf__
, 2, 3))Ë
__wur
;

411 #ifde‡
__USE_XOPEN2K8


418 
	$vd¥ötf
 (
__fd
, 
__c⁄°
 *
__ª°ri˘
 
__fmt
,

419 
_G_va_li°
 
__¨g
)

420 
	`__©åibuã__
 ((
	`__f‹m©__
 (
__¥ötf__
, 2, 0)));

421 
	$d¥ötf
 (
__fd
, 
__c⁄°
 *
__ª°ri˘
 
__fmt
, ...)

422 
	`__©åibuã__
 ((
	`__f‹m©__
 (
__¥ötf__
, 2, 3)));

426 
__BEGIN_NAMESPACE_STD


431 
	$fsˇnf
 (
FILE
 *
__ª°ri˘
 
__°ªam
,

432 
__c⁄°
 *
__ª°ri˘
 
__f‹m©
, ...Ë
__wur
;

437 
	$sˇnf
 (
__c⁄°
 *
__ª°ri˘
 
__f‹m©
, ...Ë
__wur
;

439 
	$ssˇnf
 (
__c⁄°
 *
__ª°ri˘
 
__s
,

440 
__c⁄°
 *
__ª°ri˘
 
__f‹m©
, ...Ë
__THROW
;

442 #i‡
deföed
 
__USE_ISOC99
 && !deföed 
__USE_GNU
 \

443 && (!
deföed
 
__LDBL_COMPAT
 || !deföed 
__REDIRECT
) \

444 && (
deföed
 
__STRICT_ANSI__
 || deföed 
__USE_XOPEN2K
)

445 #ifde‡
__REDIRECT


449 
	`__REDIRECT
 (
fsˇnf
, (
FILE
 *
__ª°ri˘
 
__°ªam
,

450 
__c⁄°
 *
__ª°ri˘
 
__f‹m©
, ...),

451 
__isoc99_fsˇnf
Ë
__wur
;

452 
	`__REDIRECT
 (
sˇnf
, (
__c⁄°
 *
__ª°ri˘
 
__f‹m©
, ...),

453 
__isoc99_sˇnf
Ë
__wur
;

454 
	`__REDIRECT_NTH
 (
ssˇnf
, (
__c⁄°
 *
__ª°ri˘
 
__s
,

455 
__c⁄°
 *
__ª°ri˘
 
__f‹m©
, ...),

456 
__isoc99_ssˇnf
);

458 
	$__isoc99_fsˇnf
 (
FILE
 *
__ª°ri˘
 
__°ªam
,

459 
__c⁄°
 *
__ª°ri˘
 
__f‹m©
, ...Ë
__wur
;

460 
	$__isoc99_sˇnf
 (
__c⁄°
 *
__ª°ri˘
 
__f‹m©
, ...Ë
__wur
;

461 
	$__isoc99_ssˇnf
 (
__c⁄°
 *
__ª°ri˘
 
__s
,

462 
__c⁄°
 *
__ª°ri˘
 
__f‹m©
, ...Ë
__THROW
;

463 
	#fsˇnf
 
__isoc99_fsˇnf


	)

464 
	#sˇnf
 
__isoc99_sˇnf


	)

465 
	#ssˇnf
 
__isoc99_ssˇnf


	)

469 
__END_NAMESPACE_STD


471 #ifdef 
__USE_ISOC99


472 
__BEGIN_NAMESPACE_C99


477 
	$vfsˇnf
 (
FILE
 *
__ª°ri˘
 
__s
, 
__c⁄°
 *__ª°ri˘ 
__f‹m©
,

478 
_G_va_li°
 
__¨g
)

479 
	`__©åibuã__
 ((
	$__f‹m©__
 (
__sˇnf__
, 2, 0))Ë
__wur
;

485 
	$vsˇnf
 (
__c⁄°
 *
__ª°ri˘
 
__f‹m©
, 
_G_va_li°
 
__¨g
)

486 
	`__©åibuã__
 ((
	$__f‹m©__
 (
__sˇnf__
, 1, 0))Ë
__wur
;

489 
	$vssˇnf
 (
__c⁄°
 *
__ª°ri˘
 
__s
,

490 
__c⁄°
 *
__ª°ri˘
 
__f‹m©
, 
_G_va_li°
 
__¨g
)

491 
__THROW
 
	`__©åibuã__
 ((
	`__f‹m©__
 (
__sˇnf__
, 2, 0)));

493 #i‡!
deföed
 
__USE_GNU
 \

494 && (!
deföed
 
__LDBL_COMPAT
 || !deföed 
__REDIRECT
) \

495 && (
deföed
 
__STRICT_ANSI__
 || deföed 
__USE_XOPEN2K
)

496 #ifde‡
__REDIRECT


500 
	`__REDIRECT
 (
vfsˇnf
,

501 (
FILE
 *
__ª°ri˘
 
__s
,

502 
__c⁄°
 *
__ª°ri˘
 
__f‹m©
, 
_G_va_li°
 
__¨g
),

503 
__isoc99_vfsˇnf
)

504 
	`__©åibuã__
 ((
	$__f‹m©__
 (
__sˇnf__
, 2, 0))Ë
__wur
;

505 
	`__REDIRECT
 (
vsˇnf
, (
__c⁄°
 *
__ª°ri˘
 
__f‹m©
,

506 
_G_va_li°
 
__¨g
), 
__isoc99_vsˇnf
)

507 
	`__©åibuã__
 ((
	$__f‹m©__
 (
__sˇnf__
, 1, 0))Ë
__wur
;

508 
	`__REDIRECT_NTH
 (
vssˇnf
,

509 (
__c⁄°
 *
__ª°ri˘
 
__s
,

510 
__c⁄°
 *
__ª°ri˘
 
__f‹m©
,

511 
_G_va_li°
 
__¨g
), 
__isoc99_vssˇnf
)

512 
	`__©åibuã__
 ((
	`__f‹m©__
 (
__sˇnf__
, 2, 0)));

514 
	$__isoc99_vfsˇnf
 (
FILE
 *
__ª°ri˘
 
__s
,

515 
__c⁄°
 *
__ª°ri˘
 
__f‹m©
,

516 
_G_va_li°
 
__¨g
Ë
__wur
;

517 
	$__isoc99_vsˇnf
 (
__c⁄°
 *
__ª°ri˘
 
__f‹m©
,

518 
_G_va_li°
 
__¨g
Ë
__wur
;

519 
	$__isoc99_vssˇnf
 (
__c⁄°
 *
__ª°ri˘
 
__s
,

520 
__c⁄°
 *
__ª°ri˘
 
__f‹m©
,

521 
_G_va_li°
 
__¨g
Ë
__THROW
;

522 
	#vfsˇnf
 
__isoc99_vfsˇnf


	)

523 
	#vsˇnf
 
__isoc99_vsˇnf


	)

524 
	#vssˇnf
 
__isoc99_vssˇnf


	)

528 
__END_NAMESPACE_C99


532 
__BEGIN_NAMESPACE_STD


537 
	`fgëc
 (
FILE
 *
__°ªam
);

538 
	`gëc
 (
FILE
 *
__°ªam
);

544 
	`gëch¨
 ();

545 
__END_NAMESPACE_STD


549 
	#gëc
(
_Â
Ë
	`_IO_gëc
 (_Â)

	)

551 #i‡
deföed
 
__USE_POSIX
 || deföed 
__USE_MISC


556 
	`gëc_u∆ocked
 (
FILE
 *
__°ªam
);

557 
	`gëch¨_u∆ocked
 ();

560 #ifde‡
__USE_MISC


567 
	`fgëc_u∆ocked
 (
FILE
 *
__°ªam
);

571 
__BEGIN_NAMESPACE_STD


579 
	`Âutc
 (
__c
, 
FILE
 *
__°ªam
);

580 
	`putc
 (
__c
, 
FILE
 *
__°ªam
);

586 
	`putch¨
 (
__c
);

587 
__END_NAMESPACE_STD


591 
	#putc
(
_ch
, 
_Â
Ë
	`_IO_putc
 (_ch, _Â)

	)

593 #ifde‡
__USE_MISC


600 
	`Âutc_u∆ocked
 (
__c
, 
FILE
 *
__°ªam
);

603 #i‡
deföed
 
__USE_POSIX
 || deföed 
__USE_MISC


608 
	`putc_u∆ocked
 (
__c
, 
FILE
 *
__°ªam
);

609 
	`putch¨_u∆ocked
 (
__c
);

613 #i‡
deföed
 
__USE_SVID
 || deföed 
__USE_MISC
 \

614 || (
deföed
 
__USE_XOPEN
 && !deföed 
__USE_XOPEN2K
)

616 
	`gëw
 (
FILE
 *
__°ªam
);

619 
	`putw
 (
__w
, 
FILE
 *
__°ªam
);

623 
__BEGIN_NAMESPACE_STD


628 *
	$fgës
 (*
__ª°ri˘
 
__s
, 
__n
, 
FILE
 *__ª°ri˘ 
__°ªam
)

629 
__wur
;

636 *
	$gës
 (*
__s
Ë
__wur
;

637 
__END_NAMESPACE_STD


639 #ifde‡
__USE_GNU


646 *
	$fgës_u∆ocked
 (*
__ª°ri˘
 
__s
, 
__n
,

647 
FILE
 *
__ª°ri˘
 
__°ªam
Ë
__wur
;

651 #ifdef 
__USE_XOPEN2K8


662 
_IO_ssize_t
 
	$__gëdñim
 (**
__ª°ri˘
 
__löïå
,

663 
size_t
 *
__ª°ri˘
 
__n
, 
__dñimôî
,

664 
FILE
 *
__ª°ri˘
 
__°ªam
Ë
__wur
;

665 
_IO_ssize_t
 
	$gëdñim
 (**
__ª°ri˘
 
__löïå
,

666 
size_t
 *
__ª°ri˘
 
__n
, 
__dñimôî
,

667 
FILE
 *
__ª°ri˘
 
__°ªam
Ë
__wur
;

675 
_IO_ssize_t
 
	$gëlöe
 (**
__ª°ri˘
 
__löïå
,

676 
size_t
 *
__ª°ri˘
 
__n
,

677 
FILE
 *
__ª°ri˘
 
__°ªam
Ë
__wur
;

681 
__BEGIN_NAMESPACE_STD


686 
	`Âuts
 (
__c⁄°
 *
__ª°ri˘
 
__s
, 
FILE
 *__ª°ri˘ 
__°ªam
);

692 
	`puts
 (
__c⁄°
 *
__s
);

699 
	`ungëc
 (
__c
, 
FILE
 *
__°ªam
);

706 
size_t
 
	$‰ód
 (*
__ª°ri˘
 
__±r
, 
size_t
 
__size
,

707 
size_t
 
__n
, 
FILE
 *
__ª°ri˘
 
__°ªam
Ë
__wur
;

712 
size_t
 
	`fwrôe
 (
__c⁄°
 *
__ª°ri˘
 
__±r
, size_à
__size
,

713 
size_t
 
__n
, 
FILE
 *
__ª°ri˘
 
__s
);

714 
__END_NAMESPACE_STD


716 #ifde‡
__USE_GNU


723 
	`Âuts_u∆ocked
 (
__c⁄°
 *
__ª°ri˘
 
__s
,

724 
FILE
 *
__ª°ri˘
 
__°ªam
);

727 #ifde‡
__USE_MISC


734 
size_t
 
	$‰ód_u∆ocked
 (*
__ª°ri˘
 
__±r
, 
size_t
 
__size
,

735 
size_t
 
__n
, 
FILE
 *
__ª°ri˘
 
__°ªam
Ë
__wur
;

736 
size_t
 
	`fwrôe_u∆ocked
 (
__c⁄°
 *
__ª°ri˘
 
__±r
, size_à
__size
,

737 
size_t
 
__n
, 
FILE
 *
__ª°ri˘
 
__°ªam
);

741 
__BEGIN_NAMESPACE_STD


746 
	`f£ek
 (
FILE
 *
__°ªam
, 
__off
, 
__whí˚
);

751 
	$·ñl
 (
FILE
 *
__°ªam
Ë
__wur
;

756 
	`ªwöd
 (
FILE
 *
__°ªam
);

757 
__END_NAMESPACE_STD


764 #i‡
deföed
 
__USE_LARGEFILE
 || deföed 
__USE_XOPEN2K


765 #i‚de‡
__USE_FILE_OFFSET64


770 
	`f£eko
 (
FILE
 *
__°ªam
, 
__off_t
 
__off
, 
__whí˚
);

775 
__off_t
 
	$·ñlo
 (
FILE
 *
__°ªam
Ë
__wur
;

777 #ifde‡
__REDIRECT


778 
	`__REDIRECT
 (
f£eko
,

779 (
FILE
 *
__°ªam
, 
__off64_t
 
__off
, 
__whí˚
),

780 
f£eko64
);

781 
__off64_t
 
	`__REDIRECT
 (
·ñlo
, (
FILE
 *
__°ªam
), 
·ñlo64
);

783 
	#f£eko
 
f£eko64


	)

784 
	#·ñlo
 
·ñlo64


	)

789 
__BEGIN_NAMESPACE_STD


790 #i‚de‡
__USE_FILE_OFFSET64


795 
	`fgëpos
 (
FILE
 *
__ª°ri˘
 
__°ªam
, 
Âos_t
 *__ª°ri˘ 
__pos
);

800 
	`f£ços
 (
FILE
 *
__°ªam
, 
__c⁄°
 
Âos_t
 *
__pos
);

802 #ifde‡
__REDIRECT


803 
	`__REDIRECT
 (
fgëpos
, (
FILE
 *
__ª°ri˘
 
__°ªam
,

804 
Âos_t
 *
__ª°ri˘
 
__pos
), 
fgëpos64
);

805 
	`__REDIRECT
 (
f£ços
,

806 (
FILE
 *
__°ªam
, 
__c⁄°
 
Âos_t
 *
__pos
), 
f£ços64
);

808 
	#fgëpos
 
fgëpos64


	)

809 
	#f£ços
 
f£ços64


	)

812 
__END_NAMESPACE_STD


814 #ifde‡
__USE_LARGEFILE64


815 
	`f£eko64
 (
FILE
 *
__°ªam
, 
__off64_t
 
__off
, 
__whí˚
);

816 
__off64_t
 
	$·ñlo64
 (
FILE
 *
__°ªam
Ë
__wur
;

817 
	`fgëpos64
 (
FILE
 *
__ª°ri˘
 
__°ªam
, 
Âos64_t
 *__ª°ri˘ 
__pos
);

818 
	`f£ços64
 (
FILE
 *
__°ªam
, 
__c⁄°
 
Âos64_t
 *
__pos
);

821 
__BEGIN_NAMESPACE_STD


823 
	$˛óªº
 (
FILE
 *
__°ªam
Ë
__THROW
;

825 
	$„of
 (
FILE
 *
__°ªam
Ë
__THROW
 
__wur
;

827 
	$„º‹
 (
FILE
 *
__°ªam
Ë
__THROW
 
__wur
;

828 
__END_NAMESPACE_STD


830 #ifde‡
__USE_MISC


832 
	$˛óªº_u∆ocked
 (
FILE
 *
__°ªam
Ë
__THROW
;

833 
	$„of_u∆ocked
 (
FILE
 *
__°ªam
Ë
__THROW
 
__wur
;

834 
	$„º‹_u∆ocked
 (
FILE
 *
__°ªam
Ë
__THROW
 
__wur
;

838 
__BEGIN_NAMESPACE_STD


843 
	`≥º‹
 (
__c⁄°
 *
__s
);

844 
__END_NAMESPACE_STD


850 
	~<bôs/sys_îæi°.h
>

853 #ifdef 
__USE_POSIX


855 
	$fûío
 (
FILE
 *
__°ªam
Ë
__THROW
 
__wur
;

858 #ifde‡
__USE_MISC


860 
	$fûío_u∆ocked
 (
FILE
 *
__°ªam
Ë
__THROW
 
__wur
;

864 #i‡(
deföed
 
__USE_POSIX2
 || deföed 
__USE_SVID
 || deföed 
__USE_BSD
 || \

865 
deföed
 
__USE_MISC
)

870 
FILE
 *
	$p›í
 (
__c⁄°
 *
__comm™d
, __c⁄° *
__modes
Ë
__wur
;

876 
	`p˛o£
 (
FILE
 *
__°ªam
);

880 #ifdef 
__USE_POSIX


882 *
	$˘îmid
 (*
__s
Ë
__THROW
;

886 #ifde‡
__USE_XOPEN


888 *
	`cu£rid
 (*
__s
);

892 #ifdef 
__USE_GNU


893 
ob°ack
;

896 
	$ob°ack_¥ötf
 (
ob°ack
 *
__ª°ri˘
 
__ob°ack
,

897 
__c⁄°
 *
__ª°ri˘
 
__f‹m©
, ...)

898 
__THROWNL
 
	`__©åibuã__
 ((
	`__f‹m©__
 (
__¥ötf__
, 2, 3)));

899 
	$ob°ack_v¥ötf
 (
ob°ack
 *
__ª°ri˘
 
__ob°ack
,

900 
__c⁄°
 *
__ª°ri˘
 
__f‹m©
,

901 
_G_va_li°
 
__¨gs
)

902 
__THROWNL
 
	`__©åibuã__
 ((
	`__f‹m©__
 (
__¥ötf__
, 2, 0)));

906 #i‡
deföed
 
__USE_POSIX
 || deföed 
__USE_MISC


910 
	$Êockfûe
 (
FILE
 *
__°ªam
Ë
__THROW
;

914 
	$·rylockfûe
 (
FILE
 *
__°ªam
Ë
__THROW
 
__wur
;

917 
	$fu∆ockfûe
 (
FILE
 *
__°ªam
Ë
__THROW
;

920 #i‡
deföed
 
__USE_XOPEN
 && !deföed 
__USE_XOPEN2K
 && !deföed 
__USE_GNU


924 
	#__√ed_gë›t


	)

925 
	~<gë›t.h
>

930 #ifde‡
__USE_EXTERN_INLINES


931 
	~<bôs/°dio.h
>

933 #i‡
__USE_FORTIFY_LEVEL
 > 0 && 
deföed
 
__exã∫_Æways_ölöe


934 
	~<bôs/°dio2.h
>

936 #ifde‡
__LDBL_COMPAT


937 
	~<bôs/°dio-ldbl.h
>

940 
__END_DECLS


	@/usr/include/stdlib.h

23 #i‚def 
_STDLIB_H


25 
	~<„©uªs.h
>

28 
	#__√ed_size_t


	)

29 #i‚de‡
__√ed_mÆloc_™d_ˇŒoc


30 
	#__√ed_wch¨_t


	)

31 
	#__√ed_NULL


	)

33 
	~<°ddef.h
>

35 
	g__BEGIN_DECLS


37 #i‚de‡
__√ed_mÆloc_™d_ˇŒoc


38 
	#_STDLIB_H
 1

	)

40 #i‡(
deföed
 
__USE_XOPEN
 || deföed 
__USE_XOPEN2K8
Ë&& !deföed 
_SYS_WAIT_H


42 
	~<bôs/waôÊags.h
>

43 
	~<bôs/waô°©us.h
>

45 #ifde‡
__USE_BSD


50 #i‡
deföed
 
__GNUC__
 && !deföed 
__˝lu•lus


51 
	#__WAIT_INT
(
°©us
) \

52 (
	`__exãnsi⁄__
 (((uni⁄ { 
	`__ty≥of
(
°©us
Ë
__ö
; 
__i
; }) \

53 { .
__ö
 = (
°©us
Ë}).
__i
))

	)

55 
	#__WAIT_INT
(
°©us
Ë(*(*Ë&(°©us))

	)

63 #i‡!
deföed
 
__GNUC__
 || __GNUC__ < 2 || deföed 
__˝lu•lus


64 
	#__WAIT_STATUS
 *

	)

65 
	#__WAIT_STATUS_DEFN
 *

	)

70 
waô
 *
	m__u±r
;

71 *
	m__ùå
;

72 } 
	t__WAIT_STATUS
 
	t__©åibuã__
 ((
	t__å™•¨ít_uni⁄__
));

73 
	#__WAIT_STATUS_DEFN
 *

	)

78 
	#__WAIT_INT
(
°©us
Ë(°©us)

	)

79 
	#__WAIT_STATUS
 *

	)

80 
	#__WAIT_STATUS_DEFN
 *

	)

85 
	#WEXITSTATUS
(
°©us
Ë
	`__WEXITSTATUS
 (
	`__WAIT_INT
 (°©us))

	)

86 
	#WTERMSIG
(
°©us
Ë
	`__WTERMSIG
 (
	`__WAIT_INT
 (°©us))

	)

87 
	#WSTOPSIG
(
°©us
Ë
	`__WSTOPSIG
 (
	`__WAIT_INT
 (°©us))

	)

88 
	#WIFEXITED
(
°©us
Ë
	`__WIFEXITED
 (
	`__WAIT_INT
 (°©us))

	)

89 
	#WIFSIGNALED
(
°©us
Ë
	`__WIFSIGNALED
 (
	`__WAIT_INT
 (°©us))

	)

90 
	#WIFSTOPPED
(
°©us
Ë
	`__WIFSTOPPED
 (
	`__WAIT_INT
 (°©us))

	)

91 #ifde‡
__WIFCONTINUED


92 
	#WIFCONTINUED
(
°©us
Ë
	`__WIFCONTINUED
 (
	`__WAIT_INT
 (°©us))

	)

96 
__BEGIN_NAMESPACE_STD


100 
	mquŸ
;

101 
	mªm
;

102 } 
	tdiv_t
;

105 #i‚de‡
__ldiv_t_deföed


108 
	mquŸ
;

109 
	mªm
;

110 } 
	tldiv_t
;

111 
	#__ldiv_t_deföed
 1

	)

113 
	g__END_NAMESPACE_STD


115 #i‡
deföed
 
__USE_ISOC99
 && !deföed 
__Œdiv_t_deföed


116 
__BEGIN_NAMESPACE_C99


118 
__exãnsi⁄__
 struct

120 
	mquŸ
;

121 
	mªm
;

122 } 
	tŒdiv_t
;

123 
	#__Œdiv_t_deföed
 1

	)

124 
	g__END_NAMESPACE_C99


129 
	#RAND_MAX
 2147483647

	)

134 
	#EXIT_FAILURE
 1

	)

135 
	#EXIT_SUCCESS
 0

	)

139 
	#MB_CUR_MAX
 (
	`__˘y≥_gë_mb_cur_max
 ())

	)

140 
size_t
 
	$__˘y≥_gë_mb_cur_max
 (Ë
__THROW
 
__wur
;

143 
__BEGIN_NAMESPACE_STD


145 
	$©of
 (
__c⁄°
 *
__≈å
)

146 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

148 
	$©oi
 (
__c⁄°
 *
__≈å
)

149 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

151 
	$©ﬁ
 (
__c⁄°
 *
__≈å
)

152 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

153 
__END_NAMESPACE_STD


155 #i‡
deföed
 
__USE_ISOC99
 || (deföed 
__GLIBC_HAVE_LONG_LONG
 && deföed 
__USE_MISC
)

156 
__BEGIN_NAMESPACE_C99


158 
__exãnsi⁄__
 
	$©ﬁl
 (
__c⁄°
 *
__≈å
)

159 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

160 
__END_NAMESPACE_C99


163 
__BEGIN_NAMESPACE_STD


165 
	$°πod
 (
__c⁄°
 *
__ª°ri˘
 
__≈å
,

166 **
__ª°ri˘
 
__íd±r
)

167 
__THROW
 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

168 
__END_NAMESPACE_STD


170 #ifdef 
__USE_ISOC99


171 
__BEGIN_NAMESPACE_C99


173 
	$°πof
 (
__c⁄°
 *
__ª°ri˘
 
__≈å
,

174 **
__ª°ri˘
 
__íd±r
Ë
__THROW
 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

176 
	$°πﬁd
 (
__c⁄°
 *
__ª°ri˘
 
__≈å
,

177 **
__ª°ri˘
 
__íd±r
)

178 
__THROW
 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

179 
__END_NAMESPACE_C99


182 
__BEGIN_NAMESPACE_STD


184 
	$°πﬁ
 (
__c⁄°
 *
__ª°ri˘
 
__≈å
,

185 **
__ª°ri˘
 
__íd±r
, 
__ba£
)

186 
__THROW
 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

188 
	$°πoul
 (
__c⁄°
 *
__ª°ri˘
 
__≈å
,

189 **
__ª°ri˘
 
__íd±r
, 
__ba£
)

190 
__THROW
 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

191 
__END_NAMESPACE_STD


193 #i‡
deföed
 
__GLIBC_HAVE_LONG_LONG
 && deföed 
__USE_BSD


195 
__exãnsi⁄__


196 
	$°πoq
 (
__c⁄°
 *
__ª°ri˘
 
__≈å
,

197 **
__ª°ri˘
 
__íd±r
, 
__ba£
)

198 
__THROW
 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

200 
__exãnsi⁄__


201 
	$°πouq
 (
__c⁄°
 *
__ª°ri˘
 
__≈å
,

202 **
__ª°ri˘
 
__íd±r
, 
__ba£
)

203 
__THROW
 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

206 #i‡
deföed
 
__USE_ISOC99
 || (deföed 
__GLIBC_HAVE_LONG_LONG
 && deföed 
__USE_MISC
)

207 
__BEGIN_NAMESPACE_C99


209 
__exãnsi⁄__


210 
	$°πﬁl
 (
__c⁄°
 *
__ª°ri˘
 
__≈å
,

211 **
__ª°ri˘
 
__íd±r
, 
__ba£
)

212 
__THROW
 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

214 
__exãnsi⁄__


215 
	$°πouŒ
 (
__c⁄°
 *
__ª°ri˘
 
__≈å
,

216 **
__ª°ri˘
 
__íd±r
, 
__ba£
)

217 
__THROW
 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

218 
__END_NAMESPACE_C99


222 #ifde‡
__USE_GNU


236 
	~<xloˇÀ.h
>

240 
	$°πﬁ_l
 (
__c⁄°
 *
__ª°ri˘
 
__≈å
,

241 **
__ª°ri˘
 
__íd±r
, 
__ba£
,

242 
__loˇÀ_t
 
__loc
Ë
__THROW
 
	`__n⁄nuŒ
 ((1, 4)Ë
__wur
;

244 
	$°πoul_l
 (
__c⁄°
 *
__ª°ri˘
 
__≈å
,

245 **
__ª°ri˘
 
__íd±r
,

246 
__ba£
, 
__loˇÀ_t
 
__loc
)

247 
__THROW
 
	`__n⁄nuŒ
 ((1, 4)Ë
__wur
;

249 
__exãnsi⁄__


250 
	$°πﬁl_l
 (
__c⁄°
 *
__ª°ri˘
 
__≈å
,

251 **
__ª°ri˘
 
__íd±r
, 
__ba£
,

252 
__loˇÀ_t
 
__loc
)

253 
__THROW
 
	`__n⁄nuŒ
 ((1, 4)Ë
__wur
;

255 
__exãnsi⁄__


256 
	$°πouŒ_l
 (
__c⁄°
 *
__ª°ri˘
 
__≈å
,

257 **
__ª°ri˘
 
__íd±r
,

258 
__ba£
, 
__loˇÀ_t
 
__loc
)

259 
__THROW
 
	`__n⁄nuŒ
 ((1, 4)Ë
__wur
;

261 
	$°πod_l
 (
__c⁄°
 *
__ª°ri˘
 
__≈å
,

262 **
__ª°ri˘
 
__íd±r
, 
__loˇÀ_t
 
__loc
)

263 
__THROW
 
	`__n⁄nuŒ
 ((1, 3)Ë
__wur
;

265 
	$°πof_l
 (
__c⁄°
 *
__ª°ri˘
 
__≈å
,

266 **
__ª°ri˘
 
__íd±r
, 
__loˇÀ_t
 
__loc
)

267 
__THROW
 
	`__n⁄nuŒ
 ((1, 3)Ë
__wur
;

269 
	$°πﬁd_l
 (
__c⁄°
 *
__ª°ri˘
 
__≈å
,

270 **
__ª°ri˘
 
__íd±r
,

271 
__loˇÀ_t
 
__loc
)

272 
__THROW
 
	`__n⁄nuŒ
 ((1, 3)Ë
__wur
;

276 #ifde‡
__USE_EXTERN_INLINES


277 
__BEGIN_NAMESPACE_STD


278 
__exã∫_ölöe
 

279 
	`__NTH
 (
	$©of
 (
__c⁄°
 *
__≈å
))

281  
	`°πod
 (
__≈å
, (**Ë
NULL
);

282 
	}
}

283 
__exã∫_ölöe
 

284 
__NTH
 (
	$©oi
 (
__c⁄°
 *
__≈å
))

286  (Ë
	`°πﬁ
 (
__≈å
, (**Ë
NULL
, 10);

287 
	}
}

288 
__exã∫_ölöe
 

289 
__NTH
 (
	$©ﬁ
 (
__c⁄°
 *
__≈å
))

291  
	`°πﬁ
 (
__≈å
, (**Ë
NULL
, 10);

292 
	}
}

293 
	g__END_NAMESPACE_STD


295 #i‡
deföed
 
__USE_MISC
 || deföed 
__USE_ISOC99


296 
__BEGIN_NAMESPACE_C99


297 
__exãnsi⁄__
 
__exã∫_ölöe
 

298 
__NTH
 (
	$©ﬁl
 (
__c⁄°
 *
__≈å
))

300  
	`°πﬁl
 (
__≈å
, (**Ë
NULL
, 10);

301 
	}
}

302 
	g__END_NAMESPACE_C99


307 #i‡
deföed
 
__USE_SVID
 || deföed 
__USE_XOPEN_EXTENDED


311 *
	$l64a
 (
__n
Ë
__THROW
 
__wur
;

314 
	$a64l
 (
__c⁄°
 *
__s
)

315 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

319 #i‡
deföed
 
__USE_SVID
 || deföed 
__USE_XOPEN_EXTENDED
 || deföed 
__USE_BSD


320 
	~<sys/ty≥s.h
>

327 
	$øndom
 (Ë
__THROW
;

330 
	$§™dom
 (
__£ed
Ë
__THROW
;

336 *
	$öô°©e
 (
__£ed
, *
__°©ebuf
,

337 
size_t
 
__°©ñí
Ë
__THROW
 
	`__n⁄nuŒ
 ((2));

341 *
	$£t°©e
 (*
__°©ebuf
Ë
__THROW
 
	`__n⁄nuŒ
 ((1));

344 #ifde‡
__USE_MISC


349 
	søndom_d©a


351 
öt32_t
 *
Âå
;

352 
öt32_t
 *
Ωå
;

353 
öt32_t
 *
°©e
;

354 
ønd_ty≥
;

355 
ønd_deg
;

356 
ønd_£p
;

357 
öt32_t
 *
íd_±r
;

360 
	$øndom_r
 (
øndom_d©a
 *
__ª°ri˘
 
__buf
,

361 
öt32_t
 *
__ª°ri˘
 
__ªsu…
Ë
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

363 
	$§™dom_r
 (
__£ed
, 
øndom_d©a
 *
__buf
)

364 
__THROW
 
	`__n⁄nuŒ
 ((2));

366 
	$öô°©e_r
 (
__£ed
, *
__ª°ri˘
 
__°©ebuf
,

367 
size_t
 
__°©ñí
,

368 
øndom_d©a
 *
__ª°ri˘
 
__buf
)

369 
__THROW
 
	`__n⁄nuŒ
 ((2, 4));

371 
	$£t°©e_r
 (*
__ª°ri˘
 
__°©ebuf
,

372 
øndom_d©a
 *
__ª°ri˘
 
__buf
)

373 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

378 
__BEGIN_NAMESPACE_STD


380 
	$ønd
 (Ë
__THROW
;

382 
	$§™d
 (
__£ed
Ë
__THROW
;

383 
__END_NAMESPACE_STD


385 #ifde‡
__USE_POSIX


387 
	$ønd_r
 (*
__£ed
Ë
__THROW
;

391 #i‡
deföed
 
__USE_SVID
 || deföed 
__USE_XOPEN


395 
	$dønd48
 (Ë
__THROW
;

396 
	$î™d48
 (
__xsubi
[3]Ë
__THROW
 
	`__n⁄nuŒ
 ((1));

399 
	$Ã™d48
 (Ë
__THROW
;

400 
	$ƒ™d48
 (
__xsubi
[3])

401 
__THROW
 
	`__n⁄nuŒ
 ((1));

404 
	$mønd48
 (Ë
__THROW
;

405 
	$jønd48
 (
__xsubi
[3])

406 
__THROW
 
	`__n⁄nuŒ
 ((1));

409 
	$§™d48
 (
__£edvÆ
Ë
__THROW
;

410 *
	$£ed48
 (
__£ed16v
[3])

411 
__THROW
 
	`__n⁄nuŒ
 ((1));

412 
	$lc⁄g48
 (
__∑øm
[7]Ë
__THROW
 
	`__n⁄nuŒ
 ((1));

414 #ifde‡
__USE_MISC


418 
	sdønd48_d©a


420 
__x
[3];

421 
__ﬁd_x
[3];

422 
__c
;

423 
__öô
;

424 
__a
;

428 
	$dønd48_r
 (
dønd48_d©a
 *
__ª°ri˘
 
__buf„r
,

429 *
__ª°ri˘
 
__ªsu…
Ë
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

430 
	$î™d48_r
 (
__xsubi
[3],

431 
dønd48_d©a
 *
__ª°ri˘
 
__buf„r
,

432 *
__ª°ri˘
 
__ªsu…
Ë
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

435 
	$Ã™d48_r
 (
dønd48_d©a
 *
__ª°ri˘
 
__buf„r
,

436 *
__ª°ri˘
 
__ªsu…
)

437 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

438 
	$ƒ™d48_r
 (
__xsubi
[3],

439 
dønd48_d©a
 *
__ª°ri˘
 
__buf„r
,

440 *
__ª°ri˘
 
__ªsu…
)

441 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

444 
	$mønd48_r
 (
dønd48_d©a
 *
__ª°ri˘
 
__buf„r
,

445 *
__ª°ri˘
 
__ªsu…
)

446 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

447 
	$jønd48_r
 (
__xsubi
[3],

448 
dønd48_d©a
 *
__ª°ri˘
 
__buf„r
,

449 *
__ª°ri˘
 
__ªsu…
)

450 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

453 
	$§™d48_r
 (
__£edvÆ
, 
dønd48_d©a
 *
__buf„r
)

454 
__THROW
 
	`__n⁄nuŒ
 ((2));

456 
	$£ed48_r
 (
__£ed16v
[3],

457 
dønd48_d©a
 *
__buf„r
Ë
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

459 
	$lc⁄g48_r
 (
__∑øm
[7],

460 
dønd48_d©a
 *
__buf„r
)

461 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

467 #i‚de‡
__mÆloc_™d_ˇŒoc_deföed


468 
	#__mÆloc_™d_ˇŒoc_deföed


	)

469 
__BEGIN_NAMESPACE_STD


471 *
	$mÆloc
 (
size_t
 
__size
Ë
__THROW
 
__©åibuã_mÆloc__
 
__wur
;

473 *
	$ˇŒoc
 (
size_t
 
__nmemb
, size_à
__size
)

474 
__THROW
 
__©åibuã_mÆloc__
 
__wur
;

475 
__END_NAMESPACE_STD


478 #i‚de‡
__√ed_mÆloc_™d_ˇŒoc


479 
__BEGIN_NAMESPACE_STD


485 *
	$ªÆloc
 (*
__±r
, 
size_t
 
__size
)

486 
__THROW
 
__©åibuã_w¨n_unu£d_ªsu…__
;

488 
	$‰ì
 (*
__±r
Ë
__THROW
;

489 
__END_NAMESPACE_STD


491 #ifdef 
__USE_MISC


493 
	$c‰ì
 (*
__±r
Ë
__THROW
;

496 #i‡
deföed
 
__USE_GNU
 || deföed 
__USE_BSD
 || deföed 
__USE_MISC


497 
	~<Æloˇ.h
>

500 #i‡(
deföed
 
__USE_XOPEN_EXTENDED
 && !deföed 
__USE_XOPEN2K
) \

501 || 
deföed
 
__USE_BSD


503 *
	$vÆloc
 (
size_t
 
__size
Ë
__THROW
 
__©åibuã_mÆloc__
 
__wur
;

506 #ifde‡
__USE_XOPEN2K


508 
	$posix_memÆign
 (**
__mem±r
, 
size_t
 
__Æignmít
, size_à
__size
)

509 
__THROW
 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

512 
__BEGIN_NAMESPACE_STD


514 
	$ab‹t
 (Ë
__THROW
 
	`__©åibuã__
 ((
__n‹ëu∫__
));

518 
	`©exô
 ((*
__func
Ë()Ë
__THROW
 
	`__n⁄nuŒ
 ((1));

520 #ifde‡
__USE_GNU


524 #ifde‡
__˝lu•lus


525 "C++" 
	`©_quick_exô
 ((*
__func
) ())

526 
__THROW
 
	`__asm
 ("©_quick_exô"Ë
	`__n⁄nuŒ
 ((1));

528 
	`©_quick_exô
 ((*
__func
Ë()Ë
__THROW
 
	`__n⁄nuŒ
 ((1));

531 
__END_NAMESPACE_STD


533 #ifdef 
__USE_MISC


536 
	`⁄_exô
 ((*
__func
Ë(
__°©us
, *
__¨g
), *__arg)

537 
__THROW
 
	`__n⁄nuŒ
 ((1));

540 
__BEGIN_NAMESPACE_STD


544 
	$exô
 (
__°©us
Ë
__THROW
 
	`__©åibuã__
 ((
__n‹ëu∫__
));

546 #ifde‡
__USE_GNU


552 
	$quick_exô
 (
__°©us
Ë
__THROW
 
	`__©åibuã__
 ((
__n‹ëu∫__
));

554 
__END_NAMESPACE_STD


556 #ifde‡
__USE_ISOC99


557 
__BEGIN_NAMESPACE_C99


560 
	$_Exô
 (
__°©us
Ë
__THROW
 
	`__©åibuã__
 ((
__n‹ëu∫__
));

561 
__END_NAMESPACE_C99


565 
__BEGIN_NAMESPACE_STD


567 *
	$gëív
 (
__c⁄°
 *
__«me
Ë
__THROW
 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

568 
__END_NAMESPACE_STD


572 *
	$__£cuª_gëív
 (
__c⁄°
 *
__«me
)

573 
__THROW
 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

575 #i‡
deföed
 
__USE_SVID
 || deföed 
__USE_XOPEN


579 
	$puãnv
 (*
__°rög
Ë
__THROW
 
	`__n⁄nuŒ
 ((1));

582 #i‡
deföed
 
__USE_BSD
 || deföed 
__USE_XOPEN2K


585 
	$£ãnv
 (
__c⁄°
 *
__«me
, __c⁄° *
__vÆue
, 
__ª∂a˚
)

586 
__THROW
 
	`__n⁄nuŒ
 ((2));

589 
	$un£ãnv
 (
__c⁄°
 *
__«me
Ë
__THROW
 
	`__n⁄nuŒ
 ((1));

592 #ifdef 
__USE_MISC


596 
	$˛óªnv
 (Ë
__THROW
;

600 #i‡
deföed
 
__USE_MISC
 \

601 || (
deföed
 
__USE_XOPEN_EXTENDED
 && !deföed 
__USE_XOPEN2K
)

606 *
	$mkãmp
 (*
__ãm∂©e
Ë
__THROW
 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

609 #i‡
deföed
 
__USE_MISC
 || deföed 
__USE_XOPEN_EXTENDED
 \

610 || 
deföed
 
__USE_XOPEN2K8


619 #i‚de‡
__USE_FILE_OFFSET64


620 
	$mk°emp
 (*
__ãm∂©e
Ë
	`__n⁄nuŒ
 ((1)Ë
__wur
;

622 #ifde‡
__REDIRECT


623 
	`__REDIRECT
 (
mk°emp
, (*
__ãm∂©e
), 
mk°emp64
)

624 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

626 
	#mk°emp
 
mk°emp64


	)

629 #ifde‡
__USE_LARGEFILE64


630 
	$mk°emp64
 (*
__ãm∂©e
Ë
	`__n⁄nuŒ
 ((1)Ë
__wur
;

634 #ifde‡
__USE_MISC


641 #i‚de‡
__USE_FILE_OFFSET64


642 
	$mk°emps
 (*
__ãm∂©e
, 
__suffixÀn
Ë
	`__n⁄nuŒ
 ((1)Ë
__wur
;

644 #ifde‡
__REDIRECT


645 
	`__REDIRECT
 (
mk°emps
, (*
__ãm∂©e
, 
__suffixÀn
),

646 
mk°emps64
Ë
	`__n⁄nuŒ
 ((1)Ë
__wur
;

648 
	#mk°emps
 
mk°emps64


	)

651 #ifde‡
__USE_LARGEFILE64


652 
	$mk°emps64
 (*
__ãm∂©e
, 
__suffixÀn
)

653 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

657 #i‡
deföed
 
__USE_BSD
 || deföed 
__USE_XOPEN2K8


663 *
	$mkdãmp
 (*
__ãm∂©e
Ë
__THROW
 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

666 #ifde‡
__USE_GNU


673 #i‚de‡
__USE_FILE_OFFSET64


674 
	$mko°emp
 (*
__ãm∂©e
, 
__Êags
Ë
	`__n⁄nuŒ
 ((1)Ë
__wur
;

676 #ifde‡
__REDIRECT


677 
	`__REDIRECT
 (
mko°emp
, (*
__ãm∂©e
, 
__Êags
), 
mko°emp64
)

678 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

680 
	#mko°emp
 
mko°emp64


	)

683 #ifde‡
__USE_LARGEFILE64


684 
	$mko°emp64
 (*
__ãm∂©e
, 
__Êags
Ë
	`__n⁄nuŒ
 ((1)Ë
__wur
;

693 #i‚de‡
__USE_FILE_OFFSET64


694 
	$mko°emps
 (*
__ãm∂©e
, 
__suffixÀn
, 
__Êags
)

695 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

697 #ifde‡
__REDIRECT


698 
	`__REDIRECT
 (
mko°emps
, (*
__ãm∂©e
, 
__suffixÀn
,

699 
__Êags
), 
mko°emps64
)

700 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

702 
	#mko°emps
 
mko°emps64


	)

705 #ifde‡
__USE_LARGEFILE64


706 
	$mko°emps64
 (*
__ãm∂©e
, 
__suffixÀn
, 
__Êags
)

707 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

712 
__BEGIN_NAMESPACE_STD


717 
	$sy°em
 (
__c⁄°
 *
__comm™d
Ë
__wur
;

718 
__END_NAMESPACE_STD


721 #ifdef 
__USE_GNU


724 *
	$ˇn⁄iˇlize_fûe_«me
 (
__c⁄°
 *
__«me
)

725 
__THROW
 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

728 #i‡
deföed
 
__USE_BSD
 || deföed 
__USE_XOPEN_EXTENDED


734 *
	$ªÆ∑th
 (
__c⁄°
 *
__ª°ri˘
 
__«me
,

735 *
__ª°ri˘
 
__ªsﬁved
Ë
__THROW
 
__wur
;

740 #i‚de‡
__COMPAR_FN_T


741 
	#__COMPAR_FN_T


	)

742 (*
	t__com∑r_‚_t
Ë(
	t__c⁄°
 *, __const *);

744 #ifdef 
__USE_GNU


745 
__com∑r_‚_t
 
	tcom∑ris⁄_‚_t
;

748 #ifde‡
__USE_GNU


749 (*
	t__com∑r_d_‚_t
Ë(
	t__c⁄°
 *, __const *, *);

752 
__BEGIN_NAMESPACE_STD


755 *
	$b£¨ch
 (
__c⁄°
 *
__key
, __c⁄° *
__ba£
,

756 
size_t
 
__nmemb
, size_à
__size
, 
__com∑r_‚_t
 
__com∑r
)

757 
	`__n⁄nuŒ
 ((1, 2, 5)Ë
__wur
;

761 
	$qs‹t
 (*
__ba£
, 
size_t
 
__nmemb
, size_à
__size
,

762 
__com∑r_‚_t
 
__com∑r
Ë
	`__n⁄nuŒ
 ((1, 4));

763 #ifde‡
__USE_GNU


764 
	$qs‹t_r
 (*
__ba£
, 
size_t
 
__nmemb
, size_à
__size
,

765 
__com∑r_d_‚_t
 
__com∑r
, *
__¨g
)

766 
	`__n⁄nuŒ
 ((1, 4));

771 
	$abs
 (
__x
Ë
__THROW
 
	`__©åibuã__
 ((
__c⁄°__
)Ë
__wur
;

772 
	$œbs
 (
__x
Ë
__THROW
 
	`__©åibuã__
 ((
__c⁄°__
)Ë
__wur
;

773 
__END_NAMESPACE_STD


775 #ifde‡
__USE_ISOC99


776 
__exãnsi⁄__
 
	$Œabs
 (
__x
)

777 
__THROW
 
	`__©åibuã__
 ((
__c⁄°__
)Ë
__wur
;

781 
__BEGIN_NAMESPACE_STD


785 
div_t
 
	$div
 (
__numî
, 
__díom
)

786 
__THROW
 
	`__©åibuã__
 ((
__c⁄°__
)Ë
__wur
;

787 
ldiv_t
 
	$ldiv
 (
__numî
, 
__díom
)

788 
__THROW
 
	`__©åibuã__
 ((
__c⁄°__
)Ë
__wur
;

789 
__END_NAMESPACE_STD


791 #ifde‡
__USE_ISOC99


792 
__BEGIN_NAMESPACE_C99


793 
__exãnsi⁄__
 
Œdiv_t
 
	$Œdiv
 (
__numî
,

794 
__díom
)

795 
__THROW
 
	`__©åibuã__
 ((
__c⁄°__
)Ë
__wur
;

796 
__END_NAMESPACE_C99


800 #i‡(
deföed
 
__USE_XOPEN_EXTENDED
 && !deföed 
__USE_XOPEN2K
) \

801 || 
deföed
 
__USE_SVID


808 *
	$ecvt
 (
__vÆue
, 
__ndigô
, *
__ª°ri˘
 
__de˝t
,

809 *
__ª°ri˘
 
__sign
Ë
__THROW
 
	`__n⁄nuŒ
 ((3, 4)Ë
__wur
;

814 *
	$fcvt
 (
__vÆue
, 
__ndigô
, *
__ª°ri˘
 
__de˝t
,

815 *
__ª°ri˘
 
__sign
Ë
__THROW
 
	`__n⁄nuŒ
 ((3, 4)Ë
__wur
;

820 *
	$gcvt
 (
__vÆue
, 
__ndigô
, *
__buf
)

821 
__THROW
 
	`__n⁄nuŒ
 ((3)Ë
__wur
;

824 #ifde‡
__USE_MISC


826 *
	$qecvt
 (
__vÆue
, 
__ndigô
,

827 *
__ª°ri˘
 
__de˝t
, *__ª°ri˘ 
__sign
)

828 
__THROW
 
	`__n⁄nuŒ
 ((3, 4)Ë
__wur
;

829 *
	$qfcvt
 (
__vÆue
, 
__ndigô
,

830 *
__ª°ri˘
 
__de˝t
, *__ª°ri˘ 
__sign
)

831 
__THROW
 
	`__n⁄nuŒ
 ((3, 4)Ë
__wur
;

832 *
	$qgcvt
 (
__vÆue
, 
__ndigô
, *
__buf
)

833 
__THROW
 
	`__n⁄nuŒ
 ((3)Ë
__wur
;

838 
	$ecvt_r
 (
__vÆue
, 
__ndigô
, *
__ª°ri˘
 
__de˝t
,

839 *
__ª°ri˘
 
__sign
, *__ª°ri˘ 
__buf
,

840 
size_t
 
__Àn
Ë
__THROW
 
	`__n⁄nuŒ
 ((3, 4, 5));

841 
	$fcvt_r
 (
__vÆue
, 
__ndigô
, *
__ª°ri˘
 
__de˝t
,

842 *
__ª°ri˘
 
__sign
, *__ª°ri˘ 
__buf
,

843 
size_t
 
__Àn
Ë
__THROW
 
	`__n⁄nuŒ
 ((3, 4, 5));

845 
	$qecvt_r
 (
__vÆue
, 
__ndigô
,

846 *
__ª°ri˘
 
__de˝t
, *__ª°ri˘ 
__sign
,

847 *
__ª°ri˘
 
__buf
, 
size_t
 
__Àn
)

848 
__THROW
 
	`__n⁄nuŒ
 ((3, 4, 5));

849 
	$qfcvt_r
 (
__vÆue
, 
__ndigô
,

850 *
__ª°ri˘
 
__de˝t
, *__ª°ri˘ 
__sign
,

851 *
__ª°ri˘
 
__buf
, 
size_t
 
__Àn
)

852 
__THROW
 
	`__n⁄nuŒ
 ((3, 4, 5));

857 
__BEGIN_NAMESPACE_STD


860 
	$mbÀn
 (
__c⁄°
 *
__s
, 
size_t
 
__n
Ë
__THROW
 
__wur
;

863 
	$mbtowc
 (
wch¨_t
 *
__ª°ri˘
 
__pwc
,

864 
__c⁄°
 *
__ª°ri˘
 
__s
, 
size_t
 
__n
Ë
__THROW
 
__wur
;

867 
	$w˘omb
 (*
__s
, 
wch¨_t
 
__wch¨
Ë
__THROW
 
__wur
;

871 
size_t
 
	$mb°owcs
 (
wch¨_t
 *
__ª°ri˘
 
__pwcs
,

872 
__c⁄°
 *
__ª°ri˘
 
__s
, 
size_t
 
__n
Ë
__THROW
;

874 
size_t
 
	$wc°ombs
 (*
__ª°ri˘
 
__s
,

875 
__c⁄°
 
wch¨_t
 *
__ª°ri˘
 
__pwcs
, 
size_t
 
__n
)

876 
__THROW
;

877 
__END_NAMESPACE_STD


880 #ifde‡
__USE_SVID


885 
	$Ωm©ch
 (
__c⁄°
 *
__ª•⁄£
Ë
__THROW
 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

889 #i‡
deföed
 
__USE_XOPEN_EXTENDED
 || deföed 
__USE_XOPEN2K8


896 
	$gësub›t
 (**
__ª°ri˘
 
__›ti⁄p
,

897 *
__c⁄°
 *
__ª°ri˘
 
__tokís
,

898 **
__ª°ri˘
 
__vÆuï
)

899 
__THROW
 
	`__n⁄nuŒ
 ((1, 2, 3)Ë
__wur
;

903 #ifde‡
__USE_XOPEN


905 
	$£tkey
 (
__c⁄°
 *
__key
Ë
__THROW
 
	`__n⁄nuŒ
 ((1));

911 #ifde‡
__USE_XOPEN2KXSI


913 
	$posix_›í±
 (
__oÊag
Ë
__wur
;

916 #ifde‡
__USE_XOPEN


921 
	$gø¡±
 (
__fd
Ë
__THROW
;

925 
	$u∆ock±
 (
__fd
Ë
__THROW
;

930 *
	$±¢ame
 (
__fd
Ë
__THROW
 
__wur
;

933 #ifde‡
__USE_GNU


937 
	$±¢ame_r
 (
__fd
, *
__buf
, 
size_t
 
__buÊí
)

938 
__THROW
 
	`__n⁄nuŒ
 ((2));

941 
	`gë±
 ();

944 #ifde‡
__USE_BSD


948 
	$gëlﬂdavg
 (
__lﬂdavg
[], 
__√Àm
)

949 
__THROW
 
	`__n⁄nuŒ
 ((1));

954 #i‡
__USE_FORTIFY_LEVEL
 > 0 && 
deföed
 
__exã∫_Æways_ölöe


955 
	~<bôs/°dlib.h
>

957 #ifde‡
__LDBL_COMPAT


958 
	~<bôs/°dlib-ldbl.h
>

962 #unde‡
__√ed_mÆloc_™d_ˇŒoc


964 
__END_DECLS


	@/usr/include/string.h

24 #i‚def 
_STRING_H


25 
	#_STRING_H
 1

	)

27 
	~<„©uªs.h
>

29 
	g__BEGIN_DECLS


32 
	#__√ed_size_t


	)

33 
	#__√ed_NULL


	)

34 
	~<°ddef.h
>

37 #i‡
deföed
 
__˝lu•lus
 && 
__GNUC_PREREQ
 (4, 4)

38 
	#__CORRECT_ISO_CPP_STRING_H_PROTO


	)

42 
__BEGIN_NAMESPACE_STD


44 *
	$mem˝y
 (*
__ª°ri˘
 
__de°
,

45 
__c⁄°
 *
__ª°ri˘
 
__§c
, 
size_t
 
__n
)

46 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

49 *
	$memmove
 (*
__de°
, 
__c⁄°
 *
__§c
, 
size_t
 
__n
)

50 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

51 
__END_NAMESPACE_STD


56 #i‡
deföed
 
__USE_SVID
 || deföed 
__USE_BSD
 || deföed 
__USE_XOPEN


57 *
	$memc˝y
 (*
__ª°ri˘
 
__de°
, 
__c⁄°
 *__ª°ri˘ 
__§c
,

58 
__c
, 
size_t
 
__n
)

59 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

63 
__BEGIN_NAMESPACE_STD


65 *
	$mem£t
 (*
__s
, 
__c
, 
size_t
 
__n
Ë
__THROW
 
	`__n⁄nuŒ
 ((1));

68 
	$memcmp
 (
__c⁄°
 *
__s1
, __c⁄° *
__s2
, 
size_t
 
__n
)

69 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1, 2));

72 #ifde‡
__CORRECT_ISO_CPP_STRING_H_PROTO


75 *
	`memchr
 (*
__s
, 
__c
, 
size_t
 
__n
)

76 
__THROW
 
	`__asm
 ("memchr"Ë
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1));

77 
__c⁄°
 *
	`memchr
 (__c⁄° *
__s
, 
__c
, 
size_t
 
__n
)

78 
__THROW
 
	`__asm
 ("memchr"Ë
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1));

80 #ifde‡
__OPTIMIZE__


81 
__exã∫_Æways_ölöe
 *

82 
	`memchr
 (*
__s
, 
__c
, 
size_t
 
__n
Ë
__THROW


84  
	`__buûtö_memchr
 (
__s
, 
__c
, 
__n
);

87 
__exã∫_Æways_ölöe
 
__c⁄°
 *

88 
	`memchr
 (
__c⁄°
 *
__s
, 
__c
, 
size_t
 
__n
Ë
__THROW


90  
	`__buûtö_memchr
 (
__s
, 
__c
, 
__n
);

93 
	}
}

95 *
	$memchr
 (
__c⁄°
 *
__s
, 
__c
, 
size_t
 
__n
)

96 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1));

98 
__END_NAMESPACE_STD


100 #ifde‡
__USE_GNU


103 #ifde‡
__CORRECT_ISO_CPP_STRING_H_PROTO


104 "C++" *
	$øwmemchr
 (*
__s
, 
__c
)

105 
__THROW
 
	`__asm
 ("øwmemchr"Ë
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1));

106 "C++" 
__c⁄°
 *
	$øwmemchr
 (
__c⁄°
 *
__s
, 
__c
)

107 
__THROW
 
	`__asm
 ("øwmemchr"Ë
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1));

109 *
	$øwmemchr
 (
__c⁄°
 *
__s
, 
__c
)

110 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1));

114 #ifde‡
__CORRECT_ISO_CPP_STRING_H_PROTO


115 "C++" *
	$memrchr
 (*
__s
, 
__c
, 
size_t
 
__n
)

116 
__THROW
 
	`__asm
 ("memrchr"Ë
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1));

117 "C++" 
__c⁄°
 *
	$memrchr
 (
__c⁄°
 *
__s
, 
__c
, 
size_t
 
__n
)

118 
__THROW
 
	`__asm
 ("memrchr"Ë
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1));

120 *
	$memrchr
 (
__c⁄°
 *
__s
, 
__c
, 
size_t
 
__n
)

121 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1));

126 
__BEGIN_NAMESPACE_STD


128 *
	$°r˝y
 (*
__ª°ri˘
 
__de°
, 
__c⁄°
 *__ª°ri˘ 
__§c
)

129 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

131 *
	$°∫˝y
 (*
__ª°ri˘
 
__de°
,

132 
__c⁄°
 *
__ª°ri˘
 
__§c
, 
size_t
 
__n
)

133 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

136 *
	$°rˇt
 (*
__ª°ri˘
 
__de°
, 
__c⁄°
 *__ª°ri˘ 
__§c
)

137 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

139 *
	$°∫ˇt
 (*
__ª°ri˘
 
__de°
, 
__c⁄°
 *__ª°ri˘ 
__§c
,

140 
size_t
 
__n
Ë
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

143 
	$°rcmp
 (
__c⁄°
 *
__s1
, __c⁄° *
__s2
)

144 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1, 2));

146 
	$°∫cmp
 (
__c⁄°
 *
__s1
, __c⁄° *
__s2
, 
size_t
 
__n
)

147 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1, 2));

150 
	$°rcﬁl
 (
__c⁄°
 *
__s1
, __c⁄° *
__s2
)

151 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1, 2));

153 
size_t
 
	$°rx‰m
 (*
__ª°ri˘
 
__de°
,

154 
__c⁄°
 *
__ª°ri˘
 
__§c
, 
size_t
 
__n
)

155 
__THROW
 
	`__n⁄nuŒ
 ((2));

156 
__END_NAMESPACE_STD


158 #ifde‡
__USE_XOPEN2K8


162 
	~<xloˇÀ.h
>

165 
	$°rcﬁl_l
 (
__c⁄°
 *
__s1
, __c⁄° *
__s2
, 
__loˇÀ_t
 
__l
)

166 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1, 2, 3));

168 
size_t
 
	$°rx‰m_l
 (*
__de°
, 
__c⁄°
 *
__§c
, 
size_t
 
__n
,

169 
__loˇÀ_t
 
__l
Ë
__THROW
 
	`__n⁄nuŒ
 ((2, 4));

172 #i‡
deföed
 
__USE_SVID
 || deföed 
__USE_BSD
 || deföed 
__USE_XOPEN_EXTENDED
 \

173 || 
deföed
 
__USE_XOPEN2K8


175 *
	$°rdup
 (
__c⁄°
 *
__s
)

176 
__THROW
 
__©åibuã_mÆloc__
 
	`__n⁄nuŒ
 ((1));

182 #i‡
deföed
 
__USE_XOPEN2K8


183 *
	$°∫dup
 (
__c⁄°
 *
__°rög
, 
size_t
 
__n
)

184 
__THROW
 
__©åibuã_mÆloc__
 
	`__n⁄nuŒ
 ((1));

187 #i‡
deföed
 
__USE_GNU
 && deföed 
__GNUC__


189 
	#°rdu∑
(
s
) \

190 (
__exãnsi⁄__
 \

192 
__c⁄°
 *
__ﬁd
 = (
s
); \

193 
size_t
 
__Àn
 = 
	`°æí
 (
__ﬁd
) + 1; \

194 *
__√w
 = (*Ë
	`__buûtö_Æloˇ
 (
__Àn
); \

195 (*Ë
	`mem˝y
 (
__√w
, 
__ﬁd
, 
__Àn
); \

196 
	}
}))

	)

199 
	#°∫du∑
(
s
, 
n
) \

200 (
__exãnsi⁄__
 \

202 
__c⁄°
 *
__ﬁd
 = (
s
); \

203 
size_t
 
__Àn
 = 
	`°∫Àn
 (
__ﬁd
, (
n
)); \

204 *
__√w
 = (*Ë
	`__buûtö_Æloˇ
 (
__Àn
 + 1); \

205 
__√w
[
__Àn
] = '\0'; \

206 (*Ë
	`mem˝y
 (
__√w
, 
__ﬁd
, 
__Àn
); \

207 }))

	)

210 
	g__BEGIN_NAMESPACE_STD


212 #ifde‡
__CORRECT_ISO_CPP_STRING_H_PROTO


215 *
°rchr
 (*
__s
, 
__c
)

216 
__THROW
 
__asm
 ("°rchr"Ë
__©åibuã_puª__
 
__n⁄nuŒ
 ((1));

217 
__c⁄°
 *
°rchr
 (__c⁄° *
__s
, 
__c
)

218 
__THROW
 
__asm
 ("°rchr"Ë
__©åibuã_puª__
 
__n⁄nuŒ
 ((1));

220 #ifde‡
__OPTIMIZE__


221 
__exã∫_Æways_ölöe
 *

222 
°rchr
 (*
__s
, 
__c
Ë
	g__THROW


224  
__buûtö_°rchr
 (
__s
, 
__c
);

227 
__exã∫_Æways_ölöe
 
__c⁄°
 *

228 
°rchr
 (
__c⁄°
 *
__s
, 
__c
Ë
	g__THROW


230  
__buûtö_°rchr
 (
__s
, 
__c
);

235 *
	$°rchr
 (
__c⁄°
 *
__s
, 
__c
)

236 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1));

239 #ifde‡
__CORRECT_ISO_CPP_STRING_H_PROTO


242 *
	`°ºchr
 (*
__s
, 
__c
)

243 
__THROW
 
	`__asm
 ("°ºchr"Ë
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1));

244 
__c⁄°
 *
	`°ºchr
 (__c⁄° *
__s
, 
__c
)

245 
__THROW
 
	`__asm
 ("°ºchr"Ë
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1));

247 #ifde‡
__OPTIMIZE__


248 
__exã∫_Æways_ölöe
 *

249 
	`°ºchr
 (*
__s
, 
__c
Ë
__THROW


251  
	`__buûtö_°ºchr
 (
__s
, 
__c
);

254 
__exã∫_Æways_ölöe
 
__c⁄°
 *

255 
	`°ºchr
 (
__c⁄°
 *
__s
, 
__c
Ë
__THROW


257  
	`__buûtö_°ºchr
 (
__s
, 
__c
);

260 
	}
}

262 *
	$°ºchr
 (
__c⁄°
 *
__s
, 
__c
)

263 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1));

265 
__END_NAMESPACE_STD


267 #ifde‡
__USE_GNU


270 #ifde‡
__CORRECT_ISO_CPP_STRING_H_PROTO


271 "C++" *
	$°rch∫ul
 (*
__s
, 
__c
)

272 
__THROW
 
	`__asm
 ("°rch∫ul"Ë
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1));

273 "C++" 
__c⁄°
 *
	$°rch∫ul
 (
__c⁄°
 *
__s
, 
__c
)

274 
__THROW
 
	`__asm
 ("°rch∫ul"Ë
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1));

276 *
	$°rch∫ul
 (
__c⁄°
 *
__s
, 
__c
)

277 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1));

281 
__BEGIN_NAMESPACE_STD


284 
size_t
 
	$°rc•n
 (
__c⁄°
 *
__s
, __c⁄° *
__ªje˘
)

285 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1, 2));

288 
size_t
 
	$°r•n
 (
__c⁄°
 *
__s
, __c⁄° *
__ac˚±
)

289 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1, 2));

291 #ifde‡
__CORRECT_ISO_CPP_STRING_H_PROTO


294 *
	`°Ωbrk
 (*
__s
, 
__c⁄°
 *
__ac˚±
)

295 
__THROW
 
	`__asm
 ("°Ωbrk"Ë
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1, 2));

296 
__c⁄°
 *
	`°Ωbrk
 (__c⁄° *
__s
, __c⁄° *
__ac˚±
)

297 
__THROW
 
	`__asm
 ("°Ωbrk"Ë
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1, 2));

299 #ifde‡
__OPTIMIZE__


300 
__exã∫_Æways_ölöe
 *

301 
	`°Ωbrk
 (*
__s
, 
__c⁄°
 *
__ac˚±
Ë
__THROW


303  
	`__buûtö_°Ωbrk
 (
__s
, 
__ac˚±
);

306 
__exã∫_Æways_ölöe
 
__c⁄°
 *

307 
	`°Ωbrk
 (
__c⁄°
 *
__s
, __c⁄° *
__ac˚±
Ë
__THROW


309  
	`__buûtö_°Ωbrk
 (
__s
, 
__ac˚±
);

312 
	}
}

314 *
	$°Ωbrk
 (
__c⁄°
 *
__s
, __c⁄° *
__ac˚±
)

315 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1, 2));

318 #ifde‡
__CORRECT_ISO_CPP_STRING_H_PROTO


321 *
	`°r°r
 (*
__hay°ack
, 
__c⁄°
 *
__√edÀ
)

322 
__THROW
 
	`__asm
 ("°r°r"Ë
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1, 2));

323 
__c⁄°
 *
	`°r°r
 (__c⁄° *
__hay°ack
,

324 
__c⁄°
 *
__√edÀ
)

325 
__THROW
 
	`__asm
 ("°r°r"Ë
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1, 2));

327 #ifde‡
__OPTIMIZE__


328 
__exã∫_Æways_ölöe
 *

329 
	`°r°r
 (*
__hay°ack
, 
__c⁄°
 *
__√edÀ
Ë
__THROW


331  
	`__buûtö_°r°r
 (
__hay°ack
, 
__√edÀ
);

334 
__exã∫_Æways_ölöe
 
__c⁄°
 *

335 
	`°r°r
 (
__c⁄°
 *
__hay°ack
, __c⁄° *
__√edÀ
Ë
__THROW


337  
	`__buûtö_°r°r
 (
__hay°ack
, 
__√edÀ
);

340 
	}
}

342 *
	$°r°r
 (
__c⁄°
 *
__hay°ack
, __c⁄° *
__√edÀ
)

343 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1, 2));

348 *
	$°πok
 (*
__ª°ri˘
 
__s
, 
__c⁄°
 *__ª°ri˘ 
__dñim
)

349 
__THROW
 
	`__n⁄nuŒ
 ((2));

350 
__END_NAMESPACE_STD


354 *
	$__°πok_r
 (*
__ª°ri˘
 
__s
,

355 
__c⁄°
 *
__ª°ri˘
 
__dñim
,

356 **
__ª°ri˘
 
__ßve_±r
)

357 
__THROW
 
	`__n⁄nuŒ
 ((2, 3));

358 #i‡
deföed
 
__USE_POSIX
 || deföed 
__USE_MISC


359 *
	$°πok_r
 (*
__ª°ri˘
 
__s
, 
__c⁄°
 *__ª°ri˘ 
__dñim
,

360 **
__ª°ri˘
 
__ßve_±r
)

361 
__THROW
 
	`__n⁄nuŒ
 ((2, 3));

364 #ifde‡
__USE_GNU


366 #ifde‡
__CORRECT_ISO_CPP_STRING_H_PROTO


367 "C++" *
	$°rˇ£°r
 (*
__hay°ack
, 
__c⁄°
 *
__√edÀ
)

368 
__THROW
 
	`__asm
 ("°rˇ£°r"Ë
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1, 2));

369 "C++" 
__c⁄°
 *
	$°rˇ£°r
 (
__c⁄°
 *
__hay°ack
,

370 
__c⁄°
 *
__√edÀ
)

371 
__THROW
 
	`__asm
 ("°rˇ£°r"Ë
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1, 2));

373 *
	$°rˇ£°r
 (
__c⁄°
 *
__hay°ack
, __c⁄° *
__√edÀ
)

374 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1, 2));

378 #ifde‡
__USE_GNU


382 *
	$memmem
 (
__c⁄°
 *
__hay°ack
, 
size_t
 
__hay°ackÀn
,

383 
__c⁄°
 *
__√edÀ
, 
size_t
 
__√edÀÀn
)

384 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1, 3));

388 *
	$__memp˝y
 (*
__ª°ri˘
 
__de°
,

389 
__c⁄°
 *
__ª°ri˘
 
__§c
, 
size_t
 
__n
)

390 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

391 *
	$memp˝y
 (*
__ª°ri˘
 
__de°
,

392 
__c⁄°
 *
__ª°ri˘
 
__§c
, 
size_t
 
__n
)

393 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

397 
__BEGIN_NAMESPACE_STD


399 
size_t
 
	$°æí
 (
__c⁄°
 *
__s
)

400 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1));

401 
__END_NAMESPACE_STD


403 #ifdef 
__USE_XOPEN2K8


406 
size_t
 
	$°∫Àn
 (
__c⁄°
 *
__°rög
, 
size_t
 
__maxÀn
)

407 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1));

411 
__BEGIN_NAMESPACE_STD


413 *
	$°ªº‹
 (
__î∫um
Ë
__THROW
;

414 
__END_NAMESPACE_STD


415 #i‡
deföed
 
__USE_XOPEN2K
 || deföed 
__USE_MISC


423 #i‡
deföed
 
__USE_XOPEN2K
 && !deföed 
__USE_GNU


426 #ifde‡
__REDIRECT_NTH


427 
	`__REDIRECT_NTH
 (
°ªº‹_r
,

428 (
__î∫um
, *
__buf
, 
size_t
 
__buÊí
),

429 
__xpg_°ªº‹_r
Ë
	`__n⁄nuŒ
 ((2));

431 
	$__xpg_°ªº‹_r
 (
__î∫um
, *
__buf
, 
size_t
 
__buÊí
)

432 
__THROW
 
	`__n⁄nuŒ
 ((2));

433 
	#°ªº‹_r
 
__xpg_°ªº‹_r


	)

438 *
	$°ªº‹_r
 (
__î∫um
, *
__buf
, 
size_t
 
__buÊí
)

439 
__THROW
 
	`__n⁄nuŒ
 ((2));

443 #ifde‡
__USE_XOPEN2K8


445 *
	$°ªº‹_l
 (
__î∫um
, 
__loˇÀ_t
 
__l
Ë
__THROW
;

451 
	$__bzîo
 (*
__s
, 
size_t
 
__n
Ë
__THROW
 
	`__n⁄nuŒ
 ((1));

453 #ifde‡
__USE_BSD


455 
	$bc›y
 (
__c⁄°
 *
__§c
, *
__de°
, 
size_t
 
__n
)

456 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

459 
	$bzîo
 (*
__s
, 
size_t
 
__n
Ë
__THROW
 
	`__n⁄nuŒ
 ((1));

462 
	$bcmp
 (
__c⁄°
 *
__s1
, __c⁄° *
__s2
, 
size_t
 
__n
)

463 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1, 2));

466 #ifde‡
__CORRECT_ISO_CPP_STRING_H_PROTO


469 *
	`ödex
 (*
__s
, 
__c
)

470 
__THROW
 
	`__asm
 ("ödex"Ë
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1));

471 
__c⁄°
 *
	`ödex
 (__c⁄° *
__s
, 
__c
)

472 
__THROW
 
	`__asm
 ("ödex"Ë
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1));

474 #i‡
deföed
 
__OPTIMIZE__
 && !deföed 
__CORRECT_ISO_CPP_STRINGS_H_PROTO


475 
__exã∫_Æways_ölöe
 *

476 
	`ödex
 (*
__s
, 
__c
Ë
__THROW


478  
	`__buûtö_ödex
 (
__s
, 
__c
);

481 
__exã∫_Æways_ölöe
 
__c⁄°
 *

482 
	`ödex
 (
__c⁄°
 *
__s
, 
__c
Ë
__THROW


484  
	`__buûtö_ödex
 (
__s
, 
__c
);

487 
	}
}

489 *
	$ödex
 (
__c⁄°
 *
__s
, 
__c
)

490 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1));

494 #ifde‡
__CORRECT_ISO_CPP_STRING_H_PROTO


497 *
	`rödex
 (*
__s
, 
__c
)

498 
__THROW
 
	`__asm
 ("rödex"Ë
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1));

499 
__c⁄°
 *
	`rödex
 (__c⁄° *
__s
, 
__c
)

500 
__THROW
 
	`__asm
 ("rödex"Ë
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1));

502 #i‡
deföed
 
__OPTIMIZE__
 && !deföed 
__CORRECT_ISO_CPP_STRINGS_H_PROTO


503 
__exã∫_Æways_ölöe
 *

504 
	`rödex
 (*
__s
, 
__c
Ë
__THROW


506  
	`__buûtö_rödex
 (
__s
, 
__c
);

509 
__exã∫_Æways_ölöe
 
__c⁄°
 *

510 
	`rödex
 (
__c⁄°
 *
__s
, 
__c
Ë
__THROW


512  
	`__buûtö_rödex
 (
__s
, 
__c
);

515 
	}
}

517 *
	$rödex
 (
__c⁄°
 *
__s
, 
__c
)

518 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1));

523 
	$ffs
 (
__i
Ë
__THROW
 
	`__©åibuã__
 ((
__c⁄°__
));

527 #ifdef 
__USE_GNU


528 
	$ff¶
 (
__l
Ë
__THROW
 
	`__©åibuã__
 ((
__c⁄°__
));

529 #ifde‡
__GNUC__


530 
__exãnsi⁄__
 
	$ff¶l
 (
__Œ
)

531 
__THROW
 
	`__©åibuã__
 ((
__c⁄°__
));

536 
	$°rˇ£cmp
 (
__c⁄°
 *
__s1
, __c⁄° *
__s2
)

537 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1, 2));

540 
	$°∫ˇ£cmp
 (
__c⁄°
 *
__s1
, __c⁄° *
__s2
, 
size_t
 
__n
)

541 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1, 2));

544 #ifdef 
__USE_GNU


547 
	$°rˇ£cmp_l
 (
__c⁄°
 *
__s1
, __c⁄° *
__s2
,

548 
__loˇÀ_t
 
__loc
)

549 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1, 2, 3));

551 
	$°∫ˇ£cmp_l
 (
__c⁄°
 *
__s1
, __c⁄° *
__s2
,

552 
size_t
 
__n
, 
__loˇÀ_t
 
__loc
)

553 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1, 2, 4));

556 #ifdef 
__USE_BSD


559 *
	$°r£p
 (**
__ª°ri˘
 
__°rögp
,

560 
__c⁄°
 *
__ª°ri˘
 
__dñim
)

561 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

564 #ifdef 
__USE_XOPEN2K8


566 *
	$°rsig«l
 (
__sig
Ë
__THROW
;

569 *
	$__°p˝y
 (*
__ª°ri˘
 
__de°
, 
__c⁄°
 *__ª°ri˘ 
__§c
)

570 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

571 *
	$°p˝y
 (*
__ª°ri˘
 
__de°
, 
__c⁄°
 *__ª°ri˘ 
__§c
)

572 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

576 *
	$__°≤˝y
 (*
__ª°ri˘
 
__de°
,

577 
__c⁄°
 *
__ª°ri˘
 
__§c
, 
size_t
 
__n
)

578 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

579 *
	$°≤˝y
 (*
__ª°ri˘
 
__de°
,

580 
__c⁄°
 *
__ª°ri˘
 
__§c
, 
size_t
 
__n
)

581 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

584 #ifdef 
__USE_GNU


586 
	$°rvîscmp
 (
__c⁄°
 *
__s1
, __c⁄° *
__s2
)

587 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1, 2));

590 *
	$°r‰y
 (*
__°rög
Ë
__THROW
 
	`__n⁄nuŒ
 ((1));

593 *
	$mem‰ob
 (*
__s
, 
size_t
 
__n
Ë
__THROW
 
	`__n⁄nuŒ
 ((1));

595 #i‚de‡
ba£«me


600 #ifde‡
__CORRECT_ISO_CPP_STRING_H_PROTO


601 "C++" *
	$ba£«me
 (*
__fûíame
)

602 
__THROW
 
	`__asm
 ("ba£«me"Ë
	`__n⁄nuŒ
 ((1));

603 "C++" 
__c⁄°
 *
	$ba£«me
 (
__c⁄°
 *
__fûíame
)

604 
__THROW
 
	`__asm
 ("ba£«me"Ë
	`__n⁄nuŒ
 ((1));

606 *
	$ba£«me
 (
__c⁄°
 *
__fûíame
Ë
__THROW
 
	`__n⁄nuŒ
 ((1));

612 #i‡
deföed
 
__GNUC__
 && __GNUC__ >= 2

613 #i‡
deföed
 
__OPTIMIZE__
 && !deföed 
__OPTIMIZE_SIZE__
 \

614 && !
deföed
 
__NO_INLINE__
 && !deföed 
__˝lu•lus


634 
	~<bôs/°rög.h
>

637 
	~<bôs/°rög2.h
>

640 #i‡
__USE_FORTIFY_LEVEL
 > 0 && 
deföed
 
__exã∫_Æways_ölöe


642 
	~<bôs/°rög3.h
>

646 
__END_DECLS


	@/usr/include/strings.h

20 #i‚def 
_STRINGS_H


21 
	#_STRINGS_H
 1

	)

26 #i‡!
deföed
 
_STRING_H
 || !deföed 
__USE_BSD


28 
	~<„©uªs.h
>

29 
	#__√ed_size_t


	)

30 
	~<°ddef.h
>

33 #i‡
deföed
 
__˝lu•lus
 && 
__GNUC_PREREQ
 (4, 4)

34 
	#__CORRECT_ISO_CPP_STRINGS_H_PROTO


	)

37 
	g__BEGIN_DECLS


39 #i‡
deföed
 
__USE_MISC
 || !deföed 
__USE_XOPEN2K8


41 
	$bcmp
 (
__c⁄°
 *
__s1
, __c⁄° *
__s2
, 
size_t
 
__n
)

42 
__THROW
 
__©åibuã_puª__
;

45 
	$bc›y
 (
__c⁄°
 *
__§c
, *
__de°
, 
size_t
 
__n
Ë
__THROW
;

48 
	$bzîo
 (*
__s
, 
size_t
 
__n
Ë
__THROW
;

51 #ifde‡
__CORRECT_ISO_CPP_STRINGS_H_PROTO


54 *
	`ödex
 (*
__s
, 
__c
)

55 
__THROW
 
	`__asm
 ("ödex"Ë
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1));

56 
__c⁄°
 *
	`ödex
 (__c⁄° *
__s
, 
__c
)

57 
__THROW
 
	`__asm
 ("ödex"Ë
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1));

59 #i‡
deföed
 
__OPTIMIZE__
 && !deföed 
__CORRECT_ISO_CPP_STRING_H_PROTO


60 
__exã∫_Æways_ölöe
 *

61 
	`ödex
 (*
__s
, 
__c
Ë
__THROW


63  
	`__buûtö_ödex
 (
__s
, 
__c
);

66 
__exã∫_Æways_ölöe
 
__c⁄°
 *

67 
	`ödex
 (
__c⁄°
 *
__s
, 
__c
Ë
__THROW


69  
	`__buûtö_ödex
 (
__s
, 
__c
);

72 
	}
}

74 *
	$ödex
 (
__c⁄°
 *
__s
, 
__c
)

75 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1));

79 #ifde‡
__CORRECT_ISO_CPP_STRINGS_H_PROTO


82 *
	`rödex
 (*
__s
, 
__c
)

83 
__THROW
 
	`__asm
 ("rödex"Ë
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1));

84 
__c⁄°
 *
	`rödex
 (__c⁄° *
__s
, 
__c
)

85 
__THROW
 
	`__asm
 ("rödex"Ë
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1));

87 #i‡
deföed
 
__OPTIMIZE__
 && !deföed 
__CORRECT_ISO_CPP_STRING_H_PROTO


88 
__exã∫_Æways_ölöe
 *

89 
	`rödex
 (*
__s
, 
__c
Ë
__THROW


91  
	`__buûtö_rödex
 (
__s
, 
__c
);

94 
__exã∫_Æways_ölöe
 
__c⁄°
 *

95 
	`rödex
 (
__c⁄°
 *
__s
, 
__c
Ë
__THROW


97  
	`__buûtö_rödex
 (
__s
, 
__c
);

100 
	}
}

102 *
	$rödex
 (
__c⁄°
 *
__s
, 
__c
)

103 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1));

107 #i‡
deföed
 
__USE_MISC
 || !deföed 
__USE_XOPEN2K8
 || deföed 
__USE_XOPEN2K8XSI


110 
	$ffs
 (
__i
Ë
__THROW
 
	`__©åibuã__
 ((const));

114 
	$°rˇ£cmp
 (
__c⁄°
 *
__s1
, __c⁄° *
__s2
)

115 
__THROW
 
__©åibuã_puª__
;

118 
	$°∫ˇ£cmp
 (
__c⁄°
 *
__s1
, __c⁄° *
__s2
, 
size_t
 
__n
)

119 
__THROW
 
__©åibuã_puª__
;

121 #ifdef 
__USE_XOPEN2K8


125 
	~<xloˇÀ.h
>

129 
	$°rˇ£cmp_l
 (
__c⁄°
 *
__s1
, __c⁄° *
__s2
,

130 
__loˇÀ_t
 
__loc
)

131 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1, 2, 3));

133 
	$°∫ˇ£cmp_l
 (
__c⁄°
 *
__s1
, __c⁄° *
__s2
,

134 
size_t
 
__n
, 
__loˇÀ_t
 
__loc
)

135 
__THROW
 
__©åibuã_puª__
 
	`__n⁄nuŒ
 ((1, 2, 4));

138 
__END_DECLS


	@/usr/include/stropts.h

19 #i‚de‡
_STROPTS_H


20 
	#_STROPTS_H
 1

	)

22 
	~<„©uªs.h
>

23 
	~<bôs/ty≥s.h
>

24 
	~<bôs/xtôy≥s.h
>

26 #i‚de‡
__gid_t_deföed


27 
__gid_t
 
	tgid_t
;

28 
	#__gid_t_deföed


	)

31 #i‚de‡
__uid_t_deföed


32 
__uid_t
 
	tuid_t
;

33 
	#__uid_t_deföed


	)

36 
__t_usˇœr_t
 
	tt_usˇœr_t
;

39 
	~<bôs/°r›ts.h
>

42 
__BEGIN_DECLS


45 
	$iß°ªam
 (
__fûdes
Ë
__THROW
;

51 
	`gëmsg
 (
__fûdes
, 
°rbuf
 *
__ª°ri˘
 
__˘Õå
,

52 
°rbuf
 *
__ª°ri˘
 
__d©≠å
,

53 *
__ª°ri˘
 
__Êag•
);

60 
	`gëpmsg
 (
__fûdes
, 
°rbuf
 *
__ª°ri˘
 
__˘Õå
,

61 
°rbuf
 *
__ª°ri˘
 
__d©≠å
,

62 *
__ª°ri˘
 
__b™dp
, *__ª°ri˘ 
__Êag•
);

67 
	$io˘l
 (
__fd
, 
__ªque°
, ...Ë
__THROW
;

73 
	`putmsg
 (
__fûdes
, 
__c⁄°
 
°rbuf
 *
__˘Õå
,

74 
__c⁄°
 
°rbuf
 *
__d©≠å
, 
__Êags
);

80 
	`puçmsg
 (
__fûdes
, 
__c⁄°
 
°rbuf
 *
__˘Õå
,

81 
__c⁄°
 
°rbuf
 *
__d©≠å
, 
__b™d
, 
__Êags
);

85 
	$Áâach
 (
__fûdes
, 
__c⁄°
 *
__∑th
Ë
__THROW
;

88 
	$fdëach
 (
__c⁄°
 *
__∑th
Ë
__THROW
;

90 
__END_DECLS


	@/usr/include/syslog.h

1 
	~<sys/sy¶og.h
>

	@/usr/include/time.h

23 #i‚def 
_TIME_H


25 #i‡(! 
deföed
 
__√ed_time_t
 && !deföed 
__√ed_˛ock_t
 && \

26 ! 
deföed
 
	g__√ed_time•ec
)

27 
	#_TIME_H
 1

	)

28 
	~<„©uªs.h
>

30 
	g__BEGIN_DECLS


34 #ifdef 
_TIME_H


36 
	#__√ed_size_t


	)

37 
	#__√ed_NULL


	)

38 
	~<°ddef.h
>

42 
	~<bôs/time.h
>

45 #i‡!
deföed
 
__STRICT_ANSI__
 && !deföed 
__USE_XOPEN2K


46 #i‚de‡
CLK_TCK


47 
	#CLK_TCK
 
CLOCKS_PER_SEC


	)

53 #i‡!
deföed
 
__˛ock_t_deföed
 && (deföed 
_TIME_H
 || deföed 
__√ed_˛ock_t
)

54 
	#__˛ock_t_deföed
 1

	)

56 
	~<bôs/ty≥s.h
>

58 
__BEGIN_NAMESPACE_STD


60 
__˛ock_t
 
	t˛ock_t
;

61 
	g__END_NAMESPACE_STD


62 #i‡
deföed
 
__USE_XOPEN
 || deföed 
__USE_POSIX
 || deföed 
__USE_MISC


63 
	$__USING_NAMESPACE_STD
(
˛ock_t
)

67 #unde‡
__√ed_˛ock_t


69 #i‡!
deföed
 
__time_t_deföed
 && (deföed 
_TIME_H
 || deföed 
__√ed_time_t
)

70 
	#__time_t_deföed
 1

	)

72 
	~<bôs/ty≥s.h
>

74 
__BEGIN_NAMESPACE_STD


76 
__time_t
 
	ttime_t
;

77 
__END_NAMESPACE_STD


78 #i‡
deföed
 
__USE_POSIX
 || deföed 
__USE_MISC
 || deföed 
__USE_SVID


79 
	$__USING_NAMESPACE_STD
(
time_t
)

83 #unde‡
__√ed_time_t


85 #i‡!
deföed
 
__˛ockid_t_deföed
 && \

86 ((
deföed
 
_TIME_H
 && deföed 
__USE_POSIX199309
Ë|| deföed 
__√ed_˛ockid_t
)

87 
	#__˛ockid_t_deföed
 1

	)

89 
	~<bôs/ty≥s.h
>

92 
__˛ockid_t
 
	t˛ockid_t
;

95 #unde‡
__˛ockid_time_t


97 #i‡!
deföed
 
__timî_t_deföed
 && \

98 ((
deföed
 
_TIME_H
 && deföed 
__USE_POSIX199309
Ë|| deföed 
__√ed_timî_t
)

99 
	#__timî_t_deföed
 1

	)

101 
	~<bôs/ty≥s.h
>

104 
__timî_t
 
	ttimî_t
;

107 #unde‡
__√ed_timî_t


110 #i‡!
deföed
 
__time•ec_deföed
 && \

111 ((
deföed
 
_TIME_H
 && \

112 (
deföed
 
__USE_POSIX199309
 || deföed 
__USE_MISC
)) || \

113 
deföed
 
__√ed_time•ec
)

114 
	#__time•ec_deföed
 1

	)

116 
	~<bôs/ty≥s.h
>

120 
	stime•ec


122 
__time_t
 
tv_£c
;

123 
tv_n£c
;

127 #unde‡
__√ed_time•ec


130 #ifdef 
_TIME_H


131 
__BEGIN_NAMESPACE_STD


133 
	stm


135 
tm_£c
;

136 
tm_mö
;

137 
tm_hour
;

138 
tm_mday
;

139 
tm_m⁄
;

140 
tm_yór
;

141 
tm_wday
;

142 
tm_yday
;

143 
tm_isd°
;

145 #ifdef 
__USE_BSD


146 
tm_gmtoff
;

147 
__c⁄°
 *
tm_z⁄e
;

149 
__tm_gmtoff
;

150 
__c⁄°
 *
__tm_z⁄e
;

153 
__END_NAMESPACE_STD


154 #i‡
deföed
 
__USE_XOPEN
 || deföed 
__USE_POSIX
 || deföed 
__USE_MISC


155 
	$__USING_NAMESPACE_STD
(
tm
)

159 #ifde‡
__USE_POSIX199309


161 
	sôimî•ec


163 
time•ec
 
ô_öãrvÆ
;

164 
time•ec
 
ô_vÆue
;

168 
sigevít
;

172 #ifde‡
__USE_XOPEN2K


173 #i‚de‡
__pid_t_deföed


174 
__pid_t
 
	tpid_t
;

175 
	#__pid_t_deföed


	)

180 
__BEGIN_NAMESPACE_STD


183 
˛ock_t
 
	$˛ock
 (Ë
__THROW
;

186 
time_t
 
	$time
 (
time_t
 *
__timî
Ë
__THROW
;

189 
	$dif·ime
 (
time_t
 
__time1
,Åime_à
__time0
)

190 
__THROW
 
	`__©åibuã__
 ((
__c⁄°__
));

193 
time_t
 
	$mktime
 (
tm
 *
__ç
Ë
__THROW
;

199 
size_t
 
	$°r·ime
 (*
__ª°ri˘
 
__s
, 
size_t
 
__maxsize
,

200 
__c⁄°
 *
__ª°ri˘
 
__f‹m©
,

201 
__c⁄°
 
tm
 *
__ª°ri˘
 
__ç
Ë
__THROW
;

202 
__END_NAMESPACE_STD


204 #ifde‡
__USE_XOPEN


207 *
	$°Ωtime
 (
__c⁄°
 *
__ª°ri˘
 
__s
,

208 
__c⁄°
 *
__ª°ri˘
 
__fmt
, 
tm
 *
__ç
)

209 
__THROW
;

212 #ifde‡
__USE_XOPEN2K8


215 
	~<xloˇÀ.h
>

217 
size_t
 
	$°r·ime_l
 (*
__ª°ri˘
 
__s
, 
size_t
 
__maxsize
,

218 
__c⁄°
 *
__ª°ri˘
 
__f‹m©
,

219 
__c⁄°
 
tm
 *
__ª°ri˘
 
__ç
,

220 
__loˇÀ_t
 
__loc
Ë
__THROW
;

223 #ifde‡
__USE_GNU


224 *
	$°Ωtime_l
 (
__c⁄°
 *
__ª°ri˘
 
__s
,

225 
__c⁄°
 *
__ª°ri˘
 
__fmt
, 
tm
 *
__ç
,

226 
__loˇÀ_t
 
__loc
Ë
__THROW
;

230 
__BEGIN_NAMESPACE_STD


233 
tm
 *
	$gmtime
 (
__c⁄°
 
time_t
 *
__timî
Ë
__THROW
;

237 
tm
 *
	$loˇ…ime
 (
__c⁄°
 
time_t
 *
__timî
Ë
__THROW
;

238 
__END_NAMESPACE_STD


240 #i‡
deföed
 
__USE_POSIX
 || deföed 
__USE_MISC


243 
tm
 *
	$gmtime_r
 (
__c⁄°
 
time_t
 *
__ª°ri˘
 
__timî
,

244 
tm
 *
__ª°ri˘
 
__ç
Ë
__THROW
;

248 
tm
 *
	$loˇ…ime_r
 (
__c⁄°
 
time_t
 *
__ª°ri˘
 
__timî
,

249 
tm
 *
__ª°ri˘
 
__ç
Ë
__THROW
;

252 
__BEGIN_NAMESPACE_STD


255 *
	$as˘ime
 (
__c⁄°
 
tm
 *
__ç
Ë
__THROW
;

258 *
	$˘ime
 (
__c⁄°
 
time_t
 *
__timî
Ë
__THROW
;

259 
__END_NAMESPACE_STD


261 #i‡
deföed
 
__USE_POSIX
 || deföed 
__USE_MISC


266 *
	$as˘ime_r
 (
__c⁄°
 
tm
 *
__ª°ri˘
 
__ç
,

267 *
__ª°ri˘
 
__buf
Ë
__THROW
;

270 *
	$˘ime_r
 (
__c⁄°
 
time_t
 *
__ª°ri˘
 
__timî
,

271 *
__ª°ri˘
 
__buf
Ë
__THROW
;

276 *
__tz«me
[2];

277 
__daylight
;

278 
__timez⁄e
;

281 #ifdef 
__USE_POSIX


283 *
tz«me
[2];

287 
	$tz£t
 (Ë
__THROW
;

290 #i‡
deföed
 
__USE_SVID
 || deföed 
__USE_XOPEN


291 
daylight
;

292 
timez⁄e
;

295 #ifde‡
__USE_SVID


298 
	$°ime
 (
__c⁄°
 
time_t
 *
__whí
Ë
__THROW
;

304 
	#__i¶óp
(
yór
) \

305 ((
yór
Ë% 4 =0 && ((yórË% 100 !0 || (yórË% 400 =0))

	)

308 #ifde‡
__USE_MISC


313 
time_t
 
	$timegm
 (
tm
 *
__ç
Ë
__THROW
;

316 
time_t
 
	$timñoˇl
 (
tm
 *
__ç
Ë
__THROW
;

319 
	$dysize
 (
__yór
Ë
__THROW
 
	`__©åibuã__
 ((
__c⁄°__
));

323 #ifde‡
__USE_POSIX199309


328 
	`«no¶ìp
 (
__c⁄°
 
time•ec
 *
__ªque°ed_time
,

329 
time•ec
 *
__ªmaöög
);

333 
	$˛ock_gëªs
 (
˛ockid_t
 
__˛ock_id
, 
time•ec
 *
__ªs
Ë
__THROW
;

336 
	$˛ock_gëtime
 (
˛ockid_t
 
__˛ock_id
, 
time•ec
 *
__ç
Ë
__THROW
;

339 
	$˛ock_£âime
 (
˛ockid_t
 
__˛ock_id
, 
__c⁄°
 
time•ec
 *
__ç
)

340 
__THROW
;

342 #ifde‡
__USE_XOPEN2K


347 
	`˛ock_«no¶ìp
 (
˛ockid_t
 
__˛ock_id
, 
__Êags
,

348 
__c⁄°
 
time•ec
 *
__ªq
,

349 
time•ec
 *
__ªm
);

352 
	$˛ock_gë˝u˛ockid
 (
pid_t
 
__pid
, 
˛ockid_t
 *
__˛ock_id
Ë
__THROW
;

357 
	$timî_¸óã
 (
˛ockid_t
 
__˛ock_id
,

358 
sigevít
 *
__ª°ri˘
 
__evp
,

359 
timî_t
 *
__ª°ri˘
 
__timîid
Ë
__THROW
;

362 
	$timî_dñëe
 (
timî_t
 
__timîid
Ë
__THROW
;

365 
	$timî_£âime
 (
timî_t
 
__timîid
, 
__Êags
,

366 
__c⁄°
 
ôimî•ec
 *
__ª°ri˘
 
__vÆue
,

367 
ôimî•ec
 *
__ª°ri˘
 
__ovÆue
Ë
__THROW
;

370 
	$timî_gëtime
 (
timî_t
 
__timîid
, 
ôimî•ec
 *
__vÆue
)

371 
__THROW
;

374 
	$timî_gëovîrun
 (
timî_t
 
__timîid
Ë
__THROW
;

378 #ifde‡
__USE_XOPEN_EXTENDED


390 
gëd©e_îr
;

399 
tm
 *
	`gëd©e
 (
__c⁄°
 *
__°rög
);

402 #ifde‡
__USE_GNU


413 
	`gëd©e_r
 (
__c⁄°
 *
__ª°ri˘
 
__°rög
,

414 
tm
 *
__ª°ri˘
 
__ªsbuÂ
);

417 
__END_DECLS


	@/usr/include/ucontext.h

21 #i‚de‡
_UCONTEXT_H


22 
	#_UCONTEXT_H
 1

	)

24 
	~<„©uªs.h
>

27 
	~<sys/uc⁄ãxt.h
>

29 
__BEGIN_DECLS


32 
	$gëc⁄ãxt
 (
uc⁄ãxt_t
 *
__u˝
Ë
__THROWNL
;

35 
	$£tc⁄ãxt
 (
__c⁄°
 
uc⁄ãxt_t
 *
__u˝
Ë
__THROWNL
;

39 
	$sw≠c⁄ãxt
 (
uc⁄ãxt_t
 *
__ª°ri˘
 
__ou˝
,

40 
__c⁄°
 
uc⁄ãxt_t
 *
__ª°ri˘
 
__u˝
Ë
__THROWNL
;

48 
	`makec⁄ãxt
 (
uc⁄ãxt_t
 *
__u˝
, (*
__func
) (),

49 
__¨gc
, ...Ë
__THROW
;

51 
__END_DECLS


	@/usr/include/unistd.h

23 #i‚def 
_UNISTD_H


24 
	#_UNISTD_H
 1

	)

26 
	~<„©uªs.h
>

28 
	g__BEGIN_DECLS


33 #ifde‡
__USE_XOPEN2K8


35 
	#_POSIX_VERSION
 200809L

	)

36 #ñi‡
deföed
 
__USE_XOPEN2K


38 
	#_POSIX_VERSION
 200112L

	)

39 #ñi‡
deföed
 
__USE_POSIX199506


41 
	#_POSIX_VERSION
 199506L

	)

42 #ñi‡
deföed
 
__USE_POSIX199309


44 
	#_POSIX_VERSION
 199309L

	)

47 
	#_POSIX_VERSION
 199009L

	)

53 #ifde‡
__USE_XOPEN2K8


54 
	#__POSIX2_THIS_VERSION
 200809L

	)

56 #ñi‡
deföed
 
__USE_XOPEN2K


58 
	#__POSIX2_THIS_VERSION
 200112L

	)

59 #ñi‡
deföed
 
__USE_POSIX199506


61 
	#__POSIX2_THIS_VERSION
 199506L

	)

64 
	#__POSIX2_THIS_VERSION
 199209L

	)

68 
	#_POSIX2_VERSION
 
__POSIX2_THIS_VERSION


	)

72 
	#_POSIX2_C_BIND
 
__POSIX2_THIS_VERSION


	)

76 
	#_POSIX2_C_DEV
 
__POSIX2_THIS_VERSION


	)

80 
	#_POSIX2_SW_DEV
 
__POSIX2_THIS_VERSION


	)

84 
	#_POSIX2_LOCALEDEF
 
__POSIX2_THIS_VERSION


	)

87 #ifde‡
__USE_XOPEN2K8


88 
	#_XOPEN_VERSION
 700

	)

89 #ñi‡
deföed
 
__USE_XOPEN2K


90 
	#_XOPEN_VERSION
 600

	)

91 #ñi‡
deföed
 
__USE_UNIX98


92 
	#_XOPEN_VERSION
 500

	)

94 
	#_XOPEN_VERSION
 4

	)

98 
	#_XOPEN_XCU_VERSION
 4

	)

101 
	#_XOPEN_XPG2
 1

	)

102 
	#_XOPEN_XPG3
 1

	)

103 
	#_XOPEN_XPG4
 1

	)

106 
	#_XOPEN_UNIX
 1

	)

109 
	#_XOPEN_CRYPT
 1

	)

113 
	#_XOPEN_ENH_I18N
 1

	)

116 
	#_XOPEN_LEGACY
 1

	)

203 
	~<bôs/posix_›t.h
>

206 #i‡
deföed
 
__USE_UNIX98
 || deföed 
__USE_XOPEN2K


207 
	~<bôs/ívú⁄míts.h
>

211 
	#STDIN_FILENO
 0

	)

212 
	#STDOUT_FILENO
 1

	)

213 
	#STDERR_FILENO
 2

	)

218 
	~<bôs/ty≥s.h
>

220 #i‚def 
__ssize_t_deföed


221 
__ssize_t
 
	tssize_t
;

222 
	#__ssize_t_deföed


	)

225 
	#__√ed_size_t


	)

226 
	#__√ed_NULL


	)

227 
	~<°ddef.h
>

229 #i‡
deföed
 
__USE_XOPEN
 || deföed 
__USE_XOPEN2K


232 #i‚de‡
__gid_t_deföed


233 
__gid_t
 
	tgid_t
;

234 
	#__gid_t_deföed


	)

237 #i‚de‡
__uid_t_deföed


238 
__uid_t
 
	tuid_t
;

239 
	#__uid_t_deföed


	)

242 #i‚de‡
__off_t_deföed


243 #i‚de‡
__USE_FILE_OFFSET64


244 
__off_t
 
	toff_t
;

246 
__off64_t
 
	toff_t
;

248 
	#__off_t_deföed


	)

250 #i‡
deföed
 
__USE_LARGEFILE64
 && !deföed 
__off64_t_deföed


251 
__off64_t
 
	toff64_t
;

252 
	#__off64_t_deföed


	)

255 #i‚de‡
__u£c⁄ds_t_deföed


256 
__u£c⁄ds_t
 
	tu£c⁄ds_t
;

257 
	#__u£c⁄ds_t_deföed


	)

260 #i‚de‡
__pid_t_deföed


261 
__pid_t
 
	tpid_t
;

262 
	#__pid_t_deföed


	)

266 #i‡
deföed
 
__USE_MISC
 || deföed 
__USE_XOPEN_EXTENDED
 || deföed 
__USE_XOPEN2K


267 #i‚de‡
__öçå_t_deföed


268 
__öçå_t
 
	töçå_t
;

269 
	#__öçå_t_deföed


	)

273 #i‡
deföed
 
__USE_BSD
 || deföed 
__USE_XOPEN


274 #i‚de‡
__sockÀn_t_deföed


275 
__sockÀn_t
 
	tsockÀn_t
;

276 
	#__sockÀn_t_deföed


	)

282 
	#R_OK
 4

	)

283 
	#W_OK
 2

	)

284 
	#X_OK
 1

	)

285 
	#F_OK
 0

	)

288 
	$ac˚ss
 (
__c⁄°
 *
__«me
, 
__ty≥
Ë
__THROW
 
	`__n⁄nuŒ
 ((1));

290 #ifde‡
__USE_GNU


293 
	$euidac˚ss
 (
__c⁄°
 *
__«me
, 
__ty≥
)

294 
__THROW
 
	`__n⁄nuŒ
 ((1));

297 
	$óc˚ss
 (
__c⁄°
 *
__«me
, 
__ty≥
)

298 
__THROW
 
	`__n⁄nuŒ
 ((1));

301 #ifde‡
__USE_ATFILE


305 
	$Ác˚sßt
 (
__fd
, 
__c⁄°
 *
__fûe
, 
__ty≥
, 
__Êag
)

306 
__THROW
 
	`__n⁄nuŒ
 ((2)Ë
__wur
;

311 #i‚def 
_STDIO_H


312 
	#SEEK_SET
 0

	)

313 
	#SEEK_CUR
 1

	)

314 
	#SEEK_END
 2

	)

315 #ifde‡
__USE_GNU


316 
	#SEEK_DATA
 3

	)

317 
	#SEEK_HOLE
 4

	)

321 #i‡
deföed
 
__USE_BSD
 && !deföed 
L_SET


323 
	#L_SET
 
SEEK_SET


	)

324 
	#L_INCR
 
SEEK_CUR


	)

325 
	#L_XTND
 
SEEK_END


	)

334 #i‚de‡
__USE_FILE_OFFSET64


335 
__off_t
 
	$l£ek
 (
__fd
, 
__off_t
 
__off£t
, 
__whí˚
Ë
__THROW
;

337 #ifde‡
__REDIRECT_NTH


338 
__off64_t
 
	`__REDIRECT_NTH
 (
l£ek
,

339 (
__fd
, 
__off64_t
 
__off£t
, 
__whí˚
),

340 
l£ek64
);

342 
	#l£ek
 
l£ek64


	)

345 #ifde‡
__USE_LARGEFILE64


346 
__off64_t
 
	$l£ek64
 (
__fd
, 
__off64_t
 
__off£t
, 
__whí˚
)

347 
__THROW
;

354 
	`˛o£
 (
__fd
);

361 
ssize_t
 
	$ªad
 (
__fd
, *
__buf
, 
size_t
 
__nbyãs
Ë
__wur
;

367 
ssize_t
 
	$wrôe
 (
__fd
, 
__c⁄°
 *
__buf
, 
size_t
 
__n
Ë
__wur
;

369 #i‡
deföed
 
__USE_UNIX98
 || deföed 
__USE_XOPEN2K8


370 #i‚de‡
__USE_FILE_OFFSET64


377 
ssize_t
 
	$¥ód
 (
__fd
, *
__buf
, 
size_t
 
__nbyãs
,

378 
__off_t
 
__off£t
Ë
__wur
;

385 
ssize_t
 
	$pwrôe
 (
__fd
, 
__c⁄°
 *
__buf
, 
size_t
 
__n
,

386 
__off_t
 
__off£t
Ë
__wur
;

388 #ifde‡
__REDIRECT


389 
ssize_t
 
	`__REDIRECT
 (
¥ód
, (
__fd
, *
__buf
, 
size_t
 
__nbyãs
,

390 
__off64_t
 
__off£t
),

391 
¥ód64
Ë
__wur
;

392 
ssize_t
 
	`__REDIRECT
 (
pwrôe
, (
__fd
, 
__c⁄°
 *
__buf
,

393 
size_t
 
__nbyãs
, 
__off64_t
 
__off£t
),

394 
pwrôe64
Ë
__wur
;

396 
	#¥ód
 
¥ód64


	)

397 
	#pwrôe
 
pwrôe64


	)

401 #ifde‡
__USE_LARGEFILE64


405 
ssize_t
 
	$¥ód64
 (
__fd
, *
__buf
, 
size_t
 
__nbyãs
,

406 
__off64_t
 
__off£t
Ë
__wur
;

409 
ssize_t
 
	$pwrôe64
 (
__fd
, 
__c⁄°
 *
__buf
, 
size_t
 
__n
,

410 
__off64_t
 
__off£t
Ë
__wur
;

418 
	$pùe
 (
__pùedes
[2]Ë
__THROW
 
__wur
;

420 #ifde‡
__USE_GNU


423 
	$pùe2
 (
__pùedes
[2], 
__Êags
Ë
__THROW
 
__wur
;

433 
	$Æ¨m
 (
__£c⁄ds
Ë
__THROW
;

445 
	`¶ìp
 (
__£c⁄ds
);

447 #i‡(
deföed
 
__USE_XOPEN_EXTENDED
 && !deföed 
__USE_XOPEN2K8
) \

448 || 
deföed
 
__USE_BSD


453 
__u£c⁄ds_t
 
	$uÆ¨m
 (
__u£c⁄ds_t
 
__vÆue
, __u£c⁄ds_à
__öãrvÆ
)

454 
__THROW
;

461 
	`u¶ìp
 (
__u£c⁄ds_t
 
__u£c⁄ds
);

470 
	`∑u£
 ();

474 
	$chown
 (
__c⁄°
 *
__fûe
, 
__uid_t
 
__ow√r
, 
__gid_t
 
__group
)

475 
__THROW
 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

477 #i‡
deföed
 
__USE_BSD
 || deföed 
__USE_XOPEN_EXTENDED
 || deföed 
__USE_XOPEN2K8


479 
	$fchown
 (
__fd
, 
__uid_t
 
__ow√r
, 
__gid_t
 
__group
Ë
__THROW
 
__wur
;

484 
	$lchown
 (
__c⁄°
 *
__fûe
, 
__uid_t
 
__ow√r
, 
__gid_t
 
__group
)

485 
__THROW
 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

489 #ifde‡
__USE_ATFILE


492 
	$fchow«t
 (
__fd
, 
__c⁄°
 *
__fûe
, 
__uid_t
 
__ow√r
,

493 
__gid_t
 
__group
, 
__Êag
)

494 
__THROW
 
	`__n⁄nuŒ
 ((2)Ë
__wur
;

498 
	$chdú
 (
__c⁄°
 *
__∑th
Ë
__THROW
 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

500 #i‡
deföed
 
__USE_BSD
 || deföed 
__USE_XOPEN_EXTENDED
 || deföed 
__USE_XOPEN2K8


502 
	$fchdú
 (
__fd
Ë
__THROW
 
__wur
;

512 *
	$gëcwd
 (*
__buf
, 
size_t
 
__size
Ë
__THROW
 
__wur
;

514 #ifdef 
__USE_GNU


518 *
	$gë_cuºít_dú_«me
 (Ë
__THROW
;

521 #i‡(
deföed
 
__USE_XOPEN_EXTENDED
 && !deföed 
__USE_XOPEN2K8
) \

522 || 
deföed
 
__USE_BSD


526 *
	$gëwd
 (*
__buf
)

527 
__THROW
 
	`__n⁄nuŒ
 ((1)Ë
__©åibuã_dïªˇãd__
 
__wur
;

532 
	$dup
 (
__fd
Ë
__THROW
 
__wur
;

535 
	$dup2
 (
__fd
, 
__fd2
Ë
__THROW
;

537 #ifde‡
__USE_GNU


540 
	$dup3
 (
__fd
, 
__fd2
, 
__Êags
Ë
__THROW
;

544 **
__ívú⁄
;

545 #ifde‡
__USE_GNU


546 **
ívú⁄
;

552 
	$execve
 (
__c⁄°
 *
__∑th
, *__c⁄° 
__¨gv
[],

553 *
__c⁄°
 
__ívp
[]Ë
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

555 #ifde‡
__USE_XOPEN2K8


558 
	$„xecve
 (
__fd
, *
__c⁄°
 
__¨gv
[], *__c⁄° 
__ívp
[])

559 
__THROW
 
	`__n⁄nuŒ
 ((2));

564 
	$execv
 (
__c⁄°
 *
__∑th
, *__c⁄° 
__¨gv
[])

565 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

569 
	$exe˛e
 (
__c⁄°
 *
__∑th
, __c⁄° *
__¨g
, ...)

570 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

574 
	$exe˛
 (
__c⁄°
 *
__∑th
, __c⁄° *
__¨g
, ...)

575 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

579 
	$execvp
 (
__c⁄°
 *
__fûe
, *__c⁄° 
__¨gv
[])

580 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

585 
	$exe˛p
 (
__c⁄°
 *
__fûe
, __c⁄° *
__¨g
, ...)

586 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

588 #ifde‡
__USE_GNU


591 
	$execv≥
 (
__c⁄°
 *
__fûe
, *__c⁄° 
__¨gv
[],

592 *
__c⁄°
 
__ívp
[])

593 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

597 #i‡
deföed
 
__USE_MISC
 || deföed 
__USE_XOPEN


599 
	$ni˚
 (
__öc
Ë
__THROW
 
__wur
;

604 
	$_exô
 (
__°©us
Ë
	`__©åibuã__
 ((
__n‹ëu∫__
));

610 
	~<bôs/c⁄‚ame.h
>

613 
	$∑thc⁄f
 (
__c⁄°
 *
__∑th
, 
__«me
)

614 
__THROW
 
	`__n⁄nuŒ
 ((1));

617 
	$Â©hc⁄f
 (
__fd
, 
__«me
Ë
__THROW
;

620 
	$sysc⁄f
 (
__«me
Ë
__THROW
;

622 #ifdef 
__USE_POSIX2


624 
size_t
 
	$c⁄f°r
 (
__«me
, *
__buf
, 
size_t
 
__Àn
Ë
__THROW
;

629 
__pid_t
 
	$gëpid
 (Ë
__THROW
;

632 
__pid_t
 
	$gëµid
 (Ë
__THROW
;

636 #i‚de‡
__FAVOR_BSD


637 
__pid_t
 
	$gëpgΩ
 (Ë
__THROW
;

639 #ifde‡
__REDIRECT_NTH


640 
__pid_t
 
	`__REDIRECT_NTH
 (
gëpgΩ
, (__pid_à
__pid
), 
__gëpgid
);

642 
	#gëpgΩ
 
__gëpgid


	)

647 
__pid_t
 
	$__gëpgid
 (
__pid_t
 
__pid
Ë
__THROW
;

648 #i‡
deföed
 
__USE_XOPEN_EXTENDED
 || deföed 
__USE_XOPEN2K8


649 
__pid_t
 
	$gëpgid
 (
__pid_t
 
__pid
Ë
__THROW
;

656 
	$£çgid
 (
__pid_t
 
__pid
, __pid_à
__pgid
Ë
__THROW
;

658 #i‡
deföed
 
__USE_SVID
 || deföed 
__USE_BSD
 || deföed 
__USE_XOPEN_EXTENDED


669 #i‚de‡
__FAVOR_BSD


673 
	$£çgΩ
 (Ë
__THROW
;

678 #ifde‡
__REDIRECT_NTH


679 
	`__REDIRECT_NTH
 (
£çgΩ
, (
__pid_t
 
__pid
, __pid_à
__pgΩ
), 
£çgid
);

681 
	#£çgΩ
 
£çgid


	)

690 
__pid_t
 
	$£tsid
 (Ë
__THROW
;

692 #i‡
deföed
 
__USE_XOPEN_EXTENDED
 || deföed 
__USE_XOPEN2K8


694 
__pid_t
 
	$gësid
 (
__pid_t
 
__pid
Ë
__THROW
;

698 
__uid_t
 
	$gëuid
 (Ë
__THROW
;

701 
__uid_t
 
	$gëeuid
 (Ë
__THROW
;

704 
__gid_t
 
	$gëgid
 (Ë
__THROW
;

707 
__gid_t
 
	$gëegid
 (Ë
__THROW
;

712 
	$gëgroups
 (
__size
, 
__gid_t
 
__li°
[]Ë
__THROW
 
__wur
;

714 #ifdef 
__USE_GNU


716 
	$group_membî
 (
__gid_t
 
__gid
Ë
__THROW
;

723 
	$£tuid
 (
__uid_t
 
__uid
Ë
__THROW
;

725 #i‡
deföed
 
__USE_BSD
 || deföed 
__USE_XOPEN_EXTENDED


728 
	$£åeuid
 (
__uid_t
 
__ruid
, __uid_à
__euid
Ë
__THROW
;

731 #i‡
deföed
 
__USE_BSD
 || deföed 
__USE_XOPEN2K


733 
	$£ãuid
 (
__uid_t
 
__uid
Ë
__THROW
;

740 
	$£tgid
 (
__gid_t
 
__gid
Ë
__THROW
;

742 #i‡
deföed
 
__USE_BSD
 || deföed 
__USE_XOPEN_EXTENDED


745 
	$£åegid
 (
__gid_t
 
__rgid
, __gid_à
__egid
Ë
__THROW
;

748 #i‡
deföed
 
__USE_BSD
 || deföed 
__USE_XOPEN2K


750 
	$£ãgid
 (
__gid_t
 
__gid
Ë
__THROW
;

753 #ifde‡
__USE_GNU


756 
	$gëªsuid
 (
__uid_t
 *
__ruid
, __uid_à*
__euid
, __uid_à*
__suid
)

757 
__THROW
;

761 
	$gëªsgid
 (
__gid_t
 *
__rgid
, __gid_à*
__egid
, __gid_à*
__sgid
)

762 
__THROW
;

766 
	$£åesuid
 (
__uid_t
 
__ruid
, __uid_à
__euid
, __uid_à
__suid
)

767 
__THROW
;

771 
	$£åesgid
 (
__gid_t
 
__rgid
, __gid_à
__egid
, __gid_à
__sgid
)

772 
__THROW
;

779 
__pid_t
 
	$f‹k
 (Ë
__THROWNL
;

781 #i‡(
deföed
 
__USE_XOPEN_EXTENDED
 && !deföed 
__USE_XOPEN2K8
) \

782 || 
deföed
 
__USE_BSD


787 
__pid_t
 
	$vf‹k
 (Ë
__THROW
;

793 *
	$ây«me
 (
__fd
Ë
__THROW
;

797 
	$ây«me_r
 (
__fd
, *
__buf
, 
size_t
 
__buÊí
)

798 
__THROW
 
	`__n⁄nuŒ
 ((2)Ë
__wur
;

802 
	$ißây
 (
__fd
Ë
__THROW
;

804 #i‡
deföed
 
__USE_BSD
 \

805 || (
deföed
 
__USE_XOPEN_EXTENDED
 && !deföed 
__USE_UNIX98
)

808 
	$ây¶Ÿ
 (Ë
__THROW
;

813 
	$lök
 (
__c⁄°
 *
__‰om
, __c⁄° *
__to
)

814 
__THROW
 
	`__n⁄nuŒ
 ((1, 2)Ë
__wur
;

816 #ifde‡
__USE_ATFILE


819 
	$lök©
 (
__‰omfd
, 
__c⁄°
 *
__‰om
, 
__tofd
,

820 
__c⁄°
 *
__to
, 
__Êags
)

821 
__THROW
 
	`__n⁄nuŒ
 ((2, 4)Ë
__wur
;

824 #i‡
deföed
 
__USE_BSD
 || deföed 
__USE_XOPEN_EXTENDED
 || deföed 
__USE_XOPEN2K


826 
	$symlök
 (
__c⁄°
 *
__‰om
, __c⁄° *
__to
)

827 
__THROW
 
	`__n⁄nuŒ
 ((1, 2)Ë
__wur
;

832 
ssize_t
 
	$ªadlök
 (
__c⁄°
 *
__ª°ri˘
 
__∑th
,

833 *
__ª°ri˘
 
__buf
, 
size_t
 
__Àn
)

834 
__THROW
 
	`__n⁄nuŒ
 ((1, 2)Ë
__wur
;

837 #ifde‡
__USE_ATFILE


839 
	$symlök©
 (
__c⁄°
 *
__‰om
, 
__tofd
,

840 
__c⁄°
 *
__to
Ë
__THROW
 
	`__n⁄nuŒ
 ((1, 3)Ë
__wur
;

843 
ssize_t
 
	$ªadlök©
 (
__fd
, 
__c⁄°
 *
__ª°ri˘
 
__∑th
,

844 *
__ª°ri˘
 
__buf
, 
size_t
 
__Àn
)

845 
__THROW
 
	`__n⁄nuŒ
 ((2, 3)Ë
__wur
;

849 
	$u∆ök
 (
__c⁄°
 *
__«me
Ë
__THROW
 
	`__n⁄nuŒ
 ((1));

851 #ifde‡
__USE_ATFILE


853 
	$u∆ök©
 (
__fd
, 
__c⁄°
 *
__«me
, 
__Êag
)

854 
__THROW
 
	`__n⁄nuŒ
 ((2));

858 
	$rmdú
 (
__c⁄°
 *
__∑th
Ë
__THROW
 
	`__n⁄nuŒ
 ((1));

862 
__pid_t
 
	$tcgëpgΩ
 (
__fd
Ë
__THROW
;

865 
	$tc£çgΩ
 (
__fd
, 
__pid_t
 
__pgΩ_id
Ë
__THROW
;

872 *
	`gëlogö
 ();

873 #i‡
deföed
 
__USE_REENTRANT
 || deföed 
__USE_POSIX199506


880 
	$gëlogö_r
 (*
__«me
, 
size_t
 
__«me_Àn
Ë
	`__n⁄nuŒ
 ((1));

883 #ifdef 
__USE_BSD


885 
	$£éogö
 (
__c⁄°
 *
__«me
Ë
__THROW
 
	`__n⁄nuŒ
 ((1));

889 #ifdef 
__USE_POSIX2


893 
	#__√ed_gë›t


	)

894 
	~<gë›t.h
>

898 #i‡
deföed
 
__USE_BSD
 || deföed 
__USE_UNIX98
 || deföed 
__USE_XOPEN2K


902 
	$gëho°«me
 (*
__«me
, 
size_t
 
__Àn
Ë
__THROW
 
	`__n⁄nuŒ
 ((1));

906 #i‡
deföed
 
__USE_BSD
 || (deföed 
__USE_XOPEN
 && !deföed 
__USE_UNIX98
)

909 
	$£tho°«me
 (
__c⁄°
 *
__«me
, 
size_t
 
__Àn
)

910 
__THROW
 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

914 
	$£tho°id
 (
__id
Ë
__THROW
 
__wur
;

920 
	$gëdomaö«me
 (*
__«me
, 
size_t
 
__Àn
)

921 
__THROW
 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

922 
	$£tdomaö«me
 (
__c⁄°
 *
__«me
, 
size_t
 
__Àn
)

923 
__THROW
 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

929 
	$vh™gup
 (Ë
__THROW
;

932 
	$ªvoke
 (
__c⁄°
 *
__fûe
Ë
__THROW
 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

940 
	$¥ofû
 (*
__ßm∂e_buf„r
, 
size_t
 
__size
,

941 
size_t
 
__off£t
, 
__sˇÀ
)

942 
__THROW
 
	`__n⁄nuŒ
 ((1));

948 
	$ac˘
 (
__c⁄°
 *
__«me
Ë
__THROW
;

952 *
	$gëu£rshñl
 (Ë
__THROW
;

953 
	$ídu£rshñl
 (Ë
__THROW
;

954 
	$£tu£rshñl
 (Ë
__THROW
;

960 
	$d´m⁄
 (
__nochdú
, 
__no˛o£
Ë
__THROW
 
__wur
;

964 #i‡
deföed
 
__USE_BSD
 || (deföed 
__USE_XOPEN
 && !deföed 
__USE_XOPEN2K
)

967 
	$chroŸ
 (
__c⁄°
 *
__∑th
Ë
__THROW
 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

971 *
	$gë∑ss
 (
__c⁄°
 *
__¥om±
Ë
	`__n⁄nuŒ
 ((1));

975 #i‡
deföed
 
__USE_BSD
 || deföed 
__USE_XOPEN
 || deföed 
__USE_XOPEN2K


980 
	`fsync
 (
__fd
);

984 #ifde‡
__USE_GNU


987 
	$syncfs
 (
__fd
Ë
__THROW
;

991 #i‡
deföed
 
__USE_BSD
 || deföed 
__USE_XOPEN_EXTENDED


994 
	`gëho°id
 ();

997 
	$sync
 (Ë
__THROW
;

1000 #i‡
deföed
 
__USE_BSD
 || !deföed 
__USE_XOPEN2K


1003 
	$gë∑gesize
 (Ë
__THROW
 
	`__©åibuã__
 ((
__c⁄°__
));

1008 
	$gëdèbÀsize
 (Ë
__THROW
;

1014 #i‡
deföed
 
__USE_BSD
 || deföed 
__USE_XOPEN_EXTENDED
 || deföed 
__USE_XOPEN2K8


1017 #i‚de‡
__USE_FILE_OFFSET64


1018 
	$åunˇã
 (
__c⁄°
 *
__fûe
, 
__off_t
 
__Àngth
)

1019 
__THROW
 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

1021 #ifde‡
__REDIRECT_NTH


1022 
	`__REDIRECT_NTH
 (
åunˇã
,

1023 (
__c⁄°
 *
__fûe
, 
__off64_t
 
__Àngth
),

1024 
åunˇã64
Ë
	`__n⁄nuŒ
 ((1)Ë
__wur
;

1026 
	#åunˇã
 
åunˇã64


	)

1029 #ifde‡
__USE_LARGEFILE64


1030 
	$åunˇã64
 (
__c⁄°
 *
__fûe
, 
__off64_t
 
__Àngth
)

1031 
__THROW
 
	`__n⁄nuŒ
 ((1)Ë
__wur
;

1036 #i‡
deföed
 
__USE_BSD
 || deföed 
__USE_XOPEN_EXTENDED
 || deföed 
__USE_XOPEN2K


1039 #i‚de‡
__USE_FILE_OFFSET64


1040 
	$·runˇã
 (
__fd
, 
__off_t
 
__Àngth
Ë
__THROW
 
__wur
;

1042 #ifde‡
__REDIRECT_NTH


1043 
	`__REDIRECT_NTH
 (
·runˇã
, (
__fd
, 
__off64_t
 
__Àngth
),

1044 
·runˇã64
Ë
__wur
;

1046 
	#·runˇã
 
·runˇã64


	)

1049 #ifde‡
__USE_LARGEFILE64


1050 
	$·runˇã64
 (
__fd
, 
__off64_t
 
__Àngth
Ë
__THROW
 
__wur
;

1056 #i‡(
deföed
 
__USE_XOPEN_EXTENDED
 && !deföed 
__USE_XOPEN2K
) \

1057 || 
deföed
 
__USE_MISC


1061 
	$brk
 (*
__addr
Ë
__THROW
 
__wur
;

1067 *
	$sbrk
 (
öçå_t
 
__dñè
Ë
__THROW
;

1071 #ifde‡
__USE_MISC


1082 
	$sysˇŒ
 (
__sy¢o
, ...Ë
__THROW
;

1087 #i‡(
deföed
 
__USE_MISC
 || deföed 
__USE_XOPEN_EXTENDED
Ë&& !deföed 
F_LOCK


1099 
	#F_ULOCK
 0

	)

1100 
	#F_LOCK
 1

	)

1101 
	#F_TLOCK
 2

	)

1102 
	#F_TEST
 3

	)

1104 #i‚de‡
__USE_FILE_OFFSET64


1105 
	$lockf
 (
__fd
, 
__cmd
, 
__off_t
 
__Àn
Ë
__wur
;

1107 #ifde‡
__REDIRECT


1108 
	`__REDIRECT
 (
lockf
, (
__fd
, 
__cmd
, 
__off64_t
 
__Àn
),

1109 
lockf64
Ë
__wur
;

1111 
	#lockf
 
lockf64


	)

1114 #ifde‡
__USE_LARGEFILE64


1115 
	$lockf64
 (
__fd
, 
__cmd
, 
__off64_t
 
__Àn
Ë
__wur
;

1120 #ifde‡
__USE_GNU


1125 
	#TEMP_FAILURE_RETRY
(
ex¥essi⁄
) \

1126 (
__exãnsi⁄__
 \

1127 ({ 
__ªsu…
; \

1128 dÿ
__ªsu…
 = (Ë(
ex¥essi⁄
); \

1129 
__ªsu…
 =-1L && 
î∫o
 =
EINTR
); \

1130 
__ªsu…
; 
	}
}))

	)

1133 #i‡
deföed
 
__USE_POSIX199309
 || deföed 
__USE_UNIX98


1136 
fd©async
 (
__fûdes
);

1142 #ifdef 
__USE_XOPEN


1144 *
	$¸y±
 (
__c⁄°
 *
__key
, __c⁄° *
__ß…
)

1145 
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

1149 
	$í¸y±
 (*
__libc_block
, 
__edÊag
Ë
__THROW
 
	`__n⁄nuŒ
 ((1));

1156 
	$swab
 (
__c⁄°
 *
__ª°ri˘
 
__‰om
, *__ª°ri˘ 
__to
,

1157 
ssize_t
 
__n
Ë
__THROW
 
	`__n⁄nuŒ
 ((1, 2));

1163 #i‡
deföed
 
__USE_XOPEN
 || deföed 
__USE_XOPEN2K8


1165 *
	$˘îmid
 (*
__s
Ë
__THROW
;

1170 #i‡
__USE_FORTIFY_LEVEL
 > 0 && 
deföed
 
__exã∫_Æways_ölöe


1171 
	~<bôs/uni°d.h
>

1174 
__END_DECLS


	@/usr/include/wchar.h

24 #i‚de‡
_WCHAR_H


26 #i‡!
deföed
 
__√ed_mb°©e_t
 && !deföed 
__√ed_wöt_t


27 
	#_WCHAR_H
 1

	)

28 
	~<„©uªs.h
>

31 #ifde‡
_WCHAR_H


33 
	#__√ed___FILE


	)

34 #i‡
deföed
 
__USE_UNIX98
 || deföed 
__USE_XOPEN2K


35 
	#__√ed_FILE


	)

37 
	~<°dio.h
>

39 
	#__√ed___va_li°


	)

40 
	~<°d¨g.h
>

42 
	~<bôs/wch¨.h
>

45 
	#__√ed_size_t


	)

46 
	#__√ed_wch¨_t


	)

47 
	#__√ed_NULL


	)

49 #i‡
deföed
 
_WCHAR_H
 || deföed 
__√ed_wöt_t
 || !deföed 
__WINT_TYPE__


50 #unde‡
__√ed_wöt_t


51 
	#__√ed_wöt_t


	)

52 
	~<°ddef.h
>

56 #i‚de‡
_WINT_T


61 
	#_WINT_T


	)

62 
	twöt_t
;

66 #i‡
deföed
 
__˝lu•lus
 && deföed 
_GLIBCPP_USE_NAMESPACES
 \

67 && 
deföed
 
__WINT_TYPE__


68 
__BEGIN_NAMESPACE_STD


69 
__WINT_TYPE__
 
	twöt_t
;

70 
	g__END_NAMESPACE_STD


75 #i‡
deföed
 
__˝lu•lus
 && 
__GNUC_PREREQ
 (4, 4)

76 
	#__CORRECT_ISO_CPP_WCHAR_H_PROTO


	)

80 #i‡(
deföed
 
_WCHAR_H
 || deföed 
__√ed_mb°©e_t
Ë&& !deföed 
__mb°©e_t_deföed


81 
	#__mb°©e_t_deföed
 1

	)

85 
	m__cou¡
;

88 #ifde‡
__WINT_TYPE__


89 
__WINT_TYPE__
 
	m__wch
;

91 
wöt_t
 
	m__wch
;

93 
	m__wchb
[4];

94 } 
	m__vÆue
;

95 } 
	t__mb°©e_t
;

97 #unde‡
__√ed_mb°©e_t


102 #ifde‡
_WCHAR_H


104 
__BEGIN_NAMESPACE_C99


106 
__mb°©e_t
 
	tmb°©e_t
;

107 
	g__END_NAMESPACE_C99


108 #ifde‡
__USE_GNU


109 
	$__USING_NAMESPACE_C99
(
mb°©e_t
)

112 #i‚de‡
WCHAR_MIN


114 
	#WCHAR_MIN
 
__WCHAR_MIN


	)

115 
	#WCHAR_MAX
 
__WCHAR_MAX


	)

118 #i‚de‡
WEOF


119 
	#WEOF
 (0xffffffffu)

	)

124 #i‡
deföed
 
__USE_XOPEN
 && !deföed 
__USE_UNIX98


125 
	~<w˘y≥.h
>

129 
__BEGIN_DECLS


131 
__BEGIN_NAMESPACE_STD


134 
tm
;

135 
__END_NAMESPACE_STD


139 
	$__USING_NAMESPACE_STD
(
tm
)

142 
__BEGIN_NAMESPACE_STD


144 
wch¨_t
 *
	$wcs˝y
 (
wch¨_t
 *
__ª°ri˘
 
__de°
,

145 
__c⁄°
 
wch¨_t
 *
__ª°ri˘
 
__§c
Ë
__THROW
;

147 
wch¨_t
 *
	$wc¢˝y
 (
wch¨_t
 *
__ª°ri˘
 
__de°
,

148 
__c⁄°
 
wch¨_t
 *
__ª°ri˘
 
__§c
, 
size_t
 
__n
)

149 
__THROW
;

152 
wch¨_t
 *
	$wcsˇt
 (
wch¨_t
 *
__ª°ri˘
 
__de°
,

153 
__c⁄°
 
wch¨_t
 *
__ª°ri˘
 
__§c
Ë
__THROW
;

155 
wch¨_t
 *
	$wc¢ˇt
 (
wch¨_t
 *
__ª°ri˘
 
__de°
,

156 
__c⁄°
 
wch¨_t
 *
__ª°ri˘
 
__§c
, 
size_t
 
__n
)

157 
__THROW
;

160 
	$wcscmp
 (
__c⁄°
 
wch¨_t
 *
__s1
, __c⁄° wch¨_à*
__s2
)

161 
__THROW
 
__©åibuã_puª__
;

163 
	$wc¢cmp
 (
__c⁄°
 
wch¨_t
 *
__s1
, __c⁄° wch¨_à*
__s2
, 
size_t
 
__n
)

164 
__THROW
 
__©åibuã_puª__
;

165 
__END_NAMESPACE_STD


167 #ifde‡
__USE_XOPEN2K8


169 
	$wcsˇ£cmp
 (
__c⁄°
 
wch¨_t
 *
__s1
, __c⁄° wch¨_à*
__s2
Ë
__THROW
;

172 
	$wc¢ˇ£cmp
 (
__c⁄°
 
wch¨_t
 *
__s1
, __c⁄° wch¨_à*
__s2
,

173 
size_t
 
__n
Ë
__THROW
;

177 
	~<xloˇÀ.h
>

179 
	$wcsˇ£cmp_l
 (
__c⁄°
 
wch¨_t
 *
__s1
, __c⁄° wch¨_à*
__s2
,

180 
__loˇÀ_t
 
__loc
Ë
__THROW
;

182 
	$wc¢ˇ£cmp_l
 (
__c⁄°
 
wch¨_t
 *
__s1
, __c⁄° wch¨_à*
__s2
,

183 
size_t
 
__n
, 
__loˇÀ_t
 
__loc
Ë
__THROW
;

186 
__BEGIN_NAMESPACE_STD


189 
	$wcscﬁl
 (
__c⁄°
 
wch¨_t
 *
__s1
, __c⁄° wch¨_à*
__s2
Ë
__THROW
;

193 
size_t
 
	$wcsx‰m
 (
wch¨_t
 *
__ª°ri˘
 
__s1
,

194 
__c⁄°
 
wch¨_t
 *
__ª°ri˘
 
__s2
, 
size_t
 
__n
Ë
__THROW
;

195 
__END_NAMESPACE_STD


197 #ifde‡
__USE_XOPEN2K8


203 
	$wcscﬁl_l
 (
__c⁄°
 
wch¨_t
 *
__s1
, __c⁄° wch¨_à*
__s2
,

204 
__loˇÀ_t
 
__loc
Ë
__THROW
;

209 
size_t
 
	$wcsx‰m_l
 (
wch¨_t
 *
__s1
, 
__c⁄°
 wch¨_à*
__s2
,

210 
size_t
 
__n
, 
__loˇÀ_t
 
__loc
Ë
__THROW
;

213 
wch¨_t
 *
	$wcsdup
 (
__c⁄°
 
wch¨_t
 *
__s
Ë
__THROW
 
__©åibuã_mÆloc__
;

216 
__BEGIN_NAMESPACE_STD


218 #ifde‡
__CORRECT_ISO_CPP_WCHAR_H_PROTO


219 "C++" 
wch¨_t
 *
	$wcschr
 (
wch¨_t
 *
__wcs
, wch¨_à
__wc
)

220 
__THROW
 
	`__asm
 ("wcschr"Ë
__©åibuã_puª__
;

221 "C++" 
__c⁄°
 
wch¨_t
 *
	$wcschr
 (
__c⁄°
 
wch¨_t
 *
__wcs
, wch¨_à
__wc
)

222 
__THROW
 
	`__asm
 ("wcschr"Ë
__©åibuã_puª__
;

224 
wch¨_t
 *
	$wcschr
 (
__c⁄°
 
wch¨_t
 *
__wcs
, wch¨_à
__wc
)

225 
__THROW
 
__©åibuã_puª__
;

228 #ifde‡
__CORRECT_ISO_CPP_WCHAR_H_PROTO


229 "C++" 
wch¨_t
 *
	$wc§chr
 (
wch¨_t
 *
__wcs
, wch¨_à
__wc
)

230 
__THROW
 
	`__asm
 ("wc§chr"Ë
__©åibuã_puª__
;

231 "C++" 
__c⁄°
 
wch¨_t
 *
	$wc§chr
 (
__c⁄°
 
wch¨_t
 *
__wcs
, wch¨_à
__wc
)

232 
__THROW
 
	`__asm
 ("wc§chr"Ë
__©åibuã_puª__
;

234 
wch¨_t
 *
	$wc§chr
 (
__c⁄°
 
wch¨_t
 *
__wcs
, wch¨_à
__wc
)

235 
__THROW
 
__©åibuã_puª__
;

237 
__END_NAMESPACE_STD


239 #ifde‡
__USE_GNU


242 
wch¨_t
 *
	$wcsch∫ul
 (
__c⁄°
 
wch¨_t
 *
__s
, wch¨_à
__wc
)

243 
__THROW
 
__©åibuã_puª__
;

246 
__BEGIN_NAMESPACE_STD


249 
size_t
 
	$wcsc•n
 (
__c⁄°
 
wch¨_t
 *
__wcs
, __c⁄° wch¨_à*
__ªje˘
)

250 
__THROW
 
__©åibuã_puª__
;

253 
size_t
 
	$wcs•n
 (
__c⁄°
 
wch¨_t
 *
__wcs
, __c⁄° wch¨_à*
__ac˚±
)

254 
__THROW
 
__©åibuã_puª__
;

256 #ifde‡
__CORRECT_ISO_CPP_WCHAR_H_PROTO


257 "C++" 
wch¨_t
 *
	$wc•brk
 (
wch¨_t
 *
__wcs
, 
__c⁄°
 wch¨_à*
__ac˚±
)

258 
__THROW
 
	`__asm
 ("wc•brk"Ë
__©åibuã_puª__
;

259 "C++" 
__c⁄°
 
wch¨_t
 *
	$wc•brk
 (
__c⁄°
 
wch¨_t
 *
__wcs
,

260 
__c⁄°
 
wch¨_t
 *
__ac˚±
)

261 
__THROW
 
	`__asm
 ("wc•brk"Ë
__©åibuã_puª__
;

263 
wch¨_t
 *
	$wc•brk
 (
__c⁄°
 
wch¨_t
 *
__wcs
, __c⁄° wch¨_à*
__ac˚±
)

264 
__THROW
 
__©åibuã_puª__
;

267 #ifde‡
__CORRECT_ISO_CPP_WCHAR_H_PROTO


268 "C++" 
wch¨_t
 *
	$wcs°r
 (
wch¨_t
 *
__hay°ack
, 
__c⁄°
 wch¨_à*
__√edÀ
)

269 
__THROW
 
	`__asm
 ("wcs°r"Ë
__©åibuã_puª__
;

270 "C++" 
__c⁄°
 
wch¨_t
 *
	$wcs°r
 (
__c⁄°
 
wch¨_t
 *
__hay°ack
,

271 
__c⁄°
 
wch¨_t
 *
__√edÀ
)

272 
__THROW
 
	`__asm
 ("wcs°r"Ë
__©åibuã_puª__
;

274 
wch¨_t
 *
	$wcs°r
 (
__c⁄°
 
wch¨_t
 *
__hay°ack
, __c⁄° wch¨_à*
__√edÀ
)

275 
__THROW
 
__©åibuã_puª__
;

279 
wch¨_t
 *
	$wc°ok
 (
wch¨_t
 *
__ª°ri˘
 
__s
,

280 
__c⁄°
 
wch¨_t
 *
__ª°ri˘
 
__dñim
,

281 
wch¨_t
 **
__ª°ri˘
 
__±r
Ë
__THROW
;

284 
size_t
 
	$wc¶í
 (
__c⁄°
 
wch¨_t
 *
__s
Ë
__THROW
 
__©åibuã_puª__
;

285 
__END_NAMESPACE_STD


287 #ifde‡
__USE_XOPEN


289 #ifde‡
__CORRECT_ISO_CPP_WCHAR_H_PROTO


290 "C++" 
wch¨_t
 *
	$wcswcs
 (
wch¨_t
 *
__hay°ack
, 
__c⁄°
 wch¨_à*
__√edÀ
)

291 
__THROW
 
	`__asm
 ("wcswcs"Ë
__©åibuã_puª__
;

292 "C++" 
__c⁄°
 
wch¨_t
 *
	$wcswcs
 (
__c⁄°
 
wch¨_t
 *
__hay°ack
,

293 
__c⁄°
 
wch¨_t
 *
__√edÀ
)

294 
__THROW
 
	`__asm
 ("wcswcs"Ë
__©åibuã_puª__
;

296 
wch¨_t
 *
	$wcswcs
 (
__c⁄°
 
wch¨_t
 *
__hay°ack
, __c⁄° wch¨_à*
__√edÀ
)

297 
__THROW
 
__©åibuã_puª__
;

301 #ifde‡
__USE_XOPEN2K8


303 
size_t
 
	$wc¢Àn
 (
__c⁄°
 
wch¨_t
 *
__s
, 
size_t
 
__maxÀn
)

304 
__THROW
 
__©åibuã_puª__
;

308 
__BEGIN_NAMESPACE_STD


310 #ifde‡
__CORRECT_ISO_CPP_WCHAR_H_PROTO


311 "C++" 
wch¨_t
 *
	$wmemchr
 (
wch¨_t
 *
__s
, wch¨_à
__c
, 
size_t
 
__n
)

312 
__THROW
 
	`__asm
 ("wmemchr"Ë
__©åibuã_puª__
;

313 "C++" 
__c⁄°
 
wch¨_t
 *
	$wmemchr
 (
__c⁄°
 
wch¨_t
 *
__s
, wch¨_à
__c
,

314 
size_t
 
__n
)

315 
__THROW
 
	`__asm
 ("wmemchr"Ë
__©åibuã_puª__
;

317 
wch¨_t
 *
	$wmemchr
 (
__c⁄°
 
wch¨_t
 *
__s
, wch¨_à
__c
, 
size_t
 
__n
)

318 
__THROW
 
__©åibuã_puª__
;

322 
	$wmemcmp
 (
__c⁄°
 
wch¨_t
 *
__s1
, __c⁄° wch¨_à*
__s2
, 
size_t
 
__n
)

323 
__THROW
 
__©åibuã_puª__
;

326 
wch¨_t
 *
	$wmem˝y
 (
wch¨_t
 *
__ª°ri˘
 
__s1
,

327 
__c⁄°
 
wch¨_t
 *
__ª°ri˘
 
__s2
, 
size_t
 
__n
Ë
__THROW
;

331 
wch¨_t
 *
	$wmemmove
 (
wch¨_t
 *
__s1
, 
__c⁄°
 wch¨_à*
__s2
, 
size_t
 
__n
)

332 
__THROW
;

335 
wch¨_t
 *
	$wmem£t
 (
wch¨_t
 *
__s
, wch¨_à
__c
, 
size_t
 
__n
Ë
__THROW
;

336 
__END_NAMESPACE_STD


338 #ifde‡
__USE_GNU


341 
wch¨_t
 *
	$wmemp˝y
 (
wch¨_t
 *
__ª°ri˘
 
__s1
,

342 
__c⁄°
 
wch¨_t
 *
__ª°ri˘
 
__s2
, 
size_t
 
__n
)

343 
__THROW
;

347 
__BEGIN_NAMESPACE_STD


350 
wöt_t
 
	$btowc
 (
__c
Ë
__THROW
;

354 
	$w˘ob
 (
wöt_t
 
__c
Ë
__THROW
;

358 
	$mbsöô
 (
__c⁄°
 
mb°©e_t
 *
__ps
Ë
__THROW
 
__©åibuã_puª__
;

362 
size_t
 
	$mbπowc
 (
wch¨_t
 *
__ª°ri˘
 
__pwc
,

363 
__c⁄°
 *
__ª°ri˘
 
__s
, 
size_t
 
__n
,

364 
mb°©e_t
 *
__p
Ë
__THROW
;

367 
size_t
 
	$w¸tomb
 (*
__ª°ri˘
 
__s
, 
wch¨_t
 
__wc
,

368 
mb°©e_t
 *
__ª°ri˘
 
__ps
Ë
__THROW
;

371 
size_t
 
	$__mbæí
 (
__c⁄°
 *
__ª°ri˘
 
__s
, 
size_t
 
__n
,

372 
mb°©e_t
 *
__ª°ri˘
 
__ps
Ë
__THROW
;

373 
size_t
 
	$mbæí
 (
__c⁄°
 *
__ª°ri˘
 
__s
, 
size_t
 
__n
,

374 
mb°©e_t
 *
__ª°ri˘
 
__ps
Ë
__THROW
;

375 
__END_NAMESPACE_STD


377 #ifde‡
__USE_EXTERN_INLINES


383 
wöt_t
 
	$__btowc_Æüs
 (
__c
Ë
	`__asm
 ("btowc");

384 
__exã∫_ölöe
 
wöt_t


385 
	`__NTH
 (
	$btowc
 (
__c
))

386 {  (
	`__buûtö_c⁄°™t_p
 (
__c
) && __c >= '\0' && __c <= '\x7f'

387 ? (
wöt_t
Ë
__c
 : 
	`__btowc_Æüs
 (__c)); 
	}
}

389 
	$__w˘ob_Æüs
 (
wöt_t
 
__c
Ë
	`__asm
 ("wctob");

390 
__exã∫_ölöe
 

391 
	`__NTH
 (
	$w˘ob
 (
wöt_t
 
__wc
))

392 {  (
	`__buûtö_c⁄°™t_p
 (
__wc
Ë&& __w¯>
L
'\0' && __wc <= L'\x7f'

393 ? (Ë
__wc
 : 
	`__w˘ob_Æüs
 (__wc)); 
	}
}

395 
__exã∫_ölöe
 
size_t


396 
__NTH
 (
	$mbæí
 (
__c⁄°
 *
__ª°ri˘
 
__s
, 
size_t
 
__n
,

397 
mb°©e_t
 *
__ª°ri˘
 
__ps
))

398 {  (
__ps
 !
NULL


399 ? 
	`mbπowc
 (
NULL
, 
__s
, 
__n
, 
__ps
Ë: 
	`__mbæí
 (__s, __n, NULL)); 
	}
}

402 
__BEGIN_NAMESPACE_STD


405 
size_t
 
	$mb§towcs
 (
wch¨_t
 *
__ª°ri˘
 
__d°
,

406 
__c⁄°
 **
__ª°ri˘
 
__§c
, 
size_t
 
__Àn
,

407 
mb°©e_t
 *
__ª°ri˘
 
__ps
Ë
__THROW
;

411 
size_t
 
	$wc§tombs
 (*
__ª°ri˘
 
__d°
,

412 
__c⁄°
 
wch¨_t
 **
__ª°ri˘
 
__§c
, 
size_t
 
__Àn
,

413 
mb°©e_t
 *
__ª°ri˘
 
__ps
Ë
__THROW
;

414 
__END_NAMESPACE_STD


417 #ifdef 
__USE_XOPEN2K8


420 
size_t
 
	$mb¢πowcs
 (
wch¨_t
 *
__ª°ri˘
 
__d°
,

421 
__c⁄°
 **
__ª°ri˘
 
__§c
, 
size_t
 
__nmc
,

422 
size_t
 
__Àn
, 
mb°©e_t
 *
__ª°ri˘
 
__ps
Ë
__THROW
;

426 
size_t
 
	$wc¢πombs
 (*
__ª°ri˘
 
__d°
,

427 
__c⁄°
 
wch¨_t
 **
__ª°ri˘
 
__§c
,

428 
size_t
 
__nwc
, size_à
__Àn
,

429 
mb°©e_t
 *
__ª°ri˘
 
__ps
Ë
__THROW
;

434 #ifde‡
__USE_XOPEN


436 
	$wcwidth
 (
wch¨_t
 
__c
Ë
__THROW
;

440 
	$wcswidth
 (
__c⁄°
 
wch¨_t
 *
__s
, 
size_t
 
__n
Ë
__THROW
;

444 
__BEGIN_NAMESPACE_STD


447 
	$wc°od
 (
__c⁄°
 
wch¨_t
 *
__ª°ri˘
 
__≈å
,

448 
wch¨_t
 **
__ª°ri˘
 
__íd±r
Ë
__THROW
;

449 
__END_NAMESPACE_STD


451 #ifde‡
__USE_ISOC99


452 
__BEGIN_NAMESPACE_C99


454 
	$wc°of
 (
__c⁄°
 
wch¨_t
 *
__ª°ri˘
 
__≈å
,

455 
wch¨_t
 **
__ª°ri˘
 
__íd±r
Ë
__THROW
;

456 
	$wc°ﬁd
 (
__c⁄°
 
wch¨_t
 *
__ª°ri˘
 
__≈å
,

457 
wch¨_t
 **
__ª°ri˘
 
__íd±r
Ë
__THROW
;

458 
__END_NAMESPACE_C99


462 
__BEGIN_NAMESPACE_STD


465 
	$wc°ﬁ
 (
__c⁄°
 
wch¨_t
 *
__ª°ri˘
 
__≈å
,

466 
wch¨_t
 **
__ª°ri˘
 
__íd±r
, 
__ba£
Ë
__THROW
;

470 
	$wc°oul
 (
__c⁄°
 
wch¨_t
 *
__ª°ri˘
 
__≈å
,

471 
wch¨_t
 **
__ª°ri˘
 
__íd±r
, 
__ba£
)

472 
__THROW
;

473 
__END_NAMESPACE_STD


475 #i‡
deföed
 
__USE_ISOC99
 || (deföed 
__GNUC__
 && deföed 
__USE_GNU
)

476 
__BEGIN_NAMESPACE_C99


479 
__exãnsi⁄__


480 
	$wc°ﬁl
 (
__c⁄°
 
wch¨_t
 *
__ª°ri˘
 
__≈å
,

481 
wch¨_t
 **
__ª°ri˘
 
__íd±r
, 
__ba£
)

482 
__THROW
;

486 
__exãnsi⁄__


487 
	$wc°ouŒ
 (
__c⁄°
 
wch¨_t
 *
__ª°ri˘
 
__≈å
,

488 
wch¨_t
 **
__ª°ri˘
 
__íd±r
,

489 
__ba£
Ë
__THROW
;

490 
__END_NAMESPACE_C99


493 #i‡
deföed
 
__GNUC__
 && deföed 
__USE_GNU


496 
__exãnsi⁄__


497 
	$wc°oq
 (
__c⁄°
 
wch¨_t
 *
__ª°ri˘
 
__≈å
,

498 
wch¨_t
 **
__ª°ri˘
 
__íd±r
, 
__ba£
)

499 
__THROW
;

503 
__exãnsi⁄__


504 
	$wc°ouq
 (
__c⁄°
 
wch¨_t
 *
__ª°ri˘
 
__≈å
,

505 
wch¨_t
 **
__ª°ri˘
 
__íd±r
,

506 
__ba£
Ë
__THROW
;

509 #ifde‡
__USE_GNU


523 
	~<xloˇÀ.h
>

527 
	$wc°ﬁ_l
 (
__c⁄°
 
wch¨_t
 *
__ª°ri˘
 
__≈å
,

528 
wch¨_t
 **
__ª°ri˘
 
__íd±r
, 
__ba£
,

529 
__loˇÀ_t
 
__loc
Ë
__THROW
;

531 
	$wc°oul_l
 (
__c⁄°
 
wch¨_t
 *
__ª°ri˘
 
__≈å
,

532 
wch¨_t
 **
__ª°ri˘
 
__íd±r
,

533 
__ba£
, 
__loˇÀ_t
 
__loc
Ë
__THROW
;

535 
__exãnsi⁄__


536 
	$wc°ﬁl_l
 (
__c⁄°
 
wch¨_t
 *
__ª°ri˘
 
__≈å
,

537 
wch¨_t
 **
__ª°ri˘
 
__íd±r
,

538 
__ba£
, 
__loˇÀ_t
 
__loc
Ë
__THROW
;

540 
__exãnsi⁄__


541 
	$wc°ouŒ_l
 (
__c⁄°
 
wch¨_t
 *
__ª°ri˘
 
__≈å
,

542 
wch¨_t
 **
__ª°ri˘
 
__íd±r
,

543 
__ba£
, 
__loˇÀ_t
 
__loc
)

544 
__THROW
;

546 
	$wc°od_l
 (
__c⁄°
 
wch¨_t
 *
__ª°ri˘
 
__≈å
,

547 
wch¨_t
 **
__ª°ri˘
 
__íd±r
, 
__loˇÀ_t
 
__loc
)

548 
__THROW
;

550 
	$wc°of_l
 (
__c⁄°
 
wch¨_t
 *
__ª°ri˘
 
__≈å
,

551 
wch¨_t
 **
__ª°ri˘
 
__íd±r
, 
__loˇÀ_t
 
__loc
)

552 
__THROW
;

554 
	$wc°ﬁd_l
 (
__c⁄°
 
wch¨_t
 *
__ª°ri˘
 
__≈å
,

555 
wch¨_t
 **
__ª°ri˘
 
__íd±r
,

556 
__loˇÀ_t
 
__loc
Ë
__THROW
;

560 #ifde‡
__USE_XOPEN2K8


563 
wch¨_t
 *
	$w˝˝y
 (
wch¨_t
 *
__ª°ri˘
 
__de°
,

564 
__c⁄°
 
wch¨_t
 *
__ª°ri˘
 
__§c
Ë
__THROW
;

568 
wch¨_t
 *
	$w˝n˝y
 (
wch¨_t
 *
__ª°ri˘
 
__de°
,

569 
__c⁄°
 
wch¨_t
 *
__ª°ri˘
 
__§c
, 
size_t
 
__n
)

570 
__THROW
;

577 
__FILE
 *
	$›í_wmem°ªam
 (
wch¨_t
 **
__buÊoc
, 
size_t
 *
__sizñoc
Ë
__THROW
;

580 #i‡
deföed
 
__USE_ISOC95
 || deföed 
__USE_UNIX98


581 
__BEGIN_NAMESPACE_STD


584 
	$fwide
 (
__FILE
 *
__Â
, 
__mode
Ë
__THROW
;

591 
	`fw¥ötf
 (
__FILE
 *
__ª°ri˘
 
__°ªam
,

592 
__c⁄°
 
wch¨_t
 *
__ª°ri˘
 
__f‹m©
, ...)

598 
	`w¥ötf
 (
__c⁄°
 
wch¨_t
 *
__ª°ri˘
 
__f‹m©
, ...)

601 
	$sw¥ötf
 (
wch¨_t
 *
__ª°ri˘
 
__s
, 
size_t
 
__n
,

602 
__c⁄°
 
wch¨_t
 *
__ª°ri˘
 
__f‹m©
, ...)

603 
__THROW
 ;

609 
	`vfw¥ötf
 (
__FILE
 *
__ª°ri˘
 
__s
,

610 
__c⁄°
 
wch¨_t
 *
__ª°ri˘
 
__f‹m©
,

611 
__gnuc_va_li°
 
__¨g
)

617 
	`vw¥ötf
 (
__c⁄°
 
wch¨_t
 *
__ª°ri˘
 
__f‹m©
,

618 
__gnuc_va_li°
 
__¨g
)

622 
	$vsw¥ötf
 (
wch¨_t
 *
__ª°ri˘
 
__s
, 
size_t
 
__n
,

623 
__c⁄°
 
wch¨_t
 *
__ª°ri˘
 
__f‹m©
,

624 
__gnuc_va_li°
 
__¨g
)

625 
__THROW
 ;

632 
	`fwsˇnf
 (
__FILE
 *
__ª°ri˘
 
__°ªam
,

633 
__c⁄°
 
wch¨_t
 *
__ª°ri˘
 
__f‹m©
, ...)

639 
	`wsˇnf
 (
__c⁄°
 
wch¨_t
 *
__ª°ri˘
 
__f‹m©
, ...)

642 
	$swsˇnf
 (
__c⁄°
 
wch¨_t
 *
__ª°ri˘
 
__s
,

643 
__c⁄°
 
wch¨_t
 *
__ª°ri˘
 
__f‹m©
, ...)

644 
__THROW
 ;

646 #i‡
deföed
 
__USE_ISOC99
 && !deföed 
__USE_GNU
 \

647 && (!
deföed
 
__LDBL_COMPAT
 || !deföed 
__REDIRECT
) \

648 && (
deföed
 
__STRICT_ANSI__
 || deföed 
__USE_XOPEN2K
)

649 #ifde‡
__REDIRECT


653 
	`__REDIRECT
 (
fwsˇnf
, (
__FILE
 *
__ª°ri˘
 
__°ªam
,

654 
__c⁄°
 
wch¨_t
 *
__ª°ri˘
 
__f‹m©
, ...),

655 
__isoc99_fwsˇnf
)

657 
	`__REDIRECT
 (
wsˇnf
, (
__c⁄°
 
wch¨_t
 *
__ª°ri˘
 
__f‹m©
, ...),

658 
__isoc99_wsˇnf
)

660 
	`__REDIRECT_NTH
 (
swsˇnf
, (
__c⁄°
 
wch¨_t
 *
__ª°ri˘
 
__s
,

661 
__c⁄°
 
wch¨_t
 *
__ª°ri˘
 
__f‹m©
,

662 ...), 
__isoc99_swsˇnf
)

665 
	`__isoc99_fwsˇnf
 (
__FILE
 *
__ª°ri˘
 
__°ªam
,

666 
__c⁄°
 
wch¨_t
 *
__ª°ri˘
 
__f‹m©
, ...);

667 
	`__isoc99_wsˇnf
 (
__c⁄°
 
wch¨_t
 *
__ª°ri˘
 
__f‹m©
, ...);

668 
	$__isoc99_swsˇnf
 (
__c⁄°
 
wch¨_t
 *
__ª°ri˘
 
__s
,

669 
__c⁄°
 
wch¨_t
 *
__ª°ri˘
 
__f‹m©
, ...)

670 
__THROW
;

671 
	#fwsˇnf
 
__isoc99_fwsˇnf


	)

672 
	#wsˇnf
 
__isoc99_wsˇnf


	)

673 
	#swsˇnf
 
__isoc99_swsˇnf


	)

677 
__END_NAMESPACE_STD


680 #ifde‡
__USE_ISOC99


681 
__BEGIN_NAMESPACE_C99


686 
	`vfwsˇnf
 (
__FILE
 *
__ª°ri˘
 
__s
,

687 
__c⁄°
 
wch¨_t
 *
__ª°ri˘
 
__f‹m©
,

688 
__gnuc_va_li°
 
__¨g
)

694 
	`vwsˇnf
 (
__c⁄°
 
wch¨_t
 *
__ª°ri˘
 
__f‹m©
,

695 
__gnuc_va_li°
 
__¨g
)

698 
	$vswsˇnf
 (
__c⁄°
 
wch¨_t
 *
__ª°ri˘
 
__s
,

699 
__c⁄°
 
wch¨_t
 *
__ª°ri˘
 
__f‹m©
,

700 
__gnuc_va_li°
 
__¨g
)

701 
__THROW
 ;

703 #i‡!
deföed
 
__USE_GNU
 \

704 && (!
deföed
 
__LDBL_COMPAT
 || !deföed 
__REDIRECT
) \

705 && (
deföed
 
__STRICT_ANSI__
 || deföed 
__USE_XOPEN2K
)

706 #ifde‡
__REDIRECT


707 
	`__REDIRECT
 (
vfwsˇnf
, (
__FILE
 *
__ª°ri˘
 
__s
,

708 
__c⁄°
 
wch¨_t
 *
__ª°ri˘
 
__f‹m©
,

709 
__gnuc_va_li°
 
__¨g
), 
__isoc99_vfwsˇnf
)

711 
	`__REDIRECT
 (
vwsˇnf
, (
__c⁄°
 
wch¨_t
 *
__ª°ri˘
 
__f‹m©
,

712 
__gnuc_va_li°
 
__¨g
), 
__isoc99_vwsˇnf
)

714 
	`__REDIRECT_NTH
 (
vswsˇnf
, (
__c⁄°
 
wch¨_t
 *
__ª°ri˘
 
__s
,

715 
__c⁄°
 
wch¨_t
 *
__ª°ri˘
 
__f‹m©
,

716 
__gnuc_va_li°
 
__¨g
), 
__isoc99_vswsˇnf
)

719 
	`__isoc99_vfwsˇnf
 (
__FILE
 *
__ª°ri˘
 
__s
,

720 
__c⁄°
 
wch¨_t
 *
__ª°ri˘
 
__f‹m©
,

721 
__gnuc_va_li°
 
__¨g
);

722 
	`__isoc99_vwsˇnf
 (
__c⁄°
 
wch¨_t
 *
__ª°ri˘
 
__f‹m©
,

723 
__gnuc_va_li°
 
__¨g
);

724 
	$__isoc99_vswsˇnf
 (
__c⁄°
 
wch¨_t
 *
__ª°ri˘
 
__s
,

725 
__c⁄°
 
wch¨_t
 *
__ª°ri˘
 
__f‹m©
,

726 
__gnuc_va_li°
 
__¨g
Ë
__THROW
;

727 
	#vfwsˇnf
 
__isoc99_vfwsˇnf


	)

728 
	#vwsˇnf
 
__isoc99_vwsˇnf


	)

729 
	#vswsˇnf
 
__isoc99_vswsˇnf


	)

733 
__END_NAMESPACE_C99


737 
__BEGIN_NAMESPACE_STD


742 
wöt_t
 
	`fgëwc
 (
__FILE
 *
__°ªam
);

743 
wöt_t
 
	`gëwc
 (
__FILE
 *
__°ªam
);

749 
wöt_t
 
	`gëwch¨
 ();

756 
wöt_t
 
	`Âutwc
 (
wch¨_t
 
__wc
, 
__FILE
 *
__°ªam
);

757 
wöt_t
 
	`putwc
 (
wch¨_t
 
__wc
, 
__FILE
 *
__°ªam
);

763 
wöt_t
 
	`putwch¨
 (
wch¨_t
 
__wc
);

771 
wch¨_t
 *
	`fgëws
 (wch¨_à*
__ª°ri˘
 
__ws
, 
__n
,

772 
__FILE
 *
__ª°ri˘
 
__°ªam
);

778 
	`Âutws
 (
__c⁄°
 
wch¨_t
 *
__ª°ri˘
 
__ws
,

779 
__FILE
 *
__ª°ri˘
 
__°ªam
);

786 
wöt_t
 
	`ungëwc
 (wöt_à
__wc
, 
__FILE
 *
__°ªam
);

787 
__END_NAMESPACE_STD


790 #ifde‡
__USE_GNU


798 
wöt_t
 
	`gëwc_u∆ocked
 (
__FILE
 *
__°ªam
);

799 
wöt_t
 
	`gëwch¨_u∆ocked
 ();

807 
wöt_t
 
	`fgëwc_u∆ocked
 (
__FILE
 *
__°ªam
);

815 
wöt_t
 
	`Âutwc_u∆ocked
 (
wch¨_t
 
__wc
, 
__FILE
 *
__°ªam
);

824 
wöt_t
 
	`putwc_u∆ocked
 (
wch¨_t
 
__wc
, 
__FILE
 *
__°ªam
);

825 
wöt_t
 
	`putwch¨_u∆ocked
 (
wch¨_t
 
__wc
);

834 
wch¨_t
 *
	`fgëws_u∆ocked
 (wch¨_à*
__ª°ri˘
 
__ws
, 
__n
,

835 
__FILE
 *
__ª°ri˘
 
__°ªam
);

843 
	`Âutws_u∆ocked
 (
__c⁄°
 
wch¨_t
 *
__ª°ri˘
 
__ws
,

844 
__FILE
 *
__ª°ri˘
 
__°ªam
);

848 
__BEGIN_NAMESPACE_C99


852 
size_t
 
	$wcs·ime
 (
wch¨_t
 *
__ª°ri˘
 
__s
, 
size_t
 
__maxsize
,

853 
__c⁄°
 
wch¨_t
 *
__ª°ri˘
 
__f‹m©
,

854 
__c⁄°
 
tm
 *
__ª°ri˘
 
__ç
Ë
__THROW
;

855 
__END_NAMESPACE_C99


857 #ifde‡
__USE_GNU


858 
	~<xloˇÀ.h
>

862 
size_t
 
	$wcs·ime_l
 (
wch¨_t
 *
__ª°ri˘
 
__s
, 
size_t
 
__maxsize
,

863 
__c⁄°
 
wch¨_t
 *
__ª°ri˘
 
__f‹m©
,

864 
__c⁄°
 
tm
 *
__ª°ri˘
 
__ç
,

865 
__loˇÀ_t
 
__loc
Ë
__THROW
;

874 #i‡
deföed
 
__USE_UNIX98
 && !deföed 
__USE_GNU


875 
	#__√ed_iswxxx


	)

876 
	~<w˘y≥.h
>

880 #i‡
__USE_FORTIFY_LEVEL
 > 0 && 
deföed
 
__exã∫_Æways_ölöe


881 
	~<bôs/wch¨2.h
>

884 #ifde‡
__LDBL_COMPAT


885 
	~<bôs/wch¨-ldbl.h
>

888 
__END_DECLS


896 #unde‡
__√ed_mb°©e_t


897 #unde‡
__√ed_wöt_t


	@/usr/include/wctype.h

24 #i‚de‡
_WCTYPE_H


26 
	~<„©uªs.h
>

27 
	~<bôs/ty≥s.h
>

29 #i‚de‡
__√ed_iswxxx


30 
	#_WCTYPE_H
 1

	)

33 
	#__√ed_wöt_t


	)

34 
	~<wch¨.h
>

38 #i‚de‡
WEOF


39 
	#WEOF
 (0xffffffffu)

	)

42 #unde‡
__√ed_iswxxx


47 #i‚de‡
__iswxxx_deföed


48 
	#__iswxxx_deföed
 1

	)

50 
__BEGIN_NAMESPACE_C99


53 
	tw˘y≥_t
;

54 
	g__END_NAMESPACE_C99


56 #i‚de‡
_ISwbô


61 
	~<ídün.h
>

62 #i‡
__BYTE_ORDER
 =
__BIG_ENDIAN


63 
	#_ISwbô
(
bô
Ë(1 << (bô))

	)

65 
	#_ISwbô
(
bô
) \

66 ((
bô
) < 8 ? () ((1UL << (bit)) << 24) \

67 : ((
bô
) < 16 ? () ((1UL << (bit)) << 8) \

68 : ((
bô
) < 24 ? () ((1UL << (bit)) >> 8) \

69 : (Ë((1UL << (
bô
)Ë>> 24))))

	)

74 
	m__ISwuµî
 = 0,

75 
	m__ISwlowî
 = 1,

76 
	m__ISwÆpha
 = 2,

77 
	m__ISwdigô
 = 3,

78 
	m__ISwxdigô
 = 4,

79 
	m__ISw•a˚
 = 5,

80 
	m__ISw¥öt
 = 6,

81 
	m__ISwgøph
 = 7,

82 
	m__ISwbœnk
 = 8,

83 
	m__ISw˙ål
 = 9,

84 
	m__ISwpun˘
 = 10,

85 
	m__ISwÆnum
 = 11,

87 
	m_ISwuµî
 = 
_ISwbô
 (
__ISwuµî
),

88 
	m_ISwlowî
 = 
_ISwbô
 (
__ISwlowî
),

89 
	m_ISwÆpha
 = 
_ISwbô
 (
__ISwÆpha
),

90 
	m_ISwdigô
 = 
_ISwbô
 (
__ISwdigô
),

91 
	m_ISwxdigô
 = 
_ISwbô
 (
__ISwxdigô
),

92 
	m_ISw•a˚
 = 
_ISwbô
 (
__ISw•a˚
),

93 
	m_ISw¥öt
 = 
_ISwbô
 (
__ISw¥öt
),

94 
	m_ISwgøph
 = 
_ISwbô
 (
__ISwgøph
),

95 
	m_ISwbœnk
 = 
_ISwbô
 (
__ISwbœnk
),

96 
	m_ISw˙ål
 = 
_ISwbô
 (
__ISw˙ål
),

97 
	m_ISwpun˘
 = 
_ISwbô
 (
__ISwpun˘
),

98 
	m_ISwÆnum
 = 
_ISwbô
 (
__ISwÆnum
)

103 
__BEGIN_DECLS


105 
__BEGIN_NAMESPACE_C99


112 
	$iswÆnum
 (
wöt_t
 
__wc
Ë
__THROW
;

118 
	$iswÆpha
 (
wöt_t
 
__wc
Ë
__THROW
;

121 
	$isw˙ål
 (
wöt_t
 
__wc
Ë
__THROW
;

125 
	$iswdigô
 (
wöt_t
 
__wc
Ë
__THROW
;

129 
	$iswgøph
 (
wöt_t
 
__wc
Ë
__THROW
;

134 
	$iswlowî
 (
wöt_t
 
__wc
Ë
__THROW
;

137 
	$isw¥öt
 (
wöt_t
 
__wc
Ë
__THROW
;

142 
	$iswpun˘
 (
wöt_t
 
__wc
Ë
__THROW
;

147 
	$isw•a˚
 (
wöt_t
 
__wc
Ë
__THROW
;

152 
	$iswuµî
 (
wöt_t
 
__wc
Ë
__THROW
;

157 
	$iswxdigô
 (
wöt_t
 
__wc
Ë
__THROW
;

162 #ifde‡
__USE_ISOC99


163 
	$iswbœnk
 (
wöt_t
 
__wc
Ë
__THROW
;

172 
w˘y≥_t
 
	$w˘y≥
 (
__c⁄°
 *
__¥›îty
Ë
__THROW
;

176 
	$isw˘y≥
 (
wöt_t
 
__wc
, 
w˘y≥_t
 
__desc
Ë
__THROW
;

177 
__END_NAMESPACE_C99


184 
__BEGIN_NAMESPACE_C99


187 
__c⁄°
 
	t__öt32_t
 *
	tw˘øns_t
;

188 
__END_NAMESPACE_C99


189 #ifde‡
__USE_GNU


190 
	$__USING_NAMESPACE_C99
(
w˘øns_t
)

193 
__BEGIN_NAMESPACE_C99


195 
wöt_t
 
	$towlowî
 (
wöt_t
 
__wc
Ë
__THROW
;

198 
wöt_t
 
	$towuµî
 (
wöt_t
 
__wc
Ë
__THROW
;

199 
__END_NAMESPACE_C99


201 
__END_DECLS


208 #ifde‡
_WCTYPE_H


214 
__BEGIN_DECLS


216 
__BEGIN_NAMESPACE_C99


219 
w˘øns_t
 
	$w˘øns
 (
__c⁄°
 *
__¥›îty
Ë
__THROW
;

222 
wöt_t
 
	$tow˘øns
 (
wöt_t
 
__wc
, 
w˘øns_t
 
__desc
Ë
__THROW
;

223 
__END_NAMESPACE_C99


225 #ifde‡
__USE_XOPEN2K8


227 
	~<xloˇÀ.h
>

231 
	$iswÆnum_l
 (
wöt_t
 
__wc
, 
__loˇÀ_t
 
__loˇÀ
Ë
__THROW
;

237 
	$iswÆpha_l
 (
wöt_t
 
__wc
, 
__loˇÀ_t
 
__loˇÀ
Ë
__THROW
;

240 
	$isw˙ål_l
 (
wöt_t
 
__wc
, 
__loˇÀ_t
 
__loˇÀ
Ë
__THROW
;

244 
	$iswdigô_l
 (
wöt_t
 
__wc
, 
__loˇÀ_t
 
__loˇÀ
Ë
__THROW
;

248 
	$iswgøph_l
 (
wöt_t
 
__wc
, 
__loˇÀ_t
 
__loˇÀ
Ë
__THROW
;

253 
	$iswlowî_l
 (
wöt_t
 
__wc
, 
__loˇÀ_t
 
__loˇÀ
Ë
__THROW
;

256 
	$isw¥öt_l
 (
wöt_t
 
__wc
, 
__loˇÀ_t
 
__loˇÀ
Ë
__THROW
;

261 
	$iswpun˘_l
 (
wöt_t
 
__wc
, 
__loˇÀ_t
 
__loˇÀ
Ë
__THROW
;

266 
	$isw•a˚_l
 (
wöt_t
 
__wc
, 
__loˇÀ_t
 
__loˇÀ
Ë
__THROW
;

271 
	$iswuµî_l
 (
wöt_t
 
__wc
, 
__loˇÀ_t
 
__loˇÀ
Ë
__THROW
;

276 
	$iswxdigô_l
 (
wöt_t
 
__wc
, 
__loˇÀ_t
 
__loˇÀ
Ë
__THROW
;

281 
	$iswbœnk_l
 (
wöt_t
 
__wc
, 
__loˇÀ_t
 
__loˇÀ
Ë
__THROW
;

285 
w˘y≥_t
 
	$w˘y≥_l
 (
__c⁄°
 *
__¥›îty
, 
__loˇÀ_t
 
__loˇÀ
)

286 
__THROW
;

290 
	$isw˘y≥_l
 (
wöt_t
 
__wc
, 
w˘y≥_t
 
__desc
, 
__loˇÀ_t
 
__loˇÀ
)

291 
__THROW
;

299 
wöt_t
 
	$towlowî_l
 (
wöt_t
 
__wc
, 
__loˇÀ_t
 
__loˇÀ
Ë
__THROW
;

302 
wöt_t
 
	$towuµî_l
 (
wöt_t
 
__wc
, 
__loˇÀ_t
 
__loˇÀ
Ë
__THROW
;

306 
w˘øns_t
 
	$w˘øns_l
 (
__c⁄°
 *
__¥›îty
, 
__loˇÀ_t
 
__loˇÀ
)

307 
__THROW
;

310 
wöt_t
 
	$tow˘øns_l
 (
wöt_t
 
__wc
, 
w˘øns_t
 
__desc
,

311 
__loˇÀ_t
 
__loˇÀ
Ë
__THROW
;

315 
__END_DECLS


	@/usr/include/endian.h

19 #i‚def 
_ENDIAN_H


20 
	#_ENDIAN_H
 1

	)

22 
	~<„©uªs.h
>

32 
	#__LITTLE_ENDIAN
 1234

	)

33 
	#__BIG_ENDIAN
 4321

	)

34 
	#__PDP_ENDIAN
 3412

	)

37 
	~<bôs/ídün.h
>

41 #i‚de‡
__FLOAT_WORD_ORDER


42 
	#__FLOAT_WORD_ORDER
 
__BYTE_ORDER


	)

45 #ifdef 
__USE_BSD


46 
	#LITTLE_ENDIAN
 
__LITTLE_ENDIAN


	)

47 
	#BIG_ENDIAN
 
__BIG_ENDIAN


	)

48 
	#PDP_ENDIAN
 
__PDP_ENDIAN


	)

49 
	#BYTE_ORDER
 
__BYTE_ORDER


	)

52 #i‡
__BYTE_ORDER
 =
__LITTLE_ENDIAN


53 
	#__LONG_LONG_PAIR
(
HI
, 
LO
ËLO, 
	)
HI

54 #ñi‡
__BYTE_ORDER
 =
__BIG_ENDIAN


55 
	#__LONG_LONG_PAIR
(
HI
, 
LO
ËHI, 
	)
LO

59 #ifde‡
__USE_BSD


61 
	~<bôs/byãsw≠.h
>

63 #i‡
__BYTE_ORDER
 =
__LITTLE_ENDIAN


64 
	#htobe16
(
x
Ë
	`__bsw≠_16
 (x)

	)

65 
	#htﬁe16
(
x
Ë(x)

	)

66 
	#be16toh
(
x
Ë
	`__bsw≠_16
 (x)

	)

67 
	#À16toh
(
x
Ë(x)

	)

69 
	#htobe32
(
x
Ë
	`__bsw≠_32
 (x)

	)

70 
	#htﬁe32
(
x
Ë(x)

	)

71 
	#be32toh
(
x
Ë
	`__bsw≠_32
 (x)

	)

72 
	#À32toh
(
x
Ë(x)

	)

74 
	#htobe64
(
x
Ë
	`__bsw≠_64
 (x)

	)

75 
	#htﬁe64
(
x
Ë(x)

	)

76 
	#be64toh
(
x
Ë
	`__bsw≠_64
 (x)

	)

77 
	#À64toh
(
x
Ë(x)

	)

79 
	#htobe16
(
x
Ë(x)

	)

80 
	#htﬁe16
(
x
Ë
	`__bsw≠_16
 (x)

	)

81 
	#be16toh
(
x
Ë(x)

	)

82 
	#À16toh
(
x
Ë
	`__bsw≠_16
 (x)

	)

84 
	#htobe32
(
x
Ë(x)

	)

85 
	#htﬁe32
(
x
Ë
	`__bsw≠_32
 (x)

	)

86 
	#be32toh
(
x
Ë(x)

	)

87 
	#À32toh
(
x
Ë
	`__bsw≠_32
 (x)

	)

89 
	#htobe64
(
x
Ë(x)

	)

90 
	#htﬁe64
(
x
Ë
	`__bsw≠_64
 (x)

	)

91 
	#be64toh
(
x
Ë(x)

	)

92 
	#À64toh
(
x
Ë
	`__bsw≠_64
 (x)

	)

	@/usr/include/features.h

20 #i‚def 
_FEATURES_H


21 
	#_FEATURES_H
 1

	)

98 #unde‡
__USE_ISOC99


99 #unde‡
__USE_ISOC95


100 #unde‡
__USE_POSIX


101 #unde‡
__USE_POSIX2


102 #unde‡
__USE_POSIX199309


103 #unde‡
__USE_POSIX199506


104 #unde‡
__USE_XOPEN


105 #unde‡
__USE_XOPEN_EXTENDED


106 #unde‡
__USE_UNIX98


107 #unde‡
__USE_XOPEN2K


108 #unde‡
__USE_XOPEN2KXSI


109 #unde‡
__USE_XOPEN2K8


110 #unde‡
__USE_XOPEN2K8XSI


111 #unde‡
__USE_LARGEFILE


112 #unde‡
__USE_LARGEFILE64


113 #unde‡
__USE_FILE_OFFSET64


114 #unde‡
__USE_BSD


115 #unde‡
__USE_SVID


116 #unde‡
__USE_MISC


117 #unde‡
__USE_ATFILE


118 #unde‡
__USE_GNU


119 #unde‡
__USE_REENTRANT


120 #unde‡
__USE_FORTIFY_LEVEL


121 #unde‡
__FAVOR_BSD


122 #unde‡
__KERNEL_STRICT_NAMES


126 #i‚de‡
_LOOSE_KERNEL_NAMES


127 
	#__KERNEL_STRICT_NAMES


	)

131 
	#__USE_ANSI
 1

	)

140 #i‡
deföed
 
__GNUC__
 && deföed 
__GNUC_MINOR__


141 
	#__GNUC_PREREQ
(
maj
, 
mö
) \

142 ((
__GNUC__
 << 16Ë+ 
__GNUC_MINOR__
 >((
maj
Ë<< 16Ë+ (
mö
))

	)

144 
	#__GNUC_PREREQ
(
maj
, 
mö
Ë0

	)

149 #i‡
deföed
 
_BSD_SOURCE
 && \

150 !(
deföed
 
	g_POSIX_SOURCE
 || deföed 
	g_POSIX_C_SOURCE
 || \

151 
deföed
 
	g_XOPEN_SOURCE
 || deföed 
	g_GNU_SOURCE
 || deföed 
	g_SVID_SOURCE
)

152 
	#__FAVOR_BSD
 1

	)

156 #ifde‡
_GNU_SOURCE


157 #unde‡
_ISOC95_SOURCE


158 
	#_ISOC95_SOURCE
 1

	)

159 #unde‡
_ISOC99_SOURCE


160 
	#_ISOC99_SOURCE
 1

	)

161 #unde‡
_POSIX_SOURCE


162 
	#_POSIX_SOURCE
 1

	)

163 #unde‡
_POSIX_C_SOURCE


164 
	#_POSIX_C_SOURCE
 200809L

	)

165 #unde‡
_XOPEN_SOURCE


166 
	#_XOPEN_SOURCE
 700

	)

167 #unde‡
_XOPEN_SOURCE_EXTENDED


168 
	#_XOPEN_SOURCE_EXTENDED
 1

	)

169 #unde‡
_LARGEFILE64_SOURCE


170 
	#_LARGEFILE64_SOURCE
 1

	)

171 #unde‡
_BSD_SOURCE


172 
	#_BSD_SOURCE
 1

	)

173 #unde‡
_SVID_SOURCE


174 
	#_SVID_SOURCE
 1

	)

175 #unde‡
_ATFILE_SOURCE


176 
	#_ATFILE_SOURCE
 1

	)

181 #i‡(!
deföed
 
__STRICT_ANSI__
 && !deföed 
_ISOC99_SOURCE
 && \

182 !
deföed
 
	g_POSIX_SOURCE
 && !deföed 
	g_POSIX_C_SOURCE
 && \

183 !
deföed
 
	g_XOPEN_SOURCE
 && !deföed 
	g_BSD_SOURCE
 && !deföed 
	g_SVID_SOURCE
)

184 
	#_BSD_SOURCE
 1

	)

185 
	#_SVID_SOURCE
 1

	)

192 #i‡(
deföed
 
_ISOC99_SOURCE
 || deföed 
_ISOC9X_SOURCE
 \

193 || (
deföed
 
	g__STDC_VERSION__
 && __STDC_VERSION__ >= 199901L))

194 
	#__USE_ISOC99
 1

	)

198 #i‡(
deföed
 
_ISOC99_SOURCE
 || deföed 
_ISOC9X_SOURCE
 \

199 || (
deföed
 
__STDC_VERSION__
 && __STDC_VERSION__ >= 199409L))

200 
	#__USE_ISOC95
 1

	)

205 #i‡((!
deföed
 
__STRICT_ANSI__
 || (
_XOPEN_SOURCE
 - 0) >= 500) && \

206 !
deföed
 
_POSIX_SOURCE
 && !deföed 
_POSIX_C_SOURCE
)

207 
	#_POSIX_SOURCE
 1

	)

208 #i‡
deföed
 
_XOPEN_SOURCE
 && (_XOPEN_SOURCE - 0) < 500

209 
	#_POSIX_C_SOURCE
 2

	)

210 #ñi‡
deföed
 
_XOPEN_SOURCE
 && (_XOPEN_SOURCE - 0) < 600

211 
	#_POSIX_C_SOURCE
 199506L

	)

212 #ñi‡
deföed
 
_XOPEN_SOURCE
 && (_XOPEN_SOURCE - 0) < 700

213 
	#_POSIX_C_SOURCE
 200112L

	)

215 
	#_POSIX_C_SOURCE
 200809L

	)

217 
	#__USE_POSIX_IMPLICITLY
 1

	)

220 #i‡
deföed
 
_POSIX_SOURCE
 || 
_POSIX_C_SOURCE
 >1 || deföed 
_XOPEN_SOURCE


221 
	#__USE_POSIX
 1

	)

224 #i‡
deföed
 
_POSIX_C_SOURCE
 && _POSIX_C_SOURCE >2 || deföed 
_XOPEN_SOURCE


225 
	#__USE_POSIX2
 1

	)

228 #i‡(
_POSIX_C_SOURCE
 - 0) >= 199309L

229 
	#__USE_POSIX199309
 1

	)

232 #i‡(
_POSIX_C_SOURCE
 - 0) >= 199506L

233 
	#__USE_POSIX199506
 1

	)

236 #i‡(
_POSIX_C_SOURCE
 - 0) >= 200112L

237 
	#__USE_XOPEN2K
 1

	)

238 #unde‡
__USE_ISOC95


239 
	#__USE_ISOC95
 1

	)

240 #unde‡
__USE_ISOC99


241 
	#__USE_ISOC99
 1

	)

244 #i‡(
_POSIX_C_SOURCE
 - 0) >= 200809L

245 
	#__USE_XOPEN2K8
 1

	)

246 #unde‡
_ATFILE_SOURCE


247 
	#_ATFILE_SOURCE
 1

	)

250 #ifdef 
_XOPEN_SOURCE


251 
	#__USE_XOPEN
 1

	)

252 #i‡(
_XOPEN_SOURCE
 - 0) >= 500

253 
	#__USE_XOPEN_EXTENDED
 1

	)

254 
	#__USE_UNIX98
 1

	)

255 #unde‡
_LARGEFILE_SOURCE


256 
	#_LARGEFILE_SOURCE
 1

	)

257 #i‡(
_XOPEN_SOURCE
 - 0) >= 600

258 #i‡(
_XOPEN_SOURCE
 - 0) >= 700

259 
	#__USE_XOPEN2K8
 1

	)

260 
	#__USE_XOPEN2K8XSI
 1

	)

262 
	#__USE_XOPEN2K
 1

	)

263 
	#__USE_XOPEN2KXSI
 1

	)

264 #unde‡
__USE_ISOC95


265 
	#__USE_ISOC95
 1

	)

266 #unde‡
__USE_ISOC99


267 
	#__USE_ISOC99
 1

	)

270 #ifde‡
_XOPEN_SOURCE_EXTENDED


271 
	#__USE_XOPEN_EXTENDED
 1

	)

276 #ifde‡
_LARGEFILE_SOURCE


277 
	#__USE_LARGEFILE
 1

	)

280 #ifde‡
_LARGEFILE64_SOURCE


281 
	#__USE_LARGEFILE64
 1

	)

284 #i‡
deföed
 
_FILE_OFFSET_BITS
 && _FILE_OFFSET_BITS == 64

285 
	#__USE_FILE_OFFSET64
 1

	)

288 #i‡
deföed
 
_BSD_SOURCE
 || deföed 
_SVID_SOURCE


289 
	#__USE_MISC
 1

	)

292 #ifdef 
_BSD_SOURCE


293 
	#__USE_BSD
 1

	)

296 #ifdef 
_SVID_SOURCE


297 
	#__USE_SVID
 1

	)

300 #ifdef 
_ATFILE_SOURCE


301 
	#__USE_ATFILE
 1

	)

304 #ifdef 
_GNU_SOURCE


305 
	#__USE_GNU
 1

	)

308 #i‡
deföed
 
_REENTRANT
 || deföed 
_THREAD_SAFE


309 
	#__USE_REENTRANT
 1

	)

312 #i‡
deföed
 
_FORTIFY_SOURCE
 && _FORTIFY_SOURCE > 0 \

313 && 
__GNUC_PREREQ
 (4, 1Ë&& 
deföed
 
	g__OPTIMIZE__
 && __OPTIMIZE__ > 0

314 #i‡
_FORTIFY_SOURCE
 > 1

315 
	#__USE_FORTIFY_LEVEL
 2

	)

317 
	#__USE_FORTIFY_LEVEL
 1

	)

320 
	#__USE_FORTIFY_LEVEL
 0

	)

324 
	~<bôs/¥edefs.h
>

327 
	#__STDC_ISO_10646__
 200009L

	)

335 #unde‡
__GNU_LIBRARY__


336 
	#__GNU_LIBRARY__
 6

	)

340 
	#__GLIBC__
 2

	)

341 
	#__GLIBC_MINOR__
 15

	)

343 
	#__GLIBC_PREREQ
(
maj
, 
mö
) \

344 ((
__GLIBC__
 << 16Ë+ 
__GLIBC_MINOR__
 >((
maj
Ë<< 16Ë+ (
mö
))

	)

347 #i‡
deföed
 
__GNUC__
 \

348 || (
deföed
 
	g__PGI
 && deföed 
	g__i386__
 ) \

349 || (
deföed
 
	g__INTEL_COMPILER
 && (deföed 
	g__i386__
 || deföed 
	g__ü64__
)) \

350 || (
deföed
 
	g__STDC_VERSION__
 && __STDC_VERSION__ >= 199901L)

351 
	#__GLIBC_HAVE_LONG_LONG
 1

	)

355 #i‚de‡
__ASSEMBLER__


356 #i‚de‡
_SYS_CDEFS_H


357 
	~<sys/cdefs.h
>

362 #i‡
deföed
 
__USE_FILE_OFFSET64
 && !deföed 
__REDIRECT


363 
	#__USE_LARGEFILE
 1

	)

364 
	#__USE_LARGEFILE64
 1

	)

370 #i‡
__GNUC_PREREQ
 (2, 7Ë&& 
deföed
 
__OPTIMIZE__
 \

371 && !
deföed
 
	g__OPTIMIZE_SIZE__
 && !deföed 
	g__NO_INLINE__
 \

372 && 
deföed
 
	g__exã∫_ölöe


373 
	#__USE_EXTERN_INLINES
 1

	)

378 #i‡
__GNUC_PREREQ
 (2, 7Ë&& 
deföed
 
__OPTIMIZE__
 \

379 && (
deföed
 
	g_LIBC
 || !deföed 
	g__OPTIMIZE_SIZE__
Ë&& !deföed 
	g__NO_INLINE__
 \

380 && 
deföed
 
	g__exã∫_ölöe


381 
	#__USE_EXTERN_INLINES_IN_LIBC
 1

	)

389 
	~<gnu/°ubs.h
>

	@/usr/include/libio.h

29 #i‚de‡
_IO_STDIO_H


30 
	#_IO_STDIO_H


	)

32 
	~<_G_c⁄fig.h
>

34 
	#_IO_pos_t
 
_G_Âos_t


	)

35 
	#_IO_Âos_t
 
_G_Âos_t


	)

36 
	#_IO_Âos64_t
 
_G_Âos64_t


	)

37 
	#_IO_size_t
 
_G_size_t


	)

38 
	#_IO_ssize_t
 
_G_ssize_t


	)

39 
	#_IO_off_t
 
_G_off_t


	)

40 
	#_IO_off64_t
 
_G_off64_t


	)

41 
	#_IO_pid_t
 
_G_pid_t


	)

42 
	#_IO_uid_t
 
_G_uid_t


	)

43 
	#_IO_ic⁄v_t
 
_G_ic⁄v_t


	)

44 
	#_IO_HAVE_SYS_WAIT
 
_G_HAVE_SYS_WAIT


	)

45 
	#_IO_HAVE_ST_BLKSIZE
 
_G_HAVE_ST_BLKSIZE


	)

46 
	#_IO_BUFSIZ
 
_G_BUFSIZ


	)

47 
	#_IO_va_li°
 
_G_va_li°


	)

48 
	#_IO_wöt_t
 
_G_wöt_t


	)

50 #ifde‡
_G_NEED_STDARG_H


52 
	#__√ed___va_li°


	)

53 
	~<°d¨g.h
>

54 #ifde‡
__GNUC_VA_LIST


55 #unde‡
_IO_va_li°


56 
	#_IO_va_li°
 
__gnuc_va_li°


	)

60 #i‚de‡
__P


61 #i‡
_G_HAVE_SYS_CDEFS


62 
	~<sys/cdefs.h
>

64 #ifde‡
__STDC__


65 
	#__P
(
p
Ë
	)
p

66 
	#__PMT
(
p
Ë
	)
p

68 
	#__P
(
p
Ë()

	)

69 
	#__PMT
(
p
Ë()

	)

75 #i‚de‡
_PARAMS


76 
	#_PARAMS
(
¥Ÿos
Ë
	`__P
’rŸos)

	)

79 #i‚de‡
__STDC__


81 c⁄°

	)

84 
	#_IO_UNIFIED_JUMPTABLES
 1

	)

85 #i‚de‡
_G_HAVE_PRINTF_FP


86 
	#_IO_USE_DTOA
 1

	)

89 #i‚de‡
EOF


90 
	#EOF
 (-1)

	)

92 #i‚de‡
NULL


93 #i‡
deföed
 
__GNUG__
 && \

94 (
	g__GNUC__
 > 2 || (__GNUC__ =2 && 
__GNUC_MINOR__
 >= 8))

95 
	#NULL
 (
__nuŒ
)

	)

97 #i‡!
deföed
(
__˝lu•lus
)

98 
	#NULL
 ((*)0)

	)

100 
	#NULL
 (0)

	)

105 
	#_IOS_INPUT
 1

	)

106 
	#_IOS_OUTPUT
 2

	)

107 
	#_IOS_ATEND
 4

	)

108 
	#_IOS_APPEND
 8

	)

109 
	#_IOS_TRUNC
 16

	)

110 
	#_IOS_NOCREATE
 32

	)

111 
	#_IOS_NOREPLACE
 64

	)

112 
	#_IOS_BIN
 128

	)

120 
	#_IO_MAGIC
 0xFBAD0000

	)

121 
	#_OLD_STDIO_MAGIC
 0xFABC0000

	)

122 
	#_IO_MAGIC_MASK
 0xFFFF0000

	)

123 
	#_IO_USER_BUF
 1

	)

124 
	#_IO_UNBUFFERED
 2

	)

125 
	#_IO_NO_READS
 4

	)

126 
	#_IO_NO_WRITES
 8

	)

127 
	#_IO_EOF_SEEN
 0x10

	)

128 
	#_IO_ERR_SEEN
 0x20

	)

129 
	#_IO_DELETE_DONT_CLOSE
 0x40

	)

130 
	#_IO_LINKED
 0x80

	)

131 
	#_IO_IN_BACKUP
 0x100

	)

132 
	#_IO_LINE_BUF
 0x200

	)

133 
	#_IO_TIED_PUT_GET
 0x400

	)

134 
	#_IO_CURRENTLY_PUTTING
 0x800

	)

135 
	#_IO_IS_APPENDING
 0x1000

	)

136 
	#_IO_IS_FILEBUF
 0x2000

	)

137 
	#_IO_BAD_SEEN
 0x4000

	)

138 
	#_IO_USER_LOCK
 0x8000

	)

140 
	#_IO_FLAGS2_MMAP
 1

	)

141 
	#_IO_FLAGS2_NOTCANCEL
 2

	)

142 #ifde‡
_LIBC


143 
	#_IO_FLAGS2_FORTIFY
 4

	)

145 
	#_IO_FLAGS2_USER_WBUF
 8

	)

146 #ifde‡
_LIBC


147 
	#_IO_FLAGS2_SCANF_STD
 16

	)

148 
	#_IO_FLAGS2_NOCLOSE
 32

	)

149 
	#_IO_FLAGS2_CLOEXEC
 64

	)

153 
	#_IO_SKIPWS
 01

	)

154 
	#_IO_LEFT
 02

	)

155 
	#_IO_RIGHT
 04

	)

156 
	#_IO_INTERNAL
 010

	)

157 
	#_IO_DEC
 020

	)

158 
	#_IO_OCT
 040

	)

159 
	#_IO_HEX
 0100

	)

160 
	#_IO_SHOWBASE
 0200

	)

161 
	#_IO_SHOWPOINT
 0400

	)

162 
	#_IO_UPPERCASE
 01000

	)

163 
	#_IO_SHOWPOS
 02000

	)

164 
	#_IO_SCIENTIFIC
 04000

	)

165 
	#_IO_FIXED
 010000

	)

166 
	#_IO_UNITBUF
 020000

	)

167 
	#_IO_STDIO
 040000

	)

168 
	#_IO_DONT_CLOSE
 0100000

	)

169 
	#_IO_BOOLALPHA
 0200000

	)

172 
_IO_jump_t
; 
	g_IO_FILE
;

175 #ifde‡
_IO_MTSAFE_IO


176 #i‡
deföed
 
__GLIBC__
 && __GLIBC__ >= 2

177 
	~<bôs/°dio-lock.h
>

182 
	t_IO_lock_t
;

188 
	s_IO_m¨kî
 {

189 
_IO_m¨kî
 *
	m_√xt
;

190 
_IO_FILE
 *
	m_sbuf
;

194 
	m_pos
;

196 
£t_°ªampos
(
°ªampos
 
•
Ë{ 
	m_•os
 = sp; }

197 
£t_off£t
(
off£t
Ë{ 
	m_pos
 = off£t; 
	m_•os
 = (
°ªampos
)(-2); }

198 
	mpublic
:

199 
°ªamm¨kî
(
°ªambuf
 *
sb
);

200 ~
°ªamm¨kî
();

201 
ßvög
(Ë{  
	m_•os
 == -2; }

202 
dñè
(
°ªamm¨kî
&);

203 
dñè
();

208 
	e__codecvt_ªsu…


210 
	m__codecvt_ok
,

211 
	m__codecvt_∑πül
,

212 
	m__codecvt_îr‹
,

213 
	m__codecvt_noc⁄v


216 #i‡
deföed
 
_LIBC
 || deföed 
_GLIBCPP_USE_WCHAR_T


219 
	s_IO_codecvt


221 (*
	m__codecvt_de°r
Ë(
	m_IO_codecvt
 *);

222 
__codecvt_ªsu…
 (*
__codecvt_do_out
Ë(
	m_IO_codecvt
 *,

223 
	m__mb°©e_t
 *,

224 c⁄° 
	mwch¨_t
 *,

225 c⁄° 
	mwch¨_t
 *,

226 c⁄° 
	mwch¨_t
 **, *,

228 
__codecvt_ªsu…
 (*
__codecvt_do_unshi·
Ë(
	m_IO_codecvt
 *,

229 
	m__mb°©e_t
 *, *,

231 
__codecvt_ªsu…
 (*
__codecvt_do_ö
Ë(
	m_IO_codecvt
 *,

232 
	m__mb°©e_t
 *,

234 c⁄° **, 
	mwch¨_t
 *,

235 
	mwch¨_t
 *, wchar_t **);

236 (*
	m__codecvt_do_ícodög
Ë(
	m_IO_codecvt
 *);

237 (*
	m__codecvt_do_Æways_noc⁄v
Ë(
	m_IO_codecvt
 *);

238 (*
	m__codecvt_do_Àngth
Ë(
	m_IO_codecvt
 *, 
	m__mb°©e_t
 *,

239 c⁄° *, c⁄° *, 
	m_IO_size_t
);

240 (*
	m__codecvt_do_max_Àngth
Ë(
	m_IO_codecvt
 *);

242 
_IO_ic⁄v_t
 
	m__cd_ö
;

243 
_IO_ic⁄v_t
 
	m__cd_out
;

247 
	s_IO_wide_d©a


249 
wch¨_t
 *
	m_IO_ªad_±r
;

250 
wch¨_t
 *
	m_IO_ªad_íd
;

251 
wch¨_t
 *
	m_IO_ªad_ba£
;

252 
wch¨_t
 *
	m_IO_wrôe_ba£
;

253 
wch¨_t
 *
	m_IO_wrôe_±r
;

254 
wch¨_t
 *
	m_IO_wrôe_íd
;

255 
wch¨_t
 *
	m_IO_buf_ba£
;

256 
wch¨_t
 *
	m_IO_buf_íd
;

258 
wch¨_t
 *
	m_IO_ßve_ba£
;

259 
wch¨_t
 *
	m_IO_backup_ba£
;

261 
wch¨_t
 *
	m_IO_ßve_íd
;

263 
__mb°©e_t
 
	m_IO_°©e
;

264 
__mb°©e_t
 
	m_IO_œ°_°©e
;

265 
_IO_codecvt
 
	m_codecvt
;

267 
wch¨_t
 
	m_sh‹tbuf
[1];

269 c⁄° 
_IO_jump_t
 *
	m_wide_vèbÀ
;

273 
	s_IO_FILE
 {

274 
	m_Êags
;

275 
	#_IO_fûe_Êags
 
_Êags


	)

279 * 
	m_IO_ªad_±r
;

280 * 
	m_IO_ªad_íd
;

281 * 
	m_IO_ªad_ba£
;

282 * 
	m_IO_wrôe_ba£
;

283 * 
	m_IO_wrôe_±r
;

284 * 
	m_IO_wrôe_íd
;

285 * 
	m_IO_buf_ba£
;

286 * 
	m_IO_buf_íd
;

288 *
	m_IO_ßve_ba£
;

289 *
	m_IO_backup_ba£
;

290 *
	m_IO_ßve_íd
;

292 
_IO_m¨kî
 *
	m_m¨kîs
;

294 
_IO_FILE
 *
	m_chaö
;

296 
	m_fûío
;

298 
	m_blksize
;

300 
	m_Êags2
;

302 
_IO_off_t
 
	m_ﬁd_off£t
;

304 
	#__HAVE_COLUMN


	)

306 
	m_cur_cﬁumn
;

307 sig√d 
	m_vèbÀ_off£t
;

308 
	m_sh‹tbuf
[1];

312 
_IO_lock_t
 *
	m_lock
;

313 #ifde‡
_IO_USE_OLD_IO_FILE


316 
	s_IO_FILE_com∂ëe


318 
_IO_FILE
 
	m_fûe
;

320 #i‡
deföed
 
_G_IO_IO_FILE_VERSION
 && _G_IO_IO_FILE_VERSION == 0x20001

321 
_IO_off64_t
 
	m_off£t
;

322 #i‡
deföed
 
_LIBC
 || deföed 
_GLIBCPP_USE_WCHAR_T


324 
_IO_codecvt
 *
	m_codecvt
;

325 
_IO_wide_d©a
 *
	m_wide_d©a
;

326 
_IO_FILE
 *
	m_‰ìªs_li°
;

327 *
	m_‰ìªs_buf
;

328 
size_t
 
	m_‰ìªs_size
;

330 *
	m__∑d1
;

331 *
	m__∑d2
;

332 *
	m__∑d3
;

333 *
	m__∑d4
;

334 
size_t
 
	m__∑d5
;

336 
	m_mode
;

338 
	m_unu£d2
[15 *  (Ë- 4 *  (*Ë-  (
size_t
)];

342 #i‚de‡
__˝lu•lus


343 
_IO_FILE
 
	t_IO_FILE
;

346 
	g_IO_FILE_∂us
;

348 
_IO_FILE_∂us
 
_IO_2_1_°dö_
;

349 
_IO_FILE_∂us
 
_IO_2_1_°dout_
;

350 
_IO_FILE_∂us
 
_IO_2_1_°dîr_
;

351 #i‚de‡
_LIBC


352 
	#_IO_°dö
 ((
_IO_FILE
*)(&
_IO_2_1_°dö_
))

	)

353 
	#_IO_°dout
 ((
_IO_FILE
*)(&
_IO_2_1_°dout_
))

	)

354 
	#_IO_°dîr
 ((
_IO_FILE
*)(&
_IO_2_1_°dîr_
))

	)

356 
_IO_FILE
 *
_IO_°dö
 
©åibuã_hiddí
;

357 
_IO_FILE
 *
_IO_°dout
 
©åibuã_hiddí
;

358 
_IO_FILE
 *
_IO_°dîr
 
©åibuã_hiddí
;

366 
__ssize_t
 
	t__io_ªad_‚
 (*
	t__cookõ
, *
	t__buf
, 
	tsize_t
 
	t__nbyãs
);

374 
__ssize_t
 
	t__io_wrôe_‚
 (*
	t__cookõ
, 
	t__c⁄°
 *
	t__buf
,

375 
	tsize_t
 
	t__n
);

383 
	t__io_£ek_‚
 (*
	t__cookõ
, 
	t_IO_off64_t
 *
	t__pos
, 
	t__w
);

386 
	t__io_˛o£_‚
 (*
	t__cookõ
);

389 #ifde‡
_GNU_SOURCE


391 
__io_ªad_‚
 
	tcookõ_ªad_fun˘i⁄_t
;

392 
__io_wrôe_‚
 
	tcookõ_wrôe_fun˘i⁄_t
;

393 
__io_£ek_‚
 
	tcookõ_£ek_fun˘i⁄_t
;

394 
__io_˛o£_‚
 
	tcookõ_˛o£_fun˘i⁄_t
;

399 
__io_ªad_‚
 *
	mªad
;

400 
__io_wrôe_‚
 *
	mwrôe
;

401 
__io_£ek_‚
 *
	m£ek
;

402 
__io_˛o£_‚
 *
	m˛o£
;

403 } 
	t_IO_cookõ_io_fun˘i⁄s_t
;

404 
_IO_cookõ_io_fun˘i⁄s_t
 
	tcookõ_io_fun˘i⁄s_t
;

406 
	g_IO_cookõ_fûe
;

409 
_IO_cookõ_öô
 (
_IO_cookõ_fûe
 *
__cfûe
, 
__ªad_wrôe
,

410 *
__cookõ
, 
_IO_cookõ_io_fun˘i⁄s_t
 
__‚s
);

414 #ifde‡
__˝lu•lus


418 
__undîÊow
 (
_IO_FILE
 *);

419 
__uÊow
 (
_IO_FILE
 *);

420 
__ovîÊow
 (
_IO_FILE
 *, );

421 #i‡
deföed
 
_LIBC
 || deföed 
_GLIBCPP_USE_WCHAR_T


422 
_IO_wöt_t
 
__wundîÊow
 (
_IO_FILE
 *);

423 
_IO_wöt_t
 
__wuÊow
 (
_IO_FILE
 *);

424 
_IO_wöt_t
 
__wovîÊow
 (
_IO_FILE
 *, _IO_wint_t);

427 #i‡ 
__GNUC__
 >= 3

428 
	#_IO_BE
(
ex¥
, 
ªs
Ë
	`__buûtö_ex≥˘
 (”x¥),Ñes)

	)

430 
	#_IO_BE
(
ex¥
, 
ªs
Ë”x¥)

	)

433 
	#_IO_gëc_u∆ocked
(
_Â
) \

434 (
	`_IO_BE
 ((
_Â
)->
_IO_ªad_±r
 >(_Â)->
_IO_ªad_íd
, 0) \

435 ? 
	`__uÊow
 (
_Â
Ë: *(*Ë(_Â)->
_IO_ªad_±r
++)

	)

436 
	#_IO_≥ekc_u∆ocked
(
_Â
) \

437 (
	`_IO_BE
 ((
_Â
)->
_IO_ªad_±r
 >(_Â)->
_IO_ªad_íd
, 0) \

438 && 
	`__undîÊow
 (
_Â
Ë=
EOF
 ? EOF \

439 : *(*Ë(
_Â
)->
_IO_ªad_±r
)

	)

440 
	#_IO_putc_u∆ocked
(
_ch
, 
_Â
) \

441 (
	`_IO_BE
 ((
_Â
)->
_IO_wrôe_±r
 >(_Â)->
_IO_wrôe_íd
, 0) \

442 ? 
	`__ovîÊow
 (
_Â
, (Ë(
_ch
)) \

443 : (Ë(*(
_Â
)->
_IO_wrôe_±r
++ = (
_ch
)))

	)

445 #i‡
deföed
 
_LIBC
 || deföed 
_GLIBCPP_USE_WCHAR_T


446 
	#_IO_gëwc_u∆ocked
(
_Â
) \

447 (
	`_IO_BE
 ((
_Â
)->
_wide_d©a
 =
NULL
 \

448 || ((
_Â
)->
_wide_d©a
->
_IO_ªad_±r
 \

449 >(
_Â
)->
_wide_d©a
->
_IO_ªad_íd
), 0) \

450 ? 
	`__wuÊow
 (
_Â
Ë: (
_IO_wöt_t
Ë*(_Â)->
_wide_d©a
->
_IO_ªad_±r
++)

	)

451 
	#_IO_putwc_u∆ocked
(
_wch
, 
_Â
) \

452 (
	`_IO_BE
 ((
_Â
)->
_wide_d©a
 =
NULL
 \

453 || ((
_Â
)->
_wide_d©a
->
_IO_wrôe_±r
 \

454 >(
_Â
)->
_wide_d©a
->
_IO_wrôe_íd
), 0) \

455 ? 
	`__wovîÊow
 (
_Â
, 
_wch
) \

456 : (
_IO_wöt_t
Ë(*(
_Â
)->
_wide_d©a
->
_IO_wrôe_±r
++ = (
_wch
)))

	)

459 
	#_IO_„of_u∆ocked
(
__Â
Ë(((__Â)->
_Êags
 & 
_IO_EOF_SEEN
Ë!0)

	)

460 
	#_IO_„º‹_u∆ocked
(
__Â
Ë(((__Â)->
_Êags
 & 
_IO_ERR_SEEN
Ë!0)

	)

462 
_IO_gëc
 (
_IO_FILE
 *
__Â
);

463 
_IO_putc
 (
__c
, 
_IO_FILE
 *
__Â
);

464 
_IO_„of
 (
_IO_FILE
 *
__Â
Ë
__THROW
;

465 
_IO_„º‹
 (
_IO_FILE
 *
__Â
Ë
__THROW
;

467 
_IO_≥ekc_locked
 (
_IO_FILE
 *
__Â
);

470 
	#_IO_PENDING_OUTPUT_COUNT
(
_Â
) \

471 ((
_Â
)->
_IO_wrôe_±r
 - (_Â)->
_IO_wrôe_ba£
)

	)

473 
_IO_Êockfûe
 (
_IO_FILE
 *Ë
__THROW
;

474 
_IO_fu∆ockfûe
 (
_IO_FILE
 *Ë
__THROW
;

475 
_IO_·rylockfûe
 (
_IO_FILE
 *Ë
__THROW
;

477 #ifde‡
_IO_MTSAFE_IO


478 
	#_IO_≥ekc
(
_Â
Ë
	`_IO_≥ekc_locked
 (_Â)

	)

479 
	#_IO_Êockfûe
(
_Â
) \

480 i‡(((
_Â
)->
_Êags
 & 
_IO_USER_LOCK
Ë=0Ë
	`_IO_Êockfûe
 (_Â)

	)

481 
	#_IO_fu∆ockfûe
(
_Â
) \

482 i‡(((
_Â
)->
_Êags
 & 
_IO_USER_LOCK
Ë=0Ë
	`_IO_fu∆ockfûe
 (_Â)

	)

484 
	#_IO_≥ekc
(
_Â
Ë
	`_IO_≥ekc_u∆ocked
 (_Â)

	)

485 
	#_IO_Êockfûe
(
_Â
Ë

	)

486 
	#_IO_fu∆ockfûe
(
_Â
Ë

	)

487 
	#_IO_·rylockfûe
(
_Â
Ë

	)

488 
	#_IO_˛ónup_ªgi⁄_°¨t
(
_f˘
, 
_Â
Ë

	)

489 
	#_IO_˛ónup_ªgi⁄_íd
(
_Doô
Ë

	)

492 
_IO_vfsˇnf
 (
_IO_FILE
 * 
__ª°ri˘
, const * __restrict,

493 
_IO_va_li°
, *
__ª°ri˘
);

494 
_IO_vÂrötf
 (
_IO_FILE
 *
__ª°ri˘
, const *__restrict,

495 
_IO_va_li°
);

496 
_IO_ssize_t
 
_IO_∑dn
 (
_IO_FILE
 *, , _IO_ssize_t);

497 
_IO_size_t
 
_IO_sgën
 (
_IO_FILE
 *, *, _IO_size_t);

499 
_IO_off64_t
 
_IO_£ekoff
 (
_IO_FILE
 *, _IO_off64_t, , );

500 
_IO_off64_t
 
_IO_£ekpos
 (
_IO_FILE
 *, _IO_off64_t, );

502 
_IO_‰ì_backup_¨ó
 (
_IO_FILE
 *Ë
__THROW
;

504 #i‡
deföed
 
_LIBC
 || deföed 
_GLIBCPP_USE_WCHAR_T


505 
_IO_wöt_t
 
_IO_gëwc
 (
_IO_FILE
 *
__Â
);

506 
_IO_wöt_t
 
_IO_putwc
 (
wch¨_t
 
__wc
, 
_IO_FILE
 *
__Â
);

507 
_IO_fwide
 (
_IO_FILE
 *
__Â
, 
__mode
Ë
__THROW
;

508 #i‡
__GNUC__
 >= 2

511 #i‡
deföed
 
_LIBC
 && deföed 
SHARED


512 
	~<shlib-com∑t.h
>

513 #i‡
SHLIB_COMPAT
 (
libc
, 
GLIBC_2_0
, 
GLIBC_2_1
)

514 
	#_IO_fwide_maybe_öcom∑tibÀ
 \

515 (
	`__buûtö_ex≥˘
 (&
_IO_°dö_u£d
 =
NULL
, 0))

	)

516 c⁄° 
_IO_°dö_u£d
;

517 
wók_exã∫
 (
_IO_°dö_u£d
);

520 #i‚de‡
_IO_fwide_maybe_öcom∑tibÀ


521 
	#_IO_fwide_maybe_öcom∑tibÀ
 (0)

	)

525 
	#_IO_fwide
(
__Â
, 
__mode
) \

526 ({ 
__ªsu…
 = (
__mode
); \

527 i‡(
__ªsu…
 < 0 && ! 
_IO_fwide_maybe_öcom∑tibÀ
) \

529 i‡((
__Â
)->
_mode
 == 0) \

531 (
__Â
)->
_mode
 = -1; \

532 
__ªsu…
 = (
__Â
)->
_mode
; \

534 i‡(
	`__buûtö_c⁄°™t_p
 (
__mode
) && (__mode) == 0) \

535 
__ªsu…
 = 
_IO_fwide_maybe_öcom∑tibÀ
 ? -1 : (
__Â
)->
_mode
; \

537 
__ªsu…
 = 
	`_IO_fwide
 (
__Â
, __result); \

538 
__ªsu…
; })

	)

541 
_IO_vfwsˇnf
 (
_IO_FILE
 * 
__ª°ri˘
, c⁄° 
wch¨_t
 * __restrict,

542 
_IO_va_li°
, *
__ª°ri˘
);

543 
_IO_vfw¥ötf
 (
_IO_FILE
 *
__ª°ri˘
, c⁄° 
wch¨_t
 *__restrict,

544 
_IO_va_li°
);

545 
_IO_ssize_t
 
_IO_w∑dn
 (
_IO_FILE
 *, 
wöt_t
, _IO_ssize_t);

546 
_IO_‰ì_wbackup_¨ó
 (
_IO_FILE
 *Ë
__THROW
;

549 #ifde‡
__LDBL_COMPAT


550 
	~<bôs/libio-ldbl.h
>

553 #ifde‡
__˝lu•lus


	@/usr/include/linux/if_addr.h

1 #i‚de‡
__LINUX_IF_ADDR_H


2 
	#__LINUX_IF_ADDR_H


	)

4 
	~<löux/ty≥s.h
>

5 
	~<löux/√éök.h
>

7 
	siÁddrmsg
 {

8 
__u8
 
	miÁ_Ámûy
;

9 
__u8
 
	miÁ_¥efixÀn
;

10 
__u8
 
	miÁ_Êags
;

11 
__u8
 
	miÁ_sc›e
;

12 
__u32
 
	miÁ_ödex
;

23 
	mIFA_UNSPEC
,

24 
	mIFA_ADDRESS
,

25 
	mIFA_LOCAL
,

26 
	mIFA_LABEL
,

27 
	mIFA_BROADCAST
,

28 
	mIFA_ANYCAST
,

29 
	mIFA_CACHEINFO
,

30 
	mIFA_MULTICAST
,

31 
	m__IFA_MAX
,

34 
	#IFA_MAX
 (
__IFA_MAX
 - 1)

	)

37 
	#IFA_F_SECONDARY
 0x01

	)

38 
	#IFA_F_TEMPORARY
 
IFA_F_SECONDARY


	)

40 
	#IFA_F_NODAD
 0x02

	)

41 
	#IFA_F_OPTIMISTIC
 0x04

	)

42 
	#IFA_F_DADFAILED
 0x08

	)

43 
	#IFA_F_HOMEADDRESS
 0x10

	)

44 
	#IFA_F_DEPRECATED
 0x20

	)

45 
	#IFA_F_TENTATIVE
 0x40

	)

46 
	#IFA_F_PERMANENT
 0x80

	)

48 
	siÁ_ˇcheöfo
 {

49 
__u32
 
	miÁ_¥e„ªd
;

50 
__u32
 
	miÁ_vÆid
;

51 
__u32
 
	mc°amp
;

52 
__u32
 
	mt°amp
;

56 
	#IFA_RTA
(
r
Ë((
π©å
*)(((*)‘)Ë+ 
	`NLMSG_ALIGN
((
iÁddrmsg
))))

	)

57 
	#IFA_PAYLOAD
(
n
Ë
	`NLMSG_PAYLOAD
“,(
iÁddrmsg
))

	)

	@/usr/include/linux/if_link.h

1 #i‚de‡
_LINUX_IF_LINK_H


2 
	#_LINUX_IF_LINK_H


	)

4 
	~<löux/ty≥s.h
>

5 
	~<löux/√éök.h
>

8 
	sπ∆_lök_°©s
 {

9 
__u32
 
	mrx_∑ckës
;

10 
__u32
 
	mtx_∑ckës
;

11 
__u32
 
	mrx_byãs
;

12 
__u32
 
	mtx_byãs
;

13 
__u32
 
	mrx_îr‹s
;

14 
__u32
 
	mtx_îr‹s
;

15 
__u32
 
	mrx_dr›≥d
;

16 
__u32
 
	mtx_dr›≥d
;

17 
__u32
 
	mmu…iˇ°
;

18 
__u32
 
	mcﬁlisi⁄s
;

21 
__u32
 
	mrx_Àngth_îr‹s
;

22 
__u32
 
	mrx_ovî_îr‹s
;

23 
__u32
 
	mrx_¸c_îr‹s
;

24 
__u32
 
	mrx_‰ame_îr‹s
;

25 
__u32
 
	mrx_fifo_îr‹s
;

26 
__u32
 
	mrx_mis£d_îr‹s
;

29 
__u32
 
	mtx_ab‹ãd_îr‹s
;

30 
__u32
 
	mtx_ˇºõr_îr‹s
;

31 
__u32
 
	mtx_fifo_îr‹s
;

32 
__u32
 
	mtx_hóπbót_îr‹s
;

33 
__u32
 
	mtx_wödow_îr‹s
;

36 
__u32
 
	mrx_com¥es£d
;

37 
__u32
 
	mtx_com¥es£d
;

41 
	sπ∆_lök_°©s64
 {

42 
__u64
 
	mrx_∑ckës
;

43 
__u64
 
	mtx_∑ckës
;

44 
__u64
 
	mrx_byãs
;

45 
__u64
 
	mtx_byãs
;

46 
__u64
 
	mrx_îr‹s
;

47 
__u64
 
	mtx_îr‹s
;

48 
__u64
 
	mrx_dr›≥d
;

49 
__u64
 
	mtx_dr›≥d
;

50 
__u64
 
	mmu…iˇ°
;

51 
__u64
 
	mcﬁlisi⁄s
;

54 
__u64
 
	mrx_Àngth_îr‹s
;

55 
__u64
 
	mrx_ovî_îr‹s
;

56 
__u64
 
	mrx_¸c_îr‹s
;

57 
__u64
 
	mrx_‰ame_îr‹s
;

58 
__u64
 
	mrx_fifo_îr‹s
;

59 
__u64
 
	mrx_mis£d_îr‹s
;

62 
__u64
 
	mtx_ab‹ãd_îr‹s
;

63 
__u64
 
	mtx_ˇºõr_îr‹s
;

64 
__u64
 
	mtx_fifo_îr‹s
;

65 
__u64
 
	mtx_hóπbót_îr‹s
;

66 
__u64
 
	mtx_wödow_îr‹s
;

69 
__u64
 
	mrx_com¥es£d
;

70 
__u64
 
	mtx_com¥es£d
;

74 
	sπ∆_lök_ifm≠
 {

75 
__u64
 
	mmem_°¨t
;

76 
__u64
 
	mmem_íd
;

77 
__u64
 
	mba£_addr
;

78 
__u16
 
	múq
;

79 
__u8
 
	mdma
;

80 
__u8
 
	mp‹t
;

102 
	mIFLA_UNSPEC
,

103 
	mIFLA_ADDRESS
,

104 
	mIFLA_BROADCAST
,

105 
	mIFLA_IFNAME
,

106 
	mIFLA_MTU
,

107 
	mIFLA_LINK
,

108 
	mIFLA_QDISC
,

109 
	mIFLA_STATS
,

110 
	mIFLA_COST
,

111 
	#IFLA_COST
 
IFLA_COST


	)

112 
	mIFLA_PRIORITY
,

113 
	#IFLA_PRIORITY
 
IFLA_PRIORITY


	)

114 
	mIFLA_MASTER
,

115 
	#IFLA_MASTER
 
IFLA_MASTER


	)

116 
	mIFLA_WIRELESS
,

117 
	#IFLA_WIRELESS
 
IFLA_WIRELESS


	)

118 
	mIFLA_PROTINFO
,

119 
	#IFLA_PROTINFO
 
IFLA_PROTINFO


	)

120 
	mIFLA_TXQLEN
,

121 
	#IFLA_TXQLEN
 
IFLA_TXQLEN


	)

122 
	mIFLA_MAP
,

123 
	#IFLA_MAP
 
IFLA_MAP


	)

124 
	mIFLA_WEIGHT
,

125 
	#IFLA_WEIGHT
 
IFLA_WEIGHT


	)

126 
	mIFLA_OPERSTATE
,

127 
	mIFLA_LINKMODE
,

128 
	mIFLA_LINKINFO
,

129 
	#IFLA_LINKINFO
 
IFLA_LINKINFO


	)

130 
	mIFLA_NET_NS_PID
,

131 
	mIFLA_IFALIAS
,

132 
	mIFLA_NUM_VF
,

133 
	mIFLA_VFINFO_LIST
,

134 
	mIFLA_STATS64
,

135 
	mIFLA_VF_PORTS
,

136 
	mIFLA_PORT_SELF
,

137 
	mIFLA_AF_SPEC
,

138 
	mIFLA_GROUP
,

139 
	mIFLA_NET_NS_FD
,

140 
	mIFLA_EXT_MASK
,

141 
	m__IFLA_MAX


145 
	#IFLA_MAX
 (
__IFLA_MAX
 - 1)

	)

148 
	#IFLA_RTA
(
r
Ë((
π©å
*)(((*)‘)Ë+ 
	`NLMSG_ALIGN
((
iföfomsg
))))

	)

149 
	#IFLA_PAYLOAD
(
n
Ë
	`NLMSG_PAYLOAD
“,(
iföfomsg
))

	)

152 
	mIFLA_INET_UNSPEC
,

153 
	mIFLA_INET_CONF
,

154 
	m__IFLA_INET_MAX
,

157 
	#IFLA_INET_MAX
 (
__IFLA_INET_MAX
 - 1)

	)

190 
	mIFLA_INET6_UNSPEC
,

191 
	mIFLA_INET6_FLAGS
,

192 
	mIFLA_INET6_CONF
,

193 
	mIFLA_INET6_STATS
,

194 
	mIFLA_INET6_MCAST
,

195 
	mIFLA_INET6_CACHEINFO
,

196 
	mIFLA_INET6_ICMP6STATS
,

197 
	m__IFLA_INET6_MAX


200 
	#IFLA_INET6_MAX
 (
__IFLA_INET6_MAX
 - 1)

	)

202 
	siÊa_ˇcheöfo
 {

203 
__u32
 
	mmax_ªasm_Àn
;

204 
__u32
 
	mt°amp
;

205 
__u32
 
	mªachabÀ_time
;

206 
__u32
 
	mªå™s_time
;

210 
	mIFLA_INFO_UNSPEC
,

211 
	mIFLA_INFO_KIND
,

212 
	mIFLA_INFO_DATA
,

213 
	mIFLA_INFO_XSTATS
,

214 
	m__IFLA_INFO_MAX
,

217 
	#IFLA_INFO_MAX
 (
__IFLA_INFO_MAX
 - 1)

	)

222 
	mIFLA_VLAN_UNSPEC
,

223 
	mIFLA_VLAN_ID
,

224 
	mIFLA_VLAN_FLAGS
,

225 
	mIFLA_VLAN_EGRESS_QOS
,

226 
	mIFLA_VLAN_INGRESS_QOS
,

227 
	m__IFLA_VLAN_MAX
,

230 
	#IFLA_VLAN_MAX
 (
__IFLA_VLAN_MAX
 - 1)

	)

232 
	siÊa_vœn_Êags
 {

233 
__u32
 
	mÊags
;

234 
__u32
 
	mmask
;

238 
	mIFLA_VLAN_QOS_UNSPEC
,

239 
	mIFLA_VLAN_QOS_MAPPING
,

240 
	m__IFLA_VLAN_QOS_MAX


243 
	#IFLA_VLAN_QOS_MAX
 (
__IFLA_VLAN_QOS_MAX
 - 1)

	)

245 
	siÊa_vœn_qos_m≠pög
 {

246 
__u32
 
	m‰om
;

247 
__u32
 
	mto
;

252 
	mIFLA_MACVLAN_UNSPEC
,

253 
	mIFLA_MACVLAN_MODE
,

254 
	m__IFLA_MACVLAN_MAX
,

257 
	#IFLA_MACVLAN_MAX
 (
__IFLA_MACVLAN_MAX
 - 1)

	)

259 
	emacvœn_mode
 {

260 
	mMACVLAN_MODE_PRIVATE
 = 1,

261 
	mMACVLAN_MODE_VEPA
 = 2,

262 
	mMACVLAN_MODE_BRIDGE
 = 4,

263 
	mMACVLAN_MODE_PASSTHRU
 = 8,

269 
	mIFLA_VF_INFO_UNSPEC
,

270 
	mIFLA_VF_INFO
,

271 
	m__IFLA_VF_INFO_MAX
,

274 
	#IFLA_VF_INFO_MAX
 (
__IFLA_VF_INFO_MAX
 - 1)

	)

277 
	mIFLA_VF_UNSPEC
,

278 
	mIFLA_VF_MAC
,

279 
	mIFLA_VF_VLAN
,

280 
	mIFLA_VF_TX_RATE
,

281 
	mIFLA_VF_SPOOFCHK
,

282 
	m__IFLA_VF_MAX
,

285 
	#IFLA_VF_MAX
 (
__IFLA_VF_MAX
 - 1)

	)

287 
	siÊa_vf_mac
 {

288 
__u32
 
	mvf
;

289 
__u8
 
	mmac
[32];

292 
	siÊa_vf_vœn
 {

293 
__u32
 
	mvf
;

294 
__u32
 
	mvœn
;

295 
__u32
 
	mqos
;

298 
	siÊa_vf_tx_øã
 {

299 
__u32
 
	mvf
;

300 
__u32
 
	møã
;

303 
	siÊa_vf_•oofchk
 {

304 
__u32
 
	mvf
;

305 
__u32
 
	m£âög
;

324 
	mIFLA_VF_PORT_UNSPEC
,

325 
	mIFLA_VF_PORT
,

326 
	m__IFLA_VF_PORT_MAX
,

329 
	#IFLA_VF_PORT_MAX
 (
__IFLA_VF_PORT_MAX
 - 1)

	)

332 
	mIFLA_PORT_UNSPEC
,

333 
	mIFLA_PORT_VF
,

334 
	mIFLA_PORT_PROFILE
,

335 
	mIFLA_PORT_VSI_TYPE
,

336 
	mIFLA_PORT_INSTANCE_UUID
,

337 
	mIFLA_PORT_HOST_UUID
,

338 
	mIFLA_PORT_REQUEST
,

339 
	mIFLA_PORT_RESPONSE
,

340 
	m__IFLA_PORT_MAX
,

343 
	#IFLA_PORT_MAX
 (
__IFLA_PORT_MAX
 - 1)

	)

345 
	#PORT_PROFILE_MAX
 40

	)

346 
	#PORT_UUID_MAX
 16

	)

347 
	#PORT_SELF_VF
 -1

	)

350 
	mPORT_REQUEST_PREASSOCIATE
 = 0,

351 
	mPORT_REQUEST_PREASSOCIATE_RR
,

352 
	mPORT_REQUEST_ASSOCIATE
,

353 
	mPORT_REQUEST_DISASSOCIATE
,

357 
	mPORT_VDP_RESPONSE_SUCCESS
 = 0,

358 
	mPORT_VDP_RESPONSE_INVALID_FORMAT
,

359 
	mPORT_VDP_RESPONSE_INSUFFICIENT_RESOURCES
,

360 
	mPORT_VDP_RESPONSE_UNUSED_VTID
,

361 
	mPORT_VDP_RESPONSE_VTID_VIOLATION
,

362 
	mPORT_VDP_RESPONSE_VTID_VERSION_VIOALTION
,

363 
	mPORT_VDP_RESPONSE_OUT_OF_SYNC
,

365 
	mPORT_PROFILE_RESPONSE_SUCCESS
 = 0x100,

366 
	mPORT_PROFILE_RESPONSE_INPROGRESS
,

367 
	mPORT_PROFILE_RESPONSE_INVALID
,

368 
	mPORT_PROFILE_RESPONSE_BADSTATE
,

369 
	mPORT_PROFILE_RESPONSE_INSUFFICIENT_RESOURCES
,

370 
	mPORT_PROFILE_RESPONSE_ERROR
,

373 
	siÊa_p‹t_vsi
 {

374 
__u8
 
	mvsi_mgr_id
;

375 
__u8
 
	mvsi_ty≥_id
[3];

376 
__u8
 
	mvsi_ty≥_vîsi⁄
;

377 
__u8
 
	m∑d
[3];

	@/usr/include/linux/neighbour.h

1 #i‚de‡
__LINUX_NEIGHBOUR_H


2 
	#__LINUX_NEIGHBOUR_H


	)

4 
	~<löux/ty≥s.h
>

5 
	~<löux/√éök.h
>

7 
	sndmsg
 {

8 
__u8
 
	mndm_Ámûy
;

9 
__u8
 
	mndm_∑d1
;

10 
__u16
 
	mndm_∑d2
;

11 
__s32
 
	mndm_ifödex
;

12 
__u16
 
	mndm_°©e
;

13 
__u8
 
	mndm_Êags
;

14 
__u8
 
	mndm_ty≥
;

18 
	mNDA_UNSPEC
,

19 
	mNDA_DST
,

20 
	mNDA_LLADDR
,

21 
	mNDA_CACHEINFO
,

22 
	mNDA_PROBES
,

23 
	m__NDA_MAX


26 
	#NDA_MAX
 (
__NDA_MAX
 - 1)

	)

32 
	#NTF_USE
 0x01

	)

33 
	#NTF_PROXY
 0x08

	)

34 
	#NTF_ROUTER
 0x80

	)

40 
	#NUD_INCOMPLETE
 0x01

	)

41 
	#NUD_REACHABLE
 0x02

	)

42 
	#NUD_STALE
 0x04

	)

43 
	#NUD_DELAY
 0x08

	)

44 
	#NUD_PROBE
 0x10

	)

45 
	#NUD_FAILED
 0x20

	)

48 
	#NUD_NOARP
 0x40

	)

49 
	#NUD_PERMANENT
 0x80

	)

50 
	#NUD_NONE
 0x00

	)

57 
	snda_ˇcheöfo
 {

58 
__u32
 
	mndm_c⁄fúmed
;

59 
__u32
 
	mndm_u£d
;

60 
__u32
 
	mndm_upd©ed
;

61 
__u32
 
	mndm_ªf˙t
;

89 
	sndt_°©s
 {

90 
__u64
 
	mndts_Ælocs
;

91 
__u64
 
	mndts_de°roys
;

92 
__u64
 
	mndts_hash_grows
;

93 
__u64
 
	mndts_ªs_Áûed
;

94 
__u64
 
	mndts_lookups
;

95 
__u64
 
	mndts_hôs
;

96 
__u64
 
	mndts_rcv_¥obes_mˇ°
;

97 
__u64
 
	mndts_rcv_¥obes_uˇ°
;

98 
__u64
 
	mndts_≥riodic_gc_runs
;

99 
__u64
 
	mndts_f‹˚d_gc_runs
;

103 
	mNDTPA_UNSPEC
,

104 
	mNDTPA_IFINDEX
,

105 
	mNDTPA_REFCNT
,

106 
	mNDTPA_REACHABLE_TIME
,

107 
	mNDTPA_BASE_REACHABLE_TIME
,

108 
	mNDTPA_RETRANS_TIME
,

109 
	mNDTPA_GC_STALETIME
,

110 
	mNDTPA_DELAY_PROBE_TIME
,

111 
	mNDTPA_QUEUE_LEN
,

112 
	mNDTPA_APP_PROBES
,

113 
	mNDTPA_UCAST_PROBES
,

114 
	mNDTPA_MCAST_PROBES
,

115 
	mNDTPA_ANYCAST_DELAY
,

116 
	mNDTPA_PROXY_DELAY
,

117 
	mNDTPA_PROXY_QLEN
,

118 
	mNDTPA_LOCKTIME
,

119 
	m__NDTPA_MAX


121 
	#NDTPA_MAX
 (
__NDTPA_MAX
 - 1)

	)

123 
	sndtmsg
 {

124 
__u8
 
	mndtm_Ámûy
;

125 
__u8
 
	mndtm_∑d1
;

126 
__u16
 
	mndtm_∑d2
;

129 
	sndt_c⁄fig
 {

130 
__u16
 
	mndtc_key_Àn
;

131 
__u16
 
	mndtc_íåy_size
;

132 
__u32
 
	mndtc_íåõs
;

133 
__u32
 
	mndtc_œ°_Êush
;

134 
__u32
 
	mndtc_œ°_ønd
;

135 
__u32
 
	mndtc_hash_∫d
;

136 
__u32
 
	mndtc_hash_mask
;

137 
__u32
 
	mndtc_hash_chaö_gc
;

138 
__u32
 
	mndtc_¥oxy_qÀn
;

142 
	mNDTA_UNSPEC
,

143 
	mNDTA_NAME
,

144 
	mNDTA_THRESH1
,

145 
	mNDTA_THRESH2
,

146 
	mNDTA_THRESH3
,

147 
	mNDTA_CONFIG
,

148 
	mNDTA_PARMS
,

149 
	mNDTA_STATS
,

150 
	mNDTA_GC_INTERVAL
,

151 
	m__NDTA_MAX


153 
	#NDTA_MAX
 (
__NDTA_MAX
 - 1)

	)

	@/usr/include/linux/posix_types.h

1 #i‚de‡
_LINUX_POSIX_TYPES_H


2 
	#_LINUX_POSIX_TYPES_H


	)

4 
	~<löux/°ddef.h
>

21 #unde‡
__NFDBITS


22 
	#__NFDBITS
 (8 * ())

	)

24 #unde‡
__FD_SETSIZE


25 
	#__FD_SETSIZE
 1024

	)

27 #unde‡
__FDSET_LONGS


28 
	#__FDSET_LONGS
 (
__FD_SETSIZE
/
__NFDBITS
)

	)

30 #unde‡
__FDELT


31 
	#__FDELT
(
d
Ë((dË/ 
__NFDBITS
)

	)

33 #unde‡
__FDMASK


34 
	#__FDMASK
(
d
Ë(1UL << ((dË% 
__NFDBITS
))

	)

37 
	mfds_bôs
 [
__FDSET_LONGS
];

38 } 
	t__kî√l_fd_£t
;

41 (*
	t__kî√l_sigh™dÀr_t
)();

44 
	t__kî√l_key_t
;

45 
	t__kî√l_mqd_t
;

47 
	~<asm/posix_ty≥s.h
>

	@/usr/include/linux/socket.h

1 #i‚de‡
_LINUX_SOCKET_H


2 
	#_LINUX_SOCKET_H


	)

7 
	#_K_SS_MAXSIZE
 128

	)

8 
	#_K_SS_ALIGNSIZE
 (
	`__Æignof__
 (
sockaddr
 *))

	)

11 
	t__kî√l_ß_Ámûy_t
;

13 
	s__kî√l_sockaddr_°‹age
 {

14 
__kî√l_ß_Ámûy_t
 
	mss_Ámûy
;

16 
	m__d©a
[
_K_SS_MAXSIZE
 - ()];

19 } 
__©åibuã__
 ((
Æig√d
(
_K_SS_ALIGNSIZE
)));

	@/usr/include/locale.h

23 #i‚def 
_LOCALE_H


24 
	#_LOCALE_H
 1

	)

26 
	~<„©uªs.h
>

28 
	#__√ed_NULL


	)

29 
	~<°ddef.h
>

30 
	~<bôs/loˇÀ.h
>

32 
	g__BEGIN_DECLS


36 
	#LC_CTYPE
 
__LC_CTYPE


	)

37 
	#LC_NUMERIC
 
__LC_NUMERIC


	)

38 
	#LC_TIME
 
__LC_TIME


	)

39 
	#LC_COLLATE
 
__LC_COLLATE


	)

40 
	#LC_MONETARY
 
__LC_MONETARY


	)

41 
	#LC_MESSAGES
 
__LC_MESSAGES


	)

42 
	#LC_ALL
 
__LC_ALL


	)

43 
	#LC_PAPER
 
__LC_PAPER


	)

44 
	#LC_NAME
 
__LC_NAME


	)

45 
	#LC_ADDRESS
 
__LC_ADDRESS


	)

46 
	#LC_TELEPHONE
 
__LC_TELEPHONE


	)

47 
	#LC_MEASUREMENT
 
__LC_MEASUREMENT


	)

48 
	#LC_IDENTIFICATION
 
__LC_IDENTIFICATION


	)

51 
__BEGIN_NAMESPACE_STD


54 
	slc⁄v


58 *
	mdecimÆ_poöt
;

59 *
	mthoußnds_£p
;

65 *
	mgroupög
;

71 *
	möt_cuº_symbﬁ
;

72 *
	mcuºícy_symbﬁ
;

73 *
	mm⁄_decimÆ_poöt
;

74 *
	mm⁄_thoußnds_£p
;

75 *
	mm⁄_groupög
;

76 *
	mposôive_sign
;

77 *
	m√g©ive_sign
;

78 
	möt_‰ac_digôs
;

79 
	m‰ac_digôs
;

81 
	mp_cs_¥e˚des
;

83 
	mp_£p_by_•a˚
;

85 
	mn_cs_¥e˚des
;

87 
	mn_£p_by_•a˚
;

94 
	mp_sign_po¢
;

95 
	mn_sign_po¢
;

96 #ifde‡
__USE_ISOC99


98 
	möt_p_cs_¥e˚des
;

100 
	möt_p_£p_by_•a˚
;

102 
	möt_n_cs_¥e˚des
;

104 
	möt_n_£p_by_•a˚
;

111 
	möt_p_sign_po¢
;

112 
	möt_n_sign_po¢
;

114 
	m__öt_p_cs_¥e˚des
;

115 
	m__öt_p_£p_by_•a˚
;

116 
	m__öt_n_cs_¥e˚des
;

117 
	m__öt_n_£p_by_•a˚
;

118 
	m__öt_p_sign_po¢
;

119 
	m__öt_n_sign_po¢
;

125 *
	$£éoˇÀ
 (
__ˇãg‹y
, 
__c⁄°
 *
__loˇÀ
Ë
__THROW
;

128 
lc⁄v
 *
	$loˇÀc⁄v
 (Ë
__THROW
;

130 
__END_NAMESPACE_STD


133 #ifdef 
__USE_XOPEN2K8


146 
	~<xloˇÀ.h
>

152 
__loˇÀ_t
 
	$√wloˇÀ
 (
__ˇãg‹y_mask
, 
__c⁄°
 *
__loˇÀ
,

153 
__loˇÀ_t
 
__ba£
Ë
__THROW
;

159 
	#LC_CTYPE_MASK
 (1 << 
__LC_CTYPE
)

	)

160 
	#LC_NUMERIC_MASK
 (1 << 
__LC_NUMERIC
)

	)

161 
	#LC_TIME_MASK
 (1 << 
__LC_TIME
)

	)

162 
	#LC_COLLATE_MASK
 (1 << 
__LC_COLLATE
)

	)

163 
	#LC_MONETARY_MASK
 (1 << 
__LC_MONETARY
)

	)

164 
	#LC_MESSAGES_MASK
 (1 << 
__LC_MESSAGES
)

	)

165 
	#LC_PAPER_MASK
 (1 << 
__LC_PAPER
)

	)

166 
	#LC_NAME_MASK
 (1 << 
__LC_NAME
)

	)

167 
	#LC_ADDRESS_MASK
 (1 << 
__LC_ADDRESS
)

	)

168 
	#LC_TELEPHONE_MASK
 (1 << 
__LC_TELEPHONE
)

	)

169 
	#LC_MEASUREMENT_MASK
 (1 << 
__LC_MEASUREMENT
)

	)

170 
	#LC_IDENTIFICATION_MASK
 (1 << 
__LC_IDENTIFICATION
)

	)

171 
	#LC_ALL_MASK
 (
LC_CTYPE_MASK
 \

172 | 
LC_NUMERIC_MASK
 \

173 | 
LC_TIME_MASK
 \

174 | 
LC_COLLATE_MASK
 \

175 | 
LC_MONETARY_MASK
 \

176 | 
LC_MESSAGES_MASK
 \

177 | 
LC_PAPER_MASK
 \

178 | 
LC_NAME_MASK
 \

179 | 
LC_ADDRESS_MASK
 \

180 | 
LC_TELEPHONE_MASK
 \

181 | 
LC_MEASUREMENT_MASK
 \

182 | 
LC_IDENTIFICATION_MASK
 \

183 )

	)

187 
__loˇÀ_t
 
	$du∂oˇÀ
 (
__loˇÀ_t
 
__d©a£t
Ë
__THROW
;

191 
	$‰ìloˇÀ
 (
__loˇÀ_t
 
__d©a£t
Ë
__THROW
;

198 
__loˇÀ_t
 
	$u£loˇÀ
 (
__loˇÀ_t
 
__d©a£t
Ë
__THROW
;

202 
	#LC_GLOBAL_LOCALE
 ((
__loˇÀ_t
Ë-1L)

	)

206 
__END_DECLS


	@/usr/include/rpc/netdb.h

36 #i‚de‡
_RPC_NETDB_H


37 
	#_RPC_NETDB_H
 1

	)

39 
	~<„©uªs.h
>

41 
	#__√ed_size_t


	)

42 
	~<°ddef.h
>

44 
__BEGIN_DECLS


46 
	sΩ˚¡


48 *
	mr_«me
;

49 **
	mr_Æü£s
;

50 
	mr_numbî
;

53 
	$£åp˚¡
 (
__°ay›í
Ë
__THROW
;

54 
	$ídΩ˚¡
 (Ë
__THROW
;

55 
Ω˚¡
 *
	$gëΩcby«me
 (
__c⁄°
 *
__«me
Ë
__THROW
;

56 
Ω˚¡
 *
	$gëΩcbynumbî
 (
__numbî
Ë
__THROW
;

57 
Ω˚¡
 *
	$gëΩ˚¡
 (Ë
__THROW
;

59 #ifde‡
__USE_MISC


60 
	$gëΩcby«me_r
 (
__c⁄°
 *
__«me
, 
Ω˚¡
 *
__ªsu…_buf
,

61 *
__buf„r
, 
size_t
 
__buÊí
,

62 
Ω˚¡
 **
__ªsu…
Ë
__THROW
;

64 
	$gëΩcbynumbî_r
 (
__numbî
, 
Ω˚¡
 *
__ªsu…_buf
,

65 *
__buf„r
, 
size_t
 
__buÊí
,

66 
Ω˚¡
 **
__ªsu…
Ë
__THROW
;

68 
	$gëΩ˚¡_r
 (
Ω˚¡
 *
__ªsu…_buf
, *
__buf„r
,

69 
size_t
 
__buÊí
, 
Ω˚¡
 **
__ªsu…
Ë
__THROW
;

72 
__END_DECLS


	@/usr/include/stdint.h

23 #i‚de‡
_STDINT_H


24 
	#_STDINT_H
 1

	)

26 
	~<„©uªs.h
>

27 
	~<bôs/wch¨.h
>

28 
	~<bôs/w‹dsize.h
>

35 #i‚de‡
__öt8_t_deföed


36 
	#__öt8_t_deföed


	)

37 sig√d 
	töt8_t
;

38 
	töt16_t
;

39 
	töt32_t
;

40 #i‡
__WORDSIZE
 == 64

41 
	töt64_t
;

43 
__exãnsi⁄__


44 
	töt64_t
;

49 
	tuöt8_t
;

50 
	tuöt16_t
;

51 #i‚de‡
__uöt32_t_deföed


52 
	tuöt32_t
;

53 
	#__uöt32_t_deföed


	)

55 #i‡
__WORDSIZE
 == 64

56 
	tuöt64_t
;

58 
__exãnsi⁄__


59 
	tuöt64_t
;

66 sig√d 
	töt_Àa°8_t
;

67 
	töt_Àa°16_t
;

68 
	töt_Àa°32_t
;

69 #i‡
__WORDSIZE
 == 64

70 
	töt_Àa°64_t
;

72 
__exãnsi⁄__


73 
	töt_Àa°64_t
;

77 
	tuöt_Àa°8_t
;

78 
	tuöt_Àa°16_t
;

79 
	tuöt_Àa°32_t
;

80 #i‡
__WORDSIZE
 == 64

81 
	tuöt_Àa°64_t
;

83 
__exãnsi⁄__


84 
	tuöt_Àa°64_t
;

91 sig√d 
	töt_Á°8_t
;

92 #i‡
__WORDSIZE
 == 64

93 
	töt_Á°16_t
;

94 
	töt_Á°32_t
;

95 
	töt_Á°64_t
;

97 
	töt_Á°16_t
;

98 
	töt_Á°32_t
;

99 
__exãnsi⁄__


100 
	töt_Á°64_t
;

104 
	tuöt_Á°8_t
;

105 #i‡
__WORDSIZE
 == 64

106 
	tuöt_Á°16_t
;

107 
	tuöt_Á°32_t
;

108 
	tuöt_Á°64_t
;

110 
	tuöt_Á°16_t
;

111 
	tuöt_Á°32_t
;

112 
__exãnsi⁄__


113 
	tuöt_Á°64_t
;

118 #i‡
__WORDSIZE
 == 64

119 #i‚de‡
__öçå_t_deföed


120 
	töçå_t
;

121 
	#__öçå_t_deföed


	)

123 
	tuöçå_t
;

125 #i‚de‡
__öçå_t_deföed


126 
	töçå_t
;

127 
	#__öçå_t_deföed


	)

129 
	tuöçå_t
;

134 #i‡
__WORDSIZE
 == 64

135 
	tötmax_t
;

136 
	tuötmax_t
;

138 
__exãnsi⁄__


139 
	tötmax_t
;

140 
__exãnsi⁄__


141 
	tuötmax_t
;

147 #i‡!
deföed
 
__˝lu•lus
 || deföed 
__STDC_LIMIT_MACROS


149 #i‡
__WORDSIZE
 == 64

150 
	#__INT64_C
(
c
Ë¯## 
L


	)

151 
	#__UINT64_C
(
c
Ë¯## 
UL


	)

153 
	#__INT64_C
(
c
Ë¯## 
LL


	)

154 
	#__UINT64_C
(
c
Ë¯## 
ULL


	)

160 
	#INT8_MIN
 (-128)

	)

161 
	#INT16_MIN
 (-32767-1)

	)

162 
	#INT32_MIN
 (-2147483647-1)

	)

163 
	#INT64_MIN
 (-
	`__INT64_C
(9223372036854775807)-1)

	)

165 
	#INT8_MAX
 (127)

	)

166 
	#INT16_MAX
 (32767)

	)

167 
	#INT32_MAX
 (2147483647)

	)

168 
	#INT64_MAX
 (
	`__INT64_C
(9223372036854775807))

	)

171 
	#UINT8_MAX
 (255)

	)

172 
	#UINT16_MAX
 (65535)

	)

173 
	#UINT32_MAX
 (4294967295U)

	)

174 
	#UINT64_MAX
 (
	`__UINT64_C
(18446744073709551615))

	)

178 
	#INT_LEAST8_MIN
 (-128)

	)

179 
	#INT_LEAST16_MIN
 (-32767-1)

	)

180 
	#INT_LEAST32_MIN
 (-2147483647-1)

	)

181 
	#INT_LEAST64_MIN
 (-
	`__INT64_C
(9223372036854775807)-1)

	)

183 
	#INT_LEAST8_MAX
 (127)

	)

184 
	#INT_LEAST16_MAX
 (32767)

	)

185 
	#INT_LEAST32_MAX
 (2147483647)

	)

186 
	#INT_LEAST64_MAX
 (
	`__INT64_C
(9223372036854775807))

	)

189 
	#UINT_LEAST8_MAX
 (255)

	)

190 
	#UINT_LEAST16_MAX
 (65535)

	)

191 
	#UINT_LEAST32_MAX
 (4294967295U)

	)

192 
	#UINT_LEAST64_MAX
 (
	`__UINT64_C
(18446744073709551615))

	)

196 
	#INT_FAST8_MIN
 (-128)

	)

197 #i‡
__WORDSIZE
 == 64

198 
	#INT_FAST16_MIN
 (-9223372036854775807L-1)

	)

199 
	#INT_FAST32_MIN
 (-9223372036854775807L-1)

	)

201 
	#INT_FAST16_MIN
 (-2147483647-1)

	)

202 
	#INT_FAST32_MIN
 (-2147483647-1)

	)

204 
	#INT_FAST64_MIN
 (-
	`__INT64_C
(9223372036854775807)-1)

	)

206 
	#INT_FAST8_MAX
 (127)

	)

207 #i‡
__WORDSIZE
 == 64

208 
	#INT_FAST16_MAX
 (9223372036854775807L)

	)

209 
	#INT_FAST32_MAX
 (9223372036854775807L)

	)

211 
	#INT_FAST16_MAX
 (2147483647)

	)

212 
	#INT_FAST32_MAX
 (2147483647)

	)

214 
	#INT_FAST64_MAX
 (
	`__INT64_C
(9223372036854775807))

	)

217 
	#UINT_FAST8_MAX
 (255)

	)

218 #i‡
__WORDSIZE
 == 64

219 
	#UINT_FAST16_MAX
 (18446744073709551615UL)

	)

220 
	#UINT_FAST32_MAX
 (18446744073709551615UL)

	)

222 
	#UINT_FAST16_MAX
 (4294967295U)

	)

223 
	#UINT_FAST32_MAX
 (4294967295U)

	)

225 
	#UINT_FAST64_MAX
 (
	`__UINT64_C
(18446744073709551615))

	)

229 #i‡
__WORDSIZE
 == 64

230 
	#INTPTR_MIN
 (-9223372036854775807L-1)

	)

231 
	#INTPTR_MAX
 (9223372036854775807L)

	)

232 
	#UINTPTR_MAX
 (18446744073709551615UL)

	)

234 
	#INTPTR_MIN
 (-2147483647-1)

	)

235 
	#INTPTR_MAX
 (2147483647)

	)

236 
	#UINTPTR_MAX
 (4294967295U)

	)

241 
	#INTMAX_MIN
 (-
	`__INT64_C
(9223372036854775807)-1)

	)

243 
	#INTMAX_MAX
 (
	`__INT64_C
(9223372036854775807))

	)

246 
	#UINTMAX_MAX
 (
	`__UINT64_C
(18446744073709551615))

	)

252 #i‡
__WORDSIZE
 == 64

253 
	#PTRDIFF_MIN
 (-9223372036854775807L-1)

	)

254 
	#PTRDIFF_MAX
 (9223372036854775807L)

	)

256 
	#PTRDIFF_MIN
 (-2147483647-1)

	)

257 
	#PTRDIFF_MAX
 (2147483647)

	)

261 
	#SIG_ATOMIC_MIN
 (-2147483647-1)

	)

262 
	#SIG_ATOMIC_MAX
 (2147483647)

	)

265 #i‡
__WORDSIZE
 == 64

266 
	#SIZE_MAX
 (18446744073709551615UL)

	)

268 
	#SIZE_MAX
 (4294967295U)

	)

272 #i‚de‡
WCHAR_MIN


274 
	#WCHAR_MIN
 
__WCHAR_MIN


	)

275 
	#WCHAR_MAX
 
__WCHAR_MAX


	)

279 
	#WINT_MIN
 (0u)

	)

280 
	#WINT_MAX
 (4294967295u)

	)

287 #i‡!
deföed
 
__˝lu•lus
 || deföed 
__STDC_CONSTANT_MACROS


290 
	#INT8_C
(
c
Ë
	)
c

291 
	#INT16_C
(
c
Ë
	)
c

292 
	#INT32_C
(
c
Ë
	)
c

293 #i‡
__WORDSIZE
 == 64

294 
	#INT64_C
(
c
Ë¯## 
L


	)

296 
	#INT64_C
(
c
Ë¯## 
LL


	)

300 
	#UINT8_C
(
c
Ë
	)
c

301 
	#UINT16_C
(
c
Ë
	)
c

302 
	#UINT32_C
(
c
Ë¯## 
U


	)

303 #i‡
__WORDSIZE
 == 64

304 
	#UINT64_C
(
c
Ë¯## 
UL


	)

306 
	#UINT64_C
(
c
Ë¯## 
ULL


	)

310 #i‡
__WORDSIZE
 == 64

311 
	#INTMAX_C
(
c
Ë¯## 
L


	)

312 
	#UINTMAX_C
(
c
Ë¯## 
UL


	)

314 
	#INTMAX_C
(
c
Ë¯## 
LL


	)

315 
	#UINTMAX_C
(
c
Ë¯## 
ULL


	)

	@/usr/include/xlocale.h

21 #i‚de‡
_XLOCALE_H


22 
	#_XLOCALE_H
 1

	)

28 
	s__loˇÀ_°ru˘


31 
__loˇÀ_d©a
 *
	m__loˇÀs
[13];

34 c⁄° *
	m__˘y≥_b
;

35 c⁄° *
	m__˘y≥_tﬁowî
;

36 c⁄° *
	m__˘y≥_touµî
;

39 c⁄° *
	m__«mes
[13];

40 } *
	t__loˇÀ_t
;

43 
__loˇÀ_t
 
	tloˇÀ_t
;

	@/usr/include/_G_config.h

4 #i‚de‡
_G_c⁄fig_h


5 
	#_G_c⁄fig_h
 1

	)

9 
	~<bôs/ty≥s.h
>

10 
	#__√ed_size_t


	)

11 #i‡
deföed
 
_LIBC
 || deföed 
_GLIBCPP_USE_WCHAR_T


12 
	#__√ed_wch¨_t


	)

14 
	#__√ed_NULL


	)

15 
	~<°ddef.h
>

16 
	#__√ed_mb°©e_t


	)

17 #i‡
deföed
 
_LIBC
 || deföed 
_GLIBCPP_USE_WCHAR_T


18 
	#__√ed_wöt_t


	)

20 
	~<wch¨.h
>

21 
	#_G_size_t
 
size_t


	)

24 
__off_t
 
	m__pos
;

25 
__mb°©e_t
 
	m__°©e
;

26 } 
	t_G_Âos_t
;

29 
__off64_t
 
	m__pos
;

30 
__mb°©e_t
 
	m__°©e
;

31 } 
	t_G_Âos64_t
;

32 
	#_G_ssize_t
 
__ssize_t


	)

33 
	#_G_off_t
 
__off_t


	)

34 
	#_G_off64_t
 
__off64_t


	)

35 
	#_G_pid_t
 
__pid_t


	)

36 
	#_G_uid_t
 
__uid_t


	)

37 
	#_G_wch¨_t
 
wch¨_t


	)

38 
	#_G_wöt_t
 
wöt_t


	)

39 
	#_G_°©64
 
°©64


	)

40 #i‡
deföed
 
_LIBC
 || deföed 
_GLIBCPP_USE_WCHAR_T


41 
	~<gc⁄v.h
>

44 
__gc⁄v_öfo
 
	m__cd
;

47 
__gc⁄v_öfo
 
	m__cd
;

48 
__gc⁄v_°ï_d©a
 
	m__d©a
;

49 } 
	m__comböed
;

50 } 
	t_G_ic⁄v_t
;

53 
	t_G_öt16_t
 
	t__©åibuã__
 ((
	t__mode__
 (
	t__HI__
)));

54 
	t_G_öt32_t
 
	t__©åibuã__
 ((
	t__mode__
 (
	t__SI__
)));

55 
	t_G_uöt16_t
 
	t__©åibuã__
 ((
	t__mode__
 (
	t__HI__
)));

56 
	t_G_uöt32_t
 
	t__©åibuã__
 ((
	t__mode__
 (
	t__SI__
)));

58 
	#_G_HAVE_BOOL
 1

	)

62 
	#_G_HAVE_ATEXIT
 1

	)

63 
	#_G_HAVE_SYS_CDEFS
 1

	)

64 
	#_G_HAVE_SYS_WAIT
 1

	)

65 
	#_G_NEED_STDARG_H
 1

	)

66 
	#_G_va_li°
 
__gnuc_va_li°


	)

68 
	#_G_HAVE_PRINTF_FP
 1

	)

69 
	#_G_HAVE_MMAP
 1

	)

70 
	#_G_HAVE_MREMAP
 1

	)

71 
	#_G_HAVE_LONG_DOUBLE_IO
 1

	)

72 
	#_G_HAVE_IO_FILE_OPEN
 1

	)

73 
	#_G_HAVE_IO_GETLINE_INFO
 1

	)

75 
	#_G_IO_IO_FILE_VERSION
 0x20001

	)

77 
	#_G_OPEN64
 
__›í64


	)

78 
	#_G_LSEEK64
 
__l£ek64


	)

79 
	#_G_MMAP64
 
__mm≠64


	)

80 
	#_G_FSTAT64
(
fd
,
buf
Ë
	`__fx°©64
 (
_STAT_VER
, fd, buf)

	)

83 
	#_G_HAVE_ST_BLKSIZE
 
	`deföed
 (
_STATBUF_ST_BLKSIZE
)

	)

85 
	#_G_BUFSIZ
 8192

	)

88 
	#_G_NAMES_HAVE_UNDERSCORE
 0

	)

89 
	#_G_VTABLE_LABEL_HAS_LENGTH
 1

	)

90 
	#_G_USING_THUNKS
 1

	)

91 
	#_G_VTABLE_LABEL_PREFIX
 "__vt_"

	)

92 
	#_G_VTABLE_LABEL_PREFIX_ID
 
__vt_


	)

95 #i‡
deföed
 
__˝lu•lus
 || deföed 
__STDC__


96 
	#_G_ARGS
(
ARGLIST
Ë
	)
ARGLIST

98 
	#_G_ARGS
(
ARGLIST
Ë()

	)

	@/usr/include/linux/stddef.h

1 #i‚de‡
_LINUX_STDDEF_H


2 
	#_LINUX_STDDEF_H


	)

6 #unde‡
NULL


7 #i‡
deföed
(
__˝lu•lus
)

8 
	#NULL
 0

	)

10 
	#NULL
 ((*)0)

	)

	@/usr/include/gconv.h

23 #i‚de‡
_GCONV_H


24 
	#_GCONV_H
 1

	)

26 
	~<„©uªs.h
>

27 
	#__√ed_mb°©e_t


	)

28 
	#__√ed_wöt_t


	)

29 
	~<wch¨.h
>

30 
	#__√ed_size_t


	)

31 
	#__√ed_wch¨_t


	)

32 
	~<°ddef.h
>

35 
	#__UNKNOWN_10646_CHAR
 ((
wch¨_t
Ë0xfffd)

	)

40 
	m__GCONV_OK
 = 0,

41 
	m__GCONV_NOCONV
,

42 
	m__GCONV_NODB
,

43 
	m__GCONV_NOMEM
,

45 
	m__GCONV_EMPTY_INPUT
,

46 
	m__GCONV_FULL_OUTPUT
,

47 
	m__GCONV_ILLEGAL_INPUT
,

48 
	m__GCONV_INCOMPLETE_INPUT
,

50 
	m__GCONV_ILLEGAL_DESCRIPTOR
,

51 
	m__GCONV_INTERNAL_ERROR


58 
	m__GCONV_IS_LAST
 = 0x0001,

59 
	m__GCONV_IGNORE_ERRORS
 = 0x0002,

60 
	m__GCONV_SWAP
 = 0x0004

65 
	g__gc⁄v_°ï
;

66 
	g__gc⁄v_°ï_d©a
;

67 
	g__gc⁄v_lﬂded_obje˘
;

68 
	g__gc⁄v_å™s_d©a
;

72 (*
	t__gc⁄v_f˘
Ë(
	t__gc⁄v_°ï
 *, 
	t__gc⁄v_°ï_d©a
 *,

73 
	t__c⁄°
 **, __const *,

74 **, 
	tsize_t
 *, , );

77 
	$wöt_t
 (*
	t__gc⁄v_btowc_f˘
Ë(
	t__gc⁄v_°ï
 *, );

80 (*
	t__gc⁄v_öô_f˘
Ë(
	t__gc⁄v_°ï
 *);

81 (*
	t__gc⁄v_íd_f˘
Ë(
	t__gc⁄v_°ï
 *);

85 (*
	t__gc⁄v_å™s_f˘
Ë(
	t__gc⁄v_°ï
 *,

86 
	t__gc⁄v_°ï_d©a
 *, *,

87 
	t__c⁄°
 *,

88 
	t__c⁄°
 **,

89 
	t__c⁄°
 *, **,

90 
	tsize_t
 *);

93 (*
	t__gc⁄v_å™s_c⁄ãxt_f˘
Ë(*, 
	t__c⁄°
 *,

94 
	t__c⁄°
 *,

98 (*
	t__gc⁄v_å™s_quîy_f˘
Ë(
	t__c⁄°
 *, __const ***,

99 
	tsize_t
 *);

102 (*
	t__gc⁄v_å™s_öô_f˘
) (**, const *);

103 (*
	t__gc⁄v_å™s_íd_f˘
) (*);

105 
	s__gc⁄v_å™s_d©a


108 
__gc⁄v_å™s_f˘
 
__å™s_f˘
;

109 
__gc⁄v_å™s_c⁄ãxt_f˘
 
__å™s_c⁄ãxt_f˘
;

110 
__gc⁄v_å™s_íd_f˘
 
__å™s_íd_f˘
;

111 *
__d©a
;

112 
__gc⁄v_å™s_d©a
 *
__√xt
;

117 
	s__gc⁄v_°ï


119 
__gc⁄v_lﬂded_obje˘
 *
__shlib_h™dÀ
;

120 
__c⁄°
 *
__mod«me
;

122 
__cou¡î
;

124 *
__‰om_«me
;

125 *
__to_«me
;

127 
__gc⁄v_f˘
 
__f˘
;

128 
__gc⁄v_btowc_f˘
 
__btowc_f˘
;

129 
__gc⁄v_öô_f˘
 
__öô_f˘
;

130 
__gc⁄v_íd_f˘
 
__íd_f˘
;

134 
__mö_√eded_‰om
;

135 
__max_√eded_‰om
;

136 
__mö_√eded_to
;

137 
__max_√eded_to
;

140 
__°©eful
;

142 *
__d©a
;

147 
	s__gc⁄v_°ï_d©a


149 *
__outbuf
;

150 *
__outbu„nd
;

154 
__Êags
;

158 
__övoˇti⁄_cou¡î
;

162 
__öã∫Æ_u£
;

164 
__mb°©e_t
 *
__°©ï
;

165 
__mb°©e_t
 
__°©e
;

169 
__gc⁄v_å™s_d©a
 *
__å™s
;

174 
	s__gc⁄v_öfo


176 
size_t
 
__n°ïs
;

177 
__gc⁄v_°ï
 *
__°ïs
;

178 
__exãnsi⁄__
 
__gc⁄v_°ï_d©a
 
__d©a
 
__Êex¨r
;

179 } *
	t__gc⁄v_t
;

	@
1
.
1
/usr/include
136
2072
agentx.c
buffer.c
buffer.h
checksum.c
checksum.h
command.c
command.h
config.h
daemon.c
distribute.c
distribute.h
filter.c
filter.h
getopt.c
getopt.h
getopt1.c
hash.c
hash.h
if.c
if.h
if_rmap.c
if_rmap.h
jhash.c
jhash.h
keychain.c
keychain.h
libospf.h
linklist.c
linklist.h
log.c
log.h
md5.c
md5.h
memory.c
memory.h
memtypes.c
memtypes.h
network.c
network.h
pid_output.c
plist.c
plist.h
pqueue.c
pqueue.h
prefix.c
prefix.h
privs.c
privs.h
queue.h
regex-gnu.h
regex.c
route_types.h
routemap.c
routemap.h
sigevent.c
sigevent.h
smux.c
smux.h
snmp.c
sockopt.c
sockopt.h
sockunion.c
sockunion.h
str.c
str.h
stream.c
stream.h
table.c
table.h
thread.c
thread.h
vector.c
vector.h
version.h
vty.c
vty.h
workqueue.c
workqueue.h
zassert.h
zclient.c
zclient.h
zebra.h
/usr/include/alloca.h
/usr/include/arpa/inet.h
/usr/include/arpa/telnet.h
/usr/include/ctype.h
/usr/include/errno.h
/usr/include/execinfo.h
/usr/include/fcntl.h
/usr/include/gnu-versions.h
/usr/include/grp.h
/usr/include/inttypes.h
/usr/include/libintl.h
/usr/include/limits.h
/usr/include/linux/filter.h
/usr/include/linux/netlink.h
/usr/include/linux/rtnetlink.h
/usr/include/linux/types.h
/usr/include/linux/version.h
/usr/include/malloc.h
/usr/include/net/if.h
/usr/include/net/route.h
/usr/include/netdb.h
/usr/include/netinet/icmp6.h
/usr/include/netinet/in.h
/usr/include/netinet/in_systm.h
/usr/include/netinet/ip.h
/usr/include/netinet/tcp.h
/usr/include/pwd.h
/usr/include/signal.h
/usr/include/stdio.h
/usr/include/stdlib.h
/usr/include/string.h
/usr/include/strings.h
/usr/include/stropts.h
/usr/include/syslog.h
/usr/include/time.h
/usr/include/ucontext.h
/usr/include/unistd.h
/usr/include/wchar.h
/usr/include/wctype.h
/usr/include/endian.h
/usr/include/features.h
/usr/include/libio.h
/usr/include/linux/if_addr.h
/usr/include/linux/if_link.h
/usr/include/linux/neighbour.h
/usr/include/linux/posix_types.h
/usr/include/linux/socket.h
/usr/include/locale.h
/usr/include/rpc/netdb.h
/usr/include/stdint.h
/usr/include/xlocale.h
/usr/include/_G_config.h
/usr/include/linux/stddef.h
/usr/include/gconv.h
